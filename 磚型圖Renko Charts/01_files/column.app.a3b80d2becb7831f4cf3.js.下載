(self.webpackChunkheifetz=self.webpackChunkheifetz||[]).push([[8593],{77722:function(e,t,n){"use strict";var o=n(68562),r=n(61565),i=(n(32096),n(72351)),a=n(47698),c=n(66),s=n(87730),u=n(37015),l=n(18056),d=n(34458),p=n(96959),h=n(87363),f=n.n(h),m=n(2632),v=n.n(m),Z=n(57948),g=n(37839),E=n(97645),T=n.n(E),C=n(70175),A=n(91355),_=n(4428),y=n(8518),S=n(8392),I=n(52028),b=n(12856);function w(e){return new Promise((function(t,n){(0,I.match)(e,(function(e,o,r){e?n(e):t({redirectLocation:o,renderProps:r})}))}))}function R(e){return"/"===e?"Index":(0,b.pascalize)(e.replace(/\/|:|(\/:)|\(|\)/g,"_")).replace(/Id|AnswerId|UrlToken/g,"")}function N(e,t){return O.apply(this,arguments)}function O(){return O=(0,_.Z)((function(e,t){var n,o,r;return(0,y.Jh)(this,(function(i){switch(i.label){case 0:return e&&"string"==typeof t?[4,w({routes:e,location:t})]:[2];case 1:return(n=i.sent())?(o=n.renderProps.routes,r=o.map((function(e){var t=e.path;return t&&"/"!==t[0]&&(t="/"+t),t||""})),[2,R(r.join(""))]):[2]}}))})),O.apply(this,arguments)}var D={FCP:[0,1800,3e3],LCP:[0,2500,4e3],FID:[0,100,300],TTFB:[0,600,1e3],CLS:[0,.1,.25]};var B={FCP:[0,1e4],LCP:[0,15e3],FID:[0,1e4],TTFB:[0,1e4],CLS:[0,5]},P=function(e){e&&(0,S.U9)((function(t){var n=t||{},o=n.value,r=n.name;if(!isNaN(o)){var i=B[r],a="WebVitals";i&&(o<i[0]||o>i[1])&&(a="WebVitals_ExtremeValue"),u.ZP.timing({name:"".concat(a,".").concat(e,".").concat(r),options:{version:"all"}},o,.005),u.ZP.increment("WebVitalsGrade.".concat(e,".").concat(r,".").concat(function(e,t){if(void 0===e||!t)return"unknown";var n="poor";return e>=t[0]&&e<=t[1]?n="good":e>t[1]&&e<=t[2]&&(n="needsImprovement"),n}(o,D[r])))}}))};function k(){return k=(0,_.Z)((function(e){var t;return(0,y.Jh)(this,(function(n){switch(n.label){case 0:if(!e)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,N(e,location.pathname)];case 2:return P.apply(void 0,[n.sent()]),[3,4];case 3:return t=n.sent(),u.ZP.increment("WebVitals_ReportError.".concat(null==t?void 0:t.toString(),".count")),[3,4];case 4:return[2]}}))})),k.apply(this,arguments)}var x=n(51234),L=n(30135),U=n(88483),F=n(16600),M=n(19628),G=function(e){if(204===e.status)return!1;if("0"===e.headers.get("content-length"))return!1;var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")};function z(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(t,n).catch((function(e){throw e.fetchOptions=n,e})).then((function(e){return n.responseProcessor?n.responseProcessor(e):G(e)?e.json().then((function(t){return{json:t,res:e}})):e.text().then((function(t){return{text:t,res:e}}))})).then((function(e){var t=e.json,o=e.text,r=e.res,i=e.payload,c=(0,b.camelizeKeys)(t),s=c||o||i,u=t||o||i,l=c&&c.code;if(r.status>=300||l&&!n.ignoreCode){var d,p=new a.VL(r,n);throw p.payload=null!==(d=null==s?void 0:s.error)&&void 0!==d?d:s,p.res=r,p}return c&&Array.isArray(c)&&(s={count:Number(r.headers.get("x-result-count")),data:c},u=(0,F.Z)((0,U.Z)({},s),{data:t})),Object.assign(r,{res:r,payload:s,payloadOrigin:u})}))}}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=(0,a.SQ)(fetch,e);return function(e,o){return e=e.replace("zhuanlan.zhihu.com/api/api","zhuanlan.zhihu.com/api"),!(0,M.sD)(e)&&t&&(e="".concat(/zhihu.(com|dev)$/.test(t)?"":"http".concat("s",":"),"//").concat(t).concat(e)),n(e,o)}}var q=n(14910),V="UNAUTHORIZED_RELOAD",X=Object.values(A.AW);function W(e){var t=e.payload,n=e.res,o=t||{},r=o.code,i=o.message,a=n&&n.status;if(401===a&&100===r){var c=T().get(V);(!c||Date.now()-c.time>36e4)&&(T().set(V,{time:Date.now()}),location.reload())}if(403===a&&X.includes(r)){var s=Object.keys(A.AW).find((function(e){return A.AW[e]===r}));location.href="/account/unhuman?".concat(q.stringify({type:s,message:i,next:location.href}))}throw e}var K=n(78724);var j=n(40491),Y=n.n(j),Q=Y()((function(){var e={xZst81:void 0};try{window.addEventListener("wdfs1",(function(t){var n;e.xZst81=null==t||null===(n=t.detail)||void 0===n?void 0:n.xzst81})),n.e(1243).then(n.t.bind(n,30436,23)).then((function(t){var n=t.wdfs1;e.xZst81=n()}))}catch(e){var t;null===(t=window.Raven)||void 0===t||t.captureException(e,{fingerprint:["zswsdid-sdk"],level:"warning"})}return e})),J=Q,$=n(397);function ee(e){return e.replace(/(members|people|roundtables?)\/(\w+)/g,"$1").replace(/(\/appview|\/api|\/v4|\/\d+|-|\w{32})/g,"").substring(1).replace(/\//g,"-")||"Unknown"}function te(e){var t=e.protocol,n=e.host;return[t?t.replace(":",""):"",n?n.replace(/\.|:/g,"-"):""].join("-")}var ne=function(e,t){var n,o=null==t?void 0:t();if(o){var r={type:"ZERR_NO_AUTH_TOKEN",appName:"heifetz",spanName:"default",error:{name:e.name,message:e.message,payload:e.payload||"Unknown"},currentUser:o};(0,$.zB)(r),null===(n=window.Raven)||void 0===n||n.captureMessage("ZERR_NO_AUTH_TOKEN",{extra:r})}};function oe(e,t){var n,o=t.url,r=t.options,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.namespace,c=void 0===a?"Unknown":a,s=i.entryName,l=void 0===s?"FetchErrorV2":s,d=i.getCurrentUser,p=void 0===d?function(){return"Unknown"}:d,h=r||{},f=h.method,m=void 0===f?"GET":f,v=h.headers,Z=v?Object.keys(v).length:0,g=location.protocol,E=location.host,T=location.href,C=te({protocol:g,host:E}),A=new URL(o,T),_=ee(A.pathname),y=A.host!==E||A.protocol!==g;if(!y){var S=[c,l,"SameOriginV1",C,m,_,"count"].join(".");return u.ZP.increment({name:S,options:{version:"all"}}),void(401===e.status&&ne(e,p))}var I="CrossOrigin",b=[c,l,I,C,m,te(A),"H_".concat(Z),_,"count"].join(".");u.ZP.increment({name:b,options:{version:"all"}}),e.name="FetchError",null===(n=window.Raven)||void 0===n||n.captureException(e,{fingerprint:["FetchError",I],level:"warning",extra:{local:location.href,remote:o,method:m,headers:v}})}var re=n(30834);var ie={skipAutoSign:function(e){return!1},captureException:function(e,t){var n;null===(n=window.Raven)||void 0===n||n.captureException(e,{fingerprint:["ZsAutoSignature"],extra:t})}},ae=function(e){var t=e.ua,n=e.authInfo,o=e.passVars,r=e.xUDId;return t.ZhihuHybrid||t.Zhihu?(0,a.jO)({userAgent:t,authInfo:n,xUDId:r,xAppVersion:null==o?void 0:o["x-app-version"],xZst81:null==o?void 0:o["x-zst-81"]},ie):(0,a.OB)({},ie)},ce=function(){if(!new URLSearchParams(location.search).has("utm_id")){var e=new URL(location.href);e.searchParams.append("utm_id","0"),history.replaceState({},"",e.toString())}},se=function(){return null};var ue=n(60594);var le=n(40198),de=n(92799),pe=n(51433),he=n(23751),fe=n(95205);var me=function(e,t){try{var n=new URL(e,"https://www.zhihu.com");return new URLSearchParams(n.search).get("member_id")?e:function(e,t){var n=Object.keys(t).map((function(e){var n=t[e];return"".concat(e,"=").concat(n)})).join("&"),o=e.includes("?")?"&":"?";return"".concat(e).concat(o).concat(n)}(e,t)}catch(e){console.error(e)}return e},ve=["Creator"],Ze=function(e){var t=e.query.member_id,n=e.spanName,o=t&&ve.some((function(e){return n.includes(e)}));return function(e){return o?function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.method,i=void 0===r?"GET":r;return"GET"===i&&(n=me(n,{member_id:t})),e(n,o)}:e}};function ge(e){var t=e.createStore,o=e.onRequestRender,f=e.routes;document.addEventListener("DOMContentLoaded",(function(){var e;window.Raven||(window.Raven={captureException:se,captureMessage:se,captureBreadcrumb:se});var m=JSON.parse(document.getElementById("js-initialData").textContent);!function(e){k.apply(this,arguments)}(f);var E,_,y,S,I,b,w=m.initialState,R=m.subAppName,N=m.spanName,O=m.fetchHost,D=(0,de.Xj)(w),B=w.env,P=B.vars.passThroughHeaders,M=Boolean(B.userAgent.ZhihuHybrid||B.userAgent.Zhihu),G=M?{}:J(),q=[!1,l.Z.headers({config:B.ab.config,onTrigger:function(e){var t=X;t.dispatch((0,p.updateAb)({triggers:e})),(0,x.Aj)(t.getState().env.ab)}}),(0,a.JT)(),(0,a.DH)(),(0,c.Yq)(),(b=P,function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.allowPassThroughHeaders,r=void 0!==o&&o,i=(0,K.Z)(n,["allowPassThroughHeaders"]);return e(t,(0,F.Z)((0,U.Z)({},i),{headers:r?(0,U.Z)({},b,i.headers):i.headers}))}}),!M&&(I=G,function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,re.Z)({},n);return e(t,(0,F.Z)((0,U.Z)({},o),{headers:(0,U.Z)({},o.headers,I.xZst81&&{"x-zst-81":I.xZst81})}))}}),D&&Ze({query:B.ctx.query,spanName:N}),ae({ua:B.userAgent,authInfo:{id:w.currentUser},xUDId:B.xUDId,passVars:P}),(S=B.xTrafficFreeOrigin,function(e){return S?function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(t,(0,F.Z)((0,U.Z)({},n),{headers:(0,F.Z)((0,U.Z)({},n.headers),{"x-traffic-free":S})}))}:e}),(_=null,y=W,function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(t,n).then(_,y)}}),(E={namespace:R,getCurrentUser:function(){return w.currentUser}},function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(t,n).catch((function(e){throw/--(mr|box)/.test(location.host)||/--(mr|box)/.test(t)||oe(e,{url:t,options:n},E),e}))}}),z].filter(Boolean),V=H(q,O),X=t(w,{http:V});X.dispatch((0,de.GM)(navigator.userAgent)),!1===T().get(A.Xq)&&X.dispatch((0,de.JT)(!1)),"production"===B.trafficSource&&v()(h,(function(e,t){return window.Raven.captureException(e,{extra:t}),null})),(0,x.Aj)(B.ab),s.Z.install({appName:"main"===R?"heifetz":"heifetz-".concat(R),timingSampleRate:.001});var j=(0,le.ib)(X.getState()),Y=(0,de.Uh)(X.getState()),Q=(0,de.Hu)(X.getState());D&&!Q&&function(){var e=JSON.parse(document.getElementById("js-initialData").textContent).initialState,t=e.env,n=t.vars.passThroughHeaders,o=[(0,a.JT)(),(0,c.Yq)(),ae({ua:t.userAgent,authInfo:{id:e.currentUser},xUDId:t.xUDId,passVars:n}),z],i=(0,a.SQ)(fetch,[function(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.apply(void 0,(0,r.Z)(n)).then((function(e){var t=e.payload,n=void 0===t?{}:t;return n.data&&!n.paging?n.data:n}))}}].concat((0,r.Z)(o)));window.addEventListener("message",(function(e){var t=e.data,n=t.url,o=t.params;"zop"===t.source&&i(n,(0,U.Z)({},o)).then((function(e){window.postMessage({source:"heifetz",sign:e,err:null},window.location.origin)})).catch((function(e){window.postMessage({source:"heifetz",sign:null,err:e},window.location.origin)}))}),!1)}(),(0,ue.N4)(H([function(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.apply(void 0,(0,r.Z)(n)).then((function(e){var t=e.payload,n=void 0===t?{}:t;return n.data&&!n.paging?n.data:n}))}}].concat((0,r.Z)(q)),O));var $=document.getElementById("root");o({store:X,http:V,container:$,afterHydrate:function(){Q&&"errorpage"!==R.toLowerCase()&&ce(),Y.Wechat&&(u.ZP.increment("WechatSDK.config.intention.count"),(0,i.S0)().catch((function(e){throw u.ZP.increment("WechatSDK.config.fail.count"),e}))),Y.JDMiniProgram&&(0,g.v)("https://beta-mini-app-static.jd.com/apps/jssdktest/js/jssdk.js"),Y.MQQBrowser&&Q&&(0,g.v)("https://jsapi.qq.com/get?api=app.openPhotoBrowser")}}),(0,x.Hf)(j,Y).then((function(){n.e(3476).then(n.bind(n,43476)).then((function(e){(null==e?void 0:e.default)&&new(0,e.default)({performance:!0,resourceError:!1,request:!1,resourcePerformance:!0,runtimeError:!1,common:{disableLog:!1,projectId:"heifetz"}})}))}));var ee=null===(e=B.abV2)||void 0===e?void 0:e.config;if(null==ee?void 0:ee.abMap){var te={abConfig:ee,idInfo:{memberHashId:null==j?void 0:j.id}};(0,d.M)(te)}Y.ZhihuHybrid&&D&&Z.Z.enableLog(),L.Z.config({userId:w.currentUser}),j&&!M&&["www.zhihu.com","zhuanlan.zhihu.com","www-zhihu-com","zhuanlan-zhihu-com"].some((function(e){return location.host.includes(e)}))&&function(e){var t=C.Z.refreshValidityPeriod,n=C.Z.refreshLimit,o=Date.now(),r=(0,pe.LP)();if(n&&!(Math.random()>Number(n)))if(r){var i=JSON.parse(r),c=i.token;o-i.timestamp>24*Number(t)*60*60*1e3&&e((0,he.zq)((0,fe.Z)("refresh_token",{refreshToken:c})))}else(0,a.dJ)("/api/account/prod/token/refresh",{method:"POST"}).then((function(t){var n=t.refresh_token;e((0,he.zq)((0,fe.Z)("refresh_token",{refreshToken:n})))})).catch((function(e){var t=e.error;u.ZP.increment("token.error.getRefreshToken.".concat(null==t?void 0:t.code))}))}(X.dispatch)}))}var Ee=n(82026),Te=n(61533),Ce=n.n(Te),Ae=n(78194),_e=n(2495),ye=n(12321),Se=n(29687),Ie=n(24429),be=n(86193),we=n(58146),Re=n(52495),Ne=n(48457),Oe=n(70530),De=(0,h.createContext)({totalOffset:0}),Be=function(e){var t=e.children,n=(0,Ae.Z)((0,h.useState)((function(){return new Map})),2),r=n[0],i=n[1],a=(0,h.useCallback)((function(e,t){return i((function(n){return new Map(n.set(e,t))}))}),[]),c=(0,h.useCallback)((function(e){return i((function(t){return t.delete(e),new Map(t)}))}),[]),s=(0,h.useMemo)((function(){var e=0;return r.forEach((function(t){return e+=t})),{totalOffset:e,addOffset:a,removeOffset:c}}),[a,r,c]);return(0,o.tZ)(De.Provider,{value:s,children:t})},Pe=(0,h.createContext)(),ke=n(28938),xe=n(59184),Le=n(20722),Ue=function(e){var t=e.store,n=e.children,r=t.getState().env,i=r.theme,a=r.userAgent,c=(0,Ae.Z)((0,h.useState)("dark"===i),2),s=c[0],u=c[1],l=(0,Ae.Z)((0,h.useState)((function(){return(0,Ie.Z)()})),1)[0];(0,h.useEffect)((function(){if(a.ZhihuHybrid)return(0,Z.Z)("base/themeChange").listen((function(e){var t=e.theme;u("dark"===t)}))}),[a.ZhihuHybrid]);return(0,o.tZ)(Re.Provider,{store:t,children:(0,o.BX)(Ne.PU,{children:[(0,o.tZ)(we.ql,{htmlAttributes:{"data-theme":s?"dark":"light"}}),(0,o.tZ)(ye.I.Provider,{value:a,children:(0,o.tZ)(Pe.Provider,{value:s,children:(0,o.tZ)(be.nq,{value:l,children:(0,o.tZ)(Se.d,{isDarkMode:s,ua:a,children:(0,o.tZ)(Be,{children:(0,o.tZ)(ke.j,{children:(0,o.tZ)($.ZP,{appName:"heifetz",fallback:(0,o.tZ)(Le.ds,{}),release:C.Z.release,children:(0,o.tZ)(_e.c6,{preProxyUrl:null,useDevProxy:!0,children:(0,o.tZ)(Oe.iH,{children:(0,o.tZ)(xe.Ho,{children:n})})})})})})})})})})]})})};var Fe=n(11153),Me=n.n(Fe),Ge=[],ze=Me()((function(){if(console.groupCollapsed){var e=Ge.reduce((function(e,t){return e+t.actualDuration}),0);console.groupCollapsed("[Click to expand]: React Profiler, ".concat(Ge.length," updates in ").concat(e.toFixed(2),"ms"))}for(var t;t=Ge.shift();)t.actualDuration>=5?console.warn(t):console.info(t);console.groupEnd&&console.groupEnd()}),300);function He(e,t,n,o,r,i,a){var c;c={id:e,phase:t,actualDuration:n,baseDuration:o,startTime:r,commitTime:i,interactions:a},Ge.push(c),ze()}var qe=n(35314);var Ve=n(37148),Xe=n(52626),We=n(39849),Ke=n(71103);var je,Ye=(0,Xe.combineReducers)({global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{count:0},t=arguments.length>1?arguments[1]:void 0;if("undefined"==typeof window)return e;var n=t.type;return n.endsWith("request")?{count:e.count+1}:n.endsWith("success")||n.endsWith("failure")?{count:e.count?e.count-1:0}:e},local:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.id,r=t.urlToken;return["request","success","failure"].includes(n.split("/").pop())?(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},"".concat(n.slice(0,n.lastIndexOf("/")),"/").concat(o||r||""),n.endsWith("request"))):e}}),Qe=n(48494),Je=n(55695),$e=n(27869),et=n(26931),tt=n(62740),nt=n(51944),ot=n(74480),rt=n.n(ot),it="knowledgeBaby",at="bSide",ct="knowledgeDigital",st="knowledgeAcg",ut="knowledgeXiaopengCar",lt="knowledgeCar",dt="knowledgeScience",pt="videoMakerAcquisition",ht="videoMakerAcquisitionV2",ft="videoMakerAcquisitionV3",mt="vote",vt="zhihuCar",Zt=(je={},(0,Ke.Z)(je,it,{id:3}),(0,Ke.Z)(je,at,{id:4}),(0,Ke.Z)(je,ct,{id:5}),(0,Ke.Z)(je,st,{id:10}),(0,Ke.Z)(je,ut,{id:11}),(0,Ke.Z)(je,lt,{id:12}),(0,Ke.Z)(je,dt,{id:15}),(0,Ke.Z)(je,pt,{id:1}),(0,Ke.Z)(je,ht,{id:3}),(0,Ke.Z)(je,ft,{id:5}),(0,Ke.Z)(je,mt,{id:2}),(0,Ke.Z)(je,vt,{id:21}),"card-collecting"),gt=(0,U.Z)({},(0,ue.FH)(Zt,["GET_PROFILE","DRAW_PRIZE","GET_TASK_LIST","GET_SHARE_LINK","GET_GIVER_INFO","GET_INVITER_INFO","GET_PROFILE","GET_CARD_LIST","FUSE_CARD","GET_SHARE_KEY","GET_FUSE_STATUS","GET_RECEIVED_CARD","RECEIVE_CARD","GET_PRIZE_LIST","GET_SHARE_POSTER","WITHDRAW"]),(0,ue.co)(Zt,["SET_MODAL","SET_PANEL","SHIFT_CARD","SET_NEW_COIN_COUNT","SET_SHARE_INTENTION","CONSUME_NEW_USER_CARD","SET_MESSAGE","CLEAR_RECEIVED_CARD","CLEAR_PRIZE"])),Et={message:null,profile:{balance:"0",chance:0,coinNum:0,gatherClose:!1,isGotMagicCard:!1,isPay:!1,partitionStart:!1,totalDone:0,withdrawStart:!1},sharePoster:{share:"",sendCard:"",invite:""},shareLink:null,shareIntention:"share",shareKey:null,shareCardId:null,inviterInfo:null,giverInfo:null,prize:null,receivedCard:null,newCoinCount:null,newCardList:[],newUserCardCount:1,taskList:[],prizeList:null,cardList:null,panel:{showTaskPanel:!1,showRewardPanel:!1},modal:{showWelcomeModal:!1,showFusionModal:!1,showFusionPromptModal:!1,showShareModal:!1,showBackModal:!1}},Tt=function(){var e,t,n,o,r,i,a,c,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,u=arguments.length>1?arguments[1]:void 0,l=u.type,d=u.payload,p=u.meta;if(l.endsWith("/success")&&(null==d||null===(e=d.error)||void 0===e?void 0:e.message))return s.error?s:(0,F.Z)((0,U.Z)({},s),{message:{text:d.error.message,closePage:l===gt.GET_SHARE_LINK.success}});if(l===gt.SET_MODAL)return(0,F.Z)((0,U.Z)({},s),{modal:(0,U.Z)({},s.modal,d)});if(l===gt.SET_PANEL)return(0,F.Z)((0,U.Z)({},s),{panel:(0,U.Z)({},s.panel,d)});if(l===gt.SET_NEW_COIN_COUNT)return(0,F.Z)((0,U.Z)({},s),{newCoinCount:d});if(l===gt.SHIFT_CARD)return(0,F.Z)((0,U.Z)({},s),{newCardList:s.newCardList.slice(1)});if(l===gt.DRAW_PRIZE.request)return(0,F.Z)((0,U.Z)({},s),{prize:null});if(l===gt.DRAW_PRIZE.success)return"element"===(null===(n=d.data)||void 0===n?void 0:n.prizeType)?(0,F.Z)((0,U.Z)({},s),{newCardList:s.newCardList.concat((0,U.Z)({},d.data,p))}):(0,F.Z)((0,U.Z)({},s),{prize:d.data});if(l===gt.GET_TASK_LIST.success)return(0,F.Z)((0,U.Z)({},s),{taskList:(null===(o=d.data)||void 0===o?void 0:o.taskList)||[]});if(l===gt.GET_SHARE_LINK.success)return d.error?(0,F.Z)((0,U.Z)({},s),{error:null===(r=d.error)||void 0===r?void 0:r.message}):(0,F.Z)((0,U.Z)({},s),{shareLink:d.data.linkUrl.replace("intention=invite&","")});if(l===gt.GET_INVITER_INFO.success)return(0,F.Z)((0,U.Z)({},s),{inviterInfo:d.data});if(l===gt.SET_SHARE_INTENTION)return(0,F.Z)((0,U.Z)({},s),{shareIntention:d});if(l===gt.GET_PROFILE.success)return(0,F.Z)((0,U.Z)({},s),{profile:(0,U.Z)({},s.profile,d.data)});if(l===gt.GET_CARD_LIST.success){var h=d.data.elements;return(0,F.Z)((0,U.Z)({},s),{cardList:h})}return l===gt.GET_GIVER_INFO.success?(0,F.Z)((0,U.Z)({},s),{giverInfo:d.data}):l===gt.CONSUME_NEW_USER_CARD?(0,F.Z)((0,U.Z)({},s),{newUserCardCount:s.newUserCardCount-1}):l===gt.GET_SHARE_KEY.success?(0,F.Z)((0,U.Z)({},s,d.data.posterUrl&&{sharePoster:(0,F.Z)((0,U.Z)({},s.sharePoster),{sendCard:d.data.posterUrl})}),{shareKey:d.data.shareKey,shareCardId:p.shareCardId}):l===gt.GET_FUSE_STATUS.success?(0,F.Z)((0,U.Z)({},s),{profile:(0,F.Z)((0,U.Z)({},s.profile),{fusionStatus:(null===(i=d.data)||void 0===i||null===(a=i.collections)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.status)||0})}):l===gt.SET_MESSAGE?(0,F.Z)((0,U.Z)({},s),{message:d}):l===gt.GET_RECEIVED_CARD.success?(0,F.Z)((0,U.Z)({},s),{receivedCard:d}):l===gt.CLEAR_RECEIVED_CARD?(0,F.Z)((0,U.Z)({},s),{receivedCard:null}):l===gt.CLEAR_PRIZE?(0,F.Z)((0,U.Z)({},s),{prize:null}):l===gt.RECEIVE_CARD.success&&(null==d||null===(t=d.data)||void 0===t?void 0:t.length)?(0,F.Z)((0,U.Z)({},s),{newCardList:s.newCardList.concat(d.data.filter((function(e){return e.linkId})))}):l===gt.GET_PRIZE_LIST.success&&(null==d?void 0:d.data)?(0,F.Z)((0,U.Z)({},s),{prizeList:d.data}):l===gt.GET_SHARE_POSTER.success?(0,F.Z)((0,U.Z)({},s),{sharePoster:(0,F.Z)((0,U.Z)({},s.sharePoster),(0,Ke.Z)({},s.shareIntention,d.data.imgUrl))}):s},Ct=(0,U.Z)({},(0,ue.FH)("zhiboPandian2020",["GET_STATISTICS"]));var At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if(t.type===Ct.GET_STATISTICS.success){var n=t.payload;return(0,U.Z)({},e,n)}return e},_t="boarding",yt=(0,U.Z)({},(0,ue.FH)(_t,["GET","GET_SHARE_LINK","GET_SHARE_POSTER","GET_BUBBLES","GET_REWARD_LIST","GET_WITHDRAWAL_LIST","BIND_INVITER","GET_INVITER","GET_INVITE_LIST","CALL","DRAW_REWARD","GET_TASK","GET_NOTIFICATION","WITHDRAW"]),(0,ue.co)(_t,["CLEAR"])),St={},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;switch(n){case yt.GET.success:return(0,F.Z)((0,U.Z)({},e),{profile:(0,U.Z)({},e.profile,o.data)});case yt.GET_SHARE_LINK.success:var r,i,a=null===(r=o.error)||void 0===r?void 0:r.code,c=1005===a||1003===a?["邀请任务已结束","快去提醒好友做任务得剩余奖励吧"]:null;return(0,F.Z)((0,U.Z)({},e),{shareLink:null===(i=o.data)||void 0===i?void 0:i.linkUrl,taskError:c});case yt.GET_SHARE_POSTER.success:var s;return(0,F.Z)((0,U.Z)({},e),{sharePoster:null===(s=o.data)||void 0===s?void 0:s.imgUrl});case yt.GET_BUBBLES.success:return(0,F.Z)((0,U.Z)({},e),{bubbles:o.data});case yt.GET_REWARD_LIST.success:return(0,F.Z)((0,U.Z)({},e),{rewardList:o.data});case yt.GET_WITHDRAWAL_LIST.success:return(0,F.Z)((0,U.Z)({},e),{withdrawalList:o.data});case yt.GET_INVITER.success:return(0,F.Z)((0,U.Z)({},e),{inviter:o.data});case yt.GET_INVITE_LIST.success:return(0,F.Z)((0,U.Z)({},e),{inviteList:o.data});case yt.DRAW_REWARD.success:return(0,F.Z)((0,U.Z)({},e),{currentReward:o.data});case yt.CLEAR:return(0,F.Z)((0,U.Z)({},e),{currentReward:null});case yt.GET_TASK.success:return(0,F.Z)((0,U.Z)({},e),{task:o.data});case yt.GET_NOTIFICATION.success:return(0,F.Z)((0,U.Z)({},e),{notification:o.data});default:return e}},bt=(0,ue.FH)("searchGaokaoSubPage",["GET_ACE_MAJORS","GET_EMPLOYMENT_DESTINATION","GET_SCORES","GET_ADMISSIONS_GUIDE","GET_IMAGES","GET_PROVINCE_LINE","GET_SCHOOL_INFO","GET_COURSES","GET_COLLEGES","GET_STATS","GET_TOPIC"]);var wt=(0,U.Z)({},(0,ue.FH)("campaign",["LOAD_SINGLE","TOGGLE_FOLLOW_USER","APPLY_KNOWLEDGE","LOAD_LIST","POLL","REFRESH_VIDEO_LIST","ACCEPT_INVITATION","SUBMIT_INVITATION_CODE","APPLY_VIDEO_MAKER_ACQUISITION","LOAD_INVITEE_INFO","APPLY_ACCEPT_INVITE","APPLY_INVITE","LOAD_VOTE_USERS","APPLY_VOTE","GET_SHARE_POSTER","GET_IDENTITY_VERIFY_STATUS","FOLLOW_USER"]),(0,ue.co)("campaign",["UPDATE_ZHIHU2020_RECOMMENDED_MEMBER_FOLLOE_STATUS","REFRESH_RESERVATION","SHARE_POSITION"])),Rt=(0,ue.FH)("searchHealth",["GET_HEALTH"]);var Nt=n(65406),Ot="featuredQuestionsConfig";(0,Nt.P1)([de.Xj,function(e){var t,n,o,r;return null===(t=e.campaign)||void 0===t||null===(n=t.single)||void 0===n||null===(o=n[Ot])||void 0===o||null===(r=o.data)||void 0===r?void 0:r.config}],(function(e,t){return t?e?t:t.filter((function(e){return"1"===e.isPublic})):null}));var Dt=(0,Xe.combineReducers)({single:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.meta,r=t.payload,i=t.needMerge;if(n===wt.LOAD_SINGLE.request)return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.stateKey,(0,F.Z)((0,U.Z)({},e[o.stateKey]),{refreshLoading:!0})));if(n===wt.LOAD_SINGLE.success){var a=o.time;return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.stateKey,(0,F.Z)((0,U.Z)({},i&&e[o.stateKey],r,a&&{time:a}),{refreshLoading:!1})))}return n===wt.LOAD_SINGLE.failure?(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.stateKey,(0,F.Z)((0,U.Z)({},e[o.stateKey]),{refreshLoading:!1}))):n===wt.REFRESH_RESERVATION?(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.stateKey,(0,F.Z)((0,U.Z)({},e[o.stateKey]),{data:(e[o.stateKey].data||[]).concat(r)}))):n===wt.SHARE_POSITION?(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.stateKey,(0,F.Z)((0,U.Z)({},e[o.stateKey]),{data:r}))):n===wt.UPDATE_ZHIHU2020_RECOMMENDED_MEMBER_FOLLOE_STATUS?(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.stateKey,(0,F.Z)((0,U.Z)({},e[o.stateKey]),{data:e[o.stateKey].data.map((function(e){return e.urlToken===r?(0,F.Z)((0,U.Z)({},e),{isFollowing:!e.isFollowing}):e}))}))):e},list:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=n.type,i=n.meta,a=n.payload;return o===wt.LOAD_LIST.request?(0,F.Z)((0,U.Z)({},t),(0,Ke.Z)({},i.stateKey,(0,F.Z)((0,U.Z)({},t[i.stateKey]),{isLoading:!0}))):o===wt.LOAD_LIST.failure?(0,F.Z)((0,U.Z)({},t),(0,Ke.Z)({},i.stateKey,(0,F.Z)((0,U.Z)({},t[i.stateKey]),{isLoading:!1}))):o===wt.LOAD_LIST.success?(0,F.Z)((0,U.Z)({},t),(0,Ke.Z)({},i.stateKey,(0,F.Z)((0,U.Z)({},t[i.stateKey],a),{data:(0,r.Z)(!i.isRefetch&&(null===(e=t[i.stateKey])||void 0===e?void 0:e.data)||[]).concat((0,r.Z)(a.data||[])),isLoading:!1}))):t},videoMakerAcq:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.meta,r=t.payload;return n===wt.LOAD_INVITEE_INFO.success?(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.stateKey,r)):n===wt.GET_SHARE_POSTER.success?(0,F.Z)((0,U.Z)({},e),{sharePoster:r.posterUrl}):e},vote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.meta,r=t.payload;if(n===wt.LOAD_VOTE_USERS.success){var i=o.stateKey,a=r.activityInfo,c=r.userInfo,s=r.items;return{activityInfo:a,userInfo:c,candidatesList:(0,F.Z)((0,U.Z)({},e.candidatesList),(0,Ke.Z)({},i,s))}}return e},cardCollecting:Tt,zhiboPandian2020:At,boarding:It,searchGaokaoSubPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.meta,i=(void 0===o?{}:o).isReset;if(n===bt.GET_TOPIC.success)return(0,F.Z)((0,U.Z)({},e),{topic:t.payload});if(n===bt.GET_COURSES.success)return(0,F.Z)((0,U.Z)({},e),{courses:t.payload});if(n===bt.GET_COLLEGES.request)return(0,F.Z)((0,U.Z)({},e),{universities:(0,F.Z)((0,U.Z)({},e.universities),{isLoading:!0})});if(n===bt.GET_COLLEGES.success){var a,c=t.payload,s=c.universities,u=c.paging,l=c.provinces,d=c.tags,p=c.types,h=i?s:(0,r.Z)((null===(a=e.universities)||void 0===a?void 0:a.universities)||[]).concat((0,r.Z)(s));return(0,F.Z)((0,U.Z)({},e),{universities:(0,F.Z)((0,U.Z)({},e.universities),{isLoading:!1,paging:u,provinces:l,tags:d,types:p,universities:h})})}if(n===bt.GET_STATS.success)return(0,F.Z)((0,U.Z)({},e),{stats:t.payload});if(n===bt.GET_ACE_MAJORS.success)return(0,F.Z)((0,U.Z)({},e),{aceMajors:t.payload});if(n===bt.GET_EMPLOYMENT_DESTINATION.success)return(0,F.Z)((0,U.Z)({},e),{employmentDestination:t.payload});if(n===bt.GET_SCORES.success)return(0,F.Z)((0,U.Z)({},e),{scores:t.payload});if(n===bt.GET_PROVINCE_LINE.success)return(0,F.Z)((0,U.Z)({},e),{provinceLine:t.payload});if(n===bt.GET_ADMISSIONS_GUIDE.success)return(0,F.Z)((0,U.Z)({},e),{intro:t.payload});if(n===bt.GET_SCHOOL_INFO.success)return(0,F.Z)((0,U.Z)({},e),{schoolInfo:t.payload});if(n===bt.GET_IMAGES.request)return(0,F.Z)((0,U.Z)({},e),{images:(0,F.Z)((0,U.Z)({},e.images),{isLoading:!0,isDrained:!1})});if(n===bt.GET_IMAGES.success){var f,m,v=t.payload||{},Z=v.imageInfo,g=Z.thumbnails,E=v.videoInfo,T=E.thumbnails,C=t.meta.isPC,A=(null===(f=e.images)||void 0===f?void 0:f.thumbnails)||[],_=(null===(m=e.images)||void 0===m?void 0:m.videoThumbnails)||[],y=T.length>0?C?T:(0,r.Z)(T).concat([{type:"text"}]):[];return(0,F.Z)((0,U.Z)({},e),{images:(0,F.Z)((0,U.Z)({},t.payload),{isLoading:!1,isDrained:!g.length,thumbnails:(0,r.Z)(A).concat((0,r.Z)(y),(0,r.Z)(g)),videoThumbnails:(0,r.Z)(_).concat((0,r.Z)(T))})})}return e},searchHealth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type;return n===Rt.GET_HEALTH.success?(0,U.Z)({},e,t.payload):e}}),Bt=n(77209),Pt=n(95510),kt=n(82054),xt=n(33585),Lt=n(51818),Ut=n(15390),Ft=n(69800),Mt=(0,U.Z)({},(0,ue.FH)("chat",["SEARCH_USER"]),(0,ue.co)("chat",["CLEAR_SEARCH_RESULT"])),Gt=(0,Ft.Z)(Mt.SEARCH_USER,Mt.CLEAR_SEARCH_RESULT),zt=n(35987),Ht=(0,Xe.combineReducers)({recents:kt.ZP,strangers:xt.Z,friends:Lt.ZP,search:Gt,config:zt.ZP}),qt={isChatMqttExisted:!1},Vt=(0,ue.co)("chatGlobal",["SET_CHAT_MQTT_STATUS"]);var Xt=(0,Xe.combineReducers)({chats:Pt.ZP,inbox:Ht,global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;if(t.type===Vt.SET_CHAT_MQTT_STATUS){var n=t.meta.status;return(0,F.Z)((0,U.Z)({},e),{isChatMqttExisted:n})}return e}}),Wt=n(95193),Kt=n(44010),jt=n(24316),Yt=function(e){if(!e)return!1;var t=e.childCommentCount,n=e.isDelete,o=e.collapsed;return t>0||!n&&!o},Qt=(0,U.Z)({},(0,ue.FH)("commentMangage",["LOAD_UPDATE_STATUS","UPDATE_VISIT_STATUS","LOAD_COMMENT_LIST","UPDATE_COMMENT","UPDATE_COMMENT_LIKE","UPDATE_COMMENT_DISLIKE","UPDATE_COMMENT_HOT","UPDATE_COMMENT_COLLAPSED","DELETE_COMMENT","APPROVE_COMMENT","REJECT_COMMENT","REPLY_COMMENT","LOAD_SUB_COMMENT_LIST","UPDATE_SUB_COMMENT","UPDATE_SUB_COMMENT_LIKE","UPDATE_SUB_COMMENT_DISLIKE","UPDATE_SUB_COMMENT_HOT","UPDATE_SUB_COMMENT_COLLAPSED","DELETE_SUB_COMMENT","APPROVE_SUB_COMMENT","REJECT_SUB_COMMENT","REPLY_SUB_COMMENT"]));var Jt=(0,Kt.HF)(),$t=function(e){return e.commentManage.commentList},en=(Jt.getSelectors($t),(0,Kt.HF)()),tn=function(e){return e.commentManage.subCommentList};en.getSelectors(tn);var nn,on,rn=Jt.getInitialState({nextOffset:0,urlToken:""}),an=function(e,t){var n=t.meta;Jt.updateOne(e,n)},cn=(0,Kt.oM)({name:"commentManage/commentList",initialState:rn,reducers:{resetCommentList:function(e,t){var n=t.payload;return(0,F.Z)((0,U.Z)({},rn),{urlToken:n})}},extraReducers:(nn={},(0,Ke.Z)(nn,Qt.LOAD_COMMENT_LIST.success,(function(e,t){var n,o=t.payload,r=t.meta.urlToken;r===e.urlToken&&o&&(e.nextOffset=o.nextOffset,e.urlToken=r,Jt.addMany(e,((null===(n=o.data)||void 0===n?void 0:n.filter(Yt))||[]).map((function(e){return(0,F.Z)((0,U.Z)({},e),{_id:(0,Kt.x0)()})}))))})),(0,Ke.Z)(nn,Qt.UPDATE_COMMENT_LIKE.request,an),(0,Ke.Z)(nn,Qt.UPDATE_COMMENT_DISLIKE.request,an),(0,Ke.Z)(nn,Qt.UPDATE_COMMENT_HOT.request,an),(0,Ke.Z)(nn,Qt.UPDATE_COMMENT_COLLAPSED.request,an),(0,Ke.Z)(nn,Qt.DELETE_COMMENT.success,an),(0,Ke.Z)(nn,Qt.REPLY_COMMENT.success,an),(0,Ke.Z)(nn,Qt.APPROVE_COMMENT.success,an),(0,Ke.Z)(nn,Qt.UPDATE_COMMENT.success,(function(e,t){var n=t.payload;n&&Jt.updateOne(e,{id:n.id,changes:n})})),nn)}),sn=(cn.actions.resetCommentList,en.getInitialState({paging:{next:"",isEnd:!1}})),un=function(e,t){var n=t.meta,o=t.payload;n.inConversation&&en.addOne(e,o)},ln=function(e,t){var n=t.meta;en.updateOne(e,n)},dn=(0,Kt.oM)({name:"commentManage/subCommentList",initialState:sn,reducers:{resetSubCommentList:function(){return sn}},extraReducers:(on={},(0,Ke.Z)(on,Qt.LOAD_SUB_COMMENT_LIST.success,(function(e,t){var n,o=t.payload;o&&(e.paging=o.paging,en.addMany(e,((null===(n=o.data)||void 0===n?void 0:n.filter(Yt))||[]).map((function(e){return(0,F.Z)((0,U.Z)({},e),{_id:(0,Kt.x0)()})}))))})),(0,Ke.Z)(on,Qt.UPDATE_SUB_COMMENT_LIKE.request,ln),(0,Ke.Z)(on,Qt.UPDATE_SUB_COMMENT_DISLIKE.request,ln),(0,Ke.Z)(on,Qt.UPDATE_SUB_COMMENT_HOT.request,ln),(0,Ke.Z)(on,Qt.UPDATE_SUB_COMMENT_COLLAPSED.request,ln),(0,Ke.Z)(on,Qt.DELETE_SUB_COMMENT.success,ln),(0,Ke.Z)(on,Qt.REPLY_SUB_COMMENT.success,un),(0,Ke.Z)(on,Qt.REPLY_COMMENT.success,un),(0,Ke.Z)(on,Qt.APPROVE_SUB_COMMENT.success,ln),(0,Ke.Z)(on,Qt.UPDATE_SUB_COMMENT.success,(function(e,t){var n=t.payload;n&&en.updateOne(e,{id:n.id,changes:n})})),on)}),pn=(dn.actions.resetSubCommentList,(0,Xe.combineReducers)({commentList:cn.reducer,subCommentList:dn.reducer})),hn=n(15703),fn=n(45051),mn=n(57236),vn=(0,ue.FH)("commercialReport",["GET_COMMERCIAL_REPORT_INFO"]).GET_COMMERCIAL_REPORT_INFO,Zn=(0,ue.co)("commercialReport",["UPDATE_LOCAL_ANSWER_COMMERCIAL_REPORT_INFO"]).UPDATE_LOCAL_ANSWER_COMMERCIAL_REPORT_INFO,gn={commercialTypes:[]};var En=103001,Tn=103003,Cn=(0,ue.FH)("ask",["GET_MATCH_TOPICS","ADD"]);var An=(0,Xe.combineReducers)({ask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t.payload||![Cn.ADD.success,Cn.ADD.failure].includes(t.type))return e;var n=t.payload,o=n.id,r=n.code,i=n.message;switch(r){case Tn:return(0,F.Z)((0,U.Z)({},e),{title:{level:"error",text:"已经存在的问题"}});case En:return(0,F.Z)((0,U.Z)({},e),{detail:{level:"error",text:"过长的补充说明"}});default:return o?{id:o}:(0,F.Z)((0,U.Z)({},e),{overall:{text:i}})}}}),_n=(0,U.Z)({},(0,ue.FH)("creationRanking",["GET_CREATION_RANKING","GET_CREATION_RANKING_TYPE","GET__CREATION_RANKING_POSTER","GET__CREATION_RANKING_MONTHLIST"]));var yn=n(66258),Sn=n(55270),In=function(e){return e.creatorMCN},bn=(0,Nt.P1)(In,(function(e){return e.mcn})),wn=((0,Nt.P1)(bn,(function(e){return e.id})),(0,Nt.P1)(In,(function(e){return e.isNoAuth})),(0,Nt.P1)(In,(function(e){return e.mcnStatistics})),(0,Nt.P1)(In,(function(e){return e.creatorManageData})),(0,Nt.P1)(In,(function(e){return e.creatorManageDataTotal})),(0,Nt.P1)(In,(function(e){return e.mcnDomains})),(0,U.Z)({},(0,ue.FH)("creator-mcn",["GET_HOME_DATA","LOAD_ACTIVITY_LIST","GET_CREATOR_MANAGE_DATA","SEARCH_PEOPLE","DOWNLOAD_CREATORS","GET_MCN_DOMAINS","GET_INVITE_STATUS","LAUNCH_UNBIND","ACCEPT_UNBIND","REJECT_UNBIND","SUBMIT_INVITATION","GET_CONTENTS","GET_CONTENT_ANALYSIS","DOWNLOAD_CONTENTS","GET_CREATOR_STATISTICS","DOWNLOAD_CREATOR_STATISTICS","GET_CREATOR_INCOME","GET_CREATOR_INCOME_STATISTICS","GET_MCN_INCOME","GET_INCOME_TYPE","DOWNLOAD_CREATOR_INCOME","DOWNLOAD_MCN_INCOME"])));var Rn={mcn:{},mcnStatistics:{},isNoAuth:!1,creatorManageData:[],creatorManageDataTotal:1,mcnDomains:[]};var Nn=n(59110),On=(0,U.Z)({},(0,ue.FH)("creators",["GET_CREATOR_SETTINGS","PATCH_CREATOR_SETTINGS_INFO","GET_ACCOUNT_BINDING","POST_ACCOUNT_BINDING_INFO","GET_VALIDATION_MSG","GET_ACCOUNT_BINDING_URL","SET_CANCEL_ACCOUNT_BINDING","GET_ACCOUNT_BINDING_SYNC","POST_ACCOUNT_BINDING_SYNC","GET_CONTENT_SYNC_PERMISSION","ACCOUNT_BINDING_AGGREMENT","GET_SCORE_CHANGE_LOG"]));var Dn=(0,U.Z)({},(0,ue.FH)("creators",["LOAD_ANALYTICS_AGGREGATION","LOAD_ANALYTICS_AGGREGATION_V2","LOAD_ANALYTICS_DAILY_TOTAL_DETAIL","LOAD_ANALYTICS_DAILY_TOTAL_DETAIL_V2","LOAD_ANALYTICS_DAILY_SINGLE_DETAIL","LOAD_ANALYTICS_SINGLE_CONTENT_AGGREGATION","LOAD_ANALYTICS_SINGLE_CONTENT_DETAIL","LOAD_ANALYTICS_SINGLE_PIN_CONTENT_AGGREGATION","LOAD_ANALYTICS_SINGLE_PIN_CONTENT_DETAIL","LOAD_ANALYTICS_VISTER_PORTRAIT","LOAD_ANALYTICS_SINGLE_VISTER_PORTRAIT","LOAD_ANALYTICS_FOLLOW_PROFILE"]));var Bn=(0,U.Z)({},(0,ue.FH)("creators",["LOAD_BAYES_DOMAINS_STATUES","SAVE_POPUP_HAS_SHOWN","LOAD_BAYES_DOMAINS_OPYTIONAL","UPDATE_SELECTED_DOMAINS","LOAD_CONTENTS"]));var Pn={status:{},options:{topDomains:null,allDomains:null,editable:0},contents:null};var kn=(0,U.Z)({},(0,ue.FH)("creators",["GET_ACADEMY_TABS","GET_ACADEMY_ARTICLES"]));var xn={tabs:[],article:{}};var Ln=(0,U.Z)({},(0,ue.FH)("creators",["LOAD_KM_RESOURCE"]));var Un=n(17312),Fn=n.n(Un),Mn=(0,U.Z)({},(0,ue.FH)("creators",["GET_TEXT_INCOME_INFO","POST_TEXT_INCOME_DOMAIN","GET_TEXT_INCOME","GET_CONTRIBUTE_LIST","POST_CONTRIBUTE","GET_CONTRIBUTE_EXPLAIN"]),(0,ue.co)("creators",["SWITCH_DOMAIN_MODAL"]));var Gn=(0,U.Z)({},(0,ue.FH)("creators",["GET_USER_STATUS","OPEN_SAFEGUARD_RIGHTS","CONFIRM_SAFEGUARD_RIGHTS","POST_PROTECT_CONTENT","GET_PROTECT_INFRINGEMENT","GET_PROTECT_CONTENT","POST_INFRINGEMENT","INGORE_INFRINGEMENT","POST_INFRINGEMENT_MATERIAL","GET_PROTECT_STATISTIC","GET_PROTECT_CONTENT_DETAIL","GET_PROTECT_WHITE","POST_PROTECT_WHITE","UPDATE_PROTECT_WHITE","GET_SAFEGUARD_RIGHTS_SKU"]));var zn=n(95114),Hn=n.n(zn),qn=(0,U.Z)({},(0,ue.FH)("creators",["LOAD_CREATOR_SCHOOL_KM_DATA","LOAD_CREATOR_SCHOOL_CONTENT_DETAIL","LOAD_MY_RECENTLY_STUDING","LOG_STUDING"]));var Vn={tabs:[],contents:[],banner:null,entities:{}};var Xn=(0,U.Z)({},(0,ue.FH)("creators",["LOAD_USER_INFO","LOAD_GRADUATE_INFO"]));var Wn=(0,Xe.combineReducers)({bayesDomains:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn,n=arguments.length>1?arguments[1]:void 0,o=n.payload;return n.type===Bn.LOAD_BAYES_DOMAINS_STATUES.success?(0,F.Z)((0,U.Z)({},t),{status:o}):n.type===Bn.LOAD_BAYES_DOMAINS_OPYTIONAL.success?(0,F.Z)((0,U.Z)({},t),{options:o}):n.type===Bn.LOAD_CONTENTS.success?(0,F.Z)((0,U.Z)({},t),{contents:{data:(0,r.Z)((null===(e=t.contents)||void 0===e?void 0:e.data)||[]).concat((0,r.Z)(o.data)),paging:o.paging}}):t},school:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0,n=t.meta,o=void 0===n?{}:n,r=t.payload;switch(t.type){case qn.LOAD_CREATOR_SCHOOL_KM_DATA.success:var i=o.stateKey,a={tabs:"data.tabs",contents:"data.tabContents",banner:"data.banners"};return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},i,Hn()(r,a[i])));case qn.LOAD_CREATOR_SCHOOL_CONTENT_DETAIL.success:var c=r.data.filter(Boolean).reduce((function(e,t){return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},t.id,t))}),{});return(0,F.Z)((0,U.Z)({},e),{entities:(0,U.Z)({},e.entities,c)})}return e},faq:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case kn.GET_ACADEMY_TABS.success:var n=t.payload.data;return(0,F.Z)((0,U.Z)({},e),{isDrained:!0,tabs:n.tabs});case kn.GET_ACADEMY_ARTICLES.success:var o=t.payload.data;return(0,F.Z)((0,U.Z)({},e),{article:o.contents.reduce((function(e,t){return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},t.id,t))}),e.article)})}return e},knowledgeIncome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload,r=t.meta;switch(n){case Mn.SWITCH_DOMAIN_MODAL:return(0,F.Z)((0,U.Z)({},e),{domainModalStatus:r});case Mn.GET_TEXT_INCOME_INFO.success:return(0,F.Z)((0,U.Z)({},e),{textIncomeInfo:o});case Mn.GET_TEXT_INCOME.success:return(0,F.Z)((0,U.Z)({},e),{textIncomeAmount:o});case Mn.GET_CONTRIBUTE_EXPLAIN.success:return(0,F.Z)((0,U.Z)({},e),{contributeExplain:o})}return e},safeguardRights:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;switch(n){case Gn.GET_USER_STATUS.success:return(0,F.Z)((0,U.Z)({},e),{userStatus:o});case Gn.GET_PROTECT_STATISTIC.success:return(0,F.Z)((0,U.Z)({},e),{protectStatistic:o});case Gn.GET_PROTECT_CONTENT_DETAIL.success:return(0,F.Z)((0,U.Z)({},e),{protectContentDetail:o});case Gn.GET_PROTECT_WHITE.success:return(0,F.Z)((0,U.Z)({},e),{protectWhiteList:o});case Gn.GET_SAFEGUARD_RIGHTS_SKU.success:return(0,F.Z)((0,U.Z)({},e),{skuData:o})}return e},analytics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{all:{},answer:{},zvideo:{},article:{},pin:{},singleContent:{}},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload,r=t.meta;switch(n){case Dn.LOAD_ANALYTICS_AGGREGATION.success:var i=r.stateKey;return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},i,(0,F.Z)((0,U.Z)({},e[i]),{aggregation:o})));case Dn.LOAD_ANALYTICS_FOLLOW_PROFILE.success:return(0,F.Z)((0,U.Z)({},e),{followProfile:o});case Dn.LOAD_ANALYTICS_AGGREGATION_V2.success:var a=r.stateKey;return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},a,(0,F.Z)((0,U.Z)({},e[a]),{aggregationV2:o})));case Dn.LOAD_ANALYTICS_DAILY_TOTAL_DETAIL.success:var c=r.stateKey;return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},c,(0,F.Z)((0,U.Z)({},e[c]),{totalDetail:o})));case Dn.LOAD_ANALYTICS_DAILY_TOTAL_DETAIL_V2.success:var s=r.stateKey;return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},s,(0,F.Z)((0,U.Z)({},e[s]),{totalDetailV2:o})));case Dn.LOAD_ANALYTICS_DAILY_SINGLE_DETAIL.success:var u=r.stateKey;return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},u,(0,F.Z)((0,U.Z)({},e[u]),{singleDetail:o})));case Dn.LOAD_ANALYTICS_SINGLE_CONTENT_AGGREGATION.success:case Dn.LOAD_ANALYTICS_SINGLE_PIN_CONTENT_AGGREGATION.success:var l=r.stateKey;return(0,F.Z)((0,U.Z)({},e),{singleContent:(0,F.Z)((0,U.Z)({},e.singleContent),(0,Ke.Z)({},l,(0,F.Z)((0,U.Z)({},e.singleContent[l]),{aggregation:o})))});case Dn.LOAD_ANALYTICS_VISTER_PORTRAIT.success:var d=r.stateKey;return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},d,(0,F.Z)((0,U.Z)({},e[d]),{visterPortrait:o})));case Dn.LOAD_ANALYTICS_SINGLE_VISTER_PORTRAIT.success:var p=r.stateKey;return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},p,(0,F.Z)((0,U.Z)({},e[p]),{singleVisterPortrait:o})));case Dn.LOAD_ANALYTICS_SINGLE_CONTENT_DETAIL.success:case Dn.LOAD_ANALYTICS_SINGLE_PIN_CONTENT_DETAIL.success:var h=r.stateKey;return(0,F.Z)((0,U.Z)({},e),{singleContent:(0,F.Z)((0,U.Z)({},e.singleContent),(0,Ke.Z)({},h,(0,F.Z)((0,U.Z)({},e.singleContent[h]),{detail:o})))})}return e},account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;switch(n){case On.GET_CREATOR_SETTINGS.success:return(0,F.Z)((0,U.Z)({},e),{settings:o.data});case On.PATCH_CREATOR_SETTINGS_INFO.success:return(0,F.Z)((0,U.Z)({},e),{settings:(0,U.Z)({},e.settings,t.data)});case On.GET_ACCOUNT_BINDING.success:return(0,F.Z)((0,U.Z)({},e),{accountBinding:o});case On.GET_VALIDATION_MSG.success:return(0,F.Z)((0,U.Z)({},e),{validationMsg:o});case On.GET_ACCOUNT_BINDING_SYNC.success:return(0,F.Z)((0,U.Z)({},e),{accountBindingSync:o})}return e},KMResource:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.payload,o=t.meta;if(t.type===Ln.LOAD_KM_RESOURCE.success&&n.data){var r=o.stateKey;return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},r,n.data))}return e},training:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===Xn.LOAD_USER_INFO.success?(0,F.Z)((0,U.Z)({},e),{userInfo:t.payload}):t.type===Xn.LOAD_GRADUATE_INFO.success?(0,F.Z)((0,U.Z)({},e),{graduate:t.payload}):e}}),Kn=(0,U.Z)({},(0,ue.FH)("creatorSalt",["GET_AUTHOR_STATUS","GET_AUTHOR_WEBSITES","GET_AUTHOR_CONTRIBUTES_DOMAIN","CREATE_AUTHOR_DRAFT","PUBLISH_AUTHOR_DRAFT","UPDATE_AUTHOR_DRAFT","GET_QUESTION_RECOMMEND","SUB_USER_INFO","SUB_INSTITUTION_INFO","GET_AUTHOR_CONTRIBUTES_LIST","SUBMIT_AUTHOR_DRAFT","DELETE_AUTHOR_DRAFT","GET_DRAFT_INFO","GET_HAS_SUBMIT_ARTICLES","TRANSFER_CONTENT_TO_DRAFT","GET_BANNER_IMG_LIST","GET_CLAIM_BANNER_IMG_LIST","GET_REST_CONTRIBUTION_NUMBER","GET_AUTHOR_INFO","GET_All_BIND_ACCOUNT","OPERATE_INVITE_REQUEST","GET_AUTHOR_INVITE_STATUS","INVITE_AUTHOR","GET_INVITE_ACCOUNT_INFO","GET_INVITATION","HANDLE_INVITATION","UPLOAD_FILE","UPLOAD_IMG_WITH_WATERMARK","UPDATE_AUTHOR_INFO","CANCEL_INVITE_AUTHOR","GET_BOUND_INSTITUTION_INFO","GET_GROWTH_LEVEL","GET_CREATOR_DOMAINS","GET_LONG_SECTIONS","UPDATE_LONG_SECTIONS","GET_AUTHOR_CONTRIBUTES_DOMAIN_ALL"]));var jn={recommendQuestionList:[],bannerList:[],claimBannerList:[],sites:[],domains:{},hasRecored:!1,hasClaim:!1,hasContributedList:[],notContributedList:[],contributesTotal:null,previewPageTitle:"",previewPageContent:"",restContributionNumber:"-"};var Yn=n(74514),Qn=n(436),Jn=n(29329),$n=n(75765),eo=(0,ue.FH)("explore",["GET_RECOMMENDATIONS","GET_LATEST_SPECIALS","GET_LATEST_ROUNDTABLES","GET_HOT_COLLECTIONS","GET_RECOMMEND_COLUMNS","FOLLOW_SPECIAL","UNFOLLOW_SPECIAL","FOLLOW_ROUNDTABLE","UNFOLLOW_ROUNDTABLE","FOLLOW_COLLECTION","UNFOLLOW_COLLECTION","GET_RECENT_HOT_QUESTION","GET_POTENTIAL_QUESTION"]);var to=(0,Xe.combineReducers)({recommendations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===eo.GET_RECOMMENDATIONS.request)return{isLoading:!0};if(t.type===eo.GET_RECOMMENDATIONS.success){var n=t.payload.data;return{isDrained:!0,items:n}}return t.type===eo.GET_RECOMMENDATIONS.failure?{isError:!0}:e},specials:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{entities:{},order:[]},t=arguments.length>1?arguments[1]:void 0;if(t.type===eo.GET_LATEST_SPECIALS.success){var n=t.payload.data;return{entities:n.reduce((function(e,t){return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},t.id,t))}),{}),order:n.map((function(e){return e.id}))}}if([eo.FOLLOW_SPECIAL.request,eo.UNFOLLOW_SPECIAL.failure].includes(t.type)){var o=t.meta.id,r=e.entities;return r[o]?(0,F.Z)((0,U.Z)({},e),{entities:(0,F.Z)((0,U.Z)({},r),(0,Ke.Z)({},o,(0,F.Z)((0,U.Z)({},r[o]),{isFollowing:!0})))}):e}if([eo.UNFOLLOW_SPECIAL.request,eo.FOLLOW_SPECIAL.failure].includes(t.type)){var i=t.meta.id,a=e.entities;return a[i]?(0,F.Z)((0,U.Z)({},e),{entities:(0,F.Z)((0,U.Z)({},a),(0,Ke.Z)({},i,(0,F.Z)((0,U.Z)({},a[i]),{isFollowing:!1})))}):e}return e},roundtables:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{entities:{},order:[]},t=arguments.length>1?arguments[1]:void 0;if(t.type===eo.GET_LATEST_ROUNDTABLES.success){var n=t.payload.data;return{entities:n.reduce((function(e,t){return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},t.urlToken,t))}),{}),order:n.map((function(e){return e.urlToken}))}}if([eo.FOLLOW_ROUNDTABLE.request,eo.UNFOLLOW_ROUNDTABLE.failure].includes(t.type)){var o=t.meta.urlToken,r=e.entities;return r[o]?(0,F.Z)((0,U.Z)({},e),{entities:(0,F.Z)((0,U.Z)({},r),(0,Ke.Z)({},o,(0,F.Z)((0,U.Z)({},r[o]),{followersCount:r[o].followersCount+1,isFollowing:!0})))}):e}if([eo.UNFOLLOW_ROUNDTABLE.request,eo.FOLLOW_ROUNDTABLE.failure].includes(t.type)){var i=t.meta.urlToken,a=e.entities;return a[i]?(0,F.Z)((0,U.Z)({},e),{entities:(0,F.Z)((0,U.Z)({},a),(0,Ke.Z)({},i,(0,F.Z)((0,U.Z)({},a[i]),{followersCount:a[i].followersCount-1,isFollowing:!1})))}):e}return e},collections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===eo.GET_HOT_COLLECTIONS.success){var n=t.payload.data;return n.reduce((function(e,t){return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},t.id,t))}),{})}if([eo.FOLLOW_COLLECTION.request,eo.UNFOLLOW_COLLECTION.failure].includes(t.type)){var o=t.meta.id;return e[o]?(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o,(0,F.Z)((0,U.Z)({},e[o]),{followerCount:e[o].followerCount+1,isFollowing:!0}))):e}if([eo.UNFOLLOW_COLLECTION.request,eo.FOLLOW_COLLECTION.failure].includes(t.type)){var r=t.meta.id;return e[r]?(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},r,(0,F.Z)((0,U.Z)({},e[r]),{followerCount:e[r].followerCount-1,isFollowing:!1}))):e}return e},columns:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===eo.GET_RECOMMEND_COLUMNS.success){var n=t.payload.data;return n.reduce((function(e,t){return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},t.urlToken,t))}),{})}return e},square:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hotQuestionList:[],potentialList:[]},t=arguments.length>1?arguments[1]:void 0;if(t.type===eo.GET_RECENT_HOT_QUESTION.success){var n=t.payload,o=n.data,r=void 0===o?[]:o;return(0,F.Z)((0,U.Z)({},e),{hotQuestionList:r.slice(0,4)})}if(t.type===eo.GET_POTENTIAL_QUESTION.success){var i=t.payload.data;return(0,F.Z)((0,U.Z)({},e),{potentialList:i.slice(0,4)})}return e}}),no=n(85570),oo=(0,U.Z)({},(0,ue.FH)("guide",["GET_TOPICS","SUBMIT_TOPICS"]),(0,ue.co)("guide",["CHANGE_SELECT_TOPIC"]));var ro=(0,Xe.combineReducers)({guide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isShowGuide:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case oo.SUBMIT_TOPICS.request:case oo.SUBMIT_TOPICS.failure:return(0,F.Z)((0,U.Z)({},e),{isSubmitTopic:"fail"});case oo.SUBMIT_TOPICS.success:var o=t.payload.success;return(0,F.Z)((0,U.Z)({},e),{isSubmitTopic:o?"done":"fail"});case oo.GET_TOPICS.request:case oo.GET_TOPICS.failure:return(0,F.Z)((0,U.Z)({},e),{isFetching:!1});case oo.GET_TOPICS.success:var i=t.payload.data;return(0,F.Z)((0,U.Z)({data:i},e),{isFetching:!0});case oo.CHANGE_SELECT_TOPIC:var a=t.data.index,c=e.data,s=e.data,u=s[a],l=u.relatedTopics,d=u.isFollowing,p=u.isSelected,h=Object.entries(c).map((function(e,t){var n=(0,Ae.Z)(e,2),o=(n[0],n[1]);return t===a?(0,F.Z)((0,U.Z)({},o),{isFollowing:!d,isSelected:!0}):o})),f=[];if(Boolean(l)&&!p){var m=l.map((function(e){return(0,F.Z)((0,U.Z)({},e),{isRelated:!0})}));f=(0,r.Z)(h.slice(0,a+1)).concat((0,r.Z)(m),(0,r.Z)(h.slice(a+1)))}else f=h;return{data:(0,U.Z)({},f),isFetching:!0};default:return e}}}),io=(0,ue.FH)("helpCenter",["LOAD_QUESTION_CATEGORIES","LOAD_CATEGORY_QUESTIONS","LOAD_COMMON_QUESTIONS","LOAD_QUESTION_DETAIL","LOAD_RELATED_QUESTIONS","SEARCH_QUESTIONS","LOAD_QUESTION_ALL_TYPES","LOAD_FAQ_QUESTIONS","LOAD_FAQ_QUESTION_DETAIL"]);var ao={entities:{question:{},category:{}},categories:[],commonQuestions:[],relatedQuestions:{},faqTypes:[]};var co=n(43270),so=(0,ue.FH)("knowledgePlan",["APPLY_ACTIVITY","LOAD_ALL_CREATION_RANK_LIST","LOAD_FEATURED_QUESTIONS","LOAD_LIST","SEND_MESSAGE"]);var uo=(0,Xe.combineReducers)({lists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.meta,r=t.payload;return n===so.LOAD_LIST.success?(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.stateKey,r)):e},allCreationRankList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===so.LOAD_ALL_CREATION_RANK_LIST.success?(0,U.Z)({},e,o):e},featuredQuestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===so.LOAD_FEATURED_QUESTIONS.request?(0,F.Z)((0,U.Z)({},e),{isLoading:!0}):n===so.LOAD_FEATURED_QUESTIONS.failure?(0,F.Z)((0,U.Z)({},e),{isLoading:!1}):n===so.LOAD_FEATURED_QUESTIONS.success?(0,F.Z)((0,U.Z)((0,F.Z)((0,U.Z)({},e),{isLoading:!1}),o),{data:(0,r.Z)((null==e?void 0:e.data)||[]).concat((0,r.Z)(o.data))}):e}}),lo=n(30060),po=n(18661),ho=(0,ue.FH)("mcn",["LOAD_RANK_LIST","VOTE_PRODUCT","LOAD_ELIGIBLE_CONTENT","LOAD_CONTENT_PRODUCTS","POST_CONTENT_PRODUCTS"]);function fo(e){var t={},n=[];return e.forEach((function(e){var o=e.linkcardId;t[o]=e,n.push(o)})),{entities:t,ids:n}}var mo={products:{},rankList:{total:{},yesterday:{}}};var vo=(0,Xe.combineReducers)({household:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mo,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload,r=t.meta;if(n===ho.LOAD_RANK_LIST.success){var i={},a={};for(var c in o){var s=fo(o[c]),u=s.entities,l=s.ids;Object.assign(i,u),a[c]=l}return(0,F.Z)((0,U.Z)({},e),{products:(0,U.Z)({},e.products,i),rankList:(0,F.Z)((0,U.Z)({},e.rankList),(0,Ke.Z)({},r.type,a))})}if(n===ho.VOTE_PRODUCT.request){var d=r.id,p=r.topicStatus;return(0,F.Z)((0,U.Z)({},e),{products:(0,F.Z)((0,U.Z)({},e.products),(0,Ke.Z)({},d,(0,F.Z)((0,U.Z)({},e.products[d]),{topicStatus:p})))})}if(n===ho.VOTE_PRODUCT.failure){var h=r.id,f=r.originalStatus;return(0,F.Z)((0,U.Z)({},e),{products:(0,F.Z)((0,U.Z)({},e.products),(0,Ke.Z)({},h,(0,F.Z)((0,U.Z)({},e.products[h]),{topicStatus:f})))})}return e}}),Zo=n(19825),go={isFetching:!1,isDrained:!1,isPrevDrained:!1,result:[],next:null,key:null};var Eo=function(e,t){var n=e.request,o=e.success,i=e.failure;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:go,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case t:return go;case n:var c=a.key,s=c!==e.key;return(0,F.Z)((0,U.Z)({},s?go:e),{key:c,isFetching:!0});case o:var u=a.result,l=a.next,d=a.isDrained,p=a.isPrevDrained;return(0,F.Z)((0,U.Z)({},e),{result:(0,r.Z)(e.result).concat((0,r.Z)(u)),next:l,isDrained:d||u.length<10,isPrevDrained:p,isFetching:!1});case i:return(0,F.Z)((0,U.Z)({},e),{isFetching:!1});default:return e}}},To=n(17907),Co=(0,U.Z)({},(0,ue.FH)("notifications",["GET_RECENT","GET_HISTORY","GET_NOTIFICATION_ACTORS","MARK_ALL_READ"]),(0,ue.co)("notifications",["CHANGE_RECENT_NOTIFICATION_ENTRY","CLEAR_NOTIFICATION_ACTORS"])),Ao=(new To.fK.Array(new To.fK.Object({target:Ut.l.USER})),Eo(Co.GET_RECENT,Co.CHANGE_RECENT_NOTIFICATION_ENTRY)),_o=Eo(Co.GET_HISTORY),yo=Eo(Co.GET_NOTIFICATION_ACTORS,Co.CLEAR_NOTIFICATION_ACTORS),So=(0,Xe.combineReducers)({recent:Ao,history:_o,notificationActors:yo,recentNotificationEntry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1?arguments[1]:void 0;return t.type===Co.CHANGE_RECENT_NOTIFICATION_ENTRY?t.entry:e}}),Io=n(90837),bo=n(20685),wo=(0,ue.FH)("publicEditPermission",["GET_PUBLIC_EDIT_PERMMISSION"]);var Ro=n(20747),No=n(29254),Oo=n(82832),Do=n(62333),Bo=n(82140),Po=n(64833),ko=n(62279),xo=n(38818),Lo=n.n(xo),Uo=n(72928),Fo=n.n(Uo),Mo=(n(10187),n(34314)),Go=n.n(Mo),zo=(["baike_box","edu_course","search_result","one_box","wiki_box","relevant_query","time_box","knowledge_ad","knowledge_result","knowledge_edu","ebook_saltpick","anniversary_activity","video_box","zvideo","koc_box","hot_timing","gaokao"].concat((0,r.Z)(C.Z.isMobileEntry?["ncee_2020_activity"]:[])),["baike_box","relevant_query","anniversary_activity","video_box","gaokao"].concat((0,r.Z)(C.Z.isMobileEntry?["ncee_2020_activity"]:[])),n(40937));var Ho=n(96053),qo=(0,ue.FH)("search",["GET_GENERAL","GET_GENERAL_A_DAY","GET_GENERAL_A_WEEK","GET_GENERAL_THREE_MONTHS","GET_PEOPLE","GET_TOPIC","GET_COLUMN","GET_LIVE","GET_KM_COURSE","GET_ALBUM","GET_EBOOK","GET_KM_GENERAL","GET_SUGGEST","GET_TOP_SEARCH","GET_PRESET_WORDS","LIKE_TOPIC","CANCEL_LIKE_TOPIC","DISLIKE_TOPIC","GET_MOBILE_TOP_SEARCH","CANCEL_DISLIKE_TOPIC","GET_ZVIDEO","GET_SCHOLAR","GET_CALENDAR","GET_SCORES","GET_STATS","GET_COURSES","GET_UNIVERSITIES","GET_ACE_MAJORS","GET_ADMISSIONS_GUIDE","GET_EMPLOYMENT_DESTINATION","GET_CUSTOM_FILTER_TAGS"]),Vo=(0,ue.co)("search",["UPDATE_SEARCH_VALUE","CLEAR_SEARCH_QUERY_DATA"]),Xo=Object.values(Fo()(qo,["GET_TOP_SEARCH","GET_MOBILE_TOP_SEARCH"])).map((function(e){return e.success})),Wo=(Ut.l.SEARCH_ADVANCED_GENERAL_ARRAY,Ut.l.SEARCH_ADVANCED_GENERAL_ONE_DAY_ARRAY,Ut.l.SEARCH_ADVANCED_GENERAL_ONE_WEEK_ARRAY,Ut.l.SEARCH_ADVANCED_GENERAL_THREE_MONTHS_ARRAY,qo.GET_GENERAL,qo.GET_GENERAL_A_DAY,qo.GET_GENERAL_A_WEEK,qo.GET_GENERAL_THREE_MONTHS,new To.fK.Array(new To.fK.Entity("searchKnowledgeGeneral")),new To.fK.Array(new To.fK.Entity("searchKnowledge")),function(e){return e.query}),Ko=function(e){return"".concat(e.query,"/").concat(e.customQuery)};function jo(){return{API:{endpoint:"search/top_search",types:qo.GET_TOP_SEARCH},NOTIFICATION:!1}}function Yo(e){return{API:{types:qo.GET_SUGGEST,endpoint:"/search/suggest",query:{q:e},headers:{"X-API-Version":"3.0.91","X-App-Za":"OS=Web"}},NOTIFICATION:!1}}var Qo=(0,Xe.combineReducers)({recommendSearch:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;if(n.type===qo.GET_GENERAL.success&&(null===(e=n.payload.relatedSearchResult)||void 0===e?void 0:e.length)){var o=n.payload.relatedSearchResult.map((function(e){return e.object||{}}));return Go()((0,r.Z)(t).concat((0,r.Z)(o)),(function(e,t){return e.id===t.id&&e.type===t.type}))}return t},topSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===qo.GET_TOP_SEARCH.success?t.payload?t.payload.topSearch:e:t.type===qo.GET_MOBILE_TOP_SEARCH.success&&t.payload?{words:t.payload.data}:e},searchValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===Vo.UPDATE_SEARCH_VALUE?{value:t.data.searchValue}:e},suggestSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===qo.GET_SUGGEST.success&&t.payload?t.payload:e},attachedInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{generalByQuery:{}},t=arguments.length>1?arguments[1]:void 0,n=t.payload,o=t.loadSearchType,r=t.searchType,i=null==n?void 0:n.searchActionInfo;if(Xo.includes(t.type)&&i){if("general"===r){var a=Ko(t);return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o,(0,F.Z)((0,U.Z)({},e[o]),(0,Ke.Z)({},a,i))))}return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o,i))}return e},nextOffset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{generalByQuery:{}},t=arguments.length>1?arguments[1]:void 0;if(t.type===Vo.CLEAR_SEARCH_QUERY_DATA)return{};if(Xo.includes(t.type)){var n,o=t.nextOffset,r=t.loadSearchType,i=t.payload,a=t.searchType,c=null==i||null===(n=i.paging)||void 0===n?void 0:n.next,s=c?(0,q.parse)(c.split("?")[1]):{},u=s.offset,l=s.limit,d=u?{offset:Number(u),limit:Number(l)}:{offset:o||0,limit:20};if("general"===a){var p=Ko(t);return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},r,(0,F.Z)((0,U.Z)({},e[r]),(0,Ke.Z)({},p,d))))}return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},r,d))}return e},topicReview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.id,r=t.totalVotes,i=t.currentStatus;switch(n){case qo.LIKE_TOPIC.success:return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o,{status:"like",totalVotes:"dislike"===i?r:r+1}));case qo.DISLIKE_TOPIC.success:return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o,{status:"dislike",totalVotes:"like"===i?r:r+1}));case qo.CANCEL_LIKE_TOPIC.success:case qo.CANCEL_DISLIKE_TOPIC.success:return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o,{status:"none",totalVotes:r-1}))}return e},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===qo.GET_CALENDAR.success&&t.payload?t.payload:e},scores:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===qo.GET_SCORES.success&&t.payload?t.payload:e},majors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.meta;switch(n){case qo.GET_UNIVERSITIES.request:return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.dataType,(0,F.Z)((0,U.Z)({},e[o.dataType]),{isLoading:!0})));case qo.GET_COURSES.success:case qo.GET_STATS.success:return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.dataType,t.payload));case qo.GET_UNIVERSITIES.success:var i;return o.isReset?(0,Ke.Z)({},o.dataType,(0,F.Z)((0,U.Z)({},t.payload),{isLoading:!1})):(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.dataType,(0,F.Z)((0,U.Z)({},e[o.dataType],t.payload),{isLoading:!1,universities:(0,r.Z)((null===(i=e[o.dataType])||void 0===i?void 0:i.universities)||[]).concat((0,r.Z)(t.payload.universities))})))}return e},university:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.meta;switch(n){case qo.GET_ACE_MAJORS.success:case qo.GET_ADMISSIONS_GUIDE.success:case qo.GET_EMPLOYMENT_DESTINATION.success:case qo.GET_SCORES.success:return(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.dataType,t.payload))}return e},generalByQuery:(0,Ho.Fd)(qo.GET_GENERAL,{mapActionToKey:Ko}),generalByQueryInADay:(0,Ho.Fd)(qo.GET_GENERAL_A_DAY,{mapActionToKey:Wo}),generalByQueryInAWeek:(0,Ho.Fd)(qo.GET_GENERAL_A_WEEK,{mapActionToKey:Wo}),generalByQueryInThreeMonths:(0,Ho.Fd)(qo.GET_GENERAL_THREE_MONTHS,{mapActionToKey:Wo}),peopleByQuery:(0,Ho.Fd)(qo.GET_PEOPLE,{mapActionToKey:Wo}),topicByQuery:(0,Ho.Fd)(qo.GET_TOPIC,{mapActionToKey:Wo}),zvideoByQuery:(0,Ho.Fd)(qo.GET_ZVIDEO,{mapActionToKey:Wo}),scholarByQuery:(0,Ho.Fd)(qo.GET_SCHOLAR,{mapActionToKey:Wo}),columnByQuery:(0,Ho.Fd)(qo.GET_COLUMN,{mapActionToKey:Wo}),liveByQuery:(0,Ho.Fd)(qo.GET_LIVE,{mapActionToKey:Wo}),albumByQuery:(0,Ho.Fd)(qo.GET_ALBUM,{mapActionToKey:Wo}),eBookByQuery:(0,Ho.Fd)(qo.GET_EBOOK,{mapActionToKey:Wo}),kmGeneralByQuery:(0,Ho.Fd)(qo.GET_KM_GENERAL,{mapActionToKey:Wo}),kmCourseByQuery:(0,Ho.Fd)(qo.GET_KM_COURSE,{mapActionToKey:Wo}),customFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{requestFinished:!1,keys:[],tags:[]},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;if(n===qo.GET_CUSTOM_FILTER_TAGS.success){var i=o.data,a=void 0===i?[]:i,c=(0,r.Z)(new Set(Lo()(a).map((function(e){return e.group}))));return{requestFinished:!0,keys:c,tags:a}}return n===qo.GET_CUSTOM_FILTER_TAGS.failure?(0,F.Z)((0,U.Z)({},e),{requestFinished:!0}):e}}),Jo=(0,U.Z)({},(0,ue.FH)("social",["UNBIND_SOCIAL_ACCOUNT","DELETE_SOCIAL_ACCOUNT","GET_SOCIAL_BIND","GET_MESSAGE_SETTING","UPDATE_MESSAGE_SETTING","GET_NOTIFICATION_SETTING","UPDATE_NOTIFICATION_SETTING","GET_EMAIL_SETTING","UPDATE_EMAIL_SETTING","GET_PRIVACY_SETTING","UPDATE_PRIVACY_SETTING","GET_BLOCKED_USERS","UNBLOCK_USER","GET_BLOCKED_FOLLOWEES","UNBLOCK_FOLLOWEE","GET_IGNORED_TOPICS","GET_RESTRICTED_TOPICS","RELEASE_IGNORED_TOPIC","GET_LABORATORY_SETTING","UPDATE_LABORATORY_SETTING","UPDATE_WATERMARK_SETTING","GET_PROFILE","UPDATE_AVATAR","UPDATE_ADMIN_PHONE","UPDATE_ADMIN","GET_ORG_PHONE_VERIFY_CODE","GET_WALL_E_BLACKLIST","UNDO_WALL_E_BLOCK"])),$o=Jo.UNBIND_SOCIAL_ACCOUNT,er=Jo.DELETE_SOCIAL_ACCOUNT,tr=Jo.GET_SOCIAL_BIND,nr=Jo.GET_MESSAGE_SETTING,or=Jo.UPDATE_MESSAGE_SETTING,rr=Jo.GET_NOTIFICATION_SETTING,ir=Jo.UPDATE_NOTIFICATION_SETTING,ar=Jo.GET_EMAIL_SETTING,cr=Jo.UPDATE_EMAIL_SETTING,sr=Jo.GET_PRIVACY_SETTING,ur=Jo.UPDATE_PRIVACY_SETTING,lr=Jo.GET_BLOCKED_USERS,dr=Jo.UNBLOCK_USER,pr=Jo.GET_BLOCKED_FOLLOWEES,hr=Jo.UNBLOCK_FOLLOWEE,fr=Jo.GET_IGNORED_TOPICS,mr=Jo.GET_RESTRICTED_TOPICS,vr=Jo.RELEASE_IGNORED_TOPIC,Zr=Jo.GET_LABORATORY_SETTING,gr=Jo.UPDATE_LABORATORY_SETTING,Er=(Jo.UPDATE_WATERMARK_SETTING,Jo.GET_PROFILE),Tr=(Jo.UPDATE_AVATAR,Jo.UPDATE_ADMIN_PHONE,Jo.UPDATE_ADMIN,Jo.GET_ORG_PHONE_VERIFY_CODE,Jo.GET_WALL_E_BLACKLIST),Cr=Jo.UNDO_WALL_E_BLOCK;var Ar={socialBind:null,inboxMsg:null,notification:{},email:{},privacyFlag:null,blockedUsers:{isFetching:!1,paging:{pageNo:1,pageSize:6},data:[]},blockedFollowees:{isFetching:!1,paging:{pageNo:1,pageSize:6},data:[]},ignoredTopics:{isFetching:!1,paging:{pageNo:1,pageSize:6},data:[]},restrictedTopics:null,laboratory:{}};function _r(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,F.Z)((0,U.Z)({},e),{isFetching:t})}function yr(e){var t=e.page,n=e.payload,o=n.paging,r=void 0===o?{}:o,i=n.data,a=void 0===i?[]:i;return{paging:(0,U.Z)({},r,t),data:a.map((function(e){return(0,F.Z)((0,U.Z)({},e),{isBlocked:!0})})),isFetching:!1}}function Sr(e,t){var n=e.paging,o=e.data;return{paging:(0,F.Z)((0,U.Z)({},n),{totals:n.totals-1}),data:o.map((function(e){return e.urlToken===t?(0,F.Z)((0,U.Z)({},e),{isBlocked:!1}):e}))}}var Ir=n(89411),br=n(91796),wr=(0,ue.FH)("specials",["GET_SPECIALS","FOLLOW_SPECIAL","UNFOLLOW_SPECIAL"]);var Rr={entities:{},all:{data:[],paging:{},isLoading:!1}};var Nr=(0,U.Z)({},(0,ue.FH)("streaming",["CHECK_WHITE_LIST_STATUS","CHECK_ACTOR_STATUS","LOAD_CATEGORY_DATA","LOAD_ACTIVITY_DATA","CHECK_THEATER_STATUS","GET_THEATER_INFO","GET_PUSH_DRAMA_INFO","START_PUSH_DRAMA","CLOSE_PUSH_DRAMA","GET_PULL_INFO","CREATE_PULL_INFO","UPDATE_PULL_INFO","START_PULL_DRAMA","CLOSE_PULL_DRAMA","START_PREVIEW_PULL_DRAMA","STOP_PREVIEW_PULL_DRAMA"]));var Or=n(33855),Dr=n(96531),Br=n(73571),Pr=n(93442),kr=n(15799),xr=(0,U.Z)({},(0,ue.co)("vessayCommon",["SET_BLOCK_UNLOAD","SET_CALIBRATING","SET_EDITING_TRACK_DATA","SET_NEW_ADD_MATERIAL_DATA","SAVE_AUDIO_CACHE","SET_SOURCE","SET_AUTO_SAVE"]),(0,ue.FH)("vessayCommon",["LOAD_DRAFT","CREATE_DRAFT","UPDATE_DRAFT","EXPORT_FROM_DRAFT","QUERY_EXPORT","UPLOAD_MATERIALS","QUERY_UPLOAD_MATERIALS","UPLOAD_MUSIC_LISTEN_INFO"])),Lr=(Symbol("lastTracks"),{draftId:null,source:{type:null,id:null},autoSave:!0,blockUnload:!0,isCalibratingEditing:!1,editingTrackData:{editingOutlines:[],editingVideos:[]},newAddMaterialData:{},audioCache:{},showTimbreRecordPanel:!1});var Ur="开始初始化",Fr=(0,ue.co)("vessayLoading",["SET_LOADING"]);var Mr=(0,ue.co)("vessayPlayer",["SET_PLAYER"]),Gr={currentTime:0,totalTime:0,playing:!1,containerSize:null};var zr=(0,U.Z)({},(0,ue.FH)("vessayLibrary",["LOAD_MATERIAL_LIBRARY","LOAD_MUSIC_LIBRARY_CATEGORIES","LOAD_MUSIC_LIBRARY","LOAD_MUSIC_URL","LOAD_MATERIAL_LIBRARY_SEARCH_RESULT","DELETE_LIBRARY_ITEMS","SAVE_UPLOADED_MATERIAL"]),(0,ue.co)("vessayLibrary",["CLEAR_LIBRARY","ADD_LIBRARY_ITEMS"]));var Hr=function(e,t,n){return(0,Ho.QT)(t,(0,U.Z)({defaultState:{data:[]},keySelector:function(e){return e.meta.category},mergeState:function(e,t){var n=t.payload;return{data:n.data||[],next:n.paging.next}},additionCase:function(t,n){var o,i,a,c=n.type,s=n.meta,u=n.payload;return c===zr.ADD_LIBRARY_ITEMS&&e===s.libraryType&&(null===(o=t.mine)||void 0===o?void 0:o.data)?(0,F.Z)((0,U.Z)({},t),{mine:(0,F.Z)((0,U.Z)({},t.mine),{data:[s.data].concat((0,r.Z)(t.mine.data))})}):c===zr.DELETE_LIBRARY_ITEMS.success&&e===s.libraryType&&(null===(i=t.mine)||void 0===i?void 0:i.data)?(0,F.Z)((0,U.Z)({},t),{mine:(0,F.Z)((0,U.Z)({},t.mine),{data:t.mine.data.filter((function(e){var t=e.uploadId;return!s.ids.includes(t)}))})}):"music"===e&&"music"===(null==s?void 0:s.subtype)&&c===zr.SAVE_UPLOADED_MATERIAL.success&&(null===(a=t.mine)||void 0===a?void 0:a.data)?(0,F.Z)((0,U.Z)({},t),{mine:(0,F.Z)((0,U.Z)({},t.mine),{data:[u].concat(t.mine.data)})}):c===zr.CLEAR_LIBRARY&&e===s.libraryType?s.category?(0,F.Z)((0,U.Z)({},t),(0,Ke.Z)({},s.category,null)):{}:t}},n))},qr=(0,Xe.combineReducers)({material:Hr("material",zr.LOAD_MATERIAL_LIBRARY),materialSearchResult:Hr("materialSearchResult",zr.LOAD_MATERIAL_LIBRARY_SEARCH_RESULT),music:Hr("music",zr.LOAD_MUSIC_LIBRARY),musicLibraryCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===zr.LOAD_MUSIC_LIBRARY_CATEGORIES.success&&o.data.length?o.data.map((function(e){var t=e.id;return{name:e.name,key:t}})):e},musicUrls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.meta,r=t.payload;return n===zr.LOAD_MUSIC_URL.success?(0,F.Z)((0,U.Z)({},e),(0,Ke.Z)({},o.musicId,r.url)):e}}),Vr=n(6100),Xr=n.n(Vr),Wr=n(39),Kr=n(4814),jr=n.n(Kr),Yr=(n(66681),n(95567),n(86728),n(48340));RegExp("([A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05D0-\\u05EA\\u05EF-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086A\\u08A0-\\u08B4\\u08B6-\\u08C7\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u09FC\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D04-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1C80-\\u1C88\\u1C90-\\u1CBA\\u1CBD-\\u1CBF\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3400-\\u4DBF\\u4E00-\\u9FFC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7BF\\uA7C2-\\uA7CA\\uA7F5-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA8FE\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB69\\uAB70-\\uABE2\\uAC00-힣ힰ-ퟆퟋ-ퟻ\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC\\u{10000}-\\u{1000B}\\u{1000D}-\\u{10026}\\u{10028}-\\u{1003A}\\u{1003C}\\u{1003D}\\u{1003F}-\\u{1004D}\\u{10050}-\\u{1005D}\\u{10080}-\\u{100FA}\\u{10280}-\\u{1029C}\\u{102A0}-\\u{102D0}\\u{10300}-\\u{1031F}\\u{1032D}-\\u{10340}\\u{10342}-\\u{10349}\\u{10350}-\\u{10375}\\u{10380}-\\u{1039D}\\u{103A0}-\\u{103C3}\\u{103C8}-\\u{103CF}\\u{10400}-\\u{1049D}\\u{104B0}-\\u{104D3}\\u{104D8}-\\u{104FB}\\u{10500}-\\u{10527}\\u{10530}-\\u{10563}\\u{10600}-\\u{10736}\\u{10740}-\\u{10755}\\u{10760}-\\u{10767}\\u{10800}-\\u{10805}\\u{10808}\\u{1080A}-\\u{10835}\\u{10837}\\u{10838}\\u{1083C}\\u{1083F}-\\u{10855}\\u{10860}-\\u{10876}\\u{10880}-\\u{1089E}\\u{108E0}-\\u{108F2}\\u{108F4}\\u{108F5}\\u{10900}-\\u{10915}\\u{10920}-\\u{10939}\\u{10980}-\\u{109B7}\\u{109BE}\\u{109BF}\\u{10A00}\\u{10A10}-\\u{10A13}\\u{10A15}-\\u{10A17}\\u{10A19}-\\u{10A35}\\u{10A60}-\\u{10A7C}\\u{10A80}-\\u{10A9C}\\u{10AC0}-\\u{10AC7}\\u{10AC9}-\\u{10AE4}\\u{10B00}-\\u{10B35}\\u{10B40}-\\u{10B55}\\u{10B60}-\\u{10B72}\\u{10B80}-\\u{10B91}\\u{10C00}-\\u{10C48}\\u{10C80}-\\u{10CB2}\\u{10CC0}-\\u{10CF2}\\u{10D00}-\\u{10D23}\\u{10E80}-\\u{10EA9}\\u{10EB0}\\u{10EB1}\\u{10F00}-\\u{10F1C}\\u{10F27}\\u{10F30}-\\u{10F45}\\u{10FB0}-\\u{10FC4}\\u{10FE0}-\\u{10FF6}\\u{11003}-\\u{11037}\\u{11083}-\\u{110AF}\\u{110D0}-\\u{110E8}\\u{11103}-\\u{11126}\\u{11144}\\u{11147}\\u{11150}-\\u{11172}\\u{11176}\\u{11183}-\\u{111B2}\\u{111C1}-\\u{111C4}\\u{111DA}\\u{111DC}\\u{11200}-\\u{11211}\\u{11213}-\\u{1122B}\\u{11280}-\\u{11286}\\u{11288}\\u{1128A}-\\u{1128D}\\u{1128F}-\\u{1129D}\\u{1129F}-\\u{112A8}\\u{112B0}-\\u{112DE}\\u{11305}-\\u{1130C}\\u{1130F}\\u{11310}\\u{11313}-\\u{11328}\\u{1132A}-\\u{11330}\\u{11332}\\u{11333}\\u{11335}-\\u{11339}\\u{1133D}\\u{11350}\\u{1135D}-\\u{11361}\\u{11400}-\\u{11434}\\u{11447}-\\u{1144A}\\u{1145F}-\\u{11461}\\u{11480}-\\u{114AF}\\u{114C4}\\u{114C5}\\u{114C7}\\u{11580}-\\u{115AE}\\u{115D8}-\\u{115DB}\\u{11600}-\\u{1162F}\\u{11644}\\u{11680}-\\u{116AA}\\u{116B8}\\u{11700}-\\u{1171A}\\u{11800}-\\u{1182B}\\u{118A0}-\\u{118DF}\\u{118FF}-\\u{11906}\\u{11909}\\u{1190C}-\\u{11913}\\u{11915}\\u{11916}\\u{11918}-\\u{1192F}\\u{1193F}\\u{11941}\\u{119A0}-\\u{119A7}\\u{119AA}-\\u{119D0}\\u{119E1}\\u{119E3}\\u{11A00}\\u{11A0B}-\\u{11A32}\\u{11A3A}\\u{11A50}\\u{11A5C}-\\u{11A89}\\u{11A9D}\\u{11AC0}-\\u{11AF8}\\u{11C00}-\\u{11C08}\\u{11C0A}-\\u{11C2E}\\u{11C40}\\u{11C72}-\\u{11C8F}\\u{11D00}-\\u{11D06}\\u{11D08}\\u{11D09}\\u{11D0B}-\\u{11D30}\\u{11D46}\\u{11D60}-\\u{11D65}\\u{11D67}\\u{11D68}\\u{11D6A}-\\u{11D89}\\u{11D98}\\u{11EE0}-\\u{11EF2}\\u{11FB0}\\u{12000}-\\u{12399}\\u{12480}-\\u{12543}\\u{13000}-\\u{1342E}\\u{14400}-\\u{14646}\\u{16800}-\\u{16A38}\\u{16A40}-\\u{16A5E}\\u{16AD0}-\\u{16AED}\\u{16B00}-\\u{16B2F}\\u{16B40}-\\u{16B43}\\u{16B63}-\\u{16B77}\\u{16B7D}-\\u{16B8F}\\u{16E40}-\\u{16E7F}\\u{16F00}-\\u{16F4A}\\u{16F50}\\u{16F93}-\\u{16F9F}\\u{16FE0}\\u{16FE1}\\u{16FE3}\\u{17000}-\\u{187F7}\\u{18800}-\\u{18CD5}\\u{18D00}-\\u{18D08}\\u{1B000}-\\u{1B11E}\\u{1B150}-\\u{1B152}\\u{1B164}-\\u{1B167}\\u{1B170}-\\u{1B2FB}\\u{1BC00}-\\u{1BC6A}\\u{1BC70}-\\u{1BC7C}\\u{1BC80}-\\u{1BC88}\\u{1BC90}-\\u{1BC99}\\u{1D400}-\\u{1D454}\\u{1D456}-\\u{1D49C}\\u{1D49E}\\u{1D49F}\\u{1D4A2}\\u{1D4A5}\\u{1D4A6}\\u{1D4A9}-\\u{1D4AC}\\u{1D4AE}-\\u{1D4B9}\\u{1D4BB}\\u{1D4BD}-\\u{1D4C3}\\u{1D4C5}-\\u{1D505}\\u{1D507}-\\u{1D50A}\\u{1D50D}-\\u{1D514}\\u{1D516}-\\u{1D51C}\\u{1D51E}-\\u{1D539}\\u{1D53B}-\\u{1D53E}\\u{1D540}-\\u{1D544}\\u{1D546}\\u{1D54A}-\\u{1D550}\\u{1D552}-\\u{1D6A5}\\u{1D6A8}-\\u{1D6C0}\\u{1D6C2}-\\u{1D6DA}\\u{1D6DC}-\\u{1D6FA}\\u{1D6FC}-\\u{1D714}\\u{1D716}-\\u{1D734}\\u{1D736}-\\u{1D74E}\\u{1D750}-\\u{1D76E}\\u{1D770}-\\u{1D788}\\u{1D78A}-\\u{1D7A8}\\u{1D7AA}-\\u{1D7C2}\\u{1D7C4}-\\u{1D7CB}\\u{1E100}-\\u{1E12C}\\u{1E137}-\\u{1E13D}\\u{1E14E}\\u{1E2C0}-\\u{1E2EB}\\u{1E800}-\\u{1E8C4}\\u{1E900}-\\u{1E943}\\u{1E94B}\\u{1EE00}-\\u{1EE03}\\u{1EE05}-\\u{1EE1F}\\u{1EE21}\\u{1EE22}\\u{1EE24}\\u{1EE27}\\u{1EE29}-\\u{1EE32}\\u{1EE34}-\\u{1EE37}\\u{1EE39}\\u{1EE3B}\\u{1EE42}\\u{1EE47}\\u{1EE49}\\u{1EE4B}\\u{1EE4D}-\\u{1EE4F}\\u{1EE51}\\u{1EE52}\\u{1EE54}\\u{1EE57}\\u{1EE59}\\u{1EE5B}\\u{1EE5D}\\u{1EE5F}\\u{1EE61}\\u{1EE62}\\u{1EE64}\\u{1EE67}-\\u{1EE6A}\\u{1EE6C}-\\u{1EE72}\\u{1EE74}-\\u{1EE77}\\u{1EE79}-\\u{1EE7C}\\u{1EE7E}\\u{1EE80}-\\u{1EE89}\\u{1EE8B}-\\u{1EE9B}\\u{1EEA1}-\\u{1EEA3}\\u{1EEA5}-\\u{1EEA9}\\u{1EEAB}-\\u{1EEBB}\\u{20000}-\\u{2A6DD}\\u{2A700}-\\u{2B734}\\u{2B740}-\\u{2B81D}\\u{2B820}-\\u{2CEA1}\\u{2CEB0}-\\u{2EBE0}\\u{2F800}-\\u{2FA1D}\\u{30000}-\\u{3134A}]|[0-9\\xB2\\xB3\\xB9\\xBC-\\xBE\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u09F4-\\u09F9\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0B72-\\u0B77\\u0BE6-\\u0BF2\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0CE6-\\u0CEF\\u0D58-\\u0D5E\\u0D66-\\u0D78\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F33\\u1040-\\u1049\\u1090-\\u1099\\u1369-\\u137C\\u16EE-\\u16F0\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19DA\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2150-\\u2182\\u2185-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2CFD\\u3007\\u3021-\\u3029\\u3038-\\u303A\\u3192-\\u3195\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\uA620-\\uA629\\uA6E6-\\uA6EF\\uA830-\\uA835\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19\\u{10107}-\\u{10133}\\u{10140}-\\u{10178}\\u{1018A}\\u{1018B}\\u{102E1}-\\u{102FB}\\u{10320}-\\u{10323}\\u{10341}\\u{1034A}\\u{103D1}-\\u{103D5}\\u{104A0}-\\u{104A9}\\u{10858}-\\u{1085F}\\u{10879}-\\u{1087F}\\u{108A7}-\\u{108AF}\\u{108FB}-\\u{108FF}\\u{10916}-\\u{1091B}\\u{109BC}\\u{109BD}\\u{109C0}-\\u{109CF}\\u{109D2}-\\u{109FF}\\u{10A40}-\\u{10A48}\\u{10A7D}\\u{10A7E}\\u{10A9D}-\\u{10A9F}\\u{10AEB}-\\u{10AEF}\\u{10B58}-\\u{10B5F}\\u{10B78}-\\u{10B7F}\\u{10BA9}-\\u{10BAF}\\u{10CFA}-\\u{10CFF}\\u{10D30}-\\u{10D39}\\u{10E60}-\\u{10E7E}\\u{10F1D}-\\u{10F26}\\u{10F51}-\\u{10F54}\\u{10FC5}-\\u{10FCB}\\u{11052}-\\u{1106F}\\u{110F0}-\\u{110F9}\\u{11136}-\\u{1113F}\\u{111D0}-\\u{111D9}\\u{111E1}-\\u{111F4}\\u{112F0}-\\u{112F9}\\u{11450}-\\u{11459}\\u{114D0}-\\u{114D9}\\u{11650}-\\u{11659}\\u{116C0}-\\u{116C9}\\u{11730}-\\u{1173B}\\u{118E0}-\\u{118F2}\\u{11950}-\\u{11959}\\u{11C50}-\\u{11C6C}\\u{11D50}-\\u{11D59}\\u{11DA0}-\\u{11DA9}\\u{11FC0}-\\u{11FD4}\\u{12400}-\\u{1246E}\\u{16A60}-\\u{16A69}\\u{16B50}-\\u{16B59}\\u{16B5B}-\\u{16B61}\\u{16E80}-\\u{16E96}\\u{1D2E0}-\\u{1D2F3}\\u{1D360}-\\u{1D378}\\u{1D7CE}-\\u{1D7FF}\\u{1E140}-\\u{1E149}\\u{1E2F0}-\\u{1E2F9}\\u{1E8C7}-\\u{1E8CF}\\u{1E950}-\\u{1E959}\\u{1EC71}-\\u{1ECAB}\\u{1ECAD}-\\u{1ECAF}\\u{1ECB1}-\\u{1ECB4}\\u{1ED01}-\\u{1ED2D}\\u{1ED2F}-\\u{1ED3D}\\u{1F100}-\\u{1F10C}\\u{1FBF0}-\\u{1FBF9}]|[\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u3005\\u3007\\u3021-\\u3029\\u3038-\\u303B\\u3400-\\u4DBF\\u4E00-\\u9FFC\\uF900-\\uFA6D\\uFA70-\\uFAD9\\u{16FF0}\\u{16FF1}\\u{20000}-\\u{2A6DD}\\u{2A700}-\\u{2B734}\\u{2B740}-\\u{2B81D}\\u{2B820}-\\u{2CEA1}\\u{2CEB0}-\\u{2EBE0}\\u{2F800}-\\u{2FA1D}\\u{30000}-\\u{3134A}])+","u"),RegExp("([A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05D0-\\u05EA\\u05EF-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086A\\u08A0-\\u08B4\\u08B6-\\u08C7\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u09FC\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D04-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1C80-\\u1C88\\u1C90-\\u1CBA\\u1CBD-\\u1CBF\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3400-\\u4DBF\\u4E00-\\u9FFC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7BF\\uA7C2-\\uA7CA\\uA7F5-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA8FE\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB69\\uAB70-\\uABE2\\uAC00-힣ힰ-ퟆퟋ-ퟻ\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC\\u{10000}-\\u{1000B}\\u{1000D}-\\u{10026}\\u{10028}-\\u{1003A}\\u{1003C}\\u{1003D}\\u{1003F}-\\u{1004D}\\u{10050}-\\u{1005D}\\u{10080}-\\u{100FA}\\u{10280}-\\u{1029C}\\u{102A0}-\\u{102D0}\\u{10300}-\\u{1031F}\\u{1032D}-\\u{10340}\\u{10342}-\\u{10349}\\u{10350}-\\u{10375}\\u{10380}-\\u{1039D}\\u{103A0}-\\u{103C3}\\u{103C8}-\\u{103CF}\\u{10400}-\\u{1049D}\\u{104B0}-\\u{104D3}\\u{104D8}-\\u{104FB}\\u{10500}-\\u{10527}\\u{10530}-\\u{10563}\\u{10600}-\\u{10736}\\u{10740}-\\u{10755}\\u{10760}-\\u{10767}\\u{10800}-\\u{10805}\\u{10808}\\u{1080A}-\\u{10835}\\u{10837}\\u{10838}\\u{1083C}\\u{1083F}-\\u{10855}\\u{10860}-\\u{10876}\\u{10880}-\\u{1089E}\\u{108E0}-\\u{108F2}\\u{108F4}\\u{108F5}\\u{10900}-\\u{10915}\\u{10920}-\\u{10939}\\u{10980}-\\u{109B7}\\u{109BE}\\u{109BF}\\u{10A00}\\u{10A10}-\\u{10A13}\\u{10A15}-\\u{10A17}\\u{10A19}-\\u{10A35}\\u{10A60}-\\u{10A7C}\\u{10A80}-\\u{10A9C}\\u{10AC0}-\\u{10AC7}\\u{10AC9}-\\u{10AE4}\\u{10B00}-\\u{10B35}\\u{10B40}-\\u{10B55}\\u{10B60}-\\u{10B72}\\u{10B80}-\\u{10B91}\\u{10C00}-\\u{10C48}\\u{10C80}-\\u{10CB2}\\u{10CC0}-\\u{10CF2}\\u{10D00}-\\u{10D23}\\u{10E80}-\\u{10EA9}\\u{10EB0}\\u{10EB1}\\u{10F00}-\\u{10F1C}\\u{10F27}\\u{10F30}-\\u{10F45}\\u{10FB0}-\\u{10FC4}\\u{10FE0}-\\u{10FF6}\\u{11003}-\\u{11037}\\u{11083}-\\u{110AF}\\u{110D0}-\\u{110E8}\\u{11103}-\\u{11126}\\u{11144}\\u{11147}\\u{11150}-\\u{11172}\\u{11176}\\u{11183}-\\u{111B2}\\u{111C1}-\\u{111C4}\\u{111DA}\\u{111DC}\\u{11200}-\\u{11211}\\u{11213}-\\u{1122B}\\u{11280}-\\u{11286}\\u{11288}\\u{1128A}-\\u{1128D}\\u{1128F}-\\u{1129D}\\u{1129F}-\\u{112A8}\\u{112B0}-\\u{112DE}\\u{11305}-\\u{1130C}\\u{1130F}\\u{11310}\\u{11313}-\\u{11328}\\u{1132A}-\\u{11330}\\u{11332}\\u{11333}\\u{11335}-\\u{11339}\\u{1133D}\\u{11350}\\u{1135D}-\\u{11361}\\u{11400}-\\u{11434}\\u{11447}-\\u{1144A}\\u{1145F}-\\u{11461}\\u{11480}-\\u{114AF}\\u{114C4}\\u{114C5}\\u{114C7}\\u{11580}-\\u{115AE}\\u{115D8}-\\u{115DB}\\u{11600}-\\u{1162F}\\u{11644}\\u{11680}-\\u{116AA}\\u{116B8}\\u{11700}-\\u{1171A}\\u{11800}-\\u{1182B}\\u{118A0}-\\u{118DF}\\u{118FF}-\\u{11906}\\u{11909}\\u{1190C}-\\u{11913}\\u{11915}\\u{11916}\\u{11918}-\\u{1192F}\\u{1193F}\\u{11941}\\u{119A0}-\\u{119A7}\\u{119AA}-\\u{119D0}\\u{119E1}\\u{119E3}\\u{11A00}\\u{11A0B}-\\u{11A32}\\u{11A3A}\\u{11A50}\\u{11A5C}-\\u{11A89}\\u{11A9D}\\u{11AC0}-\\u{11AF8}\\u{11C00}-\\u{11C08}\\u{11C0A}-\\u{11C2E}\\u{11C40}\\u{11C72}-\\u{11C8F}\\u{11D00}-\\u{11D06}\\u{11D08}\\u{11D09}\\u{11D0B}-\\u{11D30}\\u{11D46}\\u{11D60}-\\u{11D65}\\u{11D67}\\u{11D68}\\u{11D6A}-\\u{11D89}\\u{11D98}\\u{11EE0}-\\u{11EF2}\\u{11FB0}\\u{12000}-\\u{12399}\\u{12480}-\\u{12543}\\u{13000}-\\u{1342E}\\u{14400}-\\u{14646}\\u{16800}-\\u{16A38}\\u{16A40}-\\u{16A5E}\\u{16AD0}-\\u{16AED}\\u{16B00}-\\u{16B2F}\\u{16B40}-\\u{16B43}\\u{16B63}-\\u{16B77}\\u{16B7D}-\\u{16B8F}\\u{16E40}-\\u{16E7F}\\u{16F00}-\\u{16F4A}\\u{16F50}\\u{16F93}-\\u{16F9F}\\u{16FE0}\\u{16FE1}\\u{16FE3}\\u{17000}-\\u{187F7}\\u{18800}-\\u{18CD5}\\u{18D00}-\\u{18D08}\\u{1B000}-\\u{1B11E}\\u{1B150}-\\u{1B152}\\u{1B164}-\\u{1B167}\\u{1B170}-\\u{1B2FB}\\u{1BC00}-\\u{1BC6A}\\u{1BC70}-\\u{1BC7C}\\u{1BC80}-\\u{1BC88}\\u{1BC90}-\\u{1BC99}\\u{1D400}-\\u{1D454}\\u{1D456}-\\u{1D49C}\\u{1D49E}\\u{1D49F}\\u{1D4A2}\\u{1D4A5}\\u{1D4A6}\\u{1D4A9}-\\u{1D4AC}\\u{1D4AE}-\\u{1D4B9}\\u{1D4BB}\\u{1D4BD}-\\u{1D4C3}\\u{1D4C5}-\\u{1D505}\\u{1D507}-\\u{1D50A}\\u{1D50D}-\\u{1D514}\\u{1D516}-\\u{1D51C}\\u{1D51E}-\\u{1D539}\\u{1D53B}-\\u{1D53E}\\u{1D540}-\\u{1D544}\\u{1D546}\\u{1D54A}-\\u{1D550}\\u{1D552}-\\u{1D6A5}\\u{1D6A8}-\\u{1D6C0}\\u{1D6C2}-\\u{1D6DA}\\u{1D6DC}-\\u{1D6FA}\\u{1D6FC}-\\u{1D714}\\u{1D716}-\\u{1D734}\\u{1D736}-\\u{1D74E}\\u{1D750}-\\u{1D76E}\\u{1D770}-\\u{1D788}\\u{1D78A}-\\u{1D7A8}\\u{1D7AA}-\\u{1D7C2}\\u{1D7C4}-\\u{1D7CB}\\u{1E100}-\\u{1E12C}\\u{1E137}-\\u{1E13D}\\u{1E14E}\\u{1E2C0}-\\u{1E2EB}\\u{1E800}-\\u{1E8C4}\\u{1E900}-\\u{1E943}\\u{1E94B}\\u{1EE00}-\\u{1EE03}\\u{1EE05}-\\u{1EE1F}\\u{1EE21}\\u{1EE22}\\u{1EE24}\\u{1EE27}\\u{1EE29}-\\u{1EE32}\\u{1EE34}-\\u{1EE37}\\u{1EE39}\\u{1EE3B}\\u{1EE42}\\u{1EE47}\\u{1EE49}\\u{1EE4B}\\u{1EE4D}-\\u{1EE4F}\\u{1EE51}\\u{1EE52}\\u{1EE54}\\u{1EE57}\\u{1EE59}\\u{1EE5B}\\u{1EE5D}\\u{1EE5F}\\u{1EE61}\\u{1EE62}\\u{1EE64}\\u{1EE67}-\\u{1EE6A}\\u{1EE6C}-\\u{1EE72}\\u{1EE74}-\\u{1EE77}\\u{1EE79}-\\u{1EE7C}\\u{1EE7E}\\u{1EE80}-\\u{1EE89}\\u{1EE8B}-\\u{1EE9B}\\u{1EEA1}-\\u{1EEA3}\\u{1EEA5}-\\u{1EEA9}\\u{1EEAB}-\\u{1EEBB}\\u{20000}-\\u{2A6DD}\\u{2A700}-\\u{2B734}\\u{2B740}-\\u{2B81D}\\u{2B820}-\\u{2CEA1}\\u{2CEB0}-\\u{2EBE0}\\u{2F800}-\\u{2FA1D}\\u{30000}-\\u{3134A}]|[0-9\\xB2\\xB3\\xB9\\xBC-\\xBE\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u09F4-\\u09F9\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0B72-\\u0B77\\u0BE6-\\u0BF2\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0CE6-\\u0CEF\\u0D58-\\u0D5E\\u0D66-\\u0D78\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F33\\u1040-\\u1049\\u1090-\\u1099\\u1369-\\u137C\\u16EE-\\u16F0\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19DA\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2150-\\u2182\\u2185-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2CFD\\u3007\\u3021-\\u3029\\u3038-\\u303A\\u3192-\\u3195\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\uA620-\\uA629\\uA6E6-\\uA6EF\\uA830-\\uA835\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19\\u{10107}-\\u{10133}\\u{10140}-\\u{10178}\\u{1018A}\\u{1018B}\\u{102E1}-\\u{102FB}\\u{10320}-\\u{10323}\\u{10341}\\u{1034A}\\u{103D1}-\\u{103D5}\\u{104A0}-\\u{104A9}\\u{10858}-\\u{1085F}\\u{10879}-\\u{1087F}\\u{108A7}-\\u{108AF}\\u{108FB}-\\u{108FF}\\u{10916}-\\u{1091B}\\u{109BC}\\u{109BD}\\u{109C0}-\\u{109CF}\\u{109D2}-\\u{109FF}\\u{10A40}-\\u{10A48}\\u{10A7D}\\u{10A7E}\\u{10A9D}-\\u{10A9F}\\u{10AEB}-\\u{10AEF}\\u{10B58}-\\u{10B5F}\\u{10B78}-\\u{10B7F}\\u{10BA9}-\\u{10BAF}\\u{10CFA}-\\u{10CFF}\\u{10D30}-\\u{10D39}\\u{10E60}-\\u{10E7E}\\u{10F1D}-\\u{10F26}\\u{10F51}-\\u{10F54}\\u{10FC5}-\\u{10FCB}\\u{11052}-\\u{1106F}\\u{110F0}-\\u{110F9}\\u{11136}-\\u{1113F}\\u{111D0}-\\u{111D9}\\u{111E1}-\\u{111F4}\\u{112F0}-\\u{112F9}\\u{11450}-\\u{11459}\\u{114D0}-\\u{114D9}\\u{11650}-\\u{11659}\\u{116C0}-\\u{116C9}\\u{11730}-\\u{1173B}\\u{118E0}-\\u{118F2}\\u{11950}-\\u{11959}\\u{11C50}-\\u{11C6C}\\u{11D50}-\\u{11D59}\\u{11DA0}-\\u{11DA9}\\u{11FC0}-\\u{11FD4}\\u{12400}-\\u{1246E}\\u{16A60}-\\u{16A69}\\u{16B50}-\\u{16B59}\\u{16B5B}-\\u{16B61}\\u{16E80}-\\u{16E96}\\u{1D2E0}-\\u{1D2F3}\\u{1D360}-\\u{1D378}\\u{1D7CE}-\\u{1D7FF}\\u{1E140}-\\u{1E149}\\u{1E2F0}-\\u{1E2F9}\\u{1E8C7}-\\u{1E8CF}\\u{1E950}-\\u{1E959}\\u{1EC71}-\\u{1ECAB}\\u{1ECAD}-\\u{1ECAF}\\u{1ECB1}-\\u{1ECB4}\\u{1ED01}-\\u{1ED2D}\\u{1ED2F}-\\u{1ED3D}\\u{1F100}-\\u{1F10C}\\u{1FBF0}-\\u{1FBF9}]|[\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u3005\\u3007\\u3021-\\u3029\\u3038-\\u303B\\u3400-\\u4DBF\\u4E00-\\u9FFC\\uF900-\\uFA6D\\uFA70-\\uFAD9\\u{16FF0}\\u{16FF1}\\u{20000}-\\u{2A6DD}\\u{2A700}-\\u{2B734}\\u{2B740}-\\u{2B81D}\\u{2B820}-\\u{2CEA1}\\u{2CEB0}-\\u{2EBE0}\\u{2F800}-\\u{2FA1D}\\u{30000}-\\u{3134A}])+","gu");var Qr=n(47112),Jr=n.n(Qr);var $r,ei,ti,ni=n(31803),oi=((0,ni.Z)("vessay"),function(e){var t,n,o;return(null==e||null===(t=e.hd)||void 0===t?void 0:t.playUrl)||(null==e||null===(n=e.sd)||void 0===n?void 0:n.playUrl)||(null==e||null===(o=e.ld)||void 0===o?void 0:o.playUrl)}),ri=function(e){var t=!0,n=!1,o=void 0;try{for(var r,i=Object.keys(e)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=e[r.value];if(a)return{width:a.width,height:a.height}}}catch(e){n=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw o}}},ii=($r=(0,_.Z)((function(e,t){var n,o,r,i,a;return(0,y.Jh)(this,(function(c){switch(c.label){case 0:return[4,t(xi(e))];case 1:return n=c.sent(),o=n.payload,r=o.playlist,i=o.coverInfo,a=o.duration,[2,{duration:Math.round(1e3*a),thumbnail:null==i?void 0:i.thumbnail,playUrl:oi(r),videoSize:ri(r)}]}}))})),function(){var e=(0,_.Z)((function(e,t){var n,o,r;return(0,y.Jh)(this,(function(i){switch(i.label){case 0:return[4,t(xi(e))];case 1:return o=i.sent(),r=null==o||null===(n=o.payload)||void 0===n?void 0:n.playlist,[2,oi(r)]}}))}))}(),"title"),ai="subtitle",ci="image",si="frame",ui="audio",li="video",di="video",pi="audio",hi="image",fi="title",mi="advanced_title",vi="subtitle",Zi="frame",gi="transition",Ei="advanced_text",Ti="text",Ci="text_image",Ai="audio",_i="sticker",yi="frame",Si="image",Ii="video",bi="transition",wi="subtitle",Ri="style",Ni=(ei={},(0,Ke.Z)(ei,Ei,ii),(0,Ke.Z)(ei,Ti,ii),(0,Ke.Z)(ei,Ci,ii),(0,Ke.Z)(ei,Ai,ui),(0,Ke.Z)(ei,_i,ci),(0,Ke.Z)(ei,yi,si),(0,Ke.Z)(ei,Si,li),(0,Ke.Z)(ei,Ii,li),(0,Ke.Z)(ei,bi,li),(0,Ke.Z)(ei,wi,ai),(0,Ke.Z)(ei,Ri,si),ti={},(0,Ke.Z)(ti,Ei,mi),(0,Ke.Z)(ti,Ti,fi),(0,Ke.Z)(ti,Ci,fi),(0,Ke.Z)(ti,Ai,pi),(0,Ke.Z)(ti,_i,hi),(0,Ke.Z)(ti,yi,Zi),(0,Ke.Z)(ti,Si,hi),(0,Ke.Z)(ti,Ii,di),(0,Ke.Z)(ti,bi,gi),(0,Ke.Z)(ti,wi,vi),(0,Ke.Z)(ti,Ri,Zi),ti);var Oi=Xr()([function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fn().apply(void 0,[{}].concat((0,r.Z)(t),[function(e,t){if(Array.isArray(e))return e.concat(t)}]))}(e,{audioTrack:[],videoTrack:[],musicTrack:[],voiceOverData:{},materialData:{}})},function(e){return e.dataVersion||Object.keys(e.materialData||{}).length?e:(0,Wr.Uy)(e,(function(e){var t={},n=[];e.videoTrack.forEach((function(e){e.isED||(n.push([e.coverAudioIndex||{},e.id]),t[e.id]=e)})),e.videoTrack=[],e.audioTrack.forEach((function(e,o){var r,i,a=null===(r=n.find((function(e){var t=(0,Ae.Z)(e,1)[0],n=t.startIndex,r=t.endIndex;return n===o||r===o})))||void 0===r?void 0:r[1];if(a)e.material={id:a};else{var c=(0,U.Z)({isEmptySlot:!0,id:jr()()},i);e.material={id:c.id},t[c.id]=c}})),e.materialData=t}))}]);var Di={id:null,name:"默认主题",cover:"https://pic2.zhimg.com/v2-1562d9216a60a25a027097f660f5f703.png"},Bi=[{duration:1e3,id:"cef92a0bacec4400b0e88071afc326fc"},{duration:1e3,id:"901ffa8aae6a4f6386cbf99f57d2e241"},{duration:1e3,id:"638ee65973eb4913a33730228fdc0f4b"},{duration:1e3,id:"4af4aecc97524e76ba35b6191ce662c1"}];function Pi(e){var t=e.id,n=e.name,o=e.cover,r=e.backgroundType,i=void 0===r?"video":r,a=e.backgroundUrl,c=e.duration,s=e.backgroundMusic;return{id:t,name:n,cover:o,backgroundType:i,backgroundUrl:a,duration:c,effects:Bi,backgroundMusic:s}}Pi({id:"knowledge",name:"知识科普",cover:"https://pic1.zhimg.com/80/v2-ad0653232a6091f67adaccc7a5bc52c9.webp",backgroundUrl:"https://zhihu-live.zhimg.com/namespace_1001/static/20210918/d11a250a807d7b3de365f7444d215c71.mp4",duration:3e3}),Pi({id:"emotion",name:"细腻情感",cover:"https://pic4.zhimg.com/80/v2-5f7b27c8c50786e3190b735c9109faf7.webp",backgroundUrl:"https://zhihu-live.zhimg.com/namespace_1001/static/20210918/05a21313e90823a0756889c94347f9c9.mp4",duration:3e3}),Pi({id:"work",name:"职场经验",cover:"https://pic1.zhimg.com/80/v2-00e5354dd3268289c79e665a2d7cfaf6.webp",backgroundUrl:"https://zhihu-live.zhimg.com/namespace_1001/static/20210918/6f1c8d7e825c259ec86f8bf09459c8cf.mp4",duration:5e3}),Pi({id:"tech",name:"现代科技",cover:"https://pic1.zhimg.com/80/v2-2e2b2e2d2e5691c4cc887fa65e1f20d7.webp",backgroundUrl:"https://zhihu-live.zhimg.com/namespace_1001/static/20210918/6bdbaab3d0500787da3e6c976a95d3fb.mp4",duration:2e3}),Pi({id:"psychology",name:"心理咨询",cover:"https://pic3.zhimg.com/80/v2-64db300a1c2796318becf47af3e1e0f7_1440w.webp",backgroundType:"image",backgroundUrl:"https://pic2.zhimg.com/v2-2d7b54bba7f2259db5eb0e6c6d6de6e7.png"}),Pi({id:"medicine",name:"医学生物",cover:"https://pic4.zhimg.com/80/v2-2190bbc88e3d7e78b18db9ffb8032fe6_1440w.webp",backgroundType:"image",backgroundUrl:"https://pic2.zhimg.com/v2-6239fd73f621f251375822f07e14903a.png"});var ki=(0,U.Z)({},(0,ue.FH)("vessayTrack",["LOAD_TEXT_CONTENT","LOAD_BAIDU_TTS_AUDIO","IMPORT_CME_MATERIAL","GET_VIDEO_URL_FROM_LENS","GET_UPLOAD_STATUS","GET_MATCH_IMAGE","LOAD_TIMBRE_LIST","LOAD_TTS_AUDIO_DATA","CREATE_TIMBRE_DRAFT","UPLOAD_TIMBRE_RECORD","SYNTHESIS_TIMBRE","TEXTS_TO_AUDIOS","LOAD_THEMES"]),(0,ue.co)("vessayTrack",["UPDATE_TRACK_DATA","SET_SELECTED_TRACK_ITEMS","MOVE_AUDIO_TRACK_ITEM","UPDATE_EDITING_SUBTITLE","UPDATE_PREVIEW_EDITING_TRACK_DATA","REMOVE_MATERIAL_FROM_OUTLINE","UPDATE_OUTLINE_APPLIED_STYLE","SET_NEW_RECORD_DATA","UPDATE_EXPORT_ERROR_TRACK","UPDATE_THEME_ID"]));function xi(e){return{API:{types:ki.GET_VIDEO_URL_FROM_LENS,method:"GET",root:C.Z.fetchRoot.lens,endpoint:"/api/videos/".concat(e)}}}n(66464);var Li=n(44646),Ui=n.n(Li),Fi={type:Ni[Ii],materialType:Ii,assetUrl:"https://1251625956.vod2.myqcloud.com/98989fa9vodgzp1251625956/9dedf1ff5285890811957177878/f0.mp4",thumbnail:"https://pic4.zhimg.com/v2-beb2c98143901099abaa7237b00a37d6.jpg",id:"a399c7af-212f-4a8c-9055-6ac21a2bcb86",duration:3e3,isED:!0,width:640,height:360};var Mi=function(e){return e.vessay.track.trackData.voiceOverData},Gi=((0,Nt.P1)([function(e){return e.vessay.track.selectedTrackItems}],(function(e){return new Set(e.map((function(e){return e.id})))})),(0,Nt.P1)([function(e){return e.vessay.track.trackData.musicTrack}],(function(e){var t=e.map((function(e){if(!e.assetUrl)return e;var t=e.assetUrl,n=new URL(t),o=n.hostname,r=n.pathname,i=n.searchParams;return"xz.tingmall.com"===o?(i.append("real_path",r),t="/api/v4/proxy?".concat(i.toString()),(0,F.Z)((0,U.Z)({},e),{assetUrl:t,originAssetUrl:e.assetUrl})):(0,F.Z)((0,U.Z)({},e),{originAssetUrl:e.assetUrl})}));return t})),(0,Nt.P1)([function(e){return e.vessay.track.trackData.audioTrack},Mi],(function(e,t){var n=0;return e.filter((function(e){return e})).map((function(e,o){var r=e.duration||0;if(e.voiceOver){var i=t[e.voiceOver.id];r=i.duration/i.playbackRate}else"number"==typeof e.playbackRate&&1!==e.playbackRate&&(r/=e.playbackRate);var a=n;return n+=r,(0,F.Z)((0,U.Z)({},e),{startTime:a,duration:r,section:{from:0,to:e.duration},isEmptySlot:!e.text,kind:"TextTrack",index:o})}))}))),zi=((0,Nt.P1)([Gi,Mi],(function(e,t){return Ui()(e.filter((function(e){var n;return null==t?void 0:t[null===(n=e.voiceOver)||void 0===n?void 0:n.id]})),(function(e){return e.voiceOver.id})).map((function(e){var n=t[e.voiceOver.id];return(0,F.Z)((0,U.Z)({},n),{rawDuration:n.duration,duration:e.duration,startTime:e.startTime,kind:"VoiceOverTrack"})}))})),(0,Nt.P1)([Gi,function(e){return e.vessay.track.trackData.materialData}],(function(e,t){var n="MaterialTrack",o=function(e,t){var n=[];return e.reduce((function(e,o){var r=t(o),i=e&&t(e);return r&&(i===r?n[n.length-1].push(o):n.push([o])),o}),null),n}(e,(function(e){var t;return null===(t=e.material)||void 0===t?void 0:t.id})).map((function(e){var o=e.reduce((function(e,t){return e+t.duration}),0),r=e[0],i=t[r.material.id];return(0,F.Z)((0,U.Z)({},i),{startTime:r.startTime,duration:o,kind:n,coverAudioIndex:{startIndex:r.index,endIndex:e[e.length-1].index}})})),r=o[o.length-1];if(!r)return[];var i=e.length;return o.concat((0,F.Z)((0,U.Z)({},Fi),{startTime:r?r.startTime+r.duration:0,kind:n,coverAudioIndex:{startIndex:i,endIndex:i}}))})));(0,Nt.P1)([Gi,function(e){return e.vessay.player.currentTime}],(function(e,t){return function(e,t){return t.find((function(t){if(e>=t.startTime&&e<=t.startTime+t.duration)return t}))}(t,e)})),(0,Nt.P1)([zi],(function(e){return e.reduce((function(e,t){return e+t.duration}),0)})),(0,ni.Z)("track");var Hi=(0,Xe.combineReducers)({common:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr,n=arguments.length>1?arguments[1]:void 0,o=n.type,r=n.payload;return o===xr.LOAD_DRAFT.success||o===xr.CREATE_DRAFT.success?(0,F.Z)((0,U.Z)({},t),{draftId:r.id,editingTrackData:null===(e=r.content)||void 0===e?void 0:e.editingTrackData}):o===xr.SET_BLOCK_UNLOAD?(0,F.Z)((0,U.Z)({},t),{blockUnload:r}):o===xr.SET_CALIBRATING?(0,F.Z)((0,U.Z)({},t),{isCalibratingEditing:r}):o===xr.SET_EDITING_TRACK_DATA?(0,F.Z)((0,U.Z)({},t),{editingTrackData:(0,U.Z)({},t.editingTrackData,r)}):o===xr.SET_NEW_ADD_MATERIAL_DATA?(0,F.Z)((0,U.Z)({},t),{newAddMaterialData:r}):o===xr.SAVE_AUDIO_CACHE?(0,F.Z)((0,U.Z)({},t),{audioCache:(0,F.Z)((0,U.Z)({},t.audioCache),(0,Ke.Z)({},r.text,r))}):o===xr.SET_SOURCE?(0,F.Z)((0,U.Z)({},t),{source:(0,F.Z)((0,U.Z)({},t.source),{type:r.type,id:r.id})}):o===xr.SET_AUTO_SAVE?(0,F.Z)((0,U.Z)({},t),{autoSave:r}):t},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,text:Ur},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.VESSAY_LOADING,r=t.payload;if(o){if(n.endsWith("request"))return(0,F.Z)((0,U.Z)({},e),{isLoading:!0,text:"string"==typeof o?o:Ur});if(n.endsWith("failure")||n.endsWith("success"))return(0,F.Z)((0,U.Z)({},e),{isLoading:!1})}return n===Fr.SET_LOADING?(0,U.Z)({},e,r):e},player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===Mr.SET_PLAYER?(0,U.Z)({},e,o):e},library:qr,track:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{trackData:{dataVersion:1,videoTrack:[],audioTrack:[],musicTrack:[],voiceOverData:{}},extra:{themeId:null},previewEditingTrackData:{editingSubtitleItem:{},editingVideoItem:{}},selectedTrackItems:[],outlineRemoveMaterial:{},outlineAppliedStyle:{},timbres:[],timbreId:"",timbreTests:[],newRecordBlob:{},exportErrorUrls:[],defaultTimbreId:"1"},o=arguments.length>1?arguments[1]:void 0;if(o.type===ki.UPDATE_TRACK_DATA)return(0,F.Z)((0,U.Z)({},n),{trackData:(0,U.Z)({},n.trackData,o.payload)});if(o.type===ki.REMOVE_MATERIAL_FROM_OUTLINE)return(0,F.Z)((0,U.Z)({},n),{outlineRemoveMaterial:o.payload});if(o.type===ki.MOVE_AUDIO_TRACK_ITEM)return(0,F.Z)((0,U.Z)({},n),{trackData:(0,U.Z)({},n.trackData,o.payload.newTrackData)});if(o.type===ki.SET_SELECTED_TRACK_ITEMS)return(0,F.Z)((0,U.Z)({},n),{selectedTrackItems:o.payload.items});if(o.type===xr.LOAD_DRAFT.success)return(0,F.Z)((0,U.Z)({},n),{trackData:(0,U.Z)({},n.trackData,Oi(o.payloadOrigin.content.trackData)),extra:{themeId:(null===(e=o.payload.content)||void 0===e||null===(t=e.extra)||void 0===t?void 0:t.themeId)||Di.id}});if(o.type===ki.UPDATE_PREVIEW_EDITING_TRACK_DATA)return(0,F.Z)((0,U.Z)({},n),{previewEditingTrackData:(0,U.Z)({},n.previewEditingTrackData,o.payload)});if(o.type===ki.UPDATE_OUTLINE_APPLIED_STYLE)return(0,F.Z)((0,U.Z)({},n),{outlineAppliedStyle:(0,U.Z)({},n.outlineAppliedStyle,o.payload)});if(o.type===ki.LOAD_TIMBRE_LIST.success){var i=o.payload,a=i.userTimbres||[],c=i.systemTimbres||[];return(0,F.Z)((0,U.Z)({},n),{timbres:a.concat(c),defaultTimbreId:i.defaultTimbreId})}if(o.type===ki.CREATE_TIMBRE_DRAFT.success){var s=o.payload,u=s.titleList,l=s.timbreId;return(0,F.Z)((0,U.Z)({},n),{timbreId:l,timbreTests:u})}return o.type===ki.SET_NEW_RECORD_DATA?(0,F.Z)((0,U.Z)({},n),{newRecordBlob:o.payload}):o.type===ki.UPDATE_EXPORT_ERROR_TRACK?(0,F.Z)((0,U.Z)({},n),{exportErrorUrls:(0,r.Z)(n.exportErrorUrls).concat((0,r.Z)(o.payload))}):o.type===ki.UPDATE_THEME_ID?(0,F.Z)((0,U.Z)({},n),{extra:{themeId:o.payload}}):n}}),qi=n(50647),Vi=n(8961),Xi=(0,ue.FH)("WALL-E",["LOAD_PROTECT_HISTORY"]);var Wi={protectHistory:{total:0,pages:{},entities:{}}};var Ki=(0,ue.FH)("zhiPlus",["LOAD_ZHIPLUS_PERMISSION"]);var ji={permissionStatus:9999};var Yi=n(32671),Qi={common:An,loading:Ye,entities:$n.ZP,currentUser:le.ZP,account:Qe.ZP,settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ar,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;if(n===tr.success)return(0,F.Z)((0,U.Z)({},e),{socialBind:o});if(n===$o.success||n===er.success){var r=t.account,i=(0,U.Z)({},e.socialBind);return i[r]&&delete i[r],(0,F.Z)((0,U.Z)({},e),{socialBind:i})}if(n===nr.success)return(0,F.Z)((0,U.Z)({},e),{inboxMsg:o.inboxmsg});if(n===or.success){var a=t.input;return(0,F.Z)((0,U.Z)({},e),{inboxMsg:(0,U.Z)({},e.inboxMsg,a)})}if(n===rr.success)return(0,F.Z)((0,U.Z)({},e),{notification:o});if(n===ir.success){var c=t.input,s=c.key,u=c.option,l=(0,U.Z)({},e.notification[s],u);return(0,F.Z)((0,U.Z)({},e),{notification:(0,F.Z)((0,U.Z)({},e.notification),(0,Ke.Z)({},s,l))})}if(n===sr.success)return(0,F.Z)((0,U.Z)({},e),{privacyFlag:o.memberPrivateFlag});if(n===ar.success)return(0,F.Z)((0,U.Z)({},e),{email:o});if(n===cr.success){var d=t.input;return(0,F.Z)((0,U.Z)({},e),{email:(0,U.Z)({},e.email,d)})}if(n===ur.success)return(0,F.Z)((0,U.Z)({},e),{privacyFlag:!e.privacyFlag});if(n===lr.request)return(0,F.Z)((0,U.Z)({},e),{blockedUsers:_r(e.blockedUsers,!0)});if(n===lr.success)return(0,F.Z)((0,U.Z)({},e),{blockedUsers:yr(t)});if(n===lr.failure)return(0,F.Z)((0,U.Z)({},e),{blockedUsers:_r(e.blockedUsers,!1)});if(n===Tr.request)return(0,F.Z)((0,U.Z)({},e),{wallEBlacklist:_r(e.wallEBlacklist,!0)});if(n===Tr.success)return(0,F.Z)((0,U.Z)({},e),{wallEBlacklist:yr(t)});if(n===Tr.failure)return(0,F.Z)((0,U.Z)({},e),{wallEBlacklist:_r(e.wallEBlacklist,!1)});if(n===Cr.success)return(0,F.Z)((0,U.Z)({},e),{wallEBlacklist:Sr(e.wallEBlacklist,t.meta.urlToken)});if(n===dr.success)return(0,F.Z)((0,U.Z)({},e),{blockedUsers:Sr(e.blockedUsers,t.meta.urlToken)});if(n===pr.request)return(0,F.Z)((0,U.Z)({},e),{blockedFollowees:_r(e.blockedFollowees,!0)});if(n===pr.success)return(0,F.Z)((0,U.Z)({},e),{blockedFollowees:yr(t)});if(n===pr.failure)return(0,F.Z)((0,U.Z)({},e),{blockedFollowees:_r(e.blockedFollowees,!1)});if(t.type===Er.success)return(0,F.Z)((0,U.Z)({},e),{account:t.payload});if(n===hr.success)return(0,F.Z)((0,U.Z)({},e),{blockedFollowees:Sr(e.blockedFollowees,t.urlToken)});if(n===fr.request)return(0,F.Z)((0,U.Z)({},e),{ignoredTopics:_r(e.ignoredTopics,!0)});if(n===fr.success)return(0,F.Z)((0,U.Z)({},e),{ignoredTopics:yr(t)});if(n===fr.failure)return(0,F.Z)((0,U.Z)({},e),{ignoredTopics:_r(e.ignoredTopics,!1)});if(n===mr.success)return(0,F.Z)((0,U.Z)({},e),{restrictedTopics:o.data});if(n===vr.success){var p=e.ignoredTopics,h=p.paging,f=p.data;return(0,F.Z)((0,U.Z)({},e),{ignoredTopics:{paging:(0,F.Z)((0,U.Z)({},h),{totals:h.totals-1}),data:f.filter((function(e){return e.id!==t.id}))}})}if(n===Zr.success)return(0,F.Z)((0,U.Z)({},e),{laboratory:{useTopstory:o.useTopstory.enable}});if(n===gr.success){var m=t.input.useTopstory;return(0,F.Z)((0,U.Z)({},e),{laboratory:{useTopstory:m}})}return e},notification:jt.ZP,people:Io.ZP,env:de.ZP,me:le.me,label:lo.ZP,ecommerce:We.B},Ji={comments:fn.ZP,commentsV2:mn.ZP,pushNotifications:Ro.ZP,messages:Zo.ZP,register:Do.ZP,login:he.ZP,switches:Or.ZP,captcha:Bt.ZP,sms:br.Z,chat:Xt,emoticons:Jn.ZP,creator:yn.ZP},$i=((0,Xe.combineReducers)((0,F.Z)((0,U.Z)({},Qi,Ji),{question:No.ZP,shareTexts:Ir.ZP,answers:$e.ZP,banner:tt.ZP,topic:Dr.ZP,captcha:Bt.ZP,sms:br.Z,explore:to,articles:et.ZP,favlists:no.ZP,pins:bo.ZP,topstory:Br.ZP,upload:Pr.ZP,video:qi.ZP,zvideos:Yi.ZP,guide:ro,reward:Po.ZP,search:Qo,creator:yn.ZP,creatorSalt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case Kn.GET_QUESTION_RECOMMEND.success:return(0,F.Z)((0,U.Z)({},e),{recommendQuestionList:n.data});case Kn.GET_BANNER_IMG_LIST.success:return(0,F.Z)((0,U.Z)({},e),{bannerList:JSON.parse(n.data.config).list});case Kn.GET_CLAIM_BANNER_IMG_LIST.success:return(0,F.Z)((0,U.Z)({},e),{claimBannerList:JSON.parse(n.data.config).list});case Kn.GET_AUTHOR_WEBSITES.success:return(0,F.Z)((0,U.Z)({},e),{sites:n.data});case Kn.GET_AUTHOR_CONTRIBUTES_DOMAIN.success:return(0,F.Z)((0,U.Z)({},e),{domains:n});case Kn.GET_AUTHOR_CONTRIBUTES_DOMAIN_ALL.success:return(0,F.Z)((0,U.Z)({},e),{domainsAll:n});case Kn.GET_AUTHOR_STATUS.success:return(0,F.Z)((0,U.Z)({},e),{hasRecored:n.hasRecored,hasClaim:n.hasClaim,isInstitution:n.isInstitution,isOperation:n.isOperation,isWhiteList:n.isWhiteList});case Kn.GET_AUTHOR_CONTRIBUTES_LIST.success:return(0,F.Z)((0,U.Z)({},e),{hasContributedList:n.data,contributesTotal:n.paging});case Kn.GET_DRAFT_INFO.success:return(0,F.Z)((0,U.Z)({},e),{previewPageTitle:n.title,previewPageContent:n.content});case Kn.GET_REST_CONTRIBUTION_NUMBER.success:return(0,F.Z)((0,U.Z)({},e),{restContributionNumber:n.specificNum});case Kn.GET_REST_CONTRIBUTION_NUMBER.failure:return(0,F.Z)((0,U.Z)({},e),{restContributionNumber:0});case Kn.GET_DRAFT_INFO.failure:return(0,F.Z)((0,U.Z)({},e),{previewPageTitle:"",previewPageContent:""})}return e},publicEditPermission:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===wo.GET_PUBLIC_EDIT_PERMMISSION.success){var n=t.payload,o=n.isQuestionRedirectEditable,r=n.isQuestionTopicEditable,i=n.isQuestionEditable;return(0,F.Z)((0,U.Z)({},e),{isQuestionRedirectEditable:o,isQuestionTopicEditable:r,isQuestionEditable:i})}return e},vessay:Hi,readStatus:Oo.ZP,draftHistory:Yn.ZP,notifications:So,specials:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr,t=arguments.length>1?arguments[1]:void 0;if(t.type===wr.GET_SPECIALS.request)return(0,F.Z)((0,U.Z)({},e),{all:(0,F.Z)((0,U.Z)({},e.all),{isLoading:!0})});if(t.type===wr.GET_SPECIALS.success){var n=t.payload,o=n.data,i=n.paging;return(0,F.Z)((0,U.Z)({},e),{entities:(0,U.Z)({},e.entities||{},o.reduce((function(e,t){return(0,U.Z)((0,Ke.Z)({},t.id,t),e)}),{})),all:{data:(0,r.Z)(e.all.data).concat((0,r.Z)(o.map((function(e){return e.id})))),paging:i,isLoading:!1}})}if(t.type===wr.GET_SPECIALS.failure)return(0,F.Z)((0,U.Z)({},e),{all:(0,F.Z)((0,U.Z)({},e.all),{paging:(0,F.Z)((0,U.Z)({},e.all.paging),{isEnd:!0}),isLoading:!1})});if([wr.FOLLOW_SPECIAL.request,wr.UNFOLLOW_SPECIAL.failure].includes(t.type)){var a=t.meta.id,c=e.entities;return c[a]?(0,F.Z)((0,U.Z)({},e),{entities:(0,F.Z)((0,U.Z)({},c),(0,Ke.Z)({},a,(0,F.Z)((0,U.Z)({},c[a]),{isFollowing:!0})))}):e}if([wr.UNFOLLOW_SPECIAL.request,wr.FOLLOW_SPECIAL.failure].includes(t.type)){var s=t.meta.id,u=e.entities;return u[s]?(0,F.Z)((0,U.Z)({},e),{entities:(0,F.Z)((0,U.Z)({},u),(0,Ke.Z)({},s,(0,F.Z)((0,U.Z)({},u[s]),{isFollowing:!1})))}):e}return e},collections:Wt.ZP,userProfit:kr.ZP,mcn:po.ZP,mcnActivity:vo,brand:nt.ZP,host:co.ZP,campaign:Dt,knowledgePlan:uo,wallE:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi,t=arguments.length>1?arguments[1]:void 0;if(t.type===Xi.LOAD_PROTECT_HISTORY.success){var n=t.meta,o=t.payload,r=o.data,i=o.paging,a=i.totals;return(0,F.Z)((0,U.Z)({},e),{protectHistory:(0,Vi.q)(e.protectHistory,n.paging,{data:r,total:a})})}return e},roundtables:ko.ZP,helpCenter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ao,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload,r=t.meta;if(n===io.LOAD_QUESTION_CATEGORIES.success){var i={},a=o.data.map((function(e){var t=e.id;return i[t]=(0,F.Z)((0,U.Z)({},e),{questions:[]}),t}));return(0,F.Z)((0,U.Z)({},e),{entities:(0,F.Z)((0,U.Z)({},e.entities),{category:i}),categories:a})}if(n===io.LOAD_CATEGORY_QUESTIONS.success){var c={},s=o.data.map((function(e){var t=e.id;return c[t]=e,t}));return(0,F.Z)((0,U.Z)({},e),{entities:(0,F.Z)((0,U.Z)({},e.entities),{category:(0,F.Z)((0,U.Z)({},e.entities.category),(0,Ke.Z)({},r.categoryId,(0,F.Z)((0,U.Z)({},e.entities.category[r.categoryId]),{questions:s}))),question:(0,U.Z)({},e.entities.question,c)})})}if(n===io.LOAD_COMMON_QUESTIONS.success){var u={},l=o.data.map((function(e){var t=e.id;return u[t]=e,t}));return(0,F.Z)((0,U.Z)({},e),{entities:(0,F.Z)((0,U.Z)({},e.entities),{question:(0,U.Z)({},e.entities.question,u)}),commonQuestions:l})}if(n===io.LOAD_QUESTION_DETAIL.success)return(0,F.Z)((0,U.Z)({},e),{entities:(0,F.Z)((0,U.Z)({},e.entities),{question:(0,F.Z)((0,U.Z)({},e.entities.question),(0,Ke.Z)({},o.id,o))})});if(n===io.LOAD_RELATED_QUESTIONS.success){var d={},p=o.data.map((function(e){var t=e.id;return d[t]=e,t}));return(0,F.Z)((0,U.Z)({},e),{entities:(0,F.Z)((0,U.Z)({},e.entities),{question:(0,U.Z)({},e.entities.question,d)}),relatedQuestions:(0,F.Z)((0,U.Z)({},e.relatedQuestions),(0,Ke.Z)({},r.questionId,p))})}return n===io.LOAD_QUESTION_ALL_TYPES.success?(0,F.Z)((0,U.Z)({},e),{faqTypes:null==o?void 0:o.data}):e},republish:Bo.ZP,commercialReport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload,r=t.meta;if(n===vn.success){var i=o.data||{},a=i.isReported,c=i.commercialTypes,s=void 0===c?[]:c,u=r.type,l=r.urlToken;return(0,U.Z)((0,F.Z)((0,U.Z)({},e),{commercialTypes:s}),l&&(0,Ke.Z)({},"".concat(u,"s"),(0,Ke.Z)({},l,{isCommercialReported:a,selectedCommercialTypes:s.filter((function(e){return e.isRecognized}))})))}if(n===Zn){var d=r.questionId,p=o.isCommercialReported;return(0,F.Z)((0,U.Z)({},e),{questions:(0,Ke.Z)({},d,{isCommercialReported:p})})}return e},creatorMCN:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case wn.GET_HOME_DATA.success:return(0,F.Z)((0,U.Z)({},e),{mcn:n.mcn,mcnStatistics:n.mcnStatistics});case wn.GET_HOME_DATA.failure:return 2e4===t.err.payload.code?(0,F.Z)((0,U.Z)({},e),{isNoAuth:!0}):e;case wn.GET_CREATOR_MANAGE_DATA.success:return(0,F.Z)((0,U.Z)({},e),{creatorManageData:n.data,creatorManageDataTotal:n.paging.totals});case wn.GET_MCN_DOMAINS.success:return(0,F.Z)((0,U.Z)({},e),{mcnDomains:n.data})}return e},commentManage:pn,commentPermission:hn.ZP,creatorRightStatus:Nn.ZP,zhiPlus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji,t=arguments.length>1?arguments[1]:void 0;if(t.type===Ki.LOAD_ZHIPLUS_PERMISSION.success){var n=t.payload.permissionStatus;return(0,F.Z)((0,U.Z)({},e),{permissionStatus:null==n?void 0:n.zhiZixuan})}return e},streaming:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.payload,o=t.meta;switch(t.type){case Nr.CHECK_WHITE_LIST_STATUS.success:return(0,F.Z)((0,U.Z)({},e),{showCategorySelector:1!==(null==n?void 0:n.isMediaExternal),whiteListStatus:null==n?void 0:n.status});case Nr.CHECK_ACTOR_STATUS.request:return(0,F.Z)((0,U.Z)({},e),{isCheckingStatus:!0});case Nr.CHECK_ACTOR_STATUS.success:return(0,F.Z)((0,U.Z)({},e),{actorStatus:n,isCheckingStatus:!1});case Nr.CHECK_ACTOR_STATUS.failure:var r=t.err,i=(void 0===r?{}:r).payload;return(0,F.Z)((0,U.Z)({},e),{actorStatus:i,isCheckingStatus:!1});case Nr.LOAD_CATEGORY_DATA.success:var a=n.data;return(0,F.Z)((0,U.Z)({},e),{categoryList:a});case Nr.LOAD_ACTIVITY_DATA.success:var c=n.data;return(0,F.Z)((0,U.Z)({},e),{activities:c});case Nr.CHECK_THEATER_STATUS.success:return(0,F.Z)((0,U.Z)({},e),{theater:null==n?void 0:n.theater});case Nr.GET_THEATER_INFO.success:var s=n.theater,u=(void 0===s?{}:s).drama;return(0,F.Z)((0,U.Z)({},e),{currentDramaInfo:u});case Nr.GET_PUSH_DRAMA_INFO.success:return(0,F.Z)((0,U.Z)({},e),{pushStreamingRes:n});case Nr.START_PUSH_DRAMA.success:return(0,F.Z)((0,U.Z)({},e),{currentDramaInfo:null==n?void 0:n.drama});case Nr.GET_PULL_INFO.success:return(0,F.Z)((0,U.Z)({},e),{currentPullInfo:n});case Nr.CREATE_PULL_INFO.success:return(0,F.Z)((0,U.Z)({},e),{currentPullInfo:(0,F.Z)((0,U.Z)({},e.currentPullInfo,o.data),{id:n.id})});case Nr.UPDATE_PULL_INFO.success:return(0,F.Z)((0,U.Z)({},e),{currentPullInfo:(0,U.Z)({},e.currentPullInfo,o.data)});case Nr.START_PULL_DRAMA.success:return(0,F.Z)((0,U.Z)({},e),{currentPullInfo:(0,F.Z)((0,U.Z)({},e.currentPullInfo),{theater:(0,F.Z)((0,U.Z)({},e.currentPullInfo.theater),{drama:n.drama})})});case Nr.START_PREVIEW_PULL_DRAMA.success:return(0,F.Z)((0,U.Z)({},e),{currentPullInfo:(0,F.Z)((0,U.Z)({},e.currentPullInfo),{preview:n})});case Nr.STOP_PREVIEW_PULL_DRAMA.success:return(0,F.Z)((0,U.Z)({},e),{currentPullInfo:(0,F.Z)((0,U.Z)({},e.currentPullInfo),{preview:void 0})})}return e},creationRanking:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===_n.GET_CREATION_RANKING.success?(0,F.Z)((0,U.Z)({},e),{creationRankData:t.payload}):t.type===_n.GET__CREATION_RANKING_POSTER.success?(0,F.Z)((0,U.Z)({},e),{posterData:t.payload}):t.type===_n.GET_CREATION_RANKING_TYPE.success?(0,F.Z)((0,U.Z)({},e),{rankTypeData:t.payload}):t.type===_n.GET__CREATION_RANKING_MONTHLIST.success?(0,F.Z)((0,U.Z)({},e),{monthList:t.payload}):e},eduSections:Qn.ZP,creators:Wn,adPromotion:Je.ZP})),n(98918)),ea=n(87508),ta=n(27124),na=function(e){var t=e.width,n=e.height;return t>=1366&&n>=550},oa="articleDraft",ra=(0,U.Z)({},(0,ue.FH)(oa,["UPLOAD_COVER","UPLOAD_CONTENT_IMAGE","UPLOAD_VIDEO","UPDATE_DRAFT","GET_DRAFT","REVIEW_COLUMN","PUBLISH_COLUMN","LOAD_DISCLAIMERS","ADD_TOPIC","DELETE_TOPIC","FETCH_RECOMMEND_TOPIC","SCHEDULED_PUBLISH","CANCEL_SCHEDULED_PUBLISH","VALIDATE_SCHEDULED_PUBLISH","LOAD_LIMITED"]),(0,ue.co)(oa,["TOGGLE_FULL_SCREEN","REMOVE_COVER","RESET_DRAFT","SELECT_COLUMN"])),ia=ra.UPLOAD_COVER,aa=ra.UPLOAD_CONTENT_IMAGE,ca=ra.UPLOAD_VIDEO,sa=ra.UPDATE_DRAFT,ua=ra.GET_DRAFT,la=ra.REVIEW_COLUMN,da=ra.PUBLISH_COLUMN,pa=ra.LOAD_DISCLAIMERS,ha=ra.ADD_TOPIC,fa=ra.DELETE_TOPIC,ma=ra.FETCH_RECOMMEND_TOPIC,va=(ra.TOGGLE_FULL_SCREEN,ra.REMOVE_COVER),Za=ra.RESET_DRAFT,ga=ra.SELECT_COLUMN,Ea=ra.LOAD_LIMITED;function Ta(e,t,n){var o=new FormData;return"string"==typeof t?o.append("url",t):(t.length&&(t=t[0]),o.append("picture",t)),n&&o.append("source",n),{API:{types:e,endpoint:"uploaded_images",root:C.Z.fetchRoot.zhuanlan,method:"POST",body:o}}}function Ca(e,t,n){return function(o){return(0,Pr.x1)(t,n&&{source:n}).then((function(t){return o({type:e.success,payload:(0,b.camelizeKeys)(t)})}),(function(t){return o({type:e.failure,err:t})}))}}function Aa(e){var t=e.payload,n=t.dataRawheight,o=t.dataRawwidth,r=t.hash;return{url:t.src,width:o,height:n,id:r,watermark:t.watermark,watermarkSrc:t.watermarkSrc,originalSrc:t.originalSrc}}function _a(e){return{API:{root:C.Z.fetchRoot.zhuanlan,method:"GET",types:pa,endpoint:"articles/".concat(e,"/disclaimers")}}}function ya(e,t){return{API:{types:ha,endpoint:"articles/".concat(e,"/topics"),root:C.Z.fetchRoot.zhuanlan,method:"POST",body:t}}}function Sa(e){return function(t,n){n().selectedColumn!==e&&t({type:ga,payload:e})}}var Ia={titleImage:"",titleImageSize:{},isTitleImageFullScreen:!1,canTitleImageFullScreen:!1,title:"",titleImageUploading:!1,error:"",content:"",draftLoading:!1,updating:!1,globalLoading:!1,pendingVideo:{resource:null,error:null},deleteFail:{fail:!1},recommendTopics:[],selectedColumn:0,articleDisclaimers:[]};function ba(e){if(!e)return"尝试保存时发生未知错误";var t=e.message,n=e.status,o=e.payload,r=e.errors;return o&&o.message?"尝试保存时发生错误：".concat(o.message):Array.isArray(r)&&r[0]?"尝试保存时发生错误：".concat(r[0].message):t?(0,ta.hu)(t)?"尝试保存时发生网络请求错误":t.startsWith("request http")?"尝试保存时发生错误".concat(n?"："+n:""):"尝试保存时发生错误：".concat(t):""}var wa=(0,Nt.P1)([le.ib,function(e){return e.articleDraft},function(e){return e.me.columnContributions},de.Hu,function(e){return e.userProfit.permission.visible},le.W5,le.wY],(function(e,t,n,o,r,i,a){return{currentUser:e,draft:t,myColumns:n,isMobile:o,showUserProfitButton:r,isOrg:i,currentUserToken:a}})),Ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ra.UPLOAD_COVER.request:return(0,F.Z)((0,U.Z)({},e),{titleImageUploading:!0});case ra.UPLOAD_COVER.success:var n=Aa(t),o=n.url,r=n.width,i=n.height,a=na({width:r,height:i});return(0,F.Z)((0,U.Z)({},e),{titleImage:o,titleImageSize:{width:r,height:i},canTitleImageFullScreen:a,isTitleImageFullScreen:a,titleImageUploading:!1});case ra.UPLOAD_COVER.failure:return(0,F.Z)((0,U.Z)({},e),{titleImageUploading:!1});case ra.UPLOAD_CONTENT_IMAGE.request:return(0,F.Z)((0,U.Z)({},e),{globalLoading:!0});case ra.UPLOAD_CONTENT_IMAGE.success:case ra.UPLOAD_CONTENT_IMAGE.failure:return(0,F.Z)((0,U.Z)({},e),{globalLoading:!1});case ra.UPLOAD_VIDEO.request:return(0,F.Z)((0,U.Z)({},e),{globalLoading:!0,pendingVideo:(0,U.Z)({},e.pendingVideo)});case ra.UPLOAD_VIDEO.success:return(0,F.Z)((0,U.Z)({},e),{globalLoading:!1,pendingVideo:(0,F.Z)((0,U.Z)({},e.pendingVideo),{resource:t.payload})});case ra.UPLOAD_VIDEO.failure:return(0,F.Z)((0,U.Z)({},e),{globalLoading:!1,pendingVideo:(0,U.Z)({},e.pendingVideo)});case ra.DELETE_TOPIC.failure:return(0,F.Z)((0,U.Z)({},e),{deleteFail:!0});case ra.TOGGLE_FULL_SCREEN:return(0,F.Z)((0,U.Z)({},e),{isTitleImageFullScreen:!e.isTitleImageFullScreen});case ra.REMOVE_COVER:return(0,F.Z)((0,U.Z)({},e),{titleImage:"",titleImageSize:{},isTitleImageFullScreen:!1,canTitleImageFullScreen:!1});case ra.RESET_DRAFT:return(0,F.Z)((0,U.Z)({},e),{content:"",title:""});case ra.UPDATE_DRAFT.request:var c=t.meta.id;return(0,F.Z)((0,U.Z)({},e),{draftLoading:!c,updating:!0});case ra.UPDATE_DRAFT.success:var s=t.meta,u=t.payload,l=s.body,d=(0,F.Z)((0,U.Z)({},Fo()(l,["isTitleImageFullScreen","delta_time"]),u),{updatedTime:(new Date).toISOString(),updating:!1,draftLoading:!1,error:""});return(0,U.Z)({},e,d);case ra.UPDATE_DRAFT.failure:return(0,F.Z)((0,U.Z)({},e),{updating:!1,draftLoading:!1,error:ba(t.err||t.error)});case ra.GET_DRAFT.success:var p=t.payload;return(0,F.Z)((0,U.Z)({},e,p),{updatedTime:new Date(1e3*p.updated).toISOString()});case ra.FETCH_RECOMMEND_TOPIC.success:return(0,F.Z)((0,U.Z)({},e),{recommendTopics:t.payload.data||[]});case ra.LOAD_DISCLAIMERS.success:return(0,F.Z)((0,U.Z)({},e),{articleDisclaimers:t.payload.data});case ra.SELECT_COLUMN:return(0,F.Z)((0,U.Z)({},e),{selectedColumn:t.payload});case ra.CANCEL_SCHEDULED_PUBLISH.success:return(0,F.Z)((0,U.Z)({},e),{schedule:null});default:return e}},Na=n(33835),Oa=n(79926),Da="columnAutocomplete",Ba=(0,U.Z)({},(0,ue.FH)(Da,["FETCH_TOPICS","FETCH_USERS","FETCH_MY_FRIENDS"]),(0,ue.co)(Da,["RESET_USERS","RESET_FRIENDS"]));var Pa={users:[],friends:[]};var ka=n(84492),xa=(0,ue.FH)("column",["GET_CONTRIBUTE_REQUEST","IGNORE_CONTRIBUTE_REQUEST","ADD_CONTRIBUTOR","DELETE_CONTRIBUTOR","GET_RECOMMENDED_CONTRIBUTORS","INVITE_CONTRIBUTOR","CANCEL_INVITE_CONTRIBUTOR","GET_INVITATION","SET_AUTO_INVITE"]),La=(0,ue.co)("column",["CLEAR_INVITATION"]);var Ua=function(e,t){return{API:{types:xa.SET_AUTO_INVITE,method:"PATCH",endpoint:"/columns/".concat(e,"/recommendation-contributors"),fetchOptions:{credentials:"include"},body:{is_auto:t}},meta:t}},Fa=function(e,t){return{API:{types:xa.INVITE_CONTRIBUTOR,method:"PUT",endpoint:"/columns/".concat(e,"/contribution-invitees"),fetchOptions:{credentials:"include"},body:{member_hash:t}},userId:t}},Ma=(0,Xe.combineReducers)({contributeRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===xa.GET_CONTRIBUTE_REQUEST.success?t.payload.data:t.type===xa.IGNORE_CONTRIBUTE_REQUEST.success?e.filter((function(e){return e.article.id!==t.articleId})):e},autoInviteEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===xa.GET_RECOMMENDED_CONTRIBUTORS.success?Boolean(t.payload.isAuto):t.type===xa.SET_AUTO_INVITE.success?t.meta:e},recommendedContributors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===xa.GET_RECOMMENDED_CONTRIBUTORS.success?t.payload.data:t.type===xa.INVITE_CONTRIBUTOR.success?e.map((function(e){return e.author.id===t.userId?(0,F.Z)((0,U.Z)({},e),{hasInvited:!0}):e})):e},contributionInvitation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===xa.GET_INVITATION.success?t.payload:t.type===La.CLEAR_INVITATION?null:e}}),Ga=(0,ue.FH)("previewArticle",["GET"]);var za=(0,ue.FH)("recommendations",["GET","GET_HOME"]);function Ha(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){return n({API:{root:C.Z.fetchRoot.zhuanlan,types:za.GET_HOME,endpoint:"/recommendations/".concat(e),query:t}})}}var qa="requestColumn",Va=(0,U.Z)({},(0,ue.FH)(qa,["SUBMIT_REQUEST","CHECK_REQUEST","GET_CATEGORIES"]),(0,ue.co)(qa,["CLEAR_REQUEST_ERROR"]));var Xa={categories:[],error:null};var Wa=(0,Xe.combineReducers)((0,F.Z)((0,U.Z)({},Qi,Ji),{answers:$e.ZP,sms:br.Z,comments:fn.ZP,recommendation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{homeRecommendations:[]},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload,i=t.parentId;if(n===za.GET.success){var a=e[i]?e[i].data:[];if(!Array.isArray(o.data))return e;var c,s=(0,r.Z)(a).concat((0,r.Z)(o.data));return(0,F.Z)((0,U.Z)({},e),(c={},(0,Ke.Z)(c,i,{data:s,paging:o.paging}),(0,Ke.Z)(c,"list",s),c))}return n===za.GET_HOME.success&&Array.isArray(o.data)?(0,F.Z)((0,U.Z)({},e),{homeRecommendations:o.data.filter(Boolean)}):e},shareTexts:Ir.ZP,articles:et.ZP,previewPost:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.payload,o=t.type;return o===Ga.GET.success&&n?n:e},favlists:no.ZP,columns:$i.ZP,reward:Po.ZP,video:qi.ZP,switches:Or.ZP,messages:Zo.ZP,register:Do.ZP,login:he.ZP,topstory:Br.ZP,readStatus:Oo.ZP,column:Oa.ZP,requestColumn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Va.SUBMIT_REQUEST.success:var n=t.payload.manualCensor;return(0,F.Z)((0,U.Z)({},e),{manualCensor:n,error:null});case Va.CHECK_REQUEST.success:case Va.CLEAR_REQUEST_ERROR:return(0,F.Z)((0,U.Z)({},e),{error:null});case Va.SUBMIT_REQUEST.failure:case Va.CHECK_REQUEST.failure:return(0,F.Z)((0,U.Z)({},e),{error:t.err.payload});case Va.GET_CATEGORIES.success:return(0,F.Z)((0,U.Z)({},e),{categories:t.payload.data||[]})}return e},articleContribution:ea.ZP,columnContribution:Ma,draftHistory:Yn.ZP,upload:Pr.ZP,articleDraft:Ra,articleDrafts:Na.ZP,columnAutocomplete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ba.FETCH_USERS.success:return(0,F.Z)((0,U.Z)({},e),{users:t.payload.data||[]});case Ba.RESET_USERS:return(0,F.Z)((0,U.Z)({},e),{users:[]});case Ba.FETCH_MY_FRIENDS.success:return(0,F.Z)((0,U.Z)({},e),{friends:t.payload.data||[]});case Ba.RESET_FRIENDS:return(0,F.Z)((0,U.Z)({},e),{friends:[]});default:return e}},columnCollection:ka.ZP,ecommerce:We.B,chat:Xt,emoticons:Jn.ZP,userProfit:kr.ZP,mcn:po.ZP,zvideos:Yi.ZP,republish:Bo.ZP,commentPermission:hn.ZP,creatorRightStatus:Nn.ZP,adPromotion:Je.ZP}));var Ka=(0,Sn.isBrowser)()?(0,o.tZ)(I.Route,{path:"*",onEnter:function(e){var t=e.location;if(/^\/{2,}/.test(t.pathname)){var n=(0,Ae.Z)(/^\/{1,}(\/.*)$/.exec(t.pathname),2)[1];t.pathname=n}window.location="".concat(t.pathname).concat(t.search)}}):null,ja=Ka;var Ya=/#comment-(\d+)/;var Qa=function(e,t){"undefined"!=typeof window&&window.Raven&&window.Raven.captureException(e,{logger:"RouteLoader",fingerprint:["RouteLoader"],extra:t})},Ja=function(e){return function(){return e().then((function(e){return e.default})).catch((function(e){return Qa(e,{target:"resolveComponent"}),Le.Ko}))}};function $a(e){return e.routes[e.routes.length-1].name}var ec=n(21620),tc=n(84421),nc=n(32554),oc=n(51261),rc=n(75926),ic=n.n(rc),ac=n(93969),cc=n(92206),sc=n(3404),uc=n(17222),lc=n(25771),dc=n(21301),pc=n(91855),hc=n(79869),fc=n(73464),mc=n(2421),vc=n(60439),Zc=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props.hideSubtitle;return(0,o.BX)("a",{className:"OrgZhihuLogo",href:"/organization","aria-label":"知乎机构号",children:[(0,o.tZ)(vc.Z,{}),!e&&(0,o.tZ)("span",{className:"OrgZhihuLogo-appName",children:"机构号"})]})},n}(h.PureComponent),gc=Zc;function Ec(){var e=(0,mc.Z)(["email"]);return(0,o.tZ)("header",{role:"banner",className:"OrgAppHeader","data-za-module":"TopNavBar",children:(0,o.BX)("div",{className:"OrgAppHeader-inner",children:[(0,o.tZ)(gc,{}),(0,o.BX)("div",{className:"OrgAppHeader-userInfo",children:[(0,o.tZ)(we.ql,{title:"机构号 - 知乎"}),(null==e?void 0:e.email)||"",(0,o.tZ)(fc.ZP,{preset:"link",onClick:function(){location.href="/logout?next=/org/signup"},children:"退出"})]})]})})}var Tc=n(4838),Cc=n(53745),Ac=n(87655),_c=n(90463),yc=n(11249),Sc=n.n(yc),Ic="/index",bc="/zvideo",wc=[{primary:!1,name:"follow",text:"关注",path:"/follow",path_if_org:"/follow",cookieValue:"f"},{primary:!0,name:"recommend",text:"推荐",path:"/",path_if_org:Ic,cookieValue:"r"},{primary:!1,name:"hot",text:"热榜",path:"/hot",path_if_org:"/hot",cookieValue:"h"},{primary:!1,name:"zvideo",text:"视频",path:bc,path_if_org:bc,cookieValue:"v"}],Rc=wc.map((function(e){return(0,F.Z)((0,U.Z)({},e),{path:e.path_if_org})})),Nc={tabsMapByName:Sc()(Rc,"name"),tabsMapByCookie:Sc()(Rc,"cookieValue"),tabsMapByPath:Sc()(Rc,"path")},Oc=wc,Dc={tabsMapByName:Sc()(Oc,"name"),tabsMapByCookie:Sc()(Oc,"cookieValue"),tabsMapByPath:Sc()(Oc,"path")},Bc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOrg:!1},n=t.isOrg,o=void 0!==n&&n;(0,ec.Z)(this,e),this.TABS_TABLE=o?Rc:Oc,this.PRIMARY_TAB=this.TABS_TABLE.find((function(e){return e.primary})),this.maps=o?Nc:Dc}var t=e.prototype;return t.isCurrCookiePrimary=function(e){return e===this.PRIMARY_TAB.cookieValue},t.getTabByCookie=function(e){return this.maps.tabsMapByCookie[e]},t.getTabByName=function(e){return this.maps.tabsMapByName[e]},t.getTabByPath=function(e){return this.maps.tabsMapByPath[e]},e}(),Pc=n(80869),kc=n(8672),xc=n(39269),Lc=n(13261),Uc=n(38793),Fc=n(37694),Mc=n.n(Fc),Gc=n(31621),zc=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}var o=n.prototype;return o.componentDidMount=function(){var e,t;this.unsubscriber=(e=this.props.onUnload,t=function(t){var n=e(t);if(n)return(t||window.event).returnValue=n,n},window.addEventListener("beforeunload",t),function(){return window.removeEventListener("beforeunload",t)})},o.componentWillUnmount=function(){this.unsubscriber()},o.render=function(){return this.props.children||null},n}(h.Component),Hc=zc,qc=n(7620),Vc=n(72864),Xc={title:"AskQuestion::title",topics:"AskQuestion::topics",detail:"AskQuestion::detail"},Wc=function(){var e=T().get(Xc.detail)||"";if(e&&"undefined"!==e){var t=e.html||e;if("string"==typeof t)return t}return""},Kc=function(e){Object.keys(e).forEach((function(t){var n=Xc[t];n&&void 0!==e[t]&&T().set(n,e[t])}))},jc=function(e){return e.length<4?{level:"error",text:"至少输入 ".concat(4," 个字"),ignoreInInput:!0,blockSubmit:!0}:e.length>51?{level:"error",text:"已超过 ".concat(e.length-51," 个字"),ignoreInInput:!0,blockSubmit:!0}:e.length>0&&-1===e.indexOf("?")&&-1===e.indexOf("？")?{level:"error",text:"你还没有给问题添加问号",blockSubmit:!0}:(e.match(/(\?|？)/g)||[]).length>1?{level:"warning",text:"多个问题建议拆分"}:null},Yc=function(e){return e&&0!==e.length?null:{level:"error",text:"至少添加一个话题",blockSubmit:!0}},Qc=function(e){return!!e&&(e.hasVideo("upload")?{level:"error",blockSubmit:!0,text:"请等待视频上传完成后发布"}:e.hasImage("upload")?{level:"error",blockSubmit:!0,text:"请等待图片上传完成后发布"}:e.hasImage("error")||e.hasVideo("error")&&!e.hasVideo("error-review")?{level:"fatal",blockSubmit:!0,text:"草稿中含有上传失败的内容，请更改后重新提交",title:"上传失败"}:!(!e.hasVideo("error-review")&&!e.hasVideo("censor"))&&{level:"fatal",blockSubmit:!0,text:"视频中包含未通过审核的信息，请更改后重新提交",title:"视频未通过审核"})},Jc=function(e){return"commercial"===e},$c=function(e){var t=e.questionType,n=e.brandId,r=e.brand,i=e.isAnonymous,a=e.css,c=(0,K.Z)(e,["questionType","brandId","brand","isAnonymous","css"]),s=(0,Re.useSelector)((function(e){var o;if(!i)return Jc(t)?(null==r?void 0:r.logo)||function(e,t){var n,o;if(t)return null===(o=null===(n=e.people.brands)||void 0===n?void 0:n.find((function(e){return e.id===t})))||void 0===o?void 0:o.logo}(e,n):null===(o=(0,le.ib)(e))||void 0===o?void 0:o.avatarUrl}));return(0,o.tZ)(Vc.qE,(0,U.Z)({size:40,url:s,css:a},c))},es=n(53658),ts=n(663),ns=n(77568),os=n.n(ns);var rs=function(e){e=e||{};var t=h.createContext(e),n=t.Provider,r=t.Consumer;return{consume:function(e){return function(t){e=e||function(e){return e};var n=function(n){(0,tc.Z)(a,n);var i=(0,nc.Z)(a);function a(){return(0,ec.Z)(this,a),i.apply(this,arguments)}return a.prototype.render=function(){var n=this.props,i=n.forwardedRef,a=(0,K.Z)(n,["forwardedRef"]);return(0,o.tZ)(r,{children:function(n){return(0,o.tZ)(t,(0,F.Z)((0,U.Z)({ref:i},a,e(n)),{onChangeContext:n.onChangeContext}))}})},a}(h.Component);return os()(h.forwardRef((function(e,t){return(0,o.tZ)(n,(0,F.Z)((0,U.Z)({},e),{forwardedRef:t}))})),t)}},provide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(t){var r=function(r){(0,tc.Z)(a,r);var i=(0,nc.Z)(a);function a(){var t;return(0,ec.Z)(this,a),(t=i.apply(this,arguments)).state=(0,U.Z)({},"function"==typeof e?e(t.props):e),t.handleChange=function(e,n){return t.setState(e,n)},t}return a.prototype.render=function(){return(0,o.tZ)(n,{value:(0,U.Z)({onChangeContext:this.handleChange},this.state),children:(0,o.tZ)(t,(0,F.Z)((0,U.Z)({},this.props,this.state),{onChangeContext:this.handleChange}))})},a}(h.Component);return os()(r,t)}}}}(),is=rs.provide,as=rs.consume,cs=function(e){return function(t){var n=e.load,r=function(e){(0,tc.Z)(i,e);var r=(0,nc.Z)(i);function i(){var e;return(0,ec.Z)(this,i),(e=r.apply(this,arguments)).state={isFetching:!1,isDrained:!1,error:null,data:null},e.load=function(){e.setState({isFetching:!0}),n(e.props).then((function(t){return e.setState({isFetching:!1,isDrained:!0,data:t})})).catch((function(t){return e.setState({isFetching:!1,error:t})}))},e}return i.prototype.render=function(){return(0,o.tZ)(t,(0,F.Z)((0,U.Z)({},this.props,this.state),{load:this.load}))},i}(h.Component);return os()(r,t)}},ss=n(98807),us=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handleChange=function(t){return e.props.onChangeContext({brandId:t})},e}return n.prototype.render=function(){var e=this.props,t=e.brandId,n=e.data,r=n&&n.payload&&n.payload.data||[];return(0,o.tZ)(es.Z,(0,F.Z)((0,U.Z)({className:"AskBrand",listClassName:"AskBrand--list"},!t&&{text:(0,o.tZ)("span",{className:"AskBrand-text",children:"选择品牌"})}),{value:t,onChange:this.handleChange,children:r.map((function(e){return(0,o.tZ)(es.W,{value:e.id,text:(0,o.BX)("span",{className:"AskBrand-text",children:[e.name,e.clickInfo&&e.clickInfo.target&&e.clickInfo.target.isOrg&&(0,o.tZ)(ts.Kr,{size:24,"aria-label":"已认证帐号"})]})},e.id)}))}))},n}(h.Component),ls=(0,Xe.compose)((0,Re.connect)((function(e){return{currentUser:(0,le.ib)(e)}})),cs({load:function(e){return e.dispatch((0,Io.R8)(e.currentUser.urlToken))}}),(0,ss.Z)({load:function(e){return e.load()}}),as((function(e){return{brandId:e.brandId}})))(us),ds=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){return(0,o.BX)("div",{className:"AskBrandTitle",children:[(0,o.tZ)("h2",{className:"AskBrandTitle-main",children:"品牌提问"}),(0,o.tZ)("div",{className:"AskBrandTitle-sub",children:"创建前请先与商务确认订单，如未确认联系 ad@zhihu.com"})]})},n}(h.Component),ps=ds,hs=n(14562),fs=n(36701),ms=n(16595),vs=n(88994),Zs=n(64153),gs=n(75724),Es=n(62485),Ts=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={toolBarShown:!1},e.focus=function(){return e.editable&&e.editable.focus()},e.triggerImageUpload=function(){e.editable&&e.editable.handleKeyCommand("insert-image")},e.triggerVideoUpload=function(){e.editable&&e.editable.handleKeyCommand("insert-video")},e.handleChange=function(t){var n=e.props.onChangeContext;n&&n({detail:t})},e.handleBlur=function(t){var n=e.validate();(0,e.props.onChangeContext)({detailTip:n});var o=e.props.onBlur;o&&o(t)},e.handleTrackDescriptionClickOnce=Y()((function(e){uc.Z.trackEvent(e.target,{id:2464,action:"Click"})})),e.handleToggleToolbar=function(){return e.setState({toolBarShown:!e.state.toolBarShown})},e.handleRef=function(t){return e.editable=t},e.handleUploadError=function(t,n){switch(n){case"video":e.handleError("video-upload-error");break;case"image":e.handleError("image-upload-error",t)}},e.handleError=function(e,t){return(0,ta.Xc)(e,t,Es.t)},e.checkIfCanUpload=function(){return e.props.canUpload},e.hasVideo=function(){return e.editable&&e.editable.hasVideo()},e.canExit=function(){return e.editable&&e.editable.hasVideo("upload")?(0,Es.y)("关闭弹窗将丢失上传中的视频内容"):Promise.resolve()},e.validate=function(){return Qc(e.editable)},e.validateAndNotice=function(){var t=e.validate();return!!t&&("fatal"===t.level?fs.Z.alert(t.text,{title:t.title}):(0,Es.t)(t.text),e.focus(),t)},e}return n.prototype.render=function(){var e=this.state.toolBarShown,t=this.props,n=t.onFocus,r=t.value;return(0,o.BX)("div",{className:"AskDetail",children:[(0,o.tZ)("div",{className:"AskDetail-actionsWrapper",children:(0,o.BX)("div",{className:"AskDetail-actions",children:[(0,o.tZ)(hs.hA,{label:"".concat(e?"收起":"展开","工具栏"),isActive:e,icon:ms.g_,onClick:this.handleToggleToolbar}),(0,o.tZ)(hs.hA,{label:"插入图片",icon:vs.x3,onClick:this.triggerImageUpload}),(0,o.tZ)(hs.hA,{label:"上传视频",icon:Zs.Y,onClick:this.triggerVideoUpload})]})}),(0,o.tZ)("div",{className:"AskDetail-inputWrapper",onClick:this.handleTrackDescriptionClickOnce,children:(0,o.tZ)(gs.Z,{placeholder:"输入问题背景、条件等详细信息（选填）",className:"AskDetail-input",ref:this.handleRef,allowDragAndDrop:!0,allowLinkCard:!0,minRows:2,allowToolbar:e,allowHeaderThree:!1,defaultValue:r&&r.toHTML(),onChange:this.handleChange,onError:this.handleError,onUploadError:this.handleUploadError,onBeforeVideoUpload:this.checkIfCanUpload,onBlur:this.handleBlur,onFocus:n,editingContentType:"question",videoSource:"question"})})]})},n}(h.Component),Cs=as((function(e){var t=e.detail;return{value:t&&t.toHTML?t:{toHTML:function(){return t}}}}))(Ts),As=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handleChange=function(){var t=e.props,n=t.value,o=t.hasVideo,r=t.onChangeContext,i=!n;i&&o()?(0,Es.t)("匿名不能使用知乎视频功能，如需启用匿名请删除问题中的视频",{theme:"red"}):r({isAnonymous:i})},e}return n.prototype.render=function(){var e=this.props,t=e.currentUser,n=e.value,r=e.questionType;return t&&"organization"===t.userType||"commercial"===r||(0,o.tZ)("div",{children:(0,o.tZ)("div",{className:"AskOptions",children:(0,o.BX)("label",{htmlFor:"anonymous-checkbox",className:"AskOptions-label",children:[(0,o.tZ)("input",{id:"anonymous-checkbox",className:"AskOptions-checkbox",type:"checkbox",checked:n,onChange:this.handleChange}),"匿名提问"]})})})},n}(h.Component);As.propTypes={hasVideo:ic().func,onChange:ic().func};var _s=(0,Xe.compose)((0,Re.connect)((function(e){return{currentUser:(0,le.ib)(e)}})),as((function(e){return{value:e.isAnonymous||!1}})))(As),ys=n(64634),Ss=n(69149),Is=n(70164),bs=n(80150),ws=function(e){return(0,o.tZ)("div",{style:{textAlign:"right",minHeight:"1.67em"},children:(0,o.tZ)("span",{className:Jr()("AskFieldTip",(0,Ke.Z)({},"AskFieldTip--".concat(e.level),e.level)),children:e.text})})},Rs="group-title",Ns=18,Os=16,Ds=Math.floor(1.34*Ns*2),Bs=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={fontSize:Ns,items:[],rows:1,pos:0},e.appended=!1,e.focus=function(){return e.input&&e.input.focus()},e.handleKeyDown=function(e){13===e.keyCode&&e.preventDefault()},e.handleSelect=function(e,t){window.open("/question/".concat(t.urlToken,"?q=").concat(e),"_self")},e.handleCompositionEnd=function(t){var n=t.target.value,o=e.props.onChangeContext;if(!e.appended&&"string"==typeof n&&n.length&&-1===n.indexOf("?")&&-1===n.indexOf("？")){e.appended=!0;var r=e.input&&e.input.selectionStart,i="".concat(n,"？");return e.setState({pos:r},(function(){e.input&&e.input.setSelectionRange(r,r)})),o({title:i,titleTip:e.validate(i)})}},e.handleFocus=function(t){e.change(t.target.value),e.setState({focused:!0});var n=e.props.onFocus;n&&n(t)},e.handleBlur=function(t){e.change(t.target.value),e.setState({focused:!1})},e.handleDivRef=function(t){e.div=t},e.handleChange=function(t){return e.change(t)},e.change=function(t){var n=e.props,o=n.onChangeContext;if(t!==n.value)return t?e.updateItems(t):e.setState({items:[]}),o({title:t,titleTip:e.validate(t)})},e.updateItems=Me()((function(t){return(0,Ss.Ci)(t).then((function(t){return e.setState({items:t})}))}),200),e.updateHeight=function(){if(e.input&&e.div){var t=e.state.fontSize,n=e.props,o=n.line,r=n.onChangeLine,i=e.div.scrollHeight;i>=Ds&&o<2?r(2):i<Ds&&o>=2&&r(1),t!==Os?i>Ds&&e.setState({fontSize:Os}):t!==Ns&&i<=Ds&&e.setState({fontSize:Ns})}},e.validate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.value,n=jc(t||""),o=e.props.onError;return o&&o(n),n},e.renderLabel=function(e){return(0,o.BX)("div",{className:"AskTitle-suggestionClose",children:[(0,o.tZ)("span",{children:e}),(0,o.tZ)(fc.ZP,{preset:"plain",children:"关闭"})]})},e.renderItem=function(t){var n=e.props.value;return(0,o.BX)("a",{className:"AskTitle-suggestionItemLink",href:"//www.zhihu.com/question/".concat(t.urlToken,"?q=").concat(n),children:[(0,o.tZ)("span",{className:"AskTitle-suggestionItemTitle",dangerouslySetInnerHTML:{__html:t.name}}),(0,o.BX)("span",{className:"AskTitle-suggestionItemDesc",children:[(0,Is.uf)(t.answersCount)," 个回答"]})]},t.urlToken)},e}var r=n.prototype;return r.componentDidMount=function(){var e=this;this.updateHeight(),setTimeout((function(){e.focus();var t=e.props.onFocus;t&&t()}))},r.componentDidUpdate=function(e){e.value!==this.props.value&&(this.updateHeight(),this.validate())},r.render=function(){var e=this,t=this.state,n=t.focused,r=t.items,i=t.fontSize,a=this.props,c=a.value,s=a.line,u=a.tip;return(0,o.BX)(h.Fragment,{children:[(0,o.BX)("div",{className:"AskTitle",children:[(0,o.tZ)("div",{className:"AskTitle-text",ref:this.handleDivRef,children:c}),(0,o.tZ)(ys.Z,{value:c,autoFocus:!0,onChange:this.handleChange,inputProps:{required:!0,multiline:!0,rows:s,spread:!0,large:!0,onCompositionEnd:this.handleCompositionEnd,placeholder:"写下你的问题，准确地描述问题更容易得到解答",className:"AskTitle-input",onKeyDown:this.handleKeyDown,style:{fontSize:i}},menuProps:{position:this.position,preventCloseOnTarget:!0,menuContainerClassName:"AskTitle-suggestionPopover",itemClassName:"AskTitle-suggestionItem",menuClassName:"AskTitle-suggestionContainer"},labels:(0,Ke.Z)({},Rs,"你的问题可能已经有答案"),renderLabel:this.renderLabel,groups:(0,Ke.Z)({},Rs,r.slice(0,10)),renderItem:this.renderItem,preventOpenOnFocus:!0,onRef:function(t){return e.input=t},autoSelect:!1,onSelect:this.handleSelect,onBlur:this.handleBlur,onFocus:this.handleFocus})]}),(0,o.tZ)(ws,(0,U.Z)({},!n||u&&!u.ignoreInInput?u:{text:(0,o.tZ)(bs.Z,{current:c?c.length:0,max:51,name:""})}))]})},n}(h.Component),Ps=as((function(e){return{value:e.title||"",tip:e.titleTip}}))(Bs),ks=n(49019),xs=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={activated:!1,changed:!1},e.updateTopicsFromKeyword=Me()((function(t){var n=e.props,o=n.loadMatchTopics,r=n.onChangeContext;o({text:t}).then((function(e){var t=e.payload;r({topics:t.data.slice(0,3)})}))}),200),e.handleChange=function(t){var n=e.props.onChangeContext,o=e.validate(t);o||e.setState({changed:!0}),n({topics:t,topicsTip:o}),o?e.focus():e.deactivated()},e.handleRemove=function(){return uc.Z.trackEvent((0,kc.Z)(e),{id:2466,action:"Delete"})},e.deactivated=function(){e.setState({activated:!1})},e.toggleActivated=function(){return e.setState({activated:!e.state.activated})},e.validate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.value;return Yc(t)},e.focus=function(){return e.topicsInput&&e.topicsInput.focus()},e}var r=n.prototype;return r.componentDidUpdate=function(e){var t=this.props,n=t.keyword,o=t.onChangeContext;if(n!==e.keyword){if(!n)return void o({topics:[]});!this.state.changed&&(n.length>=5||Math.abs(e.keyword.length-n.length)>=3)&&this.updateTopicsFromKeyword(n)}},r.render=function(){var e=this,t=this.props.value,n=void 0===t?[]:t,r=this.state.activated;return(0,o.tZ)(ks.Z,{actived:r,inputProps:{className:"AskTopics-input"},onRef:function(t){e.topicsInput=t},value:n,onChange:this.handleChange,onRemove:this.handleRemove,onToggleActived:this.toggleActivated})},n}(h.Component),Ls=(0,Xe.compose)((0,Re.connect)(null,{loadMatchTopics:function(e){var t=(0,U.Z)({type:"question"},e),n=t.text,o=t.type;return{API:{types:Cn.GET_MATCH_TOPICS,endpoint:"/recommendations/match-topics",query:{text:n,type:o}}}}}),as((function(e){return{keyword:e.title,value:e.topics||[]}})))(xs),Us=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={trans:!1,actived:!1,line:1},e.zaRef=(0,h.createRef)(),e.traceId=Mc()(),e.createAskFormRef=function(t){e.form=t},e.askDetail=(0,h.createRef)(),e.handleFocus=function(){e.state.trans&&e.setState({trans:!1})},e.handleChangeLine=function(t){return e.setState({line:t})},e.handleUnload=function(){var t=e.props,n=t.topics,o=t.title,r=t.detail;Kc({title:o,topics:n,detail:r&&r.toHTML?r.toHTML():r})},e.transitionKey=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state,n=e.props,o=n.title,r=n.titleTip,i=n.topics,a=n.detail,c=n.detailTip,s=t.line,u="".concat(Boolean(o),"-").concat(Boolean(a),"-").concat(i&&i.length,"-").concat(Boolean(r),"-").concat(Boolean(c),"-").concat(s);return u},e.handleSuccess=function(){Kc({title:null,topics:null,detail:null});var t=e.props,n=t.onSuccess,o=t.id;e.zaRef.current.trackEvent({action:"Question",eventType:"Click",elementLocation:{type:"Button",moduleId:"published_successful",content:{type:"Question",token:String(o)}}},{configMap:{traceId:e.traceId}}),n?n({id:o}):location.href="//".concat(C.Z.wwwHost,"/question/").concat(o)},e.handleSubmit=function(t){if(uc.Z.trackEvent(t.target,{id:2467,action:"Question"}),e.checkSubmitable()){var n=e.props,o=n.brandId,r=n.questionType,i=n.askQuestion,a=n.title,c=n.topics,s=n.detail,u=n.isAnonymous,l=s&&s.toHTML?s.toHTML():s,d=l&&l.html?l.html:l;i({type:Jc(r)?2:0,brandId:o,title:a,topicUrlTokens:c.map((function(e){return e.urlToken||e.id})),detail:"string"==typeof d?d:"",isAnonymous:u}).then(e.handleSuccess)}},e.setTitle=function(){var t=e.props.setTitle;if(t){var n=e.props.currentUser.isOrg,r=e.props.questionType;n&&(Jc(r)?t("创建品牌提问",(0,o.BX)("p",{children:["创建前请先与商务确认订单，如未确认联系"," ",(0,o.tZ)("a",{href:"mailto:ad@zhihu.com",children:"ad@zhihu.com"})]})):t("创建社区提问",(0,o.BX)("div",{children:["描述精确的问题更易得到解答",(0,o.tZ)("a",{href:"/question/19806261",target:"_blank",children:"知乎社区提问规范"})]}))),t("写下你的问题","描述精确的问题更易得到解答")}},e.canExit=function(){var t=e.askDetail&&e.askDetail.current;return e.handleUnload(),t&&t.canExit()},e.checkSubmitable=function(){var t=e.props,n=t.titleTip,o=t.topicsTip;if(n&&n.blockSubmit)return!1;var r=e.askDetail&&e.askDetail.current;return!(r&&r.validateAndNotice())&&(!o||!o.blockSubmit)},e.disabled=function(){var t=e.props,n=t.title,o=t.titleTip,r=t.topicsTip,i=t.topics;return!n||o&&o.blockSubmit||!(i&&i.length)||r&&r.blockSubmit},e.shouldToggleTrans=function(){if(e.form){var t=e.form.scrollHeight<=327;t&&!e.state.trans?e.setState({trans:!0}):!t&&e.state.trans&&e.setState({trans:!1})}},e.hasVideo=function(){var t=e.askDetail&&e.askDetail.current;return t&&t.hasVideo()},e}var r=n.prototype;return r.componentDidMount=function(){var e,t,n=this;null===(e=this.props.writeShield)||void 0===e||null===(t=e.setOnModalClose)||void 0===t||t.call(e,(function(){var e,t;null===(t=(e=n.props).onClose)||void 0===t||t.call(e)})),this.props.onChangeContext({title:T().get(Xc.title)||"",detail:Wc(),topics:T().get(Xc.topics)||[]},this.checkSubmitable),this.setTitle(),this.timeout=setTimeout((function(){n.setState({actived:!0}),n.shouldToggleTrans()}),300),this.props.imperativeRef&&(this.props.imperativeRef.current={canExit:this.canExit.bind(this)})},r.componentDidUpdate=function(e,t){this.transitionKey(t)!==this.transitionKey()&&this.state.actived&&this.shouldToggleTrans()},r.componentWillUnmount=function(){this.timeout&&clearTimeout(this.timeout),this.props.imperativeRef&&(this.props.imperativeRef.current=null)},r.render=function(){var e=this.state,t=e.trans,n=e.line,r=this.props,i=r.questionType,a=r.brandId,c=r.title,s=r.detail,u=r.topics,l=r.isAnonymous,d=Jc(i),p=(0,o.BX)("div",{className:"Ask-items",children:[(0,o.BX)("div",{className:Jr()("Ask-item","Ask-titleWrapper"),children:[(0,o.tZ)($c,{isAnonymous:l,questionType:i,brandId:a,css:{float:"left",marginTop:"3px",marginRight:"16px"}}),(0,o.tZ)("div",{className:"Ask-title",children:(0,o.tZ)(Ps,{line:n,onChangeLine:this.handleChangeLine})})]}),(c||s||Boolean(u&&u.length))&&(0,o.tZ)("div",{className:"Ask-item",children:(0,o.tZ)(Cs,{ref:this.askDetail,canUpload:!l,onFocus:this.handleFocus,onBlur:this.shouldToggleTrans})}),(c||s||Boolean(u&&u.length))&&(0,o.tZ)("div",{className:"Ask-item",children:(0,o.tZ)(Ls,{})}),(0,o.tZ)(Hc,{onUnload:this.handleUnload})]});return(0,o.BX)("form",{ref:this.createAskFormRef,className:"Ask-form",onSubmit:function(e){return e.preventDefault()},noValidate:!0,children:[(0,o.tZ)(Ne.pS,{ref:this.zaRef}),d&&(0,o.BX)("div",{className:"Ask-header",children:[(0,o.tZ)(ps,{}),(0,o.tZ)(ls,{})]}),t?(0,o.tZ)(Gc.Z,{transitionKey:this.transitionKey(),children:p}):(0,o.tZ)("div",{children:p}),(0,o.BX)("div",{className:"Ask-footer",children:[!d&&(0,o.tZ)(_s,{hasVideo:this.hasVideo}),(0,o.tZ)("div",{className:"Ask-footer-buttonWrapper",children:(0,o.tZ)(Ne.$U,{as:fc.ZP,zaType:"Button",zaText:!0,zaAction:"Question",zaModuleId:"published_button",extra:{configMap:{traceId:this.traceId,type:"Question",publish_type:"newPublish"}},preset:"primary",color:"blue",disabled:this.disabled(),onClick:this.handleSubmit,children:"发布问题"})})]})]})},n}(h.Component),Fs=(0,Xe.compose)((0,qc.ZP)({init:!0,getScene:function(){return{type:"question"}}}),is(),(0,Re.connect)((function(e){return(0,U.Z)({},e.common.ask)}),{askQuestion:function(e){return{API:{types:Cn.ADD,method:"POST",endpoint:"questions",fetchOptions:{zsEncrypt:!0,body:(0,b.decamelizeKeys)(e)}}}}}))(Us),Ms=n(82096),Gs=n(30658),zs=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handleRefresh=function(){Promise.resolve(e.props.fillCurrentUserIfNeeded(["adType"])).then(e.handleCommercialSelect)},e.handleNormalSelect=function(){return e.props.onSelect("normal")},e.handleCommercialSelect=function(){var t=e.props,n=t.adType,r=t.onSelect;if("normal"===n)return fs.Z.alert((0,o.BX)("p",{children:["请发邮件至 ",(0,o.tZ)("a",{href:"mailto:ad@zhihu.com",children:"ad@zhihu.com"})," ","申请，标题为「申请品牌提问 - 帐号名称」。我们会在 1 个工作日内联系你。"]}),{title:"暂无权限"});if("invited"===n){var i=e.props.currentUser.urlToken;return(0,Es.y)("你尚未激活广告帐号",{content:(0,o.tZ)("div",{children:"激活广告帐号后即可创建品牌提问"}),text:{ok:"激活广告帐号",cancel:"已激活，继续创建"}}).then((function(){return window.open("https://e.zhihu.com/activate-advertiser?rf=createBrandQuestion&urlToken=".concat(i),"_blank")}),e.handleRefresh)}r("commercial")},e}var r=n.prototype;return r.componentDidMount=function(){var e=this.props.setTitle;e&&e("选择提问类型",(0,o.tZ)("a",{className:"QuestionCategory-link",href:"/organization/ophelp/faq/19",target:"_blank",children:"如何选择？"}))},r.render=function(){return(0,o.BX)("div",{className:"QuestionCategorySelect",children:[(0,o.tZ)(n.Item,{onClick:this.handleNormalSelect,title:"社区提问",desc:"公共提问，社区用户共同参与问题编辑和管理，适合发起公共讨论。"}),(0,o.tZ)(n.Item,{onClick:this.handleCommercialSelect,title:"品牌提问",desc:(0,o.BX)("span",{children:["私有提问，由您自主管理问题展示和回答展示，适合承载官方活动。这是一款付费产品。",(0,o.tZ)("a",{href:"https://www.zhihu.com/introduction/brand_question",children:"了解更多"})]})})]})},n}(h.Component);zs.Item=function(e){var t=e.onClick,n=e.title,r=e.desc;return(0,o.BX)("div",{role:"button",tabIndex:0,className:"AskOrgSelect-item",onClick:t,children:[(0,o.BX)("div",{className:"AskOrgSelect-ItemContent",children:[(0,o.tZ)("div",{className:"AskOrgSelect-itemTitle",children:n}),(0,o.tZ)("div",{className:"AskOrgSelect-itemDesc",children:r})]}),(0,o.tZ)(Gs.N,{size:"2em"})]})};var Hs=(0,Xe.compose)((0,Re.connect)((function(e){return{currentUser:(0,le.ib)(e)}}),{fillCurrentUserIfNeeded:le.sF}))(zs),qs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userType,n=e.adType;return"organization"===t||"registered"===n},Vs=function(e){return Boolean(e&&e.query&&"createBrandQuestion"===e.query.rf)},Xs=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={selectShown:e.props.createBrandQuestion,askShown:!1,questionType:"normal"},e.askRef=(0,h.createRef)(),e.toggleSelectShown=function(){return e.setState({selectShown:!e.state.selectShown})},e.toggleAskShown=function(t){return e.setState({askShown:null!=t?t:!e.state.askShown})},e.setTitle=function(t,n){return e.setState({title:t,subtitle:n})},e.handleClose=function(){if(uc.Z.trackEvent((0,kc.Z)(e),{id:2463,action:"Close"}),e.askRef.current)return Promise.resolve(e.askRef.current.canExit()).then((function(){return e.toggleAskShown(!1)})).catch((function(){return null}));e.toggleAskShown(!1)},e.handleClick=e.props.authRequired((function(t){return e.props.realNameRequired((function(){var n,o;(null===(n=e.props.children)||void 0===n?void 0:n.props.onClick)&&(null===(o=e.props.children)||void 0===o||o.props.onClick(t));e.props.canCurrentAskBrandQuestion?e.toggleSelectShown():e.toggleAskShown()}))()})),e.handleSelect=function(t){e.setState({questionType:t}),"commercial"===t?e.props.loadBrands().then((function(){return e.toggleAskShown()})):e.toggleAskShown()},e.handleSuccess=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id,n=e.props,o=n.askHandleSuccess,r=n.router;e.toggleAskShown(),r.push("//".concat(C.Z.wwwHost,"/question/").concat(t)),null==o||o()},e}var r=n.prototype;return r.componentDidMount=function(){(0,this.props.fillCurrentUserIfNeeded)(["adType"]),this.props.imperativeRef&&(this.props.imperativeRef.current={click:this.handleClick})},r.render=function(){var e=this.state,t=e.selectShown,n=e.askShown,r=e.questionType,i=e.title,a=e.subtitle,c=this.props,s=c.children,u=c.currentUser;return(0,o.BX)(o.HY,{children:[s&&(0,h.cloneElement)(s,{onClick:this.handleClick}),(0,o.tZ)(Ms.Z,{size:"large",maskClosable:!1,onClose:this.handleClose,children:n&&(0,o.tZ)(Fs,{imperativeRef:this.askRef,questionType:r,onSuccess:this.handleSuccess,onClose:this.handleClose})}),(0,o.tZ)(Ms.Z,{title:i,subtitle:a,onClose:this.toggleSelectShown,children:t&&(0,o.tZ)(Hs,{adType:u&&u.adType,onSelect:this.handleSelect,setTitle:this.setTitle})})]})},n}(h.Component),Ws=(0,Xe.compose)(I.withRouter,Ac.Z,xe.ru,(0,Re.connect)((function(e,t){return{createBrandQuestion:Vs(t.location),canCurrentAskBrandQuestion:qs((0,le.ib)(e)),currentUser:(0,le.ib)(e)}}),{loadBrands:Io.R8,fillCurrentUserIfNeeded:le.sF}))(Xs),Ks=n(47496),js=n(70577),Ys=n(7185),Qs=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.renderGroupItems=function(e,t){var n=this,r=this.props,i=r.renderItem,a=r.isItemDisabled,c=this.state,s=c.id,u=c.selectedIndex,l=c.selectedGroupKey;return e.map((function(e,r){var c=e.data||r;return(0,o.tZ)(Ys.Z,{id:"".concat(s,"-").concat(t,"-").concat(c),tag:"div",disabled:a(e),hovered:r===u&&t===l,onMouseEnter:function(){n.setState({selectedIndex:r,selectedGroupKey:t})},onClick:function(){return n.handleClose(!0,r,t)},onMouseDown:function(e){return e.preventDefault()},role:"option",children:i(e)},c)}))},n}(ys.Z),Js="search:preset_words",$s="搜索你感兴趣的内容…",eu=function(){return T().get(Js)},tu=function(e){T().set(Js,e)},nu=function(e){var t=eu();if(t){var n=t.words,o={nextRequestTime:t.nextRequestTime,words:n.map((function(t){return t.id===e?(0,F.Z)((0,U.Z)({},t),{valid:0}):t}))};tu(o)}},ou=function(e){return!e||!e.lastUpdateTime||e.lastUpdateTime+3e4<Date.now()},ru=function(e){var t=eu();if(t){var n=t.words,o=t.nextRequestTime,r=t.lastUpdateTime,i=t.lastId,a=ou(t),c={nextRequestTime:o,lastUpdateTime:a?Date.now():r,lastId:a?e:i,words:n.map((function(t){return t.id===e?(0,F.Z)((0,U.Z)({},t),{times:t.times+1}):t}))};tu(c)}},iu=function(e){var t=e&&e.payload&&e.payload.presetWords||{},n=t.nextRequestTs,o=t.words,r=(eu()||{}).words,i=void 0===r?[]:r,a={nextRequestTime:n?1e3*n:Date.now()+6e5,words:o.map((function(e){var t=e.id,n=e.beginTs,o=e.endTs,r=i.find((function(e){return e.id===t})),a=r&&r.times||0;return(0,F.Z)((0,U.Z)({},e),{times:a,beginTs:1e3*n,endTs:1e3*o})}))};return tu(a),a},au=function(e){var t=Date.now(),n=e.filter((function(e){var n=e.valid,o=e.beginTs,r=e.endTs;return n&&o<t&&r>t}));if(!n.length)return!1;var o=[],i=n.filter((function(e){return e.weight>=10})),a=function(e){var t=Math.random();return e.find((function(n,o){var r=n.range,i=o===e.length-1?1:r[1];return r[0]<t&&i>t}))||e[e.length-1]}(function(e){var t=e.reduce((function(e,t){return e+t.weight}),0);return e.reduce((function(e,n){var o=n.id,i=n.weight,a=e&&e[e.length-1]&&e[e.length-1].range[1]||0;return(0,r.Z)(e).concat([{id:o,range:[a,a+i/t]}])}),[])}((o=i.length>0?i:n).map((function(e){var t=e.weight,n=e.times;return{weight:t/((void 0===n?0:n)+1),id:e.id}}))))||{},c=a.id,s=void 0===c?"-1":c;return o.find((function(e){return e.id===s}))},cu=function(e){var t=eu(),n=t||{},o=n.nextRequestTime,r=n.words;if(o&&(o<Date.now()||o>325036512e5)||!r)return e(function(e){return e?e.words.map((function(e){return{valid:e.valid,id:e.id}})):null}(t)).then(iu).then((function(e){var t=e.words.filter((function(e){return"general"===e.type})),n=au(t);return ru(n.id),n}));var i=r.filter((function(e){return"general"===e.type}));if(!ou(t)){var a=t.lastId;return Promise.resolve(i.find((function(e){var t=e.id;return a===t})))}var c=au(i);return ru(c.id),Promise.resolve(c)},su=n(90674),uu=function(e,t){return e.map((function(e,n){return(0,U.Z)({data:(null==e?void 0:e.query)||e,index:n,id:null==e?void 0:e.rawId},t)}))},lu=function(e,t){return"string"==typeof t&&e.startsWith(t)?(0,o.BX)("span",{children:[(0,o.tZ)("em",{children:t}),e.slice(t.length)]}):e},du=function(e){return e?{history:{SearchSource:"SuggestionHistory",zaModuleName:"SearchHistoryItem"},suggest:{SearchSource:"Suggestion",zaModuleName:"SearchSuggestionItem"},searchLink:{SearchSource:"",zaModuleName:"SearchSuggestionList"}}:{topSearch:{SearchSource:"Hot",zaModuleName:"HotSearchWordItem"},history:{SearchSource:"History",zaModuleName:"SearchHistoryItem"}}},pu=function(e,t,n,o){uc.Z.trackCardShow(e,{},{search:(0,U.Z)({search_source:du(o)[n].SearchSource,raw_query:t},o&&{input_query:o})})},hu=function(e){var t=e.type,n=e.index,o=e.rawSearchResult,r=e.data,i=null;"searchLink"!==t?i=(document.querySelectorAll(".SearchBar-menu div[data-za-detail-view-path-module =\n    ".concat(du(o)[t].zaModuleName,"]"))||[])[n]:i=document.querySelector(".SearchBar-menu div[data-za-detail-view-element_name=ViewSeachResult]");i&&uc.Z.trackEvent(i,(0,U.Z)({action:"Click"},"searchLink"===t?{element_name:"ViewSeachResult"}:{}),{search:(0,U.Z)({search_source:du(o)[t].SearchSource,raw_query:r},o&&{input_query:o})})},fu=function(e,t){return t?"SearchSuggestionList":"history"===e?"SearchHistoryList":"topSearch"===e?"HotSearchWordList":""},mu=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handleDelete=function(t,n){var o=e.props.rawSearchResult;uc.Z.trackEvent(t.target,{action:"Delete"},{search:(0,U.Z)({raw_query:n},o&&{input_query:o,search_source:"SuggestionHistory"},!o&&{search_source:"History"})}),e.props.onDelete(t,n)},e}var r=n.prototype;return r.componentDidMount=function(){var e=this.props,t=e.index,n=e.data,o=e.rawSearchResult;uc.Z.setModule(this.container,{module:"SearchHistoryItem",index:t}),pu(this.container,n,"history",o)},r.render=function(){var e=this,t=this.props,n=t.data,r=t.rawSearchResult;return(0,o.BX)("div",{ref:function(t){e.container=t},className:"SearchBar-historyItem",children:[(0,o.tZ)("span",{className:Jr()("SearchBar-historyItemContent",{blueFont:r}),children:lu(n,r)}),(0,o.BX)("div",{className:"SearchBar-historyIconWrapper SearchBar-historyDelete",children:[(0,o.tZ)("span",{className:"preventCloseOnTarget SearchBar-historyIconShade",onClick:function(t){return e.handleDelete(t,n)},role:"button",tabIndex:0,"aria-label":"删除",onMouseDown:function(e){return e.preventDefault()}}),(0,o.tZ)(su.HN,{width:18,height:18,fill:"#d3d3d3"})]})]})},n}(h.Component),vu=n(29512),Zu=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.componentDidMount=function(){uc.Z.trackCardShow(this.container,{name:"清空"})},r.render=function(){var e=this,t=this.props,n=t.label,r=t.onDelete;return(0,o.BX)("div",{role:"button",tabIndex:0,className:"SearchBar-label SearchBar-label--history","data-za-detail-view-path-module":fu("history",""),onMouseDown:function(e){return e.preventDefault()},children:[n,(0,o.BX)("div",{ref:function(t){e.container=t},className:"SearchBar-historyIconWrapper",children:[(0,o.tZ)("span",{role:"button",tabIndex:0,className:"SearchBar-historyIconShade preventCloseOnTarget",onClick:function(e){uc.Z.trackEvent(e.target,{action:"Click",name:"清空"}),r(e,null)}}),(0,o.tZ)(vu.R,{center:!0}),"清空"]})]})},n}(h.Component),gu=function(e){var t=e.handleReportShow;return(0,o.tZ)(o.HY,{children:(0,o.tZ)("div",{role:"button",tabIndex:0,className:"ReportsItem",onClick:function(e){e.stopPropagation(),t()},children:"举报"})})},Eu="search::top-search",Tu=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.componentDidMount=function(){var e=this.props,t=e.data,n=e.rawSearchResult;pu(this.container,t,"history",n)},r.render=function(){var e=this,t=this.props.rawSearchResult;return(0,o.BX)("div",{ref:function(t){e.container=t},className:"SearchBar-searchLink","data-za-detail-view-element_name":"ViewSeachResult",children:["查看「",t.length>12?"".concat(t.slice(0,12),"..."):t,"」的搜索结果"]})},n}(h.Component),Cu=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.componentDidMount=function(){var e=this.props,t=e.data,n=e.rawSearchResult,o=e.index;uc.Z.setModule(this.container,{module:"SearchSuggestionItem",index:o}),pu(this.container,t,"suggest",n)},r.render=function(){var e=this,t=this.props,n=t.data,r=t.rawSearchResult;return(0,o.tZ)("div",{ref:function(t){e.container=t},className:"SearchBar-defaultResult",children:lu(n,r)})},n}(h.Component),Au=n(80619),_u=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.componentDidMount=function(){var e=this.props,t=e.index,n=e.query;uc.Z.setModule(this.container,{module:"HotSearchWordItem",index:t}),pu(this.container,n,"topSearch","")},r.render=function(){var e=this,t=this.props,n=t.index,r=t.query;return(0,o.BX)("div",{className:"SearchBar-topSearchItem",ref:function(t){e.container=t},children:[r,n<3&&(0,o.tZ)(Au.ZP,{css:{marginLeft:5,fill:"#FA2925"},size:18})]},n)},n}(h.Component),yu=function(e,t){return e===t},Su=function(e){return e?"search::history_".concat(e):"search::history_guest"},Iu=function(e,t,n){var o=T().get(e)||[];return t?o.filter((function(e){var n=e.q;return function(e,t){return"string"==typeof t&&t.toLowerCase().startsWith(e.toLowerCase())}(t,n)})).slice(0,2).map((function(e){return e.q})):o.slice(0,n?10:5).map((function(e){return e.q}))},bu=function(e,t,n){var o=T().get(e)||[],i=o.findIndex((function(e){var n=e.q;return yu(n,t)})),a=[];return t&&(a=i>-1?(0,r.Z)(o.slice(0,i)).concat((0,r.Z)(o.slice(i+1))):o),T().set(e,a),a.slice(0,n?10:5).map((function(e){return e.q}))},wu=function(e){return function(t){return e(t).then((function(e){return e.payload.suggest.map((function(e){return{query:e.query,rawId:e.rawId}}))}))}},Ru=function(){var e=T().get(Eu)||{},t=e.words,n=e.timeStamp;return t&&"string"==typeof t[0]?(T().delete(Eu),null):t&&n&&(new Date).getTime()-Number(n)<6e5?t:null},Nu=function(e){return function(){return e().then((function(e){var t=(e&&e.payload&&e.payload.topSearch||{}).words,n=(void 0===t?[]:t).map((function(e){return{displayQuery:e.displayQuery,query:e.query}})).slice(0,5);return T().set(Eu,{words:n,timeStamp:(new Date).getTime()}),n}))}},Ou={topSearch:"搜索发现",history:"搜索历史"},Du=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={rawSearchResult:"",searchResults:{},presetWordsData:{query:""},completeTopSearchData:[],reportModalShown:!1},e.domRef=(0,h.createRef)(),e.componentWillUnmount=function(){document.removeEventListener("visibilitychange",e.visibleCallback)},e.visibleCallback=function(){!1===document.hidden&&e.handleUpdatePresetWords()},e.handleReportHide=function(){e.setState({reportModalShown:!1})},e.handleReportShow=function(){e.setState({reportModalShown:!0})},e.handleUpdatePresetWords=function(){var t=e.props.getPresetWords;cu(t).then((function(t){if(!t)return e.setState({presetWordsData:{query:$s}});uc.Z.trackCardShow((0,kc.Z)(e),{id:2403},{search:{raw_query:t.query}}),e.setState({presetWordsData:t})}))},e.getCurrentHistoryKey=function(){var t=(e.props.currentUser||{}).id;return Su(t)},e.getHistoryData=function(t){return Iu(e.getCurrentHistoryKey(),t)},e.handleChange=Me()((function(t){return void 0===t?null:t?e.handleInputHasValue(t):e.handleInputIsEmpty({rawSearchResult:t})}),300),e.handleInputHasValue=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=wu(e.props.getSuggestActionCreator),i=e.getHistoryData(t);o(t).then((function(o){e.updateAutoComplete({suggestData:Go()((0,r.Z)(uu(i,{type:"history",rawSearchResult:t})).concat((0,r.Z)(uu(o,{type:"suggest",rawSearchResult:t}))),(function(e,t){var n=e.data,o=t.data;return n.toLowerCase()===o.toLowerCase()}))},(0,U.Z)({rawSearchResult:t},n))}))},e.handleInputIsEmpty=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.props.loadTopSearchActionCreator,o=e.getHistoryData(),r=Ru(),i=Nu(n),a=function(n){e.setState({completeTopSearchData:n}),e.updateAutoComplete({topSearchData:n.map((function(e){return e.displayQuery})),historyData:o},t)};return r?a(r):i().then(a)},e.handleDeleteData=function(t,n){t.stopPropagation();var o=e.state,r=o.rawSearchResult,i=o.searchResults.suggest,a=void 0===i?[]:i,c=bu(e.getCurrentHistoryKey(),n);if(r){var s=a.filter((function(e){var t=e.type,o=e.data;return!("history"===t&&o===n)}));e.updateAutoComplete({suggestData:s})}else e.updateAutoComplete({historyData:c})},e.updateAutoComplete=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.state,r=o.searchResults,i=o.rawSearchResult,a=n||{},c=a.rawSearchResult,s=void 0===c?i:c,u=t.topSearchData,l=t.historyData,d=t.suggestData,p=void 0===d?[]:d;if(!s){var h=r.topSearch,f=void 0===h?[]:h,m=r.history,v=void 0===m?[]:m;return e.setState((0,U.Z)({searchResults:(0,U.Z)({},u?{topSearch:uu(u,{type:"topSearch",rawSearchResult:s})}:{topSearch:f},l?{history:uu(l,{type:"history",rawSearchResult:s})}:{history:v})},n))}var Z=uu([s],{type:"searchLink",rawSearchResult:s});return e.setState((0,U.Z)({searchResults:(0,U.Z)({suggest:p,searchLink:Z},p.length>0&&{reports:[{type:"reports"}]})},n))},e.handleSelect=function(t,n){var o=n.data,r=n.type,i=e.state.completeTopSearchData;hu(n),e.autoComplete.inputNode.blur();var a=o;if("topSearch"===r){var c=i.find((function(e){return e.displayQuery===o}))||{};a=c.query||o}var s=(0,U.Z)({q:a},"topSearch"===r&&{utm_content:"search_hot"},"history"===r&&{utm_content:"search_history"},"suggest"===r&&{utm_content:"search_suggestion"});window.open("//www.zhihu.com/search?".concat((0,q.stringify)(s)))},e.handleFocus=function(){var t=e.state.rawSearchResult,n={isFocus:!0};return t?e.handleInputHasValue(t,n):e.handleInputIsEmpty(n)},e.focusInput=function(t){t.preventDefault(),e.autoCompleteInput.closest(".AppHeader.is-hidden")?setTimeout((function(){return e.autoCompleteInput.focus()}),300):e.autoCompleteInput.focus()},e.handleSubmit=function(){var t=e.props.location.query.type,n=void 0===t?"content":t;if(e.autoComplete&&e.autoComplete.inputNode){var o=e.autoComplete.inputNode.value,r=n,i=o;if(!o){var a=e.state.presetWordsData||{},c=a.realQuery,s=a.type,u=a.id;if(!c||!s)return;r="general"===s?"content":s,i=c,nu(u)}var l=(0,U.Z)({type:r,q:i},!o&&{utm_content:"search_preset"});location.href="//".concat(C.Z.wwwHost,"/search?").concat((0,q.stringify)(l))}},e.renderItem=function(t){var n=t.type,r=t.data,i=t.index,a=t.rawSearchResult,c=null;switch(n){case"topSearch":c=(0,o.tZ)(_u,{index:i,query:r});break;case"history":var s=t.data;c=(0,o.tZ)(mu,{data:s,index:i,onDelete:e.handleDeleteData,rawSearchResult:a});break;case"searchLink":c=(0,o.tZ)(Tu,{index:i,data:r,rawSearchResult:a});break;case"suggest":c=(0,o.tZ)(Cu,{data:r,index:i,rawSearchResult:a});break;case"reports":c=(0,o.tZ)(gu,{handleReportShow:e.handleReportShow})}return c&&(0,o.tZ)("div",{"data-za-module":"TopNavBar",children:(0,o.tZ)("div",{"data-za-module":fu(n,a),children:c})})},e.renderAutoCompleteLabel=function(t){return"搜索历史"===t?(0,o.tZ)(Zu,{onDelete:e.handleDeleteData,label:t}):(0,o.tZ)("div",{onMouseDown:function(e){return e.preventDefault()},role:"button",tabIndex:0,className:"SearchBar-label",children:t})},e}var i=n.prototype;return i.componentDidMount=function(){var e=this.autoComplete.inputNode.value;e?this.setState({rawSearchResult:e}):this.handleUpdatePresetWords(),document.addEventListener("visibilitychange",this.visibleCallback)},i.render=function(){var e,t=this,n=this.state,r=n.searchResults,i=n.rawSearchResult,a=n.isFocus,c=n.presetWordsData,s=n.reportModalShown,u=this.props.location.query.q,l=this.props,d=l.className,p=l.theme,h=l.currentUser,f=p.searchInputColor,m=p.searchButtonColor,v=p.searchButtonBg,Z=p.searchButtonOpacity,g=p.searchAreaColor,E=p.searchBorder,T=p.searchBorderColor,C=p.searchPlaceHolderOpacity,A=p.searchInputOpacity,_=p.searchIconOpacity;return(0,o.BX)("div",{className:Jr()("SearchBar",d),role:"search","data-za-module":"PresetWordItem",ref:this.domRef,children:[(0,o.tZ)(Uc.yW,{input:"/",action:this.focusInput}),(0,o.tZ)("form",{className:Jr()("SearchBar-tool",{"SearchBar-tool--focus":a}),onSubmit:function(e){return e.preventDefault()},children:(0,o.tZ)(Qs,{autoSelect:!1,ref:function(e){return t.autoComplete=e},onRef:function(e){return t.autoCompleteInput=e},labels:Ou,groups:r,renderLabel:this.renderAutoCompleteLabel,value:u||"",renderItem:this.renderItem,inputProps:{type:"text",maxLength:100,grey:!0,placeholder:c&&c.query,className:Jr()("SearchBar-input",{"SearchBar-input--focus":a}),css:function(e){return(0,U.Z)((0,F.Z)((0,U.Z)({input:(0,U.Z)({},f&&{color:e.colors[f]})},g&&{backgroundColor:"".concat(e.colorMod(e.colors[g]).alpha(A)," !important")}),{borderColor:"".concat((0,_c.pe)(e)(T)," !important"),"input::placeholder":(0,U.Z)({},g&&{color:"".concat(e.colorMod(e.colors[g]).alpha(C)," !important")})}),(0,_c.W5)("background-color","border","color"))},after:(0,o.tZ)(fc.ZP,{className:"SearchBar-searchButton",preset:"primary",color:i?"blue":null,onClick:this.handleSubmit,"aria-label":"搜索",children:(0,o.tZ)(xc.J7,{size:18,center:!0,className:Jr()("SearchBar-searchIcon",{isFocus:a,hasValue:i}),css:function(e){return(0,U.Z)({color:e.colors[g],opacity:_,"&:hover":{opacity:1}},(0,_c.W5)("color"))}})})},menuProps:{menuClassName:Jr()("SearchBar-menu",{"SearchBar-hasValueMenu":i,"SearchBar-noValueMenu":!i}),menuContainerClassName:"SearchBar-menuContainer","data-za-module":"TopNavBar",positionStatus:"fixed",style:{width:null===(e=this.domRef.current)||void 0===e?void 0:e.getBoundingClientRect().width}},onFocus:this.handleFocus,onBlur:function(){setTimeout((function(){t.setState({isFocus:!1})}),100),t.autoComplete.menu.popover.close()},onSelect:this.handleSelect,onEnterInput:this.handleSubmit,onChange:this.handleChange})}),h&&!h.isOrg&&(0,o.tZ)(Ws,{children:(0,o.tZ)(fc.ZP,{className:Jr()("SearchBar-askButton",{"SearchBar-hiddenAskButton":a}),preset:"primary",color:"blue",onClick:function(){return uc.Z.trackEvent(t,{id:2581,action:"OpenUrl"})},css:function(e){return(0,U.Z)({backgroundColor:"".concat(e.colors[v]," !important"),color:"".concat(e.colors[m]," !important"),opacity:Z,border:"".concat(E," !important"),"&:hover":{opacity:1}},(0,_c.W5)("background-color","color"))},children:"提问"})}),(0,o.tZ)(Lc.y,{type:"search_suggested_word",shown:s,onClose:this.handleReportHide,zaEnabled:!0,List:r.suggest})]})},n}(h.Component),Bu=(0,Xe.compose)((0,js.Z)(null),I.withRouter,Ks.Z,(0,Re.connect)(null,{getPresetWords:function(){return{API:{endpoint:"search/preset_words",types:qo.GET_PRESET_WORDS,headers:{"X-API-Version":"3.0.91","X-App-Za":"OS=Web"}},NOTIFICATION:!1}},loadTopSearchActionCreator:jo,getSuggestActionCreator:Yo}))(Du),Pu=n(83329);function ku(e){return(0,o.tZ)(fc.ZP,(0,F.Z)((0,U.Z)({preset:"primary",className:"SimpleSearchBar-plainSearchButton"},e),{children:(0,o.tZ)(xc.J7,{center:!0,size:18})}))}function xu(e){return(0,o.tZ)(fc.ZP,(0,F.Z)((0,U.Z)({preset:"primary",className:"SimpleSearchBar-solidSearchButton",color:"blue",type:"submit"},e),{children:(0,o.tZ)(xc.J7,{center:!0,fill:"#fff",size:18})}))}var Lu=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={inputValue:e.props.initialValue},e.handleChange=function(t){e.setState({inputValue:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var n=e.state.inputValue,o=e.props.type;n&&(location.href="/search?type=".concat(encodeURIComponent(o),"&q=").concat(encodeURIComponent(n)))},e}return n.prototype.render=function(){var e,t=this.props,n=t.className,r=t.searchButtonType,i=this.state.inputValue;return"plain"===r?e=ku:"solid"===r&&(e=xu),(0,o.tZ)("form",{className:"SimpleSearchBar-wrapper",onSubmit:this.handleSubmit,children:(0,o.tZ)(Pu.Z,{className:Jr()("SimpleSearchBar-input",n),onChange:this.handleChange,value:i,placeholder:$s,after:e&&(0,o.tZ)(e,{onClick:this.handleSubmit})})})},n}(h.PureComponent);Lu.propTypes={className:ic().string,initialValue:ic().string.isRequired,type:ic().oneOf(["content","people","topic","column","km_general","live","album","publication","zvideo","scholar","km_course"]).isRequired,searchButtonType:ic().oneOf(["solid","plain"])},Lu.defaultProps={initialValue:"",type:"content",searchButtonType:"plain"};var Uu=n(83790),Fu=n(25043),Mu=n(50385),Gu=(0,h.forwardRef)((function(e,t){var n=e.Icon,r=e.count,i=e.name,a=e.theme,c=(0,K.Z)(e,["Icon","count","name","theme"]),s=(0,_c.ZP)(),u=s.bgColor,l=s.icon,d=s.iconOpacity,p=s.themeTransition;return(0,o.BX)(fc.ZP,(0,F.Z)((0,U.Z)({ref:t,preset:"plain",css:{position:"relative"}},c),{children:[(0,o.tZ)(n,{size:18,center:!0,css:function(e){return(0,U.Z)({color:e.colors[l],opacity:d,"&:hover":{opacity:1}},p("color","opacity"))}}),r>0&&(0,o.BX)(sc.Box,{color:"GBK99B",bg:"GRD03A",px:"4px",css:function(e){return{position:"absolute",bottom:"65%",left:"42%",fontSize:11,borderRadius:20,border:"2px solid",transform:"scale(0.8)",borderColor:(0,_c.pe)(e)(u)}},children:[Math.min(r,99),r>99&&"+"]}),i&&(0,o.tZ)(sc.Box,{fontSize:"12px",lineHeight:"14px",css:function(e){return a&&(0,U.Z)({color:"".concat(e.colors[null==a?void 0:a.navColor]," !important"),opacity:null==a?void 0:a.navOpacity,"&.is-active, &:hover":{opacity:1},"&.is-active::after":{backgroundColor:"".concat(e.colors[null==a?void 0:a.navActiveColor]," !important")}},p("color"))},children:i})]}))})),zu=Gu,Hu=(0,h.forwardRef)((function(e,t){return(0,o.tZ)(zu,(0,U.Z)({ref:t,Icon:Mu.Z,name:"创作中心"},e))})),qu=(0,I.withRouter)((function(e){var t=e.location.pathname,n=(0,K.Z)(e,["location"]),r="/creator"===t||"/creator/"===t;return(0,o.tZ)(o.HY,{children:r?null:(0,o.tZ)(Ne.Wi,{zaType:"Button",zaText:"创作中心入口",zaBlock:"AppHeader-CreatorEntrance",children:(0,o.tZ)(Ne.$U,{zaBlock:"AppHeader-CreatorEntranceClick",zaType:"Button",zaText:"创作中心",zaAction:"OpenUrl",as:sc.Link,target:"_blank",href:"https://".concat(C.Z.wwwHost,"/creator"),css:{display:"inline-block",marginRight:"24px",marginTop:"2px"},children:(0,o.tZ)(Hu,(0,U.Z)({},n))})})})})),Vu=n(8567),Xu=n(24066),Wu=(0,h.forwardRef)((function(e,t){return(0,o.tZ)(zu,(0,U.Z)({ref:t,Icon:Xu.d,name:"私信",theme:e.theme},e))})),Ku=function(e){var t=e.className,r=(0,K.Z)(e,["className"]),i=(0,Vu.Z)((function(){return Promise.all([n.e(4667),n.e(3786)]).then(n.bind(n,69181))}));return i?(0,o.tZ)(i,(0,U.Z)({IconButton:Wu,className:t},r)):(0,o.tZ)(Wu,(0,U.Z)({className:t},r))};function ju(e){var t=e.theme,n=e.url,r=e.isActive,i=e.children,a=(0,K.Z)(e,["theme","url","isActive","children"]);return(0,o.tZ)(hc.O,{className:"AppHeader-Tab",children:(0,o.tZ)("a",(0,F.Z)((0,U.Z)({className:Jr()("AppHeader-TabsLink",{"is-active":r}),tabIndex:0,"data-za-not-track-link":!0,css:function(e){return(0,U.Z)({color:"".concat(e.colors[t.navColor]," !important"),opacity:t.navOpacity,"&.is-active, &:hover":{opacity:1},"&.is-active::after":{backgroundColor:"".concat(e.colors[t.navActiveColor]," !important")}},(0,_c.W5)("color"))},href:n},a),{children:i}))})}var Yu=n(99285),Qu=(0,h.forwardRef)((function(e,t){return(0,o.tZ)(zu,(0,U.Z)({ref:t,Icon:Yu.r,name:"消息"},e))})),Ju=function(e){var t=e.className,r=(0,K.Z)(e,["className"]),i=(0,Vu.Z)((function(){return n.e(358).then(n.bind(n,81333))}));return i?(0,o.tZ)(i,(0,U.Z)({IconButton:Qu,className:t},r)):(0,o.tZ)(Qu,(0,U.Z)({className:t},r))},$u=n(6081),el=99,tl={};var nl=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={signFlowModalShown:!1},e.getPathname=function(){return e.props.pathname||e.props.location.pathname},e.isInTopstory=function(){var t=e.getPathname(),n=(new Bc).TABS_TABLE.map((function(e){return e.path}));return n.push(Ic),n.includes(t)||t.startsWith("/room")},e.getMsgNoteTitle=function(){var t=e.props,n=t.notificationsCount,o=t.messageCount;if(t.isMobile)return"";var r=[],i="".concat(el,"+");o&&r.push("".concat(o>el?i:o," 封私信"));var a=Object.keys(n).reduce((function(e,t){return e+n[t]}),0);return a&&r.push("".concat(a>el?i:a," 条消息")),r.length?"(".concat(r.join(" / "),") "):""},e.handleAuth=e.props.authRequired((function(){return{}})),e.createNavClickHandler=function(e){return function(t){uc.Z.trackEvent(t.target,{action:"OpenUrl",id:2730},{button:{text:{home:"首页",learning:"知学堂",explore:"发现",topic:"话题",quesetionWaiting:"等你来答"}[e]}})}},e}var r=n.prototype;return r.componentDidMount=function(){var e=this.getPathname(),t=this.props,n=t.currentUser,o=t.fillCurrentUserIfNeeded,r=t.referer;if(n&&"guest"!==n.userType){o(["availableMessageTypes","defaultNotificationsCount","followNotificationsCount","voteThankNotificationsCount","messagesCount"]);var i=this.props,a=i.handleNewPushNotifications,c=i.handleReceiveMessages;(0,Cc.Z)([{name:"zhihu/notification/badge/web/v1/".concat(n.id,"/"),onMessage:a},{name:"zhihu/message/web/v1/user/".concat(n.id,"/"),onMessage:c}])}else r&&(r.startsWith("https://www.zhihu.com")||r.startsWith("https://zhuanlan.zhihu.com"))&&e.startsWith("/p/")&&this.setState({signFlowModalShown:!0})},r.renderNotification=function(){var e=this.props,t=e.notification,n=e.account,r=n.isAppealed,i=n.spamLevel,a=r||i?A.Wy:A.If,c=null;return c=6===i?(0,F.Z)((0,U.Z)({},t),{theme:"red"}):t,(0,o.tZ)(dc.Z,{notification:c,delay:a,className:"AppHeader-notification",css:t.css})},r.handleSignFlowModalClose=function(){this.setState({signFlowModalShown:!1})},r.renderUserInfo=function(){var e=this.props,t=e.currentUser,n=e.ua,r=e.currentUserIsCreator,i=e.appHeaderTheme;return(0,o.BX)("div",{className:"AppHeader-userInfo",children:[t&&(0,o.BX)(o.HY,{children:[(0,o.tZ)(Ju,{theme:i,className:"AppHeader-notifications"}),(0,o.tZ)(Ku,{theme:i,className:"AppHeader-messages"})]}),r&&(0,o.tZ)(qu,{theme:i}),(0,o.tZ)(we.ql,{titleTemplate:n.Zhihu?"".concat(this.getMsgNoteTitle(),"%s"):"".concat(this.getMsgNoteTitle(),"%s - 知乎")}),!t&&(0,o.tZ)("div",{children:(0,o.tZ)(Fu.Z,{})}),(0,o.tZ)("div",{className:"AppHeader-profile",children:(0,o.tZ)(Tc.Z,{currentUser:t,enableGuidesForLogin:!0})})]})},r.render=function(){var e=this,t=this.getPathname(),n=this.state.signFlowModalShown,r=this.props,i=r.currentUser,a=r.outlet,c=r.inletProps,s=r.headerTitle,u=r.appHeaderTheme,l=!t.startsWith("/creator")&&!t.startsWith("/mcn");return t.startsWith("/organization/enter")?(0,o.BX)(o.HY,{children:[(0,o.tZ)(Ec,{}),(0,o.tZ)(Uu.Z,{children:this.renderNotification()})]}):(0,o.tZ)(pc.Z,{getStyle:function(){return{width:"100%",top:0}},children:(0,o.BX)("header",{role:"banner",className:Jr()("AppHeader",{"is-hidden":c.shown}),"data-za-module":"TopNavBar",css:function(e){return(0,U.Z)({backgroundColor:(0,_c.pe)(e)(u.bgColor),boxShadow:u.boxShadow},(0,_c.W5)("background-color","box-shadow"))},children:[n&&(!i||"guest"===i.userType)&&(0,o.tZ)(Pc.Vy,{defaultType:"login",onClose:function(){e.handleSignFlowModalClose()}}),(0,o.tZ)(Uu.Z,{children:this.renderNotification()}),(0,o.BX)("div",{className:"AppHeader-inner",css:function(e){return l&&{width:"auto",maxWidth:1156,minWidth:1e3,paddingLeft:16,paddingRight:55,".AppHeader-userInfo":{marginLeft:30,width:"auto"},".AppHeader-TabsLink.is-active, .AppHeader-TabsLink:hover":{color:e.colors.GBK02A}}},children:[(0,o.tZ)($u.Z,{color:u.logo}),s?(0,o.tZ)(sc.Text,{color:u.headerTitle,fontSize:"18px",ml:"16px",flex:"1",children:s}):(0,o.BX)(o.HY,{children:[(0,o.BX)(hc.Z,{className:"AppHeader-Tabs",css:l&&{marginLeft:25,marginRight:15,".AppHeader-Tab":{paddingLeft:15,paddingRight:15},".Tabs-link.is-active::after":{height:4}},children:[i&&i.isOrg&&(0,o.BX)(o.HY,{children:[(0,o.tZ)(hc.O,{className:"AppHeader-Tab",children:(0,o.tZ)("a",{tabIndex:0,className:Jr()("AppHeader-TabsLink",{"is-active":"/organization"===t||t.startsWith("/organization/question")}),href:"".concat(A.i7,"/organization"),children:"管理中心"})}),(0,o.tZ)("div",{className:"AppHeader-navDivider"})]}),(0,o.tZ)(ju,{theme:u,isActive:this.isInTopstory(),url:"".concat(A.i7).concat(i&&i.isOrg?"/index":"/"),onClick:this.createNavClickHandler("home"),children:"首页"}),(0,o.tZ)(ju,{theme:u,isActive:"/education/learning"===t,url:"".concat(A.i7,"/education/learning"),onClick:this.createNavClickHandler("learning"),children:"知学堂"}),(0,o.tZ)(ju,{theme:u,isActive:"/xen/vip-web"===t,url:"".concat(A.i7,"/xen/vip-web"),onClick:this.createNavClickHandler("vip"),children:"会员"}),(0,o.tZ)(ju,{theme:u,isActive:"/explore"===t,url:"".concat(A.i7,"/explore"),onClick:this.createNavClickHandler("explore"),children:"发现"}),(0,o.tZ)(ju,{theme:u,isActive:t.startsWith("/question/waiting"),url:"".concat(A.i7,"/question/waiting"),onClick:this.createNavClickHandler("quesetionWaiting"),children:"等你来答"})]}),(0,o.tZ)(sc.Flex,{flex:"1",justifyContent:"center",children:(0,o.tZ)(Bu,{theme:u,className:"AppHeader-SearchBar",currentUser:i,css:l&&{maxWidth:482,".SearchBar-input":{borderRadius:999,paddingLeft:16},".SearchBar-askButton":{borderRadius:999,width:70,marginLeft:12},".SearchBar-searchButton":{borderBottomRightRadius:999,borderTopRightRadius:999}}})})]}),this.renderUserInfo()]}),a]})})},n}(h.PureComponent),ol=(0,Xe.compose)(I.withRouter,Ac.Z,(0,Re.connect)((function(e,t){var n=e.account,o=e.env,r=t.inletProps.shown||o.appHeaderTheme.disable?"normal":"custom";return{messageCount:e.messages.messageCount,notificationsCount:e.pushNotifications.notificationsCount,account:n,notification:(0,jt._X)(e)||tl,ua:e.env.userAgent,isMobile:(0,de.Hu)(e),referer:(0,de.Kv)(e),appHeaderTheme:(0,U.Z)({type:r,bgColor:o.appHeaderTheme[r].bgColor},_c.mv[r]),currentUserIsCreator:e.switches.isCreator,creatorNotification:e.creator.applyStatus.notification||{}}}),{handleNewPushNotifications:Ro.F7,handleReceiveMessages:Zo.nB,fillCurrentUserIfNeeded:le.sF}))(nl),rl=function(e){return(0,o.tZ)(ol,(0,U.Z)({outlet:(0,o.tZ)(lc.Z.Outlet,{}),inletProps:lc.Z.useInletProps()},e))},il=h.memo(rl),al=n(74621),cl=n(23323),sl=n(47859),ul=n(60111);function ll(e){var t=e.onClose,n=e.shown,r=void 0!==n&&n,i=e.delay,a=void 0===i?300:i,c=(0,ye.n)(),s=(0,Re.useSelector)((function(e){return(0,le.ib)(e)})),u=(0,Ae.Z)((0,cl.Z)(r),2),l=u[0],d=u[1],p=(0,sl.Z)((function(){var e=d.off;a?setTimeout(e,a):e(),null==t||t()})),f=(0,sl.Z)((function(){return d.toggle()}));(0,h.useEffect)((function(){r!==l&&f()}),[r,l,f]);var m=(0,Ae.Z)((0,h.useState)("register"),2),v=m[0],Z=m[1];return(0,ul.Z)((function(){!s&&(0,Pc.gl)()&&Z("login")})),l?C.Z.isMobileEntry?(0,o.tZ)(Pc.uq,{onClose:p}):c.Zhihu?(0,o.tZ)(Pc.uq,{isAppView:!0,onClose:p}):(0,o.tZ)(Pc.Vy,{defaultType:v,onClose:p}):null}function dl(e){return(0,mc.n)()?null:(0,o.tZ)(ll,(0,U.Z)({},e))}var pl=n(59591),hl=n(53436),fl=n(43124),ml=n(70865),vl=n(1168),Zl=n(99934),gl=function(){var e=(0,Ae.Z)((0,cl.Z)(),2),t=e[0],n=e[1],r=(0,Re.useSelector)((function(e){return e.loading.global.count}));return(0,h.useEffect)((function(){r?n.on():n.off()}),[n,r]),(0,o.tZ)(Zl.Z,{active:t})},El=n.p+"assets/apple-touch-icon-152.81060cab.png",Tl=n.p+"assets/apple-touch-icon-120.d5793cac.png",Cl=n.p+"assets/apple-touch-icon-76.7abf3393.png",Al=n.p+"assets/apple-touch-icon-60.362a8eac.png",_l=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props.ua,t=[{rel:"apple-touch-icon",href:El},{rel:"apple-touch-icon",href:El,sizes:"152x152"},{rel:"apple-touch-icon",href:Tl,sizes:"120x120"},{rel:"apple-touch-icon",href:Cl,sizes:"76x76"},{rel:"apple-touch-icon",href:Al,sizes:"60x60"}];return(0,o.tZ)(we.ql,{title:"知乎",titleTemplate:e.Zhihu?"%s":"%s - 知乎",link:t})},n}(h.Component),yl=(0,Re.connect)((function(e){return{ua:e.env.userAgent}}))(_l),Sl=n(67849);function Il(e){(0,hl.yZ)(window,{behavior:"smooth",top:window.innerHeight/2*(e?1:-1)})}function bl(e){(0,hl.zT)(document.body,{behavior:"smooth",block:e})}var wl=function(){(0,Sl.n)("shift+u",(function(){return Il(!1)})),(0,Sl.n)("shift+d",(function(){return Il(!0)})),(0,Sl.n)("g g",(function(){return bl("start")})),(0,Sl.n)("shift+g",(function(){return bl("end")}))};function Rl(){return wl(),(0,o.tZ)(o.HY,{children:!1})}var Nl=function(e){var t=e.keyMap,n=t.key,r=t.hint,i=n.split(/[ +]/),a=n.includes("+")?"+":" ";return(0,o.BX)("div",{className:"KeyHint",children:[(0,o.tZ)("div",{className:"KeyHint-keyContainer",children:i.map((function(e,t){return(0,o.BX)("div",{className:"KeyHint-key",children:[(0,o.tZ)("kbd",{className:"KeyHint-kbd",children:e}),t<i.length-1&&(0,o.tZ)("div",{className:Jr()("KeyHint-separator",{"KeyHint-separator--space":" "===a}),children:a})]},t)}))}),(0,o.BX)("div",{children:["：",r]})]})},Ol=[["操作",[{key:"V",hint:"赞同"},{key:"D",hint:"反对"},{key:"L",hint:"喜欢"},{key:"C",hint:"展开 / 收起评论"},{key:"O",hint:"展开 / 收起全文"},{key:"F",hint:"收藏"},{key:"S",hint:"分享"}]],["导航",[{key:"J",hint:"主内容下一项"},{key:"K",hint:"主内容上一项"},{key:"G G",hint:"滚动到页面顶部"},{key:"Shift+G",hint:"滚动到页面底部"},{key:"Shift+U",hint:"向上滚动半屏"},{key:"Shift+D",hint:"向下滚动半屏"},{key:"Shift+S",hint:"侧边栏第一项"},{key:"/",hint:"搜索"},{key:"?",hint:"快捷键帮助"}]]],Dl=function(){var e=(0,Ae.Z)((0,cl.Z)(),2),t=e[0],n=e[1];return(0,o.BX)(o.HY,{children:[(0,o.tZ)(Sl.y,{input:"?",action:n.toggle}),(0,o.tZ)(Sl.y,{input:"？",action:n.toggle}),(0,o.tZ)(Ms.Z,{className:"ShortcutHintModal",title:"快捷键帮助",onClose:n.off,children:t&&(0,o.tZ)("div",{className:"ShortcutHintModal-content",children:(0,o.tZ)("div",{className:"ShortcutHintModal-hintListContainer",children:Ol.map((function(e){var t=(0,Ae.Z)(e,2),n=t[0],r=t[1];return(0,o.BX)("div",{className:"ShortcutHintModal-hintList",children:[(0,o.tZ)("div",{className:"ShortcutHintModal-hintTitle",children:n}),r.map((function(e){return(0,o.tZ)(Nl,{keyMap:e},e.key)}))]},n)}))})})})]})},Bl=n(87676),Pl=function(e,t){if(e.closest)return e.closest(t);do{if(e.matches(t))break;e=e.parentElement}while(e);return e},kl=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.call(this)).state={show:!1},e.onGlobalMouseover=e.handleGlobalMouseover.bind((0,kc.Z)(e)),e.onCancelEvent=e.handleCancelEvent.bind((0,kc.Z)(e)),e}var r=n.prototype;return r.componentDidMount=function(){document.body.addEventListener("mouseover",this.onGlobalMouseover),window.addEventListener("scroll",this.onCancelEvent),window.addEventListener("resize",this.onCancelEvent)},r.componentWillUnmount=function(){document.body.removeEventListener("mouseover",this.onGlobalMouseover),window.removeEventListener("scroll",this.onCancelEvent),window.removeEventListener("resize",this.onCancelEvent)},r.handleGlobalMouseover=function(e){var t=this;clearTimeout(this.showTimeout),clearTimeout(this.hideTimeout);var n=Pl(e.target,"[data-tooltip]");n&&!n.disabled?this.showTimeout=setTimeout((function(){var e,o,r=n.getAttribute("data-tooltip-position")||"top",i=n.getAttribute("data-tooltip"),a=n.getAttribute("data-tooltip-classname"),c=n.getAttribute("data-tooltip-preset")||"black",s=null!==n.getAttribute("data-tooltip-will-hide-on-click"),u=n.getBoundingClientRect(),l=u.left,d=u.right,p=u.top,h=u.bottom;switch(r){case"left":e=l-4,o=(p+h)/2;break;case"right":e=d+4,o=(p+h)/2;break;case"bottom":e=(l+d)/2,o=h+4;break;default:e=(l+d)/2,o=p-4}t.setState({show:!0,content:i,position:r,className:a,preset:c,willHideOnClick:s,x:Math.round(e),y:Math.round(o)})}),100):this.state.show&&(this.hideTimeout=setTimeout((function(){Pl(e.target,".GlobalTooltip")||t.setState({show:!1})}),120))},r.handleCancelEvent=function(){clearTimeout(this.showTimeout),clearTimeout(this.hideTimeout),this.state.show&&this.setState({show:!1})},r.render=function(){var e=this.state,t=e.show,n=e.content,r=e.position,i=e.preset,a=e.restricted,c=e.className,s=e.contentClassName,u=e.contentChildrenClassName,l=e.x,d=e.y;return(0,o.tZ)(Bl.Z,{className:Jr()("GlobalTooltip",c),contentClassName:s,contentChildrenClassName:u,shown:t,content:n,position:r,preset:i,restricted:a,x:l,y:d})},n}(h.Component),xl=kl,Ll=function(e){var t=e.whitelist,n=void 0===t?["/term","/terms","/unregister"]:t,o=e.currentUrlPath,r=(0,mc.Z)(["isDestroyWaiting"]),i=(0,sl.Z)((function(){(null==n?void 0:n.some((function(e){return o.startsWith(e)})))||(window.location.href="".concat(C.Z.protocol,"//").concat(C.Z.wwwHost,"/unregister?version=2&is_waiting_page=1"))}));return(0,h.useEffect)((function(){(null==r?void 0:r.isDestroyWaiting)&&i()}),[r,i]),null},Ul=n(42931);function Fl(){var e=(0,qe.Z)(),t=(0,Ul.Z)();return(0,ul.Z)((function(){t&&(window.__ZHToolkit__={fetch:e})})),null}var Ml=function(e){var t=e.location;return(0,Ne._E)(t),null},Gl=function(e){var t=e.location;return(0,Ne.DI)(t),null};var zl=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.componentDidMount=function(){var e=this.props,t=e.silent,n=e.fillCurrentUserIfNeeded,o=e.location.pathname;t||(console.log("\n          _____                    _____                    _____                    _____          \n         /\\    \\                  /\\    \\                  /\\    \\                  /\\    \\         \n        /::\\____\\                /::\\    \\                /::\\    \\                /::\\    \\        \n       /:::/    /                \\:::\\    \\              /::::\\    \\              /::::\\    \\       \n      /:::/    /                  \\:::\\    \\            /::::::\\    \\            /::::::\\    \\      \n     /:::/    /                    \\:::\\    \\          /:::/\\:::\\    \\          /:::/\\:::\\    \\     \n    /:::/____/                      \\:::\\    \\        /:::/__\\:::\\    \\        /:::/__\\:::\\    \\    \n   /::::\\    \\                      /::::\\    \\      /::::\\   \\:::\\    \\      /::::\\   \\:::\\    \\   \n  /::::::\\    \\   _____    ____    /::::::\\    \\    /::::::\\   \\:::\\    \\    /::::::\\   \\:::\\    \\  \n /:::/\\:::\\    \\ /\\    \\  /\\   \\  /:::/\\:::\\    \\  /:::/\\:::\\   \\:::\\____\\  /:::/\\:::\\   \\:::\\    \\ \n/:::/  \\:::\\    /::\\____\\/::\\   \\/:::/  \\:::\\____\\/:::/  \\:::\\   \\:::|    |/:::/__\\:::\\   \\:::\\____\\\n\\::/    \\:::\\  /:::/    /\\:::\\  /:::/    \\::/    /\\::/   |::::\\  /:::|____|\\:::\\   \\:::\\   \\::/    /\n \\/____/ \\:::\\/:::/    /  \\:::\\/:::/    / \\/____/  \\/____|:::::\\/:::/    /  \\:::\\   \\:::\\   \\/____/ \n          \\::::::/    /    \\::::::/    /                 |:::::::::/    /    \\:::\\   \\:::\\    \\     \n           \\::::/    /      \\::::/____/                  |::|\\::::/    /      \\:::\\   \\:::\\____\\    \n           /:::/    /        \\:::\\    \\                  |::| \\::/____/        \\:::\\   \\::/    /    \n          /:::/    /          \\:::\\    \\                 |::|  ~|               \\:::\\   \\/____/     \n         /:::/    /            \\:::\\    \\                |::|   |                \\:::\\    \\         \n        /:::/    /              \\:::\\____\\               \\::|   |                 \\:::\\____\\        \n        \\::/    /                \\::/    /                \\:|   |                  \\::/    /        \n         \\/____/                  \\/____/                  \\|___|                   \\/____/         \n\n知乎(zhihu.com)，招聘前端开发工程师 http://zhi.hu/BDXoD\n    "),o.match(/\/story\/\d+$/)||o.match(/\/authorize$/)||n(["email","accountStatus","isBindPhone"]))},r.render=function(){var e=this.props,t=e.className,n=e.location,r=e.userAgent,i=e.disableMainHelmet,a=e.disableCornerButtons,c=void 0!==a&&a;return(0,o.BX)("div",{className:t,children:[!i&&(0,o.tZ)(yl,{}),r.Wechat&&(0,o.tZ)(cc.J,{}),!r.Zhihu&&(0,o.tZ)(gl,{}),(0,o.tZ)(Ml,{location:n}),(0,o.tZ)(Gl,{location:n}),(0,o.tZ)(fl.z,{}),this.props.children,(0,o.tZ)(ml.Z,{}),(0,o.tZ)(xl,{}),(0,o.tZ)(pl.Z,{style:{display:"none"},children:(0,o.tZ)("i",{children:"想来知乎工作？请发送邮件到 jobs@zhihu.com"})}),!c&&!r.Mobile&&(0,o.tZ)(Uu.Z,{children:(0,o.tZ)("div",{role:"complementary",children:(0,o.tZ)(vl.ZP,{children:(0,o.tZ)(vl.zV,{onClick:function(e){e.preventDefault(),(0,hl.X5)(window,{top:0,behavior:"smooth"})}})})})}),(0,o.tZ)(Uu.Z,{children:(0,o.tZ)(Ll,{currentUrlPath:n.pathname})}),(0,o.tZ)(Dl,{}),(0,o.tZ)(Rl,{}),(0,o.tZ)(Fl,{})]})},n}(h.Component),Hl=(0,Xe.compose)((0,Re.connect)((function(e){var t="/launcher"===e.env.ctx.path;return{currentUser:(0,le.ib)(e),account:e.account,userAgent:e.env.userAgent,disableMainHelmet:t,ua:(0,de.Uh)(e)}}),{fillCurrentUserIfNeeded:le.sF}),I.withRouter)(zl),ql=(0,Re.connect)((function(e){return{notification:(0,jt._X)(e)}}))((function(e){var t,n=e.notification,r=(0,o.tZ)(dc.Z,{notification:n,delay:A.If});if(!(null==n||null===(t=n.zaProps)||void 0===t?void 0:t.shouldTrackShow))return r;var i=n.zaProps,a=i.zaText,c=i.zaBlock,s=i.key;return(0,o.tZ)(Ne.Wi,{zaType:"Text",zaText:a||n.text,zaBlock:c,children:r},s)})),Vl=n(20829);var Xl=n(37314),Wl=n(82706);function Kl(){return"undefined"==typeof document?null:document.querySelector(".VerificationDialogModalHeader")}var jl=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={authModalShown:!1,bindPhoneModalShown:!1,signInModalShown:!1},e.handleAuthModalClose=function(){return e.setState({authModalShown:!1})},e.closeModal=function(){var t=e.props.recoverDefaultType;ac.c.close(),t()},e.handleInitAccount=function(t){var n=t||e.props,o=n.currentUser,r=n.account,i=n.getUnblockInfo;o&&o.accountStatus&&o.accountStatus.find((function(e){return"lock"===e.name}))&&!r.isUnblockInfoFetched&&i()},e.handleBindPhoneModalToggle=function(){e.setState((function(e){return{bindPhoneModalShown:!e.bindPhoneModalShown}}))},e.handleToggleSignInModalShown=function(){e.setState({signInModalShown:!e.state.signInModalShown})},e.handleLogin=function(){e.props.userAgent.Wechat?e.handleToggleSignInModalShown():location.href="https://www.zhihu.com/signin?next=".concat(encodeURIComponent(location.href))},e}var i=n.prototype;return i.getChildContext=function(){var e=this,t=this.props,n=t.isMobile,o=t.showNotification;return{currentUser:this.props.currentUser,isMobile:n,authRequired:(0,Xl.es)((function(){return e.props.currentUser}),A.xR,(function(){return e.props.account}),(function(){return n?(0,Wl.ZP)():e.setState({authModalShown:!0})}),(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.apply(void 0,[e,"white"].concat((0,r.Z)(n)))}),this.handleBindPhoneModalToggle),handleBindPhoneModalToggle:this.handleBindPhoneModalToggle}},i.UNSAFE_componentWillReceiveProps=function(e){var t=e.account,n=e.currentUser,o=e.getUnlockRequest,r=t.errorStatus;if(!t.isFetching){var i=Kl();r&&!i&&n&&"guest"!==n.userType&&o()}},i.componentDidMount=function(){var e=this.props.edition;if(T().isSupported()){var t=Object.keys(e).find((function(t){return Boolean(e[t])}));t&&window.sessionStorage.setItem("utm_source",t)}},i.componentDidUpdate=function(e){var t=this.props,n=t.requestUnlockTicket,r=t.unlockTicketByDigits,i=t.unlockTicketByPassword,a=t.account,c=a.unlockTicketStatus,s=a.isFetching,u=a.errorStatus,l=a.challenge;!s&&u&&l&&l.length&&(Kl()||ac.c.show((0,o.tZ)(ac.c,{account:a,unlockTicketByDigits:r,requestUnlockTicket:n,unlockTicketByPassword:i,onClose:this.closeModal})));c&&ac.c.close(),e.currentUser&&this.props.currentUser&&(!e.currentUser.accountStatus&&this.props.currentUser.accountStatus&&this.handleInitAccount(),void 0===e.currentUser.isBindPhone&&void 0!==this.props.currentUser.isBindPhone&&this.unlockRequestIfNeed())},i.componentWillUnmount=function(){(0,this.props.recoverDefaultType)()},i.unlockRequestIfNeed=function(){var e=this.props,t=e.currentUser,n=e.getUnlockRequest;t&&!1===t.isBindPhone&&"guest"!==t.userType&&n()},i.renderAppHeader=function(){var e=this.props,t=e.currentUser,n=e.isMobile,r=e.isZhihu,i=e.itemInfo,a=e.routes.some((function(e){return e.showAppHeader}));return!1===a||r?null:n?(0,o.tZ)(al.Z,{currentUser:t,onLogin:this.handleLogin,tag:"div",itemInfo:i}):a?(0,o.tZ)(il,{currentUser:t}):null},i.render=function(){var e=this.props,t=e.currentUser,n=e.userAgent,r=e.children,i=this.state,a=i.authModalShown,c=i.bindPhoneModalShown,s=i.signInModalShown;return(0,o.BX)(Hl,{className:"App",children:[n.Wechat&&(0,o.tZ)(cc.J,{}),this.renderAppHeader(),(0,o.tZ)(ql,{}),(0,o.tZ)("main",{role:"main",className:"App-main",children:r}),(0,o.tZ)(dl,{shown:a,onClose:this.handleAuthModalClose}),t&&!1===t.isBindPhone&&(0,o.tZ)(Pc.t,{onToggle:this.handleBindPhoneModalToggle,shown:c}),(0,o.tZ)(xe.w,{}),s&&(0,o.tZ)(Vl.Z,{buttons:[{name:"zhihu",text:"使用知乎帐号登录",fill:"#0f88eb",color:"#fff"},{name:"wechat",text:(0,o.BX)("span",{children:[(0,o.tZ)(oc.F3,{text:!0,center:!0})," 微信快速登录"]}),fill:"#12b370",color:"#fff"}],onClose:this.handleLogin})]})},n}(h.Component);jl.fetchData=function(e){return(0,e.dispatch)((0,de.ph)())},jl.childContextTypes={currentUser:ic().object,authRequired:ic().func,handleBindPhoneModalToggle:ic().func,isMobile:ic().bool};var Yl=(0,Re.connect)((function(e,t){var n,o,r=e.env,i=r.userAgent,a=r.ab,c=r.trafficSource,s=(0,de.Hu)(e),u=(n=t.location.pathname,"p"===(o=n.split("/").slice(1))[0]?{type:"article",id:Number(o[1])}:"answer"===o[2]?{type:"answer",id:Number(o[3])}:"question"===o[0]?{type:"question",id:Number(o[1])}:"topic"===o[0]?{type:"topic",id:Number(o[1])}:null);return u&&(u.readStatus=(0,Oo.O8)(e,u)),{ab:a,trafficSource:c,currentUser:(0,le.ib)(e),account:e.account,userAgent:i,isMobile:s,isZhihu:(0,de.nR)(e),itemInfo:u||void 0,edition:(0,de.cM)(e)}}),{showNotification:jt.c0,unlockTicketByDigits:Qe.LC,getUnblockInfo:Qe.sQ,unlockTicketByPassword:Qe.Hr,getUnlockRequest:Qe.F4,requestUnlockTicket:Qe.MM,recoverDefaultType:Qe.Z3})(jl),Ql=n(89764),Jl=n(61869),$l=n(51339),ed=n(15706),td=n(28074),nd=n(40325),od=n(11116),rd=function(e){var t=e.icon,n=cd(e.isMobile),r=n.iconMarginRight,i=n.lineHeight,a=n.iconSize;return(0,o.tZ)(sc.Flex,{mr:"".concat(r,"px"),height:i,alignItems:"center",flexShrink:0,children:"string"==typeof t?(0,o.tZ)(sc.Box,{sx:{width:"".concat(a,"px"),height:"".concat(a,"px"),background:"url(".concat(t,") no-repeat"),backgroundSize:"100% 100%"}}):t})},id=function(e){var t=e.desc,n=e.isMobile,r="string"==typeof t?(0,o.tZ)("span",{className:"desc-content",dangerouslySetInnerHTML:{__html:t}}):t,i=cd(n),a=i.fontSize,c=i.fontNumLimit,s=i.anchorColor;return(0,o.tZ)(sc.Box,{css:function(e){return(0,F.Z)((0,U.Z)({color:e.colors.GBK02A},(0,od.S)(2),!n&&{maxWidth:"".concat(a*c,"px")}),{a:{color:"".concat(e.colors[s]," !important")},".desc-content":{a:{margin:"0 10px"}}})},children:r})};function ad(e){var t=e.desc,n=e.icon,r=e.isMobile,i=cd(r),a=i.fontSize,c=i.lineHeight;return(0,o.BX)(sc.Flex,{sx:{":not(:last-of-type)":{marginBottom:"8px"},fontSize:a,lineHeight:"".concat(c,"px"),alignItems:"flex-start"},children:[(0,o.tZ)(rd,{isMobile:r,icon:n}),(0,o.tZ)(id,{desc:t})]})}function cd(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{parentPadding:16,fontSize:15,lineHeight:e?21:24,fontNumLimit:48,iconSize:16,iconMarginRight:e?8:12,anchorColor:e?"GBL01A":"GBL07A"}}var sd=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={warnText:[],fold:e.props.isMobile},e.buildWarnText=function(t){var n=t||e.props,r=n.currentUser,i=n.user,a=n.isMobile,c=n.inPage,s=i||r;if(s){var u=s.profilePunishmentReminds,l=s.isOrg,d=s.badge,p=s.badgeV2,h=[],f=(0,ts.TE)(p||d),m=cd(a).iconSize;l&&!f.identity&&"people"===c&&h.unshift({desc:"未认证的机构号",icon:(0,o.tZ)($l.k,{size:m,fill:nd.colors[nd.groups.GYL01A[0]]})}),u&&(h=h.concat(u.map((function(e){return{desc:e.reasonDesc,icon:e.iconUrl}})))),e.setState({warnText:h})}},e}var r=n.prototype;return r.componentDidMount=function(){var e=this,t=this.props.fillCurrentUserIfNeeded;this.isSelf?Promise.resolve(t(["accountStatus","isForceRenamed","renamedFullname","isBindPhone"])).then((function(){return e.buildWarnText()})):this.buildWarnText()},r.UNSAFE_componentWillReceiveProps=function(e){var t=e.unBlockInfo,n=t.isAppealed,o=t.unBlockInfo,r=e.user,i=(void 0===r?{}:r).urlToken,a=this.props,c=a.unBlockInfo,s=c.prevIsAppealed,u=c.prevUnBlockInfo,l=a.user,d=(void 0===l?{}:l).urlToken;(i&&i!==d||n!==s||o!==u)&&this.buildWarnText(e)},r.renderButtonMore=function(){var e=this,t=cd(this.props.isMobile),n=t.iconSize,r=t.iconMarginRight,i=t.lineHeight,a={marginRight:"4px"},c=nd.colors[nd.groups.GBK06A[0]],s=this.state.fold?(0,o.BX)(o.HY,{children:[(0,o.tZ)("span",{css:a,children:"展开更多"}),(0,o.tZ)(ed.y,{size:5,fill:c})]}):(0,o.BX)(o.HY,{children:[(0,o.tZ)("span",{css:a,children:"收起"}),(0,o.tZ)(td.Ex,{size:5,fill:c})]});return this.props.isMobile&&(0,o.tZ)(sc.Flex,{as:"button",css:function(e){return{alignItems:"center",lineHeight:"".concat(i,"px"),color:e.colors.GBK06A,fontSize:"13px",marginLeft:"".concat(n+r,"px"),marginTop:"6px"}},"aria-label":"更多",onClick:function(){e.setState({fold:!e.state.fold})},children:s})},r.render=function(){var e=this.state,t=e.warnText,n=e.fold,r=this.props,i=r.isMobile,a=r.inPage,c=cd(i),s=c.parentPadding,u=c.fontSize,l=c.fontNumLimit,d=c.iconSize,p=c.iconMarginRight;if(0===t.length)return null;var h=n?t.slice(0,2):t;return(0,o.tZ)(sc.Box,{css:function(e){return{padding:i?"15px 14px":"".concat(s,"px 0"),width:i?"calc(100% + ".concat(2*s,"px)"):"auto",backgroundColor:"column"===a?"transparent":e.colorMod(e.colors.GBK09A).alpha(.6)}},children:(0,o.BX)(sc.Box,{css:{wordBreak:"break-all",margin:"auto",width:["".concat(i?"auto":u*l+d+p),i?"auto":"fit-content"]},children:[h.map((function(e,t){return(0,o.tZ)(ad,(0,U.Z)({isMobile:i},e),t)})),t.length>2&&this.renderButtonMore()]})})},(0,Jl.Z)(n,[{key:"isSelf",get:function(){var e=this.props,t=e.user,n=e.currentUser;return!t||n&&n.urlToken===t.urlToken}}]),n}(h.Component);sd.propTypes={user:ic().object,inPage:ic().oneOf(["column","topstory","people"]).isRequired};var ud=(0,Re.connect)((function(e){var t=e.account,n=t.isAppealed,o=t.spamLevel;return{isMobile:(0,de.Hu)(e),currentUser:(0,le.ib)(e),unBlockInfo:{isAppealed:n,spamLevel:o}}}),{fillCurrentUserIfNeeded:le.sF})(sd),ld=n(60414),dd=n(69953),pd=n(62372);var hd=(0,Re.connect)((function(e){return{isZhihu:e.env.userAgent.Zhihu,isWebView:e.env.userAgent.isWebView}}))((function(e){var t=e.isZhihu,n=e.isWebView,r=e.onRequestClick;return(0,o.BX)("div",{className:"ColumnHomeTop",children:[(0,o.tZ)("h1",{className:"ColumnHomeTop-logo",children:"知乎专栏"}),(0,o.tZ)("h2",{className:"ColumnHomeTop-subTitle",children:"随心写作，自由表达"}),!t&&!n&&(0,o.BX)(h.Fragment,{children:[(0,o.tZ)(pd.Z,{className:"ColumnHomeTop-writeButton",preset:"outline",color:"grey",target:"_blank",to:"/write",onClick:function(e){uc.Z.trackEvent(e.target,{id:8035,action:"OpenUrl"},{link:{url:"https://zhuanlan.zhihu.com/write"}})},children:"开始写文章"}),(0,o.BX)(fc.ZP,{className:"ColumnHomeTop-requestButton",preset:"plain",color:"green",onClick:r,children:["申请开通专栏",(0,o.tZ)(Gs.N,{text:!0,center:!0})]})]})]})})),fd=n(22318);function md(e){var t=e.children;return(0,o.BX)("h3",{className:"ColumnHomeTitle",children:[(0,o.tZ)("div",{className:"ColumnHomeTitle-text",children:t}),(0,o.tZ)("div",{className:"ColumnHomeTitle-line"})]})}function vd(e){var t=e.className,n=e.column,r=n.url,i=n.imageUrl,a=n.title,c=n.description,s=n.followers,u=n.articlesCount;return(0,o.BX)("a",{className:Jr()("ColumnHomeColumnCard",t),target:"_blank",href:r,rel:"noopener noreferrer",children:[(0,o.tZ)(Vc.qE,{className:"ColumnHomeColumnCard-Avatar",round:!0,size:48,url:i,alt:"专栏图像"}),(0,o.BX)("div",{className:"ColumnHomeColumnCard-info",children:[(0,o.tZ)("div",{className:"ColumnHomeColumnCard-title",children:a}),(0,o.tZ)("div",{className:"ColumnHomeColumnCard-description",children:c})]}),(0,o.BX)("div",{className:"ColumnHomeColumnCard-meta",children:[(0,Is.uf)(s)," 人关注 | ",(0,Is.uf)(u)," 篇文章"]}),(0,o.tZ)(fc.ZP,{className:"ColumnHomeColumnCard-followButton",preset:"outline",color:"green",children:"进入专栏"})]})}var Zd=function(e){var t=e.recommendations,n=void 0===t?[]:t,r=e.onChange,i=(0,Ae.Z)((0,h.useState)(!1),2),a=i[0],c=i[1];return(0,o.BX)("div",{className:"ColumnHomeRecommendation",children:[(0,o.tZ)(md,{children:"专栏 · 发现"}),(0,o.tZ)("div",{className:"ColumnHomeRecommendation-cardContainer",children:n.map((function(e){return(0,o.tZ)(vd,{className:"ColumnHomeRecommendation-card",column:e},e.id)}))}),(0,o.tZ)(fc.ZP,{className:Jr()("ColumnHomeRecommendation-refreshButton",{"ColumnHomeRecommendation-refreshButton--rotating":a}),color:"grey",icon:fd.x,label:"换一换",onClick:function(e){c(!0),r(e)},onTransitionEnd:function(){c(!1)}})]})};var gd=function(e){var t=e.className,n=e.onRequestClick,r=(new Date).getFullYear();return(0,o.BX)("div",{className:Jr()("ColumnHomeBottom",t),children:[(0,o.tZ)("h3",{className:"ColumnHomeBottom-title",children:"在知乎创作"}),(0,o.tZ)(fc.ZP,{className:"ColumnHomeBottom-requestButton",onClick:n,children:"申请专栏"}),(0,o.BX)("footer",{className:"ColumnHomeBottom-footer",children:[(0,o.BX)("span",{children:["© ",r," 知乎"]}),(0,o.tZ)("span",{children:" · "}),(0,o.tZ)("a",{target:"_blank",href:"/",rel:"noopener noreferrer",children:"知乎专栏"}),(0,o.tZ)("span",{children:" · "}),(0,o.tZ)("a",{target:"_blank",href:"https://www.zhihu.com/roundtable",rel:"noopener noreferrer",children:"圆桌"}),(0,o.tZ)("span",{children:"·"}),(0,o.tZ)("a",{target:"_blank",href:"https://www.zhihu.com/explore",rel:"noopener noreferrer",children:"发现"}),(0,o.tZ)("span",{children:" · "}),(0,o.tZ)("a",{target:"_blank",href:"https://www.zhihu.com/app",rel:"noopener noreferrer",children:"移动应用"}),(0,o.tZ)("span",{children:" · "}),(0,o.tZ)("a",{href:"https://www.zhihu.com/signin?no_qrcode=1",children:"使用机构帐号登录"}),(0,o.tZ)("span",{children:" · "}),(0,o.tZ)("a",{href:"https://www.zhihu.com/contact",children:"联系我们"}),(0,o.tZ)("span",{children:" · "}),(0,o.tZ)("a",{target:"_blank",href:"https://www.zhihu.com/careers",rel:"noopener noreferrer",children:"来知乎工作"}),(0,o.tZ)("br",{}),(0,o.tZ)("a",{href:"https://tsm.miit.gov.cn/dxxzsp/",target:"_blank",rel:"noopener noreferrer",children:"京 ICP 证 110745 号"}),(0,o.tZ)("span",{children:" · "}),(0,o.tZ)("a",{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener noreferrer",children:"京 ICP 备 13052560 号 - 1"}),(0,o.tZ)("span",{children:" · "}),(0,o.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802020088",children:[(0,o.tZ)("img",{src:"https://pic3.zhimg.com/80/v2-d0289dc0a46fc5b15b3363ffa78cf6c7.png",alt:""}),"京公网安备 11010802020088 号"]}),(0,o.tZ)("span",{children:" · "}),(0,o.tZ)("a",{href:"http://zhstatic.zhihu.com/assets/zhihu/publish-license.jpg",target:"_blank",rel:"noopener noreferrer",children:"出版物经营许可证"})]})]})},Ed={limit:8,offset:0,seed:7};function Td(e){var t=e.currentUser,n=e.isMobile,r=e.homeRecommendations,i=e.getHomeRecommendations,a=e.showNotification,c=e.fillCurrentUserIfNeeded,s=(0,Ae.Z)((0,h.useState)(!1),2),u=s[0],l=s[1],d=(0,Ae.Z)((0,h.useState)(!1),2),p=d[0],f=d[1],m=(0,Ae.Z)((0,h.useState)(!1),2),v=m[0],Z=m[1],g=(0,sl.Z)((function(){var e=t.accountStatus,n=t.hasApplyingColumn;return(null==e?void 0:e.muted)?f(!0):n?l(!0):void Z(!0)}));(0,h.useEffect)((function(){uc.Z.trackPageShow({id:3368})}),[]),(0,h.useEffect)((function(){T().get("requestColumn")&&(T().delete("requestColumn"),a("信息已提交，我们将在三个工作日内确认并答复"))}),[a]),(0,h.useEffect)((function(){c(["hasApplyingColumn"])}),[]);var E=(0,h.useCallback)((function(){window.innerWidth<=1020?(Ed.offset+=6,Ed.limit=6):(Ed.offset+=8,Ed.limit=8),i("columns",Ed)}),[i]);return(0,o.BX)("div",{className:"ColumnHome",children:[(0,o.tZ)(we.ql,{title:"知乎专栏 - 随心写作，自由表达"}),!n&&(0,o.tZ)(dd.Z,{showAdblockBanner:!0}),(0,o.tZ)(hd,{onRequestClick:g}),(0,o.tZ)(Zd,{recommendations:r,onChange:E}),(0,o.tZ)(gd,{className:"ColumnHome-HomeBttom",onRequestClick:g}),(0,o.tZ)(Ms.Z,{className:"ColumnHomeTop-PendingModal",onClose:function(){return l(!1)},children:u&&"你的专栏创建申请正在受理中。同时只能申请一个专栏。"}),(0,o.tZ)(Ms.Z,{className:"ColumnHomeTop-MutedModal",onClose:function(){return f(!1)},children:p&&(0,o.tZ)(ud,{user:t,inPage:"column"})}),(0,o.tZ)(ld.Z,{onClose:function(){return Z(!1)},shown:v})]})}Td.fetchData=function(e){return(0,e.dispatch)(Ha("columns",Ed))};var Cd=(0,Xe.compose)(Ql.dT,(0,Re.connect)((function(e){var t=e.recommendation.homeRecommendations;return{currentUser:(0,le.ib)(e),isMobile:(0,de.Hu)(e),homeRecommendations:t}}),{getHomeRecommendations:Ha,fillCurrentUserIfNeeded:le.sF,showNotification:jt.c0}),(0,ss.Z)({shouldLoad:function(e){return 0===e.homeRecommendations.length},load:function(e){return(0,e.getHomeRecommendations)("columns",Ed)}}))(Td),Ad=n(74792),_d=n(93991),yd=n(58383),Sd=n(48636),Id=n(32487),bd=n(49236),wd=n(91840),Rd=n(93922),Nd=(0,Nt.P1)(de.Hu,de.Kv,(function(e,t){var n=decodeURIComponent(t.split("?title=")[1]||"");return{isSearchSpecialSource:e&&t.includes("zhihu.com/search-special")&&Boolean(n),searchSpecialTitle:n}})),Od=n(5671),Dd=function(){var e=(0,mc.n)(),t=(0,de.dD)(),n=(0,ye.n)();return(0,ul.Z)((function(){!e&&t&&(null==n?void 0:n.Wechat)&&Math.random()<.05&&(u.ZP.increment("mobile.autowechatlogin.count"),function(){var e=location.href,t=(0,i.tL)(e),n=t.utm_source,o=t.utm_medium;location.href="https://www.zhihu.com/oauth/redirect/login/wechat_mp?next=/oauth/account_callback&from=".concat(encodeURIComponent(e),"&utm_source=").concat(n,"&ref_source=").concat(o)}())})),null},Bd=n(60048),Pd=n(25949),kd=n(44707),xd=n(51088),Ld=n(70311),Ud=n(16044),Fd=n.p+"assets/placeholder.0682898a.svg";var Md=function(){return(0,o.tZ)(Ud.Z,{title:"该内容仅作者可见",subtitle:"",errorImage:Fd})},Gd=n(34614),zd=n(23e3),Hd=(0,o.tZ)(we.ql,{meta:[{name:"robots",content:"noindex"}]}),qd=(0,Xe.compose)((0,js.Z)(null))((function(e){var t=e.entity,n=t.type,r=t.id,i=t.isCollapsed,a=t.suggestEdit,c=void 0===a?{}:a,s=t.adminClosedComment,u="";"question"===n?u=r:"answer"===n&&(u=t.question.id);var l=(0,Re.useSelector)((function(e){return(0,No.Md)(e,{id:u})}));if(l){var d=l.status,p=l.adminClosedComment,h=l.isMuted,f=l.visibleOnlyToAuthor;if((null==d?void 0:d.isClose)||(null==d?void 0:d.isSuggest)||(null==d?void 0:d.isEvaluate)||p||h||f)return Hd}return"question"===n&&l.redirection?(0,o.tZ)("link",{rel:"canonical",href:"https://www.zhihu.com/question/".concat(l.redirection.to.id)}):"answer"===n&&((null==c?void 0:c.status)||i||s)||"article"===n&&((null==c?void 0:c.status)||s)?Hd:""})),Vd=n(76643),Xd=n(69701),Wd=n(24336);function Kd(e){var t=e.members,n=e.maxLength,r=e.size,i=void 0===r?20:r,a=t.slice(0,n);return(0,o.tZ)(sc.Flex,{alignItems:"center",css:function(e){return{".UserLink":{borderRadius:"50%",border:"2px solid ".concat(e.colors.GBK99B),"&:nth-of-type(1)":{zIndex:1},"&:nth-of-type(n+2)":{marginLeft:-10}}}},children:a.map((function(e){return(0,o.tZ)(Wd.Z,{user:e,avatar:!0,avatarProps:{size:i,round:!0}},e.id)}))})}var jd=(0,h.memo)(Kd);function Yd(e){var t=e.members,n=e.hasMultiProposer;return(0,o.BX)(sc.Flex,{alignItems:"center",children:[n?(0,o.tZ)(jd,{members:t,maxLength:2}):(0,o.tZ)(Wd.Z,{user:t[0],avatar:!0,avatarProps:{size:20,round:!0}}),(0,o.BX)(sc.Flex,{ml:"8px",fontSize:15,lineHeight:"20px",color:"GBK05A",children:[(0,o.tZ)(Wd.Z,{user:t[0],css:{".UserLink-link":(0,U.Z)({maxWidth:90},(0,od.S)(1))}}),n&&"等 ".concat(t.length," 人")]})]})}var Qd=function(e){var t=e.children,n=e.extraStyle,r=(0,K.Z)(e,["children","extraStyle"]);return(0,o.tZ)(fc.ZP,(0,F.Z)((0,U.Z)({},r),{css:{"&.Button":(0,U.Z)({fontSize:15,padding:0},n)},children:t}))},Jd={invite:{requestText:"转载",cardShowId:8931,clickId:8932},self_recommend:{requestText:"推荐",cardShowId:8957,clickId:8958}};var $d=(0,I.withRouter)((function(e){var t=(0,Ae.Z)((0,h.useState)(!0),2),n=t[0],r=t[1],i=(0,Re.useDispatch)(),a=e.entityType,c=e.id,s=e.isAuthor,u=e.onShowAllRequests,l="1"===e.location.query.has_contribution_apply;(0,h.useEffect)((function(){(s||l)&&i((0,Bo.$T)(c))}),[i,l,c,s]);var d=s?"invite":"self_recommend",p=(0,Re.useSelector)((function(e){return(0,Bo.bG)(e,{isAuthor:s,requestType:d,entityType:"article"})})),f=Jd[d],m=f.cardShowId,v=f.clickId,Z=f.requestText,g=p.map((function(e){return e.proposer})),E=g.length>1,T=s?"申请转载此文章到".concat(E?"他们的":"","专栏"):"申请推荐此文章到你的专栏",C=function(e,t){var n="approve"===t?"通过":"拒绝";uc.Z.trackEvent(e.target,{id:v,action:"Click",element:"Button"},{button:{text:n}}),i((0,Bo.gT)({requestId:p[0].id,action:t,articleId:c})).then((function(){i((0,jt.c0)("已".concat(n).concat(Z,"申请"))),r(!1)}))};return n&&(null==p?void 0:p[0])?(0,o.tZ)(bd.r,{trackCardShow:!0,module:"Content",moduleName:s?E?"多人申请":"单人申请":"推荐申请处理",view:{id:m,element:"Dialog"},extra:{button:{text:"".concat(Z,"申请处理")}},children:(0,o.BX)(sc.Flex,{justifyContent:"space-between",width:600,height:48,p:"12px",bg:"GBK99A",css:{position:"fixed",top:68,left:"50%",transform:"translateX(-50%)",borderRadius:8,boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.1)"},children:[(0,o.BX)(sc.Flex,{flex:1,children:[(0,o.tZ)(Yd,{members:g,hasMultiProposer:E}),(0,o.BX)(sc.Flex,{my:"8px",fontSize:15,lineHeight:1.4,alignItems:"center",color:"GBK02A",children:[(0,o.tZ)(sc.Text,{ml:"8px",flexShrink:0,children:T}),!E&&(0,o.tZ)(sc.Link,{flex:1,ml:"4px",fontWeight:"bold",color:"GBL05A",href:"https://www.zhihu.com/column/".concat(p[0].destination.id),css:[(0,od.S)(1)],children:(0,o.tZ)(Xd.Z,{column:p[0].destination})})]})]}),(0,o.BX)(sc.Flex,{ml:"10px",flexShrink:0,alignItems:"center",children:[(0,o.tZ)(sc.Flex,{fontSize:15,fontWeight:"bold",lineHeight:1.4,alignItems:"center",children:E?(0,o.tZ)(sc.Link,{"data-za-not-track-link":!0,onClick:function(e){uc.Z.trackEvent(e.target,{id:v,action:"Click",element:"Button"},{button:{text:"ViewAll"}}),u({id:c,entityType:a}),r(!1)},children:(0,o.tZ)(Qd,{preset:"plain",color:"blue",children:"查看详情"})}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(Qd,{preset:"plain",color:"blue",onClick:function(e){return C(e,"approve")},children:"通过"}),(0,o.tZ)(Qd,{preset:"plain",color:"grey",extraStyle:{marginLeft:22},onClick:function(e){return C(e,"reject")},children:"拒绝"})]})}),(0,o.tZ)(sc.Text,{ml:"24px",as:su.HN,color:"GBK07A",size:16,onClick:function(){r(!1)}})]})]})}):null})),ep=n(17695),tp=n(68764),np={article:{text:"转载",subtitle:"他人申请将你的文章转载至他的专栏",description:"申请转载文章到专栏",zaInfo:{pageShowId:8935,profileEntryCardShowId:8933,profileEntryClickId:8934,listModalCardShowId:8937,listModalClickId:8938}},column:{text:"推荐",subtitle:"他人推荐他们的文章到你的专栏",description:"申请推荐文章到你的专栏",zaInfo:{pageShowId:8961,profileEntryCardShowId:8959,profileEntryClickId:8960,listModalCardShowId:8962,listModalClickId:8963}}},op={answer:"Answer",article:"Post"};function rp(e){var t=e.request,n=e.description,r=e.cardShowId,i=e.clickId,a=(0,Re.useDispatch)(),c=(0,Ae.Z)((0,h.useState)(""),2),s=c[0],u=c[1],l=t.id,d=t.destination,p=t.destination.id,f=t.object,m=f.id,v=f.type,Z=f.title,g=f.imageUrl,E=f.voteupCount,T=void 0===E?0:E,C=f.commentCount,A=void 0===C?0:C,_=t.proposer,y=t.created,S=t.updated,I=t.state,b=function(e,t){var n="approve"===t?"通过":"拒绝";uc.Z.trackEvent(e.target,{id:i,action:"Click",element:"Button"},{button:{text:n}}),a((0,Bo.gT)({requestId:l,action:t,articleId:m})).then((function(){u("已".concat(n))}))};return s||"pending"===I?(0,o.tZ)(bd.r,{trackCardShow:!0,view:{id:r,element:"Card"},module:"Content",content:{type:op[v],token:String(m),parent_token:String(p)},children:(0,o.BX)(sc.Box,{p:"16px",mb:"16px",bg:"GBK99A",css:function(e){return(0,U.Z)({},(0,tp.M)({border:"1px solid ".concat(e.colors.GBK08A),borderRadius:8}))},children:[(0,o.BX)(sc.Flex,{alignItems:"center",children:[(0,o.BX)(sc.Flex,{alignItems:"center",children:[(0,o.tZ)(Wd.Z,{user:_,avatar:!0,avatarProps:{size:20,round:!0},css:{lineHeight:1}}),(0,o.tZ)(sc.Text,{ml:"8px",flex:1,fontSize:15,color:"GBK06A",children:(0,o.tZ)(Wd.Z,{user:_,css:{".UserLink-link":(0,U.Z)({maxWidth:90},(0,od.S)(1))}})})]}),(0,o.BX)(sc.Flex,{ml:"8px",my:"8px",fontSize:15,lineHeight:1.4,alignItems:"center",color:"GBK02A",children:[(0,o.tZ)(sc.Text,{flexShrink:0,children:n}),(0,o.tZ)(sc.Text,{flex:1,ml:"4px",fontWeight:"bold",color:"GBL05A",css:[(0,od.S)(1)],children:(0,o.tZ)(Xd.Z,{column:d})})]})]}),(0,o.BX)(sc.Flex,{p:"10px 12px",height:60,bg:"GBK10A",css:{borderRadius:4},children:[(0,o.BX)(sc.Link,{href:"https://zhuanlan.zhihu.com/p/".concat(m),flex:1,css:[(0,od.S)(1)],children:[(0,o.tZ)(sc.Text,{fontSize:14,lineHeight:"20px",color:"GBK03A",children:Z}),(0,o.tZ)(sc.Text,{mt:"4px",fontSize:12,lineHeight:"14px",color:"GBK07A",children:"".concat((0,Is.Zh)(T),"赞同 · ").concat((0,Is.Zh)(A),"评论")})]}),g&&(0,o.tZ)(sc.Box,{width:40,height:40,flexShrink:0,css:{overflow:"hidden",borderRadius:2},children:(0,o.tZ)(sc.Image,{width:"100%",height:"100%",src:g,alt:"",css:{filter:"brightness(0.95)",objectFit:"cover"}})})]}),(0,o.BX)(sc.Flex,{mt:"16px",pr:"4px",lineHeight:"21px",justifyContent:"space-between",alignItems:"center",children:[(0,o.tZ)(sc.Text,{fontSize:12,color:"GBK07A",children:(0,zo.rL)(S||y)}),s?(0,o.tZ)(sc.Text,{fontSize:15,fontWeight:"bold",color:"GBK08A",children:s}):(0,o.BX)(sc.Flex,{fontSize:15,fontWeight:"bold",justifyContent:"space-between",children:[(0,o.tZ)(fc.ZP,{preset:"plain",color:"grey",css:{padding:0},onClick:function(e){return b(e,"reject")},children:"拒绝"}),(0,o.tZ)(fc.ZP,{preset:"plain",color:"blue",css:{marginLeft:24},onClick:function(e){return b(e,"approve")},children:"通过"})]})]})]})}):null}function ip(e){var t=e.isAuthor,n=e.isProfile,r=e.republishRequests,i=e.onClose,a=r||{},c=a.id,s=a.entityType,u=a.requestType,l=(0,Re.useDispatch)(),d=function(){l(n?(0,Bo.Jg)(c,s):(0,Bo.$T)(c))};(0,h.useEffect)(d,[c,s,n,l]);var p,f=(0,Re.useSelector)((function(e){return(0,Bo.bG)(e,{isAuthor:t,isProfile:n,entityType:s,requestType:u})})),m=(0,Re.useSelector)((function(e){return e.republish[s]})),v=m.isLoading,Z=m.paging,g=np[s],E=g.text,T=g.subtitle,C=g.description,A=g.zaInfo,_=A.pageShowId,y=A.listModalCardShowId,S=A.listModalClickId,I=null!==(p=null==Z?void 0:Z.isEnd)&&void 0!==p?p:!n;(0,h.useEffect)((function(){uc.Z.trackPageShow({id:_})}),[]);return r?(0,o.tZ)(sc.Box,{children:(0,o.tZ)(Ms.Z,{size:"large",onClose:function(){d(),i()},title:"文章".concat(E,"申请"),subtitle:T,children:(0,o.tZ)(sc.Box,{my:"24px",maxHeight:460,css:{overflowY:"scroll","&::-webkit-scrollbar":{display:"none"}},children:(0,o.tZ)(ep.Z,{onLoad:d,isLoading:null!=v&&v,isDrained:I,getContainer:function(e){return e.parentElement},children:f.map((function(e){return(0,o.tZ)(rp,{request:e,description:C,cardShowId:y,clickId:S},e.id)}))})})})}):null}function ap(e){var t=e.id,n=e.selfRecommendedRepublishRequests,r=(0,Re.useDispatch)(),i=(0,Ae.Z)((0,h.useState)(!1),2),a=i[0],c=i[1],s=(0,h.useMemo)((function(){return n.map((function(e){var t=e.approver,n=e.destination;return"「".concat(t.name,"」的专栏「").concat(n.title,"」")})).join("、")}),[n]);return(0,o.BX)(bd.r,{view:{id:8964,element:"Text"},trackCardShow:!0,extra:{button:{text:"撤销推荐"}},children:[(0,o.BX)(sc.Text,{as:"span",children:[" · ",(0,o.tZ)(sc.Text,{as:"span",color:"GBL01A",css:{cursor:"pointer"},onClick:function(e){e.stopPropagation(),c(!0),uc.Z.trackEvent(e.target,{id:8965,action:"Click",element:"Text"},{button:{text:"撤销推荐"}})},children:"撤销推荐"})]}),(0,o.tZ)(Ms.Z,{className:"VerificationForm-allowUseCreatorModal",title:"要撤销推荐吗？",closeButton:null,maskClosable:!1,children:a&&(0,o.BX)(o.HY,{children:[(0,o.tZ)("span",{children:"当前文章被推荐到".concat(s,"，要撤销吗？")}),(0,o.BX)(Ms.w,{direction:"horizontal",children:[(0,o.tZ)(fc.ZP,{onClick:function(){return c(!1)},children:"暂不撤销"}),(0,o.tZ)(fc.ZP,{preset:"primary",color:"blue",onClick:function(){uc.Z.trackEvent(null,{id:8966,action:"Cancel",element:"Button"},{button:{text:"撤销推荐"}});var e=n.map((function(e){return r((0,Bo.gT)({requestId:e.id,action:"cancel",articleId:t}))}));Promise.all(e).then((function(){r((0,jt.c0)("撤销成功"))})),c(!1)},children:"撤销推荐"})]})]})})]})}var cp=n(43251),sp=n(16846),up=n(21353),lp=n(52857),dp=n.n(lp);function pp(){var e=(0,up.Z)(["编辑于",""]);return pp=function(){return e},e}function hp(){var e=(0,up.Z)(["发布于",""]);return hp=function(){return e},e}function fp(){var e=(0,up.Z)(["・",""]);return fp=function(){return e},e}var mp=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={showUpdated:!0},e.handleClick=function(){e.setState((function(e){return{showUpdated:!e.showUpdated}}))},e}return n.prototype.render=function(){var e=this.props,t=e.created,n=e.updated,r=e.ipInfo,i=e.extraInlineComponent,a=this.state.showUpdated;return(0,o.BX)("div",{role:"button",tabIndex:0,className:"ContentItem-time",onClick:this.handleClick,children:[a&&n!==t?dp()(pp(),(0,zo.KZ)(n)):dp()(hp(),(0,zo.KZ)(t)),Boolean(r)&&dp()(fp(),r),i]})},n}(h.Component);mp.propTypes={created:ic().number,updated:ic().number,extraInlineComponent:ic().node,ipInfo:ic().string};var vp=mp,Zp=n(52949),gp=n(714),Ep="SearchSpecialButton",Tp=function(e){var t=e.title,n=e.className;(0,h.useEffect)((function(){uc.Z.trackCardShow(null,{id:8107},{button:{text:t}})}),[t]);var r=(0,h.useCallback)((function(){uc.Z.trackEvent(null,{id:8108,action:"OpenUrl"},{button:{text:t}});var e=(0,q.stringify)({type:"content",q:t});location.href="//www.zhihu.com/search?".concat(e)}),[t]);return(0,o.tZ)(gp.ZP,{className:Jr()(Ep,n),children:(0,o.BX)(fc.ZP,{className:"".concat(Ep,"-inner"),preset:"primary",color:"blue",onClick:r,children:["查看更多「",t,"」相关内容"]})})},Cp=n(18538),Ap=n(33386),_p=n(43676),yp=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.item,n=e.noHoverCard,r=e.onClick;return(0,o.tZ)(Ap.Z,{className:"Topic",children:(0,o.tZ)(_p.Z,{noHoverCard:n||C.Z.isMobileEntry,topic:t,onClick:r})})},n}(h.Component),Sp=(0,bd.a)((function(e){return{module:"TopicItem",content:{type:"Topic",token:e.item.id},trackCardShow:!0}}))(yp),Ip=function(e){var t=e.topics,n=e.className,r=e.noHoverCard,i=e.onItemClick;return(0,o.tZ)("div",{className:Jr()("TopicList",n),children:t.map((function(e){return(0,o.tZ)(Sp,{item:e,noHoverCard:r,onClick:i},e.id)}))})},bp=n(67070),wp=n(32705),Rp=n.n(wp),Np=n(15568),Op=n.n(Np);var Dp=function(){navigator.cookieEnabled&&Rp()(navigator.userAgent).Wechat&&(Op().get("social_id")||Op().get("WECHAT_AUTHORIZATION_POPUP")||(Op().set("WECHAT_AUTHORIZATION_POPUP","1",{expires:1,domain:"zhihu.com"}),window.location.replace("https://www.zhihu.com/oauth/redirect/social_info/wechat_mp?from=".concat(encodeURIComponent(location.href)))))};function Bp(){var e=Op().get("social_id"),t=new URLSearchParams(location.search);return{firstShareUid:t.get("utm_oi"),shareSocialId:t.get("s_s_i"),shareRecord:t.get("s_r"),curUserSocialId:e}}var Pp=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}var o=n.prototype;return o.componentDidMount=function(){var e=this;window.wx&&window.wx.ready((function(){Dp(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4408,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=Bp(),o=n.firstShareUid,r=n.shareSocialId,i=n.shareRecord,a=n.curUserSocialId;a&&0!==Number(i)&&(r||o)&&(uc.Z.trackEvent(null,{id:e,action:"Share"},{share:{share_uid:o,share_unionid:r,open_unionid:a}}),t({eventType:"Click",action:"Share",block:"blueStar_wxShareBtn",elementLocation:{type:"Block",content:{type:"Topic",id:"".concat(o,"_").concat(r,"_").concat(a)}}}))}(e.props.zaShareId,e.props.trackEvent)}))},o.render=function(){return null},n}(h.Component);var kp=n(73950),xp=n(14790),Lp=n(28483);var Up=n(43158),Fp=function(e){var t=e.ua,n=e.env,o=e.location,r=n.ctx;if(t.UC||t.Quark){var i=new Error;throw i.redirect="https://oia.zhihu.com".concat((0,Up.Qu)(o.pathname),"?app_from=uckoc_interc&is_from_paid=1&redirect_from=").concat(encodeURIComponent(r.href)),i}},Mp=n(49252),Gp=n.p+"assets/wechat-share-image.0393e0b7.png",zp=function(e){var t=e.pageInfo,n=e.pageOptions;return(0,Ne.TN)(t,n),null},Hp=n(5700),qp=n(73587);function Vp(e){var t=e.id,n=e.shown,r=e.onClose,i=(0,Ae.Z)((0,h.useState)(!1),2),a=i[0],c=i[1],s=(0,Ae.Z)((0,h.useState)(!1),2),u=s[0],l=s[1],d=(0,Ae.Z)((0,h.useState)(""),2),p=d[0],f=d[1],m=(0,Re.useDispatch)(),v=(0,h.useRef)([]).current,Z=(0,Re.useSelector)((function(e){return e.me.columnContributions.filter((function(t){var n;return"normal"===t.columnType&&(null===(n=t.author)||void 0===n?void 0:n.urlToken)===e.currentUser}))}))||v,g=function(){f(""),r()};return(0,h.useEffect)((function(){l(0===Z.length)}),[Z]),n?(0,o.BX)("div",{children:[(0,o.tZ)(Ms.Z,{size:"large",onClose:g,title:"申请转载到我的专栏",subtitle:"选择一个专栏，向作者发送文章转载申请",children:Z.length>0&&(0,o.tZ)(bd.r,{view:{id:8929,element:"Dialog"},extra:{button:{text:"申请转载到我的专栏"}},module:"Content",card:{content:{type:"Column",token:String(p)}},trackCardShow:!0,children:(0,o.BX)("div",{children:[(0,o.tZ)(sc.Box,{maxHeight:460,css:{overflowY:"scroll","&::-webkit-scrollbar":{display:"none"}},children:Z.map((function(e,t){return(0,o.BX)(sc.Flex,{px:"8px",py:"16px",alignItems:"center",justifyContent:"space-between",as:"label",htmlFor:"RepublishApply-columnItem-".concat(t),css:function(e){return{borderBottom:"1px solid ".concat(e.colors.GBK10A)}},children:[(0,o.BX)(sc.Box,{flex:1,children:[(0,o.tZ)(sc.Text,{fontSize:18,fontWeight:"bold",color:"GBK02A",lineHeight:"22px",css:[(0,od.S)(1)],children:e.title}),(0,o.BX)(sc.Text,{mt:"12px",fontSize:14,lineHeight:1,color:"GBL05A",children:[e.articlesCount||0," 篇内容 ·"," ",e.voteupCount||0," 赞同"]})]}),(0,o.tZ)(sc.Box,{flexShrink:0,as:"input",type:"radio",name:"RepublishApply-columnInput",id:"RepublishApply-columnItem-".concat(t),checked:e.id===p,onChange:function(){return f(e.id)}})]},e.id)}))}),(0,o.tZ)(Ve.w,{children:(0,o.tZ)(fc.ZP,{disabled:!p,preset:"primary",color:"blue",onClick:function(e){uc.Z.trackEvent(e.target,{id:8930,action:"Click",element:"Button"},{button:{text:"申请转载"}}),m((0,Bo.gT)({action:"create",articleId:t,columnId:p})).then((function(){m((0,jt.c0)("已发送转载申请！"))})).finally(g)},children:"申请转载"})})]})})}),(0,o.tZ)(Ms.Z,{onClose:r,title:"要创建专栏吗？",children:u&&(0,o.BX)("div",{children:["你还没有可以用来转载文章的专栏，要创建专栏吗？",(0,o.BX)(Ve.w,{direction:"horizontal",children:[(0,o.tZ)(fc.ZP,{onClick:r,children:"取消"}),(0,o.tZ)(fc.ZP,{preset:"primary",color:"blue",onClick:function(){l(!1),c(!0)},children:"创建专栏"})]})]})}),(0,o.tZ)(ld.Z,{onClose:function(){c(!1),m((0,le.Pq)()).finally((function(){0===Z.length&&r()}))},shown:a,disableRedirect:!0})]}):null}var Xp=n(86596),Wp=n(59735),Kp=n(5327),jp=n(45638),Yp=n(30942),Qp=n(46434),Jp=n(8905),$p=n(4244),eh=n(41191),th=n(35981),nh=n(5880),oh=n(26171);function rh(e){if(!e||!Array.isArray(e.contributions))return null;var t=e.contributions.find((function(e){return"accepted"===e.state}));return t?t.column:null}var ih=n(85946),ah=function(e){var t=e.isLiked,n=e.onClick,r=(0,K.Z)(e,["isLiked","onClick"]);return(0,o.tZ)(Ne.$U,(0,U.Z)({as:fc.ZP,zaType:"Button",zaText:!0,zaAction:t?"UnLike":"Like",preset:"plain",onClick:n,icon:ih.sh,label:t?"取消喜欢":"喜欢","aria-live":"polite"},r))};function ch(e){var t=e.onClick,n=(0,K.Z)(e,["onClick"]);return(0,o.tZ)(fc.ZP,(0,U.Z)({preset:"plain",onClick:t,icon:Kp.h,label:"申请转载"},n))}var sh=n(43819),uh=n(17341),lh=n(86536),dh=n(8412),ph=n(96323),hh=n(2236),fh=n(81525),mh=n(440),vh=n(38174),Zh=n(34261),gh=n(86669),Eh=n(64448),Th={need_review:"转载申请需要审核",public:"允许所有人转载到专栏",reserved:"不允许他人转载到专栏"};function Ch(e){var t=e.current,n=e.id,r=e.onChange;return(0,o.tZ)(o.HY,{children:Object.keys(Th).map((function(e){return(0,o.tZ)(Eh.Z,{onClick:function(){return function(e){e!==t&&(uc.Z.trackEvent(null,{id:8939,action:"Click",element:"Button"},{button:{text:Th[e]}}),r(n,e))}(e)},checked:e===t,children:Th[e]},e)}))})}var Ah=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={deleteModalShown:!1,reportModalShown:!1,addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,showAttention:!1},e.onCloseReward=function(){var t=e.props,n=t.article,o=t.rewardInfo;(0,t.updateArticleReward)(n.id,o.tagline,!1)},e.isColumnPage=function(){var t=e.props.routes;return"Column"===t[t.length-1].name},e.handleDelete=function(){var t=e.props,n=t.showNotification,o=t.article,r=t.deletePost,i=t.router,a=e.isColumnPage(),c=rh(o);r(o.id).then((function(){n("文章已删除"),a?window.location.reload():c&&c.id?i.replace("/".concat(c.id)):location.href="".concat(A.i7,"/people/").concat(o.author.urlToken,"/posts")}))},e.handleModalClose=function(){e.setState({deleteModalShown:!1,reportModalShown:!1,addAnnotationModalShown:!1,cancelAnnotationModalShown:!1})},e.handleReportButtonClick=e.props.authRequired((function(t){(0,Wp.E)(t,1294),e.setState({reportModalShown:!0})}),A.q0.report),e.handleResetAnnotation=function(){(0,Wp.E)(event,1293),e.setState({cancelAnnotationModalShown:!0})},e.handleAddAnnotation=function(t){(0,Wp.E)(t,1293),e.setState({addAnnotationModalShown:!0})},e.handleMenuClick=function(t,n){var o=n.isAuthor,r=n.isMobile,i=o&&!r;if((0,Wp.E)(t,i?1283:1292),o){var a=e.props,c=a.getCommercialInfo,s=a.article.id;e.commercialInfoPromise_=c(s).then((function(e){return Boolean(e.payload&&e.payload.isAudit)}),(function(){return!1}))}},e.showEditAlert=function(){return fs.Z.confirm("文章在投放中，如修改会导致广告暂停，再次审核通过后，广告才会开启。确认修改？",{title:"确认修改"})},e.hendleEditButtonClick=function(){var t=(0,Xp.b6)(e.props.article.id);(e.commercialInfoPromise_?e.commercialInfoPromise_:Promise.resolve(!1)).then((function(t){return t?e.showEditAlert():Promise.resolve()})).then((function(){return location.href=t}),(function(){}))},e.renderReportItem=function(){return(0,o.BX)(o.HY,{children:[(0,o.tZ)(Ne.$U,{zaAction:"Report",zaType:"Button",zaModuleId:"click_report",as:ph.sN,onClick:e.handleReportButtonClick,children:"举报"}),(0,o.tZ)(ph.R,{})]})},e.renderReportModal=function(){var t=e.props.article,n=t.type,r=t.id,i=e.state.reportModalShown;return(0,o.tZ)(Lc.y,{type:n,urlToken:r,isColumnArticle:e.isColumnPage(),shown:i,onClose:e.handleModalClose,zaEnabled:!0})},e.renderAnnotationItem=function(){var t=e.props.article.annotationDetail;return(0,o.tZ)(ph.sN,{onClick:t?e.handleResetAnnotation:e.handleAddAnnotation,children:t?"撤销标记":"标记内容"})},e.renderAnnotationModal=function(){var t=e.props,n=t.addAnnotation,r=t.cancelAnnotation,i=t.showNotification,a=t.article.id,c=e.state,s=c.addAnnotationModalShown,u=c.cancelAnnotationModalShown;return(0,o.BX)(o.HY,{children:[(0,o.tZ)(lh.Z,{addAnnotation:n,onClose:e.handleModalClose,shown:s,type:Zh.zs,urlToken:a,showNotification:i}),(0,o.tZ)(dh.Z,{cancelAnnotation:r,onClose:e.handleModalClose,shown:u,type:Zh.zs,urlToken:a,showNotification:i})]})},e.renderDeleteItem=function(){return(0,o.BX)(o.HY,{children:[(0,o.tZ)(ph.sN,{onClick:function(){return e.setState({deleteModalShown:!0})},children:"删除"}),(0,o.tZ)(ph.R,{})]})},e.renderDeleteModal=function(){var t=e.props.isMobile,n=e.state.deleteModalShown;return(0,o.tZ)(fh.Z,{isMobile:t,title:"删除文章",subtitle:"确定删除这篇文章？",shown:n,onCancel:e.handleModalClose,onSubmit:e.handleDelete})},e.renderEditItem=function(){return(0,o.BX)(o.HY,{children:[(0,o.tZ)(ph.sN,{onClick:e.hendleEditButtonClick,children:"修改文章"}),(0,o.tZ)(ph.R,{})]})},e}var r=n.prototype;return r.componentDidMount=function(){var e=this;if(this.props.justPublished){if(T().get("leadCommentSetting"))return;this.forceTimeId=setTimeout((function(){e.reallytarget=e.target,e.setState({showAttention:!0})}),250),this.animateTimeId=setTimeout((function(){e.setState({showAttention:!1}),T().set("leadCommentSetting",!0)}),3e3)}},r.componentWillUnmount=function(){clearTimeout(this.forceTimeId),clearTimeout(this.animateTimeId)},r.render=function(){var e=this,t=this.state.showAttention,n=this.props,r=n.article,i=n.rewardInfo,a=n.isMobile,c=n.currentUser,s=r.author,u=r.annotationAction,l=r.commentPermission,d=r.copyrightPermission,p=(0,xp.Z)(c,s),h=p&&!a,f=!p&&Array.isArray(u)&&(u.indexOf(Zh.jB.add)>=0||u.indexOf(Zh.jB.cancel)>=0),m=!p,v=l&&!a&&p,Z=i.isRewardable&&p,g=(0,o.tZ)("div",{children:(0,o.tZ)(fc.ZP,{preset:"plain",icon:h?sh.T:uh.AZ,label:h?"设置":""})});return(0,o.BX)("div",{className:"Post-ActionMenuButton",ref:function(t){e.target=t},children:[(0,o.tZ)(hh.Z,{placement:"top",isOpen:t,target:this.reallytarget,isFixed:!0,children:"你可以在这里设置评论权限"}),(0,o.BX)(ph.ZP,{arrowed:!v,menuClassName:Jr()("Post-ActionMenu",{"Post-ActionMenu--withCommentSettings":v}),toggler:g,onClick:function(t){return e.handleMenuClick(t,{isAuthor:p,isMobile:a})},stickHover:!0,reversed:!0,children:[m&&this.renderReportItem(),p&&this.renderEditItem(),p&&(0,o.BX)(o.HY,{children:[(0,o.tZ)(Ch,{current:d,id:r.id,onChange:this.props.updateRepublishPermission}),(0,o.tZ)(ph.R,{})]}),v&&(0,o.BX)(o.HY,{children:[(0,o.tZ)(mh.rt,{current:l,target:r,onChange:this.props.updateCommentPermission}),(0,o.tZ)(ph.R,{})]}),Z&&(0,o.tZ)(ph.sN,{onClick:this.onCloseReward,children:"关闭赞赏"}),p&&this.renderDeleteItem(),f&&this.renderAnnotationItem()]}),m&&this.renderReportModal(),p&&this.renderDeleteModal(),f&&this.renderAnnotationModal()]})},n}(h.Component);Ah.propTypes={article:ic().object.isRequired,addAnnotation:ic().func.isRequired,cancelAnnotation:ic().func.isRequired,deletePost:ic().func.isRequired,showNotification:ic().func.isRequired,updateCommentPermission:ic().func.isRequired,updateRepublishPermission:ic().func.isRequired,updateArticleReward:ic().func.isRequired,rewardInfo:ic().shape({isRewardable:ic().bool,tagline:ic().string}),justPublished:ic().bool},Ah.defaultProps={rewardInfo:{isRewardable:!1,tagline:""}};var _h=(0,Xe.compose)(I.withRouter,(0,Mp.$)(),Ac.Z,(0,Re.connect)(null,{addAnnotation:vh.u,cancelAnnotation:vh.e,deletePost:gh.fR,showNotification:jt.c0,updateCommentPermission:gh.R_,updateRepublishPermission:Bo.OO,updateArticleReward:Po.i3,getCommercialInfo:gh.g1}))(Ah),yh=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handleVote=function(t){var n=e.props,o=n.article.id;(0,n.updateArticleVote)(o,t)},e}var r=n.prototype;return r.componentDidMount=function(){var e=this.props,t=e.article,n=t.id,o=t.author,r=e.checkIfCanConvertToVessay,i=e.currentUser;(0,xp.Z)(i,o)&&r(n,"article")},r.render=function(){var e=this.props,t=e.currentUser,n=e.isMobile,r=e.authRequired,i=e.rewardInfo,a=e.article,c=e.positionStatus,s=e.onCommentClick,u=e.onFavClick,l=e.onLikeClick,d=e.onRepublishClick,p=e.children,h=e.justPublished,f=e.onContributeClick,m=e.isInListItem,v=e.toggleLike2020,Z=e.useVessayV2,g=e.blockStrategies,E=e.onShare,T=a.id,C=a.type,A=a.author,_=a.voteupCount,y=a.voting,S=a.title,I=a.commentCount,b=a.adminClosedComment,w=a.isLiked,R=a.copyrightPermission,N=a.enableConvert,O=(0,xp.Z)(t,A),D=!(t&&t.isOrg),B=Boolean(rh(a)),P=O&&!n&&!B&&!m,k=!n&&!O&&["public","need_review"].includes(R),x=(0,Yp.Z)([(0,Yp.m)(g)],jp.W9);return(0,o.BX)(Jp.eX,{children:[(0,o.tZ)(o.HY,{children:x({componentList:[{name:"vote",component:(0,o.tZ)(nh.Z,{type:C,count:_,onVote:this.handleVote,voting:y,isOwner:O,handleToggleGuide:l,disableAuth:n})},{name:"comment",component:(0,o.tZ)(Qp.Z,{className:"BottomActions-CommentBtn",onClick:s,commentClosed:b,count:I,positionStatus:c})},{name:"share",component:!n&&(0,o.tZ)(eh.Z,{id:T,type:"article",url:(0,Xp.x$)(T),title:S,authorName:A&&A.name,positionStatus:c,onShare:E})},{name:"like",component:!n&&(0,o.tZ)(ah,{className:"ContentItem-action",onClick:r((function(){uc.Z.trackEvent(null,{id:w?7695:7694,action:w?"UnLike":"Like"}),v(T)})),isLiked:w})},{name:"favlist",component:D&&(0,o.tZ)($p.Z,{onClick:u,label:n?"":"收藏"})}]})}),k&&(0,o.tZ)(ch,{onClick:d}),(0,o.tZ)(_h,{article:a,rewardInfo:i,justPublished:h}),P&&(0,o.tZ)(fc.ZP,{preset:"plain",onClick:f,icon:Kp.h,label:"投稿"}),!n&&N&&O&&(0,o.tZ)(th.Z,{type:"article",id:T,useVessayV2:Z,isAuthor:O}),p]})},n}(h.Component);yh.propTypes={article:ic().object.isRequired,rewardInfo:ic().shape({isRewardable:ic().bool,tagline:ic().string}),positionStatus:ic().string,onCommentClick:ic().func.isRequired,onFavClick:ic().func.isRequired,onLikeClick:ic().func,onContributeClick:ic().func,justPublished:ic().bool,isInListItem:ic().bool};var Sh=(0,Xe.compose)((0,Mp.$)(),Ac.Z,Ad.OW,(0,Re.connect)((function(e){return{useVessayV2:(0,de.uC)(e,oh.Ti)===oh.Jl}}),{updateArticleVote:et.Pt,toggleLike2020:et.cg,checkIfCanConvertToVessay:$e.Zq}))(yh),Ih=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handleNextArticleLink=function(){Promise.resolve(uc.Z.trackEvent(e,{action:"OpenUrl",name:"下一篇"})).then((function(){location.href=(0,Xp.x$)(e.props.next.id)}))},e}return n.prototype.render=function(){var e=this.props.next.title;return(0,o.BX)("div",{role:"button",tabIndex:0,className:"NextArticle",onClick:this.handleNextArticleLink,children:[(0,o.tZ)("span",{className:"NextArticle-Next",children:"下一篇"}),(0,o.tZ)("span",{className:"NextArticle-Title",children:e})]})},n}(h.Component),bh=n(57636),wh=n(88635),Rh=n(75764),Nh=function(e){var t=e.show,n=e.children,r=e.className;return(0,Rh.Yz)(t,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}}).map((function(e){var t=e.item,i=e.key,a=e.props;return t&&(0,o.tZ)(Rh.q.div,{style:a,className:r,children:n},i)}))},Oh=function(e){return(0,o.tZ)(Uu.Z,{children:(0,o.tZ)(Nh,(0,U.Z)({},e))})},Dh=function(e){return Boolean(1===e)},Bh=function(e){return Boolean(-1===e)},Ph=function(e,t){var n=Dh(t)?function(e){return Math.max(e-1,0)}(e):Bh(t)?e:function(e){return e+1}(e),o=Dh(t)||Bh(t)?"赞同 ":"已赞同 ";return 0===n?"赞同":o+(0,Is.Zh)(n).trim()},kh=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={show:!1,justLiked:!1},e.threshold=80,e.updateVisibility=function(){var t=window.pageYOffset;t>e.threshold&&!e.state.shown?e.setState({shown:!0,justLiked:!1}):t<e.threshold&&e.state.shown&&e.setState({shown:!1,justLiked:!1})},e.handleToggleVote=e.props.authRequired((function(t){var n=e.props,o=n.id,r=n.updateArticleVote,i=n.voting;uc.Z.trackEvent(t.target,{action:1===i?"UnUpvote":"Upvote",element:"Button"}),r(o,1===i?"neutral":"up")}),A.q0.vote),e}var r=n.prototype;return r.componentDidMount=function(){var e=document.querySelector(".TitleImage--fullScreen");e&&(this.threshold=e.offsetHeight+this.threshold),this.updateVisibility()},r.componentDidUpdate=function(e){var t=this;1!==this.props.voting||1===e.voting||this.state.justLiked||this.setState({justLiked:!0},(function(){t.timeoutId=setTimeout((function(){return t.setState({justLiked:!1})}),300)}))},r.componentWillUnmount=function(){this.timeoutId&&clearTimeout(this.timeoutId)},r.render=function(){var e=this.props,t=e.id,n=e.voting,r=e.count,i=e.url,a=e.title,c=e.authorName,s=e.isAuthor,u=e.stickyFixed,l=e.blockStrategies,d=void 0===l?{}:l,p=d.isBlockingVote,f=d.isBlockingShare,m=this.state,v=m.justLiked,Z=m.shown,g=(0,o.BX)("button",{children:[(0,o.tZ)("div",{className:"Post-SideActions-icon",children:(0,o.tZ)(bh.xP,{center:!0,size:20})}),"分享"]}),E=1===n,T=Ph(r,n),C=function(e,t){return 0===e?"赞同":(Dh(t)?"已赞同 ":"赞同 ")+(0,Is.Zh)(e).trim()}(r,n);return(0,o.BX)(h.Fragment,{children:[(0,o.BX)(Oh,{show:Z&&u,className:Jr()("Post-SideActions",{"Post-SideActionsDisabled":s}),children:[!p&&(0,o.BX)(Ne.$U,{as:"button",zaType:"Button",zaAction:E?"UnUpvote":"Upvote",zaText:E?"取消赞同":"赞同",disabled:s,className:Jr()("like",{active:E,justLiked:v}),onClick:this.handleToggleVote,children:[(0,o.tZ)("div",{className:"Post-SideActions-icon",children:(0,o.tZ)(td.Ex,{className:"Post-SideActions-upIcon",size:16})}),(0,o.tZ)("div",{className:"likeCount",children:(0,o.tZ)("div",{className:"likeCount-inner","data-previous":T,children:C})})]}),!f&&(0,o.tZ)(eh.Z,{id:t,type:"article",url:i,title:a,authorName:c,toggler:g,positionStatus:"fixed"})]}),(0,o.tZ)(wh.Z,{threshold:50,emitOnce:!1,onScrollUp:this.updateVisibility,onScrollDown:this.updateVisibility})]})},n}(h.Component);kh.propTypes={id:ic().oneOfType([ic().number,ic().string]).isRequired,isAuthor:ic().bool,voting:ic().oneOf([-1,0,1]).isRequired,count:ic().number,url:ic().string.isRequired,title:ic().string.isRequired,authorName:ic().string.isRequired},kh.defaultProps={voting:0};var xh=(0,Xe.compose)(Ac.Z,Ad.OW,(0,Re.connect)(null,{updateArticleVote:et.Pt}))(kh),Lh={comment:"底部评论",collect:"收藏",up:"赞同",down:"反对",neutral:"取消赞同/反对"},Uh=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).zaRef=(0,h.createRef)(),e.state={favlistsShown:!1,republishApplyShown:!1,positionStatus:"normal"},e.createOiaHandler=function(t){return function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var c=e.props,s=c.isMobile,u=c.shouldSpecialOia;s&&u?(0,qp.Z)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:Lh[t]}):null==n||n.apply(void 0,(0,r.Z)(i))}},e.handleFavButtonClick=function(t){(0,Wp.E)(t,1282),e.createOiaHandler("collect")(e.handleFavlistsShown)},e.handleRepublishButtonClick=function(t){(0,Wp.E)(t,8928,{button:{text:"申请转载"}}),e.props.authRequired((function(){return e.setState({republishApplyShown:!0})}))()},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleFavlistsShown=function(){e.props.authRequired((function(){return e.setState({favlistsShown:!0})}),A.q0.favlists)()},e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleScrollIntoComment=function(){if(e.props.isMobile){var t=document.querySelector(".Post-MobileComments");t&&t.scrollIntoView({block:"start",behavior:"smooth"})}else{var n=e.state.positionStatus;if("fixed"===n)e.props.updateCommentStatus(n);else{var o=document.querySelector(".Comments-container");o&&o.scrollIntoView({block:"start",behavior:"smooth"})}}},e.showComments=function(t){(0,Wp.E)(t,1281),e.createOiaHandler("comment")(e.handleScrollIntoComment)},e.handleOiaVoteClick=function(t,n){e.createOiaHandler(n)()},e}return n.prototype.render=function(){var e=this,t=this.state,n=t.favlistsShown,r=t.republishApplyShown,i=t.positionStatus,a=this.props,c=a.article,s=a.paging,u=a.rewardInfo,l=a.justPublished,d=a.onContributeClick,p=a.shouldSpecialOia,h=a.isMobile,f=a.currentUser,m=a.onShare,v=c.id,Z=c.author,g=c.voteupCount,E=c.voting,T=c.title,C=(0,xp.Z)(f,Z),A="fixed"===i,_={type:"Post",id:String(v)},y={content:_},S=!h;return(0,o.tZ)(pc.Z,{bottom:!0,onPositionStatusChange:this.handlePositionStatusChange,children:(0,o.BX)("div",{ref:function(t){e.actionEle=t},className:"RichContent-actions",children:[(0,o.BX)(bd.r,{module:"BottomBar",card:y,children:[(0,o.tZ)(Ne.pS,{ref:this.zaRef}),(0,o.BX)(Sh,{rewardInfo:u,article:c,positionStatus:i,onCommentClick:this.showComments,onFavClick:this.handleFavButtonClick,onLikeClick:h&&p?this.handleOiaVoteClick:null,onRepublishClick:this.handleRepublishButtonClick,justPublished:l,onContributeClick:d,onShare:m,children:[s.next&&!h&&A&&(0,o.tZ)(Ih,{next:s.next}),(0,o.tZ)(Hp.E,{id:v,type:"article",shown:n,onClose:this.handleFavlistHide}),(0,o.tZ)(Vp,{id:v,shown:r,onClose:function(){e.setState({republishApplyShown:!1})}})]})]}),S&&(0,o.tZ)(Ne.eV,{content:_,block:"LeftTabBar",children:(0,o.tZ)(bd.r,{module:"LeftTabBar",card:y,children:(0,o.tZ)(xh,{stickyFixed:A,id:v,isAuthor:C,voting:E,count:g,url:(0,Xp.x$)(v),title:T,authorName:Z&&Z.name})})})]})})},n}(h.Component);Uh.propTypes={article:ic().object.isRequired,paging:ic().object.isRequired,isRewardable:ic().bool,tagline:ic().string,updateCommentStatus:ic().func,justPublished:ic().bool,onContributeClick:ic().func},Uh.defaultProps={paging:{}};var Fh=(0,Xe.compose)((0,Mp.$)(),Ac.Z,(0,Re.connect)((function(e){return{shouldSpecialOia:(0,de.cq)(e)}})))(Uh),Mh=n(74264),Gh=n(59836),zh=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).zaRef=(0,h.createRef)(),e.openInApp=function(){(0,qp.Z)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:"关注用户"})},e.openLogin=function(){location.assign("https://www.zhihu.com/signin?next=".concat(encodeURIComponent(location.href)))},e.handleFollowButtonClick=function(t){var n=e.props,o=n.followOpenInApp,r=n.author,i=n.isMobile,a=n.currentUser,c=n.onToggleFollow,s=Boolean(a),u=r.isFollowing?"UnFollow":"Follow";return(0,Wp.E)(t,{id:1285,action:u}),null==c||c(!r.isFollowing),o&&i?e.openInApp():!!s||e.openLogin()},e}return n.prototype.render=function(){var e=this.props,t=e.author,n=e.isAuthor,r=e.isMobile,i=e.currentUser,a=Boolean(i);return(0,o.BX)(Ne.eV,{content:{type:"User",token:t.urlToken},children:[(0,o.tZ)(Ne.pS,{ref:this.zaRef}),(0,o.BX)("div",{className:Jr()("Post-Author",{"Post-Author-Mobile":r}),children:[(0,o.tZ)(Mh.Z,{author:t,roundAvatar:!0,avatarSize:r?34:38,userLinkV2:!0}),!n&&(a||r)&&(0,o.tZ)(Gh.Z,{preset:"primary",type:t.type,id:t.urlToken,gender:!r&&t.gender,isFollowing:t.isFollowing,onClick:this.handleFollowButtonClick})]})]})},n}(h.Component);zh.propTypes={author:ic().object.isRequired,postId:ic().number.isRequired,isAuthor:ic().bool,followOpenInApp:ic().bool};var Hh=(0,Xe.compose)((0,Mp.$)(),Ks.Z)(zh),qh=function(){return(0,o.tZ)(al.Z,{allowSignUp:C.Z.allowSignUp,neverHide:!0,isSearchPage:!1,searchHeaderShown:!0,handleClickSearchBox:function(){location.href="//".concat(C.Z.wwwHost,"/search")}})},Vh=n(9426),Xh=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={showAllReviewers:!1,modalShown:!1,reviewersChangeLine:!1},e.handleListHide=function(){return e.setState({modalShown:!1})},e.handleListShown=function(){return e.setState({modalShown:!0})},e.handleShowAllReviewers=function(){var t=e.props.isAuthor;e.state.showAllReviewers||e.setState({showAllReviewers:!0}),t&&e.setState({showReviewComment:!0}),e.handleListShown()},e}var r=n.prototype;return r.componentDidMount=function(){var e=document.querySelector(".TopicList").offsetHeight;this.handleReviewersChangeLine(e>=45)},r.handleReviewersChangeLine=function(e){this.setState({reviewersChangeLine:e})},r.render=function(){var e=this.props,t=e.reviewers,n=e.type,r=e.isAuthor,i=this.state,a=i.showAllReviewers,c=i.reviewersChangeLine,s=i.modalShown,u=t.slice(0,a?t.length:4).map((function(e,n){var r;return n!==t.length-1&&e.name.indexOf("、")<0&&(r=(0,o.tZ)("span",{children:"、"})),(0,o.BX)("div",{className:"PostIndex-reviewers-userlink-wrapper",children:[(0,o.tZ)(Wd.Z,{className:"PostIndex-reviewerLink",blank:!0,user:e},e.id),r]},n)}));return(0,o.BX)("div",{className:Jr()("PostIndex-reviewers",{"PostIndex-reviewers-left":c}),children:[u,Boolean(t.length)&&(0,o.tZ)(fc.ZP,{preset:"plain",className:Jr()("PostIndex-showReviewerButton",(t.length>4||r)&&"is-clickable"),onClick:this.handleShowAllReviewers,children:t.length>4&&!a?"等".concat(t.length,"人亦有帮助"):"亦有帮助"}),(0,o.tZ)(Ve.Z,{size:"fullPage",onClose:this.handleListHide,children:s&&(0,o.tZ)(Vh.Z,{voteupCount:t.length,items:t,isDrained:!1,isFetching:!1,type:n,onLoad:function(){},text:"亦有帮助"})})]})},n}(h.Component);Xh.propTypes={reviewers:ic().array.isRequired,type:ic().string,isAuthor:ic().bool.isRequired};var Wh=n(67664),Kh=n(63099),jh=function(e){return(0,o.tZ)(sc.Box,(0,U.Z)({mx:"auto"},e))};function Yh(e){var t=e.fullScreen,n=e.src,r=e.width,i=e.height,a=e.alt;return t?(0,o.tZ)(jh,{children:(0,o.tZ)(Kh.Z,{ratio:3,children:(0,o.tZ)("img",{src:n,alt:a,width:"100%",height:"100%",css:{objectFit:"cover"}})})}):(0,o.tZ)(jh,{maxWidth:690,mt:[0,"1em"],children:r>0&&i>0?(0,o.tZ)(Kh.Z,{ratio:r/i,children:(0,o.tZ)(Wh.G6,{src:n,alt:a,width:"100%",height:"100%"})}):(0,o.tZ)(Wh.G6,{src:n,alt:a,width:"100%"})})}function Qh(e){return e&&e.offsetTop?e.offsetTop+(e.offsetParent?Qh(e.offsetParent):0):0}var Jh=n(81713),$h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"?utm_medium=column&utm_content=".concat(e)},ef=function(e,t){(0,i.rH)("zhihu://articles/".concat(e).concat($h(t)))},tf=function(e,t){(0,i.rH)("zhihu://columns/".concat(e).concat($h(t)))},nf=n(14038),of=(0,Nt.P1)([function(e){return e.post},function(e){return e.columns},function(e){return e.articleContribution.deleteContributeIdList}],(function(e,t,n){var o=Array.isArray(e&&e.contributions)?e.contributions.filter((function(e){var t=e.id;return!n.includes(t)})).map((function(e){var n=e.column,o=e.state,r=e.id;return{column:t[n.id],state:o,id:r}})):[];return{contributions:o}})),rf=(0,Nt.P1)([function(e){return e.articleContribution.handledContributeIdList},function(e){return e.articleContribution.contributeRequests}],(function(e,t){var n=t.filter((function(t){var n=t.column;return!e.includes(n.id)}));return{contributeRequests:n}})),af=(0,Nt.P1)([function(e){return e.post},function(e){return e.reward}],(function(e,t){var n=e.canOpenTipjar,o=void 0!==n&&n,r=e.canTip,i=e.id,a=t.article[i]||{},c=a.bio,s=a.income,u=a.tipjarorsCount,l=a.tradeNumber,d=a.tipjarors,p=a.users,h=a.canTip,f=r,m=o;return"boolean"==typeof h&&(f=h,m=!h),{rewardInfo:{canOpenReward:m,isRewardable:f,rewardMemberCount:u,tagline:c,rewardTotalMoney:s},articleReward:{article:(0,Ke.Z)({},i,{users:p||d,tradeNumber:l})}}})),cf=n(33672),sf=n(64849),uf=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t={info:e.info,related:e.related};return e.isMobile?(0,o.tZ)(sf.Z,{data:t}):(0,o.tZ)(cf.Z,{data:t})},n}(h.Component);uf.propTypes={info:ic().object.isRequired,related:ic().oneOfType([ic().oneOf([null]),ic().shape({pageId:ic().number.isRequired,sessionId:ic().number.isRequired,pageType:ic().string.isRequired})]),isMobile:ic().bool};var lf=(0,js.Z)(null)(uf),df=n(91464),pf=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.reason,n=e.isAuthor;return(0,o.BX)("div",{className:"PostIndex-warning",children:[t&&(0,o.tZ)("div",{className:"PostIndex-warningTitle",children:t}),(0,o.tZ)("div",{className:"PostIndex-warningContent",children:n?"建议修改期间，文章内容对其他用户不可见。修改提交后会自动进入评估状态。":"作者修改内容通过后，文章会重新显示。"}),(0,o.tZ)("a",{target:"_blank",href:"https://www.zhihu.com/question/24752645",rel:"noopener noreferrer",className:"PostIndex-warningHelp","aria-label":"帮助",children:(0,o.tZ)(df.rk,{})})]})},n}(h.Component);pf.propTypes={reason:ic().string.isRequired,isAuthor:ic().bool.isRequired};var hf=n(81345),ff=n(89231),mf=n.n(ff),vf=n(71848),Zf=n(13307),gf=n(42178);var Ef=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={previewImage:null,prevImgUrls:[]},e.handleClick=function(t){var n,o,r=e.props,i=r.ua,a=r.isMobile,c=e.state.prevImgUrls,s=a&&i.MQQBrowser&&(null===(n=window.browser)||void 0===n||null===(o=n.app)||void 0===o?void 0:o.openPhotoBrowser),u=t.target;"IMG"===u.tagName&&u.classList.contains("zh-lightbox-thumb")&&(s?window.browser.app.openPhotoBrowser(c,mf()(c,(function(e){return e===u.dataset.original})),0):e.setState({previewImage:u}))},e.handlePreviewImageClose=function(){e.setState({previewImage:null})},e}var r=n.prototype;return r.componentDidMount=function(){var e=this.props,t=e.ua,n=e.html,o=e.isMobile;t.MQQBrowser&&o&&this.setState({prevImgUrls:(0,gf.Z)(n)})},r.render=function(){var e=this,t=this.props,n=t.html,r=t.ecommerce,i=t.author,a=t.id,c=t.title,s=t.url,u=t.isAuthor,l=t.shouldShowCatalog,d=this.state.previewImage;return(0,o.BX)("div",{className:"Post-RichTextContainer",onClick:this.handleClick,children:[(0,o.tZ)("div",{css:{marginTop:16},children:(0,o.tZ)(Zf.Z,{html:n,className:"Post-RichText",ecommerce:r,sourceType:"article",sourceId:a,shouldShowCatalog:l,isAuthor:u,maskGradientColor:"GBK99A"})}),(0,o.tZ)(vf.Z,{type:"article",author:i,objectId:a,title:c,url:s}),(0,o.tZ)(hf.Z,{img:d,onClose:function(){return e.setState({previewImage:null})}})]})},n}(h.Component);Ef.propTypes={html:ic().string.isRequired,author:ic().object};var Tf=(0,Re.connect)((function(e){return{ua:(0,de.Uh)(e),isMobile:(0,de.Hu)(e)}}))(Ef),Cf=n(88371),Af=n(27200),_f=function(e){var t=e.parent.id,n=(0,h.useRef)(),r=(0,h.useCallback)((function(){(0,qp.Z)({trackEvent:n.current.trackEvent,zaV3Text:"评论热区"})}),[]);return(0,o.BX)(o.HY,{children:[(0,o.tZ)(Ne.pS,{ref:n}),(0,o.tZ)(Af.ZP,{requestHost:"www.zhihu.com",commentType:"root_comment",resourceType:"article",resourceId:String(t),zaContentType:"Post",showSecondaryComment:!0,showSecondaryCommentVoteButton:!0,css:{margin:0,paddingTop:"15px"},customFooter:function(){return null},openInApp:r})]})};_f.propTypes={parent:ic().object.isRequired};var yf=_f,Sf=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).trackChangeOrder=function(e,t){(0,Wp.E)(t,{id:1290,name:t.currentTarget.textContent})},e.trackLike=function(e,t){var n=t.currentTarget.classList.contains("is-liked")?"UnUpvote":"Upvote";(0,Wp.E)(t,{id:1301,action:n})},e.trackPaginationClick=function(t,n){var o=t>n?"PrevPage":"NextPage";uc.Z.trackEvent((0,kc.Z)(e),{id:1300,action:o})},e.handleCommentClose=function(){e.props.updateCommentStatus("bottom")},e}return n.prototype.render=function(){var e=this.props,t=e.parent,n=e.commentPattern,r=e.byComment,i=e.onMount,a=e.onComment,c=e.isMobile;return c?(0,o.tZ)(yf,{parent:t}):(0,o.tZ)(Cf.Z,{autoFocus:!1,parent:t,isMobile:c,commentPattern:n,onOrderChange:this.trackChangeOrder,onItemLike:this.trackLike,onPaginationClick:this.trackPaginationClick,onClose:this.handleCommentClose,onComment:a,byComment:r,onMount:i,showPackupButton:!1,commentInputPosition:"top",shown:!0})},n}(h.Component);Sf.propTypes={parent:ic().object.isRequired,commentPattern:ic().string.isRequired,byComment:ic().oneOfType([ic().number,ic().string]),updateCommentStatus:ic().func.isRequired};var If=(0,Xe.compose)((0,Mp.$)(),(0,bd.a)({module:"CommentList"}))(Sf),bf=function(e){var t=e.panels,n=void 0===t?[]:t;return(0,o.tZ)(pl.Z,{className:"TopRightPanelWrapper",children:(0,o.tZ)(Oh,{show:!0,children:n.map((function(e){var t=e.title,n=e.content,r=e.buttonGroup,i=e.key,a=void 0===i?"":i;return(0,o.BX)("div",{className:"TopRightPanel",children:[t&&(0,o.tZ)("div",{className:"TopRightPanel-title",children:t}),(0,o.tZ)("div",{className:"TopRightPanel-content",children:n}),(0,o.tZ)("div",{className:"TopRightPanel-foot",children:(0,o.tZ)("div",{className:"TopRightPanelButtonGroup",children:r})})]},a)}))})})},wf=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handleRequest=function(t,n){var o=e.props,r=o.postId;(0,o.handleContributeRequest)(r,t,n)},e}var r=n.prototype;return r.componentDidMount=function(){var e=this.props,t=e.postId;(0,e.getContributeRequest)(t)},r.render=function(){var e=this,t=this.props,n=t.contributeRequests,r=t.author;if(0===n.length)return null;var i=n.map((function(t){var n=t.column,i=n.id,a=n.title,c=n.url;return{buttonGroup:(0,o.BX)(h.Fragment,{children:[(0,o.tZ)(fc.ZP,{color:"grey",onClick:function(){return e.handleRequest(i,!1)},children:"忽略"}),(0,o.tZ)(fc.ZP,{color:"blue",onClick:function(){return e.handleRequest(i,!0)},children:"通过"})]}),content:(0,o.BX)(h.Fragment,{children:[(0,o.tZ)(Wd.Z,{user:r,avatar:!1,target:"_blank",noBadge:!0})," 申请将该文章发布到 ",(0,o.tZ)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:a}),"。"]}),title:a,key:i}}));return(0,o.tZ)(bf,{panels:i})},n}(h.Component);wf.propTypes={contributeRequests:ic().array.isRequired,postId:ic().oneOfType([ic().number,ic().string]).isRequired,author:ic().object.isRequired};var Rf=(0,Xe.compose)((0,Re.connect)(null,{handleContributeRequest:ea.xR,getContributeRequest:ea.o8}))(wf),Nf=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.children,n=e.className;return(0,o.tZ)("h3",{className:Jr()("BlockTitle",n),children:t})},n}(h.PureComponent);Nf.propTypes={className:ic().string};var Of=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).onCancelContributeClick=function(){var t=e.props,n=t.column;(0,t.handleCancelContributeClick)(n)},e.openInApp=function(){var t=e.props.column.id;tf(t,"follow_column")},e.handleFollow=function(t){return(0,Wp.E)(t,1288),!e.props.isMobile||e.openInApp()},e}return n.prototype.render=function(){var e=this.props,t=e.column,n=e.state,r=e.isMobile,i=t.intro,a=t.description,c=(0,o.tZ)(Xd.Z,{column:t,avatar:!0,avatarProps:{size:40,round:!0},noHoverCard:r}),s="need_approved"===n,u=(0,o.BX)(o.HY,{children:[(0,o.tZ)(Xd.Z,{column:t,className:"ColumnItem-Title",noHoverCard:r}),s&&" · ",s&&(0,o.BX)("button",{className:"ColumnItem-CancleButton",onClick:this.onCancelContributeClick,children:[(0,o.tZ)("span",{className:"status",children:"投稿中"}),(0,o.tZ)("span",{className:"cancel",children:"撤销投稿"})]})]});return(0,o.tZ)(Jp.ZP,{className:"Column-ColumnItem",data:t,image:c,title:u,meta:i||a})},n}(h.Component);Of.propTypes={column:ic().object.isRequired,state:ic().string};var Df=(0,Mp.$)()(Of),Bf=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handleCancelContributeClick=function(t){var n=e.props,o=n.postId;(0,n.deleteContributeRequest)(o,t.id)},e}return n.prototype.render=function(){var e=this,t=this.props.contributions;return Array.isArray(t)&&0!==t.length?(0,o.BX)("div",{className:"PostIndex-Contributions",children:[(0,o.tZ)(Nf,{children:"文章被以下专栏收录"}),(0,o.tZ)("ul",{children:t.map((function(t){var n=t.column,r=t.state;return(0,o.tZ)(Df,{column:n,state:r,handleCancelContributeClick:e.handleCancelContributeClick},n.id)}))})]}):null},n}(h.Component);Bf.propTypes={contributions:ic().arrayOf(ic().object),postId:ic().number};var Pf=(0,Xe.compose)((0,Re.connect)(null,{deleteContributeRequest:ea.kv}),(0,bd.a)({module:"ColumnList",moduleName:"文章被以下专栏收录"}))(Bf),kf="column:hideOpenColumnModalUntil",xf=6048e5,Lf=2592e6,Uf=1/0,Ff=function(e){var t=T().get(kf)?Uf:Date.now()+e;T().set(kf,String(t))},Mf=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).onDeny=function(){e.props.onClose(),Ff(Lf)},e.onClose=function(){e.props.onClose(),Ff(xf)},e.onConfirm=function(){e.props.onClose(),Ff(Uf)},e}return n.prototype.render=function(){var e=this.props.shown;return(0,o.tZ)(Ve.Z,{title:"邀请你开通专栏",subtitle:"专栏旨在为有持续创作及合作写作需求的用户提供写作工具。发布到专栏，让文章被更多人看到。",onClose:this.onClose,buttonGroupOnly:!0,className:"Column-SpecialModal",children:e&&(0,o.BX)(Ve.w,{direction:"vertical",children:[(0,o.tZ)(fc.ZP,{preset:"primary",color:"blue",component:"a",onClick:this.onConfirm,href:"https://www.zhihu.com/column/request",target:"_blank",children:"立即开通"}),(0,o.tZ)(fc.ZP,{onClick:this.onDeny,children:"暂不开通"})]})})},n}(h.Component);Mf.propTypes={shown:ic().bool,onClose:ic().func.isRequired},Mf.checkShouldShow=function(){var e=Number(T().get(kf))||0;return Date.now()>e};var Gf=n(64068),zf=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handleColumnClick=function(t){uc.Z.trackEvent(t.currentTarget,{id:1591,name:e.props.reason||"推荐专栏的投稿"})},e}return n.prototype.render=function(){var e=this.props,t=e.column,n=e.reason,r=e.contributed,i=e.onSubmit,a=t.articlesCount,c=t.followers,s=t.id,u=r?(0,o.tZ)(fc.ZP,{color:"grey",preset:"primary",className:"CancleButton",children:"已投稿"}):(0,o.tZ)(fc.ZP,{color:"blue",onClick:function(){return i(s)},children:"投稿"}),l={column:t,target:"_blank",onClick:this.handleColumnClick},d=(0,o.tZ)(Xd.Z,(0,F.Z)((0,U.Z)({},l),{avatar:!0,avatarProps:{size:40}})),p=(0,o.tZ)(Xd.Z,(0,F.Z)((0,U.Z)({},l),{className:"ColumnItem-Title"})),h=n||"".concat((0,Is.uf)(c)," 人关注 · ").concat((0,Is.uf)(a)," 篇文章");return(0,o.tZ)(Jp.ZP,{className:"Column-ColumnItem",data:t,image:d,title:p,extra:u,meta:h})},n}(h.Component);zf.propTypes={column:ic().object.isRequired,reason:ic().string,contributed:ic().bool,onSubmit:ic().func.isRequired};var Hf=zf,qf=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={loading:!1},e.submit=function(t){var n=e.props;(0,n.addContributeRequest)(n.articleId,t)},e.handleClose=function(){uc.Z.trackEvent((0,kc.Z)(e),{id:1592,action:"Close",name:"要将该文章投稿到专栏吗"}),e.props.onClose()},e}var r=n.prototype;return r.componentDidMount=function(){this.props.shown&&this.handleModalAppear()},r.componentDidUpdate=function(e){this.props.shown&&!e.shown&&this.handleModalAppear()},r.componentWillUnmount=function(){this.isUnmounted=!0},r.handleModalAppear=function(){var e=this;uc.Z.trackCardShow(this,{id:1590,name:"要将该文章投稿到专栏吗"});var t=this.props,n=t.articleId,o=t.getRecommendedColumns;this.state.loading||(this.setState({loading:!0}),o(n).catch((function(){})).then((function(){e.isUnmounted||e.setState({loading:!1})})))},r.renderContent=function(){var e=this,t=this.props,n=t.recommendedColumns,r=t.pinnedColumns,i=t.sentContributeRequestsIdList,a=t.isOpenedByUser,c=r.length>0,s=n.length>0;return a||c||s?this.state.loading?(0,o.tZ)(Gf.Z,{}):c||s?(0,o.BX)(h.Fragment,{children:[c&&(0,o.tZ)("ul",{className:"PinnedColumns",children:r.map((function(t){var n=t.reason,r=t.column;return(0,o.tZ)("li",{children:(0,o.tZ)(Hf,{column:r,reason:n,contributed:i.includes(r.id),onSubmit:e.submit})},r.id)}))}),s&&(0,o.BX)(h.Fragment,{children:[(0,o.tZ)("h3",{className:"SectionTitle",children:"为你推荐的专栏"}),(0,o.tZ)("ul",{className:"RecommendedColumns",children:n.map((function(t){var n=t.column,r=t.reason;return(0,o.tZ)("li",{children:(0,o.tZ)(Hf,{column:n,reason:r,contributed:i.includes(n.id),onSubmit:e.submit,onCancelSubmit:e.cancelSubmit})},n.id)}))})]})]}):(0,o.tZ)("div",{className:"EmptyState",children:"暂时没有匹配的专栏"}):null},r.render=function(){var e=this.props.shown;return(0,o.tZ)(Ve.Z,{title:"要将该文章投稿到专栏吗？",subtitle:"让好文章被更多人看到",size:"large",onClose:this.handleClose,className:"Column-RecommendationModal",children:e&&this.renderContent()})},n}(h.Component);qf.propTypes={shown:ic().bool,onClose:ic().func.isRequired,getRecommendedColumns:ic().func.isRequired,recommendedColumns:ic().array.isRequired,pinnedColumns:ic().array.isRequired,articleId:ic().number.isRequired,sentContributeRequestsIdList:ic().array.isRequired,isOpenedByUser:ic().bool};var Vf=(0,Re.connect)((function(e){var t=e.articleContribution;return{recommendedColumns:t.recommendedColumns,pinnedColumns:t.pinnedColumns,sentContributeRequestsIdList:t.sentContributeRequestsIdList}}),{getRecommendedColumns:ea.Ue,addContributeRequest:ea.zS})(qf),Xf=n(11481),Wf=n(40108),Kf=n.p+"assets/liukanshan_blue@2x.187f55d4.png",jf=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={folded:e.props.enabled},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.enabled,r=t.onButtonClick,i=this.state.folded,a=(0,o.tZ)(Vc.qE,{className:"UserLink-avatar",url:Kf,alt:"刘看山图片",size:i?18:40});if(i)return(0,o.BX)("li",{className:"AutoInvite-folded",onClick:function(){return e.setState({folded:!1})},children:[a,(0,o.tZ)("span",{className:"AutoInvite-title",children:"委托刘看山邀请"}),(0,o.BX)("span",{className:"AutoInvite-badge",children:[(0,o.tZ)(Xf.BS,{height:16,width:16}),(0,o.tZ)("span",{className:"text",children:"已开启"})]}),(0,o.tZ)(Wf.f,{height:24,width:24,className:"AutoInvite-arrow"})]});var c=n?(0,o.tZ)(fc.ZP,{color:"grey",preset:"primary",className:"CancleButton",onClick:r,children:"已开启"}):(0,o.tZ)(fc.ZP,{color:"blue",preset:"primary",onClick:r,children:"开启邀请"}),s=n?"正在为你智能邀请感兴趣的创作者":"开启后为你智能邀请感兴趣的创作者";return(0,o.tZ)("li",{children:(0,o.tZ)(Jp.ZP,{className:"Column-ColumnItem",title:"委托刘看山邀请",image:a,meta:!i&&s,extra:!i&&c})})},n}(h.Component);jf.propTypes={reason:ic().string,enabled:ic().bool,onButtonClick:ic().func.isRequired};var Yf=jf,Qf=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.author,n=e.reason,r=e.hasInvited,i=e.onInvite,a=r?(0,o.tZ)(fc.ZP,{color:"grey",preset:"primary",className:"CancleButton",children:"已邀请"}):(0,o.tZ)(fc.ZP,{color:"blue",onClick:function(){return i(t.id)},children:"邀请投稿"}),c=(0,o.tZ)(Wd.Z,{user:t,avatar:!0,avatarProps:{size:40}}),s=(0,o.tZ)(Wd.Z,{user:t});return(0,o.tZ)(Jp.ZP,{className:"Column-ColumnItem",data:t,title:s,image:c,meta:n,extra:a})},n}(h.Component);Qf.propTypes={author:ic().object.isRequired,reason:ic().string,hasInvited:ic().bool,onInvite:ic().func.isRequired};var Jf=Qf,$f="column:closeInviteModalTimes",em=function(){return Number(T().get($f))||0},tm=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={loading:!1},e.touched=!1,e.handleInvite=function(t){uc.Z.trackEvent((0,kc.Z)(e),{id:1589,action:"Click",name:"邀请投稿"}),e.touched=!0;var n=e.props,o=n.dispatch,r=n.columnId;o(Fa(r,t))},e.toggleAutoInvite=function(){var t=e.props,n=t.dispatch,o=t.autoInviteEnabled,r=t.columnId;uc.Z.trackEvent((0,kc.Z)(e),{id:o?2605:2604}),n(Ua(r,!o))},e.handleClose=function(){uc.Z.trackEvent((0,kc.Z)(e),{id:1593,action:"Close",name:"邀请大家来投稿"});var t=e.props,n=t.onClose;t.isOpenedByUser||e.touched||T().set($f,String(em()+1)),n()},e.handleNeverShow=function(t){uc.Z.trackEvent(t.currentTarget,{id:1594,action:"Click",name:"邀请投稿弹窗不再提示按钮"}),T().set($f,String(1/0)),e.props.onClose()},e}var r=n.prototype;return r.componentDidMount=function(){this.props.shown&&this.handleModalAppear()},r.componentDidUpdate=function(e){this.props.shown&&!e.shown&&this.handleModalAppear()},r.componentWillUnmount=function(){this.isUnmounted=!0},r.handleModalAppear=function(){var e=this;uc.Z.trackCardShow(this,{id:1587,name:"邀请大家来投稿"});var t=this.props,n=t.columnId,o=t.dispatch,r=t.isOpenedByUser;!this.state.loading&&n&&(this.setState({loading:!0}),o(function(e,t){return{API:{types:xa.GET_RECOMMENDED_CONTRIBUTORS,endpoint:"/columns/".concat(e,"/recommendation-contributors").concat(t?"?src=user":""),fetchOptions:{credentials:"include"}}}}(n,r)).then((function(){e.isUnmounted||(e.setState({loading:!1}),e.touched=!1)}),(function(e){if(!e.payload||409!==e.payload.code)throw e})))},r.renderContent=function(){var e=this,t=this.props,n=t.recommendedContributors,r=t.isOpenedByUser,i=t.autoInviteEnabled;return r||0!==n.length?this.state.loading?(0,o.tZ)(Gf.Z,{}):(0,o.BX)(o.HY,{children:[(0,o.tZ)("ul",{className:"AutoInvite",children:(0,o.tZ)(Yf,{onButtonClick:this.toggleAutoInvite,enabled:i})}),(0,o.tZ)("ul",{children:n.map((function(t){var n=t.author,r=t.reason,i=t.hasInvited;return(0,o.tZ)("li",{children:(0,o.tZ)(Jf,{author:n,reason:r,hasInvited:i,onInvite:e.handleInvite})},n.id)}))})]}):null},r.render=function(){var e=this.props,t=e.shown,n=e.columnId,r=e.isOpenedByUser;if(!n)return null;var i=!r&&(0,o.BX)("p",{children:["暂时不想邀请他人投稿？",(0,o.tZ)("button",{onClick:this.handleNeverShow,children:"不再显示"})]});return(0,o.tZ)(Ve.Z,{title:"想要专栏获得更多文章？邀请大家来投稿",subtitle:"为你精选优质作者，让你的专栏更受欢迎",size:"large",onClose:this.handleClose,className:"Column-RecommendationModal",footer:i,children:t&&this.renderContent()})},n}(h.Component);tm.propTypes={shown:ic().bool,onClose:ic().func.isRequired,columnId:ic().string.isRequired,recommendedContributors:ic().array.isRequired,autoInviteEnabled:ic().bool.isRequired,isOpenedByUser:ic().bool},tm.checkShouldShow=function(){return em()<2};var nm=(0,Re.connect)((function(e){var t=e.columnContribution;return{recommendedContributors:t.recommendedContributors,autoInviteEnabled:t.autoInviteEnabled}}))(tm),om=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).isFirst=!0,e.state={applyModalShown:!1,recommendModalShown:!1,inviteModalShown:!1,isOpenedByUser:!1},e.handleCloseModals=function(){e.setState({applyModalShown:!1,recommendModalShown:!1,inviteModalShown:!1,isOpenedByUser:!1})},e}var r=n.prototype;return r.componentDidMount=function(){var e=this,t=this.props,n=t.currentUser,o=t.justPublishedQuery,r=t.columnId;(0,t.getShowRecommendModalHandler)((function(){return e.setState({recommendModalShown:!0,isOpenedByUser:!0})})),this.isFirst?this.isFirst=!1:"1"!==o||n.isOrg?"2"===o&&(r||n.isOrg?r&&nm.checkShouldShow()&&(this.timeout=setTimeout((function(){return e.setState({inviteModalShown:!0})}),600)):this.timeout=setTimeout((function(){return e.setState({recommendModalShown:!0})}),600)):this.checkShouldShowApplyColumnModal().then((function(t){e.isUnmounted||e.setState(t?{applyModalShown:!0}:{recommendModalShown:!0})}))},r.componentWillUnmount=function(){this.isUnmounted=!0,clearTimeout(this.timeout)},r.checkShouldShowApplyColumnModal=function(){var e=this;return(0,_.Z)((function(){return(0,y.Jh)(this,(function(t){switch(t.label){case 0:return Mf.checkShouldShow()?[4,e.props.loadSwitches(["couldApplyColumn"])]:[2,!1];case 1:return t.sent(),[2,e.props.switches.couldApplyColumn]}}))}))()},r.render=function(){var e=this.state,t=e.applyModalShown,n=e.recommendModalShown,r=e.inviteModalShown,i=e.isOpenedByUser,a=this.props,c=a.articleId,s=a.columnId;return(0,o.BX)(o.HY,{children:[(0,o.tZ)(Mf,{shown:t,onClose:this.handleCloseModals}),(0,o.tZ)(Vf,{articleId:c,shown:n,onClose:this.handleCloseModals,isOpenedByUser:i}),s&&(0,o.tZ)(nm,{shown:r,columnId:s,onClose:this.handleCloseModals})]})},n}(h.Component);om.propTypes={justPublishedQuery:ic().oneOf(["1","2"]),articleId:ic().number.isRequired,columnId:ic().string};var rm=(0,Xe.compose)(Ks.Z,(0,Re.connect)((function(e){return{switches:e.switches}}),{loadSwitches:Or.X2}))(om),im=n(28252),am=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).openApp=function(){A.dd||ef(e.props.postId,"view_all")},e}return n.prototype.render=function(){return(0,o.tZ)("button",{onClick:this.openApp,className:"Post-Button-ViewMore",children:"查看更多"})},n}(h.Component);am.propTypes={postId:ic().number.isRequired};var cm=am,sm=n(47417),um=n.n(sm),lm=function(e){return e.displayName||e.name||"Component"};var dm=n(42116),pm=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).openInApp=function(t){if(e.props.shouldSpecialOia&&!A.dd){t.preventDefault();var n=e.props.article;ef(n.id,"content_list")}},e}var r=n.prototype;return r.componentDidMount=function(){this.RecommendItemTitleEl.offsetHeight>25&&(this.RecommendItemSummaryEl.style.display="none");var e=this.props.article;e.author||window.Raven.captureException(new Error("Missing `author` in article data."),{tags:{scope:"Column"},extra:{article:e}})},r.render=function(){var e=this,t=this.props,n=t.article,r=t.editorChoice,i=n.imageUrl,a=n.title,c=n.excerpt,s=n.author,u=(void 0===s?{}:s).name,l=void 0===u?"":u,d=n.column,p=n.url,h=i?64:Zh.PY,f=d&&l.length>4?"".concat(l.slice(0,4),"..."):l,m=d?" · 发表于".concat(d.title):"";return(0,o.BX)("a",{onClick:this.openInApp,href:p,className:"MobilePostItem",children:[(0,o.BX)("div",{className:"MobilePostItem-Description",children:[(0,o.tZ)("div",{className:"MobilePostItem-Title",ref:function(t){e.RecommendItemTitleEl=t},children:a}),(0,o.tZ)("div",{className:"MobilePostItem-Summary u-ellipsis",ref:function(t){e.RecommendItemSummaryEl=t},children:(0,dm.NJ)(c,h)}),(0,o.BX)("div",{className:"MobilePostItem-Footer",children:[r&&(0,o.tZ)("span",{className:"MobilePostItem-edited",children:"编辑精选"}),f,m]})]}),i&&(0,o.tZ)("img",{src:(0,Yr.imgUrl)(i,"ipico"),srcSet:"".concat((0,Yr.imgUrl)(i,"250x250")," 2x, ").concat((0,Yr.imgUrl)(i,"ms")," 3x"),className:"MobilePostItem-TitleImage",alt:a})]})},n}(h.PureComponent);pm.propTypes={article:ic().object.isRequired,editorChoice:ic().bool.isRequired};var hm=(0,Xe.compose)((0,Re.connect)((function(e){return{shouldSpecialOia:(0,de.cq)(e)}})))(pm),fm=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.componentDidMount=function(){var e=this.props.article;e.author||window.Raven.captureException(new Error("Missing `author` in article data."),{tags:{scope:"Column"},extra:{article:e}})},r.render=function(){var e=this.props.article,t=e.imageUrl,n=e.title,r=e.excerpt,i=e.author,a=(void 0===i?{}:i).name,c=void 0===a?"":a,s=e.column,u=e.url,l=s&&c.length>5?"".concat(c.slice(0,5),"..."):c,d="";return s&&(d=s.title.length>5?"发表于".concat(s.title.slice(0,5),"..."):"发表于".concat(s.title)),(0,o.tZ)("a",{href:u,className:"PostItem",children:(0,o.BX)("div",{children:[t&&(0,o.tZ)("img",{src:(0,Yr.imgUrl)(t,"250x0"),srcSet:"".concat((0,Yr.imgUrl)(t,"qhd")," 2x"),className:"PostItem-TitleImage",alt:n}),(0,o.tZ)("h1",{className:"PostItem-Title",children:n}),!t&&(0,o.tZ)("p",{className:"PostItem-Summary",children:(0,dm.NJ)(r,Zh.PY)}),(0,o.BX)("div",{className:"PostItem-Footer",children:[(0,o.tZ)("span",{children:l}),(0,o.tZ)("span",{className:"PostItem-FooterTitle",children:d})]})]})})},n}(h.Component);function mm(e){var t=e.editorChoice,n=e.article;return(0,Mp.Z)()?(0,o.tZ)(hm,{article:n,editorChoice:t}):(0,o.tZ)(fm,{article:n})}fm.propTypes={article:ic().object.isRequired},mm.propTypes={article:ic().object.isRequired,editorChoice:ic().bool.isRequired};var vm=n(60236),Zm=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handlePagingButtonClick=function(){var t=e.props,n=t.onClick;"next"===t.direction&&uc.Z.trackEvent((0,kc.Z)(e),{action:"NextPage"}),n()},e}return n.prototype.render=function(){var e=this.props,t=e.direction,n=e.disabled,r="previous"===t?vm.e:Gs.N,i="previous"===t?"PagingButton-Previous":"PagingButton-Next";return(0,o.tZ)(bd.r,{module:"Unknown",moduleName:"推荐阅读",children:(0,o.tZ)("button",{className:Jr()("PagingButton",i),onClick:this.handlePagingButtonClick,disabled:n,children:(0,o.tZ)(r,{size:40,fill:"#d3d3d3"})})})},n}(h.Component);Zm.propTypes={direction:ic().oneOf(["previous","next"]).isRequired,onClick:ic().func.isRequired,disabled:ic().bool},Zm.defaultProps={direction:"next"};var gm=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handleResizeChange=function(){var t=e.props.isMobile,n=document.querySelector(".ColumnPageHeader-Wrapper");!t&&e.RecommendationsEl&&n&&(e.RecommendationsEl.style.width="".concat(n.offsetWidth,"px"))},e}var r=n.prototype;return r.componentDidMount=function(){this.subscription=(0,Id.subscribe)("resize",this.handleResizeChange)},r.componentDidUpdate=function(){this.handleResizeChange()},r.componentWillUnmount=function(){this.subscription&&this.subscription.unsubscribe()},r.render=function(){var e=this,t=this.props,n=t.isMobile,r=t.id,i=t.currentPageItems,a=t.shouldDisableNextPage,c=t.shouldDisablePreviousPage,s=t.nextPage,u=t.previousPage;return 0===i.length?null:(0,o.BX)("div",{role:"complementary","aria-label":"推荐阅读",className:Jr()({"Recommendations-Main":!n}),ref:function(t){e.RecommendationsEl=t},children:[(0,o.tZ)(Nf,{className:"Recommendations-BlockTitle",children:"推荐阅读"}),(0,o.BX)("ul",{className:Jr()({"Recommendations-List":!n}),children:[!n&&(0,o.tZ)(Zm,{disabled:c,direction:"previous",onClick:u}),i.map((function(e){var t=e.article,n=e.editorChoice;return(0,o.tZ)(mm,{article:t,editorChoice:n},t.id)})),!n&&(0,o.tZ)(Zm,{disabled:a,direction:"next",onClick:s})]}),n&&!A.dd&&(0,o.tZ)(cm,{postId:r})]})},n}(h.Component);gm.propTypes={isMobile:ic().bool,id:ic().number,currentPageItems:ic().array,shouldDisableNextPage:ic().bool,shouldDisablePreviousPage:ic().bool,nextPage:ic().func.isRequired,previousPage:ic().func.isRequired},gm.defaultProps={currentPageItems:[]};var Em=(0,Xe.compose)((0,Re.connect)((function(e,t){var n=t.id,o=(e.recommendation[n]||{}).data,r=(0,de.Hu)(e);return{items:o,onlyOnePage:r,isMobile:r}}),(function(e,t){var n=t.id;return{fetchData:function(t){return e(function(e,t){return function(n,o){var r=o().recommendation[e],i=r&&r.paging&&r.paging.next;return n({parentId:e,API:(0,U.Z)({root:C.Z.fetchRoot.zhuanlan,types:za.GET},i?{endpoint:i}:{endpoint:"/articles/".concat(e,"/recommendation"),query:{include:rt()({data:[{article:{column:!0}}]}),limit:t,offset:0}})})}}(n,t))}}})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return function(t){var n=function(n){(0,tc.Z)(i,n);var r=(0,nc.Z)(i);function i(){var t;return(0,ec.Z)(this,i),(t=r.apply(this,arguments)).fetchCount=0,t.state={isFetching:!1,page:0,isExhausted:!1},t.getCurrentPageItems=function(){var n=t.state.page;return t.props.items.slice(n*e,(n+1)*e)},t.beforeFetch=function(){if(t.state.isExhausted)return Promise.resolve({isExhausted:!0});var n=t.props.items.length,o=t.props.onlyOnePage?n>=e:n>(t.state.page+2)*e;return o||t.fetchCount>2?Promise.resolve({isExhausted:!o}):Promise.reject(new Error("not enough to fetch or fetch too many times"))},t.fetchUntilEnough=function(){return t.beforeFetch().then((function(e){var n=e.isExhausted;return t.fetchEnds(n)}),(function(){return t.fetchStart().then(t.fetchUntilEnough)}))},t.fetchStart=function(){0===t.fetchCount&&t.setState({isFetching:!0}),t.fetchCount+=1;var n=t.props,o=n.fetchData,r=n.onlyOnePage;return o(e*(r?1:3))},t.fetchEnds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.fetchCount=0,t.setState({isExhausted:e,isFetching:!1})},t.isFirstPage=function(){return 0===t.state.page},t.isLastPage=function(){var n=t.props.items.length;return 0===n||(t.state.page+1)*e>=n},t.previousPage=function(){t.isFirstPage()||t.setState((function(e){return{page:e.page-1}}))},t.nextPage=function(){t.isLastPage()||t.setState((function(e){return{page:e.page+1}}),t.fetchUntilEnough)},t}var a=i.prototype;return a.componentDidMount=function(){this.fetchUntilEnough()},a.shouldComponentUpdate=function(t,n){var o=this.props.items.length<e&&t.items.length>=e,r=!um()(this.state,n);return o||r},a.render=function(){var e=this.props,n=e.onlyOnePage,r=e.items,i=this.state,a=i.isFetching,c=i.isExhausted,s=0===r.length||this.isLastPage()&&(c||a);return(0,o.tZ)(t,(0,U.Z)({currentPageItems:this.getCurrentPageItems(),shouldDisableNextPage:s||n,shouldDisablePreviousPage:this.isFirstPage()||n,nextPage:this.nextPage,previousPage:this.previousPage},Fo()(this.props,["fetchData","onlyOnePage","items"])))},i}(h.Component);return n.displayName="PageManager(".concat(lm(t),")"),n.propTypes={onlyOnePage:ic().bool,fetchData:ic().func.isRequired,items:ic().array.isRequired},n.defaultProps={items:[]},n}}(Zh.j))(gm),Tm=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).trackClick=function(t){(0,Wp.E)(t,{id:1299,action:"OpenUrl",name:e.props.column.title})},e}return n.prototype.render=function(){var e=this.props,t=e.time,n=e.column,r=e.isPaidArticle,i=n&&!r;return(0,o.BX)("div",{className:"Post-TimeExtra",children:[(0,zo.rL)(t),i&&" · 来自专栏 ",i&&(0,o.tZ)(Xd.Z,{column:n,noHoverCard:!0,onClick:this.trackClick})]})},n}(h.Component),Cm=function(e){var t=e.module,n=e.content,r=e.children;return(0,o.tZ)(Ne.eV,{content:n,children:(0,o.tZ)(bd.r,{module:t,card:{content:n},children:r})})},Am=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={columnHeaderShown:!1,contentDomPosition:"",commentPattern:e.getByCommentFromHash()?"fixed":"bottom",justPublishedQuery:e.getJustPublishedQuery(),shareVideoQuery:e.getShareVideoId(),shouldShowVideoDetails:!1,postMainRef:null,adTrackInfo:null,republishRequests:null,signFlowModalShown:!1},e.alreadyScrolled=!1,e.postMainRef=(0,h.createRef)(),e.rewardContainerRef=(0,h.createRef)(),e.readMarkRef=(0,h.createRef)(),e.onscoll=function(){var t=e.state.contentDomPosition,n=document.querySelector(".Post-RichText"),o=Qh(n),r=n?n.getBoundingClientRect().height:0;if(!t){if(!n)return;e.setState({contentDomPosition:o+r})}(document.documentElement.scrollTop||document.body.scrollTop)+window.innerHeight>o+r&&(uc.Z.trackEvent((0,kc.Z)(e),{action:"ScrollToBottom"}),e.scrollSubscription.unsubscribe())},e.handleVotersButtonClick=function(){var t=e.props,n=t.isMobile,o=t.post;n&&!A.dd&&ef(o.id,"vote_list")},e.handleShowContributionModal=function(){e.showRecommendModalHandler&&e.showRecommendModalHandler()},e.handleClickVideoMoreButton=function(){e.setState({shouldShowVideoDetails:!1})},e.updateCommentStatus=function(t){e.state.commentPattern!==t&&("fixed"===t?e.props.trackOpenCommentAdPromotion():e.props.trackCloseCommentAdPromotion()),e.setState({commentPattern:t})},e.onCommentMount=function(t){"#comments"===e.props.location.hash&&"bottom"===e.state.commentPattern&&!e.alreadyScrolled&&(e.timeoutId=setTimeout((function(){return t.scrollIntoView()}),500))},e.renderLabels=function(t){var n=e.props,r=n.post,i=n.useNewLabels,a=n.isMobile,c=r.suggestEdit.status,s=r.annotationDetail,u=r.commercialInfo,l=r.visibleOnlyToAuthor;if(t&&l)return(0,o.tZ)(Cp.Z,{});var d=(null==u?void 0:u.isCommercial)?{data:u}:null,p=!c&&s&&{annotationDetail:s},h=a&&A.dd;return i?c||h?null:(0,o.tZ)(zd.Z,{commercialProps:d,annotationProps:p,item:r}):!h&&(0,o.tZ)(zd.Z,{useOldLabels:!0,commercialProps:d,annotationProps:p,item:r})},e}var r=n.prototype;return r.componentDidMount=function(){var e=this;(0,Ld.hx)();var t,n=this.props,o=n.location,r=n.router,i=n.loadVideoDetails,a=n.post,c=n.ua,s=n.getTrackUrl,u=n.getUpvotedFollowees,l=n.updateReadStatus,d=n.isLogin,p=n.loadContentRightsNotification,h=n.currentUser,f=n.isMobile;(!(t=a.updated)||Date.now()-1e3*t>6e4)&&(0,g.v)("https://zz.bdstatic.com/linksubmit/push.js",{crossOrigin:void 0});var m=this.state.shareVideoQuery;a.trackUrl?this.setState({adTrackInfo:(0,im.Z)(a,c)}):s(a.id).then((function(){e.setState({adTrackInfo:(0,im.Z)(a,c)})})),m&&i(m).then((function(){e.setState({shouldShowVideoDetails:!0})}));var v=o.query,Z=v.just_published,E=v.is_recommend,T=(0,K.Z)(v,["just_published","is_recommend"]);(Z||E)&&r.replace((0,F.Z)((0,U.Z)({},o),{query:T})),Z&&p("article",a.id),this.scrollSubscription=(0,Id.subscribe)("scroll",this.onscoll),d&&u(a.id),f&&this.readMarkRef.current&&(0,wd.y3)(this.readMarkRef.current,(function(){return l({type:"article",id:a.id},!0)})),f||h||this.setState({signFlowModalShown:!0}),this.setState({postMainRef:this.postMainRef.current}),uc.Z.trackPageShow({id:3366}),h&&(0,Lp.ZP)("post",a.id,Lp._x)},r.handleSignFlowModalClose=function(){this.setState({signFlowModalShown:!1})},r.componentWillUnmount=function(){this.scrollSubscription&&this.scrollSubscription.unsubscribe(),clearTimeout(this.timeoutId)},r.getByCommentFromHash=function(){var e=this.props.location.hash;return e&&function(e){var t=e.match(Ya);return t&&t[1]}(e)},r.getJustPublishedQuery=function(){var e=this.props,t=e.author,n=e.location,o=e.currentUser;return(0,xp.Z)(o,t)?n.query.just_published:null},r.getShareVideoId=function(){var e=this.props,t=e.location;return e.isMobile?t.query.preview_video_id:null},r.renderPostTimeAreaExtra=function(){var e=this.props,t=e.post,n=e.selfRecommendedRepublishRequests,r=void 0===n?[]:n;return 0===r.length?null:(0,o.tZ)(ap,{id:t.id,selfRecommendedRepublishRequests:r})},r.render=function(){var e,t,n=this,r=this.props,i=r.ua,a=r.post,c=r.reward,s=r.rewardInfo,u=r.author,l=r.contributions,d=void 0===l?[]:l,p=r.contributeRequests,f=r.location.query,m=r.shareVideoDetail,v=r.isRead,Z=r.currentUser,g=r.useNewLabels,E=r.readContentRightsNotification,T=r.ecommerce,C=r.shouldSpecialOia,_=r.isSearchSpecialSource,y=r.searchSpecialTitle,S=r.theme,I=r.isMobile,b=r.blockStrategies,w=void 0===b?{}:b,R=w.isBlockingVote,N=w.isBlockingBindTopic,O=w.isBlockingComment,D=r.href,B=r.trackToggleFollowAdPromotion,P=r.trackShareAdPromotion,k=r.trackPublishCommentAdPromotion;if(!a)return null;var x=a.id,L=a.imageUrl,F=a.imageWidth,M=a.imageHeight,G=a.title,z=a.isTitleImageFullScreen,H=a.content,q=a.voteupCount,V=a.upvotedFollowees,X=a.reviewers,W=void 0===X?[]:X,K=a.created,j=a.updated,Y=a.topics,Q=a.paging,J=a.excerpt,$=a.type,ee=a.url,te=a.commercialInfo,ne=a.suggestEdit,oe=ne.status,re=ne.reason,ie=a.creatorRightsNotification,ae=a.visibleOnlyToAuthor,ce=a.articleType,se=a.paidInfo,ue=void 0===se?{}:se,le=a.paidContent,de=a.creationRelationship,pe=a.entityWords,he=a.ipInfo,fe=(0,xp.Z)(Z,u);if(!fe&&ae)return(0,o.tZ)(Md,{});var me,ve=te||{},Ze=ve.isCommercial,ge=ve.plugin,Ee=this.state,Te=Ee.commentPattern,Ce=Ee.justPublishedQuery,Ae=Ee.shareVideoQuery,_e=Ee.shouldShowVideoDetails,ye=Ee.adTrackInfo,Se=Ee.republishRequests,Ie=Ee.signFlowModalShown,be=J.replace(/<.+?>/g,""),Re=rh(a),Ne=JSON.stringify({userToken:Z&&Z.urlToken||""}),Oe=JSON.stringify({authorName:u&&u.name,itemId:x,title:G,type:$}),De={title:m.title,thumbnail:m.coverUrl,isLens:!0,id:Ae,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(Ae)},Be=Boolean(ge&&ge.download),Pe="paid"===ce,ke=ue.content,xe=Pe?ke:H,Le=(0,o.tZ)(Fh,{article:a,paging:Q,rewardInfo:s,updateCommentStatus:this.updateCommentStatus,justPublished:Boolean(Ce),onContributeClick:this.handleShowContributionModal,onShare:P}),Ue=(0,o.tZ)(Hh,{postId:x,author:u,isAuthor:fe,followOpenInApp:C,onToggleFollow:B}),Fe=!oe||fe,Me=!I&&(0,Bd.Z)(a,"post"),Ge=null==de||null===(e=de.coCreation)||void 0===e?void 0:e.refBy,ze=null==de||null===(t=de.reference)||void 0===t?void 0:t.refBy,He=!oe&&!I&&!R;return(0,o.BX)(Cm,{module:"PostItem",content:{type:"Post",token:String(x)},children:[(0,o.tZ)(zp,{pageInfo:{pageId:"10178"},pageOptions:{trackPageDisappear:!0}}),I&&(0,o.tZ)(Rd.Z,{type:"post"}),(0,o.tZ)(Dd,{}),(0,o.BX)("div",{className:Jr()("Post-content",{"Post-content-mobile":I}),"data-zop-usertoken":Ne,"data-zop":Oe,children:[(0,o.tZ)(qd,{entity:a}),!I&&(0,o.tZ)(rm,{justPublishedQuery:Ce,articleId:x,columnId:Re&&Re.id,getShowRecommendModalHandler:function(e){return n.showRecommendModalHandler=e}}),Ie&&(0,o.tZ)(Pc.Vy,{maskClosable:!1,showQrcodeFirst:!0,defaultType:"login",onClose:function(){n.handleSignFlowModalClose()}}),(0,o.tZ)(we.ql,{title:G,meta:(0,Jh.r)(a)}),!I&&(0,o.tZ)(dd.Z,{columnId:Re&&Re.id,showAdblockBanner:!0}),I&&(0,o.tZ)(qh,{}),L&&!oe&&(0,o.tZ)(Yh,{src:L,width:F,height:M,alt:G,fullScreen:!I&&z}),(0,o.tZ)("article",{className:Jr()("Post-Main",{"Post-NormalMain":!I,"Post-Main-Mobile":I}),ref:this.postMainRef,tabIndex:-1,children:(0,o.BX)(Uc.wi,{root:this.state.postMainRef,children:[(0,o.BX)("header",{className:"Post-Header",children:[(0,o.tZ)("h1",{className:"Post-Title",children:G}),!I&&Ue,!Pe&&g&&this.renderLabels(fe),(Ge||ze)&&(0,o.tZ)(sc.Box,{my:"16px",children:(0,o.tZ)(kd.j7,{type:"article",coCreationRefBy:Ge,referenceRefBy:ze})}),He&&(0,o.tZ)("div",{role:"button",tabIndex:0,onClick:this.handleVotersButtonClick,children:(0,o.tZ)(bp.Z,{id:x,type:$,voteupCount:q,upvotedFollowees:V,defaultModalShown:"true"===f.from_voters_page})})]}),oe&&(0,o.tZ)(pf,{reason:re,isAuthor:fe}),!oe&&I&&(0,o.tZ)(Tm,{time:j,column:Re,isPaidArticle:Pe}),!Pe&&!g&&this.renderLabels(fe),Pe&&(0,o.tZ)(yd.Z,{result:le,extra:{ua:i,isDarkMode:S.isDarkMode}}),I&&Ue,Ae&&_e?(0,o.BX)(h.Fragment,{children:[(0,o.tZ)(Zp.Z,{data:De}),(0,o.tZ)("p",{className:"Post-VideoContentMore",onClick:this.handleClickVideoMoreButton,children:"点击查看全文"})]}):Fe&&(0,o.tZ)(Tf,{html:xe,entityWords:pe,ecommerce:T,author:u,id:x,url:ee,title:G,isAuthor:fe,shouldShowCatalog:Me}),Fe&&(0,o.tZ)(Pd.Z,{content:H,type:"article",urlToken:String(x)}),Pe&&(0,o.tZ)(_d.Z,{result:le,extra:{ua:i,theme:S}}),I&&(0,o.tZ)("div",{className:"Post-ReadMark",ref:this.readMarkRef}),Be&&(0,o.tZ)(lf,{isMobile:I,info:ge.download,related:ye}),!oe&&!(Ae&&_e)&&(0,o.tZ)(vp,{created:K,updated:j,ipInfo:he,extraInlineComponent:this.renderPostTimeAreaExtra()}),(0,o.tZ)(sp.Z,{moduleId:"pc_reco_detail_read_finish"}),!oe&&Z&&d.length>0&&(0,o.tZ)(cp.Z,{imperativeRef:this.rewardContainerRef,reward:c,currentUser:Z,rewardInfo:s,isMobile:I,id:x,isAuthor:fe,author:u,ua:i,type:$,onRewardUserClick:function(e){return(0,Wp.E)(e,1296)},onRewardUserMoreClick:function(e){return(0,Wp.E)(e,1297)},onRewardButtonClick:function(e){return(0,Wp.E)(e,1298)},balanceEnable:!1}),!N&&!oe&&(I&&A.dd?null:(0,o.BX)("div",{className:"Post-topicsAndReviewer",children:[(0,o.tZ)(Ip,{className:Jr()("Post-Topics",{"Post-TopicsReviewer":W.length>0}),topics:Y,onItemClick:function(e){return(0,Wp.E)(e,1295)}}),W.length>0&&(0,o.tZ)(Xh,{reviewers:W,type:$,isAuthor:fe})]})),!I&&!(oe&&!fe)&&Le]})}),_&&(0,o.tZ)(Tp,{className:"Post-searchSpecialButton",title:y}),I&&(0,o.tZ)(Sd.Z,{id:x,type:"ARTICLE",zaInfo:{pageId:"11190"},className:"Post-VipRecommendCard"}),(0,o.BX)("div",{className:Jr()("Post-Sub",{"Post-NormalSub":!I,"Post-Sub-Mobile":I}),children:[!O&&!oe&&(0,o.tZ)(If,{parent:a,byComment:this.getByCommentFromHash(),commentPattern:Te,updateCommentStatus:this.updateCommentStatus,onMount:this.onCommentMount,onComment:k}),!oe&&(0,o.tZ)(Pf,{contributions:d,postId:x}),!Ze&&!oe&&(0,o.tZ)(Em,{id:x}),!I&&Z&&(0,o.tZ)(Rf,{postId:x,author:u,contributeRequests:p}),C&&(0,o.tZ)(Vd.Z,{mainContentInPage:a,href:(0,Up.MN)({type:"article",id:x},(0,U.Z)({utm_content:"app_jumping",open:v?"1":"0"},Pe&&{app_from:f.app_from||A.G5,redirect_from:encodeURIComponent(D),is_from_paid:1}))}),I&&!(oe&&!fe)&&Le]}),(0,o.tZ)(xd.Z,{notification:ie,onRead:function(e){E("article",a.id,e)},onUseAdmire:function(){n.rewardContainerRef.current.activateReward()},onUseRecommend:function(){var e=n.props.postToolsRecommend;fs.Z.confirm((0,o.tZ)("div",{style:{textAlign:"center"},children:"该推荐将使用本月的 1 次推荐次数。"}),{title:"确定是否推荐？"}).then((function(){return e("article",String(x))}),(function(){}))}}),(0,o.BX)(Uu.Z,{children:[(0,o.tZ)(cc.l,{title:G,desc:be,extraQuery:(me=Op().get("social_id"),me?{s_s_i:me,s_r:1}:{s_r:0}),imgUrl:L||Gp}),(0,o.tZ)(Pp,{})]}),!I&&(0,o.tZ)($d,{entityType:"article",id:x,isAuthor:fe,onShowAllRequests:function(e){n.setState({republishRequests:e})}}),!I&&Boolean(Se)&&(0,o.tZ)(ip,{isAuthor:fe,republishRequests:Se,onClose:function(){n.setState({republishRequests:null})}})]}),(0,o.tZ)(Od.Z,{type:"article",id:x})]})},n}(h.Component);Am.fetchData=function(e){var t=e.params.id,n=e.dispatch,o=e.ua,r=e.location,i=e.location.query,a=e.getState;return Promise.all([n((0,gh.xl)(t,{zhiPlusFlag:i.zpf})).then((function(e){if("paid"===e.payload.articleType)return o.Mobile&&Fp({ua:o,env:a().env,location:r}),n((0,gh.Qo)(t))})),n((0,nf.H)(t)),n((0,gh.vM)(t))])},Am.propTypes={post:ic().object,author:ic().object,contributions:ic().array,contributeRequests:ic().array,shareVideoDetail:ic().object,isSearchSpecialSource:ic().bool,searchSpecialTitle:ic().string};var _m=(0,Xe.compose)((0,Ql.ZP)("WhiteBg-body PostIndex-body"),Ks.Z,(0,Mp.$)(),(0,Re.connect)((function(e,t){var n=t.params,o=e.entities,r=o.articles,i=o.users,a=o.columns,c=e.articleContribution,s=e.reward,u=e.video.shareVideoDetail,l=r[n.id];!(0,Sn.isBrowser)()||l&&l.commercialInfo||window.Raven.captureException(new Error("Missing post data in PostIndex."),{tags:{scope:"Column"},extra:{columns:a,articles:r,params:n}});var d=of({columns:a,post:l,articleContribution:c}).contributions,p=rf({articleContribution:c}).contributeRequests,h=af({reward:s,post:l}),f=h.articleReward,m=h.rewardInfo,v=l.author,Z=(void 0===v?{}:v).urlToken,g=Nd(e);return{post:l,contributions:d,contributeRequests:p,rewardInfo:m,reward:f,isSearchSpecialSource:g.isSearchSpecialSource,searchSpecialTitle:g.searchSpecialTitle,ua:(0,de.Uh)(e),author:i[Z]||l.author,shouldSpecialOia:(0,de.cq)(e),shareVideoDetail:u,isRead:(0,Oo.O8)(e,{type:"article",id:n.id}),ecommerce:(0,We.G_)(e,{type:"article",urlToken:n.id}),selfRecommendedRepublishRequests:(0,Bo.ij)(e),theme:e.env.theme,href:e.env.ctx.href}}),{loadSwitches:Or.X2,loadVideoDetails:qi.hK,getTrackUrl:nf.H,getUpvotedFollowees:gh.Ah,updateReadStatus:Oo.m3,loadContentRightsNotification:yn.NC,readContentRightsNotification:yn.Uq,postToolsRecommend:yn.Ke}),(0,Ad.$_)({dataPath:"post",passThrough:function(e,t){var n=t.post;return!e.isBlockingVote&&Zh.YP.includes(null==n?void 0:n.id)&&(e.isBlockingVote=!0),e}}),Ad.OW,Gd.QV,(0,kp.jM)({dataPath:"post"}),kp.LY,(0,Od._)({dataPath:"post"}))(Am),ym=(0,Nt.P1)([function(e){return e.comments},function(e){return e.entities.comments},function(e,t){return t.target},de.Hu],(function(e,t,n,o){var r=e.pagination,i=(void 0===r?{}:r)[n]||{},a=i.isDrained,c=i.isFetching,s=i.isPrevDrained,u=i.newIds,l=void 0===u?[]:u,d=i.ids,p=void 0===d?[]:d,h=i.totals;return{isDrained:a,isFetching:c,isPrevDrained:s,newComments:(o?l.slice(0,Zh.lg):p).map((function(e){return t[e]})),totals:h}})),Sm=n.p+"assets/comment.d46c2c85.png",Im=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){return(0,o.BX)("div",{className:"PreviewComments-EmptyComment",children:[(0,o.tZ)("img",{src:Sm,alt:"无草稿评论"}),(0,o.tZ)("p",{className:"PreviewComments-EmptyCommentText",children:"暂无草稿评论"})]})},n}(h.PureComponent),bm=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={active:!1,disabled:!0,changeHeight:!1},e.handleSubmit=function(){var t=e.input.toHTML();e.addComment(t)},e.handleBlur=function(){var t=e.state.disabled;t&&(document.querySelector(".PreviewComments-content").style.height="518px",e.setState({changeHeight:!1})),e.setState({active:!t})},e.handleChange=function(t){e.setState({disabled:t.isEmpty})},e.handleFocus=function(){if(!e.state.changeHeight){var t=document.querySelector(".PreviewComments-content").offsetHeight+48;document.querySelector(".PreviewComments-content").style.height="".concat(t,"px"),e.setState({changeHeight:!0})}e.setState({active:!0})},e.addComment=function(t){var n,o=["article_review",e.props.id,t];(n=e.props).addComment.apply(n,(0,r.Z)(o)).then((function(){e.input.reset()}))},e}return n.prototype.render=function(){var e=this,t=this.state,n=t.active,r={preset:"primary",color:"blue",children:"评论",disabled:t.disabled};return(0,o.BX)("div",{className:"PreviewComments-InputContent",children:[(0,o.tZ)(gs.Z,{allowMention:!0,allowPasteRichText:!1,outputBlockType:"div",ref:function(t){e.input=t},placeholder:"写下你的评论…",onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,onSubmit:this.handleSubmit}),n&&(0,o.tZ)(fc.ZP,(0,F.Z)((0,U.Z)({},r),{className:"PreviewComments-singleButton",onClick:this.handleSubmit}))]})},n}(h.Component);bm.propTypes={id:ic().number.isRequired};var wm=(0,Xe.compose)((0,Re.connect)(null,{addComment:fn.Ir}))(bm),Rm=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).handleDeleteComment=function(){var t=e.props,n=t.id,o=t.postId;e.props.deleteComment(n,"article",o)},e}return n.prototype.render=function(){var e=this.props,t=e.author,n=t.member,r=t.member,i=(void 0===r?{}:r).name,a=e.isAuthor,c=e.createdTime,s=e.isArticleAuthor;return(0,o.BX)("div",{className:"PreviewAuthorInfo",children:[(0,o.tZ)(Wd.Z,{className:"PreviewAuthorInfo-avatarWrapper",user:n,avatar:!0,avatarProps:{className:"AuthorInfo-avatar",size:36,round:!0}}),(0,o.BX)("div",{className:"PreviewAuthorInfo-content",children:[(0,o.BX)("div",{className:"PreviewAuthorInfo-head",children:[(0,o.tZ)("span",{className:"PreviewAuthorInfo-Author",children:i}),s&&(0,o.tZ)("span",{className:"PreviewAuthorInfo-Type",children:"(作者)"})]}),(0,o.BX)("div",{className:"PreviewAuthorInfo-detail",children:[(0,o.tZ)("span",{children:(0,zo.rL)(c)}),(a||s)&&(0,o.BX)("span",{role:"button",tabIndex:0,className:"PreviewAuthorInfo-DeleteButton",onClick:this.handleDeleteComment,children:[" ","· 删除"]})]})]})]})},n}(h.Component);Rm.propTypes={author:ic().object.isRequired,createdTime:ic().number.isRequired,id:ic().number.isRequired,postId:ic().number.isRequired,isArticleAuthor:ic().bool},Rm.defaultProps={author:{},isArticleAuthor:!1};var Nm=(0,Xe.compose)((0,Re.connect)(null,{deleteComment:fn.YF}))(Rm),Om=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.comment,n=t.author,r=t.content,i=t.createdTime,a=t.id,c=t.isDelete,s=e.postId,u=e.postAuthor;if(c)return null;var l=u.id===n.member.id;return(0,o.BX)("div",{className:"PreviewContent",children:[(0,o.tZ)(Nm,{author:n,createdTime:i,postId:s,id:a,isArticleAuthor:l}),(0,o.tZ)(Zf.Z,{html:r,className:"PreviewContent-RichText"}),(0,o.tZ)(Nf,{className:"PreviewContent-Line"})]})},n}(h.Component);Om.propTypes={comment:ic().object,postId:ic().number,postAuthor:ic().object};var Dm=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).load=function(t){var n=e.props;(0,n.loadComments)("article_review",n.previewPost.id,{order:"normal",isPrevious:t})},e}var r=n.prototype;return r.componentDidMount=function(){this.load()},r.render=function(){var e=this.props,t=e.isDrained,n=e.isFetching,r=e.isPrevDrained,i=e.comments,a=e.previewPost,c=a.id,s=a.author,u=e.className,l=e.close;return(0,o.tZ)("div",{className:Jr()("PreviewComments",u),children:(0,o.BX)("div",{className:"PreviewComments-content",children:[(0,o.tZ)("p",{className:"PreviewComments-title",children:"草稿评论"}),(0,o.tZ)("p",{className:"PreviewComments-description",children:"文章发表后草稿评论仅文章作者可见"}),i.length>0?(0,o.tZ)(ep.Z,{className:"PreviewComments-List",isLocal:!0,isLoading:n,isPrevDrained:r,isDrained:t,onLoad:this.load,placeholder:(0,o.tZ)(ep.i,{className:"CommentItem",small:!0}),children:i.map((function(e){return(0,o.tZ)(Om,{comment:e,postId:c,postAuthor:s},e.id)}))}):(0,o.tZ)(Im,{}),(0,o.tZ)(wm,{id:c}),l]})})},n}(h.Component);Dm.propTypes={previewPost:ic().object.isRequired,post:ic().object,isDrained:ic().bool,isFetching:ic().bool,isPrevDrained:ic().bool,comments:ic().array,className:ic().string,close:ic().element},Dm.defaultProps={comments:[]};var Bm=(0,Xe.compose)((0,js.Z)(null),(0,Re.connect)((function(e,t){var n=t.post||e.previewPost,o="article_review_".concat(n.id),r=ym(e,{target:o});return{comments:r.newComments,previewPost:n,isDrained:r.isDrained,isFetching:r.isFetching,isPrevDrained:r.isPrevDrained}}),{loadComments:fn.KT}))(Dm),Pm=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.previewPost,n=e.location,r=e.isMobile,i=t.imageUrl,a=t.imageWidth,c=t.imageHeight,s=t.title,u=t.isTitleImageFullScreen,l=t.content,d=t.author,p=t.column,h=t.topics,f=t.created,m=t.updated,v=n.query,Z=v.catalog,g=v.comment,E=!r&&(Z?"1"===Z:(0,Bd.Z)(this.props.previewPost,"post")),T="0"!==g,C=(0,o.tZ)(Hh,{author:d,isAuthor:!0});return(0,o.BX)("div",{className:"PreviewPost-content",children:[(0,o.tZ)(we.ql,{title:s}),!r&&(0,o.tZ)(dd.Z,{columnId:p&&p.id}),i&&(0,o.tZ)(Yh,{src:i,width:a,height:c,alt:s,fullScreen:u}),r&&C,(0,o.BX)("article",{className:"PreviewPost-Main",children:[(0,o.BX)("header",{children:[(0,o.tZ)("h1",{className:"PreviewPost-Title",children:s}),!r&&C]}),(0,o.tZ)(Zf.Z,{html:l,className:"PreviewPost-RichText",shouldShowCatalog:E}),(0,o.tZ)(vp,{created:f,updated:m}),(0,o.tZ)(Ip,{topics:h,css:{marginBottom:"-10px",padding:"16px 0",".Topic":{height:"33px",fontSize:"13px",lineHeight:"33px",overflow:"hidden",marginBottom:"10px"}}}),!r&&T&&(0,o.tZ)(Bm,{})]})]})},n}(h.Component);Pm.fetchData=function(e){return(0,e.dispatch)(function(e){return{API:{root:C.Z.fetchRoot.zhuanlan,types:Ga.GET,endpoint:"/articles/".concat(e,"/review"),method:"GET",fetchOptions:{credentials:"include"}},schema:Ut.l.ARTICLE}}(e.params.id))},Pm.propTypes={previewPost:ic().object};var km=(0,Xe.compose)((0,Mp.$)(),(0,Re.connect)((function(e){return{previewPost:e.previewPost}})))(Pm),xm=n(34010),Lm=n(33110),Um=n.n(Lm),Fm=n(58386),Mm=n.n(Fm),Gm=n(25917),zm=(0,h.createContext)({}),Hm=(0,I.withRouter)((function(e){var t=e.to,n=e.router,o=(0,h.useContext)(zm);return o.url||(o.url=t),(0,h.useEffect)((function(){(0,M.sD)(t)?window.location.replace(t):n.replace(t)}),[n,t]),null})),qm=n(59039),Vm=n(62459),Xm=n(23621),Wm=n(78248),Km=n(79930),jm=n(64841),Ym="postEditorV2Guide",Qm=Km.Z("2021-12-04 00:00:00"),Jm=function(e){var t=e.ratio,n=e.className,r=(0,K.Z)(e,["ratio","className"]);return(0,o.tZ)(Kh.Z,{ratio:t,className:n,css:{marginBottom:"16px"},children:(0,o.tZ)(sc.Image,(0,U.Z)({width:"100%",height:"100%"},r))})},$m=function(e){var t=e.imageUrl,n=e.children;return(0,o.BX)(sc.Flex,{alignItems:"center",css:{marginBottom:"16px"},children:[(0,o.tZ)(sc.Image,{src:t,alt:"1",flex:"0 0 15px",height:"15px",mr:"8px"}),(0,o.tZ)("p",{children:n})]})},ev=function(){var e=(0,Ae.Z)((0,cl.Z)(!1),2),t=e[0],n=e[1];return(0,h.useEffect)((function(){+new Date>Qm||"1"!==T().get(Ym)&&setTimeout((function(){n.on(),T().set(Ym,"1")}),5e3)}),[n]),(0,o.tZ)(Ms.Z,{title:"版本升级",onClose:n.off,closeButton:null,maskClosable:!1,hotKeyClosable:!1,css:{color:"inherit",width:"660px"},children:t&&(0,o.BX)(sc.Box,{color:"GBK02A",fontSize:"14px",lineHeight:"20px",children:[(0,o.BX)(sc.Box,{height:"370px",css:{overflow:"auto"},children:[(0,o.tZ)("p",{css:{marginBottom:"16px"},children:"亲爱的创作者～知乎网页版的文章编辑器迎来了期待已久的全面更新啦，在最新一版中，我们有了全新排版的创作区域：工具栏、编辑区域、发布设置。"}),(0,o.tZ)($m,{imageUrl:"https://pic1.zhimg.com/v2-659cdb7ba796ad9164a9d3c207efa43f.png",children:"工具栏划分为：操作、文字、高级、插入、其他、帮助文档这六个部分，并新增了：图片库 / 图片编辑、二级标题和帮助文档。"}),(0,o.tZ)(Jm,{ratio:1860/337,src:"https://pic2.zhimg.com/v2-4aeafd0f11c297240c659c9e77d0aa67.png",alt:"工具栏"}),(0,o.tZ)($m,{imageUrl:"https://pic3.zhimg.com/v2-e2c434e38a5827bcc4a25399530d7a7f.png",children:"内容编辑区域扩大至 800 px，满足你的大屏创作体验。"}),(0,o.tZ)(Jm,{ratio:1860/381,src:"https://pic2.zhimg.com/v2-ef52146433f6be97677f406bc4f7ea99.png",alt:"内容区"}),(0,o.tZ)($m,{imageUrl:"https://pica.zhimg.com/v2-ddec683f2b10b1d5476a7f60f14fef0c.png",children:"发布设置集中在内容编辑区域下方，还新增了预览功能，写文、设置、预览、发布让创作变得行云流水。"}),(0,o.tZ)(Jm,{ratio:4.96,src:"https://pic1.zhimg.com/v2-d195780f2be87c02ece0156da8c7d7a7.png",alt:"发布设置"}),(0,o.tZ)("p",{children:"知乎网页版文章编辑器感谢各位创作者的声音，快来体验我们共创的编辑器吧，更多功能持续更新中..."})]}),(0,o.tZ)(sc.Box,{css:{textAlign:"center"},children:(0,o.tZ)(jm.ZP,{preset:"primary",color:"blue",onClick:n.off,css:{width:"359px",margin:"25px auto 0"},children:"我知道了"})})]})})},tv=function(){return(0,o.BX)("div",{css:{paddingTop:"16px",marginBottom:-10,h2:{paddingBottom:"20px",fontWeight:"500",fontSize:"24px",textAlign:"center"},p:{textAlign:"center",fontSize:"14px"}},children:[(0,o.tZ)("h2",{children:"近 7 日发布文章数量已达上限"}),(0,o.tZ)("p",{children:"根据你的创作者等级，你在最近 7 个自然日可发布的文章数量已达上限，当前编辑将存入草稿。你还可以尝试「想法」创作，期待你的更多内容。"})]})},nv=n(20669),ov=n(32261),rv=n(58729),iv=n(99605),av=n(98148),cv=n(30728),sv=n(69520),uv=n(50236),lv=n(44540),dv=n(62147),pv=n(7638),hv=n(54598),fv=n(26566),mv=n(59706),vv=n(22823),Zv=n(35568),gv=n(7958),Ev=[".jpg",".jpeg",".png",".gif"],Tv=function(e,t,n){var o=(0,dm.Xs)(e,n);if(0===o)return{ok:!1,message:null};var r=o-t;return r>0?{ok:!1,message:"已超过 ".concat(r," 个字")}:r>=-10?{ok:!0,message:"还可以输入 ".concat(-r," 个字")}:{ok:!0,message:null}},Cv=1e5,Av=function(e){return(0,dm.Xs)(e,!0)<9},_v=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).check="title"===e.props.type?function(e){return Tv(e,100)}:function(e){return Tv(e,Cv,!0)},e.state=e.check(e.props.content),e.compareState=function(t){var n=t.ok,o=t.message;return e.state.message!==o||e.state.ok!==n},e}var r=n.prototype;return r.componentDidMount=function(){this.props.onStatusChange(this.state.ok)},r.UNSAFE_componentWillReceiveProps=function(e){var t=this.props,n=t.onStatusChange,o=t.content;if(e.content!==o){var r=this.check(e.content);this.compareState(r)&&(n(r.ok),this.setState(r))}},r.shouldComponentUpdate=function(e,t){return this.compareState(t)},r.render=function(){var e=this.state,t=e.ok,n=e.message,r=Jr()("WriteIndex-LengthStatus",{"WriteIndex-LengthStatus-warning":!t});return n&&(0,o.tZ)("div",{className:r,children:n})},n}(h.Component);function yv(e){var t=e.id,n=e.width,o=e.height;return{url:e.url,id:t,rawWidth:n,rawHeight:o,watermark:e.watermark,watermarkSrc:e.watermarkSrc,originalSrc:e.originalSrc}}function Sv(e){if("object"==typeof e)return e.message;switch(e){case"type":return"格式不支持，请上传以下格式的图片：".concat(Ev.join(", "));case"size":return"请上传不超过 ".concat(A.i3,"M 的图片");case"dimension":return"GIF 图片的长或宽低于 ".concat(120,"px，无法上传");case"other":return"图片上传未完成，请稍后发布"}}_v.propTypes={content:ic().string,type:ic().oneOf(["content","title"]).isRequired,onStatusChange:ic().func.isRequired};var Iv="DraftSave",bv="DraftLoad",wv="Editable.Edit",Rv="Editable.Init",Nv=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={content:e.props.content,realTimeContent:e.props.content,draftHistoryModalShown:!1,baiduFileSelectorShown:!1,showUserProfitCardSelector:!1,mcnEditingGood:null,toolbarMenuAttention:null,initialScheduledPublishAt:e.props.scheduledPublishAt},e.syncDraft=(0,Zv.Z)(e.props.reporter.wrapAutoRecord(Iv,(function(t){var n,o=e.props,r=o.updateDraft,i=o.logTime,a=o.onTyping,c=o.getEditableInstance,s=t.toHTML();e.setState({realTimeContent:s});var u=i("calculate");r({content:s,table_of_contents:null===(n=c())||void 0===n?void 0:n.hasCatalog(),delta_time:u}).finally((function(){return a(!1)}))})),1e3),e.handleChangeContent=function(t){var n=e.props,o=n.logTime;(0,n.onTyping)(!0),o("start"),e.syncDraft(t)},e.uploadImage=function(t){return(0,e.props.uploadContentImage)(t,"article").then(yv)},e.uploadVideo=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=e.props.uploadVideo;return i.apply(void 0,(0,r.Z)(n)).then((function(e){return e.payload}))},e.handleError=function(t,n){var o=e.props.showErrorMessage;(0,ta.Xc)(t,n,o)},e.uploadImageError=function(t){var n=e.props.showErrorMessage,o=Sv(t);if(o)return n(o)},e.handleUploadError=function(t,n){switch(n){case"video":e.handleError("video-upload-error");break;case"image":e.handleError("image-upload-error",t)}},e.handleInsertZVideo=function(){var t,n;null===(n=(t=e.props).handleToggleInsertVideoState)||void 0===n||n.call(t,!0)},e.trackUserProfitCardshow=Y()((function(){uc.Z.trackCardShow(null,{id:6096})})),e.getToolbarMenuPlugins=function(){return null},e.setUseScheduledPublish=function(t,n){var o=e.props.onScheduledPublishAtChange;if(t)if(n)o(n);else{var r=nv.Z(new Date,30);e.setState({initialScheduledPublishAt:r}),o(r)}else fs.Z.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then((function(){o(void 0),uc.Z.trackEvent(e,{action:"Click",id:5737,name:"文章"})})).catch((function(){uc.Z.trackEvent((0,kc.Z)(e),{action:"Click",id:5736,name:"文章"})})),uc.Z.trackCardShow((0,kc.Z)(e),{id:5735,name:"文章"})},e.handleReverted=function(t){var n=t.draft,o=n.content,r=n.title,i=e.props,a=i.logTime,c=i.updateDraft;a("start");var s=a("calculate");c({content:o,title:r,delta_time:s}).finally((function(){return e.editable.resetWithValue(o)}))},e.handleEditGGRCard=function(t){var n=t.type,o=t.payload,r=e.state.mcnEditingGood,i=e.props.updateLinkCard;"goodsEditor/submitNewGoodsInfo"!==n?"goodsEditor/closeGoodsEditor"!==n||e.setState({mcnEditingGood:null}):i((0,F.Z)((0,U.Z)({},r),{title:null==o?void 0:o.title})).finally((function(){e.setState({mcnEditingGood:null}),e.editable.handleCommand("edit-mcn-link-card:".concat(r.id))}))},e.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var o=n.getRangeAt(0).cloneRange();o.collapse(t);var r=o.getBoundingClientRect();if(0===r.height){var i=o.commonAncestorContainer;1===i.nodeType&&(r=i.getBoundingClientRect())}if(0!==r.height){var a=r.bottom-(window.innerHeight-65);a>0&&window.scrollBy(0,a)}}},e.getSentences=function(){return e.props.isReediting?e.props.getInteractText("articles",e.props.postId).then((function(e){var t;return null==e||null===(t=e.payload)||void 0===t?void 0:t.data})):null},e.createEditorPlugins=function(){var t=(0,sv.Z)({type:"article",getId:function(){return e.props.postId},getDraftId:function(){return e.props.postId},draftType:"article",syncDraft:e.syncDraft,shouldShowToolbarButton:function(){return e.props.postId}}),n=(0,hv.Z)({shouldShow:function(){return e.props.showUserProfitButton},getContentInfo:function(){return{type:"article",id:e.props.postId}}}),o=(0,cv.Z)(),r=(0,pv.Z)({sourceType:"article",sourceId:e.props.postId});e.helpDocPlugin=(0,uv.Z)({getInitialOffset:e.props.getHelpDocInitialOffset,forceUpdate:e.props.forceUpdateWriteIndex});var i=(0,dv.Z)({onToggle:e.props.toggleMarkdownEnabled});return[(0,lv.Z)({getSentences:e.getSentences}),t,n,o,r,e.helpDocPlugin,i]},e.editableReady=function(){e.props.reporter.reportSuccess(Rv)},e}var i=n.prototype;return i.UNSAFE_componentWillReceiveProps=function(e){var t=this;e.content&&this.props.content!==e.content&&(this.setState({realTimeContent:e.content}),this.editable&&!this.editable.toHTML()?this.props.reporter.wrapAutoRecord(bv,(function(){t.editable.resetWithValue(e.content)}))():this.setState({content:e.content}))},i.componentDidMount=function(){var e=this;this.props.reporter.reportRequest(Rv);var t=this.props,n=t.fillCurrentUserIfNeeded,o=t.getUserProfitPermission,r=t.loadCreatorRightStatus,i=n(["autoSendingCreations","mcn_user_info"]);o(),r(),Promise.resolve(i).then((function(){L.Z.getActionsByNames(["p_draft_history",e.canUseScheduledPublish&&"auto_pub_article"].filter(Boolean)).then((function(t){var n=(0,Ae.Z)(t,1)[0];n&&(e.setState({toolbarMenuAttention:n.description}),L.Z.markAsShown(n),"auto_pub_article"===n.guide_name&&uc.Z.trackCardShow(e,{id:5738}))}))})),T().set("debug","ali-oss"),window.onbeforeunload=function(){return e.syncDraft.pending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},uc.Z.trackCardShow(this,{id:5729,name:"文章"}),(0,mv.a)(["r","t","e"])},i.componentWillUnmount=function(){this.syncDraft.cancel(),(0,mv.n)()},i.render=function(){var e=this,t=this.props,n=t.onEditableRef,r=t.videoPoster,i=void 0===r?{}:r,a=t.onLengthStatusChange,c=t.couldSuperVideoUpload,s=t.post,u=t.publishArea,l=t.handleAnyChange,d=t.showInsertableVideoUploader,p=t.handleToggleInsertVideoState,h=t.onCloseCatalog,m=t.getMarkdownEnabled,v=this.state,Z=v.content,g=v.mcnEditingGood,E=v.realTimeContent,T=v.toolbarMenuAttention,C=v.initialScheduledPublishAt;return(0,o.BX)("div",{className:"PostEditor-wrapper",children:[(0,o.BX)("div",{css:{minHeight:"calc(100vh - 190px)"},children:[(0,o.BX)(Ld.vB,{name:wv,children:[(0,o.tZ)(rv.Z,{editorFrom:"article-pc-editor",storageKey:"article-pc-editor"}),(0,o.tZ)(av.Z,{ref:function(t){e.editable=t,n&&n(t)},large:!0,richtext:!0,spread:!0,allowLinkCard:!0,allowImageCaption:!0,allowResizeImage:!0,allowMention:!0,allowDragAndDrop:!0,allowToolbar:!0,allowToolbarSticky:!0,allowInlineCode:!0,allowUploadDocument:!0,allowVideoTitleChange:!0,allowZVideo:!0,allowReference:!0,allowTable:!0,allowHeaderThree:!1,placeholder:"请输入正文",className:"PostEditor",editingContentType:"article",toolbarMenuAttention:T,getToolbarMenuPlugins:this.getToolbarMenuPlugins,onInsertZVideo:this.handleInsertZVideo,toolbarProps:{menuCallout:null},onReady:this.editableReady,onChange:this.handleChangeContent,onAnyChange:l,onImageUpload:this.uploadImage,onVideoUpload:this.uploadVideo,defaultValue:Z,poster:i.url,onError:this.handleError,uploadImageError:this.uploadImageError,onUploadError:this.handleUploadError,couldSuperVideoUpload:c,onMCNLinkCardEdit:function(t,n){e.setState({mcnEditingGood:n})},useEditableV2:!0,createEditorPlugins:this.createEditorPlugins,allowCatalog:!0,useCatalogV2:!0,stickyOffset:92,css:{".Editable_CatalogV2":{left:-210}},useImageOperationV2:!0,catalogEnabled:(0,Bd.Z)(s,"post"),maskGradientColor:"GBK99A",showToolbar:!1,useV2Feature:!0,allowImageEditor:!0,onCloseCatalog:h,onAfterChange:this.onAfterChangeContent,docPluginProps:(0,iv.Z)(this.props.creatorRightStatus),getMarkdownEnabled:m,videoSource:"article"})]}),(0,o.tZ)(_v,{content:E,type:"content",onStatusChange:a}),(0,o.tZ)(Ve.Z,{className:"PostEditor-MCNEditor",title:"编辑商品",onClose:function(){e.setState({mcnEditingGood:null})},children:Boolean(g)&&(0,o.tZ)(ov.Z,{className:"PostEditor-MCNEditorIframe",src:(0,vv.l6)({title:g.title,originTitle:g.originTitle,source:g.source,sourceId:g.sourceId,productTypeName:g.productTypeName}),onMessage:this.handleEditGGRCard})}),d&&(0,o.tZ)(fv.Z,{show:d,onClose:function(){null==p||p(!1)},onZVideoSubmit:function(t){null==p||p(!1),e.editable.handleCommand("insert-zvideo-card:".concat(JSON.stringify(t)))},onVideoSubmit:function(t){null==p||p(!1),e.editable.handleCommand("insert-video-card",t)}})]}),u&&f().cloneElement(u,{setUseScheduledPublish:this.setUseScheduledPublish,initialScheduledPublishAt:C,canUseScheduledPublish:this.canUseScheduledPublish,contentIsTooShort:Av(E),realTimeContent:E})]})},(0,Jl.Z)(n,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting;return t&&t.autoSendingCreations&&!n}}]),n}(h.Component);Nv.propTypes={postId:ic().number,content:ic().string.isRequired,logTime:ic().func.isRequired,onEditableRef:ic().func,onTyping:ic().func.isRequired,onLengthStatusChange:ic().func.isRequired,updateDraft:ic().func.isRequired,showErrorMessage:ic().func.isRequired,onScheduledPublishAtChange:ic().func.isRequired,showInsertableVideoUploader:ic().bool,handleToggleInsertVideoState:ic().func,handleAnyChange:ic().func,onCloseCatalog:ic().func,isReediting:ic().bool.isRequired,getEditableInstance:ic().func,toggleMarkdownEnabled:ic().func,getMarkdownEnabled:ic().func};var Ov=(0,Xe.compose)((0,Re.connect)((function(e){return{couldSuperVideoUpload:Or.yS.includes(e.currentUser),currentUser:(0,le.ib)(e),showUserProfitButton:e.userProfit.permission.visible,creatorRightStatus:(0,Nn.Sy)(e)}}),{uploadContentImage:function(e,t){return function(n){return n(("string"!=typeof e?Ca:Ta)(aa,e,t)).then(Aa)}},uploadVideo:function(e){return{API:{types:ca,endpoint:"/api/embedded_videos",root:C.Z.fetchRoot.lens,method:"POST",body:{url:e}}}},fillCurrentUserIfNeeded:le.sF,getUserProfitPermission:kr.Yr,loadCreatorRightStatus:Nn.Xd,updateLinkCard:po.ko,getInteractText:gv.k}),Ld.l0)(Nv),Dv=n(49109),Bv=n(21822),Pv=n(24362),kv=n(26654),xv=n(16804),Lv=ic().shape({updated:ic().number,description:ic().string,title:ic().string,url:ic().string,commentPermission:ic().string,created:ic().number,acceptSubmission:ic().boolean,intro:ic().string,imageUrl:ic().string,type:ic().string,urlToken:ic().string,id:ic().string}),Uv="PublishPost",Fv=function(){uc.Z.trackCardShow(null,{id:7879}),location.href="https://".concat(C.Z.wwwHost,"/draft?type=article")};function Mv(e){var t=(0,Re.useDispatch)(),n=function(t){return e.stash(Uv,Ld.KW.success),t},r=function(n){var r,i;((!n.status||n.status>=500)&&e.reportFail(Uv,n),4031===(null==n||null===(r=n.payload)||void 0===r?void 0:r.code))?fs.Z.alert((0,o.tZ)(tv,{}),{text:{ok:"我知道了"}}).then(Mm()):t((0,jt.c0)(null==n||null===(i=n.payload)||void 0===i?void 0:i.message,"red"));throw n},i=(0,sl.Z)((function(o,i,a){var c=a.isNew,s=a.hasColumn,u=a.isRecommend,l=a.reshipmentDisclaimers,d=a.scheduledPublishAt,p=a.hasCatalog,h=a.autoSendingCreations,f=(0,K.Z)(a,["isNew","hasColumn","isRecommend","reshipmentDisclaimers","scheduledPublishAt","hasCatalog","autoSendingCreations"]),m=new URLSearchParams((0,U.Z)({},c&&{just_published:s?2:1},u&&{is_recommend:1})),v=m?"?".concat(m):"",Z=(null==l?void 0:l.type)||"none",g=(0,U.Z)({column:i,commentPermission:c?"anyone":void 0,disclaimer_type:Z,disclaimer_status:"none"===Z?"close":"open",table_of_contents_enabled:p},f);if(d)t(function(e,t){return{API:{root:C.Z.fetchRoot.zhuanlan,types:ra.SCHEDULED_PUBLISH,endpoint:"articles/".concat(e,"/scheduled-publish"),method:"POST",body:t}}}(o,(0,F.Z)((0,U.Z)({},g),{publish_at:Math.floor(d/1e3)}))).then(n,r).then(Fv).catch(Mm());else{var E=function(){t(function(e,t){return{API:{types:da,endpoint:"articles/".concat(e,"/publish"),root:C.Z.fetchRoot.zhuanlan,method:"PUT",body:t},NOTIFICATION:!1}}(o,g)).then(n,r).then(function(e){return function(){uc.Z.trackCardShow(null,{id:7879}),location.href=e}}("/p/".concat(o).concat(v))).catch(Mm())};h?t(function(e,t){return{API:{root:C.Z.fetchRoot.zhuanlan,types:ra.VALIDATE_SCHEDULED_PUBLISH,endpoint:"articles/".concat(e,"/scheduled-validate"),method:"POST",body:t},NOTIFICATION:!1}}(o)).then(E,(function(t){var n;if(400===(null==t?void 0:t.status)&&(null===(n=t.payload)||void 0===n?void 0:n.message))return fs.Z.confirm(t.payload.message,{title:"提醒",text:{ok:"确定发布",cancel:"我再想想"}}).then(E,(function(){e.reportSuccess(Uv)}))})):E()}}));return(0,h.useState)((function(){return e.recordError(Uv,i)}))[0]}var Gv=n(3090),zv=n(5406),Hv=function(e){var t=(0,Ne.Q4)().trackEvent;return(0,o.tZ)(zv.Z,(0,F.Z)((0,U.Z)({css:function(e){return[{display:"flex",width:"150px",height:"100px",borderRadius:"4px",border:"1px dashed",borderColor:e.colors.GBL05A,alignItems:"center"}]},onClick:function(){t({eventType:"Click",action:"Upload",elementLocation:{type:"Button",text:"上传封面"}})}},e),{children:(0,o.BX)(sc.Text,{color:"GBL05A",css:{fontSize:"12px",fontWeight:500,width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,o.tZ)(Gv.nY,{size:14,css:{marginRight:"4px"}}),"添加文章封面"]})}))},qv=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).uploadImage=function(t){var n=t.file;if(n){var o=e.props,r=o.logTime,i=o.updateDraft,a=o.uploadCover,c=o.showNotification;r("start");var s=r("calculate");if(n.size>1024*A.i3*1024)return c("抱歉！请上传大小为 ".concat(A.i3,"M 以下的图片文件"),"red");a(n,"article").then((function(e){var t={titleImage:e.url,isTitleImageFullScreen:!1,delta_time:s};return i(t)})).catch(Mm())}},e.handleRemove=function(){var t=e.props,n=t.logTime,o=t.updateDraft,r=t.removeCover;n("start"),o({titleImage:"",delta_time:n("calculate")}).then(r)},e}return n.prototype.render=function(){var e=this,t=this.props.image;return(0,o.BX)("div",{children:[t&&(0,o.BX)(sc.Box,{css:{position:"relative",width:"150px",height:"100px","&:hover .WriteCoverV2-buttonGroup":{display:"flex"}},children:[(0,o.tZ)(sc.Image,{alt:"封面图",src:t,size:"100%",css:{display:"block",borderRadius:"4px",objectFit:"cover"}}),(0,o.BX)(sc.Flex,{className:"WriteCoverV2-buttonGroup",css:function(e){return{display:"none",height:"32px",position:"absolute",left:"50%",bottom:"8px",transform:"translateX(-50%)",zIndex:"1",background:e.colorMod(e.colors.GBK02B).alpha(.75),borderRadius:"4px",border:0,alignItems:"center",".Button":{color:e.colors.GBK99B,fontSize:"13px",borderRadius:"4px",height:"32px",width:"47px",display:"flex",alignItems:"center",justifyContent:"center",border:"0",padding:"0","&:active":{background:e.colors.GBK02B,opacity:"0.5"}}}},children:[(0,o.tZ)(Ne.$U,{as:fc.ZP,zaText:!0,zaType:"Button",zaAction:"Upload",title:"更换",onClick:function(){return e.uploadNode.click()},children:"更换"}),(0,o.tZ)(sc.Box,{height:"12px",width:"1px",bg:"GBK09A"}),(0,o.tZ)(Ne.$U,{as:fc.ZP,zaText:!0,zaType:"Button",zaAction:"Unknown",title:"删除",onClick:this.handleRemove,children:"删除"})]})]}),(0,o.tZ)(Hv,{accept:".jpeg, .jpg, .png",customUpload:this.uploadImage,css:t&&{display:"none"},onRef:function(t){t&&(e.uploadNode=t)}}),(0,o.tZ)(sc.Text,{color:"GBK06A",mt:"8px",css:{fontSize:"13px",lineHeight:"20px"},children:"图片上传格式支持 JPEG、JPG、PNG"})]})},n}(h.Component);qv.propTypes={image:ic().string,onRef:ic().func,logTime:ic().func.isRequired,updateDraft:ic().func},qv.defaultProps={onRef:function(){}};var Vv=(0,Xe.compose)((0,js.Z)(null),(0,Re.connect)(null,{uploadCover:function(e,t){return e.length&&(e=e[0]),function(n){return n(Ca(ia,e,t)).then(Aa)}},removeCover:function(){return{type:va}},showNotification:jt.c0}))(qv),Xv=function(e){var t=e.columns,n=(0,Ne.Q4)().trackEvent,r=(0,Re.useDispatch)(),i=(0,Re.useSelector)((function(e){return e.articleDraft.selectedColumn})),a=0!==i,c=function(e){var o,i=e>0?"专栏收录-".concat(null===(o=t[e-1])||void 0===o?void 0:o.title):"不发布到专栏";n({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:i}}),r(Sa(e))};return(0,o.BX)(sc.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[(0,o.BX)(sc.Flex,{height:"38px",children:[(0,o.tZ)(xv.KT,{checked:a,text:"发布到专栏",onChange:function(){c(1)},id:"PublishPanel-columnLabel-1"}),(0,o.tZ)(xv.KT,{checked:!a,text:"不发布到专栏",onChange:function(){c(0)},id:"PublishPanel-columnLabel-0"})]}),a?(0,o.tZ)(xv.Qr,{placement:"bottom-left",useDefaultPosition:!0,onChange:c,value:i,css:{marginTop:"5px"},children:t.map((function(e,t){return(0,o.tZ)(xv.o3,{value:t+1,text:e.title},e.id)}))}):(0,o.tZ)(sc.Text,{color:"GBK06A",mt:"5px",css:{fontSize:"13px",lineHeight:"18px"},children:"将发布到个人主页的「文章」栏目下"})]})},Wv=function(e){return(0,o.BX)(sc.Flex,{py:"11px",children:[(0,o.tZ)(xv.gN,{name:"专栏收录"}),(0,o.tZ)(Xv,(0,U.Z)({},e))]})},Kv=n(51551),jv=n(96347),Yv=n.n(jv),Qv=n(16338),Jv=n(35559),$v=n(90041),eZ=n(91159),tZ=n(54365),nZ=n(57773),oZ=n(2752),rZ=n(66395),iZ=n(16915),aZ=Object.assign;var cZ=function(e){return f().createElement(iZ.Z,aZ({width:"18",height:"18",fill:"none",viewBox:"0 0 18 18"},e),f().createElement("path",{fill:"#444",fillRule:"evenodd",d:"M4.666 2.074a.566.566 0 0 1 .486-.274h7.568c.2 0 .386.105.487.276a.556.556 0 0 1 .007.557l-1.19 2.128c2.594 1.009 4.176 3.293 4.176 5.77 0 1.685-.747 3.123-2.04 4.125C12.88 15.651 11.088 16.2 9 16.2s-3.879-.549-5.16-1.544c-1.293-1.002-2.04-2.44-2.04-4.124 0-2.447 1.502-4.701 4.046-5.725l-1.191-2.18a.557.557 0 0 1 .011-.553Zm2.6 5.481a.568.568 0 0 1 .798.042L9 8.63l.936-1.032a.568.568 0 0 1 .798-.042c.232.208.25.562.042.792l-1.21 1.335v.345h1.129c.312 0 .565.251.565.56 0 .31-.253.561-.565.561h-1.13v1.308c0 .31-.253.56-.565.56a.563.563 0 0 1-.565-.56v-1.308h-1.13a.563.563 0 0 1-.565-.56c0-.31.253-.561.565-.561h1.13v-.345L7.224 8.347a.557.557 0 0 1 .042-.792Z",clipRule:"evenodd"}))},sZ=Object.assign;var uZ,lZ=function(e){return f().createElement(iZ.Z,sZ({width:"18",height:"18",fill:"none",viewBox:"0 0 18 18"},e),f().createElement("path",{fill:"#444",d:"M15 10.12c0 3.11-2.686 5.63-6 5.63s-6-2.52-6-5.63c0-1.026.347-1.987.857-2.816.6-.972 1.286-1.351 2.143-2.36.857-1.01 1.125-2.292 1.125-2.694 0-.402 1.696.128 2.732 2.205 1.036 2.078.536 3.42 1.393 3.42s.75-2.744 1.607-2.068C14.167 6.839 15 8.388 15 10.12Z"}))},dZ=[Xm.AN.analytics.id,Xm.AN.hotSpot.id,Xm.AN.advancedCreation.id,Xm.AN.contentRevenue.id,Xm.AN.followProfile.id,Xm.AN.mcn.id],pZ=(uZ={},(0,Ke.Z)(uZ,Xm.Yj.banned,[Xm.AN.recommend.id]),(0,Ke.Z)(uZ,Xm.Yj.notActive,[Xm.AN.recommend.id].concat((0,r.Z)(dZ))),(0,Ke.Z)(uZ,Xm.Yj.canApply,[Xm.AN.commercialTask.id,Xm.AN.zixuan.id,Xm.AN.recommend.id].concat((0,r.Z)(dZ))),(0,Ke.Z)(uZ,Xm.Yj.canDraw,[Xm.AN.commercialTask.id,Xm.AN.zixuan.id,Xm.AN.recommend.id].concat((0,r.Z)(dZ))),(0,Ke.Z)(uZ,Xm.Yj.applying,[Xm.AN.commercialTask.id,Xm.AN.zixuan.id].concat((0,r.Z)(dZ))),uZ),hZ=function(e){var t=e.realRights,n=void 0===t?[]:t,o=e.isOffice,r=void 0!==o&&o,i=e.menuRights,a=void 0===i?[]:i;return n.map((function(e){var t=a.find((function(t){return t.id===e.id}));return t&&(0,F.Z)((0,U.Z)({},t,e),{isExternal:Xm.WD.includes(t.id),exactActive:Xm.xu.includes(t.id)})})).filter((function(e){var t=e||{},n=t.officeOnly,o=void 0!==n&&n,i=t.status,a=t.id;return i&&pZ[i]&&pZ[i].includes(a)?!o||r:(!o||r)&&(0,Xm.Gf)(e)}))},fZ=(Mu.y,$v.E,tZ.D,nZ.E,Qv.Z,Jv.Z,oZ.L,rZ.Y,$l.k,"https://zhihu-live.zhimg.com/namespace_1001/static/20210423/237a595e8a3454f3c74a5f587c7bf4a8.png"),mZ="https://zhihu-live.zhimg.com/namespace_1001/static/20210423/d4c4246f9eda06f25e2f9bb9d5bfdd59.png",vZ="https://zhihu-live.zhimg.com/namespace_1001/static/20210423/3e1821b2482307dcf4d673a9c2129671.png",ZZ=function(e){var t=e.data,n=void 0===t?0:t,r=vZ,i=fZ,a=mZ,c=(0,o.tZ)(sc.Image,{width:"18px",mr:"6px",src:i});return Yv()(n)&&n.includes("%")&&(n=Number(n.replace(/%/,""))),n>0&&(c=(0,o.tZ)(sc.Image,{width:"16px",mr:"6px",src:a})),n<0&&(c=(0,o.tZ)(sc.Image,{width:"16px",mr:"6px",src:r})),c},gZ=n(63139),EZ=n(55509),TZ=function(e){var t=e.children,n=(0,K.Z)(e,["children"]);return(0,o.tZ)(sc.Flex,(0,F.Z)((0,U.Z)({color:"GBL05A",py:"16px",css:function(e){return{fontSize:"14px",borderBottom:"1px solid ".concat(e.colors.GBK09A)}}},n),{children:t}))},CZ=function(e){var t=e.children,n=(0,K.Z)(e,["children"]);return(0,o.tZ)(sc.Flex,(0,F.Z)((0,U.Z)({py:"15px",css:function(e){return{alignItems:"center",borderBottom:"1px solid ".concat(e.colors.GBK09A)}}},n),{children:t}))};function AZ(){var e=(0,up.Z)(["","回答 · ","关注"]);return AZ=function(){return e},e}var _Z=function(e){var t=e.list,n=(0,K.Z)(e,["list"]);return(0,o.tZ)(pc.Z,{offset:52,children:(0,o.tZ)(TZ,(0,F.Z)((0,U.Z)({backgroundColor:"GBK99A"},n),{children:t.map((function(e,t){var n=e.width,r=e.text,i=e.css;return(0,o.tZ)(sc.Text,(0,F.Z)((0,U.Z)({flexBasis:"".concat(n,"px")},i&&{css:i}),{children:r}),t)}))}))})},yZ=function(e){var t=e.width,n=e.title,r=e.titleLink,i=e.subText,a=e.answerCount,c=e.followerCount,s=e.renderLabel,u=e.keyWords,l=e.urlToken,d=(0,K.Z)(e,["width","title","titleLink","subText","answerCount","followerCount","renderLabel","keyWords","urlToken"]);return(0,o.BX)(sc.Box,(0,F.Z)((0,U.Z)({flexBasis:"".concat(t,"px")},d),{children:[(0,o.tZ)(EZ.pl,{href:r,zaType:"Card",target:"_blank",zaText:u?"搜索".concat(u):l?"算法":"",children:(0,o.BX)(sc.Box,{className:"Creator-QuestionShared-title",css:function(e){return(0,F.Z)((0,U.Z)({},(0,od.S)(2)),{fontSize:"15px",color:e.colors.GBK03A,fontWeight:500,lineHeight:"21px",paddingRight:"100px"})},children:[s&&s(),n]})}),(0,o.tZ)(sc.Flex,{fontSize:"14px",color:"GBL05A",mt:"8px",alignItems:"center",children:i||dp()(AZ(),(0,Is.Zh)(a),(0,Is.Zh)(c))})]}))},SZ=(0,I.withRouter)((function(e){var t=e.width,n=e.haveAnswer,r=void 0!==n&&n,i=e.questionAnswerUrl,a=void 0===i?null:i,c=e.writeQuestionUrl,s=e.isArticleToAnswer,u=void 0!==s&&s,l=e.id,d=e.postId,p=e.text,h=(0,K.Z)(e,["width","haveAnswer","questionAnswerUrl","writeQuestionUrl","isArticleToAnswer","id","postId","text"]),f=h.params,m=h.router,v=f.urlToken,Z=(0,Re.useDispatch)(),g=function(e,t,n){var o="/question/".concat(e,"?").concat(t);n?window.location.href="https://www.zhihu.com".concat(o):m.push(o)};return(0,o.tZ)(sc.Flex,(0,F.Z)((0,U.Z)({justifyContent:"center",flexBasis:"".concat(t,"px")},h),{children:(0,o.tZ)(Ne.$U,{zaType:"Button",zaText:p||!0,zaBlock:u||r?"ArticleToAnswer":"",zaAction:"OpenUrl",shouldTrackShow:!0,extra:{link:{get url(){return r?a:c}}},children:u?(0,o.tZ)(fc.ZP,{preset:"primary",color:"blue",label:"编辑发布",css:{padding:"0 9px"},onClick:function(){Z((0,yn.Sk)(v,l)).then((function(e){var t=null==e?void 0:e.payload,n=t.isAllowPublish,r=t.hasAnswer,i=t.hasDraft,a=t.disableReason,c=t.articleCheckResult,s=new URLSearchParams((0,U.Z)({attach_to_article:v||d,write:""},d&&{push_activity:0}));(null==c?void 0:c.hasPublishedAnswer)?Z((0,jt.c0)("一个文章只能发布一个问题~")):n?g(l,s,d):r?Z((0,jt.c0)("已发布回答")):i?fs.Z.confirm((0,o.tZ)("div",{css:{textAlign:"center"},children:"你在该问题下已有草稿，是否将此文章内容覆盖到草稿箱"})).then((function(){g(l,s,d)})).catch((function(){return null})):Z((0,jt.c0)(a))}))}}):r?(0,o.tZ)(pd.Z,{icon:gZ.yP,label:"查看回答",href:a,target:"_blank",css:{padding:"0 9px"}}):(0,o.tZ)(pd.Z,{className:"QuestionItem-footer--writeAnswerButton",label:"写回答",icon:$v.E,href:c,target:"_blank"})})}))})),IZ=function(e){var t=e.zaContent,n=e.zaBlock,r=(0,K.Z)(e,["zaContent","zaBlock"]);return(0,o.tZ)(Ne.eV,{content:t,block:n,children:(0,o.tZ)(Ne.Wi,(0,U.Z)({as:sc.Box,zaType:"Card"},r))})};function bZ(){var e=(0,up.Z)(["共",""]);return bZ=function(){return e},e}var wZ=function(e){var t={__html:e.title};return(0,o.tZ)("div",{className:"SearchQuestion-item-title",dangerouslySetInnerHTML:t})},RZ=function(e){var t=e.item,n=e.index,r=e.isArticleToAnswer,i=void 0!==r&&r,a=e.isSearch,c=void 0!==a&&a,s=e.onChange,u=e.keyWords,l=e.urlToken,d=t||{},p=d.question,f=p.id,m=p.highlightTitle,v=p.url,Z=p.haveAnswer,g=p.questionAnswerUrl,E=d.reaction,T=E.newPv,C=E.pv,A=E.followNum,_=E.answerNum,y=d.checked,S=(0,h.useMemo)((function(){return{questionAnswerUrl:g,writeQuestionUrl:(0,Kv.D)(v,{write:""}),haveAnswer:Z}}),[Z,g,v]),I=(0,h.useMemo)((function(){return{title:(0,o.tZ)(wZ,{title:m}),titleLink:v,followerCount:A,answerCount:_}}),[_,A,m,v]),b="".concat(l?"".concat(u?"搜索".concat(u):"算法","; 文章token: ").concat(l):"");return(0,o.tZ)(IZ,{zaContent:{token:String(f),type:"Question"},zaBlock:"RecommendQuestionItem",zaText:b,children:(0,o.BX)(CZ,{css:function(e){return{"& .SearchQuestion-item-title":{em:{fontStyle:"normal",color:e.colors.GRD03A}}}},children:[(0,o.tZ)(yZ,(0,U.Z)({width:415,keyWords:u,urlToken:l},I)),(0,o.BX)(sc.Box,{flexBasis:"130px",children:[(0,o.BX)(sc.Flex,{alignItems:"center",children:[(0,o.tZ)(ZZ,{data:T}),(0,o.tZ)(sc.Text,{fontSize:"14px",color:"GBK03A",children:(0,Is.Zh)(T)})]}),(0,o.tZ)(sc.Text,{fontSize:"12px",color:"GBK06A",mt:"6px",children:dp()(bZ(),(0,Is.Zh)(C))})]}),c?(0,o.tZ)(sc.Flex,{justifyContent:"center",flexBasis:"131px",children:(0,o.tZ)(Ne.$U,{zaType:"Button",zaText:b,zaBlock:"ArticleToAnswer",shouldTrackShow:!0,children:(0,o.tZ)(fc.ZP,{preset:y?"primary":"secondary",color:"blue",label:y?"已选择":"选择",css:{padding:"0 15px"},onClick:function(){return s&&s(t,n)}})})}):(0,o.tZ)(SZ,(0,F.Z)((0,U.Z)({width:131},S),{isArticleToAnswer:i,id:f,postId:l,text:b}))]})})};RZ.proptypes={item:ic().object,index:ic().number,isArticleToAnswer:ic().bool,isSearch:ic().bool,onChange:ic().func,keyWords:ic().string,urlToken:ic().string};var NZ=RZ,OZ=function(e){var t=e.totals,n=(0,h.useMemo)((function(){return[{width:415,text:"推荐问题 ".concat(t?(0,Is.uf)(t):"")},{width:130,text:"浏览增量"},{width:131,text:"操作",css:{textAlign:"center"}}]}),[t]);return(0,o.tZ)(_Z,{list:n})};OZ.prototypes={totals:ic().number};var DZ=OZ,BZ=n(14116),PZ=function(e){var t=e.urlToken,n=e.keyWords,i=e.onChange,a=e.defaultConfig,c=(0,Re.useDispatch)(),s=(0,h.useRef)(a.nextRequest||null),u={totals:0,isEnd:!1,next:null},l=(0,Ae.Z)((0,h.useState)(!0),2),d=l[0],p=l[1],f=(0,Ae.Z)((0,h.useState)(!1),2),m=f[0],v=f[1],Z=(0,Ae.Z)((0,h.useState)(a.questionList||[]),2),g=Z[0],E=Z[1],T=(0,Ae.Z)((0,h.useState)(u),2),C=T[0],A=T[1],_=(0,Ae.Z)((0,h.useState)(a),2),y=_[0],S=_[1],I=C.isEnd,b=function(){m||(v(!0),c((0,yn.sO)(s.current||"creators/search/query",!s.current&&{query:n,no_answer:1,no_draft:1})).then((function(e){var t=e.payload,o=t.paging,i=t.data;if(o=o||(0,F.Z)((0,U.Z)({},u),{totals:i.length||0,isEnd:!0}),A(o),null==y?void 0:y.checkedItem){var a=(0,r.Z)(i);(null==y?void 0:y.keyword)===n&&(a=i.filter((function(e){var t;return(null==e||null===(t=e.question)||void 0===t?void 0:t.id)!==y.checkQuestionId}))),E((0,r.Z)((null==o?void 0:o.isStart)?[(0,F.Z)((0,U.Z)({},y.checkedItem),{checked:!0})]:g).concat((0,r.Z)(a)))}else E((0,r.Z)((null==o?void 0:o.isStart)?[]:g).concat((0,r.Z)(i)));v(!1),s.current=o.next}),(function(e){throw 403===(null==e?void 0:e.status)?new Error("请求失败，请稍后重试"):new Error("发生未知错误，请稍后重试")})).catch((function(){return v(!1)})))},w=function(){v(!0),c((0,yn.oE)(t)).then((function(e){var t=e.payload.data;E(t||[]),v(!1)})).catch((function(){return v(!1)}))},R=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(d&&(null==a||null===(e=a.questionList)||void 0===e?void 0:e.length))return E(null==a?void 0:a.questionList),void p(!1);t?w():b()};(0,h.useEffect)((function(){n&&!d&&(s.current=null,E([]),v(!1),R()),!n&&d&&R(!0),p(!1)}),[n]);var N=function(e,t){var o=g.map((function(e){return(0,F.Z)((0,U.Z)({},e),{checked:!1})}));o[t].checked=!g[t].checked;var r="",a={};if(o[t].checked){var c,u=o[t];o.splice(t,1),o.unshift(u),r=null==e||null===(c=e.question)||void 0===c?void 0:c.id,a={questionList:o,nextRequest:s.current,keyword:n,checkQuestionId:r||"",checkedItem:e}}S(a),i&&i(r||"",a),E(o)},O=g.map((function(e,r){return(0,o.tZ)(NZ,{item:e,index:r,isSearch:!0,isArticleToAnswer:!0,keyWords:n,urlToken:t,onChange:N},"".concat(e.question.id,"+").concat(r))})),D=(0,o.tZ)(xm.O,{variant:"T01",height:120});return(0,o.BX)(sc.Box,{children:[(0,o.tZ)(DZ,{}),(0,o.BX)(sc.Box,{className:"Box-Wrap",css:{height:"305px",overflowY:"scroll","& .skeleton":{padding:"20px 0"}},children:[(0,o.tZ)(sc.Box,{children:n?(0,o.tZ)(ep.Z,{onLoad:b,isLoading:m,placeholder:D,isDrained:I,getContainer:function(e){return e.parentElement.parentElement},children:O}):m?D:O}),!m&&!g.length&&(0,o.tZ)(BZ.H.EI1,{image:"default",content:"暂无相关推荐问题，去搜索试试 ~"})]})]})};PZ.proptypes={urlToken:ic().string,keyWords:ic().string,onChange:ic().func,defaultConfig:ic().object};var kZ=PZ,xZ=n(92718),LZ=function(e){var t=e.show,n=e.onClose,r=e.urlToken,i=e.articleTitle,a=e.questionList,c=(0,xZ.Z)(),s=(0,Kv.D)("https://www.zhihu.com/".concat(c?"organization":"creator","/manage/creation/all/").concat(r),{title:i});return(0,o.tZ)(Ms.Z,{className:"QuestionRecommendModal",title:"你的文章很适合回答以下问题",onClose:n,size:"large",css:{width:"724px","& .Modal-content":{margin:"22px 0 5px"},"& .Creator-QuestionShared-title":{paddingRight:"65px"}},children:t&&(0,o.tZ)(Ne.eV,{block:"QuestionRecommendModal",children:(0,o.BX)(Ne.Wi,{zaType:"Popup",zaText:"文章适合回答的问题推荐弹窗展示",children:[(0,o.tZ)(sc.Text,{textAlign:"center",mb:"16px",fontWeight:"400",fontSize:"14px",color:"GBK06A",children:"选择一个问题，在编辑后进行发布"}),(0,o.BX)(sc.Box,{children:[(0,o.tZ)(DZ,{}),(0,o.tZ)(sc.Box,{children:a.map((function(e,t){return t<3&&(0,o.tZ)(NZ,{item:e,isArticleToAnswer:!0,urlToken:r},"".concat(e.question.id,"+").concat(t))}))})]}),(0,o.tZ)(sc.Box,{textAlign:"center",children:(0,o.tZ)(Ne.$U,{zaType:"Button",zaText:"查看更多问题推荐",zaBlock:"MoreRecommendQuestion",zaAction:"OpenUrl",extra:{link:{url:s}},children:(0,o.tZ)(sc.Text,{mt:"20px",fontWeight:"500",fontSize:"15px",color:"GBL01A",css:{cursor:"pointer"},children:(0,o.tZ)("a",{href:s,rel:"noreferrer",children:"查看更多问题推荐"})})})})]})})})};LZ.proptypes={show:ic().bool,onClose:ic().func,urlToken:ic().string,articleTitle:ic().string,questionList:ic().array};var UZ=n(24197),FZ=n(1474),MZ=function(e){var t=e.label,n=e.handleDeleteData;return"搜索历史"===t?(0,o.tZ)(Zu,{onDelete:n,label:t}):(0,o.tZ)("div",{onMouseDown:function(e){return e.preventDefault()},role:"button",tabIndex:0,className:"Creator-SearchBar-label",children:t})},GZ=function(e){var t=e.item,n=e.handleDeleteData,r=e.handleReportShow,i=t.type,a=t.data,c=t.index,s=t.rawSearchResult,u=null;switch(i){case"topSearch":u=(0,o.tZ)(_u,{index:c,query:a});break;case"history":var l=t.data;u=(0,o.tZ)(mu,{data:l,index:c,onDelete:n,rawSearchResult:s});break;case"suggest":u=(0,o.tZ)(Cu,{data:a,index:c,rawSearchResult:s});break;case"reports":u=(0,o.tZ)(gu,{handleReportShow:r})}return u||null},zZ=function(e,t){return e.map((function(e,n){return(0,U.Z)({id:null==e?void 0:e.rawId,index:n,data:(null==e?void 0:e.displayQuery)||(null==e?void 0:e.query)||e,query:(null==e?void 0:e.query)||e},t)}))},HZ={topSearch:"知乎热搜",history:"搜索历史"},qZ=function(e){var t,n=e.outCss,i=e.query,a=e.placeholder,c=e.currentUserId,s=e.onFocus,u=e.onSelect,l=e.onSubmit,d=e.ignoreHotWord,p=void 0!==d&&d,f=e.customSearchStyle,m=void 0!==f&&f,v=(0,Re.useDispatch)(),Z=i.q,g=(0,h.useRef)(null),E=(0,h.useRef)(null),T=(0,Ae.Z)((0,h.useState)(null),2),C=T[0],A=T[1],_=(0,Ae.Z)((0,h.useState)({topSearch:[],history:[],suggest:[]}),2),y=_[0],S=_[1],I=(0,Ae.Z)((0,h.useState)(!1),2),b=I[0],w=I[1],R=C&&!m,N=function(){return Su(c)},O=function(e){return Iu(N(),e)},D=function(e){var t=e.topSearchData,n=e.historyData,o=e.suggestData,r=void 0===o?[]:o;if(E.current.inputNode.value)return S((0,U.Z)({suggest:r},r.length>0&&{reports:[{type:"reports"}]}));var i=y.topSearch,a=void 0===i?[]:i,c=y.history,s=void 0===c?[]:c;return S((0,U.Z)({},t?{topSearch:zZ(t,{type:"topSearch"})}:{topSearch:a},n?{history:zZ(n,{type:"history"})}:{history:s}))},B=function(){var e=O(),t=Ru(),n=Nu((function(){return v(jo())})),o=function(t){D({topSearchData:(0,r.Z)(t),historyData:e})};return p?o([]):t?o(t):n().then(o)},P=function(e){var t=wu((function(){return v(Yo(e))})),n=O(e);t().then((function(t){D({suggestData:Go()((0,r.Z)(zZ(n,{type:"history",rawSearchResult:e})).concat((0,r.Z)(zZ(t,{type:"suggest",rawSearchResult:e}))),(function(e,t){var n=e.data,o=t.data;return n.toLowerCase()===o.toLowerCase()}))})}))},k=function(){var e=E.current.inputNode.value;null==l||l(e)},x=Me()((function(e){return A(e),e?P(e):B()}),300),L=function(e,t){e.stopPropagation();var n=bu(N(),t);D({historyData:n})};return(0,h.useEffect)((function(){A(Z)}),[Z]),(0,o.BX)(sc.Box,{css:n,children:[(0,o.BX)("form",{className:Jr()("Creator-SearchBar-tool"),ref:g,onSubmit:function(e){return e.preventDefault()},children:[(0,o.tZ)(Qs,(0,F.Z)((0,U.Z)({autoSelect:!1,ref:E,labels:HZ,groups:y,value:Z||"",renderLabel:function(e){return(0,o.tZ)(MZ,{label:e,handleDeleteData:L})},renderItem:function(e){return(0,o.tZ)(GZ,{item:e,handleDeleteData:L,handleReportShow:function(){return w(!0)}})},inputProps:{type:"text",maxLength:100,grey:!0,placeholder:a,className:Jr()("Creator-SearchBar-input",{"Creator-SearchBar-input-custom":p&&m}),after:(0,o.BX)(o.HY,{children:[R&&(0,o.tZ)(sc.Box,{width:"24px"}),(0,o.BX)(fc.ZP,(0,F.Z)((0,U.Z)({className:"Creator-SearchBar-searchButton",preset:"primary",color:C||m?"blue":"grey"},C&&{onClick:k}),{"aria-label":"搜索",children:[(0,o.tZ)(xc.J7,{size:18,center:!0,className:Jr()("Creator-SearchBar-searchIcon",{hasValue:C})}),m&&(0,o.tZ)("span",{css:{marginLeft:"8px"},children:"搜索"})]}))]})},menuProps:{menuClassName:Jr()("Creator-SearchBar-menu"),menuContainerClassName:"Creator-SearchBar-menuContainer",style:{width:null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect().width}},onFocus:function(){return s&&s(),C?P(C):B()},onSelect:function(e,t){null==u||u(t)}},C&&{onEnterInput:k}),{onChange:x})),R&&(0,o.tZ)(FZ.C,{text:!0,css:function(e){return{color:e.colors.GBK07A,fontSize:"18px",cursor:"pointer",position:"absolute",top:"11px",right:"55px"}},onClick:function(){A(""),E.current.setState({value:""}),setTimeout((function(){E.current.inputNode.focus(),B()}),50)}})]}),(0,o.tZ)(Lc.y,{type:"search_suggested_word",shown:b,onClose:function(){return w(!1)},zaEnabled:!0,List:y.suggest})]})},VZ=function(e){var t=(0,Ne.Q4)().trackEvent,n=e.show,r=e.onClose,i=e.urlToken,a=e.onChange,c=((0,Re.useSelector)(le.ib)||{}).id,s=(0,Re.useDispatch)(),u=(0,Ae.Z)((0,h.useState)(""),2),l=u[0],d=u[1],p=(0,Ae.Z)((0,h.useState)(!1),2),f=p[0],m=p[1],v=(0,Ae.Z)((0,h.useState)({}),2),Z=v[0],g=v[1],E=(0,Ae.Z)((0,h.useState)({}),2),T=E[0],C=E[1],A=(0,Ae.Z)((0,h.useState)(""),2),_=A[0],y=A[1];(0,h.useEffect)((function(){return d((null==Z?void 0:Z.keyword)||""),y((null==Z?void 0:Z.checkedQuestionId)||""),function(){(null==Z?void 0:Z.questionList)||y("")}}),[n]);var S=function(e){d(e||""),function(e){t({eventType:"Click",action:"Search",block:"ArticleToAnswerSearchInput",elementLocation:{type:"Input",text:"搜索".concat(e,"; 文章token: ").concat(i)}},{link:{url:window.location.href}})}(e||"")};return(0,o.tZ)(Ms.Z,{className:"QuestionSearchModal",title:"投稿至问题",onClose:r,size:"large",css:{width:"724px","& .Modal-content":{margin:"22px 0 5px"},"& .Creator-QuestionShared-title":{paddingRight:"65px"}},children:n&&(0,o.tZ)(Ne.eV,{block:"QuestionRecommendSearchModal",children:(0,o.BX)(Ne.Wi,{zaType:"Popup",zaText:"投稿至问题弹窗展示",children:[(0,o.tZ)(sc.Box,{textAlign:"center",children:(0,o.tZ)(qZ,{outCss:{width:"400px",margin:"0 auto 16px"},currentUserId:c,query:{q:l},placeholder:"请输入关键词查找问题",onSelect:function(e){return S(null==e?void 0:e.query)},onSubmit:function(e){return S(e)}})}),(0,o.BX)(sc.Text,{textAlign:"center",mb:"16px",fontWeight:"400",fontSize:"14px",color:"GBK06A",children:["最多选择 1 个，已选择 ",_?1:0," 个"]}),(0,o.tZ)(kZ,{urlToken:i,keyWords:l,defaultConfig:Z,onChange:function(e,t){y(e),C((0,F.Z)((0,U.Z)({},t),{checkedQuestionId:e}))}}),(0,o.tZ)(sc.Box,{textAlign:"center",children:(0,o.tZ)(Ne.$U,{zaType:"Button",zaText:"".concat(l?"搜索".concat(l):"算法","; 文章token: ").concat(i,"; 问题id: ").concat(_),zaBlock:"RecommendQuestionChoose",children:(0,o.tZ)(fc.ZP,{icon:f&&UZ.Z,onClick:function(){if(!_)return g({}),a(""),void r();m(!0),s((0,yn.Sk)(i,_)).then((function(e){var t=(null==e?void 0:e.payload)||{},n=t.isAllowPublish,o=t.hasAnswer,i=t.hasDraft,c=t.disableReason;return m(!1),n||i?(a(_),g(T),void r()):o?(s((0,jt.c0)("已发布回答，请换个问题哦")),g({}),void a("")):void s((0,jt.c0)(c))}))},disabled:f,preset:"primary",color:"blue",css:{width:"218px",marginTop:"40px"},children:"确定"})})})]})})})};VZ.proptypes={show:ic().bool,onClose:ic().func,onChange:ic().func,urlToken:ic().string};var XZ=VZ,WZ=function(e){var t,n,r=e.urlToken,i=e.onChange,a=e.style,c=e.disabled,s=(0,Ae.Z)((0,h.useState)(!1),2),u=s[0],l=s[1],d=(0,Ae.Z)((0,h.useState)("未选择"),2),p=d[0],f=d[1],m=(0,qc.Z1)();return(null==m||null===(t=m.commands)||void 0===t||null===(n=t.contribute)||void 0===n?void 0:n.instruction)?null:(0,o.BX)(sc.Box,{css:a,children:[(0,o.BX)(sc.Flex,{py:"11px",children:[(0,o.tZ)(xv.gN,{name:"投稿至问题",helper:(0,o.BX)("div",{css:{p:{textIndent:0}},children:[(0,o.tZ)("p",{children:"1.含好物卡片、知+ 等卡片的文章不支持投稿至问题"}),(0,o.tZ)("p",{children:"2.超过发文限制的文章不支持持投稿至问题"})]})}),(0,o.tZ)(Ne.$U,{zaType:"Button",zaText:"投稿至问题",zaBlock:"ArticleToAnswerSelect",shouldTrackShow:!0,children:(0,o.tZ)(xv.Qr,{onClick:function(){return l(!0)},text:p,disabled:c})})]}),(0,o.tZ)(XZ,{urlToken:r,onClose:function(){return l(!1)},show:u,onChange:function(e){f(e?"已选 1 个问题":"未选择"),i&&i(e)}})]})};WZ.proptypes={urlToken:ic().string,onChange:ic().func,style:ic().object};var KZ=WZ,jZ=(0,h.forwardRef)((function(e,t){var n=e.disclaimerInfo,r=e.articleDisclaimers,i=(0,Ne.Q4)().trackEvent,a=(0,Ae.Z)((0,h.useState)({type:"none",description:"无声明"}),2),c=a[0],s=a[1],u=JSON.parse(JSON.stringify(r));u.push({type:"none",description:"无声明"});var l=Boolean(n);return(0,h.useEffect)((function(){l&&s(n)}),[l]),(0,h.useImperativeHandle)(t,(function(){return{getReshipmentDisclaimers:function(){return c}}})),(0,o.tZ)(xv.Qr,{onChange:function(e){var t=u.find((function(t){return t.type===e}));i({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"创作声明-".concat(t.description)}}),t&&s(t)},value:c.type,children:u.map((function(e){return(0,o.tZ)(xv.o3,{value:e.type,text:e.description},e.type)}))})})),YZ=(0,h.forwardRef)((function(e,t){return(0,o.BX)(sc.Flex,{py:"11px",children:[(0,o.tZ)(xv.gN,{name:"创作声明",helper:(0,o.BX)(o.HY,{children:[(0,o.tZ)("p",{children:"「创作声明」是为自己创作的添加个人声明的工具。当你在创作特定内容（如内容存在虚构或剧透等情节）时，可设置创作声明，该声明将会展示在回答或文章开头。"}),(0,o.tZ)("p",{children:"创作声明表达的是创作者对内容负责的态度。知乎鼓励创作者设置创作声明，以方便知友更好地辨识和理解内容信息。你也可以在编辑内容时，关闭创作声明。"})]})}),(0,o.tZ)(sc.Box,{flex:"1",children:(0,o.tZ)(jZ,(0,F.Z)((0,U.Z)({},e),{ref:t}))})]})})),QZ=YZ,JZ=n(26223),$Z=n(61584),eg=13,tg=32,ng=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){return(0,ec.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.className,n=(0,K.Z)(e,["className"]);return(0,o.tZ)(fc.ZP,(0,U.Z)({className:Jr()("Button Button--plain",t)},n))},n}(h.Component);function og(e){return(0,o.tZ)("li",(0,F.Z)((0,U.Z)({},e),{className:Jr()("ColumnMenu-item",e.className)}))}var rg=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={isOpen:!1,expand:!1},e.handleMenuClick=function(t){"INPUT"!==t.target.nodeName&&e.toggle()},e.handleMenuKeyDown=function(t){t.keyCode!==eg&&t.keyCode!==tg||(e.toggle(),t.preventDefault())},e.handleWrapperMouseenter=function(){e.toggle(!0)},e.handleWrapperMouseleave=function(){e.toggle(!1)},e.handleDocClick=function(t){e.state.isOpen&&!e.wrapperNode.contains(t.target)&&(e.toggle(!1),t.stopPropagation(),t.preventDefault())},e.createButton=function(){var t=e.props,n=t.trigger,o=t.children,r=e.props.button;return r||h.Children.forEach(o,(function(e){e&&e.type===ng&&(r=e)})),(0,h.cloneElement)(r,{className:Jr()("MenuButton MenuButton-listen-".concat(n),r.props.className),onKeyDown:e.handleMenuKeyDown,ref:function(t){e.buttonRef=t}})},e}var r=n.prototype;return r.componentDidMount=function(){this.buttonNode=Ce().findDOMNode(this.buttonRef);var e=this.props,t=e.trigger,n=e.autoHide;"click"===t?(this.buttonNode.addEventListener("click",this.handleMenuClick),this.dropdownNode.addEventListener("click",this.handleMenuClick),document.addEventListener("click",this.handleDocClick,!0)):(this.wrapperNode.addEventListener("mouseenter",this.handleWrapperMouseenter),this.wrapperNode.addEventListener("mouseleave",this.handleWrapperMouseleave),n&&this.dropdownNode.addEventListener("click",this.toggle.bind(this,!1)))},r.componentWillUnmount=function(){"click"===this.props.trigger?(this.buttonNode.removeEventListener("click",this.handleMenuClick),this.dropdownNode.removeEventListener("click",this.handleMenuClick),document.removeEventListener("click",this.handleDocClick,!0)):(this.wrapperNode.removeEventListener("mouseenter",this.handleWrapperMouseenter),this.wrapperNode.removeEventListener("mouseleave",this.handleWrapperMouseleave)),clearTimeout(this.timer)},r.toggle=function(e){var t=this,o=e;"boolean"!=typeof e&&(o=!this.state.isOpen);var r=this.props,i=r.onOpen,a=r.onClose,c=r.delay;o?(this.setState({isOpen:o}),this.timer=setTimeout((function(){t.setState({expand:!0}),i.call(t)}),c)):(this.setState({expand:!1}),this.timer=setTimeout((function(){t.setState({isOpen:o}),a.call(t)}),n.TRANSITION_DELAY+c))},r.render=function(){var e=this,t=this.props,n=t.className,r=t.children,i=t.arrow,a=this.state,c=a.expand,s=a.isOpen;return(0,o.BX)("div",{className:Jr()("ColumnMenu",c?"ColumnMenu--open":"",n),ref:function(t){return e.wrapperNode=t},children:[this.createButton(),(0,o.BX)("div",{className:"ColumnMenu-dropdown",style:{visibility:!s&&"hidden"},ref:function(t){return e.dropdownNode=t},children:[s&&(0,o.tZ)("ul",{className:"ColumnMenu-list",children:h.Children.map(r,(function(e){return e?e.type===ng?null:e.type===og?e:(0,o.tZ)(og,{children:e}):e}))}),i]})]})},n}(h.Component);rg.TRANSITION_DELAY=200,rg.propTypes={trigger:ic().oneOf(["click","hover"]),onOpen:ic().func,onClose:ic().func,button:ic().element,arrow:ic().element,autoHide:ic().bool,delay:ic().number},rg.defaultProps={trigger:"click",onOpen:function(){},onClose:function(){},arrow:null,autoHide:!1,delay:50};var ig=rg,ag=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).onCompositionStart=function(){e.compositing=!0},e.onCompositionEnd=function(){e.compositing=!1,e.prevValue&&e.props.onChange(e.prevValue),e.prevValue=null},e.handleInputChange=function(t){var n=t.target.value;e.compositing?e.prevValue=n:e.props.onChange(n)},e}var r=n.prototype;return r.componentDidMount=function(){document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd)},r.componentWillUnmount=function(){document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd)},r.render=function(){var e=this.props,t=e.menuButton,n=e.placeholder,r=e.friends,i=e.onClick,a=e.className,c=e.onOpen,s=e.onClose;return(0,o.BX)(ig,{preventCloseOnTarget:!0,trigger:"click",className:Jr()("ColumnSearchMenu",a),button:t,onOpen:c,onClose:s,children:[(0,o.tZ)(Pu.Z,{placeholder:n,className:"ColumnSearchMenu-searchInput",targetClassName:"preventCloseOnTarget",onChange:this.handleInputChange,before:(0,o.tZ)(xc.J7,{text:!0})}),r&&r.map((function(e){return(0,o.tZ)(fc.ZP,{preset:"plain",className:"ColumnSearchMenu-selectFriendsButton preventCloseOnTarget",onClick:function(t){return i(t,e)},children:(0,o.BX)("div",{className:"ColumnSearchMenu-friends preventCloseOnTarget",children:[(0,o.tZ)("img",{src:(0,Yr.imgUrl)(e.avatarUrl,"m"),className:"ColumnSearchMenu-image preventCloseOnTarget",alt:"头像"}),(0,o.tZ)("span",{className:"preventCloseOnTarget",children:e.name})]})},e.id)}))]})},n}(h.Component);ag.propTypes={menuButton:ic().node.isRequired,placeholder:ic().string.isRequired,friends:ic().arrayOf(ic().shape({id:ic().string.isRequired,avatarUrl:ic().string,name:ic().string.isRequired})),onChange:ic().func.isRequired,onClick:ic().func.isRequired,className:ic().string,onOpen:ic().func,onClose:ic().func};var cg=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={selectedColumn:null,isInvitedFriends:!1,selectedFriendList:[],isReviewInvite:!1},e.onClickSelectFriends=function(t,n){t.preventDefault(),e.props.resetFriends();var o=e.state.selectedFriendList;o.some((function(e){return e.id===n.id}))||e.setState({selectedFriendList:(0,r.Z)(o).concat([n])})},e.createDeleteFriendHandler=function(t){return function(n){n.preventDefault(),e.setState((function(e){return{selectedFriendList:e.selectedFriendList.filter((function(e){return e.id!==t.id}))}}))}},e.createSelectColumnHandler=function(t){return function(n){n.preventDefault(),e.setState({selectedColumn:t})}},e.handleRemoveSelectedColumn=function(t){t.preventDefault(),e.setState({selectedColumn:null})},e.handleSelectFriends=function(){e.setState((function(e){return{isInvitedFriends:!e.isInvitedFriends}}))},e.handleReviewButton=function(){var t=e.state,n=t.selectedFriendList,o=t.selectedColumn,r=o&&o.id,i=n.map((function(e){return e.urlToken}));if(i.length||r){var a=e.props,c=a.postId,s=a.reviewColumn,u=a.handleOpenReviewComment;s(r,c,i).then((function(){e.setState({isReviewInvite:!0}),u()})).catch(Mm())}},e.requestMyFriends=(0,Zv.Z)((function(t){(0,e.props.fetchMyFriends)(t)}),Zh.Ij),e}var i=n.prototype;return i.renderFriendList=function(){var e=this,t=this.state.selectedFriendList;return(0,o.BX)("div",{children:[t&&t.length>0&&(0,o.tZ)("span",{className:"ReviewPanel-friend",children:t.map((function(t,n){return(0,o.BX)("div",{className:"ReviewPanel-selectFriend",children:[(0,o.tZ)(Vc.qE,{url:t.avatarUrl,size:36}),(0,o.tZ)(fc.ZP,{onClick:e.createDeleteFriendHandler(t),preset:"plain",children:(0,o.tZ)(su.HN,{})})]},n)}))}),(0,o.tZ)(ng,{className:"ReviewPanel-selectButton",children:(0,o.tZ)($Z.Qk,{size:40})})]})},i.renderReviewerSection=function(){var e=this.props,t=e.friends,n=e.resetFriends,r=this.state.isInvitedFriends;return(0,o.BX)("div",{className:"ReviewPanel-section ReviewPanel-inviteColumn",children:[(0,o.BX)("div",{role:"button",tabIndex:0,className:Jr()("ReviewPanel-sectionTitle","ReviewPanel-selectFriends",r&&"ReviewPanel-selectFriends-transform"),onClick:this.handleSelectFriends,children:["相互关注的知乎好友",(0,o.tZ)(Wf.f,{})]}),r&&(0,o.tZ)(ag,{placeholder:"搜索相互关注的好友",menuButton:this.renderFriendList(),onChange:this.requestMyFriends,onClick:this.onClickSelectFriends,onClose:n,friends:t})]})},i.renderColumnSection=function(){var e=this,t=this.props.columns,n=this.state.selectedColumn;return(0,o.BX)("div",{className:"ReviewPanel-section ReviewPanel-inviteColumn",children:[(0,o.tZ)("div",{className:"ReviewPanel-sectionTitle",children:"你所在专栏的编辑"}),Boolean(n)&&(0,o.BX)("div",{className:"ReviewPanel-selectedColumn",children:[(0,o.tZ)(Vc.qE,{url:n.imageUrl,size:36}),(0,o.tZ)(fc.ZP,{onClick:this.handleRemoveSelectedColumn,preset:"plain",children:(0,o.tZ)(su.HN,{})})]}),!n&&(0,o.tZ)(ig,{preventCloseOnTarget:!0,trigger:"click",className:"ReviewPanel-selectColumnMenu",button:(0,o.tZ)(ng,{className:"ReviewPanel-selectButton",children:(0,o.tZ)($Z.Qk,{size:40})}),children:t&&t.map((function(t,n){return(0,o.BX)(fc.ZP,{preset:"plain",className:"preventCloseOnTarget",onClick:e.createSelectColumnHandler(t),children:[(0,o.tZ)(Vc.qE,{url:t.imageUrl,size:36,className:"ReviewPanel-columnName"}),t.title]},n)}))})]})},i.render=function(){var e=this.state,t=e.selectedColumn,n=e.isReviewInvite,r=e.selectedFriendList;return(0,o.tZ)("div",{className:"ReviewPanel",children:n?(0,o.BX)("div",{className:"ReviewPanel-wrapper",children:[(0,o.tZ)("div",{className:"ReviewPanel-title",children:"邀请"}),(0,o.BX)("div",{className:"ReviewPanel-review",children:[(0,o.tZ)(Xf.BS,{size:40,className:"ReviewPanel-reviewIcon"}),(0,o.tZ)("p",{children:r.length>0||Boolean(t)?"邀请预览已发出":"已取消预览邀请"})]})]}):(0,o.BX)("div",{className:"ReviewPanel-wrapper",children:[(0,o.tZ)("div",{className:"ReviewPanel-title",children:"邀请"}),(0,o.tZ)("div",{className:"ReviewPanel-description",children:"邀请专栏编辑或好友来预览这篇草稿，他们将可通过草稿评论给出意见。"}),this.renderColumnSection(),this.renderReviewerSection(),(0,o.tZ)("div",{className:"ReviewPanel-button preventCloseOnTarget",children:(0,o.tZ)(fc.ZP,{color:"blue",className:"preventCloseOnTarget",onClick:this.handleReviewButton,children:"确定"})})]})})},n}(h.Component);cg.propTypes={columns:ic().arrayOf(Lv),postId:ic().number.isRequired,handleOpenReviewComment:ic().func.isRequired};var sg=(0,Xe.compose)((0,js.Z)(null),(0,Re.connect)((function(e){return{friends:e.columnAutocomplete.friends}}),{fetchMyFriends:function(e){return{API:{types:Ba.FETCH_MY_FRIENDS,endpoint:"autocomplete/friends",query:{token:e,max_matches:5,use_similar:0},root:C.Z.fetchRoot.zhuanlan}}},reviewColumn:function(e,t,n){return{API:{types:la,endpoint:"articles/".concat(t,"/review"),root:C.Z.fetchRoot.zhuanlan,method:"POST",body:{column:e||null,users:n}}}},resetFriends:function(){return{type:Ba.RESET_FRIENDS}}}))(cg);function ug(){var e=(0,up.Z)(["\n                font-size: 14px;\n                color: ",";\n              "]);return ug=function(){return e},e}function lg(){var e=(0,up.Z)(["\n                line-height: 40px;\n                white-space: nowrap;\n                &.MenuItem-Share {\n                  padding-left: 0;\n                  padding-right: 0;\n                }\n              "]);return lg=function(){return e},e}var dg=function(e){var t=e.draftId,n=e.getEditableInstance,r=e.handleOpenReviewComment,i=e.columns,a=e.contentIsTooShort,c=e.showErrorMessage,s=(0,K.Z)(e,["draftId","getEditableInstance","handleOpenReviewComment","columns","contentIsTooShort","showErrorMessage"]),u=(0,JZ.F)(),l=(0,Ae.Z)((0,cl.Z)(),2),d=l[0],p=l[1],h=(0,sl.Z)((function(){var e,o=null===(e=n())||void 0===e?void 0:e.hasCatalog();window.open("/p/".concat(t,"/preview?comment=0&catalog=").concat(o?1:0),"_blank")}));return(0,o.BX)(o.HY,{children:[(0,o.tZ)(be.ms,{children:function(e){var t=e.css;return(0,o.BX)(ph.ZP,{positionStatus:"fixed",toggler:(0,o.tZ)(Ne.$U,(0,F.Z)((0,U.Z)({as:fc.ZP,zaType:"Button",zaText:!0,color:"grey",preset:"secondary",css:{marginLeft:"24px"}},s),{children:"预览"})),onClick:function(e){if(a)return e.preventDefault(),c("正文至少输入 ".concat(9," 个字"))},arrowed:!1,reversed:!0,menuClassName:t(ug(),u.colors.GBL05A),itemClassName:t(lg()),css:{marginLeft:"20px"},children:[(0,o.tZ)(Ne.$U,{as:ph.sN,zaText:!0,zaType:"Button",zaAction:"Unknown",onClick:h,children:"电脑预览"}),(0,o.tZ)(Ne.$U,{as:ph.sN,zaText:!0,zaType:"Button",zaAction:"Unknown",onClick:p.on,children:"邀请预览"})]},"settings")}}),(0,o.tZ)(Ve.Z,{css:{width:"auto",".Modal-inner":{overflow:"visible"},".Modal-content":{paddingBottom:"16px"}},onClose:p.off,children:d&&(0,o.tZ)(sg,{postId:t,columns:i,handleOpenReviewComment:r})})]})},pg=n(31228),hg=n(81144),fg=function(e){var t=e.scheduledPublishAt,n=e.initialScheduledPublishAt,r=e.setUseScheduledPublish,i=(0,Ne.Q4)().trackEvent,a=Boolean(t),c=function(e){i({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:e?"使用定时发布":"不使用定时发布"}}),r(e)};return(0,o.BX)(sc.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[(0,o.BX)(sc.Flex,{height:"38px",children:[(0,o.tZ)(xv.KT,{checked:!a,text:"不使用定时发布",onChange:function(){return c(!1)},id:"PublishPanel-scheduleLabel-0"}),(0,o.tZ)(xv.KT,{checked:a,text:"使用定时发布",onChange:function(){c(!0),requestAnimationFrame((function(){(0,hl.X5)(window,{top:document.body.scrollHeight,behavior:"smooth"})}))},id:"PublishPanel-scheduleLabel-1"})]}),a&&n&&(0,o.tZ)(hg.Z,{value:t,min:n,max:pg.Z(n,7),onChange:function(e){r(!0,e)},css:function(e){return{color:e.colors.GBL05A,fontSize:"14px",marginTop:"5px",".InputButton":{height:"38px"}}}})]})},mg=function(e){return(0,o.BX)(sc.Flex,{py:"11px",children:[(0,o.tZ)(xv.gN,{name:"定时发布"}),(0,o.tZ)(fg,(0,U.Z)({},e))]})},vg=n(69975),Zg=n(77458),gg=function(e){return{display:"flex",alignItems:"center",minWidth:180,height:38,border:"1px solid",borderColor:e.colors.GBK09A,background:e.colors.GBK99A,boxSizing:"border-box",borderRadius:"4px",marginRight:"20px"}},Eg=function(e){return(0,o.tZ)(Pu.Z,(0,U.Z)({placeholder:"搜索话题...","aria-label":"搜索话题",before:(0,o.tZ)(xc.J7,{text:!0,css:function(e){return{color:e.colors.GBK06A,marginRight:"6px"}}}),css:function(e){return[gg(e),{paddingRight:"0","input.Input::placeholder":{color:e.colors.GBK07A}}]}},e))},Tg=function(e){return(0,o.BX)("button",(0,F.Z)((0,U.Z)({css:function(e){return[gg(e),{color:e.colors.GBK03A,justifyContent:"center"}]}},e),{children:[(0,o.tZ)(Gv.nY,{size:"14px",css:{marginRight:"2px"}}),"添加话题"]}))},Cg=function(e){return(0,o.tZ)("button",(0,U.Z)({css:function(e){return{display:"flex",alignItems:"center",minWidth:"180px",boxSizing:"border-box",height:40,color:e.colors.GBK02A,fontSize:"14px",paddingLeft:"19px","&:hover":{backgroundColor:e.colors.GBK10A}}}},e))},Ag=(0,h.forwardRef)((function(e,t){var n,i=e.draft,a=e.showErrorMessage,c=(0,Ne.Q4)().trackEvent,s=(0,Re.useDispatch)(),u=(0,Ae.Z)((0,cl.Z)(!1),2),l=u[0],d=u[1],p=(0,h.useRef)(null),f=(0,h.useRef)(""),m=(0,Ae.Z)((0,h.useState)([]),2),v=m[0],Z=m[1],g=(0,Ae.Z)((0,h.useState)([]),2),E=g[0],T=g[1],A=(0,Ae.Z)((0,vg.Z)({once:!0}),2),_=A[0],y=A[1],S=l&&v.length<3,I=function(e){return function(t){if(t.preventDefault(),v.some((function(t){return t.name===e.name})))return f.current="",T([]),void(p.current.value="");c({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"话题-".concat(e.name)}}),s(ya(i.id,e)).then((function(e){var t=e.payload;t&&(f.current="",T([]),Z((function(e){return(0,r.Z)(e).concat([t])})),p.current.value="",d.off())})).catch(Mm())}},b=function(e){return function(){var t,n;s((t=i.id,n=e.id,{API:{types:fa,endpoint:"articles/".concat(t,"/topics/").concat(n),root:C.Z.fetchRoot.zhuanlan,method:"DELETE"}})).then((function(){Z((function(t){return t.filter((function(t){return t.id!==e.id}))}))})).catch(Mm())}},w=(0,sl.Z)((function(e){var t=e.target.value;f.current!==t&&(s(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{token:e,API:{types:Ba.FETCH_TOPICS,endpoint:"autocomplete/topics",query:{token:e,max_matches:5,use_similar:0,topic_filter:1},root:C.Z.fetchRoot.zhuanlan}}}(t)).then((function(e){var t=e.payload,n=e.token;f.current===n&&T(t.data)})),f.current=t)})),R=(null===(n=i.topics)||void 0===n?void 0:n.length)>0;(0,h.useEffect)((function(){R&&Z(i.topics)}),[R]);var N=(0,sl.Z)((function(){var e=i.state,t=i.topics,n=i.id;(null==v?void 0:v.length)>0||("published"!==e?"draft"===e&&s(function(e){return{API:{types:ma,endpoint:"/articles/".concat(e,"/recommend_topics")}}}(n)).then((function(e){var t=(e.payload.data||[]).slice(0,3).map((function(e){return s(ya(n,e)).catch(Mm())}));return Promise.all(t)})).then((function(e){Z(e.filter(Boolean).map((function(e){return e.payload})))})).catch(a):Z(t))}));return(0,h.useEffect)((function(){y&&N()}),[y,N]),(0,h.useImperativeHandle)(t,(function(){return{getSelectedTopics:function(){return v}}})),(0,o.BX)(sc.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},ref:_,children:[(0,o.BX)(sc.Flex,{children:[v.map((function(e,t){return(0,o.BX)(sc.Box,{css:gg,children:[(0,o.tZ)(sc.Text,{ml:"10px",css:(0,od.S)(1),children:e.name}),(0,o.tZ)(xv.Tw,{onClick:b(e)})]},t)})),(0,o.tZ)(Eg,{onChange:w,onRef:p,after:(0,o.tZ)(xv.Tw,{onClick:d.toggle}),css:!S&&{display:"none"}}),v.length+l<3&&(0,o.tZ)(Tg,{onClick:function(){return!l&&d.toggle()}})]}),(0,o.tZ)(Zg.Z,{isOpen:S&&E.length>0,placement:"bottom",arrowed:!1,target:p.current,children:(0,o.tZ)(sc.Box,{css:function(e){return{minWidth:"180px",backgroundColor:e.colors.GBK99A,border:"1px solid",borderColor:e.colors.GBK09A,boxShadow:"0px 5px 20px rgba(26, 26, 26, 0.1)",borderRadius:"4px",padding:"8px 0"}},children:E.map((function(e){return(0,o.tZ)(Cg,{onClick:I(e),children:e.name},e.id)}))})})]})})),_g=(0,h.forwardRef)((function(e,t){return(0,o.BX)(sc.Flex,{py:"11px",children:[(0,o.tZ)(xv.gN,{required:!0,name:"文章话题",helper:(0,o.tZ)("p",{children:"绑定合适的话题，能方便分类检索，文章也更容易让读者发现。"})}),(0,o.tZ)(Ag,(0,F.Z)((0,U.Z)({},e),{ref:t}))]})})),yg=_g;function Sg(){var e=(0,up.Z)(["字数：",""]);return Sg=function(){return e},e}var Ig=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;(0,ec.Z)(this,n),(e=t.apply(this,arguments)).zaRef=(0,h.createRef)();var r=(0,kc.Z)(e);e.publishArticle=function(){var e=(0,_.Z)((function(e,t,n){var o,i,a,c,s,u,l,d,p;return(0,y.Jh)(this,(function(h){switch(h.label){case 0:return i=r.props,a=i.currentUser,c=i.draft,s=i.scheduledPublishAt,u=i.getEditableInstance,l=i.publishArticle,d=(r.state||{}).checkedQuestionId,p=r.zaRef.current.trackEvent,[4,l(c.id,e,{isNew:t,hasColumn:n,isRecommend:d||r.isHasCard,reshipmentDisclaimers:r.disclaimersRef.getReshipmentDisclaimers(),scheduledPublishAt:s,hasCatalog:u().hasCatalog(),autoSendingCreations:a.autoSendingCreations,commercial_report_info:{is_report:null===(o=r.commercialReportRef)||void 0===o?void 0:o.getIsReport(),commercial_types:[]},commercial_zhitask_bind_info:(0,Pv.at)(r.commercialZhitaskBindInfo)})];case 1:return h.sent(),p({action:"Post",eventType:"Click",elementLocation:{type:"Button",moduleId:"published_successful",content:{type:"Post",token:String(c.id)}}},{configMap:{traceId:r.props.traceId}}),s||!d||r.isHasCard?[3,3]:[4,r.publishAnswer()];case 2:h.sent(),h.label=3;case 3:return[2]}}))}));return function(t,n,o){return e.apply(this,arguments)}}();var i=(0,kc.Z)(e);return e.publishAnswer=(0,_.Z)((function(){var e,t,n,o,r;return(0,y.Jh)(this,(function(a){switch(a.label){case 0:return e=i.props,t=e.draft,n=e.addAnswer,o=(i.state||{}).checkedQuestionId,r={bizExt:{bindArticleToken:t.id},commentPermission:"all",commercialReportInfo:{isReport:!1},content:t.content,disclaimerStatus:"close",disclaimerType:"none",isReport:!1,pushActivity:!1,reshipmentSettings:"allowed",rewardSetting:{canReward:!1},tableOfContentsEnabled:!1,thankInviterStatus:"close"},[4,n(o,r)];case 1:return a.sent(),[2]}}))})),e.handleSubmit=function(){var t=e.props,n=t.forceUpdateDraft,r=t.showErrorMessage,i=t.scheduledPublishAt,a=t.draft,c=t.getEditableInstance,s=t.selectedColumnId,u=t.columns;n().then((function(){var t;if(e.props.contentIsTooShort)return r("正文至少输入 ".concat(9," 个字"));if(!(null===(t=e.topicsRef.getSelectedTopics())||void 0===t?void 0:t.length))return r("请添加至少一个文章话题");if(i&&Dv.Z(i,nv.Z(new Date,30)))fs.Z.alert((0,o.tZ)("div",{style:{textAlign:"center"},children:"只能设置 30 分钟后的定时时间"}),{title:"定时发布"});else{var n=c();if(n){if(n.hasVideo("upload"))return r("视频上传完成后即可发布");if(n.hasImage("upload"))return r("图片上传完成后即可发布");if(n.hasImage("error")||n.hasVideo("error")&&!n.hasVideo("error-review"))return r("草稿中含有上传失败的内容，请更改后重新提交");if(n.hasVideo("error-review")||n.hasVideo("censor"))return r("视频中包含未通过审核的信息，请更改后重新提交")}if("published"!==a.state){if("draft"===a.state){var l=s>0?u[s-1]:null;e.publishArticle(l,!0,Boolean(u.length))}}else e.publishArticle()}}))},e.handleReshipmentDisclaimers=function(t){e.setState({reshipmentDisclaimers:t}),uc.Z.trackEvent((0,kc.Z)(e),{id:7831,action:"Click"},{button:{text:t.description}})},e.renderContribution=function(){var t=e.props,n=t.draft,r=t.scheduledPublishAt,i=t.isContributionDisabled,a=n||{},c=a.id,s=a.state;return c&&"published"!==s?(0,o.tZ)(KZ,{style:{display:r||e.isHasCard?"none":"block"},urlToken:String(c),onChange:function(t){return e.setState({checkedQuestionId:t})},disabled:i}):null},e.renderDisclaimers=function(){var t,n=e.props,r=n.articleDisclaimers,i=n.disclaimerLabel,a=n.draft.id;if(!a)return null;var c=null===(t=i["article_".concat(a)])||void 0===t?void 0:t.disclaimerInfo;return(0,o.tZ)(QZ,{disclaimerInfo:c,articleDisclaimers:r,ref:function(t){return e.disclaimersRef=t}})},e.renderScheduledPublish=function(){var t=e.props,n=t.scheduledPublishAt,r=t.initialScheduledPublishAt,i=t.setUseScheduledPublish;return(0,o.tZ)(mg,{scheduledPublishAt:n,initialScheduledPublishAt:r,setUseScheduledPublish:i})},e.renderCommercialSetting=function(){var t,n,r=e.props,i=r.draft,a=r.id;return(0,o.tZ)(kv.Z,{type:"article",articleId:a,taskBindProps:{commercialZhitaskBindInfo:null===(t=i.settings)||void 0===t?void 0:t.commercialZhitaskBindInfo,onChange:function(t){return e.commercialZhitaskBindInfo=t}},reportProps:{commercialReportInfo:null===(n=i.settings)||void 0===n?void 0:n.commercialReportInfo,ref:function(t){return e.commercialReportRef=t}}})},e}var r=n.prototype;return r.renderTopics=function(){var e=this,t=this.props,n=t.draft,r=t.showErrorMessage;return n.id?(0,o.tZ)(yg,{draft:n,showErrorMessage:r,ref:function(t){return e.topicsRef=t}}):null},r.renderColumns=function(){return(0,o.tZ)(Wv,{columns:this.props.columns})},r.renderPreviewButton=function(){var e=this.props,t=e.disabled,n=e.draft,r=e.getEditableInstance,i=e.handleOpenReviewComment,a=e.columns,c=e.contentIsTooShort,s=e.showErrorMessage;return(0,o.tZ)(dg,{draftId:n.id,disabled:t,getEditableInstance:r,columns:a,handleOpenReviewComment:i,contentIsTooShort:c,showErrorMessage:s})},r.renderSubmitButton=function(){var e=this.props,t=e.disabled,n=e.draft,r=e.scheduledPublishAt,i=e.isReediting;return(0,o.tZ)(Ne.$U,{as:fc.ZP,zaType:"Button",zaText:!0,zaAction:"Post",zaModuleId:"published_button",extra:{configMap:{traceId:this.props.traceId,type:"Post",publish_type:i?"oldEdit":"newPublish"}},color:"blue",preset:"primary",onClick:this.handleSubmit,disabled:t,css:{marginLeft:"16px"},children:r?"定时发布":"draft"===n.state?"发布":"更新"})},r.render=function(){var e=this.props,t=e.renderDraftText,n=e.realTimeContent,r=e.columns,i=e.canUseScheduledPublish,a=e.draft,c=e.logTime,s=e.updateDraft,u=e.markdownEnabled;return(0,o.BX)(Ne.eV,{block:"PublishArea",children:[(0,o.tZ)(Ne.pS,{ref:this.zaRef}),(0,o.tZ)(sc.Box,{bg:"GBK09A",css:{height:"1px"}}),(0,o.BX)(sc.Box,{css:function(e){return{background:e.colors.GBK99C}},children:[(0,o.tZ)(xv.NZ,{children:"发布设置"}),(0,o.BX)(sc.Flex,{pb:"11px",children:[(0,o.tZ)(xv.gN,{name:"添加封面"}),(0,o.tZ)(sc.Box,{flex:"1",children:(0,o.tZ)(Vv,{image:a.titleImage,logTime:c,updateDraft:s})})]}),this.renderContribution(),this.renderDisclaimers(),this.renderTopics(),(null==r?void 0:r.length)>0&&(!a.state||"draft"===a.state)&&this.renderColumns(),this.renderCommercialSetting(),i&&this.renderScheduledPublish(),(0,o.tZ)(sc.Box,{bg:"GBK10A",height:"20px",mx:"-20px"}),(0,o.BX)(xv.$_,{children:[(0,o.tZ)(sc.Text,{color:"GBL05A",fontSize:"14px",ml:"24px",children:dp()(Sg(),(0,dm.Xs)(n,!0))}),u&&(0,o.tZ)(Bv.Z,{}),(0,o.tZ)(sc.Text,{color:"GBL05A",fontSize:"14px",ml:"auto",children:t()}),this.renderPreviewButton(),this.renderSubmitButton()]})]})]})},(0,Jl.Z)(n,[{key:"isHasCard",get:function(){var e=this.props.draft;return/data-draft-type="mcn-link-card"|(data-draft-type="ad-link-card"(?! data-ad-id="fee_))/g.test(null==e?void 0:e.content)}}]),n}(h.Component);Ig.propTypes={columns:ic().arrayOf(Lv),editable:ic().object,draft:ic().object.isRequired,disabled:ic().bool,forceUpdateDraft:ic().func.isRequired,showErrorMessage:ic().func.isRequired},Ig.defaultProps={columns:[]};var bg=(0,Xe.compose)((0,js.Z)(null),Vm.SS,(0,Re.connect)((function(e){var t=e.articleDraft,n=t.selectedColumn,o=t.articleDisclaimers;return{currentUser:(0,le.ib)(e),selectedColumnId:n,articleDisclaimers:o,disclaimerLabel:e.label}}),{selectColumn:Sa,loadArticlesDisclaimers:_a,loadLabel:lo.T$,addAnswer:$e.oe}),(function(e){return os()((function(t){var n=Mv((0,Ld.Dt)());return(0,o.tZ)(e,(0,F.Z)((0,U.Z)({},t),{publishArticle:n}))}),e)}))(Ig),wg=n(37372),Rg=function(e){var t=e.editorState,n=e.onCommand,r=e.queryCommandEnable,i=e.queryCommandState,a=e.toolbarMainAreaData,c=e.toolbarMoreAreaData,s=e.toolbarFixtureAreaData,u=e.className;return(0,o.tZ)(wg.Z,{className:u,editorState:t,onCommand:n,queryCommandEnable:r,queryCommandState:i,toolbarMainAreaData:a,toolbarMoreAreaData:c,toolbarFixtureAreaData:s})},Ng=n(25955),Og=n(79721),Dg=function(e){var t=e.editorState,n=e.onCommand,r=e.queryCommandEnable,i=e.queryCommandState,a=e.showUserProfitButton,c=e.onInsertVideoClick,s=e.draftPage,u=e.getMarkdownEnabled,l=(0,Ng.Z)().jumpUrl,d=(0,h.useMemo)((function(){return(0,Og.v$)({showProfit:a,onInsertVideoClick:c,isVideoAnswer:!1})}),[a,c]),p=(0,h.useMemo)((function(){return(0,Og.vr)({draftPage:s})}),[s]),f=(0,h.useMemo)((function(){return(0,Og.vi)({getMarkdownEnabled:u,onHandleManageEditClick:function(){return window.open(l)}})}),[u,l]);return(0,o.tZ)(Rg,{editorState:t,onCommand:n,queryCommandEnable:r,queryCommandState:i,toolbarMainAreaData:d,toolbarMoreAreaData:f,toolbarFixtureAreaData:p})},Bg=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).state={titleChangeStatus:!1,textContent:e.props.title},e.isFocused=!1,e.onCompositionStart=function(){e.isFocused&&(e.composition=!0,e.handleChangeTitle.cancel())},e.onCompositionEnd=function(){e.isFocused&&(e.composition=!1,e.handleChangeTitle(e.prevValue||e.input.value),e.prevValue=null)},e.onChangeTitle=function(t){e.props.logTime("start"),e.checkHeight();var n=t.target.value;e.setState({titleChangeStatus:!0,textContent:n}),e.composition?e.prevValue=n:e.handleChangeTitle(n)},e.handleChangeTitle=(0,Zv.Z)((function(t){var n=e.props,o=n.logTime;(0,n.updateDraft)({title:t,delta_time:o("calculate")})}),300),e.handleKeyDown=function(e){13===e.keyCode&&e.preventDefault()},e}var r=n.prototype;return r.UNSAFE_componentWillReceiveProps=function(e){var t=this.state.titleChangeStatus,n=e.title;n&&this.props.title!==n&&!t&&(this.input.value=n,this.setState({textContent:n}),this.checkHeight())},r.componentDidMount=function(){this.checkHeight(),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd);var e=this.props.title;e&&(this.input.value=e)},r.componentWillUnmount=function(){this.handleChangeTitle.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd)},r.checkHeight=function(){if(this.input){this.input.style.height="1px";var e=Math.max(this.input.scrollHeight,44);this.input.style.height="".concat(e,"px")}},r.render=function(){var e=this,t=this.props,n=t.onRef,r=t.className;return(0,o.BX)("div",{className:r,children:[(0,o.tZ)(Pu.Z,{className:"WriteIndex-titleInput",multiline:!0,placeholder:"请输入标题（最多 ".concat(100," 个字）"),onChange:this.onChangeTitle,onRef:function(t){e.input=t,n(t)},onKeyDown:this.handleKeyDown,onFocus:function(){return e.isFocused=!0},onBlur:function(){return e.isFocused=!1},rows:"1"}),(0,o.tZ)(_v,{content:this.state.textContent,type:"title",onStatusChange:this.props.onLengthStatusChange})]})},n}(h.Component);Bg.propTypes={title:ic().string,logTime:ic().func.isRequired,updateDraft:ic().func.isRequired,onRef:ic().func},Bg.defaultProps={onRef:function(){}};var Pg=(0,js.Z)(null)(Bg);function kg(){var e=(0,up.Z)(["草稿保存于",""]);return kg=function(){return e},e}var xg=function(e){(0,tc.Z)(n,e);var t=(0,nc.Z)(n);function n(){var e;return(0,ec.Z)(this,n),(e=t.apply(this,arguments)).startCompositionTime=null,e.rootRef=(0,h.createRef)(),e.toolbarWrapperRef=(0,h.createRef)(),e.state={showReviewComment:!1,forceCloseReview:!1,isTyping:!1,titleLengthIsOk:!1,contentLengthIsOk:!1,scheduledPublishAt:void 0,editorState:null,showInsertableVideoUploader:!1,isSmallScreen:!1,markdownEnabled:!1,isContributionDisabled:!1},e.reporter=(0,Ld.ZP)("PostPage",(function(){return e.props.currentUserToken})),e.checkShouldCancelScheduledPublish=function(){e.isEditBlocking&&fs.Z.confirm("如果继续编辑该文章，原定时发送设置将会失效，需重新设置定时发送时间，是否继续编辑？",{title:"编辑文章",text:{ok:"继续编辑",cancel:"我再想想"}}).then((function(){var t=e.props,n=t.draft;(0,t.cancelScheduledPublish)(n.id)}),(function(){window.location.href="https://www.zhihu.com/draft?type=article&filter=schedule"}))},e.handleToggleInsertVideoState=function(t){e.setState({showInsertableVideoUploader:t})},e.handleOpenReviewComment=function(){e.setState({showReviewComment:!0})},e.handlePreviewCommentsClose=function(){e.setState({forceCloseReview:!0})},e.handleTyping=function(t){e.setState({isTyping:t})},e.handleAnyChange=function(t){var n=t.editorState;e.setState({editorState:n})},e.toggleMarkdownEnabled=function(){var t=e.state.markdownEnabled;e.setState({markdownEnabled:!t}),e.props.updateMarkdownSettings({markdownEnabled:!t})},e.renderDraftText=function(){var t=e.props.draft||{},n=t.updatedTime,r=t.updating,i=t.id,a=t.error,c=e.state.isTyping;return a?(0,o.BX)("span",{className:"WriteIndex-pageTitleError",children:[a,"，无法保存"]}):r||c?"草稿保存中…":i&&n?Date.now()<Date.parse(n)+6e4?"草稿已保存":dp()(kg(),(0,zo.rL)(n)):""},e.renderNavbarFunctionality=function(){return null},e.renderPublishArea=function(){var t,n=e.props,r=n.draft,i=n.myColumns,a=e.state,c=a.contentLengthIsOk,s=a.titleLengthIsOk,u=a.scheduledPublishAt,l=a.markdownEnabled,d=a.isContributionDisabled,p=c&&s;return(0,o.tZ)(bg,{id:null===(t=e.props.params)||void 0===t?void 0:t.id,renderDraftText:e.renderDraftText,scheduledPublishAt:u,columns:i,draft:r,disabled:!p,forceUpdateDraft:e.forceUpdateDraft,showErrorMessage:e.showErrorMessage,getEditableInstance:function(){return e.editable},logTime:e.logTime,updateDraft:e.updateDraft,handleOpenReviewComment:e.handleOpenReviewComment,markdownEnabled:l,isContributionDisabled:d,isReediting:"published"===r.state})},e.onTitleStatusChange=function(t){t!==e.state.titleLengthIsOk&&e.setState({titleLengthIsOk:t})},e.onContentStatusChange=function(t){t!==e.state.contentLengthIsOk&&e.setState({contentLengthIsOk:t})},e.getTimestamp=function(e){var t=e?new Date(e):new Date;return Math.floor(t.getTime()/1e3)},e.startLoggingTime=function(){e.startCompositionTime||(e.startCompositionTime=e.getTimestamp())},e.stopLoggingTime=function(){e.startCompositionTime=null},e.calculateLoggingTime=function(){var t=e.props.draft,n=e.getTimestamp(t.updatedTime),o=e.getTimestamp();return!n||e.startCompositionTime-n>180?o-e.startCompositionTime:o-n},e.showErrorMessage=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"red",o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i="未知错误";t&&("string"==typeof t?i=t:t.payload&&t.payload.message?i=t.payload.message:t.message&&(i=t.message)),e.props.showNotification(i,n,o,r)},e.getHelpDocInitialOffset=function(){var t=e.toolbarWrapperRef.current;if(t)return{top:t.getBoundingClientRect().bottom+20,right:0}},e.updateDraft=function(t){if(!e.isUserBoundPhone)return e.context.handleBindPhoneModalToggle(),Promise.resolve();var n=e.props,o=n.draft,r=n.updateDraft;if(o.hasPublishingDraft)return fs.Z.alert("你有一份对该文章的修改正在发布中，请等待发布完成后再次修改。"),Promise.resolve();var i=o.id,a=o.draftLoading,c=function(){return e.logTime("stop")};return i||a?i?r(i,t).then(c):Promise.resolve():r(null,t).then(c)},e.forceUpdateDraft=function(){if(!e.isUserBoundPhone)return e.context.handleBindPhoneModalToggle(),Promise.resolve();var t=e.titleNode&&e.titleNode.value,n=e.coverNode&&e.coverNode.src,o=e.editable&&e.editable.toHTML(),r={},i=e.props.draft;return t&&!i.title&&(r.title=t),n&&!i.titleImage&&(r.titleImage=n),o&&!i.content&&(r.content=o),Um()(r)?Promise.resolve():e.updateDraft(r)},e.logTime=function(t){return e["".concat(t,"LoggingTime")]()},e.syncDraftSettings=function(){e.logTime("start");var t=e.logTime("calculate");setTimeout((function(){var n,o={table_of_contents:null===(n=e.editable)||void 0===n?void 0:n.hasCatalog(),delta_time:t};e.updateDraft(o)}),0)},e.handleKeyCommand=function(t){if(!e.editable)return"not-handled";var n=e.editable.handleKeyCommand(t);return"toggle-catalog"===t&&(e.syncDraftSettings(),requestAnimationFrame((function(){e.forceUpdate()}))),n},e.queryCommandEnable=function(t,n){return!!e.editable&&e.editable.queryCommandEnable(t,n)},e.queryCommandState=function(t,n){return!!e.editable&&e.editable.queryCommandState(t,n)},e.onInsertVideoClick=function(){return e.handleToggleInsertVideoState(!0)},e.onCloseCatalog=function(){e.editable&&(e.handleKeyCommand("toggle-catalog"),requestAnimationFrame((function(){e.forceUpdate()})))},e}var r=n.prototype;return r.componentDidMount=function(){var e,t,n=this;null===(e=this.props.writeShield)||void 0===e||null===(t=e.setOnModalClose)||void 0===t||t.call(e,(function(){window.location.href="https://www.zhihu.com"})),window.screen.availWidth<860&&this.setState({isSmallScreen:!0}),(0,Ld.hx)(),uc.Z.setModule(this.rootRef.current,{module:"PostEditView"}),uc.Z.trackPageShow({id:3371});var r=this.props,i=r.params.id,a=r.draft,c=r.getDraft,s=r.loadArticlesDisclaimers,u=r.loadLabel,l=r.queryDefaultSettings;(0,r.loadArticlesLimited)(i).then((function(e){var t;(null==e||null===(t=e.payload)||void 0===t?void 0:t.isAbleTo)||(n.setState({isContributionDisabled:!0}),fs.Z.confirm((0,o.tZ)(tv,{}),{text:{ok:"发想法",cancel:"知道了"}}).then((function(){window.location.href="https://www.zhihu.com/?writepin"}),Mm()))})),l().then((function(e){var t,o;return n.setState({markdownEnabled:null==e||null===(t=e.payload)||void 0===t||null===(o=t.commonSettings)||void 0===o?void 0:o.markdownEnabled})})),i&&(a&&a.id===i||c(i).then(this.checkShouldCancelScheduledPublish).catch((function(e){if(e.res){var t=e.res,o=e.payload;404===t.status?window.location.href="https://zhuanlan.zhihu.com/p/".concat(i):n.showErrorMessage(o)}})),s(i),u("article",i))},r.componentDidUpdate=function(){var e=this.props,t=e.draft,n=e.location,o=e.router,r=e.loadArticlesDisclaimers,i=e.loadLabel;if(t&&t.id&&"/write"===n.pathname)return r(t.id),i("article",t.id),void o.replace("/p/".concat(t.id,"/edit"))},r.componentWillUnmount=function(){this.props.resetDraft()},r.renderPageTitle=function(){return(0,o.tZ)("div",{className:"WriteIndex-pageTitleWrapper",children:(0,o.tZ)("div",{className:"WriteIndex-pageTitle",children:"写文章"})})},r.renderPreviewComments=function(){var e=this.props.draft,t=this.state,n=t.forceCloseReview,r=t.showReviewComment,i=e.id,a=e.reviewers;if(!n&&(r||(void 0===a?[]:a).length>0)&&i)return(0,o.tZ)(Bm,{className:"WriteIndex-previewWrapper",post:e,close:(0,o.tZ)(fc.ZP,{className:"WriteIndex-closePreview",onClick:this.handlePreviewCommentsClose,children:(0,o.tZ)(su.HN,{size:18})})})},r.render=function(){var e=this,t=this.props,n=t.draft,r=t.isMobile,i=t.isOrg,a=t.showUserProfitButton;if(r)return(0,o.tZ)(Hm,{to:"/"});if(!n)return(0,o.tZ)(Zl.Z,{active:!0});var c=n.title,s=n.content,u=this.state,l=u.scheduledPublishAt,d=u.editorState,p=u.showInsertableVideoUploader,h=u.isSmallScreen;return(0,o.BX)(Vm.ZP,{children:[(0,o.tZ)(zp,{pageInfo:{pageId:"10167"}}),(0,o.BX)(Wm.H.Provider,{value:"article-pc-editor",children:[(0,o.BX)("div",{className:"WriteIndexLayout",ref:this.rootRef,children:[(0,o.tZ)(be.xB,{styles:{".App-main":{paddingBottom:0}}}),(0,o.tZ)(qm.Z,{}),(0,o.BX)(Ld.ct.Provider,{value:this.reporter,children:[(0,o.tZ)(we.ql,(0,U.Z)({title:"写文章"},(0,Xm.Oo)(Xm.EE))),(0,o.tZ)(dd.Z,{title:this.renderPageTitle(),renderNavbarFunctionality:this.renderNavbarFunctionality,sticky:!1}),(0,o.BX)("div",{className:Jr()("WriteIndexLayout-main WriteIndex"),css:function(e){return{marginTop:0,width:"100%",background:e.colors.GBK10A}},children:[(0,o.tZ)(pc.Z,{getStyle:function(){return{width:"100%",top:0,left:0}},children:(0,o.tZ)("div",{ref:this.toolbarWrapperRef,css:function(e){return{display:"flex",justifyContent:"center",margin:"0 auto",background:e.colors.GBK99A}},children:(0,o.tZ)(Dg,{editorState:d,onCommand:this.handleKeyCommand,queryCommandEnable:this.queryCommandEnable,queryCommandState:this.queryCommandState,showUserProfitButton:a,onInsertVideoClick:this.onInsertVideoClick,draftPage:"https://www.zhihu.com/".concat(i?"organization":"creator","/manage/creation/draft?type=article"),toggleMarkdownEnabled:this.toggleMarkdownEnabled,getMarkdownEnabled:function(){return e.state.markdownEnabled}})})}),(0,o.BX)("div",{css:function(e){return{width:h?"694px":"840px",margin:"0 auto",boxSizing:"border-box",padding:"0 20px",background:e.colors.GBK99A,marginTop:"20px",position:"relative"}},children:[!d&&(0,o.tZ)("div",{css:function(e){return{background:e.colors.GBK99A,position:"absolute",left:0,top:0,width:"100%",height:"100%",padding:40,zIndex:1,boxSizing:"border-box"}},children:(0,o.tZ)(xm.O,{variant:"T01"})}),(0,o.tZ)(Pg,{onRef:function(t){return e.titleNode=t},title:c,logTime:this.logTime,updateDraft:this.updateDraft,onLengthStatusChange:this.onTitleStatusChange,css:{overflow:"hidden"}}),!this.isEditBlocking&&(0,o.tZ)(Ov,{onEditableRef:function(t){return e.editable=t},isReediting:"published"===n.state,postId:n.id,post:n,content:s,onTyping:this.handleTyping,logTime:this.logTime,updateDraft:this.updateDraft,onLengthStatusChange:this.onContentStatusChange,showErrorMessage:this.showErrorMessage,showInsertableVideoUploader:p,handleToggleInsertVideoState:this.handleToggleInsertVideoState,scheduledPublishAt:l,onScheduledPublishAtChange:function(t){return e.setState({scheduledPublishAt:t})},handleAnyChange:this.handleAnyChange,publishArea:Boolean(n)&&this.renderPublishArea(),onCloseCatalog:this.onCloseCatalog,getEditableInstance:function(){return e.editable},getHelpDocInitialOffset:this.getHelpDocInitialOffset,forceUpdateWriteIndex:this.forceUpdate.bind(this),toggleMarkdownEnabled:this.toggleMarkdownEnabled,getMarkdownEnabled:function(){return e.state.markdownEnabled}}),this.renderPreviewComments()]})]})]})]}),(0,o.tZ)(ev,{})]})]})},(0,Jl.Z)(n,[{key:"isEditBlocking",get:function(){var e=this.props.draft;return!(!e||!e.schedule)}},{key:"isUserBoundPhone",get:function(){var e=this.props.currentUser,t=e.isBindPhone,n=e.isRealname;return t||n}}]),n}(h.Component);xg.contextTypes={handleBindPhoneModalToggle:ic().func};var Lg=(0,Xe.compose)((0,qc.ZP)({init:!0,getScene:function(){return{type:"article"}}}),Gm.g,Ql.nx,I.withRouter,(0,Re.connect)(wa,{getDraft:function(e){return{API:{types:ua,endpoint:"articles/".concat(e,"/draft"),root:C.Z.fetchRoot.zhuanlan}}},resetDraft:function(){return{type:Za}},updateDraft:function(e,t){if(null===t.content)throw new Error("The content of draft should not be null.");var n=e?"PATCH":"POST",o=e?"articles/".concat(e,"/draft"):"articles/drafts";return{meta:{id:e,body:t},API:{types:sa,endpoint:o,root:C.Z.fetchRoot.zhuanlan,method:n,body:t,fetchOptions:{zsAutoSignature:!1}}}},showNotification:jt.c0,cancelScheduledPublish:function(e){return{API:{root:C.Z.fetchRoot.zhuanlan,types:ra.CANCEL_SCHEDULED_PUBLISH,endpoint:"articles/".concat(e,"/scheduled-publish"),method:"DELETE"}}},loadArticlesDisclaimers:_a,loadLabel:lo.T$,queryDefaultSettings:No.Gl,updateMarkdownSettings:No.zp,loadArticlesLimited:function(e){return{API:{method:"GET",types:Ea,endpoint:"community-prod/publish_article/is-able-to",query:{content_token:e}}}}}))(xg),Ug=Ja((function(){return n.e(3914).then(n.bind(n,30074))})),Fg=(0,o.BX)(I.Route,{path:"/",component:Yl,name:"Index",onEnter:function(e){if(x.jS.onEnter(e),(0,Sn.isBrowser)()){var t=$a(e);(0,u.t0)(t),(n=window.performance)&&n.timing&&((0,S.uK)((function(e){return(0,u.pp)(e)})),(0,S.I)({report:function(e){return u.ZP.increment("".concat((0,u.j0)(),".").concat(e,".count"))}}))}var n},onChange:function(e,t){x.jS.onChange(e,t),(0,u.t0)($a(t))},children:[(0,o.tZ)(I.IndexRoute,{component:Cd,name:"Home"}),(0,o.tZ)(I.Route,{authRequired:!0,path:"drafts",getComponent:Ja((function(){return n.e(7939).then(n.bind(n,60640))})),name:"Drafts"}),(0,o.tZ)(I.Route,{authRequired:!0,path:"write",component:Lg,name:"WritePage"}),(0,o.tZ)(I.Route,{path:":id",getComponent:Ug,name:"Column"}),(0,o.tZ)(I.Route,{authRequired:!0,path:"column/request",getComponent:Ja((function(){return n.e(1011).then(n.bind(n,77374))})),name:"Request",showAppHeader:!0}),(0,o.tZ)(I.Route,{path:"column/p/:id",component:_m,name:"ColumnPost"}),(0,o.tZ)(I.Route,{path:"column/:id",getComponent:Ug,name:"NewColumn"}),(0,o.tZ)(I.Route,{authRequired:!0,path:"column/:id/collect",getComponent:Ja((function(){return n.e(9157).then(n.bind(n,31867))})),name:"ColumnCollect",showAppHeader:!1,zaPageShowId:8168}),(0,o.tZ)(I.Route,{path:"column/:id/about",getComponent:Ja((function(){return n.e(3295).then(n.bind(n,71142))})),name:"ColumnAbout"}),(0,o.tZ)(I.Route,{authRequired:!0,path:"column/:id/settings",getComponent:Ja((function(){return n.e(3844).then(n.bind(n,33402))})),name:"ColumnSettingsV2"}),(0,o.tZ)(I.Route,{authRequired:!0,path:"p/:id/edit",component:Lg,name:"EditPage"}),(0,o.tZ)(I.Route,{path:"p/:id",component:_m,name:"Post"}),(0,o.tZ)(I.Route,{authRequired:!0,path:"p/:id/preview",component:km,name:"PreviewPost"}),(0,o.tZ)(I.Route,{name:"ZVideoCollection",path:"zvideo/serial/collection/:id",getComponent:Ja((function(){return n.e(8106).then(n.bind(n,36875))})),showAppHeader:!1}),(0,o.tZ)(I.Redirect,{from:"/p/:id/voters",to:"/p/:id",query:{from_voters_page:!0}}),(0,o.tZ)(I.Redirect,{from:"/:columnId/:id",to:"/p/:id"}),ja]});function Mg(){return(0,o.tZ)(I.Router,{history:I.browserHistory,children:Fg})}var Gg,zg,Hg;Gg={rootReducer:Wa,renderCallback:function(e,t){var n=t.container;Ve.Z.setAppElement&&Ve.Z.setAppElement(n),e(Mg)},routes:Fg},zg=Gg.rootReducer,Hg=Gg.renderCallback,ge({routes:Gg.routes,createStore:(0,Ee.getCreateStore)(zg),onRequestRender:function(e){var t=function(t){var n;(0,Te.hydrate)((0,o.tZ)(we.B6,{children:(0,o.tZ)(h.Profiler,{id:"App",onRender:He,children:(0,o.tZ)(Ue,{store:e.store,children:(0,o.tZ)(qe.q.Provider,{value:e.http,children:(0,o.tZ)(t,{})})})})}),e.container),null===(n=e.afterHydrate)||void 0===n||n.call(e)};new Promise((function(e){/interactive|complete/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",e)})).then((function(){return Hg(t,e)}))}})},93922:function(e,t,n){"use strict";var o=n(60111),r=n(37015);t.Z=function(e){var t=e.type;return(0,o.Z)((function(){r.ZP.increment("mobile.".concat(t,".count"))})),null}},69953:function(e,t,n){"use strict";n.d(t,{Z:function(){return H}});var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(14577),s=n(75926),u=n.n(s),l=n(87363),d=n(52495),p=n(52626),h=n(48457),f=n(91855),m=n(90674),v=n(97645),Z=n.n(v),g=n(73464),E="AdblockBanner::dismiss";var T=function(e){(0,r.Z)(c,e);var t=(0,i.Z)(c);function c(){var e;return(0,o.Z)(this,c),(e=t.apply(this,arguments)).state={shown:!1},e.handleClose=function(){Z().set(E,!0),e.setState({shown:!1})},e}var s=c.prototype;return s.componentDidMount=function(){!0!==Z().get(E)&&(n.g.navigator&&/Mobile/.test(navigator.userAgent)||!function(){var e=document.createElement("div");e.className="adsbox",document.body.appendChild(e);var t="none"===getComputedStyle(e).display;return document.body.removeChild(e),t}()||this.setState({shown:!0}))},s.render=function(){return this.state.shown&&(0,a.BX)("div",{className:"AdblockBanner",children:[(0,a.BX)("div",{className:"AdblockBanner-inner",children:["我们检测到你可能使用了 AdBlock 或 Adblock Plus，它的部分策略可能会影响到正常功能的使用（如关注）。",(0,a.tZ)("br",{}),"你可以设定特殊规则或将知乎加入白名单，以便我们更好地提供服务。 （",(0,a.tZ)("a",{href:"//www.zhihu.com/question/54919485",target:"_blank",rel:"noreferrer",children:"为什么？"}),"）"]}),(0,a.tZ)(g.ZP,{preset:"plain",className:"AdblockBanner-close",onClick:this.handleClose,icon:m.HN})]})},c}(l.Component),C=T,A=n(25043),_=n(6081),y=n(69701),S=n(4838),I=n(16762),b=n(56332),w=n(59735),R=n(88483),N=n(78724),O=n(24076),D=n(17341),B=n(96323),P=n(91355),k=n(2421),x=n(92718),L=n(78248),U=function(e){var t=e.href,n=(0,N.Z)(e,["href"]);return(0,a.tZ)(O._o,{zaText:!0,children:(0,a.tZ)(B.sN,(0,R.Z)({zaText:!0,tag:"a",href:(0,L.Z)(t,"https://zhuanlan.zhihu.com")},n))})},F=function(){var e=(0,k.Z)(["urlToken","id"]),t=(0,x.Z)(),n=(0,a.tZ)(h.$U,{as:g.ZP,zaText:"更多",zaType:"Button",zaAction:"Unknown",className:"ColumnPageHeader-MenuToggler",preset:"plain",title:"更多",children:(0,a.tZ)(D.AZ,{})});return(0,a.BX)(B.ZP,{menuClassName:"ColumnPageHeader-Menu",positionStatus:"fixed",toggler:n,children:[(0,a.tZ)(U,{href:"https://www.zhihu.com/".concat(t?"organization":"creator","/manage/creation/article"),children:"我的文章"}),(0,a.tZ)(U,{href:"https://www.zhihu.com/people/".concat((null==e?void 0:e.urlToken)||(null==e?void 0:e.id),"/columns"),children:"我的专栏"}),(0,a.tZ)(U,{href:P.vg,children:"专栏 · 发现"})]})},M="column",G="article",z=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).handleWriteButtonClick=function(e){Promise.resolve((0,w.E)(e,1280)).then((function(){window.open("https://zhuanlan.zhihu.com/write","_blank")}))},e.handleFollowClick=function(e){return(0,w.E)(e,1279),!0},e}var s=n.prototype;return s.componentDidMount=function(){var e=this.props,t=e.isLogin,n=e.currentUser,o=e.getColumnContributions;t&&n&&n.urlToken&&o()},s.componentDidUpdate=function(e){var t=this.props,n=t.isLogin,o=t.currentUser,r=t.getColumnContributions;n&&(e.currentUser&&!e.currentUser.urlToken||!e.currentUser)&&o&&o.urlToken&&r()},s.renderTitle=function(){var e=this.props,t=e.title,n=e.titleMeta,o=e.preset,r=e.column;if(t||r){var i=t||(0,a.tZ)(a.HY,{children:(0,a.BX)("div",{className:"ColumnPageHeader-TitleName",children:[(0,a.tZ)("span",{className:"ColumnPageHeader-TitleMeta",children:n||(o===G?"首发于":"专栏")}),(0,a.tZ)(y.Z,{column:r,noHoverCard:!0,className:"ColumnPageHeader-TitleColumn"})]})});return(0,a.BX)(a.HY,{children:[(0,a.tZ)("i",{className:"ColumnPageHeader-Line"}),(0,a.tZ)("div",{className:"ColumnPageHeader-Title",children:i})]})}return null},s.renderButtons=function(){var e=this.props.renderNavbarFunctionality;return e?e():(0,a.BX)(h.$U,{as:g.ZP,zaType:"Button",zaText:!0,className:"ColumnPageHeader-WriteButton",color:"blue",onClick:this.handleWriteButtonClick,children:[(0,a.tZ)(c.yc,{}),"写文章"]})},s.render=function(){var e=this.props,t=e.isLogin,n=e.showAdblockBanner,o=e.currentUser,r=e.sticky,i=void 0===r||r,c=(0,a.BX)("div",{className:"ColumnPageHeader",css:{boxShadow:"0px 16px 32px rgba(0, 0, 0, 0.04)"},children:[(0,a.BX)("div",{className:"ColumnPageHeader-content",children:[(0,a.tZ)(_.Z,{}),this.renderTitle(),(0,a.BX)("div",{className:"ColumnPageHeader-Button",children:[t&&(0,a.tZ)(F,{}),!o&&(0,a.tZ)(A.Z,{}),this.renderButtons()]})]}),(0,a.tZ)("div",{className:"ColumnPageHeader-profile",children:(0,a.tZ)(S.Z,{currentUser:o,enableGuidesForLogin:!0})})]});return(0,a.tZ)(h.eV,{block:"ColumnPageHeader",children:(0,a.BX)("div",{className:"ColumnPageHeader-Wrapper",children:[n&&(0,a.tZ)(C,{}),i?(0,a.tZ)(f.Z,{children:c}):c]})})},n}(l.Component);z.PRESETS={COLUMN:M,ARTICLE:G},z.propTypes={column:u().object,preset:u().oneOf([M,G]).isRequired,isLogin:u().bool.isRequired,showAdblockBanner:u().bool,title:u().oneOfType([u().element,u().string]),titleMeta:u().oneOfType([u().element,u().string]),renderNavbarFunctionality:u().func},z.defaultProps={preset:G};var H=(0,p.compose)((0,d.connect)((function(e,t){var n=t.columnId;return{currentUser:(0,b.ib)(e),column:e.entities.columns[n],isLogin:""!==e.currentUser}}),{getColumnContributions:I.Pq}))(z)},34261:function(e,t,n){"use strict";n.d(t,{Ij:function(){return i},PY:function(){return a},YP:function(){return u},j:function(){return s},jB:function(){return o},lg:function(){return c},zs:function(){return r}});var o={add:"annotation",cancel:"annotation_cancel",view:"show_annotation_detail"},r=2,i=300,a=178,c=5,s=4,u=[340792848,350203097,350203137,350203161,350203194,350203244,360980862,360980655,360979559,360979454,360979327,360979218,360979086,360978949,360978717,360978426,376742720,376747534,376747608,376747691,376747887,377838652,377838776,377839115,377839161,377839236,377839329,377839762,377839827,377839991,377840112,377906867,377907004,377907128,377907233,377907323,377907486,377907592,377907807,377907929,377908171,377908294,377908397,377908510,377908600,377908691,377908791,377908856,377908946,377908990,377909025]},81713:function(e,t,n){"use strict";n.d(t,{r:function(){return c},y:function(){return s}});var o=n(61565),r=n(42116),i=n(86596),a=function(e){return Object.keys(e).map((function(t){return{property:"og:".concat(t),content:e[t]}}))},c=function(e){var t=e.imageUrl,n=e.title,i=e.url,c=e.excerpt,s=e.topics,u=(0,r.NJ)(c),l=[{name:"description",content:u}].concat((0,o.Z)(a({title:n,url:i,description:u,image:t,type:"article",site_name:"知乎专栏"})));if(s){var d=s.map((function(e){return e.name})).join(",");if(d)return l.unshift({name:"keywords",content:d}),l}return l},s=function(e){var t=e.title,n=e.intro,r=e.id,c=e.imageUrl;return[{name:"description",content:n}].concat((0,o.Z)(a({title:t,url:"https:".concat((0,i.M9)(r)),description:n,image:c,site_name:"知乎专栏"})))}},86596:function(e,t,n){"use strict";n.d(t,{M9:function(){return a},b6:function(){return i},x$:function(){return r}});var o=n(91355),r=function(e){return"".concat(o.vg,"/p/").concat(e)},i=function(e){return"".concat(o.vg,"/p/").concat(e,"/edit")},a=function(e){return"".concat(o.i7,"/column/").concat(e)}},59735:function(e,t,n){"use strict";n.d(t,{E:function(){return a}});var o=n(88483),r=n(17222),i={1283:{id:1283,name:"设置"},1292:{id:1292,name:"MoreAction"},1293:{id:1293,name:"标记按钮"},1294:{id:1294,name:"举报"},1281:{id:1281,name:"底部bar评论"},1298:{id:1298,name:"赞赏"},1279:{id:1279,name:"关注专栏"},1280:{id:1280,name:"写文章",action:"OpenUrl"},1288:{id:1288,name:"关注专栏"},1282:{id:1288,action:"Collect"},1295:{id:1295,name:"话题",action:"OpenUrl"},1296:{id:1296,action:"OpenUrl",element:"Image"},1297:{id:1297,action:"OpenUrl",element_name:"MoreAction"},8928:{id:8928,action:"Click",element:"Text"}},a=function(e,t,n){var a="number"==typeof t?i[t]:t;"object"==typeof a&&r.Z.trackEvent(e&&e.currentTarget,(0,o.Z)({action:"Click"},a),n)}},28252:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var o=n(37694),r=n.n(o);function i(e,t){var n=e.trackUrl,o=void 0===n?[]:n,i=e.id;if(0===o.length)return null;var a="other";t.Android?a="android":t.iOS&&(a="ios");var c=r()();return o.forEach((function(e){(new Image).src=e.replace("__OS__",a).replace("__ADPLATFORM__",a).replace("__REQUESTID__",c).replace("__SESSIONID__",c).replace("__ATOKEN__",i).replace("__PAGETYPE__","article")})),{os:a,pageId:i,sessionId:c,pageType:"article"}}},79721:function(e,t,n){"use strict";n.d(t,{vr:function(){return X},v$:function(){return q},vi:function(){return V}});var o=n(88483),r=n(68562),i=n(91368),a=n(31430),c=n(28053),s=n(48466),u=n(99760),l=n(86283),d=n(96605),p=n(19831),h=n(23755),f=n(2829),m=n(2428),v=n(95313),Z=n(36070),g=n(83695),E=n(11138),T=n(98732),C=n(409),A=n(64153),_=n(36014),y=n(48628),S=n(21329),I=n(97360),b=n(85068),w=n(17341),R=n(91464),N=n(54150),O=n(18521),D=n(40980),B=n(66403),P=n(11331),k=n(32336),x=n(822),L=n(78194),U=n(11950),F=n(87363),M=n(3404),G=n(48457),z=n(73464),H=function(e){var t=e.getMarkdownEnabled,n=e.label,o=e.icon,i=e.text,a=e.onClick,c=(0,L.Z)((0,F.useState)(t()),2),s=c[0],u=c[1],l=function(){a(),u(!s)};return(0,r.BX)(G.$U,{as:z.ZP,zaType:"Button",zaText:"".concat(n," ").concat(s?"关":"开"),preset:z.EE.Plain,"aria-label":n,css:function(e){return{"&.Button.Button--plain":{padding:"12px 20px",display:"flex",alignItems:"center",color:e.colors.GBK03A,width:"100%",boxSizing:"border-box",whiteSpace:"nowrap",borderRadius:"4px",position:"relative"}}},children:[(0,r.tZ)(M.Box,{onClick:l,css:{position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:1}}),(0,r.tZ)(o,{center:!0,css:{marginRight:"4px"}}),null!=i?i:n,(0,r.tZ)(U.Z,{forceControlled:!0,checked:s,preset:"small",css:{marginLeft:37},onChange:l,onClick:function(e){return e.preventDefault()}})]})},q=function(e){var t=e.showProfit,n=e.onInsertVideoClick,o=e.isVideoAnswer;return[{sectionName:"operation",minLength:3,priority:1,items:[{icon:i.O1,priority:2,label:"撤销",commandName:"undo",shortcut:"⌘+Z"},{icon:a.OJ,label:"重做",priority:1,commandName:"redo",shortcut:"⌘+Y"},{icon:c.Z,label:"清除格式",priority:3,commandName:"clear-format",shortcut:"⌘+\\"}]},{sectionName:"style",minLength:4,priority:2,items:[{icon:s.Cn,label:"标题",priority:1,children:[{icon:u.ic,label:"一级标题",commandName:"toggle-block-type-header-two",shortcut:"⌘+⌥+1"},{icon:l.NC,label:"二级标题",commandName:"toggle-block-type-header-three",shortcut:"⌘+⌥+2"}]},{icon:d.Z,label:"加粗",commandName:"toggle-inline-style-BOLD",priority:2,shortcut:"⌘+B"},{icon:p.zT,label:"斜体",commandName:"toggle-inline-style-ITALIC",priority:3,shortcut:"⌘+I"}]},{sectionName:"blockType",minLength:6,priority:4,items:[{icon:h.Z,label:"列表",priority:1,children:[{icon:f.hS,label:"有序列表",commandName:"toggle-block-type-ordered-list-item",shortcut:"⌘+⇧+L"},{icon:m.bd,label:"无序列表",commandName:"toggle-block-type-unordered-list-item",shortcut:"⌘+L"}]},{Component:k.Z,icon:v.ZP,label:"目录",commandName:"toggle-catalog",shortcut:"⌘+⌥+J",priority:2},{icon:Z.R7,label:"引用",commandName:"toggle-block-type-blockquote",shortcut:"⌘+⇧+U",priority:3},{icon:g.Z,label:"分割线",commandName:"insert-divider",shortcut:"⌘+⌥+S",priority:4},{icon:E.Z,label:"代码块",commandName:"toggle-block-type-code-block",shortcut:"⌘+⌥+C",priority:5},{icon:T.Z,label:"注释",commandName:"insert-reference",shortcut:"⌘+⌥+R",priority:6}]},{sectionName:"advanced",minLength:2,priority:3,items:[{Component:x.Z,icon:C.Z,label:"图片",commandName:"insert-image-from-library",priority:7},!o&&{label:"视频",icon:A.Z,priority:6,onClick:function(){null==n||n()}},{label:"链接",icon:_.ZP,commandName:"insert-link",priority:5,shortcut:"⌘+K"},t&&!o&&{label:"收益",icon:y.gI,commandName:"toggle-user-profit-modal",priority:4},{label:"公式",icon:S.Z,commandName:"insert-formula",priority:3,shortcut:"⌘+⌥+E"},!o&&{label:"表格",icon:I.Z,commandName:"insert-table",priority:2,shortcut:"⌘+⌥+T"},{label:"附件",icon:b.Z,commandName:"insert-file-from-baidu-wangpan",priority:1}].filter(Boolean)}]},V=function(e){var t=e.getMarkdownEnabled,n=e.onHandleManageEditClick;return[{sectionName:"moreArea",minLength:2,priority:2,items:[{label:"更多",icon:w.B2,children:[{label:"帮助文档",icon:R.Ov,commandName:"toggle-help-document",hideMenuOnClick:!0},{label:"默认设置",icon:N.ZP,onClick:function(){return n()},hideMenuOnClick:!0},{Component:function(e){return(0,r.tZ)(H,(0,o.Z)({getMarkdownEnabled:t},e))},label:"Markdown 语法识别",icon:O.Z,commandName:"toggle-markdown-enabled"}]}]}]},X=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).draftPage;return[{sectionName:"fixArea",minLength:2,priority:2,items:[(0,o.Z)({label:"文档",icon:D.j5},e?{children:[{icon:D.j5,label:"文档",commandName:"insert-doc"},{icon:B.DV,label:"草稿箱",onClick:function(){location.href=e}}]}:{commandName:"insert-doc"}),{label:"历史版本",icon:P.ZP,commandName:"toggle-draft-history-modal"}]}]}},87508:function(e,t,n){"use strict";n.d(t,{Ue:function(){return f},kv:function(){return d},o8:function(){return p},xR:function(){return h},zS:function(){return l}});var o=n(61565),r=n(74480),i=n.n(r),a=n(52626),c=n(60594),s=n(86669),u=(0,c.FH)("article",["ADD_CONTRIBUTE_REQUEST","DELETE_CONTRIBUTE_REQUEST","GET_CONTRIBUTE_REQUEST","HANDLE_CONTRIBUTE_REQUEST","GET_RECOMMENDED_CONTRIBUTE_COLUMNS"]),l=function(e,t){return{API:{types:u.ADD_CONTRIBUTE_REQUEST,endpoint:"/articles/".concat(e,"/contribute_requests"),method:"POST",fetchOptions:{credentials:"include"},body:{column_id:t}},columnId:t}};function d(e,t){return{API:{types:u.DELETE_CONTRIBUTE_REQUEST,endpoint:"/articles/".concat(e,"/contribute/requests/").concat(t),method:"DELETE"},columnId:e,id:t}}function p(e){return{API:{types:u.GET_CONTRIBUTE_REQUEST,endpoint:"/articles/".concat(e,"/contribute_requests"),method:"GET"}}}function h(e,t,n){var o=n?"已通过投稿审核":"已忽略投稿审核";return{API:{types:u.HANDLE_CONTRIBUTE_REQUEST,endpoint:"/articles/".concat(e,"/contribute/requests/").concat(t),method:"PUT",body:{accept:n}},id:t,NOTIFICATION:{success:o}}}var f=function(e){return{API:{types:u.GET_RECOMMENDED_CONTRIBUTE_COLUMNS,endpoint:"/articles/".concat(e,"/recommendation-contribute-columns"),fetchOptions:{credentials:"include"},query:{include:i()({data:{recommendations:[{column:{articles_count:!0,followers:!0}}]}})}}}};t.ZP=(0,a.combineReducers)({contributeRequests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===u.GET_CONTRIBUTE_REQUEST.success?t.payload.data:e},deleteContributeIdList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===u.DELETE_CONTRIBUTE_REQUEST.success?(0,o.Z)(e).concat([t.id]):e},handledContributeIdList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===u.HANDLE_CONTRIBUTE_REQUEST.success?(0,o.Z)(e).concat([t.id]):e},recommendedColumns:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===u.GET_RECOMMENDED_CONTRIBUTE_COLUMNS.success?t.payload.data.recommendations:e},pinnedColumns:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===u.GET_RECOMMENDED_CONTRIBUTE_COLUMNS.success?t.payload.data.pinColumns:e},sentContributeRequestsIdList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(t.type===s.Hp.GET.success){var n=t.payload,r=n.contributions,i=void 0===r?[]:r,a=i.map((function(e){return e.column.id}));return(0,o.Z)(e).concat((0,o.Z)(a))}return u.ADD_CONTRIBUTE_REQUEST.success?(0,o.Z)(e).concat([t.columnId]):u.DELETE_CONTRIBUTE_REQUEST.success?e.filter((function(e){return e===t.columnId})):e}})},33835:function(e,t,n){"use strict";n.d(t,{Oe:function(){return d},R5:function(){return p},ZP:function(){return f}});var o=n(88483),r=n(16600),i=n(61565),a=n(70175),c=n(60594),s=(0,o.Z)({},(0,c.FH)("articleDrafts",["GET_DRAFTS","DELETE_DRAFT"])),u=s.GET_DRAFTS,l=s.DELETE_DRAFT;function d(){return function(e,t){var n=t().articleDrafts.items;return e({API:{types:u,endpoint:"articles/my_drafts",root:a.Z.fetchRoot.zhuanlan,query:{limit:10,offset:n.length,include:["$.data[*].schedule"].join(",")}}})}}function p(e){return function(t){return t({meta:{id:e},API:{types:l,endpoint:"articles/".concat(e,"/draft"),root:a.Z.fetchRoot.zhuanlan,method:"DELETE",fetchOptions:{zsAutoSignature:!1}}})}}var h={isDrained:!1,isLoading:!1,items:[]};function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,n=t.meta,a=t.type,c=t.payload;return a===u.request?(0,r.Z)((0,o.Z)({},e),{isLoading:!0}):a===u.success?(0,r.Z)((0,o.Z)({},e),{isDrained:c.paging.isEnd,isLoading:!1,items:(0,i.Z)(e.items).concat((0,i.Z)(c.data))}):a===l.success?(0,r.Z)((0,o.Z)({},e),{items:e.items.filter((function(e){return e.id!==n.id}))}):e}},14038:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var o=n(71103),r=(0,n(60594).FH)("brand",["GET_URL"]),i=function(e){return{API:{types:r.GET_URL,endpoint:"/brand/track",method:"GET",fetchOptions:{credentials:"include",failsafe:!0,timeout:100},query:{target_url:"https://zhuanlan.zhihu.com/p/".concat(e)}},FAILSAFE:!0,UPDATE:{success:function(t){return{articles:(0,o.Z)({},e,{trackUrl:t.data||[]})}}}}}},79926:function(e,t,n){"use strict";n.d(t,{ZP:function(){return R},wD:function(){return T},IG:function(){return S},mB:function(){return y},G1:function(){return b},XS:function(){return _},Ae:function(){return I},Fz:function(){return w},TP:function(){return A},Gw:function(){return C}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(47417),s=n.n(c),u=n(15390),l=n(74480),d=n.n(l),p=n(70175),h=n(60594),f=n(86669),m=n(17907),v=n(12856),Z=new m.fK.Union({answer:u.l.ANSWER,article:u.l.ARTICLE,pin:u.l.PIN,zvideo:u.l.ZVIDEO},(function(e){var t=e.type;return(0,v.camelize)(t)})),g=new m.fK.Array(Z),E=(0,h.FH)("column",["GET","UPDATE","REMOVE","GET_PINNED_ARTICLE","SET_PINNED_ARTICLE","GET_PINNED_ITEMS","TOGGLE_PINNED_ITEM","REMOVE_COLUMN_COLLECT","UNCOLLECT_ITEM","GET_ARTICLES","GET_ITEMS","REFRESH_ITEMS","REMOVE_COLUMN_ARTICLE","SET_COAUTHOR","GET_COAUTHORS","CHANGE_COAUTHOR_ROLE","REMOVE_COAUTHOR","UNSUBSCRIBE"]),T=(d()({data:[{admin_closed_comment:!0,comment_count:!0,suggest_edit:!0,is_title_image_full_screen:!0,can_comment:!0,upvoted_followees:!0,can_open_tipjar:!0,can_tip:!0,voteup_count:!0,voting:!0,topics:!0,review_info:!0,author:{is_following:!0,is_labeled:!0,label_info:!0}}]}),function(e){return function(t){return t({API:{root:p.Z.fetchRoot.zhuanlan,types:E.GET,endpoint:"/columns/".concat(e),method:"GET",fetchOptions:{credentials:"include"}},schema:u.l.COLUMN})}}),C=function(e,t){return function(n){return n({API:{root:p.Z.fetchRoot.zhuanlan,types:E.UPDATE,endpoint:"/columns/".concat(e),method:"PATCH",body:t},schema:u.l.COLUMN})}},A=function(e){return function(t){return t({API:{root:p.Z.fetchRoot.zhuanlan,types:E.UNSUBSCRIBE,endpoint:"/columns/".concat(e,"/followers"),method:"DELETE"}})}},_=function(e){return function(t){return t({API:{root:p.Z.fetchRoot.zhuanlan,types:E.REMOVE,endpoint:"/columns/".concat(e),method:"DELETE"},NOTIFICATION:{success:"删除专栏成功",fail:"删除专栏失败"}})}},y=function(e){return function(t){return t({columnId:e,API:{types:E.GET_PINNED_ITEMS,endpoint:"/columns/".concat(e,"/pinned-items"),fetchOptions:{credentials:"include"}},schema:g})}},S=function(e,t){return function(n,o){var i=(o().column[e]||{}).paging,a=i?{endpoint:i.next}:{endpoint:"/columns/".concat(e,"/items"),query:(0,r.Z)({},t&&{offset:t})};return n({id:e,API:(0,r.Z)({types:E.GET_ITEMS},a),schema:g})}},I=function(e){var t=e.columnId,n=e.contentType,o=e.contentId;return{columnId:t,contentType:n,contentId:o,API:{endpoint:"/columns/".concat(t,"/items"),types:E.REMOVE_COLUMN_COLLECT,method:"DELETE",body:{type:n,id:o}}}},b=function(e,t){return{id:e,API:(0,r.Z)({types:E.REFRESH_ITEMS,endpoint:"/columns/".concat(e,"/items")},t&&{offset:t}),schema:g}},w=function(e){var t=e.columnId,n=e.contentId,o=e.contentType,r=e.toPin;return{columnId:t,contentId:n,contentType:o,toPin:r,API:{types:E.TOGGLE_PINNED_ITEM,endpoint:"/columns/".concat(t,"/pinned-items"),method:r?"POST":"DELETE",body:{type:o,id:n}}}};function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.GET_PINNED_ARTICLE.success:var n=e[t.columnId]||{};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.columnId,(0,i.Z)((0,r.Z)({},n),{pinnedArticle:t.payload.id})));case E.SET_PINNED_ARTICLE.success:var c=e[t.columnId]||{};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.columnId,(0,i.Z)((0,r.Z)({},c),{pinnedArticle:t.articleId})));case E.GET_ARTICLES.request:case E.REFRESH_ITEMS.request:case E.GET_ITEMS.request:var u=e[t.id]||{};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.id,(0,i.Z)((0,r.Z)({},u),{isLoading:!0})));case E.GET_ARTICLES.success:var l=e[t.id]||{},d=t.payload,p=d.data,h=d.paging,m=l.articles||[];return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.id,(0,i.Z)((0,r.Z)({},l),{articlesPaging:h,articles:(0,a.Z)(m).concat((0,a.Z)(p.map((function(e){return e.id})))),isLoading:!1})));case E.GET_ARTICLES.failure:case E.GET_ITEMS.failure:var v=e[t.id]||{};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.id,(0,i.Z)((0,r.Z)({},v),{isLoading:!1})));case E.GET_PINNED_ITEMS.success:var Z=e[t.columnId]||{};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.columnId,(0,i.Z)((0,r.Z)({},Z),{pinnedItems:t.result})));case E.GET_ITEMS.success:var g=e[t.id]||{},T=t.payload.paging,C=t.result,A=g.items||[];return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.id,(0,i.Z)((0,r.Z)({},g),{paging:T,items:(0,a.Z)(A).concat((0,a.Z)(C)),isLoading:!1})));case E.REFRESH_ITEMS.success:var _=e[t.id]||{},y=t.payload.paging,S=t.result;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.id,(0,i.Z)((0,r.Z)({},_),{paging:y,items:S,isLoading:!1})));case E.TOGGLE_PINNED_ITEM.success:var I=e[t.columnId]||{},b=t.columnId,w=t.contentType,R=t.contentId,N=t.toPin,O={schema:w,id:R};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},b,(0,r.Z)({},I,N?{pinnedItems:[O].concat((0,a.Z)(I.pinnedItems)),items:I.items.filter((function(e){return!s()(e,O)}))}:{pinnedItems:I.pinnedItems.filter((function(e){return!s()(e,O)})),items:[O].concat((0,a.Z)(I.items))})));case E.REMOVE_COLUMN_COLLECT.success:var D=e[t.columnId]||{},B=t.columnId,P=t.contentType,k=t.contentId,x={schema:P,id:k};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},B,(0,r.Z)({},D,{pinnedItems:D.pinnedItems.filter((function(e){return!s()(e,x)})),items:D.items.filter((function(e){return!s()(e,x)}))})));case E.REMOVE_COLUMN_ARTICLE.success:case f.Hp.DELETE.success:var L=t.columnId,U=t.articleId,F=e[L]||{},M=F.articles||[];return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},L,(0,i.Z)((0,r.Z)({},F),{pinnedArticle:F.pinnedArticle===U?null:F.pinnedArticle,articles:M.filter((function(e){return e!==U}))})));default:return e}}},84492:function(e,t,n){"use strict";n.d(t,{NG:function(){return u},ZP:function(){return l},dj:function(){return c},q0:function(){return s}});var o=n(71103),r=n(88483),i=n(16600),a=(0,n(60594).FH)("columnCollection",["TOGGLE_COLUMN_COLLECT"]),c=function(e,t){return e.columnCollection[t]},s=function(e){var t=e.type,n=e.id;return"".concat(t).concat(n)},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o,i){var u,l=s(t),d=null===(u=c(i(),e))||void 0===u?void 0:u[l],p=d?"DELETE":"POST";return o((0,r.Z)({meta:{columnId:e,contentKey:l,optimisticCollected:!d},API:{endpoint:"/columns/".concat(e,"/items"),types:a.TOGGLE_COLUMN_COLLECT,method:p,body:t}},!1===n&&{NOTIFICATION:!1}))}};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.TOGGLE_COLUMN_COLLECT.request:case a.TOGGLE_COLUMN_COLLECT.failure:var n=t.meta,c=n.columnId,s=n.contentKey,u=n.optimisticCollected,l=e[c]||{},d=t.type===a.TOGGLE_COLUMN_COLLECT.request,p=d?u:!u;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c,(0,i.Z)((0,r.Z)({},l),(0,o.Z)({},s,p))));default:return e}}},86669:function(e,t,n){"use strict";n.d(t,{Ah:function(){return E},Hp:function(){return h},Qo:function(){return T},R_:function(){return Z},fR:function(){return v},g1:function(){return g},vM:function(){return f},xl:function(){return m}});var o=n(71103),r=n(88483),i=n(78194),a=n(12856),c=n(15390),s=n(74480),u=n.n(s),l=n(55270),d=n(70175),p=n(59083),h=(0,n(60594).FH)("article",["GET","DELETE","UPDATE_COMMENT_PERMISSION","GET_COMMERCIAL_INFO","GET_UPVOTED_FOLLOWEES","TOGGLE_LIKE","LOAD_MARKET_ARTICLE_PAID_CONTENT","LOAD_POST_SEARCH_ENTITY"]),f=function(e){return function(t){return t({API:{endpoint:"v3/entity_word",query:{type:"article",token:e},types:h.LOAD_POST_SEARCH_ENTITY},FAILSAFE:!0,UPDATE:{success:function(t){return{articles:(0,o.Z)({},e,{entityWords:(null==t?void 0:t.searchWords)||[]})}},failure:function(t){return(0,l.isBrowser)()?window.Raven.captureException(t,{logger:"searchEntityError",extra:{id:e,type:"article"}}):console.error("searchEntityError",t,{id:e,type:"article"}),{}}}})}},m=function(e,t){var n=t.zhiPlusFlag;return function(t){var a=(0,i.Z)(/^\d+/.exec(String(e))||["0"],1)[0];if("0"===a){var s=new Error;throw s.status=404,s}if(String(e)!==a){var u=new Error;throw u.status=302,u.redirect="/p/".concat(a),u}return t({API:{root:d.Z.fetchRoot.zhuanlan,types:h.GET,endpoint:"/articles/".concat(a),method:"GET",fetchOptions:{credentials:"include"},query:(0,r.Z)({},n&&{zhiPlusFlag:decodeURIComponent(n)})},UPDATE:{success:function(e){var t=e.author,n=e.contributions,r={};return(void 0===n?[]:n).forEach((function(e){var t=e.column;r[t.id]=t})),{users:t.urlToken?(0,o.Z)({},t.urlToken,t):{},columns:r}}},schema:c.l.ARTICLE})}},v=function(e,t){return{articleId:e,columnId:t,API:{types:h.DELETE,endpoint:"/articles/".concat(e),method:"DELETE",fetchOptions:{credentials:"include"}},schema:c.l.ARTICLE}};function Z(e,t){return function(n,r){var i=r().entities.articles[e];return n({API:{types:h.UPDATE_COMMENT_PERMISSION,endpoint:"/articles/".concat(e,"/comment_permission"),method:"PUT",body:(0,p.z)((0,a.decamelizeKeys)({commentPermission:t}))},UPDATE:{request:{articles:(0,o.Z)({},e,{commentPermission:t})},failure:{articles:(0,o.Z)({},e,i)}}})}}var g=function(e){return function(t){return t({API:{root:d.Z.fetchRoot.zhuanlan,types:h.GET_COMMERCIAL_INFO,endpoint:"/articles/".concat(e,"/commercial"),method:"GET",fetchOptions:{credentials:"include"}},UPDATE:{success:function(t){return{articles:(0,o.Z)({},e,{commercialInfo:t.data||{}})}}}})}},E=function(e){return function(t){return t({API:{root:d.Z.fetchRoot.zhuanlan,types:h.GET_UPVOTED_FOLLOWEES,endpoint:"/articles/".concat(e,"/concerned_upvoters"),method:"GET",fetchOptions:{credentials:"include"}},UPDATE:{success:function(t){return{articles:(0,o.Z)({},e,{upvotedFollowees:t.data})}}}})}};function T(e){return{API:{endpoint:"/kmqa/articles/".concat(e,"/paid_content"),query:{include:u()({media_card:!0,btn_info:!0,goods_card:!0,za_info:!0,video_extra:!0})},types:h.LOAD_MARKET_ARTICLE_PAID_CONTENT},FAILSAFE:!0,UPDATE:{success:function(t){return{articles:(0,o.Z)({},e,{paidContent:t})}}}}}},5217:function(e,t,n){"use strict";n.d(t,{Z:function(){return Rt}});var o=n(88483),r=n(78194),i=n(61565),a=n(68562),c=n(74792),s=n(8567),u=n(64102),l=n(47859),d=n(17341),p=n(47112),h=n.n(p),f=n(58386),m=n.n(f),v=n(87363),Z=n.n(v),g=n(52495),E=n(3404),T=n(17222),C=n(48457),A=n(96323),_=n(82096),y=n(2236),S=n(34440),I=n(30942),b=n(73464),w=n(46434),R=n(8905),N=n(4244),O=n(5700),D=n(35655),B=n(41191),P=n(5880),k=n(62704),x=n(439),L=n(86832),U=n(19445),F=n(16600),M=n(36701),G=n(24316),z=n(81512),H=function(e){var t=e.selectedQuestion,n=e.answerContent,r=e.checkRange,i=e.onClose,c=e.shouldPublish,s=e.setSelectedQuestion,u=e.selectedContribution,d=e.zvideoId,p=e.isEditing,h=e.duration,f=e.editorRef,Z=e.closeAfterEdit,T=e.reset,A=e.MIN_RANGE,_=(0,C.Q4)(),y=(0,g.useDispatch)();return{onCancel:(0,l.Z)((function(){_.trackEvent({eventType:"Click",action:"Close",block:"Modal",elementLocation:{type:"Button"}}),t&&n?M.Z.confirm((0,a.tZ)(E.Box,{textAlign:"center",children:"当前视频投稿内容离开后不保存"}),{title:(0,a.tZ)(E.Box,{ml:"23px",children:"取消当前视频投稿编辑吗？"}),text:{ok:"继续编辑",cancel:"取消离开"}}).then(m(),i):i()})),onComplete:(0,l.Z)((function(){c?y((0,k.__)(d)).then((function(){y((0,G.c0)("投稿成功，审核后自动发布")),i()})):i()})),onSelectQuestion:(0,v.useCallback)((function(e){r&&r()||s(e)}),[r,s]),onSubmit:(0,l.Z)((function(){var e=(0,z.Z)(n),r={startTime:0,endTime:h,content:e};p?y((0,k.uw)(u.id,r)).then((function(){var e;Z?i():(T(),null===(e=f.current)||void 0===e||e.changeRange(0,f.current.getDuration()))})).catch((function(e){var t=e.payload.message;y((0,G.c0)(t||"添加失败"))})):y((0,k.gq)(d,(0,F.Z)((0,o.Z)({},r),{target:{parentObject:{type:"question",id:t.id,title:t.title},object:{type:"answer"}}}),h)).then((function(){var e;T(),null===(e=f.current)||void 0===e||e.autoNextRange(A)})).catch((function(e){var t=e.payload.message;y((0,G.c0)(t||"添加失败"))}))})),onCancelEdit:(0,l.Z)((function(){p&&Z?i():T()}))}},q=n(16915),V=Object.assign;var X=function(e){return Z().createElement(q.Z,V({width:"153",height:"104",fill:"none",viewBox:"0 0 153 104"},e),Z().createElement("path",{fill:"#F0F4F7",fillRule:"evenodd",d:"M95.97 102.732H45.137c-13.147 0-23.805-10.651-23.805-23.79 0-37.472 30.396-67.85 67.893-67.85 27.184 0 49.221 22.023 49.221 49.19 0 23.445-19.017 42.45-42.476 42.45Z",clipRule:"evenodd"}),Z().createElement("path",{stroke:"#2B6BCC",strokeLinecap:"round",strokeWidth:".475",d:"M73.088 40.905v20.068M39.27 64.164v24.009M110.813 64.164v34.1"}),Z().createElement("path",{stroke:"#D3E0ED",strokeLinecap:"round",strokeWidth:".475",d:"M110.813 14.992v16.205M39.199 29.223v8.56M33.03 37.754h99.165M28.754 64.125h112.104"}),Z().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M.015 101.856h152.816L76.423 11.907.015 101.856Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M81.32 27.703a4.895 4.895 0 0 1-4.897 4.894 4.895 4.895 0 0 1-4.897-4.894 4.895 4.895 0 0 1 4.897-4.893 4.895 4.895 0 0 1 4.897 4.893Z",clipRule:"evenodd"}),Z().createElement("path",{stroke:"#D3E0ED",strokeWidth:".633",d:"M76.423 14.321V.811"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M61.587 29.415H91.26c.853 0 1.308-1.007.743-1.646L76.423 10.132 60.844 27.769c-.564.64-.11 1.646.743 1.646ZM8.472 103.516h142.657V96.19H8.472v7.326Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#ABBEDB",fillRule:"evenodd",d:"M15.014 96.116h33.27V88.79h-33.27v7.326ZM50.03 70.63l9.3 24.354-2.967 1.132-9.3-24.355 2.967-1.13Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"m57.15 76.295 6.94 18.175-4.316 1.646-6.94-18.175 4.316-1.646Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#ABBEDB",fillRule:"evenodd",d:"M15.014 79.644H49.43V77.5H15.014v2.144Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M11.25 88.79h33.271v-3.663h-33.27v3.663ZM17.548 77.5h30.737v-2.642H17.548V77.5Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M17.809 84.866H48.25v-4.96H17.809v4.96Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M17.548 85.127h30.964v-5.483H17.548v5.483Zm.522-.522h29.92v-4.439H18.07v4.439Z",clipRule:"evenodd"}),Z().createElement("path",{stroke:"#fff",strokeWidth:"1.095",d:"M76.423 33.84v2.178M79.776 33.063l1.541 1.54M82.135 31.197h2.18M68.363 31.197h2.18M71.436 34.603l1.54-1.54"}),Z().createElement("path",{stroke:"#D3E0ED",strokeWidth:"1.133",d:"M140.533 96.372c-2.182-9.496-.74-19.823 4.845-28.733"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M147.924 67.603c-.988.704-2.073.877-2.422.387-.348-.49.17-1.457 1.159-2.16.989-.704 2.073-.876 2.422-.386.349.489-.17 1.456-1.159 2.16Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M144.759 65.51c.704.987.877 2.071.387 2.42-.49.348-1.458-.17-2.162-1.159-.703-.988-.876-2.071-.386-2.42.49-.348 1.458.17 2.161 1.158ZM145.6 73.984c-1.394.659-2.788.634-3.115-.057-.327-.69.538-1.784 1.931-2.443 1.394-.659 2.788-.633 3.115.057.327.69-.538 1.784-1.931 2.443Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M142.109 70.66c.66 1.393.634 2.786-.057 3.113-.69.327-1.785-.538-2.444-1.93-.659-1.393-.634-2.787.057-3.113.69-.327 1.785.537 2.444 1.93ZM143.964 81.107c-1.607.76-3.216.731-3.593-.065-.377-.796.621-2.058 2.228-2.818 1.608-.76 3.216-.73 3.593.066.377.796-.621 2.057-2.228 2.817Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M139.938 77.273c.761 1.607.732 3.214-.065 3.59-.797.378-2.059-.62-2.82-2.225-.761-1.607-.731-3.215.065-3.591.797-.377 2.06.62 2.82 2.226ZM143.224 87.524c-1.527.912-3.131 1.039-3.583.283-.452-.756.418-2.108 1.945-3.02 1.526-.912 3.13-1.038 3.582-.283.452.756-.418 2.108-1.944 3.02Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M138.845 84.098c.912 1.525 1.039 3.128.283 3.58-.757.452-2.11-.418-3.023-1.943-.912-1.525-1.039-3.128-.282-3.58.756-.452 2.109.418 3.022 1.943ZM144.305 93.69c-1.507 1.384-3.285 1.9-3.971 1.154-.686-.746-.021-2.473 1.487-3.857 1.507-1.384 3.285-1.9 3.971-1.153.686.746.02 2.473-1.487 3.856Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M138.571 90.849c1.384 1.506 1.901 3.283 1.154 3.97-.747.685-2.475.02-3.859-1.487-1.385-1.506-1.901-3.282-1.154-3.968.747-.687 2.474-.021 3.859 1.485ZM129.951 96.157h-10.3V84.28c0-.36.293-.654.655-.654h8.99c.362 0 .655.293.655.654v11.877Z",clipRule:"evenodd"}),Z().createElement("path",{stroke:"#D3E0ED",strokeWidth:"1.634",d:"M129.296 87.595h1.069a2.31 2.31 0 0 1 2.311 2.31v.488a2.31 2.31 0 0 1-2.311 2.31h-1.069"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M125.974 72.734c-.263.388-.538.758-.701 1.174a2.514 2.514 0 0 0-.21 1.244c.089.826.641 1.546 1.238 2.216l.226.258c.08.103.164.202.238.31.139.22.265.456.33.714a2.376 2.376 0 0 1-.1 1.54c-.407.955-1.299 1.546-2.195 1.775.796-.48 1.47-1.145 1.715-1.95a1.985 1.985 0 0 0-.278-1.719c-.06-.082-.128-.157-.191-.237l-.237-.26c-.306-.358-.611-.736-.851-1.171-.232-.435-.412-.934-.404-1.452-.005-.518.177-1.011.437-1.419.263-.411.617-.735.983-1.023ZM123.249 77.57c-.312.404-.568.873-.518 1.339.048.463.356.865.686 1.237l.125.143c.044.056.09.11.131.169a1.304 1.304 0 0 1 .129 1.233c-.22.527-.712.85-1.202.988.445-.255.82-.628.961-1.074a1.108 1.108 0 0 0-.152-.967c-.034-.046-.072-.088-.107-.132l-.131-.144a3.948 3.948 0 0 1-.47-.646c-.128-.238-.227-.512-.224-.795a1.445 1.445 0 0 1 .236-.78c.146-.226.336-.41.536-.571Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#ABBEDB",fillRule:"evenodd",d:"M81.44 73.316h16.04v-5.712H81.44v5.712Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M112.063 96.19H66.857l1.491-15.342a10.45 10.45 0 0 1 10.404-9.436h21.416a10.45 10.45 0 0 1 10.403 9.436l1.492 15.342Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#ABBEDB",fillRule:"evenodd",d:"M70.543 96.157h43.929v-.68h-43.93v.68Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"m72.252 92.11-1.007 3.368h21.262v-1.684s-7.61-2.467-20.255-1.684ZM112.762 92.11l1.007 3.368H92.507v-1.684s7.61-2.467 20.255-1.684Z",clipRule:"evenodd"}),Z().createElement("path",{stroke:"#D3E0ED",strokeWidth:".368",d:"M92.507 93.794v1.684"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M99.775 69.924h-20.63a5.265 5.265 0 0 1-5.267-5.264v-1.992a5.265 5.265 0 0 1 5.267-5.264h20.63a5.265 5.265 0 0 1 5.267 5.264v1.992a5.265 5.265 0 0 1-5.267 5.264Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#BDCDE5",fillRule:"evenodd",d:"M111.419 95.41a.666.666 0 0 1 .648-.681l.578-.015.035 1.328-.579.015a.665.665 0 0 1-.682-.647Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#ABBEDB",fillRule:"evenodd",d:"m112.685 96.225-.045-1.695 6.832-.179.044 1.695-6.831.18ZM119.521 96.231l-.054-2.072 4.69-.123.054 2.072-4.69.123Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#BDCDE5",fillRule:"evenodd",d:"m124.211 96.108-.054-2.072 1.283.374.033 1.258-1.262.44Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"m112.646 94.713.034 1.329-.407.01-.034-1.328.407-.01Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#BDCDE5",fillRule:"evenodd",d:"m125.44 94.41.033 1.258 1.768-.672-1.801-.586Z",clipRule:"evenodd"}))},W=function(e){var t=e.defaultVideo,n=e.title,o=e.description,i=e.duration,c=e.show,s=e.onClose,u=e.closeAfterEdit,l=void 0!==u&&u,d=e.shouldPublish,p=void 0!==d&&d,h=e.isProduce,f=void 0!==h&&h,m=(0,g.useDispatch)(),Z=t.id,T=(0,k.cF)(Z).answer,A=(void 0===T?{}:T).totalCount,y=void 0===A?0:A,S=(0,k.oL)(),I=Boolean(S),w=(0,k.fh)(Z),R=!I&&w.length===y,N=(0,v.useRef)(),O=(0,r.Z)((0,v.useState)(null),2),D=O[0],B=O[1],P=(0,r.Z)((0,v.useState)(""),2),F=P[0],M=P[1],G=!D&&p,z=(0,v.useCallback)((function(){B(null),M(""),m((0,k.O)(null))}),[m]),q=H({selectedQuestion:D,answerContent:F,onClose:s,shouldPublish:p,setSelectedQuestion:B,selectedContribution:S,zvideoId:Z,isEditing:I,duration:i,editorRef:N,closeAfterEdit:l,reset:z,MIN_RANGE:6e4}),V=q.onCancel,W=q.onComplete,K=q.onSelectQuestion,j=q.onSubmit,Y=q.onCancelEdit;return(0,v.useEffect)((function(){if(c)if(S){var e,t=S.target.parentObject,n=S.content,o=S.startTime,r=S.endTime;B(t),M(n),null===(e=N.current)||void 0===e||e.changeRange(o,r)}else z()}),[c,S,m,z]),(0,a.tZ)(_.Z,{maskClosable:!1,onClose:V,css:{width:"790px",maxHeight:"initial",".Modal-content":{lineHeight:"normal",padding:0,margin:0}},children:c&&(0,a.tZ)(C.eV,{block:"Modal",children:(0,a.BX)(C.Wi,{zaType:"Block",as:E.Flex,height:"600px",children:[(0,a.BX)(E.Flex,{flexDirection:"column",width:"216px",height:"100%",css:function(e){return{backgroundColor:"".concat(e.colors.GBK10A)}},children:[(0,a.BX)(E.Box,{as:"p",fontSize:"24px",fontFamily:"PingFang SC",fontWeight:"500",px:"10px",mt:"24px",mb:"4px",children:["已添加投稿 ",null==w?void 0:w.length,"/",y]}),(0,a.tZ)(E.Box,{flex:"1",overflowY:"auto",px:"20px",mt:"12px",paddingTop:"8px",children:w.length?(0,a.tZ)(x.Z,{isProduce:f,zvideoId:Z,showSelect:!0}):(0,a.BX)(E.Flex,{justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100%",children:[(0,a.tZ)(X,{}),(0,a.tZ)(E.Text,{fontSize:"17px",fontFamily:"PingFang SC",fontWeight:"500",mt:"46px",css:function(e){return{color:e.colors.GBK02A}},children:"选择相关问题投稿"}),(0,a.tZ)(E.Text,{fontSize:"14px",fontFamily:"PingFang SC",fontWeight:"400",css:function(e){return{color:e.colors.GBK06A}},mt:"4px",children:"让更多人看到你的视频"})]})}),G&&(0,a.tZ)(E.Flex,{alignItems:"center",justifyContent:"space-between",px:"20px",height:"82px",css:{button:{width:"162px"}},children:(0,a.tZ)(C.$U,{zaType:"Button",zaAction:"Save",zaText:!0,as:b.ZP,onClick:W,preset:"primary",color:"blue",disabled:!w.length,children:"发布"})})]}),(0,a.tZ)(E.Flex,{flexDirection:"column",flex:"1",children:R?(0,a.BX)(a.HY,{children:[(0,a.tZ)(E.Box,{px:"20px",my:"24px",fontSize:"24px",fontWeight:"500",children:"选择投稿问题"}),(0,a.BX)(E.Flex,{flexDirection:"column",justifyContent:"center",alignItems:"center",flex:"1",children:[(0,a.tZ)(E.Image,{width:"160px",height:"160px",src:"https://pic3.zhimg.com/v2-aee0d50112db6c845a1b7e7bcd2d7a84.png"}),(0,a.tZ)(E.Box,{mt:"10px",fontWeight:"500",fontSize:"17px",children:"已达到投稿数量上限"}),(0,a.tZ)(E.Box,{mt:"4px",fontSize:"14px",color:"GBK06A",children:"可移除已添加投稿来继续投稿问题"})]})]}):D?(0,a.tZ)(L.Z,{value:F,onChange:M,onSubmit:j,onCancel:Y,isEditing:I,selectedQuestion:D}):(0,a.tZ)(U.Z,{zvideoId:Z,title:n,description:o,onSelect:K})})]})})})},K=n(67608),j=n(11950),Y=n(60111),Q=n(74182),J=n(91464),$=n(3090),ee=n(20224),te=n(90674),ne=n(20669),oe=n(95114),re=n.n(oe),ie=n(18937),ae=n(49236),ce=n(83329),se=n(53658),ue=Object.assign;var le=function(e){return Z().createElement(q.Z,ue({width:"12",height:"12",fill:"none",viewBox:"0 0 12 12"},e),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Zm5.136 6.608.214.214 4.276-4.277-.707-.707-3.574 3.574-2.138-2.138-.707.707 2.632 2.632.004-.005Z",clipRule:"evenodd"}))},de=Object.assign;var pe=function(e){return Z().createElement(q.Z,de({width:"12",height:"12",fill:"none",viewBox:"0 0 12 12"},e),Z().createElement("rect",{width:"10",height:"10",x:"1",y:"1",stroke:"#D3D3D3",strokeWidth:"2",rx:"1.5"}))};var he=function(e){var t=e.handleCancel,n=e.handleAgree,o=(0,r.Z)((0,v.useState)(!1),2),i=o[0],c=o[1];return(0,a.BX)(_.Z,{title:"联合创作协议",closeButton:null,color:"GBK02A",children:[(0,a.tZ)(E.Box,{mb:"24px",children:"知乎鼓励视频作者引用图文作者的优质图文内容进行视频联合创作。视频审核成功后，平台会以私信的方式告知图文作者。若图文作者同意升级为联合创作，引用关系会变为联合创作关系。在原图文内容下会展示联合创作的视频，同时图文作者会在他的个人主页下发布视频。"}),(0,a.BX)(E.Flex,{fontSize:"14px",lineHeight:"24px",alignItems:"center",children:[i?(0,a.tZ)(le,{css:{paddingRight:"11px"},onClick:function(){return c(!1)}}):(0,a.tZ)(pe,{css:{paddingRight:"11px"},onClick:function(){return c(!0)}}),"我已充分阅读并同意",(0,a.tZ)(E.Text,{display:"inline-block",color:"GBL01A",css:{cursor:"pointer"},onClick:function(){return window.open("/term/coopcreation","_blank")},children:"《联合创作用户协议》"})]}),(0,a.BX)(_.w,{direction:"horizontal",children:[(0,a.tZ)(b.ZP,{onClick:t,children:"取消"}),(0,a.tZ)(b.ZP,{preset:"primary",color:"blue",onClick:n,disabled:!i,children:"同意"})]})]})};var fe=function(e){var t=e.handleConfirm;return(0,a.BX)(_.Z,{title:"什么是「联合创作」",closeButton:null,children:[(0,a.tZ)("div",{children:"知乎鼓励视频作者引用图文作者的优质图文内容进行视频联合创作。视频审核成功后，平台会以私信的方式告知图文作者。若图文作者同意升级为联合创作，引用关系会变为联合创作关系。在原图文内容下会展示联合创作的视频，同时图文作者会在他的个人主页下发布视频。"}),(0,a.tZ)(_.w,{direction:"horizontal",children:(0,a.tZ)(b.ZP,{preset:"primary",color:"blue",onClick:t,children:"我知道了"})})]})},me=n(79869),ve=n(32671),Ze=n(70175),ge=Object.assign;var Ee=function(e){return Z().createElement(q.Z,ge({width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},e),Z().createElement("path",{fill:"#121212",fillRule:"evenodd",d:"M2.333 2.667a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm2.334 5a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2h-8a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h8a1 1 0 0 1 0 2h-8a1 1 0 0 1-1-1Zm-3.334-4a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm2.334-7a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2h-8a1 1 0 0 1-1-1Z",clipRule:"evenodd"}),Z().createElement("mask",{id:"id-801532647-a",width:"14",height:"11",x:"1",y:"2",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},Z().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M2.333 2.667a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm2.334 5a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2h-8a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h8a1 1 0 0 1 0 2h-8a1 1 0 0 1-1-1Zm-3.334-4a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm2.334-7a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2h-8a1 1 0 0 1-1-1Z",clipRule:"evenodd"})),Z().createElement("g",{mask:"url(#id-801532647-a)"},Z().createElement("path",{fill:"#8590A6",d:"M0 0h16v16H0z"})))},Te="https://".concat(Ze.Z.wwwHost,"/image-text-cite?").concat(new URLSearchParams({source:"upload-video"}));var Ce=function(e){var t=e.handleCancel,n=e.handleConfirm,o=e.handleChange,r=e.link;return(0,a.BX)(E.Box,{px:"24px",mt:"68px",children:[(0,a.tZ)(ce.Z,{multiline:!0,placeholder:"粘贴你想引用的内容链接",rows:7,css:{height:"180px !important",width:"100%",margin:"12px 0",paddingTop:"12px"},onChange:o,value:r}),(0,a.BX)(C.$U,{extra:{link:{url:Te}},zaAction:"OpenUrl",zaText:"cite_image_text_go_list",zaType:"Button",as:b.ZP,preset:"plain",onClick:function(){return window.open(Te,"_blank")},children:[(0,a.tZ)(Ee,{css:{marginRight:"8px",verticalAlign:"middle"}}),"可视化图文内容库"]}),(0,a.BX)(_.w,{direction:"horizontal",children:[(0,a.tZ)(b.ZP,{onClick:t,children:"取消"}),(0,a.tZ)(C.$U,{zaText:"cite_image_text_stick_click",zaType:"Button",as:b.ZP,preset:"primary",color:"blue",onClick:function(){return n(r)},disabled:!r,children:"确认"})]})]})},Ae=n(11116),_e=n(14116),ye=n(17695),Se=n(91355);var Ie=function(e){var t=e.handleSelect,n=(0,g.useSelector)((function(e){return e.zvideos.collectData})),r=n.list,i=void 0===r?[]:r,c=n.isFetching,s=n.isEnd,u=void 0!==s&&s,l=n.next,d=(0,g.useDispatch)();return(0,v.useEffect)((function(){d((0,ve.B$)())}),[d]),(0,a.tZ)(a.HY,{children:c||i.length>0?(0,a.BX)(ye.Z,{onLoad:function(){d((0,ve.B$)(l))},isLoading:c,isDrained:u,css:{flex:"1",overflow:"auto",marginTop:"68px"},getContainer:function(e){return e},placeholder:(0,a.tZ)(ye.i,{className:"List-item"}),children:[(0,a.tZ)(E.Text,{lineHeight:"25px",mb:"8px",px:"24px",color:"#1A1A1A",children:"以下为可引用的内容"}),i.map((function(e,n){var r=e.target,i=r.type,c=r.id,s=r.author,u=s.avatarUrl,l=s.name,d=s.description,p=r.title,h=r.question,f=(void 0===h?{}:h).title,m=r.excerpt,v="article"===i?p:f;return(0,a.tZ)(C.eV,{content:{token:String(c),type:Se.LA[i]},children:(0,a.BX)(C.$U,{view:{elementLocation:{card:{index:n}}},shouldTrackShow:!0,zaType:"Card",as:E.Box,onClick:function(){return t({type:i,id:c})},css:{borderRadius:"6px",padding:"8px 24px",boxShadow:"inset 0px -0.5px 0px #EBEBEB","&:hover":{background:"rgba(0, 102, 255, 0.08)",cursor:"pointer"}},children:[(0,a.BX)(E.Flex,{fontSize:"14px",pb:"7px",alignItems:"center",children:[(0,a.tZ)(E.Image,{src:u,sx:{borderRadius:2},height:18,width:18,mr:"8px"}),(0,a.tZ)(E.Text,{color:"GBK03A",fontWeight:"600",children:l}),d&&(0,a.tZ)(E.Text,{color:"GBK04A",fontWeight:"600",children:"，"}),(0,a.tZ)(E.Text,{color:"GBK04A",css:(0,o.Z)({flex:1},(0,Ae.S)(1)),children:d})]}),(0,a.tZ)(E.Text,{color:"GBK02A",fontWeight:"600",fontSize:"15px",children:v}),(0,a.tZ)(E.Text,{fontSize:"14px",lineHeight:"25px",color:"#1A1A1A",children:m})]})},n)}))]}):(0,a.tZ)(_e.H.EI1,{image:"noCollection",content:"你还没有收藏可引用的内容"})})},be=[{title:"粘贴链接",key:"sticky"},{title:"我的收藏夹",key:"collect"}];var we=function(e){var t=e.handleCancel,n=e.handleSelect,o=(0,r.Z)((0,v.useState)("sticky"),2),i=o[0],c=o[1],s=(0,r.Z)((0,v.useState)(""),2),u=s[0],d=s[1],p=(0,l.Z)((function(e){d(e.target.value)})),h=(0,g.useDispatch)(),f=(0,l.Z)((function(e){"sticky"===i?h((0,ve.P6)(e)).then((function(e){var t=e.payload,n=t.canReference,o=t.contentType,r=t.contentId;return n?h((0,ve.XT)({type:o,id:r})):Promise.reject()})).then((function(e){var t=e.payload;n(t)})).catch((function(){h((0,G.c0)("此内容不可引用","red"))})):"collect"===i&&h((0,ve.XT)(e)).then((function(e){var t=e.payload;n(t)}))}));return(0,a.tZ)(_.Z,{closeButton:null,css:{height:"416px",width:"536px"},size:"fullPage",children:(0,a.BX)(E.Box,{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",children:["sticky"===i&&(0,a.tZ)(Ce,{link:u,handleChange:p,handleCancel:t,handleConfirm:f}),"collect"===i&&(0,a.tZ)(Ie,{handleSelect:f}),(0,a.tZ)(me.Z,{css:{display:"flex",justifyContent:"center",borderBottom:"0",paddingTop:"10px",position:"absolute",width:"100%"},children:be.map((function(e){var t=e.title,n=e.key;return(0,a.tZ)(me.O,{onClick:function(){return c(n)},children:(0,a.tZ)(E.Box,{css:function(e){return{color:i===n?e.colors.GBK02A:e.colors.GBL05A,fontWeight:600,fontSize:"15px",lineHeight:"30px",position:"relative","&:hover":{cursor:"pointer"},"&::after":i===n?{content:"''",position:"absolute",top:"46px",left:"50%",transform:"translateX(-50%)",height:"4px",width:"36px",background:e.colors.GBL01A,borderRadius:"29px"}:{}}},children:t})},n)}))})]})})},Re=n(81144),Ne=n(20722),Oe=n(49019),De=n(52626);var Be=n(7620),Pe=n(42931),ke=n(4163),xe=300,Le=[{value:"original",label:"原创"},{value:"reprint",label:"转载"}],Ue="https://pic2.zhimg.com/v2-feb96045745dac939aa2a900c6d6845d.jpg",Fe=[{name:"answer",id:1},{name:"article",id:2}],Me=n(65390),Ge=n(5815),ze=function(){return!0};function He(e){var t=e.content;return(0,a.tZ)(E.Box,{css:function(e){return{backgroundColor:e.colors.GBL01A,borderRadius:"4px",fontSize:"12px",lineHeight:"14px",color:e.colors.GBK99B,padding:"8px 12px",position:"absolute",left:0,top:"-33px","::after":{content:'""',display:"block",width:"6px",height:"6px",background:e.colors.GBL01A,position:"absolute",left:"25px",bottom:"-3px",transform:"rotate(45deg)"}}},children:t})}var qe=function(e){var t=e.defaultVideo,o=e.title,i=e.description,c=e.active,l=t.id,d=(0,g.useDispatch)(),p=(0,r.Z)((0,v.useState)(0),2),h=p[0],f=p[1],m=(0,r.Z)((0,Ge.Z)("zvideo_contribution_form:should_hide_tooltip"),2),Z=m[0],E=m[1],T=(0,r.Z)((0,v.useState)(!1),2),A=T[0],_=T[1],y=(0,r.Z)((0,v.useState)(!1),2),S=y[0],I=y[1],b=(0,k.cF)(l).answer,w=(void 0===b?{}:b).canContribute,R=void 0!==w&&w,N=(0,k.fh)(l),O=(0,s.Z)((function(){return Promise.all([n.e(2026),n.e(6765)]).then(n.bind(n,20586))})),D=ze(),B=(0,v.useCallback)((function(){o?(d((0,k.O)(null)),_(!0),I(!1)):d((0,G.c0)("输入标题后才可以投稿哦"))}),[o,d]),P=(0,v.useCallback)((function(){_(!0),I(!0)}),[]);return(0,v.useEffect)((function(){d((0,k.ub)(l,"edit"))}),[d,l]),(0,v.useEffect)((function(){var e,n;t.file&&(0,Me.Z)(t.file,File)?(n=t.file,new Promise((function(e,t){try{var o=document.createElement("video");o.preload="metadata",o.onloadedmetadata=function(){URL.revokeObjectURL(o.src),e(Math.floor(1e3*o.duration))},o.onerror=t,o.src=URL.createObjectURL(n)}catch(e){t(e)}}))).then((function(e){d((0,k.Xg)({zvideoId:l,duration:e})),f(e)})):((null===(e=t.video)||void 0===e?void 0:e.duration)&&f(parseInt(1e3*t.video.duration)),d((0,k.Xg)({zvideoId:l})))}),[t,d,l]),(0,u.Z)((function(){return E(!0)}),!Z&&R&&c?5e3:null),R||N.length?(0,a.BX)(C.eV,{block:"Contribution",children:[(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)(C.Wi,{zaType:"Block",className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--top",children:"投稿问题"}),c&&!Z&&(0,a.tZ)(He,{content:"投稿到问题，让更多人看到你的视频"}),(0,a.tZ)("div",{children:(0,a.tZ)(x.Z,{zvideoId:l,showCreateButton:!0,onAdd:B,onSelect:P})})]}),Boolean(O)&&!D?(0,a.tZ)(O,{show:A,defaultVideo:t,title:o,description:i,duration:h,closeAfterEdit:S,onClose:function(){return _(!1)}}):(0,a.tZ)(W,{show:A,defaultVideo:t,title:o,description:i,duration:h,closeAfterEdit:S,onClose:function(){return _(!1)},isProduce:!0})]}):null};function Ve(e){var t=new URLSearchParams(location.search);return e&&"longer"===t.get("mode")?80:40}var Xe,We=(Xe=Fe,function(e){var t=e.citeId,n=e.citeType;return{reference:{referenceType:n&&Xe.find((function(e){return e.name===n})).id||0,referenceContentToken:t?String(t):"0"}}}),Ke=function(e){return function(t){return t?e.find((function(e){return e.id===t})).name:null}}(Fe),je=n(43950),Ye=n(74891),Qe=n(2421),Je=function(e){var t=e.title;return t&&(0,a.tZ)(E.Text,{sx:{lineHeight:"15px",fontSize:"15px",fontWeight:"bold",color:"GBK02A",marginBottom:"16px"},children:t})};var $e=function(e){var t=e.title,n=e.description,r=e.imageUrl,i=e.duration,c=(0,Qe.Z)(["avatarUrl","name"]),s=c.avatarUrl,u=c.name;return(0,a.BX)(E.Box,{width:"278px",pl:"20px",sx:{position:"absolute",right:0,top:"26px",borderLeft:"1px solid",borderColor:"GBK09A",overflow:"auto"},children:[(0,a.tZ)(Je,{title:"移动端预览效果"}),(0,a.BX)(E.Box,{width:"236px",height:"494px",sx:{backgroundImage:'url("https://pic3.zhimg.com/v2-6b6281a5e31bfc1385d8d4462f31ea5c.png")',backgroundSize:"100% 100%",fontSize:"12px",position:"relative",marginTop:"26px"},children:[(0,a.BX)(E.Box,{width:"222px",height:"281px",bg:"GBK99A",sx:{position:"absolute",left:"7px",top:"158px",overflow:"hidden"},children:[(0,a.BX)(E.Flex,{pt:"4px",mx:"9px",alignItems:"center",bg:"GBK99A",children:[(0,a.tZ)(E.Box,{width:"19px",height:"19px",mr:"9px",bg:"GBK10A",sx:{borderRadius:"50%",overflow:"hidden"},children:s&&(0,a.tZ)(E.Image,{src:s,width:"100%",height:"100%"})}),(0,a.BX)(E.Box,{children:[(0,a.tZ)(E.Text,{width:u?"150%":"24px",height:"9px",bg:u?"transparent":"GBK10A",mb:u?"2px":"0px",sx:{borderRadius:"4px",color:"GBK02A",lineHeight:"9px",transformOrigin:"0 center",transform:"scale(0.67)"},children:u}),(0,a.tZ)(E.Text,{width:s?"170%":"113px",height:"9px",bg:s?"transparent":"GBK10A",sx:{borderRadius:"4px",color:"GBK06A",lineHeight:"9px",transformOrigin:"0 center",transform:"scale(0.58)"},children:s&&"1 分钟前・发布了视频"})]})]}),(0,a.tZ)(E.Box,{width:t?"auto":"175px",height:t?"auto":"13px",bg:t?"transparent":"GBK10A",m:"4px 9px",sx:(0,o.Z)({borderRadius:"4px",fontWeight:"bold",zoom:t?.83:1},(0,Ae.S)(2)),children:t}),(0,a.tZ)(E.Box,{m:"0 9px 5px",sx:(0,o.Z)({color:"GBK03A",zoom:n?.67:1},(0,Ae.S)(3)),children:n||(0,a.BX)(a.HY,{children:[(0,a.tZ)(E.Text,{width:"199px",height:"9px",mb:"3px",bg:"GBK10A",sx:{borderRadius:"4px"}}),(0,a.tZ)(E.Text,{width:"74px",height:"9px",bg:"GBK10A",sx:{borderRadius:"4px"}})]})}),(0,a.BX)(E.Box,{height:"115px",bg:r?"GBK02B":"GBK10A",mx:"9px",sx:{borderRadius:"4px",overflow:"hidden",position:"relative"},children:[r&&(0,a.tZ)(E.Image,{src:r,width:"100%",height:"100%",sx:{objectFit:"cover"}}),(0,a.tZ)(Ye.o,{css:{width:"34px",height:"34px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),(0,a.tZ)(E.Text,{width:i?"auto":"23px",bg:i?"transparent":"GBK09B",height:i?"auto":"6px",sx:{position:"absolute",bottom:"7px",right:"7px",zoom:i?.58:1,color:"GBK99A",borderRadius:"4px"},children:i})]}),(0,a.tZ)(E.Image,{src:"https://pic1.zhimg.com/v2-add740deb6bfded14b013d4b115aef7f.png",width:"100%"}),(0,a.tZ)(E.Image,{src:"https://pic3.zhimg.com/v2-c98b0c106781ed7b3e12c03c6c5b3c86.png",width:"100%"})]}),(0,a.tZ)(E.Box,{width:"222px",height:"56px",sx:{position:"absolute",left:"7px",bottom:"6px",backgroundImage:'url("https://pic2.zhimg.com/v2-c80434267f8c3e22ca3b5cd109e4b5d4.png")',backgroundSize:"100% 100%"}})]})]})},et=n(88158);var tt=(0,Be.ZP)({init:!0,getScene:function(){return{type:"zvideo"}}})((function(e){var t,c,u,d,p,f,Z,E,A,_,y,S,I,w,R=e.className,N=e.defaultVideo,O=e.defaultCampaignId,D=e.status,B=e.checkFormValid,P=e.onRemove,k=e.onSubmit,x=e.shouldShowScheduledPublish,L=e.active,U=e.citeType,M=e.citeId,z=e.showMobilePreview,H=void 0!==z&&z,q=e.writeShield,V=(0,Pe.Z)();(0,Y.Z)((function(){var e;null==q||null===(e=q.setOnModalClose)||void 0===e||e.call(q,(function(){H?location.href="https://www.zhihu.com":null==P||P()}))}));var X,W,oe,ue,le=(0,r.Z)((0,v.useState)((0,ke.hX)(null==N?void 0:N.id)||(null==N||null===(t=N.chapters)||void 0===t?void 0:t.map((function(e){return(0,F.Z)((0,o.Z)({},e),{start_time:e.startTime})})))||[]),2),de=le[0],pe=le[1],me=(0,r.Z)((0,v.useState)(null),2),Ze=me[0],ge=me[1],Ee=(0,r.Z)((0,v.useState)(!1),2),Te=Ee[0],Ce=Ee[1],Ae=(0,r.Z)((0,v.useState)(!1),2),_e=Ae[0],ye=Ae[1],Ie=Ke(null==N||null===(c=N.reference)||void 0===c?void 0:c.referenceType),be=(0,r.Z)((0,v.useState)({citeType:Ie||U||null,citeId:(null==N||null===(u=N.reference)||void 0===u?void 0:u.referenceContentToken)||M||null}),2),Be=be[0],Fe=be[1],Me=(0,r.Z)((0,v.useState)(!1),2),Ge=Me[0],ze=Me[1],He=(0,r.Z)((0,v.useState)(!1),2),Xe=He[0],Ye=He[1],Qe=(0,r.Z)((0,v.useState)(!1),2),Je=Qe[0],tt=Qe[1],nt=ne.Z(new Date,30),ot=(0,r.Z)((0,v.useState)(!1),2),rt=ot[0],it=ot[1],at=(0,r.Z)((0,v.useState)(nt),2),ct=at[0],st=at[1],ut=(X=function(e){return e.zvideos.tagoreCategory},(0,g.useSelector)(X,g.shallowEqual)),lt=(0,r.Z)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,g.useDispatch)(),o=Array.isArray(e),r=o?e:[e];return(0,v.useMemo)((function(){return o?r.map((function(e){return(0,De.bindActionCreators)(e,n)})):(0,De.bindActionCreators)(r[0],n)}),[n].concat((0,i.Z)(r),(0,i.Z)(t)))}([ve.eJ,ve.XD,ve.DQ,ve.Es,ve.SM,ve.qA,G.c0,ve.XT,ve.b_,ve.My,ve.l0]),11),dt=lt[0],pt=lt[1],ht=lt[2],ft=lt[3],mt=lt[4],vt=lt[5],Zt=lt[6],gt=lt[7],Et=lt[8],Tt=lt[9],Ct=lt[10],At=(0,g.useSelector)((function(e){return e.zvideos.videoSource})),_t=(0,r.Z)((0,v.useState)((null==N?void 0:N.title)||""),2),yt=_t[0],St=_t[1],It=(0,r.Z)((0,v.useState)(null!==(W=null==N?void 0:N.description)&&void 0!==W?W:""),2),bt=It[0],wt=It[1],Rt=(0,r.Z)((0,v.useState)(null!==(oe=null==N||null===(d=N.category)||void 0===d||null===(p=d.firstLevel)||void 0===p?void 0:p.id)&&void 0!==oe&&oe),2),Nt=Rt[0],Ot=Rt[1],Dt=ut.find((function(e){return e.data.id===Nt})),Bt=(0,r.Z)((0,v.useState)(null!==(ue=null==N||null===(f=N.category)||void 0===f||null===(Z=f.secondLevel)||void 0===Z?void 0:Z.id)&&void 0!==ue&&ue),2),Pt=Bt[0],kt=Bt[1];(0,v.useEffect)((function(){Et().then((function(e){var t=e.payload.canRef,n=void 0!==t&&t;return Ce(n),n?Tt():(Fe({citeId:null,citeType:null}),Promise.reject())})).then((function(e){var t=e.payload.agreeState;ye(t)})).catch(m())}),[]);var xt=function(e){var t=e.author,n=t.avatarUrl,o=t.name,r=e.type,i={headPhoto:n,name:o};if("article"===r){var a=e.imageUrl,c=e.title;i.contentPhoto=a,i.title=c}if("answer"===r){var s=e.question.title,u=e.thumbnailInfo,l=void 0===u?{}:u,d=re()(l,"thumbnails[0].url",null);d&&(i.contentPhoto=d),i.title=s}return i};(0,v.useEffect)((function(){var e=Be.citeId,t=Be.citeType;e&&t&&gt({type:t,id:e}).then((function(e){var t=e.payload||{};ge(xt(t))}))}),[]),(0,v.useEffect)((function(){ut.length||ht()}),[ut,ht]);var Lt,Ut=(0,r.Z)((0,v.useState)(Boolean(null==N||null===(E=N.category)||void 0===E||null===(A=E.firstLevel)||void 0===A?void 0:A.id)||Boolean(null==N||null===(_=N.category)||void 0===_||null===(y=_.secondLevel)||void 0===y?void 0:y.id)),2),Ft=Ut[0],Mt=Ut[1],Gt=(0,Q.Z)((function(e){ft(e).then((function(e){var t=e.payload.data[0];t&&(Ot(t.firstLevel.id),kt(t.secondLevel.id))}))}),300);(0,v.useEffect)((function(){Ft||Gt({title:yt,type:"zvideo",content:bt})}),[yt,bt,Ft,Gt]);var zt=(0,r.Z)((0,v.useState)(null!==(Lt=null==N?void 0:N.topics)&&void 0!==Lt?Lt:[]),2),Ht=zt[0],qt=zt[1],Vt=(0,r.Z)((0,v.useState)(Boolean(null==N||null===(S=N.topics)||void 0===S?void 0:S.length)),2),Xt=Vt[0],Wt=Vt[1],Kt=(0,r.Z)((0,v.useState)(!1),2),jt=Kt[0],Yt=Kt[1],Qt=(0,Q.Z)((function(e){mt(e).then((function(e){var t=e.payload.data;t.length&&qt(t)}))}),300);(0,v.useEffect)((function(){!Xt&&Nt&&Pt&&Qt({type:"zvideo",text:yt,firstLevelCategoryId:Nt,secondLevelCategoryId:Pt,limit:6})}),[yt,Nt,Pt,Xt,Qt]);var Jt=(0,r.Z)((0,v.useState)(!1),2),$t=Jt[0],en=Jt[1],tn=(0,r.Z)((0,v.useState)(null==N?void 0:N.imageUrl),2),nn=tn[0],on=tn[1],rn=(0,r.Z)((0,v.useState)(null==N?void 0:N.imageUrlFrom),2),an=rn[0],cn=rn[1],sn=(0,v.useCallback)((function(e,t){on(e),en(!0),cn(t)}),[on]);(0,v.useEffect)((function(){(!nn&&(null==N?void 0:N.imageUrl)||nn===Ue&&(null==N?void 0:N.imageUrl)&&N.imageUrl!==Ue)&&on(N.imageUrl)}),[nn,N]);var un=(0,s.Z)((function(){return n.e(1951).then(n.bind(n,87704))})),ln=(0,r.Z)((0,v.useState)(null==N?void 0:N.zvideoType),2),dn=ln[0],pn=ln[1],hn="published"===(null==N?void 0:N.zvideoState);(0,v.useEffect)((function(){if(At.isLoaded&&N.queryVideoId){var e;if(yt||St(At.title||""),!Ht.length)qt(null!==(e=At.topics)&&void 0!==e?e:[]);dn||pn(At.zvideoType)}}),[At,yt,Ht,dn,N]);var fn=(0,r.Z)((0,v.useState)(null==N?void 0:N.campaign),2),mn=fn[0],vn=fn[1],Zn=(0,r.Z)((0,v.useState)(!1),2),gn=Zn[0],En=Zn[1],Tn=(0,r.Z)((0,v.useState)(!1),2),Cn=Tn[0],An=Tn[1],_n=(0,r.Z)((0,v.useState)([]),2),yn=_n[0],Sn=_n[1],In=Boolean(null==yn?void 0:yn.length)&&!mn,bn="published"===(null==N?void 0:N.zvideoState);(0,v.useEffect)((function(){vt().then((function(e){var t=e.payload;Sn(t.data)}))}),[vt]),(0,v.useEffect)((function(){var e=null==yn?void 0:yn.find((function(e){return e.id===O}));!e||gn||mn||vn(e)}),[O,yn,gn,mn]);var wn=(0,Q.Z)((function(e,t){pt(e,t)}),300);(0,v.useEffect)((function(){N.id&&wn(N.id,(0,F.Z)((0,o.Z)({title:yt,description:bt,category:{firstLevel:Nt||void 0,secondLevel:Pt||void 0},zvideoType:dn,topicIds:Ht.map((function(e){return e.id||e.urlToken})),campaignId:(null==mn?void 0:mn.id)||"0",imageUrl:nn,imageUrlFrom:an||2,isVisible:!0},We(Be)),{chapters:de}))}),[N.id,yt,bt,Nt,Pt,dn,Ht,mn,nn,an,wn,Be,de]);var Rn=(0,Q.Z)((function(e){return dt(e).then((function(e){var t,n,o,r,i,a,c,s,u=e.payload;u&&(!yt&&St(u.title),!nn&&u.imageUrl&&on(u.imageUrl),!bt&&wt(null!==(i=u.description)&&void 0!==i?i:""),!Nt&&Ot(null!==(a=null===(t=u.category)||void 0===t||null===(n=t.firstLevel)||void 0===n?void 0:n.id)&&void 0!==a&&a),!Pt&&kt(null!==(c=null===(o=u.category)||void 0===o||null===(r=o.secondLevel)||void 0===r?void 0:r.id)&&void 0!==c&&c),!(null==Ht?void 0:Ht.length)&&qt(null!==(s=u.topics)&&void 0!==s?s:[]),!dn&&pn(u.zvideoType),!mn&&vn(u.campaign))}))}),300);(0,v.useEffect)((function(){N.id&&Rn(N.id)}),[N,Rn]);var Nn=Boolean(N.id),On=["uploading","uploadError"].includes(D),Dn=(0,l.Z)((function(){Ct().then((function(e){var t=e.payload.success;void 0!==t&&t&&(Ye(!1),tt(!0),ye(!0))}))})),Bn=(0,l.Z)((function(e){pe((0,i.Z)(e))})),Pn=(0,s.Z)((function(){return Promise.all([n.e(2026),n.e(4055)]).then(n.bind(n,33103))})),kn=Ve(V);return(0,a.tZ)(C.eV,{block:"VideoUploadForm",content:{type:"Zvideo",id:N.id},children:(0,a.BX)(C.Wi,{zaType:"Block",className:h()("VideoUploadForm",R),children:[(0,a.BX)("div",{className:"VideoUploadForm-content",children:[(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required VideoUploadForm-itemTitle--topBelow",children:"封面"}),(0,a.BX)("div",{className:"VideoUploadForm-imageContainer",children:[!On&&(0,a.tZ)("img",{className:"VideoUploadForm-image",src:nn||Ue,alt:""}),On&&(0,a.tZ)("div",{className:"VideoUploadForm-uploadStatus",children:"uploading"===D?"视频上传中":"视频上传失败"}),(0,a.tZ)("div",{className:"VideoUploadForm-duration",children:(0,ie.Z)(null===(I=N.video)||void 0===I?void 0:I.duration)}),(0,a.tZ)(Ne.SV,{children:un&&(0,a.tZ)(un,{defaultVideo:N,coverChanged:$t,imageUrl:nn,onVideoPosterChange:sn})})]})]}),(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"标题"}),(0,a.tZ)(ce.Z,{className:"VideoUploadForm-input",value:yt,onChange:function(e){St(e.target.value)},placeholder:"输入视频标题",large:!0,after:(0,a.tZ)("div",{className:"VideoUploadForm-itemLimit",children:"".concat(yt.length,"/").concat(kn)})}),yt.length<5&&(0,a.BX)("div",{className:"VideoUploadForm-itemError",children:["最少输入 ",5," 个字"]}),yt.length>kn&&(0,a.BX)("div",{className:"VideoUploadForm-itemError",children:["已超出 ",yt.length-kn," 个字"]})]}),(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--topBelow",children:"简介"}),(0,a.tZ)(ce.Z,{className:"VideoUploadForm-input VideoUploadForm-input--multiline",value:bt,onChange:function(e){wt(e.target.value)},placeholder:"填写视频简介，让更多人找到你的视频",multiline:!0,large:!0,rows:4,after:(0,a.tZ)("div",{className:"VideoUploadForm-itemLimit VideoUploadForm-itemLimit--multiline",children:"".concat(bt.length,"/").concat(xe)})}),bt.length>xe&&(0,a.BX)("div",{className:"VideoUploadForm-itemError VideoUploadForm-itemError--multiline",children:["已超出 ",bt.length-xe," 个字"]})]}),Nn&&(0,a.tZ)(qe,{defaultVideo:N,title:yt,description:bt,active:L}),(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"所属领域"}),(0,a.BX)("div",{className:"VideoUploadForm-selectContainer",children:[(0,a.BX)(se.Z,{className:"VideoUploadForm-select",listClassName:"VideoUploadForm-selectList",value:Nt,onChange:function(e){Ot(e),kt(!1),Mt(!0)},children:[!Dt&&(0,a.tZ)(se.W,{value:!1,text:"选择领域"},"all"),ut.map((function(e){var t=e.data;return(0,a.tZ)(se.W,{value:t.id,text:t.name},t.id)}))]}),Dt&&(0,a.BX)(se.Z,{className:"VideoUploadForm-select",listClassName:"VideoUploadForm-selectList",value:Pt,onChange:function(e){kt(e),Mt(!0)},children:[(0,a.tZ)(se.W,{value:!1,text:"选择领域"},"all"),Dt.children.map((function(e){var t=e.data;return(0,a.tZ)(se.W,{value:t.id,text:t.name},t.id)}))]})]})]}),(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required VideoUploadForm-itemTitle--topic",children:"绑定话题"}),(0,a.tZ)(Oe.Z,{className:"VideoUploadForm-topicInput",value:Ht,onChange:function(e){qt(e),Wt(!0)},max:6,actived:jt,onToggleActived:function(){return Yt(!jt)}})]}),(0,a.tZ)(je.Z,{zvideo_id:N.id,defaultVideo:N,children:(0,a.tZ)(je.o.Consumer,{children:function(e){return e.canUse&&Pn&&(0,a.tZ)(Pn,{onSubmit:Bn,knowledges:de,defaultVideo:N})}})}),(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"视频类型"}),(0,a.BX)("div",{className:"VideoUploadForm-typeContainer",children:[(0,a.tZ)("div",{className:h()("VideoUploadForm-radioContainer",{"VideoUploadForm-radioContainer--disabled":hn}),children:Le.map((function(e){return(0,a.BX)("label",{className:"VideoUploadForm-radioLabel",children:[(0,a.tZ)(K.Z,{className:"VideoUploadForm-radio",size:16,checked:e.value===dn,onChange:function(){pn(e.value)},disabled:hn}),e.label]},e.value)}))}),"reprint"===dn&&(0,a.tZ)("div",{className:"VideoUploadForm-typeHint",children:"请确保转载视频符合版权使用规范，如被举报侵权，视频将会被删除"})]})]}),Te&&(0,a.BX)("div",{className:"VideoUploadForm-item",css:{alignItems:"flex-start"},children:[(0,a.BX)("div",{className:"VideoUploadForm-itemTitle",children:[(0,a.tZ)("span",{css:{marginRight:"4px",verticalAlign:"middle"},children:"联合创作"}),(0,a.tZ)(J.rk,{size:16,fill:"#8590A6",css:{verticalAlign:"middle",cursor:"pointer"},onClick:function(){return ze(!0)}})]}),Ze?(0,a.tZ)(C.eV,{content:{token:String(Be.citeId),type:Se.LA[Be.citeType]},children:(0,a.BX)(C.Wi,{zaType:"Card",view:{elementLocation:{card:{index:0}}},children:[(0,a.tZ)("div",{css:function(e){return{color:e.colors.GBL05A,fontSize:"14px",lineHeight:"14px",marginBottom:"13px",textAlign:"right"}},children:(0,a.tZ)(b.ZP,{onClick:function(){"published"!==(null==N?void 0:N.zvideoState)?(ge(null),Fe({citeId:null,citeType:null})):Zt("视频已发布，无法删除引用内容","red")},css:{padding:"0",lineHeight:"1",border:"none"},children:"删除"})}),(0,a.BX)("div",{css:function(e){return{width:"400px",padding:"12px 12px 12px 15px",background:e.colors.GBK10C,borderRadius:"3px",display:"flex",justifyContent:"space-between"}},children:[(0,a.BX)("div",{children:[(0,a.tZ)("div",{css:function(e){return{color:e.colors.GBK03A,fontSize:"14px",lineHeight:"18px",marginBottom:"13px",fontWeight:"500"}},children:Ze.title}),(0,a.BX)("div",{children:[(0,a.tZ)("img",{css:{width:"16px",height:"16px",borderRadius:"50%",verticalAlign:"middle",objectFit:"cover"},src:Ze.headPhoto,alt:""}),(0,a.tZ)("span",{css:function(e){return{fontSize:"13px",lineHeight:"18px",color:e.colors.GBK03A,marginLeft:"8px",verticalAlign:"middle"}},children:Ze.name})]})]}),Ze.contentPhoto&&(0,a.tZ)("img",{css:{width:"95px",height:"65px",borderRadius:"5px",objectFit:"cover"},src:Ze.contentPhoto,alt:""})]})]})}):(0,a.tZ)(C.$U,{zaText:"cite_image_text_content_click",zaType:"Button",as:b.ZP,onClick:function(){_e?tt(!0):Ye(!0)},css:{lineHeight:"30px"},icon:$.nY,preset:"plain",color:"blue",children:"引用图文内容"})]}),x&&(0,a.BX)("div",{className:"VideoUploadForm-item VideoUploadForm-scheduledPublish",children:[(0,a.tZ)("span",{className:"VideoUploadForm-itemTitle",children:"定时发布"}),(0,a.tZ)(j.Z,{className:"VideoUploadForm-scheduledPublish--switch",checked:rt,onChange:function(e){return it(e.target.checked)}}),rt&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(Re.Z,{className:"VideoUploadForm-scheduledPublish--timePicker",value:ct,min:nt,onChange:function(e){st(Date.parse(e))}}),(0,a.tZ)(J.rk,{className:"VideoUploadForm-scheduledPublish--tooltip",size:18,"data-tooltip":"时间需至少设置在30分钟以后","aria-label":"时间需至少设置在30分钟以后","data-tooltip-position":"top"})]})]}),(In&&!bn||mn)&&(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle",children:"绑定活动"}),In&&!bn&&(0,a.BX)("div",{role:"button",tabIndex:0,className:"VideoUploadForm-feature",onClick:function(){An(!0),En(!0)},children:[(0,a.tZ)(ee.d,{className:"VideoUploadForm-featureIcon",size:20}),(0,a.tZ)("div",{className:"VideoUploadForm-featureName",children:"绑定活动"})]}),mn&&(0,a.BX)("div",{className:h()("VideoUploadForm-feature",{"VideoUploadForm-feature--disabled":bn}),children:[(0,a.tZ)(te.HN,{text:!0,center:!0,size:6,css:{marginRight:4},onClick:function(){vn(null)}}),(0,a.tZ)(b.ZP,{preset:"plain",color:"blue",onClick:function(){An(!0),En(!0)},disabled:bn,children:mn.title})]})]}),Boolean(null==yn?void 0:yn.length)&&(0,a.tZ)(et.Z,{shown:Cn,onClose:function(){An(!1)},defaultCampaignId:null==mn?void 0:mn.id,campaignList:yn,onSubmit:function(e){An(!1),vn(e)}}),Ge&&(0,a.tZ)(fe,{handleConfirm:function(){ze(!1)}}),Xe&&(0,a.tZ)(he,{handleAgree:Dn,handleCancel:function(){return Ye(!1)}}),Je&&(0,a.tZ)(we,{handleCancel:function(){return tt(!1)},handleSelect:function(e){var t=e.id,n=e.type,o=void 0===n?"":n;ge(xt(e)),Fe({citeId:t,citeType:o}),tt(!1)}})]}),(0,a.BX)("div",{className:"VideoUploadForm-buttonGroup",children:[(0,a.tZ)(C.$U,{zaText:!0,zaType:"Button",zaBlock:"CancelPublishVideo",zaAction:"Close",as:b.ZP,preset:"secondary",color:"blue",css:{padding:"0 31px"},onClick:P,children:"取消发布"}),(0,a.tZ)(ae.r,{module:"Content",card:{content:{type:"Zvideo",token:N.id}},children:(0,a.tZ)(C.$U,{zaText:!0,zaType:"Button",zaBlock:"PublishVideo",zaAction:"Save",extra:{configMap:{publishSource:(null==N?void 0:N.zvideoState)||"upload"}},as:b.ZP,className:"VideoUploadForm-submitButton",preset:"primary",color:"blue",disabled:"uploadError"===D,css:{padding:"0 31px"},onClick:function(e){var t=function(e,t,n){var o=e.title,r=e.description,i=e.categoryFirstLevel,a=e.categorySecondLevelId,c=e.topics,s=e.zvideoType,u=Ve(n);if(!o)return"视频标题至少 ".concat(5," 个字");if(o.length<5)return"视频标题至少 ".concat(5," 个字");if(o.length>u)return"视频标题最多 ".concat(u," 个字");if(r.length>xe)return"视频描述最多 ".concat(xe," 个字");if(!i)return"请选择所属领域";if(!a)return"请选择所属二级领域";if(!c.length)return"请绑定话题";if(!s)return"请选择类型";if(t){var l=t();if(l)return l}}({title:yt,description:bt,categoryFirstLevel:Dt,categorySecondLevelId:Pt,topics:Ht,zvideoType:dn},B,V);if(t)return Zt(t,"red");T.Z.trackEvent(e.target,{id:7038,action:"Upload"},{button:{text:rt?"定时发布":"发布视频"}});var n=(0,F.Z)((0,o.Z)({id:N.id,videoId:N.videoId,title:yt,description:bt,category:{firstLevel:Nt,secondLevel:Pt},zvideoType:dn,topicIds:Ht.map((function(e){return e.id||e.urlToken})),campaignId:null==mn?void 0:mn.id,imageUrl:nn,imageUrlFrom:an||2,publishAt:ct},We(Be)),{chapters:de});k(n,rt)},children:rt?"定时发布":"发布视频"})})]}),H&&(0,a.tZ)($e,{title:yt,description:bt,imageUrl:nn,duration:(0,ie.Z)(null===(w=N.video)||void 0===w?void 0:w.duration)})]})})})),nt=n(40198),ot=n(92799),rt=n(78724),it=n(68764),at=n(30658),ct=function(e){var t,n,o,r,i=e.startTime,c=e.endTime,s=e.target,u=e.status,l=e.abnormalReason,d=Math.floor(i/1e3),p=Math.floor(c/1e3),h=s.parentObject,f=h.id,m=h.title,v=s.object.id,Z=null;return 0===u?(t="已保存草稿",n="GBK06A",Z=(0,a.tZ)(at.N,{}),o="GBK06A"):1===u?(t="发布中...",n="GBK06A",o="GBK06A"):2===u?"审核中"===l?(t="审核中",n="GBL05A",Z=(0,a.tZ)(at.N,{}),o="GBK06A"):(t="已投稿",n="GBL01A",Z=(0,a.tZ)(at.N,{}),o="GBK03A"):3===u&&(t="发布失败",n="GRD03A",Z=(0,a.tZ)(at.N,{}),o="GBK06A",r=!0),{status:u,statusText:t,statusColor:n,StatusIcon:Z,titleColor:o,hasAbnormalInfo:r,startTime:d,endTime:p,questionId:f,title:m,answerId:v,abnormalReason:l}},st=function(e){var t=e.status,n=e.questionId,r=e.answerId,i=e.children,c=(0,rt.Z)(e,["status","questionId","answerId","children"]);return 2===t?(0,a.tZ)(E.Link,(0,F.Z)((0,o.Z)({target:"_blank",href:"https://www.zhihu.com/question/".concat(n,"/answer/").concat(r),css:{display:"block",cursor:"pointer"}},c),{children:i})):(0,a.tZ)(E.Box,(0,F.Z)((0,o.Z)({},c),{children:i}))},ut={"已保存草稿":"已保存草稿","发布失败":"发布失败","已投稿":"投稿成功","审核中":"审核中","发布中...":"发布中..."},lt={"已保存草稿":"继续编辑","发布失败":"修改草稿","已投稿":"已投稿","审核中":"查看投稿","发布中...":""},dt=function(e){var t=e.item,n=(0,rt.Z)(e,["item"]),r=ct(t),i=r.status,c=r.statusText,s=r.statusColor,u=r.StatusIcon,l=r.titleColor,d=r.hasAbnormalInfo,p=r.questionId,h=r.title,f=r.answerId,m=r.abnormalReason;return(0,a.BX)(st,(0,F.Z)((0,o.Z)({py:"20px",css:function(e){return(0,o.Z)({},0===i&&{cursor:"pointer"},(0,it.M)({borderTop:"1px solid ".concat(e.colors.GBK09A)}))},status:i,questionId:p,answerId:f},n),{children:[(0,a.BX)(E.Flex,{color:s,alignItems:"center",mb:"8px",fontSize:"12px",children:[(0,a.tZ)(E.Text,{children:ut[c]}),(0,a.tZ)(E.Text,{ml:"auto",fontWeight:"bold",css:function(e){return{color:e.colors.GBL01A}},children:lt[c]}),c===ut.发布失败?null:u]}),(0,a.tZ)(E.Text,{color:l,fontSize:"14px",children:h}),d&&(0,a.tZ)(E.Text,{p:"8px",mt:"8px",color:"GBK03A",fontSize:"14px",css:function(e){return{borderRadius:2,backgroundColor:e.colorMod(e.colors.GRD03A).alpha(.08)}},children:m})]}))},pt=Object.assign;var ht=function(e){return Z().createElement(q.Z,pt({width:"14",height:"16",fill:"none",viewBox:"0 0 14 16"},e),Z().createElement("path",{fill:"#8590A6",fillRule:"evenodd",d:"M1 2.666c0-.736.597-1.333 1.334-1.333h9.333c.736 0 1.334.597 1.334 1.333v10.667c0 .736-.598 1.333-1.334 1.333h-1.666a.333.333 0 0 1-.334-.333v-4A2.333 2.333 0 0 0 7.334 8h-6A.333.333 0 0 1 1 7.667v-5Zm2.667 0a.667.667 0 1 0 0 1.334h6.667a.667.667 0 1 0 0-1.333H3.667ZM3 6c0-.368.299-.667.667-.667H9a.667.667 0 0 1 0 1.334H3.667A.667.667 0 0 1 3 6Zm-2 4.334a1 1 0 0 1 1-1h5.333a1 1 0 0 1 1 1v3.333a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3.333Zm5.167 1.377a.333.333 0 0 1 0 .578l-2 1.154a.333.333 0 0 1-.5-.288v-2.31c0-.256.277-.417.5-.288l2 1.154Z",clipRule:"evenodd"}))};function ft(e,t){var n=e.label,r=e.onClick,i=(0,rt.Z)(e,["label","onClick"]);return(0,a.tZ)(C.$U,{zaText:!0,zaType:"Button",zaBlock:"VideoContributeButton",className:"ContentItem-action",children:(0,a.tZ)(b.ZP,(0,o.Z)({ref:t,preset:"plain",onClick:r,icon:ht,label:n},i))})}var mt=(0,v.forwardRef)(ft),vt=n(85946),Zt=(0,n(87655).Z)((function(e){var t=e.isLiked,n=e.onClick,r=e.showIcon,i=void 0===r||r,c=e.authRequired,s=(e.currentUser,e.isLogin,(0,rt.Z)(e,["isLiked","onClick","showIcon","authRequired","currentUser","isLogin"])),u=(0,l.Z)((function(e){var o=!t,r=o?"Like":"UnLike";T.Z.trackEvent(e.target,{id:7448,action:r}),c((function(){return n(o)}))()}));return(0,a.tZ)(b.ZP,(0,o.Z)({preset:"plain",onClick:u,icon:i?vt.sh:null,label:t?"取消喜欢":"喜欢","aria-live":"polite"},s))})),gt=n(4428),Et=n(8518),Tt=n(43819),Ct=n(44707),At=n(440),_t=(0,v.forwardRef)((function(e,t){var n=e.onClick,r=(0,rt.Z)(e,["onClick"]);return(0,a.tZ)(b.ZP,(0,o.Z)({ref:t,preset:"plain",onClick:n,icon:Tt.T,label:"设置"},r))})),yt=function(e){var t,n,r,i=e.className,c=e.zvideo,s=e.onEdit,u=e.onToggleVisibility,l=e.onRemove,d=e.onChangeCommentPermission,p=e.togglerProps,f=(0,g.useDispatch)(),m=c.id,Z=c.commentPermission,T=c.isVisible,C=c.creationRelationship,_=null==C||null===(t=C.coCreation)||void 0===t||null===(n=t.bizInfo)||void 0===n?void 0:n.canCancelPermission,y=(0,v.useCallback)((r=(0,gt.Z)((function(e){var t;return(0,Et.Jh)(this,(function(n){switch(n.label){case 0:return t="视频删除后将不可恢复",[4,f((0,ve.Hi)(m)).then((function(e){var n=e.payload.message;n&&(t=n)}))];case 1:return n.sent(),M.Z.confirm((0,a.tZ)(E.Text,{textAlign:"center",children:t}),{title:"确定删除视频",text:{ok:"删除视频"}}).then((function(){l(e)})),[2]}}))})),function(e){return r.apply(this,arguments)}),[f,m,l]),S=(0,a.BX)(a.HY,{children:[(0,a.tZ)(A.sN,{onClick:s,children:"编辑视频"}),(0,a.tZ)(A.sN,{onClick:u,children:"在视频列表内".concat(T?"隐藏":"显示")}),(0,a.tZ)(A.R,{}),(0,a.tZ)(At.rt,{current:Z,target:c,onChange:d}),(0,a.tZ)(A.R,{}),(0,a.tZ)(A.sN,{onClick:y,children:"删除"})]});return(0,a.tZ)(A.ZP,{arrowed:Boolean(_),className:h()("ZVideoSettingMenu",i),itemClassName:"ZVideoSettingMenu-item",toggler:(0,a.tZ)(_t,(0,o.Z)({},p)),reversed:!0,children:_?(0,a.tZ)(A.sN,{children:(0,a.tZ)(Ct.ZY,{contentType:"zvideo",contentId:m})}):S})},St=n(89237),It=n(5625);var bt={up:1,neutral:0,down:-1};function wt(e){var t,p=(0,g.useDispatch)(),f=e.className,Z=e.zvideo,S=e.author,x=e.commentsShown,L=void 0!==x&&x,U=e.onCommentButtonClick,F=void 0===U?m():U,M=e.renderOptions,G=e.renderActionButtons,z=e.enableContribute,H=void 0!==z&&z,q=Z.id,V=Z.title,X=Z.description,K=Z.voting,j=Z.voteCount,Y=Z.voteupCount,Q=Z.commentCount,J=Z.isLiked,$=Z.isFavorited,ee=Z.contribute,te=Z.video,ne=Z.video,oe=(void 0===ne?{}:ne).duration,re=void 0===oe?0:oe,ie=Z.isOgv,ae=function(e){var t=(0,St.YJ)(e),n="string"==typeof t?t:null==t?void 0:t.urlToken,o=(0,g.useSelector)((function(e){return(0,It.np)(e,{urlToken:n})}));return e?null!=o?o:t:null}(Z.creationRelationship),ce=(0,nt.xw)(ae),se=(0,nt.xw)(S)&&!ce,ue=se||ce,le=(0,ot.dD)(),de=(0,v.useMemo)((function(){return parseInt(1e3*re)}),[re]),pe=(0,v.useMemo)((function(){return{id:q,video:te}}),[q,te]),he=(0,s.Z)((function(){return Promise.all([n.e(2026),n.e(6765)]).then(n.bind(n,20586))})),fe=(0,k.fh)(q),me=(0,r.Z)((0,v.useState)(!1),2),ge=me[0],Ee=me[1],Te=(0,k.cF)(q).answer,Ce=(void 0===Te?{}:Te).canContribute,Ae=void 0!==Ce&&Ce,_e=Boolean((null==ee||null===(t=ee.contributeList)||void 0===t?void 0:t.length)||(null==ee?void 0:ee.totals)),ye=H&&!le&&se&&_e,Se=H&&!le&&se&&Ae&&!_e,Ie=(0,r.Z)((0,Ge.Z)("zvideo_toolbar:should_hide_contribution_tooltip"),2),be=Ie[0],we=Ie[1],Re=(0,v.useRef)();(0,u.Z)((function(){return we(!0)}),!be&&Se?5e3:null);var Ne=(0,v.useCallback)((function(){Ee(!0),p((0,k.ub)(q,"edit"))}),[q,p]),Oe=(0,v.useCallback)((function(){return p((0,k.Xg)({zvideoId:q,target:"answer",duration:de}))}),[p,q,de]),De=(0,v.useCallback)((function(e){return p((0,ve.qO)(q,bt[e]))}),[q,p]),Be=(0,v.useCallback)((function(e){p((0,ve.SL)(q,e))}),[p,q]),Pe=(0,r.Z)((0,v.useState)(!1),2),ke=Pe[0],xe=Pe[1],Le=(0,v.useCallback)((function(e){xe(!0),T.Z.trackEvent(e.target,{id:8213,action:"Collect",is_intent:!$})}),[$]),Ue=(0,v.useCallback)((function(){xe(!1)}),[]),Fe=(0,v.useCallback)((function(e,t){p((0,ve.ER)(q,t))}),[q,p]),Me=(0,v.useCallback)((function(){p((0,ve.MM)(q))}),[q,p]),ze=(0,v.useCallback)((function(){p((0,ve.W2)(q)).then((function(){var e="https://www.zhihu.com/people/".concat(S.urlToken,"/zvideos");window.location.href=e}))}),[q,S,p]),He=(0,r.Z)((0,v.useState)(null),2),qe=He[0],Ve=He[1],Xe=(0,r.Z)((0,v.useState)(!1),2),We=Xe[0],Ke=Xe[1],je=(0,r.Z)((0,v.useState)(!1),2),Ye=je[0],Qe=je[1];(0,v.useEffect)((function(){We&&!qe&&p((0,ve.eJ)(q)).then((function(e){var t=e.payload;Ve(t)}))}),[q,We,qe,p]),(0,v.useEffect)((function(){se&&!le&&H&&Oe()}),[se,Oe,le,H]);var Je=(0,v.useCallback)((function(e){p((0,ve.oi)(q,e)).then((function(){p((0,k.__)(q)),e.clubId&&p((0,ve.g$)(q,e.clubId));var t="https://www.zhihu.com/zvideo/".concat(q);window.location.href=t}))}),[q,p]),$e=(0,r.Z)((0,v.useState)(!1),2),et=$e[0],rt=$e[1],it=(0,c.qC)().blockStrategies,at=(0,I.Z)([(0,I.m)(it)],G),ct=at({componentList:[{name:"favlist",component:(0,a.tZ)(N.Z,{onClick:Le,label:"收藏",showIcon:!le},"favlist")},{name:"like",component:(0,a.tZ)(Zt,{isLiked:J,onClick:Be,showIcon:!le},"like")},{name:"report",component:!ue&&(0,a.tZ)(D.Z,{id:q,type:"zvideo",onModalShown:rt},"report")}]}).filter(Boolean),st=(0,v.useCallback)((function(){Ve(null),Ke(!1),p((0,ve.dc)(q))}),[p,q]),ut=(0,l.Z)((function(e){Ne(),p((0,k.O)(e.id)),Qe(!1)})),lt=(0,l.Z)((function(e){Oe(),p((0,ve.dc)(e)),Ee(!1)})),pt=dt,ht=W;return(0,a.BX)(a.HY,{children:[(0,a.tZ)("div",{css:{marginBottom:"14px"},children:(0,a.BX)(R.eX,{className:h()("ZVideoToolbar",f),children:[at({componentList:[{name:"vote",component:(0,a.tZ)(P.Z,{type:"zvideo",count:Y||j,voting:K,onVote:De,isOwner:se,zaIds:{voteUp:6599,voteDown:6600}},"vote")},{name:"comment",component:(0,a.tZ)(w.Z,{onClick:F,commentsShown:L,count:Q,positionStatus:"normal"},"comment")},{name:"share",component:(0,a.tZ)(B.Z,{id:q,type:"zvideo",url:"https://".concat(Ze.Z.wwwHost,"/zvideo/").concat(q).concat(ie?"?page=ogv":""),title:V,authorName:S.name,positionStatus:"normal"},"share")}]}),le?(0,a.BX)(A.ZP,{preventCloseOnTarget:!0,globalClose:!et,menuContainerClassName:"ZVideoToolbar-menuContainer",toggler:(0,a.tZ)(b.ZP,{preset:"plain",icon:d.AZ,"aria-label":"更多"}),children:[ct.map((function(e){return(0,a.tZ)(A.sN,{className:"ZVideoToolbar-menuItem",children:e},e.key)})),!ue&&M()]}):(0,i.Z)(ct).concat((0,i.Z)(ue?[]:M())),ye&&(0,a.tZ)(mt,{label:"全部投稿",onClick:function(){p((0,k.ub)(q)),Qe(!0)}}),Se&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(mt,{ref:Re,label:"添加投稿",onClick:Ne}),(0,a.tZ)(y.Z,{placement:"top",isOpen:!be,target:Re.current,children:"投稿到问题，让更多人看到你的视频"})]}),ue&&(0,a.tZ)(yt,(0,o.Z)({zvideo:Z,onEdit:function(){return Ke(!0)},onToggleVisibility:Me,onChangeCommentPermission:Fe,onRemove:ze},le&&{togglerProps:{label:null}}))]})}),se&&(0,a.tZ)(_.Z,{className:"ZVideoToolbar-videoFormModal",title:"编辑视频",size:"fullPage",onClose:st,css:{width:"734px",".Modal-inner":{"::-webkit-scrollbar":{display:"none"}},".Modal-title":{marginLeft:32}},children:We&&qe&&(0,a.tZ)(tt,{defaultVideo:qe,onSubmit:Je,onRemove:st})}),(0,a.tZ)(O.E,{id:q,type:"zvideo",shown:ke,onClose:Ue,zaEnabled:!0}),H&&!le&&se&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(_.Z,{title:(0,a.BX)(E.Flex,{px:"24px",justifyContent:"space-between",children:[(0,a.tZ)(E.Text,{fontSize:"24px",color:"GBK02A",children:"全部视频回答投稿"}),Ae&&(0,a.tZ)("button",{css:function(e){return{width:90,height:34,border:"none",borderRadius:3,fontSize:14,fontWeight:"normal",color:e.colors.GBL01A,backgroundColor:e.colorMod(e.colors.GBL01A).alpha(.08)}},onClick:function(){Ne(),Qe(!1)},children:"添加投稿"})]}),css:function(e){return{width:536,height:554,backgroundColor:e.colors.GBK99A,".Modal-title":{marginTop:24},".Modal-inner::-webkit-scrollbar":{display:"none"}}},onClose:function(){return Qe(!1)},children:Ye&&fe.map((function(e){return(0,a.tZ)(pt,(0,o.Z)({item:e},0===e.status&&{onClick:function(){ut(e)}}),e.id)}))}),Boolean(he)&&(0,a.tZ)(C.eV,{block:"Contribution",children:(0,a.tZ)(ht,{show:ge,defaultVideo:pe,title:V,description:X,duration:de,onClose:function(){lt(q)},shouldPublish:!0})})]})]})}wt.defaultProps={renderOptions:function(){return[null]},renderActionButtons:S.Z};var Rt=wt},71848:function(e,t,n){"use strict";n.d(t,{Z:function(){return q}});var o=n(21620),r=n(61869),i=n(84421),a=n(88483),c=n(16600),s=n(32554),u=n(68562),l=n(75926),d=n.n(l),p=n(87363),h=n(52495),f=n(52626),m=n(17222),v=n(97645),Z=n.n(v),g=n(14790),E=n(47496),T=n(96531),C=n(78194),A=n(37148),_=n(73464),y=n(8672),S=n(70452),I=n(91840),b=n(74264),w=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={expanded:!0},e.handleTitleClick=function(t){m.Z.trackEvent((0,y.Z)(e),{id:6121,action:"OpenUrl",element_name:"Title"}),window.open(t)},e.renderHeader=function(){var t=e.props,n=t.title,o=t.url,r=t.author;return(0,u.BX)("div",{className:"AbstractCard-header",children:[(0,u.BX)("div",{className:"AbstractCard-desc",children:[(0,u.tZ)("span",{role:"button",tabIndex:0,className:"AbstractCard-title",onClick:function(){return e.handleTitleClick(o,n)},children:n}),(0,u.tZ)("span",{className:"AbstractCard-source",children:e.abstractSourceInfo})]}),(0,u.tZ)(b.Z,{zaId:6120,className:"AbstractCard-author",author:r,preset:"plain"})]})},e.renderContent=function(){var t=e.props,n=t.content,o=t.member.name,r=t.theme;return(0,u.BX)("div",{className:"AbstractCard-content",children:[(0,u.tZ)("div",{className:"AbstractCard-text AbstractCard-text--".concat(r),children:n}),(0,u.tZ)("div",{className:"AbstractCard-tip",children:(0,u.BX)("span",{className:"AbstractCard-info",children:[o," 摘录于 ",e.createdFormat]})})]})},e}var a=n.prototype;return a.componentDidMount=function(){(0,I.y3)(this.node,(function(){m.Z.trackCardShow(null,{id:6118})}))},a.render=function(){var e=this;return(0,u.BX)("div",{className:"AbstractCard",ref:function(t){e.node=t},children:[this.renderHeader(),this.renderContent()]})},(0,r.Z)(n,[{key:"abstractSourceInfo",get:function(){return"answer"===this.props.type?"下的回答内容摘录":"下的内容摘录"}},{key:"createdFormat",get:function(){var e=this.props.created;return(0,S.Z)(e?new Date(1e3*e):new Date,"yyyy-MM-dd")}}]),n}(p.Component);w.propTypes={title:d().string.isRequired,url:d().string.isRequired,author:d().object,member:d().object,content:d().string.isRequired,created:d().number,theme:d().string.isRequired};var R=w,N=n(49019),O="TopicSelect",D=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={topics:[],actived:!1},e.handleChange=function(t){(0,e.props.onChange)(t),e.setState((function(e){return(0,c.Z)((0,a.Z)({},e),{actived:!1,topics:t})}))},e.deactived=function(){e.setState({actived:!1})},e.toggleActived=function(){e.setState((function(e){return(0,c.Z)((0,a.Z)({},e),{actived:!e.actived})}))},e.focus=function(){return e.topicsInput&&e.topicsInput.focus()},e}return n.prototype.render=function(){var e=this,t=this.state,n=t.topics,o=t.actived;return(0,u.tZ)("div",{className:O,children:(0,u.tZ)(N.Z,{actived:o,placeholderNote:" ",max:1,inputProps:{className:"".concat(O,"-topicInput")},onRef:function(t){e.topicsInput=t},value:n,onChange:this.handleChange,onBlur:this.handleBlur,onToggleActived:this.toggleActived})})},n}(p.Component),B=D,P=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={topics:[]},e.handleChangeTopics=function(t){e.setState((function(e){return(0,c.Z)((0,a.Z)({},e),{topics:t})}))},e.handleSubmit=function(){var t=e.state,n=(0,C.Z)(t.topics,1)[0].urlToken;(0,e.props.onSubmit)(n)},e}return n.prototype.render=function(){var e=this.props,t=e.type,n=e.author,o=e.currentUser,r=e.title,i=e.url,a=e.onClose,c=e.content,s=e.visible;return(0,u.tZ)(A.Z,{onClose:a,size:"large",title:"发送摘录到百科",className:"AbstractForm",children:s&&(0,u.BX)(p.Fragment,{children:[(0,u.tZ)(R,{type:t,author:n,member:o,title:r,url:i,content:c,theme:"scroll"}),(0,u.tZ)(B,{onChange:this.handleChangeTopics}),(0,u.tZ)("div",{className:"AbstractForm-footer",children:(0,u.tZ)(_.ZP,{preset:"primary",color:"blue",disabled:this.disabled,onClick:this.handleSubmit,children:"确定"})})]})})},(0,r.Z)(n,[{key:"disabled",get:function(){var e=this.state.topics,t=this.props.content;return 0===e.length||""===t}}]),n}(p.Component);P.propTypes={type:d().string.isRequired,author:d().object,currentUser:d().object,title:d().string.isRequired,content:d().string.isRequired,url:d().string.isRequired,visible:d().bool.isRequired,onClose:d().func.isRequired,onSubmit:d().func.isRequired};var k=n(36070),x=n(47112),L=n.n(x),U=500,F=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.visible,n=e.top,o=e.onSelect,r=e.content,i=this.hintInfo,a=i&&"danger"===i.type;return(0,u.BX)("div",{className:L()("SharePopover",{"SharePopover--show":t}),style:{top:n},disabled:a,children:[(0,u.tZ)("span",{className:"SharePopover-arrow"}),(0,u.BX)("div",{role:"button",tabIndex:0,className:L()("SharePopover-content",{"SharePopover-content--danger":a}),onClick:function(){a||o(r)},children:[(0,u.tZ)(k.vZ,{className:"SharePopover-quote",size:24}),(0,u.tZ)("span",{className:"SharePopover-main",children:"发送到百科下的摘录"}),i&&(0,u.tZ)("span",{className:"SharePopover-hint",children:i.text})]})]})},(0,r.Z)(n,[{key:"hintInfo",get:function(){var e=this.props,t=e.content;if(!e.isCopyable)return{type:"danger",text:"该内容限制转载"};var n=t.length;return n<100?{type:"danger",text:"最少摘录 100 字"}:n>450&&n<=U?{type:"warning",text:"还可以摘录 ".concat(U-n," 字")}:n>U&&{type:"danger",text:"已经超出 ".concat(n-U," 字")}}}]),n}(p.Component);F.propTypes={content:d().string,top:d().number,visible:d().bool};var M=F,G=n(4428),z=n(8518),H=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={popoverVisible:!1,top:0,content:"",abstractModalVisible:!1},e.handlePopoverShow=function(t,n){if(!e.hasAddBaikeSummaryPermission)return null;m.Z.trackCardShow(null,{id:6115}),e.setState((function(e){return(0,c.Z)((0,a.Z)({},e),{top:n,content:t,popoverVisible:!0})}))},e.handlePopoverClose=function(){if(!e.hasAddBaikeSummaryPermission)return null;e.setState((function(e){return(0,c.Z)((0,a.Z)({},e),{popoverVisible:!1})}))},e.handleAbstractModalClose=function(){e.setState((function(e){return(0,c.Z)((0,a.Z)({},e),{abstractModalVisible:!1})}))},e.handleAbstractSelected=function(t){m.Z.trackEvent(null,{id:6116,action:"Send"}),e.setState((function(e){return(0,c.Z)((0,a.Z)({},e),{content:t,popoverVisible:!1,abstractModalVisible:!0})}))},e.handleCreateAbstract=function(t){var n=e.props,o=n.type,r=n.objectId,i=n.createAbstract,s=e.state.content;m.Z.trackEvent(null,{id:6117,action:"Submit"}),i({type:o,token:r,topicId:t,content:s}).then((function(){e.setState((function(e){return(0,c.Z)((0,a.Z)({},e),{content:s,popoverVisible:!1,abstractModalVisible:!1})}))}))},e}var l=n.prototype;return l.componentDidMount=function(){var e,t,n,o,r;this.removeMouseUpListener=(e=this.richContainer,t=this.handlePopoverShow,n=this.handlePopoverClose,o=(0,G.Z)((function(o){var r,i;return(0,z.Jh)(this,(function(a){switch(a.label){case 0:return[4,new Promise((function(e){setTimeout((function(){var t="";t=document.selection?document.selection.createRange().text:document.getSelection(),e(t.toString())}),0)}))];case 1:return(r=a.sent())?(i=o.target===e?o.offsetY:o.offsetY+e.offsetTop+o.target.offsetTop+30,t(r,i)):n(),[2]}}))})),r=function(e){return o.apply(this,arguments)},null==e||e.addEventListener("mouseup",r),function(){return null==e?void 0:e.removeEventListener("mouseup",r)})},l.componentWillUnmount=function(){this.removeMouseUpListener()},l.render=function(){var e=this.state,t=e.popoverVisible,n=e.top,o=e.content,r=e.abstractModalVisible,i=this.props,a=i.type,c=i.author,s=i.currentUser,l=i.title,d=i.url,h=i.isCopyable;return!this.hasAddBaikeSummaryPermission||this.userDisabled?null:(0,u.BX)(p.Fragment,{children:[(0,u.tZ)(M,{top:n,visible:t,content:o,isCopyable:this.isAuthor||h,onBlur:this.handlePopoverClose,onSelect:this.handleAbstractSelected}),(0,u.tZ)(P,{type:a,onSubmit:this.handleCreateAbstract,author:c,visible:r,onClose:this.handleAbstractModalClose,currentUser:s,title:l,url:d,content:o})]})},(0,r.Z)(n,[{key:"isAuthor",get:function(){var e=this.props,t=e.currentUser,n=e.author;return(0,g.Z)(t,n)}},{key:"hasAddBaikeSummaryPermission",get:function(){var e=this.props.currentUser;return e&&e.hasAddBaikeSummaryPermission}},{key:"userDisabled",get:function(){return Z().get("global::AddToBaikeDisabled")}},{key:"richContainer",get:function(){var e=this.props,t=e.type,n=e.objectId;return"article"===t?document.querySelector(".Post-RichText"):document.querySelector(".AnswerItem[name='".concat(n,"'] .RichContent-inner"))}}]),n}(p.Component);H.propTypes={type:d().string.isRequired,author:d().object.isRequired,currentUser:d().object,title:d().string.isRequired,url:d().string.isRequired,objectId:d().number.isRequired,isCopyable:d().bool},H.defaultProps={isCopyable:!0};var q=(0,f.compose)(E.Z,(0,h.connect)(null,{createAbstract:T.sF}))(H)},34440:function(e,t,n){"use strict";function o(e){return e.componentList.filter(Boolean).filter((function(e){var t=e.component;return Boolean(t)})).map((function(e){return e.component}))}n.d(t,{Z:function(){return o}})},30942:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},m:function(){return c}});var o=n(61565),r=n(34440),i=new Map([["vote","isBlockingVote"],["comment","isBlockingComment"],["like","isBlockingLike"],["favlist","isBlockingCollect"],["collect","isBlockingCollect"],["thank","isBlockingLike"],["share","isBlockingShare"]]);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Z;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=e.length>0?e.reduce((function(e,t){return[t.apply(void 0,(0,o.Z)(e))]}),(0,o.Z)(r)):(0,o.Z)(r);return t.apply(void 0,(0,o.Z)(a))}}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return{componentList:t.componentList.map((function(t){var n=t.name,o=t.component;return i.has(n)&&e[i.get(n)]?{name:n,component:null}:{name:n,component:o}}))}}}},45638:function(e,t,n){"use strict";n.d(t,{HS:function(){return B},W9:function(){return o.Z}});var o=n(34440),r=n(68562);var i=n(21620),a=n(84421),c=n(88483),s=n(16600),u=n(61565),l=n(32554),d=n(85946),p=n(72928),h=n.n(p),f=n(75926),m=n.n(f),v=n(87363),Z=n(52495),g=n(52626),E=n(17222),T=n(48457),C=n(96323),A=n(73464),_=n(38793),y=n(70175),S=n(91355),I=function(e,t){return t.every((function(t){return e.includes(t)}))},b=n(87655),w=n(70577),R=n(27869),N={answer:m().object.isRequired,renderThankButtonText:m().func,zaInfo:m().number},O=(0,u.Z)(Object.keys(N)).concat(["updateAnswerThank","dispatch","authRequired","isLogin","currentUser"]),D=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).buttonRef=(0,v.createRef)(),e.handleUpdateThanked=e.props.authRequired((function(){var t=e.props,n=t.answer,o=n.id,r=n.relationship,i=(void 0===r?{}:r).isThanked,a=t.zVideoId,s=t.updateAnswerThank,u=t.zaInfo,l=t.answer,d=!i;E.Z.trackEvent(e.buttonRef.current,(0,c.Z)({action:d?"Thank":"UnThank",element:"Button"},u&&{id:u})),s(o,d,{zVideoId:a},l)}),S.q0.thank),e}return n.prototype.render=function(){var e=this,t=this.props,n=t.answer,o=t.renderThankButtonText,i=t.disabled,a=n.relationship,u=(void 0===a?{}:a).isThanked,l=h()(this.props,O),p=o(n);return y.Z.isMobileEntry?(0,r.tZ)(C.sN,(0,s.Z)((0,c.Z)({ref:this.buttonRef,onClick:this.handleUpdateThanked},l),{children:p})):(0,r.BX)(r.HY,{children:[(0,r.tZ)(_.bY,{input:"l",action:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}),(0,r.tZ)(T.$U,(0,c.Z)({as:A.ZP,zaType:"Button",zaAction:u?"UnLike":"Like",zaText:!0,onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:d.sh,label:p,disabled:i,"aria-live":"polite"},l))]})},n}(v.Component);D.propTypes=N,D.defaultProps={renderThankButtonText:function(e){var t=e.relationship,n=(void 0===t?{}:t).isThanked,o=e.question.title;return I(o,S.lH)?n?"取消祈祷":"祈祷":n?"取消喜欢":"喜欢"}};var B=(0,g.compose)(b.Z,(0,Z.connect)(null,{updateAnswerThank:R.TC}),(0,w.Z)(null))(D)},5671:function(e,t,n){"use strict";n.d(t,{_:function(){return Z}});var o=n(88483),r=n(16600),i=n(68562),a=n(12321),c=n(47859),s=n(77568),u=n.n(s),l=n(52495),d=n(89118),p=n(73950),h=n(55695),f=n(20722),m=n(83790),v=function(e){var t=e.type,n=e.id,o=(0,l.useSelector)((function(e){return e.adPromotion[t][n]})),r=(0,p.zc)(),c=(0,a.n)();return r?(0,i.tZ)(d.Z,{userAgent:c,action:o,data:r}):null},Z=function(e){var t=e.dataPath;return function(e){return u()((function(n){var a,s=null!==(a=n[t])&&void 0!==a?a:{},u=s.type,d=s.id,f=(0,l.useDispatch)(),m=(0,p.zc)(),v=(0,c.Z)((function(e){m&&u&&d&&f((0,h.Cz)({type:u,id:d,currentAction:e}))})),Z=(0,c.Z)((function(){return v(h.SE.comments.show)})),g=(0,c.Z)((function(){return v(h.SE.comments.close)})),E=(0,c.Z)((function(){return v(h.SE.comments.publish)})),T=(0,c.Z)((function(e){return v(e?h.SE.follow:h.SE.revertFollow)})),C=(0,c.Z)((function(){return v(h.SE.shareClick)}));return(0,i.tZ)(e,(0,r.Z)((0,o.Z)({},n),{trackOpenCommentAdPromotion:Z,trackCloseCommentAdPromotion:g,trackToggleFollowAdPromotion:T,trackShareAdPromotion:C,trackPublishCommentAdPromotion:E}))}),e)}};t.Z=function(e){return(0,i.tZ)(f.SV,{replacement:null,children:(0,i.tZ)(m.Z,{children:(0,i.tZ)(v,(0,o.Z)({},e))})})}},67184:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var o=n(68562);function r(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,r=t.reasonDescription;return(0,o.tZ)("span",{className:"AnnotationTag",children:32300===n?"该内容已被标记":r})}},62702:function(e,t,n){"use strict";var o=n(78194),r=n(61533),i=n(87363),a=n(60111);t.Z=function(e){var t=e.disabled,n=e.children,c=(0,o.Z)((0,i.useState)(null),2),s=c[0],u=c[1];return(0,a.Z)((function(){u(document.querySelector("#AnswerFormPortalContainer"))})),t?n:Boolean(s)&&(0,r.createPortal)(n,s)}},38380:function(e,t,n){"use strict";n.d(t,{Z:function(){return Un}});var o=n(8672),r=n(21620),i=n(61869),a=n(84421),c=n(88483),s=n(16600),u=n(78194),l=n(21353),d=n(61565),p=n(32554),h=n(68562),f=n(83831),m=n(52857),v=n.n(m),Z=n(47112),g=n.n(Z),E=n(49109),T=n(20669),C=n(75926),A=n.n(C),_=n(87363),y=n(52495),S=n(52028),I=n(3404),b=n(52626),w=n(17222),R=n(48457),N=n(32261),O=n(37148),D=n(49236),B=n(36701),P=n(14562),k=n(91855),x=n(97645),L=n.n(x),U=n(40937),F=(n(79869),"textAnswer"),M="videoAnswer";var G=n(73464),z=n(44540),H=n(25917),q=n(21822),V=n(24362),X=n(16804),W=n(62459),K=n(26566),j=n(59706),Y=n(27124),Q=n(30135),J=n(55053),$=n(22823),ee=n(42116),te=n(87655),ne=n(7620),oe=n(35568),re="AnswerOrg::know",ie=function(e){(0,a.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).handleHide=function(){L().set(re,!0),e.props.onClose()},e}return n.prototype.render=function(){var e=this.props,t=e.shown,n=e.onClose;return(0,h.tZ)(O.Z,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n,children:t&&(0,h.BX)("div",{children:[(0,h.BX)("ul",{className:"AnswerModal-list",children:[(0,h.tZ)("li",{children:"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"}),(0,h.tZ)("li",{children:"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"}),(0,h.tZ)("li",{children:"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。"})]}),(0,h.tZ)("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank",children:"了解更多"}),(0,h.BX)(O.w,{direction:"horizontal",children:[(0,h.tZ)(G.ZP,{onClick:this.handleHide,children:"不再显示"}),(0,h.tZ)(G.ZP,{color:"blue",preset:"primary",onClick:n,children:"知道了"})]})]})})},n.getKnown=function(){return L().get(re)},n}(_.Component),ae=n(27869),ce=n(59110),se=n(40198),ue=n(92799),le=n(7958),de=n(30060),pe=n(18661),he=n(24316),fe=n(29254),me=n(15799),ve=n(62704),Ze=n(82096),ge=function(e){var t=e.shown,n=e.onClose;return(0,h.tZ)(Ze.Z,{onClose:n,title:"该问题暂时只支持客户端进行回答",children:t&&(0,h.tZ)("div",{className:"SlideshowEditBlockModal",children:(0,h.tZ)(G.ZP,{preset:G.EE.Primary,color:G.rp.Blue,onClick:n,children:"知道了"})})})};ge.propTypes={shown:A().bool.isRequired,onClose:A().func.isRequired};var Ee=ge,Te=n(81525),Ce=n(30728),Ae=n(69520),_e=n(50236),ye=n(62147),Se=n(7638),Ie=n(26977),be=n(47859),we=n(33393),Re=n(62792),Ne=n(98793),Oe=n(74264),De=function(e){var t=e.className,n=e.onClose,o=e.shown,r=e.allInviters,i=e.onChoose;return(0,h.tZ)(O.Z,{title:"添加「谢邀」卡片",subtitle:"选择邀请人，添加感谢他的卡片",onClose:n,className:t,css:{width:"536px"},children:o&&r.map((function(e){return(0,h.BX)(I.Flex,{css:{padding:"12px 0"},children:[(0,h.tZ)(Oe.Z,{author:e}),(0,h.tZ)(G.ZP,{color:"color",preset:"blue",css:{height:"32px",marginLeft:"auto"},onClick:function(){w.Z.trackEvent(null,{id:7682,action:"Click"}),i&&i(e)},children:"选择"})]},e.id)}))})},Be=n(23e3),Pe=function(e){var t=e.shown,n=e.hasShown,o=e.children,r=(0,_.useRef)(n),i=(0,_.useRef)(t);return(0,_.useEffect)((function(){!t&&i.current&&(r.current=!0),i.current=t}),[t]),t&&!r.current&&o},ke=function(e){var t=e.className,n=e.shown,o=e.hasShown,r=e.inviters,i=e.onConfirm,a=e.onCancel,c=(0,u.Z)((0,_.useState)(n),2),s=c[0],l=c[1],d=(0,_.useRef)(n);return(0,_.useEffect)((function(){d.current!==n&&l(n),d.current=n}),[n]),(null==r?void 0:r.length)>0&&(0,h.tZ)(Pe,{shown:s,hasShown:o,children:(0,h.BX)(I.Flex,{className:t,pb:"12px",px:"16px",mx:"-20px",mb:"16px",color:"GBK05A",justifyContent:"space-between",alignItems:"center",sx:{borderBottom:"1px solid",borderColor:"GBK09A",fontSize:"15px",lineHeight:"20px",position:"relative",zIndex:"0"},children:[(0,h.BX)(I.Flex,{alignItems:"center",children:[r.map((function(e,t){return(0,h.tZ)(I.Image,{src:r[t].avatarUrl,size:24,sx:{borderRadius:"50%",border:"2px solid",borderColor:"GBK99A",position:"relative",zIndex:r.length-t,marginLeft:t?"-14px":"0"}},e.id)})),(0,h.tZ)(I.Text,{ml:"8px",children:r[0].name+(r.length>1?"等 ".concat(r.length," 人"):"")}),"邀请你回答"]}),(0,h.BX)(I.Flex,{alignItems:"center",children:[(0,h.tZ)(I.Text,{color:"primary",ml:"16px",css:{cursor:"pointer"},onClick:function(){w.Z.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===r.length?"0":"1"}]},{button:{text:"添加谢邀"}}),i&&i(r)},children:"添加谢邀"}),(0,h.tZ)(I.Text,{ml:"16px",css:{cursor:"pointer"},onClick:function(){l(!1),w.Z.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===r.length?"0":"1"}]},{button:{text:"忽略"}}),a&&a()},children:"忽略"})]})]})})},xe=(0,_.forwardRef)((function(e,t){var n=e.getAllInviters,o=e.inviterQuery,r=e.getStore,i=e.syncDraftImmediately,a=(0,_.useContext)(Ne.j),c=a.updateFormData,s=(0,a.getFormData)().thankInviterInfo,l=(0,u.Z)((0,_.useState)(!1),2),d=l[0],p=l[1],f=function(e){c({thankInviterInfo:e}),requestAnimationFrame((function(){i()}))},m=(0,u.Z)((0,_.useState)(null),2),v=m[0],Z=m[1],g=(0,be.Z)((function(){return p(!1)}));return(0,_.useImperativeHandle)(t,(function(){return{openInviterListModal:function(){return p(!0)},getInvitersData:function(){return v},getThankInviterInfo:function(){return s}}}),[v,s]),(0,_.useEffect)((function(){n().then((function(e){var t=e.payload;Z(t.data);var n=r();n.setEditorState(n.getEditorState())}))}),[]),(0,h.BX)(h.HY,{children:[s&&(0,h.tZ)(Be.Z,{css:{marginBottom:16,marginTop:"4px !important"},showDeleteButton:!0,item:{isLabeled:!0},inviter:s,onDelete:function(){f(null)}}),(null==v?void 0:v.length)>0&&(0,h.tZ)(ke,{hasShown:Boolean(o)||Boolean(s),shown:!s,inviters:v,onConfirm:function(e){(null==e?void 0:e.length)&&(1!==e.length?p(!0):f(e[0]))}}),(0,h.tZ)(De,{onClose:g,shown:d,allInviters:v,onChoose:function(e){f(e),g()}})]})})),Le=function(e){var t=e.getShouldShowToolbarButton,n=e.getAllInviters,o=e.inviterQuery,r=e.getInitialThankInviterInfo,i=e.syncDraftImmediately,a={},c=(0,_.createRef)(null);return{initialize:function(e){Object.assign(a,e)},componentsBeforeEditor:[{component:(0,h.tZ)(xe,{getAllInviters:n,inviterQuery:o,ref:c,getStore:function(){return a},getInitialThankInviterInfo:r,syncDraftImmediately:i}),priority:0}],toolbar:{label:"添加谢邀",section:we.Z.CUSTOM_MAIN,priority:3,icon:Ie.E,onClick:function(){c.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null===(t=null===(e=c.current)||void 0===e?void 0:e.getInvitersData())||void 0===t?void 0:t.length)||(null===(n=c.current)||void 0===n?void 0:n.getThankInviterInfo()))}},toolbarV2:{label:"添加谢邀",section:Re.Z.BUSINESS_MEDIA,text:"谢邀",icon:Ie.E,priority:3,onClick:function(){c.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null===(t=null===(e=c.current)||void 0===e?void 0:e.getInvitersData())||void 0===t?void 0:t.length)||(null===(n=c.current)||void 0===n?void 0:n.getThankInviterInfo()))}}}},Ue=n(54598),Fe=n(70311),Me=function(e){var t=e.canSubmit,n=e.handleSubmit,o=e.isReediting,r=e.scheduledPublishAt,i=e.className;return(0,h.tZ)(R.$U,{as:G.ZP,zaText:!0,zaType:"Button",zaAction:"Answer",zaModuleId:"published_button",extra:{configMap:{traceId:(0,W.OP)(),type:"Answer",publish_type:o?"oldEdit":"newPublish"}},width:86,height:34,lineHeight:"34px",textAlign:"center",fontSize:14,color:G.rp.Blue,preset:G.EE.Primary,css:{borderRadius:3,cursor:t?"pointer":"not-allowed",opacity:t?1:.3},onClick:n,className:i,children:o?"提交修改":r?"定时发送":"发布回答"})};var Ge=n(60111),ze=n(67306),He=n(76224),qe=n(26654),Ve=n(23323),Xe=n(70175),We=function(e){(0,a.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).handleToggleAnonymousConfirm=function(){var t=e.props,n=t.question.id,o=t.updateQuestionAnonymous;(0,t.onClose)(),o(n)},e}var o=n.prototype;return o.componentDidMount=function(){this.props.fillCurrentUserIfNeeded(["mcn_user_info"])},o.render=function(){var e=this.props,t=e.onClose,n=e.question,o=e.shown,r=e.isMCNUser,i=n.relationship.isAnonymous;return(0,h.tZ)(O.Z,{title:i?"确认取消匿名身份？":"启用匿名后",onClose:t,size:Xe.Z.isMobileEntry?"small":"default",children:o&&(0,h.BX)("div",{children:[i?(0,h.tZ)("div",{className:"Anonymous-confirm",children:(0,h.tZ)("p",{children:"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。"})}):(0,h.tZ)("div",{className:"Anonymous-confirm",children:(0,h.BX)("ul",{children:[(0,h.tZ)("li",{children:"提问、回答、赞同、关注会显示为匿名"}),(0,h.tZ)("li",{children:"支持匿名邀请别人回答问题"}),(0,h.tZ)("li",{children:"不能将回答同步到圈子"}),(0,h.tZ)("li",{children:"除提问者本人，不能匿名编辑问题"}),(0,h.tZ)("li",{children:"匿名身份不能使用视频功能"}),(0,h.tZ)("li",{children:"不能被视频引用和联合创作"}),(0,h.tZ)("li",{children:"启用匿名将自动取消所有已获得的「专业认可」"}),(0,h.tZ)("li",{children:"匿名身份不能参与芝士任务"}),r&&(0,h.tZ)("li",{children:"不能使用商品信息发布功能"})]})}),(0,h.BX)(O.w,{direction:"horizontal",children:[(0,h.tZ)(G.ZP,{onClick:t,color:"grey",children:"取消"}),(0,h.tZ)(G.ZP,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm,children:"确认"})]})]})})},n}(_.Component);We.propTypes={question:A().object.isRequired};var Ke=(0,y.connect)((function(e){var t,n=(0,se.ib)(e);return{isMCNUser:2===(null==n||null===(t=n.mcnUserInfo)||void 0===t?void 0:t.status)}}),{updateQuestionAnonymous:fe.po,fillCurrentUserIfNeeded:se.sF})(We),je="匿名设置",Ye=function(e){var t=e.question,n=e.isAnonymous,o=e.disabled,r=e.getAnswerFormRef,i=(0,u.Z)((0,Ve.Z)(!1),2),a=i[0],c=i[1],s=(0,y.useDispatch)(),l=(0,be.Z)((function(){var e=r();if(null==e?void 0:e.current)if(e.current.hasVideo())s((0,he.c0)("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red"));else{if(!e.current.hasMCNLinkCard())return e.current.hasADLinkCard()?e.current.hasFeeConsultCard()?s((0,he.c0)("不能使用匿名身份插入付费咨询卡片","red")):void s((0,he.c0)("不能使用匿名身份插入推荐卡片","red")):void c.on();s((0,he.c0)("不能使用匿名身份推荐商品","red"))}}));return(0,h.BX)(I.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[(0,h.BX)(I.Flex,{height:"38px",children:[(0,h.tZ)(X.KT,{checked:!n,text:"不启用匿名",onChange:l,id:"PublishPanel-Anonymous-0",disabled:o,shouldTrackClick:!0,zaTextPrefix:je}),(0,h.tZ)(X.KT,{checked:n,text:"启用匿名",onChange:l,id:"PublishPanel-Anonymous-1",disabled:o,shouldTrackClick:!0,zaTextPrefix:je})]}),(0,h.tZ)(Ke,{question:t,shown:a,onClose:c.off})]})},Qe=function(e){var t=(0,(0,_.useContext)(Ne.j).getFormData)(),n=t.isReport,o=t.commercialZhitaskBindInfo;return(0,h.BX)(I.Flex,{py:"11px",children:[(0,h.tZ)(X.gN,{name:je}),(0,h.tZ)(Ye,(0,c.Z)({disabled:Boolean(n)||Boolean(o)},e))]})},Je={type:"none",description:"无声明"},$e=function(e){var t=e.reshipmentDisclaimers,n=e.setReshipmentDisclaimers,o=e.disclaimers,r=(0,R.Q4)().trackEvent;return t=t||Je,(o=JSON.parse(JSON.stringify(o||[]))).push(Je),(0,h.tZ)(X.Qr,{onChange:function(e){var t=o.find((function(t){return t.type===e}));r({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"创作声明-".concat(t.description)}}),t&&n(t)},value:t.type,children:o.map((function(e){return(0,h.tZ)(X.o3,{value:e.type,text:e.description},e.type)}))})},et=(0,_.forwardRef)((function(e,t){return(0,h.BX)(I.Flex,{py:"11px",children:[(0,h.tZ)(X.gN,{name:"创作声明",helper:(0,h.BX)(h.HY,{children:[(0,h.tZ)("p",{children:"「创作声明」是为自己创作的添加个人声明的工具。当你在创作特定内容（如内容存在虚构或剧透等情节）时，可设置创作声明，该声明将会展示在回答或文章开头。"}),(0,h.tZ)("p",{children:"创作声明表达的是创作者对内容负责的态度。知乎鼓励创作者设置创作声明，以方便知友更好地辨识和理解内容信息。你也可以在编辑内容时，关闭创作声明。"})]})}),(0,h.tZ)(I.Box,{flex:"1",children:(0,h.tZ)($e,(0,s.Z)((0,c.Z)({},e),{ref:t}))})]})})),tt=function(e){var t=e.question,n=e.updateDraftSettings,o=(0,_.useContext)(Ne.j),r=o.getFormData,i=o.updateFormData,a=(0,y.useDispatch)(),c=(0,y.useSelector)((function(e){return e.question.disclaimers[t.id]})),s=r().disclaimerType,u=(null==c?void 0:c.find((function(e){return e.type===s})))||Je,l=(null==c?void 0:c.length)>0;(0,Ge.Z)((function(){c||a((0,fe.J_)(t.id))}));var d=(0,be.Z)((function(e){i({isDisclaimerChecked:"none"!==e.type,disclaimerType:e.type}),requestAnimationFrame(n)}));return l?(0,h.tZ)(et,{reshipmentDisclaimers:u,setReshipmentDisclaimers:d,disclaimers:c}):null},nt=n(31228),ot=n(53436),rt=n(81144),it="定时发布",at=function(e){var t=e.scheduledPublishAt,n=e.initialScheduledPublishAt,o=e.setUseScheduledPublish,r=Boolean(t),i=function(e){o(e)};return(0,h.BX)(I.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[(0,h.BX)(I.Flex,{height:"38px",children:[(0,h.tZ)(X.KT,{checked:!r,text:"不使用定时发布",onChange:function(){return i(!1)},id:"PublishPanel-scheduleLabel-0",shouldTrackClick:!0,zaTextPrefix:it}),(0,h.tZ)(X.KT,{checked:r,text:"使用定时发布",onChange:function(){i(!0),requestAnimationFrame((function(){(0,ot.yZ)(window,{top:50,behavior:"smooth"})}))},id:"PublishPanel-scheduleLabel-1",shouldTrackClick:!0,zaTextPrefix:it})]}),r&&n&&(0,h.tZ)(rt.Z,{value:t,min:n,max:nt.Z(n,7),onChange:function(e){o(!0,e)},css:function(e){return{color:e.colors.GBL05A,fontSize:"14px",marginTop:"5px",".InputButton":{height:"38px"}}}})]})},ct=function(e){return(0,h.BX)(I.Flex,{py:"11px",children:[(0,h.tZ)(X.gN,{name:it}),(0,h.tZ)(at,(0,c.Z)({},e))]})},st="推送给关注者",ut=function(e){var t=e.disabled,n=e.updateDraftSettings,o=(0,_.useContext)(Ne.j),r=o.updateFormData,i=(0,o.getFormData)().pushActivity,a=function(e){r({pushActivity:e}),requestAnimationFrame(n)};return(0,h.tZ)(I.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:(0,h.BX)(I.Flex,{height:"38px",children:[(0,h.tZ)(X.KT,{checked:i,text:"开启推送",onChange:function(){a(!0)},id:"PublishPanel-PushToFollowers-0",disabled:t,shouldTrackClick:!0,zaTextPrefix:st}),(0,h.tZ)(X.KT,{checked:!i,text:"关闭推送",onChange:function(){B.Z.confirm("设置后，关注你的其他用户将无法在「首页 - 关注」阅读这篇回答",{title:"关闭推送给关注者吗",text:{ok:"关闭推送"}}).then((function(){a(!1)})).catch((function(){}))},id:"PublishPanel-PushToFollowers-1",disabled:t,shouldTrackClick:!0,zaTextPrefix:st})]})})},lt=function(e){return(0,h.BX)(I.Flex,{py:"11px",children:[(0,h.tZ)(X.gN,{name:st}),(0,h.tZ)(ut,(0,c.Z)({},e))]})},dt=n(49533),pt=n(83329),ht=n(91355);var ft=function(e){(0,a.Z)(n,e);var t=(0,p.Z)(n);function n(e){var o;(0,r.Z)(this,n),(o=t.call(this,e)).onChangeInputType=function(e){o.setState({checked:e.target.checked})},o.onChangeInputValue=function(e){o.setState({text:e.target.value})},o.submit=function(){var e=o.state.text;o.props.submitRewardText(e)};var i,a=e.tagline;return o.state={text:(i=a,i.replace(/^「/,"").replace(/」$/,"")||ht.Sp),checked:!0},o}return n.prototype.render=function(){var e=this.props,t=e.onClose,n=e.edit,o=this.state,r=o.text,i=o.checked;return(0,h.BX)(O.Z,{onClose:t,className:"RewardForm-rewardModal",children:[(0,h.tZ)("p",{className:"RewardForm-rewardTitle",children:n?"编辑赞赏描述":"开启赞赏"}),(0,h.tZ)(pt.Z,{className:"RewardForm-rewardInput",maxLength:"20",type:"text",value:r,onChange:this.onChangeInputValue,disabled:!0}),(0,h.BX)("div",{className:"RewardForm-remark",children:[!n&&(0,h.BX)("label",{className:"RewardForm-protocol",children:[(0,h.tZ)(dt.C,{className:"RewardForm-rewardCheckbox",onChange:this.onChangeInputType,checked:i,size:16}),"我已同意",(0,h.tZ)("a",{className:"RewardForm-rewardLink",href:"/terms/tipjar",children:"《知乎赞赏功能使用协议》"})]}),(0,h.tZ)("p",{className:"RewardForm-prompting",children:"暂不支持修改赞赏文案"})]}),(0,h.tZ)(G.ZP,{className:g()("RewardForm-rewardSubmit",{"RewardForm-rewardSubmit-disabled":!i}),onClick:this.submit,disabled:!i,children:"确定"})]})},n}(_.Component);ft.propTypes={onClose:A().func,submitRewardText:A().func,edit:A().bool,tagline:A().string},ft.defaultProps={tagline:ht.Sp};var mt=n(64833),vt=n(33855),Zt="赞赏设置",gt=function(e){var t=e.question.id,n=e.isAnonymous,o=e.disabled,r=e.updateDraftSettings,i=(0,u.Z)((0,Ve.Z)(!1),2),a=i[0],c=i[1],s=(0,_.useContext)(Ne.j),l=s.getFormData,d=s.updateFormData,p=(0,y.useDispatch)(),f=l().rewardTagline,m=Boolean(f),v=(0,be.Z)((function(e){d({rewardTagline:e}),requestAnimationFrame(r),p((0,mt.$j)(t,!0)),c.off()}));return(0,h.BX)(I.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[(0,h.BX)(I.Flex,{height:"38px",children:[(0,h.tZ)(X.KT,{checked:m,text:"开启赞赏",onChange:function(){n?p((0,he.c0)("匿名回答无法开启赞赏，请先取消匿名","red")):c.on()},id:"PublishPanel-RewardSetting-0",disabled:o,shouldTrackClick:!0,zaTextPrefix:Zt}),(0,h.tZ)(X.KT,{checked:!m,text:"关闭赞赏",onChange:function(){d({rewardTagline:""}),requestAnimationFrame(r),p((0,mt.$j)(t,!1))},id:"PublishPanel-RewardSetting-1",disabled:o,shouldTrackClick:!0,zaTextPrefix:Zt})]}),a&&(0,h.tZ)(ft,{submitRewardText:v,onClose:c.off,tagline:f,edit:!1})]})},Et=function(e){var t=(0,y.useDispatch)(),n=(0,y.useSelector)((function(e){return e.switches})).isAnswerRewardable;return(0,_.useEffect)((function(){void 0===n&&t((0,vt.X2)(["isAnswerRewardable"]))}),[t,n]),n?(0,h.BX)(I.Flex,{py:"11px",children:[(0,h.tZ)(X.gN,{name:Zt}),(0,h.tZ)(gt,(0,c.Z)({},e))]}):null},Tt={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Ct=function(e){var t=e.currentUser,n=e.updateDraftSettings,o=(0,R.Q4)().trackEvent,r=(0,_.useContext)(Ne.j),i=r.updateFormData,a=(0,r.getFormData)().reshipmentSettings;return(0,h.tZ)(X.Qr,{onChange:function(e){o({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"转载设置-".concat(Tt[e])}}),"need_payment"!==e||t.caEnabled||window.open("/copyright/invite"),i({reshipmentSettings:e}),requestAnimationFrame(n)},value:a,children:Object.keys(Tt).map((function(e){return"need_payment"===e&&t.isOrg?null:(0,h.tZ)(X.o3,{value:e,text:Tt[e]},e)}))})},At=(0,_.forwardRef)((function(e,t){return(0,h.BX)(I.Flex,{py:"11px",children:[(0,h.tZ)(X.gN,{name:"转载设置"}),(0,h.tZ)(I.Box,{flex:"1",children:(0,h.tZ)(Ct,(0,s.Z)((0,c.Z)({},e),{ref:t}))})]})})),_t=n(54048),yt=n(15703),St=function(e){var t=e.updateDraftSettings,n=(0,y.useDispatch)(),o=(0,R.Q4)().trackEvent,r=(0,_.useContext)(Ne.j),i=r.updateFormData,a=(0,r.getFormData)().commentPermission,c=(0,y.useSelector)((function(e){var t;return null===(t=e.commentPermission.answer)||void 0===t?void 0:t.default}))||[];(0,_.useEffect)((function(){n((0,yt.I6)("answer"))}),[n]),(0,_.useEffect)((function(){a!==_t.sO||(0,_t.M1)()||(0,_t.UJ)()}),[a]);return(0,h.tZ)(X.Qr,{onChange:function(e){var n=c.find((function(t){return t.permission===e})).text;o({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"评论权限-".concat(n)}}),e!==a&&(i({commentPermission:e}),requestAnimationFrame(t))},value:a,children:c.map((function(e){var t=e.permission,n=e.text,o=e.disable;return t!==_t.sO||a===t||(0,_t.M1)()?(0,h.tZ)(X.o3,{value:t,text:n,disabled:o},t):null}))})},It=(0,_.forwardRef)((function(e,t){return(0,h.BX)(I.Flex,{py:"11px",children:[(0,h.tZ)(X.gN,{name:"评论权限"}),(0,h.tZ)(I.Box,{flex:"1",children:(0,h.tZ)(St,(0,s.Z)((0,c.Z)({},e),{ref:t}))})]})})),bt=n(11116),wt=n(90041),Rt=n(93642),Nt=n(78724),Ot=n(90837),Dt=n(96531),Bt=n(64068),Pt=n(89091),kt=n(3090),xt=n(80150),Lt=function(e){var t=e.onClick,n=e.text,o=(0,Nt.Z)(e,["onClick","text"]);return(0,h.BX)(G.ZP,(0,s.Z)((0,c.Z)({preset:"link",onClick:t,css:{fontSize:15}},o),{children:[(0,h.tZ)(wt.E,{text:!0,center:!0})," ",n]}))};Lt.defaultProps={text:"修改"};var Ut=Lt,Ft=function(e){(0,a.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).state={value:null},e.handleModify=function(){e.setState({modifying:!0})},e.handleChange=function(t){e.setState({value:t.target.value})},e.handleCancel=function(){e.setState({value:null,modifying:!1})},e.handleSubmit=function(t){t.preventDefault(),e.props.onBioChange(e.state.value),e.handleCancel()},e.handleSelect=function(){e.props.onSelect(e.props.value)},e}return n.prototype.render=function(){var e=this.props,t=e.user,n=e.bio,o=e.title,r=e.checked,i=e.rich,a=this.state,c=a.modifying,s=a.value;return c?(0,h.BX)("div",{className:"TopicBioItem",children:[(0,h.tZ)("div",{className:"TopicBioItem-title",children:o}),(0,h.BX)("form",{onSubmit:this.handleSubmit,children:[(0,h.tZ)("div",{className:"TopicBioItem-inner",children:(0,h.tZ)(Oe.Z,{className:"TopicBioItem-authorInfo",noLink:!0,author:t,children:(0,h.tZ)(pt.Z,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:o,autoFocus:!0})})}),(0,h.BX)("div",{className:"TopicBioItem-inputFooter",children:[(0,h.tZ)(xt.Z,{current:s?s.length:0,max:40}),(0,h.BX)("div",{className:"TopicBioItem-actions",children:[(0,h.tZ)(G.ZP,{preset:"plain",type:"reset",onClick:this.handleCancel,children:"取消"}),(0,h.tZ)(G.ZP,{preset:"primary",color:"blue",type:"submit",children:"保存"})]})]})]})]}):n?(0,h.BX)("div",{className:"TopicBioItem",children:[(0,h.tZ)("div",{className:"TopicBioItem-title",children:o}),(0,h.tZ)(Pt.Z,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:r,children:(0,h.tZ)(Oe.Z,{noLink:!0,author:t,className:"TopicBioItem-authorInfo",children:(0,h.BX)("div",{children:[i?(0,h.tZ)(Rt.Z,{inline:!0,className:"TopicBioItem-bio",html:n}):(0,h.tZ)("span",{className:"TopicBioItem-bio",children:n}),(0,h.tZ)(Ut,{className:"TopicBioItem-modifyButton",onClick:this.handleModify})]})})})]}):(0,h.tZ)("div",{className:"TopicBioItem",children:(0,h.BX)(G.ZP,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify,children:[(0,h.tZ)(kt.nY,{text:!0,center:!0})," 添加",o]})})},n}(_.Component);Ft.propTypes={user:A().object.isRequired,title:A().node.isRequired,value:A().object.isRequired,onBioChange:A().func.isRequired,onSelect:A().func.isRequired,checked:A().bool.isRequired};var Mt=Ft,Gt=function(e,t){var n=e.type,o=e.topic,r=(void 0===o?{}:o).id,i=t.type,a=t.topic,c=(void 0===a?{}:a).id;return n===i&&r===c},zt=function(e){(0,a.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).state={value:null},e.handleSelect=function(t){return e.setState({value:t})},e.handleChoose=function(){return e.props.onBioChoose(e.state.value)},e}return n.prototype.render=function(){var e=this;if(this.props.isFetching)return(0,h.tZ)("div",{className:"TopicBios-loading",children:(0,h.tZ)(Bt.Z,{})});var t=this.props,n=t.user,o=t.question.topics,r=t.bios,i=t.currentBio,a=t.onHeadlineUpdate,u=t.onBioUpdate,l=this.state.value||i,d={type:"headline"};return(0,h.BX)("div",{children:[(0,h.BX)("div",{className:"TopicBioItems",children:[(0,h.tZ)(Mt,{title:"一句话介绍",user:n,bio:n.headline,value:d,onBioChange:a,onSelect:this.handleSelect,checked:Gt(l,d),rich:!0}),o.map((function(t){var o={type:"topic",topic:{id:t.id}};return(0,h.tZ)(Mt,(0,s.Z)((0,c.Z)({title:"在 ".concat(t.name," 话题下的话题经验"),user:n},function(e,t){return e.find((function(e){return e.topic.id===t}))}(r,t.id)),{value:o,onBioChange:function(e){return u(t.id,e)},onSelect:e.handleSelect,checked:Gt(l,o)}),t.id)}))]}),(0,h.tZ)(Ze.w,{children:(0,h.tZ)(G.ZP,{color:"blue",preset:"primary",onClick:this.handleChoose,children:"完成"})})]})},n}(_.Component);zt.propTypes={onHeadlineUpdate:A().func.isRequired,onBioUpdate:A().func.isRequired,onBioChoose:A().func.isRequired,question:A().object.isRequired,user:A().object.isRequired};var Ht=zt;var qt=function(e){(0,a.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).handleUpdateHeadline=function(t){e.props.updateProfile(null,{headline:t})},e.handleUpdateBio=function(t,n){e.props.updateBio(t,n)},e.handleBioChoose=function(t){t&&e.props.chooseBio(e.props.question.id,t),e.props.onClose()},e}var o=n.prototype;return o.componentDidMount=function(){this.props.loadBios(this.props.question.id)},o.render=function(){return(0,h.tZ)(Ht,(0,c.Z)({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))},n}(_.Component);qt.propTypes={question:A().object.isRequired};var Vt=(0,y.connect)((function(e,t){var n=e.currentUser,o=e.question.bio,r=e.entities,i=r.questions,a=r.users,c=e.topic.bios,s=t.question.id,u=i[s],l=(o[s]||{result:{type:"headline"}}).result;return{isFetching:c.isFetching,currentBio:{type:l.type,topic:l.topic},bios:u.topics.map((function(e){return{topic:e,bio:c[e.id]}})),question:u,user:a[n]}}),{updateProfile:Ot.ck,updateBio:Dt.rl,chooseBio:fe.vL,loadBios:fe.uF})(qt),Xt=function(e){(0,a.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.shown,n=e.onClose,o=(0,Nt.Z)(e,["shown","onClose"]);return(0,h.tZ)(Ze.Z,{title:"编辑话题经验",subtitle:(0,h.BX)("span",{children:["可以填写你从事的职业、取得的资格或过往经历，",(0,h.tZ)("br",{}),"让你在这个问题下的回答更具说服力。"]}),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1,children:t&&(0,h.tZ)(Vt,(0,s.Z)((0,c.Z)({},o),{onClose:n}))})},n}(_.Component);Xt.propTypes=(0,c.Z)({shown:A().bool.isRequired,onClose:A().func.isRequired},Vt.propTypes);var Wt=Xt,Kt=function(e){var t=e.children;return"string"!=typeof t||t.trim().length?(0,h.tZ)(I.Text,{maxWidth:"292px",mr:"20px",css:[(0,bt.S)(1)],children:t}):null},jt=function(e){var t=e.questionId,n=e.currentUser,o=(0,y.useSelector)((function(e){return e.question.bio})),r=(0,y.useSelector)((function(e){return e.topic.bios})),i=(o[t]||{result:{type:"headline"}}).result;return"topic"===i.type&&(i.bio=r[i.topic.id]||i.bio),i.bio&&"headline"!==i.type?(0,h.tZ)(Kt,{children:i.bio}):n.headline?(0,h.tZ)(Kt,{children:(0,h.tZ)(Rt.Z,{inline:!0,html:(i||{}).bio||n.headline})}):null},Yt=function(e){var t=e.question,n=e.currentUser,o=(0,u.Z)((0,Ve.Z)(!1),2),r=o[0],i=o[1];return(0,h.BX)(I.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[(0,h.BX)(I.Flex,{alignItems:"center",height:"100%",css:{cursor:"pointer"},onClick:i.on,children:[(0,h.tZ)(jt,{questionId:t.id,currentUser:n}),(0,h.BX)(R.$U,{as:I.Flex,zaType:"Button",zaText:"一句话介绍-修改",color:"GBL01A",alignItems:"center",children:["修改",(0,h.tZ)(wt.E,{css:{marginLeft:"2px"},size:16})]})]}),(0,h.tZ)(Wt,{shown:r,question:t,onClose:i.off})]})},Qt=function(e){return(0,h.BX)(I.Flex,{py:"11px",children:[(0,h.tZ)(X.gN,{name:"一句话介绍"}),(0,h.tZ)(Yt,(0,c.Z)({},e))]})},Jt=n(20224),$t=n(90674),en=n(88158),tn=n(32671),nn=function(e){var t,n,o=e.answer,r=(0,y.useDispatch)(),i=(0,ve.kE)(),a=null==o||null===(t=o.attachment)||void 0===t||null===(n=t.video)||void 0===n?void 0:n.campaign,c=Boolean(!(null==a?void 0:a.title)),s=(0,u.Z)((0,Ve.Z)(!1),2),l=s[0],d=s[1],p=(0,u.Z)((0,_.useState)([]),2),f=p[0],m=p[1];(0,Ge.Z)((function(){r((0,tn.qA)()).then((function(e){var t=e.payload;m((null==t?void 0:t.data)||[])}))}));var v=(0,be.Z)((function(e){d.off(),r((0,ve.jP)(e))})),Z=(0,be.Z)((function(){r((0,ve.jP)(null))})),g=c?"GBL01A":"GBL05A";return(0,h.BX)(I.Flex,{color:"GBL05A",flex:"1",alignItems:"center",css:{fontSize:"14px"},children:[(null==i?void 0:i.title)?(0,h.BX)(I.Flex,{alignItems:"center",px:"14px",height:"30px",color:g,css:function(e){return{borderRadius:"20px",background:e.colorMod(e.colors[g]).alpha(.1),cursor:"pointer"}},onClick:function(){c&&d.on()},children:[(0,h.tZ)(Jt.d,{mr:4,size:20}),i.title,c&&(0,h.tZ)($t.HN,{text:!0,center:!0,size:6,css:{marginLeft:4},onClick:function(e){Z(),e.stopPropagation()}})]}):(0,h.BX)(R.$U,{as:I.Flex,zaType:"Button",zaText:"绑定活动-选择活动",height:"100%",alignItems:"center",color:"GBL01A",css:{cursor:c?"pointer":"not-allowed"},onClick:function(){c&&d.on()},children:[(0,h.tZ)(Jt.d,{mr:4,size:20}),"选择活动"]}),Boolean(null==f?void 0:f.length)&&(0,h.tZ)(en.Z,{shown:l,onClose:d.off,defaultCampaignId:null==i?void 0:i.id,campaignList:f,onSubmit:v})]})},on=function(e){return(0,h.BX)(I.Flex,{py:"11px",children:[(0,h.tZ)(X.gN,{name:"绑定活动"}),(0,h.tZ)(nn,(0,c.Z)({},e))]})},rn=(0,S.withRouter)((function(e){var t,n=e.question,o=e.answer,r=e.isVideoAnswer,i=e.isReediting,a=e.location,s=e.scheduledPublishAt,l=e.initialScheduledPublishAt,d=e.canScheduledPublish,p=e.setUseScheduledPublish,f=e.className,m=e.updateDraftSettings,v=e.getAnswerFormRef,Z=e.getInitialEnableMarkdown,g=(0,y.useDispatch)(),E=(0,_.useContext)(Ne.j).updateFormData,T=((null==a?void 0:a.query)||{}).push_activity,C=(0,y.useSelector)(se.ib),A=(0,u.Z)((0,_.useState)(!1),2),S=A[0],b=A[1];(0,Ge.Z)((function(){Promise.all([g((0,ze.Gl)()),g((0,ze.PW)(n.id)),o&&g((0,ae.ri)(o.id))].filter(Boolean)).then((function(e){var t,n,r,i,a,s=(0,u.Z)(e,3),l=s[0],d=s[1],p=s[2];E((0,c.Z)({},(0,He.Tq)(null===(t=l.payload)||void 0===t?void 0:t.settings),o&&p&&(0,c.Z)({},(0,He.vi)(p.payload),function(e){var t;return{rewardTagline:(null==e||null===(t=e.rewardInfo)||void 0===t?void 0:t.tagline)||""}}(o),function(e){var t,n,o,r,i="open"===(null==e||null===(t=e.disclaimerInfo)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.status);return{isDisclaimerChecked:i,disclaimerType:i?null==e||null===(o=e.disclaimerInfo)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.type:"none"}}(p.payload),function(e){var t;return(null==e||null===(t=e.thankInviterInfo)||void 0===t?void 0:t.member)?{thankInviterInfo:e.thankInviterInfo.member}:null}(p.payload),function(e){var t;return e?{tableOfContentsEnabled:null==e||null===(t=e.tableOfContents)||void 0===t?void 0:t.enabled}:null}(null==o?void 0:o.settings),(0,He.t8)(o)),(0,He.p4)(null===(n=d.payload)||void 0===n?void 0:n.settings),T&&{pushActivity:Boolean(Number(T))})),Z(null===(a=null===(r=l.payload)||void 0===r||null===(i=r.commonSettings)||void 0===i?void 0:i.markdownEnabled)||void 0===a||a)})).finally((function(){b(!0)}))}));var w=null==n||null===(t=n.relationship)||void 0===t?void 0:t.isAnonymous,R=(n||{}).questionType,N=C&&!C.isOrg,O=N&&("normal"===R||w)&&!r;return r&&i?null:S?(0,h.BX)(I.Box,{pl:"10px",pr:"20px",width:"100%",bg:"GBK99A",css:{position:"relative"},className:f,children:[(0,h.tZ)(I.Box,{sx:{borderTop:"1px solid",borderColor:"GBK09A"},ml:"10px"}),(0,h.tZ)(I.Text,{color:"GBK03A",ml:"10px",pt:"24px",pb:"12px",css:{lineHeight:"24px",fontSize:"17px",fontWeight:"500"},children:"发布设置"}),O&&!i&&(0,h.tZ)(Qe,{question:n,isAnonymous:w,getAnswerFormRef:v}),!r&&(0,h.tZ)(tt,{question:n,updateDraftSettings:m}),(0,h.tZ)(qe.Z,{type:"answer",questionId:null==n?void 0:n.id,answerId:null==o?void 0:o.id,taskBindProps:{isAnonymous:w,isVideoAnswer:r},reportProps:{isAnonymous:w,updateDraftSettings:m}}),d&&(0,h.tZ)(ct,{scheduledPublishAt:s,initialScheduledPublishAt:l,setUseScheduledPublish:p}),r&&(0,h.tZ)(on,{answer:o}),!i&&N&&(0,h.tZ)(Qt,{question:n,currentUser:C}),!i&&(0,h.tZ)(At,{currentUser:C,updateDraftSettings:m}),!i&&(0,h.tZ)(It,{updateDraftSettings:m}),!i&&!r&&(0,h.tZ)(lt,{updateDraftSettings:m}),(0,h.tZ)(Et,{question:n,isAnonymous:w,updateDraftSettings:m})]}):null})),an=n.p+"assets/logo.e049e9b9.png",cn=n(75724),sn={editableInit:"Editable.Init",editableEdit:"Editable.Edit",draftLoad:"DraftLoad",draftSave:"DraftSave",addAnswer:"AddAnswer"},un=function(e,t){var n=e.isToolbarSticky,o=e.isFullscreen,r=e.toolbarMenuAttention,i=e.scheduledPublishAt,a=e.initialScheduledPublishAt,c=e.placeholder,s=e.draft,u=e.defaultValue,l=e.isLegacyVideoAnswer,d=e.defaultVideo,p=e.question,f=e.videoAnswerEditable,m=e.videoAnswerPublished,v=e.editableReady,Z=e.handleChangeContent,E=e.handleAfterChangeContent,T=e.handleFocusWithAuth,C=e.handleSelectText,A=e.handleSubmit,y=e.handleError,S=e.handleLoadStart,I=e.handleLoadEnd,b=e.handleUploadStart,N=e.handleUploadEnd,O=e.handleUploadError,D=e.handleBeforeVideoUpload,B=e.handleMCNLinkCardEdit,k=e.isVideoAnswer,x=e.handleInsertZVideo,L=e.getToolbarSidePlugins,U=e.getToolbarMenuPlugins,F=e.createEditorPlugins,M=e.getEditorBeforePlugins,G=e.setUseScheduledPublish,z=e.allowToolbar,H=void 0===z||z,q=e.onAnyChange,V=e.docPluginProps,X=e.tableOfContentsEnabled,W=e.getMarkdownEnabled,K=e.videoSource,j=(0,_.useRef)(null);return(0,h.tZ)(Fe.vB,{name:sn.editableEdit,children:(0,h.tZ)(R.eV,{block:o?"FullScreen":"",children:(0,h.tZ)(cn.Z,{className:g()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:n}),ref:t,hideImageToolbar:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:H,allowUploadDocument:!0,allowVideoTitleChange:!k,allowReference:!0,allowImageEditor:!0,allowZVideo:!k,allowTable:!k,allowCatalog:!k,catalogEnabled:X,useCatalogV2:!0,stickyOffset:117,allowHeaderThree:!1,allowToolbarSticky:!o,toolbarStickyOffset:ht.BR,onInsertZVideo:x,getToolbarSidePlugins:L,getToolbarMenuPlugins:U,getEditorBeforePlugins:M,toolbarMenuAttention:r,createEditorPlugins:F,toolbarProps:{menuCallout:i&&a&&(0,h.BX)(P.LU,{className:"AnswerForm-scheduledPublishCallout",onClose:function(){G(!1),w.Z.trackEvent(t,{action:"Click",id:5734,name:"回答"})},children:["发布时间：",(0,h.tZ)(rt.Z,{onRef:j,value:a,min:a,max:nt.Z(a,7),onChange:function(e,t){G(!0,e),w.Z.setModule(j.current,{module:"Unknown",module_name:t.date?"日期":t.hours?"小时":t.minutes?"分钟":void 0}),w.Z.trackEvent(j.current,{action:"Click",id:5731,name:"回答"})}}),(0,h.BX)("a",{href:"/draft?type=answer&filter=schedule",target:"_blank","data-za-detail-view-id":5732,"data-za-detail-view-name":"回答",style:{marginLeft:"2em"},children:[(0,h.tZ)(wt.E,{text:!0,center:!0})," 管理待发布内容"]})]})},minRows:6,placeholder:c,defaultValue:s?s.editableContent:u,videoAnswerEditable:f,videoAnswerPublished:m,isLegacyVideoAnswer:l,defaultVideo:d,onReady:v,onChange:Z,onAfterChange:E,onFocus:T,onSelectText:C,onSubmit:A,onError:y,onLoadStart:S,onLoadEnd:I,onUploadStart:b,onUploadEnd:N,onUploadError:O,onBeforeVideoUpload:D,logo:an,location:p.title,editingContentType:"answer",onMCNLinkCardEdit:B,useV2Feature:!0,useEditableV2:!0,useImageOperationV2:!0,onAnyChange:q,docPluginProps:V,getMarkdownEnabled:W,videoSource:K})})})};un.propTypes={isToolbarSticky:A().bool.isRequired,answer:A().object.isRequired,isFullscreen:A().bool.isRequired,toolbarMenuAttention:A().string,scheduledPublishAt:A().number,initialScheduledPublishAt:A().number,placeholder:A().string.isRequired,draft:A().object,defaultValue:A().string,isLegacyVideoAnswer:A().bool,defaultVideo:A().object,question:A().object,videoAnswerEditable:A().bool,videoAnswerPublished:A().bool,editableReady:A().func.isRequired,handleChangeContent:A().func.isRequired,handleAfterChangeContent:A().func.isRequired,handleFocusWithAuth:A().func.isRequired,handleSelectText:A().func.isRequired,handleSubmit:A().func.isRequired,handleError:A().func.isRequired,handleLoadStart:A().func.isRequired,handleLoadEnd:A().func.isRequired,handleUploadStart:A().func.isRequired,handleUploadEnd:A().func.isRequired,handleUploadError:A().func.isRequired,handleBeforeVideoUpload:A().func.isRequired,handleMCNLinkCardEdit:A().func.isRequired,isVideoAnswer:A().bool.isRequired,handleInsertZVideo:A().func.isRequired,getToolbarSidePlugins:A().func.isRequired,createEditorPlugins:A().func.isRequired,getToolbarMenuPlugins:A().func.isRequired,getEditorBeforePlugins:A().func.isRequired,setUseScheduledPublish:A().func.isRequired,getMarkdownEnabled:A().func};var ln=(0,_.forwardRef)(un),dn=n(37372),pn=n(79721),hn=n(25955),fn=n(28183),mn=n(63205),vn=n(23288),Zn=n(4025);function gn(e){var t,n=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState,a=e.toolbarMainAreaData,c=e.toolbarMoreAreaData,s=e.toolbarFixtureAreaData,u=e.className;return(0,h.BX)(fn.Z,{className:u,css:{".ToolbarButton.Button.Button--plain":{marginRight:"6px"},".ToolbarDivider":{marginLeft:"0",paddingLeft:"2px"},".toolbar-section":{marginRight:"8px"},".fixArea .toolbar-section, .moreArea .toolbar-section":{marginRight:"0px"},".fixArea .ToolbarButton.Button.Button--plain:last-child, .moreArea .ToolbarButton.Button.Button--plain:last-child":{marginRight:"0px"},"&.toolbarV3":{paddingLeft:"0px"}},children:[(0,h.tZ)(mn.Z,{mainSections:a,moreSectionIsEmpty:0===(null===(t=c[0])||void 0===t?void 0:t.items[0].children.length),onCommand:n,queryCommandState:o,queryCommandEnable:r,editorState:i}),(0,h.tZ)(Zn.Z,{fixSections:s,queryCommandEnable:r,queryCommandState:o,onCommand:n,editorState:i}),(0,h.tZ)(vn.Z,{queryCommandState:o,queryCommandEnable:r,editorState:i,onCommand:n,moreSections:c})]})}var En=function(e){var t=e.editorState,n=e.onCommand,o=e.queryCommandEnable,r=e.queryCommandState,i=e.showUserProfitButton,a=e.isVideoAnswer,c=e.onInsertVideoClick,s=e.draftPage,u=e.className,l=e.useMediumEditor,d=e.getMarkdownEnabled,p=(0,hn.Z)().jumpUrl,f=(0,_.useMemo)((function(){return(0,pn.v$)({showProfit:i,onInsertVideoClick:c,isVideoAnswer:a})}),[i,c,a]),m=(0,_.useMemo)((function(){return(0,pn.vr)({draftPage:s})}),[s]),v=(0,_.useMemo)((function(){return(0,pn.vi)({getMarkdownEnabled:d,onHandleManageEditClick:function(){return window.open(p)}})}),[d,p]),Z=l?gn:dn.Z;return(0,h.tZ)(Z,{editorState:t,onCommand:n,queryCommandEnable:o,queryCommandState:r,toolbarMainAreaData:f,toolbarMoreAreaData:v,toolbarFixtureAreaData:m,className:u})},Tn=n(58729),Cn=n(99605),An=n(8190),_n=n(40108),yn=n(67233),Sn=n(13307),In=function(e){var t=e.children,n=e.className;return(0,h.tZ)("h1",{css:function(e){return{background:e.colors.GBK99A,color:e.colors.GBK02A,lineHeight:"31px",fontSize:"22px",fontWeight:"600"}},className:n,children:t})},bn=function(e){var t=e.question,n=e.onClose,o=t.title,r=t.detail,i=(0,u.Z)((0,_.useState)(null),2),a=i[0],c=i[1],s=(0,_.useRef)(null),l=(0,_.useCallback)((function(){return s.current}),[]);return(0,h.tZ)("div",{css:{position:"absolute",top:0,bottom:0,left:"100%",width:"calc((100vw - 100%)/2 - 20px)"},ref:s,children:(0,h.BX)(I.Box,{css:{overflow:"hidden",width:"326px",maxWidth:"326px"},children:[(0,h.tZ)(k.Z,{getStyle:function(){var e=l();return e?{top:85,left:e.getBoundingClientRect().left}:{top:85}},offset:85,container:l,children:(0,h.BX)(I.Box,{css:{width:"326px",maxWidth:"326px"},pl:"16px",children:[(0,h.BX)(I.Flex,{bg:"GBK99A",pl:"16px",sx:{borderBottom:"1px solid",borderColor:"GBK09A",height:"60px",alignItems:"center"},children:[(0,h.tZ)(In,{css:{fontSize:"18px",lineHeight:"24px"},children:"问题描述"}),(0,h.tZ)(R.$U,{zaType:"Button",zaAction:"Unknown",zaText:"关闭问题详情",as:An.eb,css:{marginLeft:"auto",padding:"16px"},onClick:n})]}),(0,h.BX)(I.Box,{bg:"GBK99A",px:"16px",css:{minHeight:"340px",maxHeight:"460px",overflow:"auto"},onClick:function(e){var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&c(t)},children:[(0,h.tZ)(In,{css:{fontSize:"16px",lineHeight:"22px",marginBottom:"10px",marginTop:"10px"},children:o}),(0,h.tZ)(Sn.Z,{itemProp:"text",tag:"span",html:r})]})]})}),a&&(0,h.tZ)(yn.Z,{img:a,onClose:function(){return c(null)}})]})})},wn=function(e){var t=e.question,n=e.onClick,o=t.title,r=t.excerpt;return(0,h.tZ)(I.Box,{bg:"GBK99A",css:{padding:"20px 64px 0"},children:(0,h.BX)(In,{css:function(e){return{paddingBottom:"20px",borderBottom:"1px solid ".concat(e.colors.GBK09A)}},children:[o,r&&(0,h.BX)(R.$U,{as:"button",zaType:"Button",zaText:!0,onClick:n,shouldTrackShow:!0,css:function(e){return{color:e.colors.GBL05A,lineHeight:"14px",fontSize:"14px",fontWeight:"normal",display:"inline-flex",alignItems:"center"}},children:["问题描述",(0,h.tZ)(_n.f,{size:16})]})]})})},Rn=n(77568),Nn=n.n(Rn),On=n(55270),Dn=function(e){var t=function(t){(0,a.Z)(o,t);var n=(0,p.Z)(o);function o(e){var t;return(0,r.Z)(this,o),(t=n.call(this,e)).state={needReload:e.useMediumEditor&&(0,On.isBrowser)()&&(0,He.Cg)()},t}var i=o.prototype;return i.componentDidMount=function(){var e=this;this.state.needReload&&this.props.loadDraft(this.props.question.id).finally((function(){requestAnimationFrame((function(){e.setState({needReload:!1},(function(){requestAnimationFrame((function(){var t;null===(t=e.props.imperativeRef.current)||void 0===t||t.focus()}))}))}))}))},i.render=function(){return this.state.needReload?null:(0,h.tZ)(e,(0,c.Z)({},this.props))},o}(_.Component);return Nn()((0,y.connect)(null,{loadDraft:fe.dY})(t),e)};function Bn(){var e=(0,l.Z)(["字数：",""]);return Bn=function(){return e},e}function Pn(){var e=(0,l.Z)(["草稿保存于",""]);return Pn=function(){return e},e}var kn="questionDetail",xn=function(e){(0,a.Z)(n,e);var t=(0,p.Z)(n);function n(e,i){var a;(0,r.Z)(this,n),(a=t.call(this,e,i)).toolbarWrapperRef=(0,_.createRef)(),a.helpDocMilestoneRef=(0,_.createRef)(),a.zaRef=(0,_.createRef)(),a.editableReady=function(){var e=a.props,t=e.reporter,n=e.draft;t.reportSuccess(sn.editableInit),n&&t.reportSuccess(sn.draftLoad)},a.onCompositionStart=function(){a.composition=!0,a.syncDraft.cancel()},a.onCompositionEnd=function(){a.composition=!1,a.prevValue&&a.syncDraft(a.prevValue),a.prevValue=null},a.onChangeContent=function(e){a.loggingDeltaTime||(a.loggingDeltaTime=!0,a.startCompositionTime=Math.floor((new Date).getTime()/1e3)),a.hasEdited=!0,a.setState({content:e,isEmpty:e.isEmpty,isTyping:!0}),a.composition?a.prevValue=e:a.syncDraft(e)},a.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var o=n.getRangeAt(0).cloneRange();o.collapse(t);var r=o.getBoundingClientRect();if(0===r.height){var i=o.commonAncestorContainer;1===i.nodeType&&(r=i.getBoundingClientRect())}if(0!==r.height){var a=r.bottom-(window.innerHeight-117);a>0&&window.scrollBy(0,a)}}},a.onDeleteDraftModalShow=function(){a.setState({deleteDraftModalShown:!0})},a.onDeleteDraft=function(){var e=a.props,t=e.isReediting,n=e.activeTabKey;t||(n===M?a.editable.clearAllContent():a.editable.reset(),a.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),a.deleteDraft();var o=a.props.onDeleteDraft;o&&o()},a.onDeleteDraftModalHide=function(){a.setState({deleteDraftModalShown:!1})},a.checkVideoSectionReady=function(e){if(!e)return B.Z.alert("没有上传视频，请上传后提交",{title:"无视频"}),!1;var t=e.videoId,n=e.isOriginal;if(t){if("zvideo"===e.type&&null==n)return B.Z.alert("没有视频类型，请选择视频为原创或转载后提交",{title:"无视频类型"}),!1}else{var o=a.editable.checkVideoStatus();if(o.isUploading)return B.Z.alert("视频上传中，请上传完成后提交",{title:"视频上传中"}),!1;if(o.hasError)return B.Z.alert("视频上传失败，请重新上传后提交",{title:"上传失败"}),!1}return!0},a.checkEditorContentReady=function(){return a.editable.hasVideo("upload")?(a.handleError("video-uploading"),!1):a.editable.hasImage("upload")?(a.handleError("image-uploading"),!1):a.editable.hasImage("error")||a.editable.hasVideo("error")&&!a.editable.hasVideo("error-review")?(B.Z.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"}),!1):!a.editable.hasVideo("error-review")&&!a.editable.hasVideo("censor")||(B.Z.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"}),!1)},a.getSubmitData=function(e,t,n){var r=a.state.scheduledPublishAt,i=a.props,c=i.answer,s=i.disclaimers,u=i.settings,l=i.isReediting,d={content:t},p=(0,i.getFormData)(),f=p.isDisclaimerChecked,m=p.disclaimerType,v=p.rewardTagline,Z=p.pushActivity,g=p.commentPermission,C=p.reshipmentSettings,A=p.isReport,_=p.commercialZhitaskBindInfo,y=p.thankInviterInfo;if(!l){var S=a.props.currentUser.caEnabled?"need_payment":"allowed";d.reshipmentSettings=C||S,d.commentPermission=g||"all"}if(d.rewardSetting={canReward:Boolean(v),tagline:v},e)return{content:t,attachment:n,rewardSetting:d.rewardSetting,reshipmentSettings:d.reshipmentSettings,commentPermission:d.commentPermission};if(s&&s.length&&(!c||u)&&(d.disclaimerStatus=f?"open":"close",d.disclaimerType=m||"none"),d.commercialReportInfo={isReport:!!A},d.commercialZhitaskBindInfo=(0,V.at)(_),d.isReport=!!A,r){if(w.Z.trackEvent((0,o.Z)(a),{action:"Click",id:5733,name:"回答"}),E.Z(r,T.Z(new Date,30)))return void B.Z.alert((0,h.tZ)("div",{style:{textAlign:"center"},children:"只能设置 30 分钟后的定时时间"}),{title:"定时发布"});d.publishAt=Math.floor(r/1e3)+0}return void 0!==Z&&(d.pushActivity=Z),(null==n?void 0:n.bizExt)&&(d.bizExt=(0,J.dj)(n.bizExt)),d.tableOfContentsEnabled=a.editable.hasCatalog(),Object.assign(d,(0,He.jd)(y,"answer")),d},a.canSubmit=function(){var e,t,n=null===(e=a.editable)||void 0===e?void 0:e.toHTML(),o=a.isVideoAnswer?null===(t=a.editable)||void 0===t?void 0:t.getAttachment():null;return a.isVideoAnswer?Boolean(o||n):Boolean(n)},a.handleSubmit=a.props.authRequired((function(){var e=a.props.reporter;e.reportRequest(sn.addAnswer);try{var t,n=a.props,r=n.answer,i=n.draft,u=n.isReediting,l=n.onSubmit,d=n.showNotification,p=n.question,h=p.id,f=p.questionType,m=p.brand,v=n.currentUser,Z=n.updateSettingsDisclaimer,g=n.loadLabel,E=n.onCancel,T=n.useMediumEditor;if(!a.editable)return E(),void e.reportSuccess(sn.addAnswer);if(!a.canSubmit())return void e.reportSuccess(sn.addAnswer);var C=a.editable.toHTML(),A=a.isVideoAnswer?a.editable.getAttachment():null==i?void 0:i.attachment;if(a.isVideoAnswer&&!a.checkVideoSectionReady(A))return void e.reportSuccess(sn.addAnswer);if(!a.checkEditorContentReady())return void e.reportSuccess(sn.addAnswer);var _=a.getSubmitData(a.isVideoAnswer,C,(0,s.Z)((0,c.Z)({},A),{campaign_id:null===(t=a.props.campaign)||void 0===t?void 0:t.id}));if(!_)return;var y=a.zaRef.current.trackEvent;Promise.resolve(l(_)).then((function(t){var n;if(y({action:"Answer",eventType:"Click",elementLocation:{type:"Button",moduleId:"published_successful",content:{type:"Answer",token:String(null==t||null===(n=t.payload)||void 0===n?void 0:n.id)}}},{configMap:{traceId:a.props.traceId}}),e.reportSuccess(sn.addAnswer),T&&(r&&_.disclaimerStatus&&Z(r.id,_.disclaimerStatus,_.disclaimerType),r&&g("answer",r.id),"commercial"===f)){var o=(null==m?void 0:m.toastAnswerDescription)||"已发布！由品牌筛选后进入推荐区。";d(o)}})).then((function(){w.Z.trackCardShow(null,{id:7879}),u||w.Z.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(h),author_member_hash_id:v.id}]}}],status:{result:"Success",event:{action:"Submit"}}})})).catch((function(t){var n;t.status&&"5"!==(null===(n=t.status)||void 0===n?void 0:n.toString()[0])||e.reportFail(sn.addAnswer,t),u||w.Z.trackEvent((0,o.Z)(a),{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})}));var S=u?"Edit":"Answer";"Answer"===S&&w.Z.trackEvent((0,o.Z)(a),{id:4930}),w.Z.trackEvent((0,o.Z)(a),{action:S,is_intent:!1})}catch(t){throw e.reportFail(sn.addAnswer,t),t}})),a.validateBeforeCancel=function(){return a.editable.hasVideo("upload")?(a.handleError("video-uploading-draft"),!1):!a.editable.hasImage("upload")||(a.handleError("image-uploading-draft"),!1)},a.onCancel=function(){var e=a.props.onCancel;a.validateBeforeCancel()&&(a.hasEdited&&a.syncDraftImmediately(),e&&e())},a.onFocus=function(){"org"===a.props.question.questionType&&a.shouldAnswerOrgQuestionModalShow&&a.handleAnswerOrgQuestionModalShow(),a.setState({focusing:!0})},a.onFocusWithAuth=function(){return a.onFocusAuthChecked?a.onFocus():(a.onFocusAuthChecked=!0,a.props.authRequired(a.onFocus)())},a.onSelectText=function(e){a.setState({selectedText:e.replace(/\s/g,"")})},a.onLoadStart=function(){a.setState({loadingShown:!0})},a.onLoadEnd=function(){a.setState({loadingShown:!1})},a.handleInsertZVideo=function(){a.setState({showInsertableVideoUploader:!0})},a.getAllInviters=function(){var e=a.props,t=e.question;return(0,e.fetchAllInviters)(t.id)},a.getToolbarSidePlugins=function(){return null},a.getToolbarMenuPlugins=function(){var e=a.state.scheduledPublishAt;return(0,h.tZ)(_.Fragment,{children:a.canUseScheduledPublish&&(0,h.BX)(P.uh,{onClick:function(){a.setUseScheduledPublish(!e),w.Z.trackEvent((0,o.Z)(a),{action:"Click",id:5730,name:"回答"})},children:[(0,h.tZ)(f.a,{text:!0}),e?"取消定时发布":"定时发布"]})})},a.setUseScheduledPublish=function(e,t){if(e)if(t)a.setState({scheduledPublishAt:t});else{var n=T.Z(new Date,30);a.setState({initialScheduledPublishAt:n,scheduledPublishAt:n})}else B.Z.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then((function(){a.setState({scheduledPublishAt:void 0}),w.Z.trackEvent(a,{action:"Click",id:5737,name:"回答"})})).catch((function(){w.Z.trackEvent((0,o.Z)(a),{action:"Click",id:5736,name:"回答"})})),w.Z.trackCardShow((0,o.Z)(a),{id:5735,name:"回答"})},a.getEditorState=function(){return a.editable.state.editorState?a.editable.state.editorState:a.editable.getEditorState()},a.toggleFullscreen=function(){var e,t,n;a.validateBeforeCancel()&&(a.hasEdited?a.syncDraftImmediately().finally((function(){var e,t,n;(0,He.aH)(a.props.question.id,null===(e=a.props.answer)||void 0===e?void 0:e.id),null===(n=(t=a.props).onCancel)||void 0===n||n.call(t)})):((0,He.aH)(a.props.question.id,null===(e=a.props.answer)||void 0===e?void 0:e.id),null===(n=(t=a.props).onCancel)||void 0===n||n.call(t)))},a.handleUploadStart=function(){a.setState({isUploading:!0})},a.handleUploadEnd=function(){a.setState({isUploading:!1})},a.handleUploadError=function(e,t){switch(t){case"video":a.handleError("video-upload-error");break;case"image":a.handleError("image-upload-error",e)}},a.handleAnswerOrgQuestionModalShow=function(){a.setState({answerModalShown:!0}),a.shouldAnswerOrgQuestionModalShow=!1},a.handleAnswerModalHide=function(){a.setState({answerModalShown:!1})},a.updateDraftSettings=function(){a.hasSettingsChange=!0,a.syncDraft()},a.syncDraftImmediately=a.props.reporter.recordError(sn.draftSave,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.state.content;if(a.editable){var t,n=a.props,o=n.reporter,r=n.draft,i=a.state.lastUpdatedTime,c=e.toHTML(),s=Math.floor(Date.now()/1e3);t=!i||a.startCompositionTime-i>180?s-a.startCompositionTime:s-i,a.setState({isTyping:!1});var u,l=a.props,d=l.answer,p=void 0===d?{}:d,h=p.attachment;u=a.videoAnswerEditable||"zvideo"===(null==h?void 0:h.type)?"video_answer":"video"===(null==h?void 0:h.type)?"video_answer_v2":"normal";var f=a.isVideoAnswer?e.getAttachment():null==r?void 0:r.attachment,m=a.hasSettingsChange||(a.isVideoAnswer?Boolean(f||c):Boolean(c));a.hasSettingsChange=!1;var v=a.getDraftSettings(a.isVideoAnswer);return m?a.updateDraft(c,t,u,f,v).then((function(e){var t;(null==e||null===(t=e.payload)||void 0===t?void 0:t.updatedTime)&&a.setState({lastUpdatedTime:e.payload.updatedTime}),a.loggingDeltaTime=!1,o.reportSuccess(sn.draftSave),w.Z.trackEvent(a,{action:"AutoSave"})}),(function(e){throw o.reportFail(sn.draftSave,e),e})).finally((function(){delete a.startCompositionTime})):(o.reportSuccess(sn.draftSave),Promise.resolve(a.deleteDraft()))}})),a.syncDraft=(0,oe.Z)(a.syncDraftImmediately,2e3),a.getDraftSettings=function(e){var t=a.props,n=t.answer,o=t.disclaimers,r=t.settings,i=t.isReediting,c={},s=(0,t.getFormData)(),u=s.isDisclaimerChecked,l=s.disclaimerType,d=s.rewardTagline,p=s.pushActivity,h=s.commentPermission,f=s.reshipmentSettings,m=s.isReport,v=s.thankInviterInfo,Z=void 0===v?"":v;if(!i){var g=a.props.currentUser.caEnabled?"need_payment":"allowed";c.reshipmentSettings=f||g}if(c.commentPermission=h||"all",c.canReward=Boolean(d),c.tagline=d,e)return c;o&&o.length&&(!n||r)&&(c.disclaimerStatus=u?"open":"close",c.disclaimerType=l||"none"),c.commercialReportInfo={is_report:!!m},void 0!==p&&(c.pushActivity=p),c.tableOfContentsEnabled=a.editable.hasCatalog();var E=(0,He.jd)(Z);return c.thankInviterStatus=E.thankInviterStatus,c.thankInviter=E.thankInviter,c},a.updateDraft=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=a.props,r=o.question.id,i=o.draft,c=o.addDraft,s=o.updateDraft;return i?s.apply(void 0,[r].concat((0,d.Z)(t))):c.apply(void 0,[r].concat((0,d.Z)(t)))},a.focus=function(){a.editable&&a.editable.focus()},a.hasVideo=function(){return!!a.editable&&a.editable.hasVideo()},a.hasADLinkCard=function(){return!!a.editable&&a.editable.hasADLinkCard()},a.hasFeeConsultCard=function(){return!!a.editable&&a.editable.hasFeeConsultCard()},a.hasMCNLinkCard=function(){return!!a.editable&&a.editable.hasMCNLinkCard()},a.hasCommercialReport=function(){var e=a.props.getFormData().commercialReportInfo;return null==e?void 0:e.isReport},a.handleChangeCommentPermission=function(e,t){var n=void 0===t?e:t;a.setState({commentPermission:n})},a.handleReshipmentSettings=function(e){"need_payment"!==e||a.props.currentUser.caEnabled||window.open("/copyright/invite"),a.setState({reshipmentSettings:e})},a.handleError=function(e,t){(0,Y.Xc)(e,t,a.props.showNotification)},a.handleBeforeVideoUpload=function(){var e=a.props.question;return!e.relationship||!e.relationship.isAnonymous},a.handleReverted=function(e){a.editable.resetWithValue(e.draft.content)},a.toggleMarkdownEnabled=function(){var e=a.state.markdownEnabled;a.setState({markdownEnabled:!e}),a.props.updateMarkdownSettings({markdownEnabled:!e})},a.getDraftStatus=function(){var e=a.props.draft,t=a.state,n=t.isTyping,o=t.dateNow;return e?e.updating||n?"草稿保存中…":e.updated&&o<1e3*e.updatedTime+6e4?"草稿已保存":e.updateFailed?(0,h.tZ)("span",{className:"AnswerForm-draftStatus--failed",children:"草稿保存失败"}):v()(Pn(),(0,U.rL)(e.updatedTime)):""},a.handleEditGGRCard=function(e){var t=e.type,n=e.payload,o=a.state.mcnEditingGood,r=a.props.updateLinkCard;"goodsEditor/submitNewGoodsInfo"!==t?"goodsEditor/closeGoodsEditor"!==t||a.setState({mcnEditingGood:null}):r((0,s.Z)((0,c.Z)({},o),{title:null==n?void 0:n.title})).finally((function(){a.setState({mcnEditingGood:null}),a.editable.handleCommand("edit-mcn-link-card:".concat(o.id))}))},a.shouldShowProfit=function(){return a.props.showUserProfitButton&&!a.isVideoAnswer},a.getSentences=function(){var e;return a.props.isReediting&&(null===(e=a.props.answer)||void 0===e?void 0:e.id)?a.props.getInteractText("answers",a.props.answer.id).then((function(e){var t;return null==e||null===(t=e.payload)||void 0===t?void 0:t.data})):null},a.createEditorPlugins=function(){var e,t,n,r=(0,Ae.Z)({type:"question",id:a.props.question.id,draftType:(null===(e=a.props.answer)||void 0===e?void 0:e.id)?"answer":void 0,draftId:null===(t=a.props.answer)||void 0===t?void 0:t.id,syncDraft:a.syncDraft}),i=Le({getShouldShowToolbarButton:function(){return!a.isVideoAnswer},getAllInviters:a.getAllInviters,inviterQuery:a.props.inviterQuery,getInitialThankInviterInfo:function(){return a.props.thankInviterInfo},syncDraftImmediately:a.syncDraftImmediately}),c=(0,Ue.Z)({shouldDisabled:function(){return a.props.question.relationship.isAnonymous},shouldShow:function(){return a.shouldShowProfit()},getContentInfo:function(){var e;return{type:"answer",id:null===(e=a.props.answer)||void 0===e?void 0:e.id}}}),s=(0,Ce.Z)(),u=(0,Se.Z)({sourceType:"answer",sourceId:null===(n=a.props.question)||void 0===n?void 0:n.id});a.helpDocPlugin=(0,_e.Z)({getInitialOffset:a.getHelpDocInitialOffset,getShouldHide:a.getShouldHideHelpDoc,forceUpdate:a.forceUpdate.bind((0,o.Z)(a))});var l=(0,ye.Z)({onToggle:a.toggleMarkdownEnabled});return[(0,z.Z)({getSentences:a.getSentences}),r,i,c,s,u,a.helpDocPlugin,l]},a.renderRichInput=function(){var e,t=a.props,n=t.answer,o=(void 0===n?{}:n).attachment,r=t.answer,i=t.question,u=t.isReediting,l=t.draft,d=t.defaultValue,p=a.state,f=p.toolbarMenuAttention,m=p.scheduledPublishAt,v=p.initialScheduledPublishAt,Z=a.props.getFormData().tableOfContentsEnabled,g="".concat(u?"修改":"写","回答...");"commercial"===i.questionType&&(g=null===(e=i.brand)||void 0===e?void 0:e.editorDescription);a.isVideoAnswer&&(g="详细介绍下视频（选填）");var E,T=a.videoAnswerEditable||"video_answer"===(null==l?void 0:l.type)||"zvideo"===(null==o?void 0:o.type);if(l)E=null==l?void 0:l.attachment;else if("zvideo"===(null==o?void 0:o.type))E=o.zvideo;else if("video"===(null==o?void 0:o.type)){var C;E=(0,s.Z)((0,c.Z)({},null===(C=o.video)||void 0===C?void 0:C.videoInfo),{videoId:o.attachmentId})}var A={ref:function(e){return a.editable=e},answer:r,question:i,toolbarMenuAttention:f,scheduledPublishAt:m,initialScheduledPublishAt:v,placeholder:g,draft:l,defaultValue:d,isLegacyVideoAnswer:T,defaultVideo:E,videoAnswerEditable:a.videoAnswerEditable,videoAnswerPublished:a.videoAnswerPublished,editableReady:a.editableReady,handleChangeContent:a.onChangeContent,handleAfterChangeContent:a.onAfterChangeContent,handleFocusWithAuth:a.onFocusWithAuth,handleSelectText:a.onSelectText,handleSubmit:a.handleSubmit,handleError:a.handleError,handleLoadStart:a.onLoadStart,handleLoadEnd:a.handleLoadEnd,handleUploadStart:a.handleUploadStart,handleUploadEnd:a.handleUploadEnd,handleUploadError:a.handleUploadError,handleBeforeVideoUpload:a.handleBeforeVideoUpload,handleMCNLinkCardEdit:function(e,t){a.setState({mcnEditingGood:t})},isVideoAnswer:a.isVideoAnswer,handleInsertZVideo:a.handleInsertZVideo,getToolbarSidePlugins:a.getToolbarSidePlugins,createEditorPlugins:a.createEditorPlugins,getToolbarMenuPlugins:a.getToolbarMenuPlugins,getEditorBeforePlugins:a.getEditorBeforePlugins,setUseScheduledPublish:a.setUseScheduledPublish,allowToolbar:!1,onAnyChange:a.handleAnyChange,docPluginProps:(0,Cn.Z)(a.props.creatorRightStatus),tableOfContentsEnabled:Z,getMarkdownEnabled:function(){return a.state.markdownEnabled},videoSource:"answer"};return(0,h.tZ)(ln,(0,c.Z)({},A))},a.handleAnyChange=function(e){var t=e.editorState;a.setState({editorState:t})},a.handleKeyCommand=function(e){if(!a.editable)return"not-handled";var t=a.editable.handleKeyCommand(e);return"toggle-catalog"===e&&requestAnimationFrame((function(){a.forceUpdate(),a.syncDraftImmediately()})),t},a.queryCommandEnable=function(e,t){return!!a.editable&&a.editable.queryCommandEnable(e,t)},a.queryCommandState=function(e,t){return!!a.editable&&a.editable.queryCommandState(e,t)},a.getHelpDocInitialOffset=function(){var e=a.toolbarWrapperRef.current;if(e){var t=e.getBoundingClientRect(),n=a.props.useMediumEditor?t.bottom-50:t.bottom+20;return document.documentElement.clientWidth-t.right>328?{top:n,left:t.right+18}:{top:n,right:0}}},a.getShouldHideHelpDoc=function(){if(!a.props.useMediumEditor)return!1;var e=a.helpDocMilestoneRef.current;return!!e&&e.getBoundingClientRect().top<117},a.getAnswerFormRef=function(){return a.props.imperativeRef},a.handleCloseWriteShieldModal=function(){var e,t;a.props.useMediumEditor?null===(t=(e=a.props).onCancel)||void 0===t||t.call(e):(window.close(),requestAnimationFrame((function(){window.location.href="https://www.zhihu.com"})))};var u=a.props,l=u.defaultValue,p=u.draft,m=p?p.editableContent:l,Z=p?p.updatedTime:0;return a.state={draft:m,content:{toHTML:function(){return m}},isEmpty:!m,isTyping:!1,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:Z,showInsertableVideoUploader:!1,mcnEditingGood:null,initialScheduledPublishAt:void 0,scheduledPublishAt:void 0,thankInviterInfo:e.thankInviterInfo||e.inviterFromNotification,editorState:null,rightArea:null,markdownEnabled:!1},a.hasEdited=!1,a}var l=n.prototype;return l.componentDidMount=function(){var e,t,n=this;null===(e=this.props.writeShield)||void 0===e||null===(t=e.setOnModalClose)||void 0===t||t.call(e,this.handleCloseWriteShieldModal);var o=this.props,r=o.reporter,i=o.draft,a=o.question.id,c=o.getBio,s=o.loadCreatorRightStatus;c(a),s(),r.reportRequest(sn.editableInit),i&&r.reportRequest(sn.draftLoad),this.shouldAnswerOrgQuestionModalShow=!ie.getKnown(),this.onFocusAuthChecked=!1;var l=this.props,d=l.fillCurrentUserIfNeeded,p=l.getUserProfitPermission,h=d(["lastCommentPermission","caEnabled","autoSendingCreations","mcn_user_info"]);p(),Promise.resolve(h).then((function(){Q.Z.getActionsByNames(["a_draft_history",n.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then((function(e){var t=(0,u.Z)(e,1)[0];t&&(n.setState({toolbarMenuAttention:t.description}),Q.Z.markAsShown(t),"auto_pub_answer"===t.guide_name&&w.Z.trackCardShow(n,{id:5738}))})),w.Z.trackCardShow(n,{id:5729,name:"回答"})})),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return window.name="",n.state.isUploading||n.composition||n.syncDraft.pending()||n.props.draft&&n.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval((function(){return n.setState({dateNow:Date.now()})}),6e4),this.props.imperativeRef&&(this.props.imperativeRef.current={focus:this.focus,hasVideo:this.hasVideo,hasADLinkCard:this.hasADLinkCard,hasMCNLinkCard:this.hasMCNLinkCard,hasFeeConsultCard:this.hasFeeConsultCard,toggleFullscreen:this.toggleFullscreen,hasCommercialReport:this.hasCommercialReport,hasEditorContent:function(){return!n.state.isEmpty}}),(0,j.a)(["r","t","e"])},l.UNSAFE_componentWillReceiveProps=function(e){var t=this,n=this.props.reporter,o=this.state,r=e.currentUser,i={};o.reshipmentSettings||void 0===r.caEnabled||(i.reshipmentSettings=r.caEnabled?"need_payment":"allowed"),o.commentPermission||void 0===r.lastCommentPermission||(i.commentPermission=r.lastCommentPermission),Object.keys(i).length&&this.setState(i),this.draftLoaded||this.state.draft||this.props.draft||!e.draft||(n.wrapAutoRecord(sn.draftLoad,(function(){var n=e.draft.editableContent;n&&(t.setState({draft:n,isEmpty:!n,content:{toHTML:function(){return n}}}),t.editable&&!t.editable.toHTML()&&t.editable.resetWithValue(n))}))(),this.draftLoaded=!0)},l.componentDidUpdate=function(e){var t=this,n=this.state,o=n.focusing,r=n.thankInviterInfo,i=this.props,a=i.tagline,c=i.inviterFromNotification;if(a){var s=L().get("rewardNotication");o&&!s&&(this.setState({rewardNotication:!1}),L().set("rewardNotication",!0),this.timeout=setTimeout((function(){t.setState({rewardNotication:!0})}),2e3))}r||!c||e.inviterFromNotification||this.setState({thankInviterInfo:c})},l.componentWillUnmount=function(){this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.props.imperativeRef&&(this.props.imperativeRef.current=null),(0,j.n)()},l.getCloneContent=function(){return this.getEditorState().getCurrentContent()},l.deleteDraft=function(){var e=this.props,t=e.question,n=e.draft,o=e.deleteDraft;if(n)return o(t.id)},l.renderFooter=function(){var e=this,t=this.props,n=t.isReediting,o=t.useMediumEditor,r=t.draft,i=this.state,a=i.content,c=i.scheduledPublishAt,s=i.markdownEnabled,u=n&&this.isVideoAnswer,l=a.toHTML()||"",d=o?X.vQ:X.$_;return(0,h.BX)(d,{hideScrollButton:u,getContaner:function(){return e.form},isAnswer:!0,children:[(0,h.BX)(I.Flex,{children:[(0,h.tZ)(I.Text,{color:"GBL05A",fontSize:"14px",ml:u?"0":"24px",children:v()(Bn(),(0,ee.Xs)(l,!0))}),s&&(0,h.tZ)(q.Z,{})]}),(0,h.tZ)(I.Text,{color:"GBL05A",fontSize:"14px",ml:"auto",children:this.getDraftStatus()}),o&&n&&(0,h.tZ)(G.ZP,{zaType:"Button",zaText:!0,color:"grey",preset:"secondary",css:{marginLeft:"24px"},onClick:this.onCancel,children:r?"保存草稿并离开":"取消"}),(0,h.tZ)(Me,{canSubmit:this.canSubmit(),handleSubmit:this.handleSubmit,isReediting:n,scheduledPublishAt:c,type:"answer",css:{marginLeft:"24px"}})]})},l.render=function(){var e,t,n=this,o=this.props,r=o.className,i=o.isReediting,a=o.answer,u=(void 0===a?{}:a).answerType,l=o.question,d=o.currentUser,p=o.answer,f=o.draft,m=o.activeTabKey,v=o.useMediumEditor,Z=o.showUserProfitButton,E=this.state,T=E.deleteDraftModalShown,C=E.showInsertableVideoUploader,A=E.mcnEditingGood,_=E.editorState,y=E.initialScheduledPublishAt,S=E.scheduledPublishAt,I=E.rightArea,b=v?{offset:52,container:function(){return n.form}}:{getStyle:function(){return{width:"100%",top:0,left:0}}};return(0,h.BX)(D.r,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(l.id),author_member_hash_id:d.id},children:[(0,h.BX)("form",{ref:function(e){n.form=e},className:g()("AnswerForm",r),onSubmit:function(e){return e.preventDefault()},noValidate:!0,css:[{borderBottom:"none"},v?{".AnswerForm-editor .Editable_CatalogV2":{width:"140px",left:"-164px"}}:{".AnswerForm-editor .Editable_CatalogV2":{width:"180px",left:"-260px"}}],children:[(0,h.tZ)(R.pS,{ref:this.zaRef}),Boolean(this.isVideoAnswer&&(null===(e=this.props.writeShield)||void 0===e||null===(t=e.commands)||void 0===t?void 0:t.write)&&!this.props.writeShield.commands.write.instruction&&!this.props.writeShield.isLoading)&&(0,h.tZ)(ne.H2,{writeScene:{type:"zvideo"},onClose:this.handleCloseWriteShieldModal}),(0,h.BX)("div",{children:[(0,h.tZ)(Tn.Z,{editorFrom:v?"answer-pc-editor-modified":"answer-pc-editor-full"}),this.editable&&(0,h.tZ)(k.Z,(0,s.Z)((0,c.Z)({},b),{children:(0,h.tZ)("div",{ref:this.toolbarWrapperRef,css:function(e){return{display:"flex",justifyContent:"center",margin:"0px auto",background:e.colors.GBK99A}},children:(0,h.tZ)(En,{editorState:_,onCommand:this.handleKeyCommand,queryCommandEnable:this.queryCommandEnable,queryCommandState:this.queryCommandState,showUserProfitButton:Z,isVideoAnswer:this.isVideoAnswer,onInsertVideoClick:this.handleInsertZVideo,useMediumEditor:v,getMarkdownEnabled:function(){return n.state.markdownEnabled}},m)})})),(0,h.BX)("div",{css:function(e){return[{position:"relative",".Editable":{paddingTop:"1px",minHeight:"calc(100vh - 120px)"}},v?{width:"694px",margin:"0 auto",background:e.colorMod(e.colors.GBK10C).alpha(.45),".Editable-content":{paddingBottom:"62px"}}:{width:"782px",margin:"20px auto",".AnswerForm-editor .RichText--editable":{paddingLeft:64,paddingRight:64}}]},children:[I===kn&&(0,h.tZ)(bn,{question:l,onClose:function(){n.setState({rightArea:null})}}),!v&&(0,h.tZ)(wn,{question:l,onClick:function(){return n.setState({rightArea:kn})}}),(0,h.tZ)("div",{css:{minHeight:"calc(100vh - 120px)"},children:this.renderRichInput()}),(0,h.tZ)("div",{ref:this.helpDocMilestoneRef}),(0,h.tZ)(rn,{question:l,answer:p,isVideoAnswer:this.isVideoAnswer,isReediting:i,setUseScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,initialScheduledPublishAt:y,scheduledPublishAt:S,draft:f,getAnswerFormRef:this.getAnswerFormRef,css:!v&&{paddingLeft:"54px",paddingRight:"64px"},updateDraftSettings:this.updateDraftSettings,getInitialEnableMarkdown:function(e){return n.setState({markdownEnabled:e})}})]})]}),"org"===l.questionType&&(0,h.tZ)(ie,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),(0,h.tZ)(Te.Z,{title:"清除草稿",subtitle:i?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:T,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),C&&(0,h.tZ)(K.Z,{show:C,onClose:function(){return n.setState({showInsertableVideoUploader:!1})},onZVideoSubmit:function(e){n.setState({showInsertableVideoUploader:!1}),n.editable.handleCommand("insert-zvideo-card:".concat(JSON.stringify(e)))},onVideoSubmit:function(e){n.setState({showInsertableVideoUploader:!1}),n.editable.handleCommand("insert-video-card",e)}}),(0,h.tZ)(O.Z,{className:"AnswerForm-MCNEditor",title:"编辑商品",onClose:function(){n.setState({mcnEditingGood:null})},children:Boolean(A)&&(0,h.tZ)(N.Z,{className:"AnswerForm-MCNEditorIframe",src:(0,$.l6)({title:A.title,originTitle:A.originTitle,source:A.source,sourceId:A.sourceId,productTypeName:A.productTypeName}),onMessage:this.handleEditGGRCard})}),(0,h.tZ)(Ee,{onClose:function(){window.location.href="https://www.zhihu.com/question/".concat(l.id,"/answer/").concat(p.id)},shown:"slideshow"===u})]}),this.renderFooter()]})},(0,i.Z)(n,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting,o=e.activeTabKey;return t&&t.autoSendingCreations&&o===F&&!n}},{key:"videoAnswerPublished",get:function(){var e=this.props.answer,t=(void 0===e?{}:e).attachment;return["zvideo","video"].includes(null==t?void 0:t.type)}},{key:"videoAnswerEditable",get:function(){return this.props.activeTabKey===M}},{key:"isVideoAnswer",get:function(){return this.videoAnswerPublished||this.videoAnswerEditable}}]),n}(_.Component);xn.propTypes={activeTabKey:A().string,question:A().object,isReediting:A().bool,defaultValue:A().string,getFormData:A().func,reporter:A().object},xn.defaultProps={isReediting:!1};var Ln={addDraft:fe.uN,updateDraft:fe._u,deleteDraft:fe.R5,showNotification:he.c0,fillCurrentUserIfNeeded:se.sF,updateSettingsDisclaimer:ae.Md,loadLabel:de.T$,getUserProfitPermission:me.Yr,updateLinkCard:pe.ko,fetchAllInviters:fe.qX,getBio:fe.IF,loadCreatorRightStatus:ce.Xd,updateMarkdownSettings:fe.zp,getInteractText:le.k},Un=(0,b.compose)((0,ne.ZP)({init:!0,getScene:function(e){return{type:"answer",token:String(e.question.id)}}}),H.g,W.SS,Dn,S.withRouter,te.Z,(0,y.connect)((function(e,t){var n,o,r=e.entities,i=r.questions,a=r.drafts,c=void 0===a?{}:a,s=e.question,u=t.location.query.inviter,l=(0,ve.rn)(e),d=(0,se.ib)(e),p=(0,fe.em)(e,t.question.id),h=u&&(null==p||null===(n=p.find)||void 0===n?void 0:n.call(p,(function(e){return e.id===u}))),f=c["question_".concat(t.question.id)];return{campaign:l,question:i[t.question.id]||t.question,draft:f,currentUser:d,isPuQuestion:Boolean(s&&s.brand&&s.brand.isPuQuestion),disclaimers:s.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null,showUserProfitButton:e.userProfit.permission.visible,thankInviterInfo:null===(o=(0,de.yM)(e,t.answer))||void 0===o?void 0:o.thankInviterInfo,allInviters:p,inviterQuery:u,inviterFromNotification:h,isOffice:(0,ue.Xj)(e),creatorRightStatus:(0,ce.Sy)(e)}}),Ln),Ne.Z,Fe.l0)(xn)},50029:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var o=n(68562),r=n(87363),i=n(3404),a=n(78220),c=n(48457);function s(e){var t=e.handleClick,n=(0,r.useRef)(null);return(0,o.BX)(c.$U,{as:i.Flex,zaAction:"Unknown",zaText:"全屏编辑",zaType:"Button",aliginItem:"center",fontSize:14,color:"GBL05A",pr:"20px",lineHeight:"55px",css:{cursor:"pointer"},onClick:t,ref:n,children:[(0,o.tZ)(i.Text,{mr:"10px",children:"全屏编辑"}),(0,o.tZ)(a.R,{text:!0,center:!0})]})}},58729:function(e,t,n){"use strict";n.d(t,{Z:function(){return G}});var o=n(88483),r=n(16600),i=n(78194),a=n(68562),c=n(47859),s=n(90674),u=n(87363),l=n.n(u),d=n(3404),p=n(48457),h=n(97645),f=n.n(h),m=n(21620),v=n(84421),Z=n(78724),g=n(32554),E=n(47112),T=n.n(E),C=function(e){(0,v.Z)(n,e);var t=(0,g.Z)(n);function n(){return(0,m.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.className,n=(0,Z.Z)(e,["className"]);return(0,a.tZ)("textarea",(0,r.Z)((0,o.Z)({},n),{className:T()(t,"TextArea")}))},n}(u.Component),A=C,_=n(35314),y=n(59591),S=n(41021),I=n(65468),b=n.n(I),w=n(75764),R=n(16915),N=Object.assign;var O=function(e){return l().createElement(R.Z,N({width:"49",height:"48",viewBox:"0 0 49 48"},e),l().createElement("path",{fill:"currentColor",d:"M24 36a4 4 0 1 1 0 8 4 4 0 0 1 0-8Zm3-32c1.105 0 1.91.9 1.801 1.993l-2.593 26.009c-.055.551-.55.998-1.099.998h-2.218a1.127 1.127 0 0 1-1.1-.998L19.2 5.993c-.11-1.1.688-1.993 1.8-1.993H27Z"}))},D=n(28938),B={success:(0,a.tZ)(S.Y,{size:24}),fail:(0,a.tZ)(O,{size:24})},P=function(e){var t=e.text,n=e.icon,c=e.onClose,s=e.delay,l=void 0===s?2e3:s,p=e.color,h=void 0===p?"GBK04A":p,f=(0,Z.Z)(e,["text","icon","onClose","delay","color"]),m=(0,i.Z)((0,u.useState)(!0),2),v=m[0],g=m[1],E=(0,w.Yz)(v,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}});return n="string"==typeof n?B[n]:n,(0,u.useEffect)((function(){setTimeout((function(){g(!1),c&&c()}),l)}),[l,c]),E.map((function(e){var i=e.item,c=e.props,s=e.key;return i?(0,a.tZ)(w.q.div,{style:c,children:(0,a.BX)(d.Flex,(0,r.Z)((0,o.Z)({},f),{role:"alert",p:"18px",alignItems:"center",justifyContent:"center",flexDirection:"column",color:h,css:function(e){return{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"14px",maxWidth:200,background:e.colorMod(e.colors.GBK99A).alpha(.85),pointerEvents:"none",textAlign:"center"}},children:[n,(0,a.tZ)(d.Text,{fontWeight:"bold",css:[{lineHeight:"20px"},n&&{marginTop:"8px"}],children:t})]}))},s):null}))},k=function(){var e=(0,D.Z)(),t=e.addInstance,n=e.removeInstance;return(0,u.useCallback)((function(e){var o,r=e.icon,i=e.text,c=e.delay,s=e.color;return new Promise((function(e){o=(0,a.tZ)(y.Z,{children:(0,a.tZ)(P,{icon:r,text:i,onClose:e,delay:c,color:s})},b()("toast")),t(o)})).finally((function(){return function(e){return setTimeout((function(){return n(e)}),300)}(o)}))}),[t,n])},x="showEvaluatePanelTimer",L="isShowEvaluatePanel",U=function(e){return(0,a.tZ)(p.$U,(0,r.Z)((0,o.Z)({as:"button",zaType:"Button",zaText:"关闭nps",css:{position:"absolute",top:"11px",right:"11px"}},e),{children:(0,a.tZ)(s.HN,{width:"16",height:"16"})}))},F=function(e){return(0,a.tZ)(d.Box,{css:{textAlign:"right"},children:(0,a.tZ)(p.$U,(0,r.Z)((0,o.Z)({as:"button",zaType:"Button",zaText:"提交nps",css:function(e){return{color:e.colors.GBL01A,fontSize:"12px"}}},e),{children:"确认提交"}))})},M=function(e){return(0,a.tZ)(p.$U,(0,o.Z)({as:"button",zaType:"Button",css:function(e){return{width:"25px",display:"inline-block",textAlign:"center",lineHeight:"25px",background:e.colors.GBK10A,borderRadius:"2px",color:e.colors.GBK06A,marginRight:"2px",cursor:"pointer","&:hover":{background:e.colors.GBK09A}}}},e))};function G(e){var t=e.editorFrom,n=e.storageKey,o=void 0===n?"":n,r=(0,i.Z)((0,u.useState)(""),2),s=r[0],l=r[1],h=(0,i.Z)((0,u.useState)("10"),2),m=h[0],v=h[1],Z=(0,i.Z)((0,u.useState)(""),2),g=Z[0],E=Z[1],T=(0,u.useRef)(),C=k(),y=(0,_.Z)(),S=(0,c.Z)((function(e){y("https://api.zhihu.com/slytherin/fallback/".concat(t),{method:"POST",body:{score:e,content:g}})}));return(0,u.useEffect)((function(){var e=(new Date).getTime()>f().get(x+o);!f().get(L+o)||e?(l(""),setTimeout((function(){l("0"),f().set(L+o,"1"),f().set(x+o,(new Date).getTime()+5184e6),T.current=setTimeout((function(){l("")}),6e4)}),6e5)):l("")}),[o]),""===s?null:(0,a.tZ)(p.eV,{block:"editorEvaluatePanel",children:(0,a.tZ)(p.Wi,{zaText:"nps展示",zaType:"Block",children:(0,a.BX)(d.Box,{css:function(e){return{width:"310px",position:"fixed",bottom:"72px",right:"110px",background:e.colors.GBK99A,padding:"20px",boxShadow:"0px 1px 3px rgba(26, 26, 26, 0.1)",zIndex:"101"}},children:[(0,a.tZ)(U,{onClick:function(){l("")}}),"0"===s&&(0,a.BX)(d.Box,{children:[(0,a.tZ)(d.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A}},children:"亲爱的创作者，感谢您对知乎内容的贡献"}),(0,a.tZ)(d.Box,{css:function(e){return{fontSize:"13px",color:e.colors.GBK06A,marginTop:"10px",marginBottom:"20px"}},children:"请选择您对编辑器的满意度，以帮助我们更好的服务于您的创作体验"}),(0,a.tZ)(d.Box,{className:"evaluate-box",children:[1,2,3,4,5,6,7,8,9,10].map((function(e,t){return(0,a.tZ)(M,{zaText:"打分-".concat(e),onClick:function(){clearTimeout(T.current),e<=6?l("1"):e>6&&(l(""),C({text:"感谢您的反馈",delay:2e3}),S(e)),v(e)},children:e},t)}))}),(0,a.BX)(d.Flex,{justifyContent:"space-between",css:function(e){return{color:e.colors.GBK03A,marginTop:"15px",fontSize:"11px",lineHeight:"12px"}},children:[(0,a.tZ)("span",{role:"img","aria-label":"不满意",children:"不满意👎"}),(0,a.tZ)("span",{role:"img","aria-label":"满意",children:"满意👍"})]})]}),"1"===s&&(0,a.BX)(d.Box,{children:[(0,a.tZ)(d.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A,marginBottom:"10px"}},children:"请写下您的意见或建议"}),(0,a.tZ)(d.Box,{children:(0,a.tZ)(A,{className:"Appeal-TextArea",rows:7,placeholder:"请写下您的建议...",css:{width:"270px",height:"85px"},value:g,onChange:function(e){E(e.target.value)}})}),(0,a.tZ)(d.Box,{css:{textAlign:"right"},children:(0,a.tZ)(F,{onClick:function(){l(""),S(m),C({text:"感谢您的反馈",delay:1e3})}})})]})]})})})}},99605:function(e,t){"use strict";t.Z=function(e){return(null==e?void 0:e.length)&&e.filter(Boolean).find((function(e){return"8713324000"===String(e.id)&&"pass"===e.status}))?{fileSizeLimit:31457280}:{fileSizeLimit:10485760}}},76224:function(e,t,n){"use strict";n.d(t,{$$:function(){return s},Cg:function(){return u},Tq:function(){return h},aH:function(){return l},jd:function(){return m},p4:function(){return f},t8:function(){return p},vi:function(){return d}});var o=n(71103),r=n(88483),i=n(16600),a=n(55053),c=n(91355),s=function(){return Boolean(window.__FullScreenAnswerEditor&&!window.__FullScreenAnswerEditor.closed)},u=function(){return Boolean(window.__FullScreenAnswerEditor&&window.__FullScreenAnswerEditor.closed)},l=function(e,t){if(!e)return null;if(s())return window.__FullScreenAnswerEditor.focus(),window.__FullScreenAnswerEditor;var n=function(e){return"FullScreenAnswerEditor_".concat(e)}(e),o=window.location,r=o.search,i=o.host,a=t?"//".concat(i,"/question/").concat(e,"/answer/").concat(t,"/edit").concat(r):"//".concat(i,"/question/").concat(e,"/write").concat(r);return window.__FullScreenAnswerEditor=window.open(a,n)},d=function(e){return e?Object.keys(e).reduce((function(t,n){var a=e[n];return"commercialReportInfo"===n?(0,i.Z)((0,r.Z)({},t),{isReport:Boolean(null==a?void 0:a.isReport)}):(0,i.Z)((0,r.Z)({},t),(0,o.Z)({},n,a))}),{}):e},p=function(e){return e?{commentPermission:e.commentPermission}:e},h=function(e){return e?Object.keys(e).reduce((function(t,n){var a=e[n];return"canReward"===n?(0,i.Z)((0,r.Z)({},t),{rewardTagline:a?c.Sp:""}):(0,i.Z)((0,r.Z)({},t),(0,o.Z)({},n,a))}),{}):e},f=function(e){return e?(e=h(e),Object.keys(e).reduce((function(t,n){var c=e[n];return"commercialReportInfo"===n?(0,i.Z)((0,r.Z)({},t),{isReport:Boolean(null==c?void 0:c.isReport)}):"disclaimerType"===n?(0,i.Z)((0,r.Z)({},t),{disclaimerType:c||"none",isDisclaimerChecked:Boolean(c&&"none"!==c)}):"thankInviter"===n?(0,i.Z)((0,r.Z)({},t),{thankInviterInfo:(0,a.dj)(c)}):"thankInviterStatus"===n?t:(0,i.Z)((0,r.Z)({},t),(0,o.Z)({},n,c))}),{})):e};function m(e,t){if(!e)return{thankInviterStatus:"close",thankInviter:""};var n=e.urlToken,o=e.name,r=e.id;return{thankInviterStatus:"open",thankInviter:"answer"===t?r:JSON.stringify({url_token:n,name:o,id:r})}}},98793:function(e,t,n){"use strict";n.d(t,{j:function(){return d}});var o=n(21620),r=n(84421),i=n(88483),a=n(32554),c=n(68562),s=n(87363),u=n(77568),l=n.n(u),d=(0,s.createContext)({updateFormData:function(){},formData:{}});t.Z=function(e){var t=function(t){(0,r.Z)(s,t);var n=(0,a.Z)(s);function s(){var e;return(0,o.Z)(this,s),(e=n.apply(this,arguments)).state={},e.answerFormDataProps={updateFormData:function(t){return e.setState(t)},getFormData:function(){return e.state}},e}return s.prototype.render=function(){return(0,c.tZ)(d.Provider,{value:(0,i.Z)({},this.answerFormDataProps),children:(0,c.tZ)(e,(0,i.Z)({},this.props,this.answerFormDataProps))})},s}(s.Component);return l()(t,e)}},29713:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var o=n(88483),r=n(16600),i=n(78724),a=n(68562),c=n(74792),s=n(41933),u=n(87363),l=n(3404),d=n(17222),p=n(49236),h=n(91355);function f(e){var t=e.markInfo,n=h.hE[t.markType];if(!n)return null;var o=t.roundtable&&"https://www.zhihu.com/roundtable/".concat(t.roundtable.urlToken);return o?(0,a.tZ)("a",{href:o,children:n}):(0,a.tZ)("span",{children:n})}var m=n(67070);function v(e){var t=e.markInfos,n=(0,u.useMemo)((function(){return t.filter((function(e){return h.hE[e.markType]})).map((function(e,t){return(0,a.BX)(u.Fragment,{children:[0!==t&&"、",(0,a.tZ)(f,{markInfo:e})]},t)}))}),[t]);return n.length?(0,a.BX)(s.CJKSpace,{children:["收录于",n]}):null}function Z(e){var t,n=e.id,s=e.voteupCount,h=e.markInfos,f=e.actorToken,Z=e.action,g=e.concernedUpvoters,E=(0,i.Z)(e,["id","voteupCount","markInfos","actorToken","action","concernedUpvoters"]),T=(0,u.useMemo)((function(){return null!==(t=null==g?void 0:g.filter((function(e){return f!==e.urlToken})))&&void 0!==t?t:[]}),[g,f]);return(0,c.qC)().blockStrategies.isBlockingVote?null:(0,a.tZ)(p.r,{trackCardShow:!0,view:{id:8257},children:(0,a.BX)(l.Text,(0,r.Z)((0,o.Z)({color:"GBL05A",fontSize:14,mt:"16px"},E),{children:[h&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(v,{markInfos:h}),Boolean(s)&&" · "]}),(0,a.tZ)("span",{onClick:function(){return d.Z.trackEvent(null,{id:8258,action:"Click"})},children:(0,a.tZ)(m.Z,{id:n,type:"answer",voteupCount:s,upvotedFollowees:T,too:"voted"===Z})})]}))})}},73804:function(e,t,n){"use strict";n.d(t,{v:function(){return u},m:function(){return m}});var o=n(68562),r=n(52495),i=n(63968),a=n(70577),c=n(27869);function s(e){var t,n=e.answer,a=((0,r.useSelector)((function(e){return(0,c.Mn)(e,null==n?void 0:n.id)}))||{}).result;if(!a)return null;var s=null==n||null===(t=n.paidInfo)||void 0===t?void 0:t.hasPurchased;return(0,o.tZ)(i.Z,{hasPurchased:s,paidContent:a})}var u=(0,a.Z)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?(0,o.tZ)(s,{answer:t}):null})),l=n(87363),d=n(34909),p=n(26223),h=n(92799),f=function(e){var t=e.answer,n=(0,r.useSelector)((function(e){return(0,c.Mn)(e,null==t?void 0:t.id)}))||{},i=n.isRequesting,a=n.error,s=n.result,u=Boolean(!i&&!a&&!s),f=(0,r.useDispatch)();(0,l.useEffect)((function(){u&&f((0,c.bs)(t.id))}),[u,f,t.id]);var m=(0,r.useSelector)(h.Uh),v=(0,p.F)().isDarkMode;return(0,o.tZ)(d.Z,{result:s,extra:{ua:m,isDarkMode:v}})},m=(0,a.Z)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?(0,o.tZ)(f,{answer:t}):null}))},56765:function(e,t,n){"use strict";var o=n(88483),r=n(78724),i=n(68562),a=n(60111),c=n(47859),s=n(52495),u=n(5880),l=n(91355),d=n(87655),p=n(27869),h=n(33855);t.Z=(0,d.Z)((function(e){var t,n=e.disabled,d=e.currentUser,f=e.authRequired,m=e.answer,v=e.isOwner,Z=(0,r.Z)(e,["disabled","currentUser","authRequired","answer","isOwner"]),g=(0,s.useDispatch)(),E=Boolean(!n&&d);(0,a.Z)((function(){E&&g((0,h.X2)(["opposeRight"]))}));var T=(0,c.Z)(f((function(e){g((0,p.i_)(m.id,e,{cardType:m.cardType},m))}),l.q0.vote));return(0,i.tZ)(u.Z,(0,o.Z)({count:m.voteupCount,voting:m.relationship&&m.relationship.voting,isOwner:Boolean(v||(null===(t=m.relationship)||void 0===t?void 0:t.isAuthor)),onVote:T},Z))}))},91449:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(88483),r=n(16600),i=n(68562),a=n(75926),c=n.n(a),s=n(52028),u=n(96606);function l(e){var t=e.questionId,n=e.title,a=e.href,c=e.zaTitleId,l=e.showStickyMark,d=e.showHeightLight,p=e.onClick;return(0,i.BX)("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0,children:[(0,i.tZ)("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(t)}),(0,i.tZ)("meta",{itemProp:"name",content:n}),l&&(0,i.tZ)(u.Z,{}),(0,i.tZ)(s.Link,(0,r.Z)((0,o.Z)({to:a,target:"_blank","data-za-detail-view-element_name":"Title"},c&&{"data-za-detail-view-id":c}),{onClick:p,children:d?(0,i.tZ)("span",{dangerouslySetInnerHTML:{__html:n},className:"AnswerItem-highlight"}):n}))]})}l.propTypes={questionId:c().number.isRequired,title:c().string.isRequired,href:c().string.isRequired,zaTitleId:c().number,showStickyMark:c().bool,onClick:c().func}},80964:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var o=n(88483),r=n(16600),i=n(68562),a=n(3404),c=n(8567);function s(e){var t=(0,c.Z)((function(){return n.e(3584).then(n.bind(n,85638))}));return(0,i.tZ)(a.Box,(0,r.Z)((0,o.Z)({my:"14px",css:{minHeight:20}},e),{children:t?(0,i.tZ)(t,{width:"70px",height:"20px",css:{display:"block"}}):null}))}},15667:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var o=n(88483),r=n(16600),i=n(68562),a=n(3404),c=n(44707),s=n(23e3),u=n(80964),l=n(69045),d=n(87363),p=n.n(d),h=n(70164),f=n(5150),m=n(70175),v=n(16915),Z=Object.assign;var g=function(e){return p().createElement(v.Z,Z({width:"8",height:"10",fill:"none",viewBox:"0 0 8 10"},e),p().createElement("path",{fill:"#121212",fillRule:"evenodd",d:"M1.315 9.302a.6.6 0 0 1-.915-.51v-7.52a.6.6 0 0 1 .914-.51l6.11 3.754a.6.6 0 0 1 0 1.022l-6.11 3.764Z",clipRule:"evenodd"}))},E=function(e,t){return(null==e?void 0:e.plainText)?"".concat(e.plaintext," · "):(0,c.Gz)(t)?"引用创作 · ":null};function T(e){var t=e.videoId,n=e.zvideoId,o=e.title,r=e.playCount,a=void 0===r?0:r,c=e.voteupCount,s=void 0===c?0:c,u=e.isComplete,p=void 0!==u&&u,v=e.startTime,Z=void 0===v?0:v,T=e.creationReferences,C=e.creationRelationship,A=e.shouldExpandState,_=e.itemId,y=e.itemType,S=e.isRecommend,I=Number(Z/1e3),b=(0,d.useRef)({currentTime:0}),w=(0,d.useRef)((0,l.Wn)(t,"*",!0));(0,d.useEffect)((function(){var e=w.current.subscribeMessage((function(e,t){e===l.FP.TIMEUPDATE&&(b.current.currentTime=t.currentTime)}));return function(){return e.unsubscribe()}}),[]);return(0,i.BX)("div",{className:"VideoAnswerPlayer",children:[(0,i.tZ)("div",{className:"VideoAnswerPlayer-video",children:(0,i.tZ)(f.Z,{itemId:_,itemType:y,videoId:t,useSingle:S,zaProps:{type:"Answer",token:_}})}),A&&(0,i.BX)("div",{role:"button",tabIndex:0,"aria-label":"跳转到对应视频",className:"VideoAnswerPlayer-stateBar",onClick:function(){var e=(b.current.currentTime+I).toFixed(1);window.open("https://".concat(m.Z.wwwHost,"/zvideo/").concat(n,"?playTime=").concat(e))},children:[(0,i.BX)("div",{className:"VideoAnswerPlayer-state",children:[(0,i.tZ)("div",{className:"VideoAnswerPlayer-state--title",children:o}),(0,i.BX)("div",{className:"VideoAnswerPlayer-state--data",children:[E(T,C),(0,h.Zh)(a),"播放",s>0?" · ".concat((0,h.Zh)(s),"赞同"):null]})]}),!p&&(0,i.BX)("div",{className:"VideoAnswerPlayer-action",children:[(0,i.tZ)(g,{style:{marginRight:"6px"}}),"完整版"]})]})]})}var C=function(e){var t=e.shouldExpand,n=e.showPlayer,l=e.campaign,d=e.answer,p=e.videoAnswerData,h=e.meta,f=e.videoRef,m=e.alwaysShowVolumeButton,v=e.hideCoCreationFeature,Z=e.isRecommend,g=!v&&(0,c.HE)(null==p?void 0:p.creationRelationship);return(0,i.BX)(i.HY,{children:[n&&(0,i.tZ)(T,(0,o.Z)({itemId:d.id,itemType:d.type,videoRef:f,alwaysShowVolumeButton:m,shouldExpandState:t,isRecommend:Z},p)),h,t&&(0,i.BX)(a.Flex,{mt:"14px",children:[g&&(0,i.tZ)(c.xJ,{mr:"12px"}),(0,i.tZ)(u.Z,{my:"0px"})]}),t&&l&&(0,i.tZ)(s.Z,{item:(0,r.Z)((0,o.Z)({},d),{campaign:l,collapseReason:null,type:"zvideo"})})]})}},60357:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(68562),r=n(87363),i=n(52495),a=n(27869),c=n(33855),s=n(5880),u={up:1,neutral:0,down:-1};function l(e){var t=e.id,n=e.voteupCount,l=e.voting,d=e.isOwner,p=e.answer,h=e.currentUser,f=e.disabled,m=(0,i.useDispatch)();(0,r.useEffect)((function(){!f&&h&&m((0,c.X2)(["opposeRight"]))}),[f,h,m]);var v=(0,r.useCallback)((function(e){m((0,a.i_)(p.id,u[e],{zVideoId:t}))}),[t,m,p.id]);return(0,o.tZ)(s.Z,{type:"zvideo",count:n,voting:l,onVote:v,isOwner:d})}},64937:function(e,t,n){"use strict";function o(e){var t,n=null==e||null===(t=e.reactionInstruction)||void 0===t?void 0:t.rEACTIONANONYMOUS;return void 0!==n?n||"该问题暂不支持启用匿名":""}function r(e){return 0===Number(null==e?void 0:e.id)}n.d(t,{S:function(){return r},i:function(){return o}})},30806:function(e,t,n){"use strict";n.d(t,{Z:function(){return o.Z}});var o=n(27072)},1526:function(e,t,n){"use strict";n.d(t,{Dm:function(){return s},fb:function(){return u},gh:function(){return a},xx:function(){return c}});var o=n(68562),r=n(27869),i=n(18538),a=function(e){var t=e.answer,n=e.canCollapse,r=t.collapsedBy,a=t.relationship,c=(void 0===a?{}:a).isAuthor,s=t.visibleOnlyToAuthor;return c&&s?(0,o.tZ)(i.Z,{}):"org"!==r||n?null:(0,o.BX)("div",{className:"AnswerItem-status",children:["回答被提问机构移至隐藏区（",(0,o.tZ)("a",{href:"/org-intro#org-question",target:"_blank",children:"为什么？"}),"）"]},"negativeLabels")},c=function(e){var t=e.isNormal,n=void 0===t||t,o=e.collapsedBy,r=e.suggestEdit,i=e.collapseReason,a=e.isCollapsed,c=e.question,s=(void 0===c?{}:c).brand,u=(void 0===s?{}:s).isPuQuestion;return!n&&(null==r?void 0:r.unnormalDetails)?{abnormalDetailProps:{abnormalDetail:r.unnormalDetails}}:("community"===o||u)&&a?{collapseReasonProps:{collapseReason:i}}:null},s=function(e){var t=e.answer,n=e.canCollapse,o=e.hideCommercialInviteLabel,i=t.collapsedBy,a=t.relevantInfo,c=void 0===a?{}:a,s=c.relevantType,u=c.brandSpecialExtra,l=void 0===u?{}:u;if((0,r.z)(t)||(0,r.G_)(t)||"org"===i&&!n){if("brand_special"===s&&!o)return{type:"answer",data:l};if("brand_best"===s)return{data:l}}return null},u=function(e){var t=e.annotationDetail,n=e.isNormal,o=void 0===n||n,r=e.collapsedBy;return o&&"community"!==r&&t?{annotationDetail:t}:null}},51587:function(e,t,n){"use strict";var o=n(68562),r=n(87363),i=n(34614);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.contentExpanded,a=t.unescapable,c=e.labelInfo,s=e.hermesLabel;return(0,o.tZ)(r.Fragment,{children:!n&&!a&&(0,o.tZ)(i.vT,{labelInfo:c||s})})}},25043:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var o=n(68562),r=n(3404),i=n(85946);function a(){return(0,o.BX)(r.Flex,{alignItems:"center",mr:"20px",color:"GBL05A",as:"button",href:"",onClick:function(){var e;null===(e=window.aria)||void 0===e||e.start()},css:function(e){return{display:"inline-flex","&:hover":{color:e.colors.GBL01A}}},children:[(0,o.tZ)(i.sh,{size:16,css:{marginRight:6}}),"无障碍"]})}},6081:function(e,t,n){"use strict";var o=n(88483),r=n(16600),i=n(78724),a=n(68562),c=n(17222),s=n(60439),u=n(70175),l=n(90463);t.Z=function(e){var t=e.color,n=void 0===t?"primary":t,d=e.onClick,p=(0,i.Z)(e,["color","onClick"]),h=(0,l.ZP)().themeTransition;return(0,a.tZ)("a",(0,r.Z)((0,o.Z)({href:"//".concat(u.Z.wwwHost),"aria-label":"知乎",onClick:function(e){d&&d(e),c.Z.trackEvent(e.target,{action:"OpenUrl",id:2730},{button:{text:"知乎"}})}},p),{children:(0,a.tZ)(s.Z,{color:n,css:(0,o.Z)({},h("fill"))})}))}},74621:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var o=n(88483),r=n(16600),i=n(68562),a=n(52495),c=n(48457),s=n(15699),u=n(70175),l=n(73587),d=n(40198),p=function(e){var t=(0,a.useSelector)((function(e){return e.env.edition.sogouInput})),n=(0,a.useSelector)(d.ib),p=(0,c.Q4)().trackEvent;return!t&&(0,i.tZ)(s.Z,(0,r.Z)((0,o.Z)({allowSignUp:u.Z.allowSignUp,currentUser:n},e),{showOpenAppButton:!0,handleOpenAppClick:function(){return(0,l.Z)({trackEvent:p,zaV3Text:"顶部打开App按钮",noEnteringSignin:Boolean(n)})}}))}},66220:function(e,t,n){"use strict";n.d(t,{Z:function(){return Le}});var o=n(8672),r=n(21620),i=n(61869),a=n(84421),c=n(88483),s=n(16600),u=n(78194),l=n(32554),d=n(68562),p=n(24076),h=n(67664),f=n(72351),m=n(74792),v=n(61963),Z=n(78209),g=n(47112),E=n.n(g),T=n(75926),C=n.n(T),A=n(87363),_=n(52495),y=n(52028),S=n(3404),I=n(52626),b=n(17222),w=n(39849),R=n(49236),N=n(34261),O=n(28252),D=n(14038),B=n(73464),P=n(95313),k=n(72254),x=function(e){var t=e.className,n=e.onClick,o=e.html,r=e.sourceId,i=(0,A.useCallback)((function(e){b.Z.trackEvent(e.target,{id:9857,action:"Click"}),n&&n(e)}),[n]),a=(0,A.useMemo)((function(){return(0,k.f1)(o,r).catalog}),[o,r]);return(null==a?void 0:a.length)?(0,d.tZ)(R.r,{trackCardShow:!0,view:{id:9856},children:(0,d.tZ)(B.ZP,{preset:"plain",className:t,onClick:i,icon:P.Ll,label:"目录"})}):null},L=n(21353),U=n(37148),F=n(40937),M=n(52857),G=n.n(M),z=n(78724),H=n(30658),q=n(11116),V=n(41812),X=function(e){var t=e.children,n=e.targetId,o=e.active,r=e.setCursor,i=(0,z.Z)(e,["children","targetId","active","setCursor"]);return(0,d.tZ)(S.Text,(0,s.Z)((0,c.Z)({color:o?"GBL01A":"GBK02A",fontWeight:o?"bold":"normal",css:{fontSize:"14px"}},i),{children:(0,d.tZ)(R.r,{module:"Content",moduleName:String(t),children:(0,d.BX)(S.Flex,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(e){b.Z.trackEvent(e.target,{id:9745,action:"Click",name:"弹窗"});var t=document.querySelector("#"+n);r(n),t&&(0,V.TS)(t)},children:[(0,d.tZ)(S.Text,{css:(0,q.S)(1),children:t}),(0,d.tZ)(H.N,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})})}))},W=function(e){return(0,d.tZ)(X,(0,c.Z)({},e))},K={1:W,2:function(e){return(0,d.tZ)(X,(0,c.Z)({pl:"20px"},e))}},j=function(e){var t=e.catalog,n=e.className,o=e.zaContent,r=(0,u.Z)((0,A.useState)(null),2),i=r[0],a=r[1];return(0,A.useEffect)((function(){if(null==t?void 0:t.length){var e=null,n=(0,V.cx)();t.forEach((function(t){var o=document.querySelector("#"+t.targetId);(null==o?void 0:o.getBoundingClientRect().top)<=n+2&&(e=t.targetId)})),a(e)}}),[]),(null==t?void 0:t.length)?(0,d.tZ)(R.r,{trackCardShow:!0,view:{id:9744,name:"弹窗"},content:o,module:"Content",children:(0,d.tZ)(S.Box,{className:E()(n),children:(0,d.tZ)(S.Flex,{flexDirection:"column",css:{fontSize:"12px"},children:t.map((function(e){var t=e.titleLevel,n=e.text,o=e.targetId,r=K[t]||W;return(0,d.tZ)(r,{targetId:o,active:i===o,setCursor:a,children:n},o)}))})})}):null};function Y(){var e=(0,L.Z)([""," 编辑于",""]);return Y=function(){return e},e}var Q=function(e){var t=e.className,n=e.shown,o=e.onClose,r=e.html,i=e.sourceId,a=e.updated,c=e.author,s=e.zaContent,u=(0,A.useMemo)((function(){return(0,k.f1)(r,i).catalog}),[r,i]);return(0,d.tZ)(U.Z,{wrapperClassName:"CatalogModal-wrapper",className:E()("CatalogModal",t),title:"目录",subtitle:G()(Y(),null==c?void 0:c.name,(0,F.KZ)(a)),onClose:o,children:n&&(0,d.tZ)(j,{css:{paddingBottom:"16px"},catalog:u,zaContent:s})})},J=n(60048),$=n(44707),ee=n(4244),te=n(20829),ne=n(35981),oe=n(70175),re=n(14468),ie=n(67694),ae=n(87655),ce=n(26171),se=n(26931),ue=n(92799),le=n(12255),de=n(67184),pe=n(74264),he=n(34614),fe=n(23e3),me=n(63426),ve=n(41191),Ze=n(5880),ge=n(67070),Ee=n(91355),Te=n(43158),Ce=n(45638),Ae=n(30942),_e=n(5671),ye=n(63099),Se=n(25949),Ie=n(46434),be=n(88371),we=n(8905),Re=n(5700),Ne=n(35655),Oe=n(3505),De=n(96606),Be=function(e){return"plain"===e||"special-plain"===e},Pe=Be;function ke(e){var t=(0,re.JP)(e);return t?(0,s.Z)((0,c.Z)({},e),{creationRelationship:t}):e}var xe=function(e){(0,a.Z)(n,e);var t=(0,l.Z)(n);function n(){var e,i,a,s,u,l,p;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).state={commentsShown:!1,commentsAutoFocus:!0,favlistsShown:!1,commentPattern:"fixed",positionStatus:null,guideShown:!1,contentExpanded:!1,hasFetchedLabels:!1,shownCatalogModal:!1,imageAspectRatio:1.6},e.disableAuth=(i=e.props,a=i.router,s=(void 0===a?{}:a).location,u=(void 0===s?{}:s).pathname,l=i.isMobile,p=i.currentUser,l&&!p&&!u.startsWith("/topic")),e.handleCommentsShown=function(t,n){e.props.shouldOia?e.createOpenInAppHandler("comment_article")(t):(e.setState(n),n.commentsShown?e.props.trackOpenCommentAdPromotion():e.props.trackCloseCommentAdPromotion())},e.handleCommentsHide=function(){e.setState({commentsShown:!1}),e.props.trackCloseCommentAdPromotion()},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleFavButtonClick=function(t){var n=e.props,o=n.zaInfos.favlists;n.shouldOia?e.createOpenInAppHandler("comment_article")(t):(b.Z.trackEvent(e.favButtonRef,(0,c.Z)({action:"Collect",element:"Button",is_intent:!0},o&&{id:o})),e.disableAuth?e.handleToggleGuide():e.handleFavlistsShown())},e.handleFavlistsShown=e.props.authRequired((function(){return e.setState({favlistsShown:!0})}),Ee.q0.favlists),e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.toggleCatalogModal=function(){e.setState({shownCatalogModal:!e.state.shownCatalogModal})},e.handleVote=function(t){var n=e.props,o=n.article.id;(0,n.updateArticleVote)(o,t)},e.handleLogMoreClick=function(){var t=e.props.zaInfos.options;b.Z.trackEvent((0,o.Z)(e),(0,c.Z)({action:"Click",element_name:"MoreAction"},t&&{id:t}))},e.loadArticleConcernedVoters=function(){var t=e.props,n=t.concernedUpvoters,o=t.article,r=t.loadArticleConcernedVoters,i=t.currentUser;!n&&i&&r(o.id)},e.handleToggleExpand=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.trackUserAction,r=void 0===o||o,i=e.props,a=i.onToggleExpand,c=i.getTrackUrl,s=i.article,u=i.ua,l=i.trackPromotionClick;if(a&&a(t),t&&(e.loadArticleConcernedVoters(),r)){var d=s.trackUrl?Promise.resolve():c(s.id);d.then((function(){return(0,O.Z)(e.props.article,u)})),l&&l()}e.setState({contentExpanded:t})},e.renderPrefix=function(){var t=e.props.article,n=t.labelInfo,o=t.hermesLabel,r=e.state.contentExpanded;return!n&&!o||r?null:(0,d.tZ)(he.vT,{labelInfo:n||o})},e.createOpenInAppHandler=function(t){var n=e.props.article.id;return function(e){e.preventDefault(),Ee.dd||(0,f.rH)((0,Te.MN)({type:"article",id:n}),{utm_content:t})}},e.handleLike=function(t){return!!e.props.shouldOia&&(e.createOpenInAppHandler("like_article")(t),!0)},e.handleCoverImageLoad=function(t){var n=e.props.article,o=t.target;n.imageUrl===e.coverProps.cover&&o.naturalWidth&&e.setState({imageAspectRatio:o.naturalWidth/o.naturalHeight})},e.handleClickTitle=function(t){var n=e.props,o=n.trackPromotionClick,r=n.article.id,i=n.onClickTitle;t.preventDefault(),window.open(e.href),null==i||i(r),null==o||o()},e}var m=n.prototype;return m.renderLabels=function(){if(!this.state.contentExpanded)return null;var e=this.props,t=e.article,n=e.useNewLabels,o=t.annotationDetail;return(0,d.tZ)(fe.Z,{useOldLabels:!n,annotationProps:o&&{annotationDetail:o},item:t})},m.renderArticleExtraInfo=function(){var e=this.props,t=e.actor,n=e.action,o=e.article,r=o.voteupCount,i=o.id,a=o.type,c=e.concernedUpvoters,s=void 0===c?[]:c,u=e.blockStrategies,l=(void 0===u?{}:u).isBlockingVote,p=t&&t.urlToken;return!r||l?null:(0,d.tZ)("div",{className:"ArticleItem-extraInfo",children:(0,d.tZ)(ge.Z,{id:i,type:a,voteupCount:r,upvotedFollowees:null==s?void 0:s.filter((function(e){return p!==e.urlToken})),too:"voted"===n})},"articleExtraInfo")},m.renderMeta=function(){var e=function(e){var t=e.title,n=e.id,o=e.created,r=e.updated,i=e.commentCount,a=e.imageUrl,c=e.thumbnail;return{headline:t,url:"".concat(Ee.vg,"/p/").concat(n),datePublished:new Date(1e3*o).toISOString(),dateModified:new Date(1e3*r).toISOString(),commentCount:i,image:a||c}}(this.props.article);return Object.keys(e).map((function(t){return(0,d.tZ)("meta",{itemProp:t,content:e[t]},t)}))},m.renderSuggestEdit=function(){var e=this.props.article,t=e.isNormal,n=void 0===t||t,o=e.suggestEdit,r=void 0===o?{}:o,i=r.title,a=r.status,c=r.reason;return a&&!n?(0,d.BX)("div",{className:"AnswerItem-statusContent",children:[(0,d.tZ)("div",{className:"AnswerItem-statusReason",children:c}),(0,d.BX)("div",{className:"AnswerItem-statusDescription",children:["作者修改内容通过后，文章会重新显示恢复正常 ",(0,d.tZ)("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink",children:i})]})]}):null},m.render=function(){var e,t,n=this,o=this.props,r=o.article,i=o.article,a=i.id,l=i.title,f=i.author,m=i.excerpt,g=i.content,T=i.voteupCount,C=i.voting,A=i.type,_=i.created,y=i.updated,I=i.imageUrl,b=i.commentCount,w=i.adminClosedComment,R=i.annotationDetail,O=i.vessayInfo,D=i.creationRelationship,P=i.ipInfo,k=o.preset,L=o.lastreadTouchable,U=o.itemProp,F=void 0===U?"article":U,M=o.ua,G=o.lessExcerpt,z=o.formatContent,H=o.zaInfos,q=H.expand,V=H.title,X=H.voteUp,W=H.voteDown,K=H.toggleComment,j=H.share,Y=H.report,oe=H.options,re=H.getCommentAction,ae=o.renderOptions,ce=o.isSticky,se=o.handleToggleSticky,ue=o.renderActionButtons,le=o.className,he=o.isMobile,fe=o.ecommerce,ge=o.useVessayV2,Ee=o.showHeightLight,Ce=void 0!==Ee&&Ee,_e=o.truncateDisabled,ke=void 0!==_e&&_e,xe=o.currentUser,Le=o.blockStrategies,Ue=o.trackShareAdPromotion,Fe=o.trackPublishCommentAdPromotion,Me=o.readFinishModuleId,Ge=(0,Ae.Z)([(0,Ae.m)(Le)],ue),ze=this.state,He=ze.positionStatus,qe=ze.favlistsShown,Ve=ze.commentsShown,Xe=ze.commentsAutoFocus,We=ze.commentPattern,Ke=ze.contentExpanded,je=ze.shownCatalogModal,Ye=ze.imageAspectRatio,Qe=xe&&xe.urlToken===f.urlToken,Je=this.renderSuggestEdit(),$e="function"==typeof se,et=!function(e){return"special-plain"===e}(k)&&(0,d.tZ)(pe.Z,(0,s.Z)((0,c.Z)({},Pe(k)&&{preset:"plain"}),{author:f,userLinkV2:!0,className:"ArticleItem-authorInfo"}),"authorInfo"),tt=this.renderArticleExtraInfo(),nt=this.renderLabels(),ot=null==D||null===(e=D.coCreation)||void 0===e?void 0:e.refBy,rt=null==D||null===(t=D.reference)||void 0===t?void 0:t.refBy,it=Ke&&(ot||rt)&&(0,d.tZ)(S.Box,{my:"16px",children:(0,d.tZ)($.j7,{type:"article",coCreationRefBy:ot,referenceRefBy:rt})}),at=(0,u.Z)(Be(k)?[[et,nt,it],tt]:[[et,nt,it,tt],null],2),ct=at[0],st=at[1],ut=!Je||Qe,lt=z?z(g||m,r):g||m,dt=!he&&Ke&&(0,J.Z)(r,"article"),pt=Boolean(null==O?void 0:O.enableVideoTranslate),ht=this.coverProps=function(e){return e.thumbnailExtraInfo&&"video"===e.thumbnailExtraInfo.type?{cover:e.thumbnail,hasVideo:!0}:{cover:e.imageUrl||e.thumbnail,hasVideo:!1}}(r);return(0,d.BX)(we.ZP,{className:E()("ArticleItem",le),onRef:function(e){n.contentItem=e},"data-zop":JSON.stringify({authorName:f.name,itemId:a,title:l,type:"article"}),data:r,link:this.href,title:(0,d.BX)(d.HY,{children:[$e&&ce&&(0,d.tZ)(De.Z,{}),(0,d.tZ)(p._o,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:(0,d.tZ)("a",(0,s.Z)((0,c.Z)({href:this.href,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-element_name":"Title"},V&&{"data-za-detail-view-id":V}),{onClick:this.handleClickTitle,children:Ce?(0,d.tZ)("span",{dangerouslySetInnerHTML:{__html:l},className:"ArticleItem-highlight"}):l}))})]}),meta:ct,lastreadTouchable:L,itemProp:F,itemType:"http://schema.org/SocialMediaPosting",itemScope:!0,children:[this.renderMeta(),ut?(0,d.tZ)(Oe.Z,(0,s.Z)((0,c.Z)((0,s.Z)((0,c.Z)({truncateDisabled:ke,className:E()({"ArticleItem-highlight":Ce}),itemProp:"articleBody",data:r,excerpt:z?z(m,r):m,html:lt,ecommerce:fe,onToggleExpend:this.handleToggleExpand,prefix:this.renderPrefix(),before:(0,d.BX)("div",{children:[st,I&&(0,d.tZ)(ye.Z,{mt:"10px",ratio:Ye,children:(0,d.tZ)(h.G6,{width:"100%",height:"100%",src:I,alt:l})})]}),after:(0,d.tZ)(Oe.O,{href:this.href,created:_,updated:y,ipInfo:P}),readFinishModuleId:Me},G?{limit:74}:{}),{onPositionStatusChange:this.handlePositionStatusChange}),ht),{onCoverImageLoad:this.handleCoverImageLoad,zaIds:{expand:q},children:Ge({componentList:[{name:"vote",component:!N.YP.includes(a)&&(he?(0,d.tZ)(me.Z,{id:a,type:A,liked:Boolean(C),count:T,disabled:Qe,onClick:this.handleLike,handleToggleGuide:this.handleToggleGuide,disableAuth:this.disableAuth},"vote"):(0,d.tZ)(Ze.Z,{type:A,count:T,onVote:this.handleVote,voting:C,isOwner:Qe,handleToggleGuide:this.handleToggleGuide,zaIds:{voteUp:X,voteDown:W}},"vote"))},{name:"comment",component:(0,d.tZ)("div",{css:N.YP.includes(a)?{marginLeft:-24}:{},children:(0,d.tZ)(Ie.Z,{onClick:this.handleCommentsShown,commentsShown:Ve,commentClosed:w,count:b,positionStatus:He,zaInfos:{toggleComment:K,getCommentAction:re}},"comment")},"comment")},{name:"catalog",component:dt&&(0,d.tZ)(x,{html:lt,sourceId:r.id,onClick:this.toggleCatalogModal},"catalog")},{name:"share",component:(0,d.tZ)(ve.Z,{id:a,type:"article",url:this.href,title:l,authorName:f&&f.name,positionStatus:He,zaShareId:j,onShare:Ue},"share")},{name:"favlist",component:(!xe||!xe.isOrg)&&(0,d.tZ)(ee.Z,{onRef:function(e){return n.favButtonRef=e},onClick:this.handleFavButtonClick,label:he?"":"收藏"},"favlist")},{name:"sticky",component:!he&&$e&&Qe&&(0,ie.U)(xe)&&(0,d.tZ)(B.ZP,{preset:"plain",onClick:se,icon:ce?v.TX:Z.rh,label:ce?"取消置顶":"置顶"},"sticky")},{name:"report",component:!Qe&&!he&&xe&&(0,d.tZ)(Ne.Z,{id:a,type:A,zaReportId:Y},"report")},{name:"vessay",component:!he&&Qe&&pt&&(0,d.tZ)(ne.Z,{type:"article",id:a,useVessayV2:ge,isAuthor:Qe},"vessay")},{name:"options",component:!he&&(null==ae?void 0:ae((function(){return n.contentItem}),oe))},{name:"annotation",component:!Ke&&(0,d.tZ)(de.Z,{annotationDetail:R},"annotation")}]})})):this.renderSuggestEdit(),ut&&(0,d.tZ)(Se.Z,{content:g,type:"article",urlToken:String(a)}),this.disableAuth&&this.state.guideShown&&(0,d.tZ)(te.Z,{redirectUrl:this.href,urlScheme:(0,Te.MN)({type:"article",id:a}),buttons:[M.Wechat?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],onClose:this.handleToggleGuide}),(0,d.tZ)(be.Z,{parent:r,commentPattern:We,shown:Ve,autoFocus:Xe,onClose:this.handleCommentsHide,onComment:Fe}),(0,d.tZ)(Re.E,{id:a,type:"article",shown:qe,onClose:this.handleFavlistHide,zaEnabled:!0}),dt&&(0,d.tZ)(Q,{shown:je,html:lt,sourceId:r.id,onClose:this.toggleCatalogModal,created:_,updated:y,author:f,zaContent:{type:"Answer",token:String(r.id)}})]})},(0,i.Z)(n,[{key:"href",get:function(){var e=this.props.article.id;return"//".concat(oe.Z.zhuanlanHost,"/p/").concat(e)}}]),n}(A.Component);xe.propTypes={preset:C().string,lessExperpt:C().bool,formatContent:C().func,renderOptions:C().func,zaInfos:C().object,trackPromotionClick:C().func,renderActionButtons:C().func},xe.defaultProps={preset:"primary",zaInfos:{},renderActionButtons:Ce.W9};var Le=(0,I.compose)((0,le.Ib)((function(e){var t=e.article;return{content:{type:"Post",token:String(t.id)}}})),(0,R.a)((function(e){var t=e.article,n=e.trackCardShow,o=void 0===n||n,r=e.zaInfos,i=(void 0===r?{}:r).cardShow;return(0,s.Z)((0,c.Z)({module:"PostItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Post",token:t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:1e3*t.created,parent_token:t.column&&t.column.id,author_member_hash_id:t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}}},i&&{view:{id:i}}),{trackCardShow:o})})),y.withRouter,ae.Z,(0,m.$_)({dataPath:"article"}),m.OW,(0,_.connect)((function(e,t){var n=t.article;return{article:ke(n),ua:e.env.userAgent,ecommerce:(0,w.G_)(e,{type:"article",urlToken:t.article.id}),shouldOia:(0,ue.XE)(e),isMobile:(0,ue.Hu)(e),concernedUpvoters:(0,se.V7)(e,{id:n.id}),useVessayV2:(0,ue.uC)(e,ce.Ti)===ce.Jl}}),{updateArticleVote:se.Pt,getTrackUrl:D.H,loadArticleConcernedVoters:se.Sb}),he.QV,(0,_e._)({dataPath:"article"}))(xe)},63099:function(e,t,n){"use strict";var o=n(88483),r=n(16600),i=n(78724),a=n(68562),c=n(87363),s=n(3404),u=function(e,t){var n=e.ratio,c=void 0===n?1:n,u=e.children,l=(0,i.Z)(e,["ratio","children"]);return(0,a.tZ)(s.Box,(0,r.Z)((0,o.Z)({css:{position:"relative",paddingBottom:"".concat(1/c*100,"%"),height:"0",borderRadius:"inherit"}},l),{ref:t,children:(0,a.tZ)("div",{css:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",borderRadius:"inherit"},children:u})}))};t.Z=(0,c.forwardRef)(u)},98148:function(e,t,n){"use strict";var o=n(88483),r=n(68562),i=n(87363),a=n(74453);function c(){return Promise.all([n.e(6752),n.e(2523),n.e(4823),n.e(559),n.e(8400),n.e(680),n.e(2156),n.e(7936)]).then(n.bind(n,54171))}var s=(0,i.forwardRef)((function(e,t){return(0,r.tZ)(a.Z,(0,o.Z)({ref:t,getComponent:c,newLinkCard:!0},e))}));t.Z=s},74264:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(32554),s=n(68562),u=n(72351),l=n(11116),d=n(47112),p=n.n(d),h=n(75926),f=n.n(h),m=n(87363),v=n(52495),Z=n(52028),g=n(52626),E=n(17222),T=n(70175),C=n(91355),A=n(92799),_=n(43158),y=n(53830),S=n(24336),I=n(67206),b=n(26494),w=n(40198),R=n(97645),N=n.n(R),O=n(62372),D=(0,v.connect)((function(e){var t;return{vipInfo:null===(t=(0,w.ib)(e))||void 0===t?void 0:t.vipInfo}}))((function(e){var t=e.widget,n=e.className,o=e.vipInfo,r=t.id,i=t.url;return(0,s.tZ)(O.Z,{className:n,onClick:function(){var e;(null==o||null===(e=o.widget)||void 0===e?void 0:e.id)!=="".concat(r)&&(N().set("widgetId",r),N().set("widgetUrl",i))},preset:"link",a:!0,to:"https://".concat(T.Z.wwwHost,"/settings/stickers"),children:(0,s.tZ)("img",{src:i,style:{width:"100%"},alt:""})})})),B=n(78194),P=n(69975),k=n(3090),x=n(48457),L=n(59836),U=n(2421),F=n(90837),M={isFollowing:!1,isFollowed:!1,isBlocking:!1,isBlocked:!1,type:null},G=function(e){var t=e.urlToken,n=e.user,o=e.onToggleFollow,r=(0,v.useDispatch)(),i=(0,U.n)(),a=i?n:M,c=(0,B.Z)((0,P.Z)({once:!0,rootMargin:"".concat(500,"px")}),2),u=c[0],l=c[1];(0,m.useEffect)((function(){if(!i)return function(){};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFollowing,n=e.isFollowed,o=e.isBlocking;return"boolean"==typeof t&&"boolean"==typeof n&&"boolean"==typeof o}(n)&&l&&r((0,F._u)(t))}),[r,t,n,l,i]);var d=(null==a?void 0:a.isBlocking)||(null==a?void 0:a.isBlocked),p=(0,x.x3)({elementLocation:{block:{blockText:"详情页关注"},type:"Button",moduleId:"follow_button",content:{type:"User",token:null==a?void 0:a.id,id:null==a?void 0:a.id}}});return(0,s.BX)(s.HY,{children:[a&&!d&&(0,s.tZ)(x.eV,{content:{type:"User",token:a.id,id:a.id},moduleId:"follow_button",block:"详情页关注",children:(0,s.BX)(L.Z,{onRef:p,css:{minWidth:74,padding:0,userSelect:"none"},getButtonPresetAndColor:function(e){return e.isFollowing?{preset:"secondary",color:"grey"}:{preset:"secondary",color:"blue"}},canShowMutualFollowStatus:!0,id:t,type:a.type,isFollowing:a.isFollowing,isFollowed:a.isFollowed,onToggleFollow:o,children:[(0,s.tZ)(k.ZP,{text:!0,center:!0})," 关注"]})}),(0,s.tZ)("div",{ref:u,css:{position:"absolute",bottom:0,right:0,width:1,height:1}})]})};function z(e){var t=e.urlToken,n=e.onToggleFollow,o=(0,v.useSelector)((function(e){return e.entities.users[t]}));return(0,w.xw)(o)?null:(0,s.tZ)(G,{urlToken:t,user:o,onToggleFollow:n})}var H=n(3404),q=n(26223),V=function(e){var t=e.text,n=(0,q.F)();return(0,s.tZ)(H.Box,{css:{color:n.colors.GBK04A,fontSize:14,lineHeight:1.6,fontWeight:"normal"},children:t})},X=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).handleClick=function(t){var n=e.props,o=n.zaId,r=n.zaExtra,i=n.author.urlToken,a=n.isSpecialQuestionOrAnswer,c=n.preventOpenUrl,s=n.isMobile;if(c)t.preventDefault();else if(o&&E.Z.trackEvent(null,{id:o,action:"OpenUrl",element_name:"User"},r),!s){if(a)return location.href="zhihu://people/".concat(i,"?utm_app_name=zhihu_check"),t.preventDefault(),void t.stopPropagation();if(T.Z.isMobileEntry&&e.props.isHuman&&e.props.shouldOia){t.preventDefault();C.dd&&T.Z.isMobileEntry||(0,u.rH)((0,_.MN)({type:"people",id:i},{utm_content:"user_link"}))}}},e.renderDetail=function(t){var n=e.props,o=n.extra,r=n.children,c=n.author,u=n.noHeadline,d=n.coCreationAuthorDescriptionText,p=n.followButtonAtFlexEnd;return d?(0,s.tZ)("div",{className:"AuthorInfo-badge",children:(0,s.tZ)(V,{text:d})}):t&&o||(0,s.tZ)("div",{className:"AuthorInfo-badge",children:r||(0,s.tZ)(y.Z,{className:"AuthorInfo-badgeText",css:p&&{"&.AuthorInfo-badgeText":(0,a.Z)((0,i.Z)({},(0,l.S)(1)),{width:490,whiteSpace:"unset"})},user:c,noHeadline:u})})},e}return n.prototype.render=function(){var e,t="plain"===this.props.preset,n=this.props,o=n.author,r=n.noLink,a=n.avatarSize,c=void 0===a?t?24:38:a,u=n.className,l=n.extra,d=n.itemProp,h=n.roundAvatar,f=n.isMobile,m=n.target,v=n.noDetail,Z=n.noHoverCard,g=n.router,E=n.noBadge,C=n.noVipBadge,A=n.showVipIcon,_=n.followButtonAtFlexEnd,y=n.onToggleFollow,w=null==o||null===(e=o.vipInfo)||void 0===e?void 0:e.widget,R=g.getCurrentLocation().pathname,N=-1!==R.indexOf("people")&&3===R.split("/").length,O=this.renderDetail(t),B=this.props.userLinkV2;return(0,s.BX)("div",{className:p()("AuthorInfo",u,{"AuthorInfo--plain":t}),itemProp:d,itemScope:!0,itemType:"http://schema.org/Person",children:[(0,s.BX)("div",{className:p()("AuthorInfo",{"AuthorInfo--mobile":T.Z.isMobileEntry}),children:[(0,s.tZ)("meta",{itemProp:"name",content:o.name}),(0,s.tZ)("meta",{itemProp:"image",content:o.avatarUrl}),(0,s.tZ)("meta",{itemProp:"url",content:"https://www.zhihu.com/people/".concat(o.urlToken)}),(0,s.tZ)("meta",{itemProp:"zhihu:followerCount",content:o.followerCount}),B&&(0,s.BX)(s.HY,{children:[(0,s.tZ)(b.Z,(0,i.Z)({onClick:this.handleClick,noHoverCard:T.Z.isMobileEntry||f||Z,noLink:r,user:o,className:"AuthorInfo-avatarWrapper",avatarProps:{className:"AuthorInfo-avatar",size:c,round:h}},m&&{target:m})),(0,s.BX)("div",{className:"AuthorInfo-content",children:[(0,s.BX)("div",{className:"AuthorInfo-head",children:[(0,s.tZ)(I.Z,(0,i.Z)({noHoverCard:T.Z.isMobileEntry||f||Z,onClick:this.handleClick,noLink:r,user:o,noBadge:E,noVipBadge:C,showVipIcon:A,className:"AuthorInfo-name"},m&&{target:m})),!t&&l]}),!v&&(0,s.tZ)("div",{className:"AuthorInfo-detail",children:O})]})]}),!B&&(0,s.BX)(s.HY,{children:[(0,s.tZ)(S.Z,(0,i.Z)({onClick:this.handleClick,noHoverCard:T.Z.isMobileEntry||f||Z,noLink:r,className:"AuthorInfo-avatarWrapper",user:o,avatar:!0,avatarProps:{className:"AuthorInfo-avatar",size:c,round:h}},m&&{target:m})),(0,s.BX)("div",{className:"AuthorInfo-content",children:[(0,s.BX)("div",{className:"AuthorInfo-head",children:[(0,s.tZ)(S.Z,(0,i.Z)({noHoverCard:T.Z.isMobileEntry||f||Z,onClick:this.handleClick,className:"AuthorInfo-name",noLink:r,user:o},m&&{target:m})),!t&&l]}),!v&&(0,s.tZ)("div",{className:"AuthorInfo-detail",children:O})]})]})]}),N&&w&&w.id&&(0,s.tZ)(D,{className:"AuthorInfo-Widget",widget:w}),Boolean(o.urlToken)&&_&&(0,s.tZ)(z,{urlToken:o.urlToken,onToggleFollow:y})]})},n}(m.Component);X.propTypes={author:f().object.isRequired,noLink:f().bool,avatarSize:f().number,preset:f().oneOf(["plain","default"]),className:f().string,itemProp:f().string,roundAvatar:f().bool,isMobile:f().bool,noDetail:f().bool,relatedTo:f().string,zaId:f().number,zaExtra:f().object,noHoverCard:f().bool,noHeadline:f().bool,preventOpenUrl:f().bool,noBadge:f().bool,noVipBadge:f().bool,showVipIcon:f().bool,coCreationAuthorDescriptionText:f().oneOf(["视频作者","图文作者"])},X.defaultProps={noLink:!1,roundAvatar:!1,itemProp:"author",noHoverCard:!1,noHeadline:!1,preventOpenUrl:!1,coCreationAuthorDescriptionText:null};var W=(0,g.compose)(Z.withRouter,(0,v.connect)((function(e,t){var n=t.relatedTo,o=t.params,r=["question","answer"].includes(n),i=(0,A.Hu)(e,{includeTablet:!0}),a=!i&&r;return{isHuman:(0,A.H8)(e),shouldOia:(0,A.XE)(e)&&r,isMobile:i,isSpecialQuestionOrAnswer:(0,A.hV)(e,{type:r&&n,id:r?"question"===n?null==o?void 0:o.id:null==o?void 0:o.answerId:""}),followButtonAtFlexEnd:a}})))(X)},60732:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var o=n(8672),r=n(21620),i=n(84421),a=n(32554),c=n(68562),s=n(75926),u=n.n(s),l=n(87363),d=n(52028),p=n(73464),h=n(91355),f=n(98454),m=function(e){var t=e.children,n=e.showPrivacyPage,o=e.authWrapperClassName,r=e.authChild,i=l.Children.only(t),a=r?l.Children.only(r):i;return n?(0,c.tZ)(f.Z,{wrapperClassName:o,loginButton:a}):i},v=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this)).state={expanded:!1},e.onExpand=e.handleExpand.bind((0,o.Z)(e)),e}var s=n.prototype;return s.handleExpand=function(){this.setState({expanded:!0})},s.render=function(){var e=this.props,t=e.topics,n=e.user,o=e.ellipsisLength,r=e.expandable,i=e.privacyEnabled,a=e.showPrivacyPage,s=this.state.expanded,u="等 ".concat(t.length," 个"),l=t;return s||(l=t.slice(0,o)),0===t.length?null:(0,c.BX)("span",{children:[l.map((function(e,t){return(0,c.BX)("span",{children:[(0,c.tZ)(m,{showPrivacyPage:i&&a,authWrapperClassName:"ProfileMainPrivacy-authWrapper",authChild:(0,c.tZ)("span",{className:"ProfileMainPrivacy-pointerWrapper",children:e.name}),children:(0,c.tZ)(d.Link,{to:"".concat(h.rX,"/").concat(n.isOrg?"org":"people","/").concat(n.urlToken,"/creations/").concat(e.id),children:e.name})}),t<l.length-1?"、":" "]},t)})),!s&&t.length>o&&(r?(0,c.tZ)(p.ZP,{preset:"plain",onClick:this.onExpand,children:u}):u),"话题"]})},n}(l.Component);v.propTypes={topics:u().array.isRequired,user:u().object,ellipsisLength:u().number,expandable:u().bool,noHoverCard:u().bool,privacyEnabled:u().bool,showPrivacyPage:u().bool},v.defaultProps={ellipsisLength:3,expandable:!0,noHoverCard:!1};var Z=v},70880:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(87363),s=n(52626),u=n(52495),l=n(78736),d=n(37694),p=n.n(d),h=n(51234),f=n(62740);function m(e,t){var n=t.os,o=t.id,r=t.sessionId,i=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",r).replace("__SESSIONID__",r).replace("__ATOKEN__",o).replace("__AID__",o).replace("__PAGETYPE__",i)}var v=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={urls:null,logged:!1},e.handleObserve=function(t){t&&e.log()},e.log=function(){e.state.logged||Promise.resolve(e.state.urls||e.load().then((function(t){return t?(t=e.normalize(t),e.setState({urls:t}),t):[]}))).then((function(e){return e.forEach((function(e){return e&&(0,h.WY)(e)}))})).then((function(){return e.setState({logged:!0})}))},e.load=function(){var t=e.props,n=t.type,o=t.id;return(0,t.loadBrandEntityTrackUrl)({type:n,id:o}).then((function(e){return e&&e.payload&&e.payload.data}))},e.normalize=function(t){var n=p()(),o=e.props,r=o.ua,i=o.id,a=o.type,c=encodeURIComponent("其他");r.Android?c="android":r.iOS&&(c="ios");var s={os:c,id:i,sessionId:n,type:a};return t.map((function(e){return m(e,s)}))},e}return n.prototype.render=function(){return!this.state.logged&&(0,a.tZ)(l.Z,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})},n}(c.Component),Z=(0,s.compose)((0,u.connect)((function(e){return{ua:e.env.userAgent}}),{loadBrandEntityTrackUrl:f.c1}))(v)},73464:function(e,t,n){"use strict";n.d(t,{rp:function(){return r},EE:function(){return o},ZP:function(){return g}});var o,r,i,a=n(71103),c=n(88483),s=n(16600),u=n(78724),l=n(68562),d=n(47859),p=n(18034),h=n(47112),f=n.n(h),m=n(87363),v=n.n(m),Z={Button:"FEfUrdfMIKpQDJDqkjte",grey:"ZdfrHW7Ef5ZjwFiiBJuS",blue:"JmYzaky7MEPMFcJDLNMG",green:"_uLbatyxkRXPgimqvo45",red:"izzcAj8OQYu6ydgaw42c",primary:"epMJl0lFQuYbC7jrwr_o",secondary:"E211w_M7Hzs0GMB7BEyA",plain:"fEPKGkUK5jyc4fUuT0QP",link:"yXNqP8Bkgas9d_XumHbv",spread:"GMKy5J1UWc7y8NF_V8YA",withIcon:"B46v1Ak6Gj5sL2JTS4PY",iconOnly:"hIwDV_tcL6XN1HprrnAq",withLabel:"RuuQ6TOh2cRzJr6WlyQp",icon:"t2ntD6J1DemdOdvh5FB4"};!function(e){e.Primary="primary",e.Secondary="secondary",e.Outline="outline",e.Plain="plain",e.Link="link"}(o||(o={})),function(e){e.Grey="grey",e.Blue="blue",e.Green="green",e.Red="red"}(r||(r={})),function(e){e.Spread="spread"}(i||(i={}));var g=v().forwardRef((function(e,t){var n,r=e.children,i=e.className,h=e.color,m=e.icon,v=e.label,g=e.size,E=e.onRef,T=e.onClick,C=e.preset,A=void 0===C?o.Outline:C,_=e.component,y=void 0===_?"button":_,S=e.type,I=void 0===S?"button":S,b=e.disabled,w=(0,u.Z)(e,["children","className","color","icon","label","size","onRef","onClick","preset","component","type","disabled"]),R=(0,d.Z)((function(e){e.currentTarget.disabled||b||!T||T(e)})),N=f()("Button",i,Z.Button,(n={},(0,a.Z)(n,"Button--".concat(A),Boolean(A)&&A!==o.Outline),(0,a.Z)(n,"Button--".concat(h),Boolean(h)&&A!==o.Link),(0,a.Z)(n,"Button--".concat(g),Boolean(g)),(0,a.Z)(n,"Button--withIcon",Boolean(m)),(0,a.Z)(n,"Button--withLabel",Boolean(v)),(0,a.Z)(n,"Button--iconOnly",m&&!v),(0,a.Z)(n,Z["".concat(A)],Boolean(A)&&A!==o.Outline),(0,a.Z)(n,Z["".concat(h)],Boolean(h)&&A!==o.Link),(0,a.Z)(n,Z["".concat(g)],Boolean(g)),(0,a.Z)(n,Z.withIcon,Boolean(m)),(0,a.Z)(n,Z.withLabel,Boolean(v)),(0,a.Z)(n,Z.iconOnly,m&&!v),n));return(0,l.BX)(y,(0,s.Z)((0,c.Z)({},w),{type:I,disabled:b,ref:(0,p.Z)(t,E),className:N,onClick:R,children:[m&&(0,l.tZ)(m,{center:!0,text:Boolean(v)||A===o.Plain||A===o.Link,className:f()("Button-zi",Z.icon)}),v,r]}))}))},60048:function(e,t){"use strict";t.Z=function(e,t){return!!e&&(!!(t=t||e.type)&&(("answer"===t||"post"===t||"article"===t)&&(null===(n=e.settings)||void 0===n||null===(o=n.tableOfContents)||void 0===o?void 0:o.enabled)));var n,o}},96979:function(e,t,n){"use strict";n.d(t,{AX:function(){return a},Gs:function(){return r},HG:function(){return i},WG:function(){return d},X:function(){return u},YX:function(){return c},g1:function(){return l},wF:function(){return s}});var o=n(78194),r={success:"success",failure:"failure",loading:"loading"},i={0:"text",1:"image",2:"sticker",6:"ecomcard",7:"plugin"},a={GUESS_YOU_WANT_ASK:"GUESS_YOU_WANT_ASK"},c=Object.entries(i).reduce((function(e,t){var n=(0,o.Z)(t,2),r=n[0];return e[n[1]]=Number(r),e}),{}),s={text:"text",image:"image",sticker:"sticker",ecomcard:"ecomcard",plugin:"plugin"},u=3e5,l=320,d=20},25949:function(e,t,n){"use strict";var o=n(87363),r=n(75926),i=n.n(r),a=n(52495),c=n(39849);function s(e){var t=e.content,n=e.type,r=e.urlToken,i=(0,a.useDispatch)(),s=(0,o.useCallback)((function(){i((0,c.Ll)({content:t,type:n,urlToken:r}))}),[i,t,n,r]),u=(0,a.useSelector)((function(e){return(0,c.G_)(e,{type:n,urlToken:r})}));return(0,o.useEffect)((function(){u||s()}),[u,s]),null}s.propTypes={content:i().string.isRequired,type:i().oneOf(["answer","article"]).isRequired,urlToken:i().string.isRequired},t.Z=s},89237:function(e,t,n){"use strict";function o(e){var t,n,o,r;return Boolean(null==e||null===(t=e.coCreation)||void 0===t||null===(n=t.refTo)||void 0===n||null===(o=n.contents)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.type)}function r(e){var t,n,r,i;return!o(e)&&Boolean(null==e||null===(t=e.reference)||void 0===t||null===(n=t.refTo)||void 0===n||null===(r=n.contents)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.type)}function i(e){var t,n,o,r=null==e||null===(t=e.coCreation)||void 0===t||null===(n=t.refTo)||void 0===n||null===(o=n.contents)||void 0===o?void 0:o[0];return r?"answer"===r.type?r.answer:"article"===r.type?r.article:null:null}function a(e){var t,n,o,r=null==e||null===(t=e.reference)||void 0===t||null===(n=t.refTo)||void 0===n||null===(o=n.contents)||void 0===o?void 0:o[0];return r?"answer"===r.type?r.answer:"article"===r.type?r.article:null:null}function c(e,t){var n=e,o=t.contentAuthor;return o&&n.id!==(null==o?void 0:o.id)?o:n}function s(e){var t,n;return o(e)&&null!==(n=null===(t=i(e))||void 0===t?void 0:t.author)&&void 0!==n?n:null}n.d(t,{AQ:function(){return c},Ey:function(){return i},Gz:function(){return r},HE:function(){return o},YJ:function(){return s},y5:function(){return a}})},44707:function(e,t,n){"use strict";n.d(t,{ZY:function(){return j},xJ:function(){return l},j7:function(){return G},_N:function(){return x},HE:function(){return o.HE},Gz:function(){return o.Gz},SF:function(){return q}});var o=n(89237),r=n(88483),i=n(16600),a=n(68562),c=n(3404),s=n(26223),u=n(58168),l=function(e){var t=(0,s.F)();return(0,a.tZ)(c.Flex,(0,i.Z)((0,r.Z)({width:"58px",height:"20px",bg:(0,u.a)(t.colors.GYL01A).alpha(.08),color:t.colors.GYL01A,alignItems:"center",justifyContent:"center",css:{fontWeight:"normal",fontSize:12,borderRadius:4,overflow:"hidden"}},e),{children:"联合创作"}))},d=n(30658),p=n(48457),h=n(47859),f=n(87363),m=n.n(f),v=n(16915),Z=Object.assign;var g=function(e){return m().createElement(v.Z,Z({width:"20",height:"20",fill:"none",viewBox:"0 0 20 20"},e),m().createElement("path",{fill:"url(#id-1711650925-a)",fillRule:"evenodd",d:"M2.8 2a.8.8 0 0 0-.8.8v11.4a.8.8 0 0 0 .8.8h11.4a.8.8 0 0 0 .8-.8V2.8a.8.8 0 0 0-.8-.8H2.8Zm1.051 1.25a.6.6 0 0 0-.6.6v9.3a.6.6 0 0 0 .6.6h9.3a.6.6 0 0 0 .6-.6v-9.3a.6.6 0 0 0-.6-.6h-9.3Z",clipRule:"evenodd"}),m().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M2.8 2a.8.8 0 0 0-.8.8v11.4a.8.8 0 0 0 .8.8h11.4a.8.8 0 0 0 .8-.8V2.8a.8.8 0 0 0-.8-.8H2.8Zm1.051 1.25a.6.6 0 0 0-.6.6v9.3a.6.6 0 0 0 .6.6h9.3a.6.6 0 0 0 .6-.6v-9.3a.6.6 0 0 0-.6-.6h-9.3Z",clipRule:"evenodd"}),m().createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"url(#id-1711650925-b)",rx:".8"}),m().createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"#06F",rx:".8"}),m().createElement("path",{fill:"#fff",stroke:"#fff",d:"M8.962 11.153h.725V13.5H8.3v-2.754c0-.66.293-1.181.7-1.567.064-.06.129-.116.196-.168a2.654 2.654 0 0 0-.205.227c-.295.369-.53.864-.53 1.415v.5h.5ZM12.974 11.153h.726V13.5h-1.387v-2.754c0-.66.293-1.181.7-1.567.063-.06.129-.116.195-.168a2.657 2.657 0 0 0-.204.227c-.295.369-.53.864-.53 1.415v.5h.5Z"}),m().createElement("defs",null,m().createElement("linearGradient",{id:"id-1711650925-a",x1:"15",x2:"2",y1:"2",y2:"15",gradientUnits:"userSpaceOnUse"},m().createElement("stop",{stopColor:"#06F"}),m().createElement("stop",{offset:"1",stopColor:"#00D1FF"})),m().createElement("linearGradient",{id:"id-1711650925-b",x1:"17.5",x2:"4.5",y1:"4.5",y2:"17.5",gradientUnits:"userSpaceOnUse"},m().createElement("stop",{stopColor:"#06F"}),m().createElement("stop",{offset:"1",stopColor:"#00D1FF"}))))},E=n(91355);function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.title,o=e.question,r=void 0===o?{}:o,i=r.title,s=e.url,u=e.id,l="answer"===t?"原回答：".concat(i):"原文章：".concat(n),f=(0,h.Z)((function(){window.open(s)}));return(0,a.tZ)(p.eV,{content:{type:E.LA[t],token:String(u)},children:(0,a.BX)(p.$U,{shouldTrackShow:!0,zaText:"zvideo_origin_content",zaType:"Card",zaAction:"OpenUrl",extra:{link:{url:s}},as:c.Flex,bg:"GBK10A",padding:"12px 10px 12px 18px",justifyContent:"space-between",onClick:f,css:{cursor:"pointer"},children:[(0,a.BX)(c.Flex,{children:[(0,a.tZ)(g,{css:{marginRight:"6.5px"}}),(0,a.tZ)(c.Text,{color:"GBK06A",fontSize:"14px",lineHeight:"19.6px",children:l})]}),(0,a.tZ)(d.N,{size:20,css:function(e){return{flexShrink:"0",fill:e.colors.GBK06A}}})]})})}var C=n(78194),A=n(72864),_=n(72351),y=n(11116),S=n(34010),I=n(52495),b=n(82096),w=n(70164),R=n(70175),N=n(5625),O=n(32671),D=n(59836),B=function(e){var t=e.author,n=t.author,o=t.identity,r=t.id,i=(0,I.useSelector)((function(e){return(0,N.np)(e,{urlToken:n})})),s=i||{},u=s.avatarUrl,l=s.isFollowing,d=s.name,h=(0,f.useRef)(),m=(0,f.useCallback)((function(){return window.open("https://www.zhihu.com/people/".concat(n))}),[n]),v=(0,f.useCallback)((function(){return h.current.trackEvent({eventType:"Click",elementLocation:{type:"Button",text:l?"取消关注":"关注"},action:l?"UnFollow":"Follow"}),!0}),[l]);return i?(0,a.BX)(p.eV,{content:{type:"User",token:n,id:r},children:[(0,a.tZ)(p.pS,{ref:h}),(0,a.BX)(c.Flex,{mt:"16px",css:{"& + &":{marginTop:"24px"}},alignItems:"center",children:[(0,a.tZ)(A.qE,{url:u,size:38,css:{cursor:"pointer"},onClick:m}),(0,a.BX)(c.Box,{ml:"14px",flex:"1",children:[(0,a.tZ)(c.Box,{color:"GBK03A",fontSize:"15px",lineHeight:"17px",fontWeight:"bold",onClick:m,css:[(0,y.S)(1),{cursor:"pointer"}],children:d}),(0,a.tZ)(c.Box,{color:"GBK04A",fontSize:"14px",lineHeight:"16px",mt:"3px",children:o})]}),(0,a.tZ)(D.Z,{useCustomZa:!0,preset:"primary",type:"people",id:n,isFollowing:l,onClick:v,css:{padding:"0 14px",minWidth:"0px"}})]})]}):null},P=function(e){var t,n,o,r,i,s=e.item,u=e.index;if("ANSWER"===s.type)o="Answer",r=(i=s.answer).question.title;else{if("ARTICLE"!==s.type)return null;o="Post",r=(i=s.article).title}var l=i.id,d=i.thumbnailInfo,h=i.url,f=i.voteupCount,m=i.commentCount,v=null==d||null===(t=d.thumbnails)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url,Z="".concat((0,w.Zh)(f),"赞同 · ").concat((0,w.Zh)(m),"评论");return(0,a.tZ)(p.eV,{content:{type:o,id:String(l)},children:(0,a.BX)(p.$U,{as:"a",view:{elementLocation:{card:{index:u}}},zaType:"Card",zaAction:"OpenUrl",zaText:"视频引用的原文",extra:{link:{url:h}},href:h,target:"_blank",css:function(e){return{marginTop:"16px",display:"flex",alignItems:"center",height:"84px",borderRadius:"8px",padding:"0 12px",backgroundColor:e.colors.GBK10A}},children:[v&&(0,a.tZ)(c.Image,{src:v,width:"60px",height:"60px",mr:"12px",css:{borderRadius:"6px"}}),(0,a.BX)(c.Box,{flex:"1",children:[(0,a.tZ)(c.Box,{fontWeight:"bold",fontSize:"15px",css:(0,y.S)(1),children:r}),(0,a.tZ)(c.Box,{color:"GBK06A",fontSize:"13px",children:Z})]})]})})},k=function(e){var t,n,o=e.id,r=e.subAuthor,i=e.before,s=e.after,u=e.content,l=u||{},h=l.type,m=l.id,v=E.LA[h],Z=(0,I.useDispatch)(),T=(0,I.useSelector)((function(e){return e.zvideos.creationReferences[o]})),w=(0,C.Z)((0,f.useState)(!1),2),N=w[0],D=w[1],k=(0,f.useCallback)((function(){R.Z.isMobileEntry?(0,_.rH)("zhihu://zvideo/".concat(o)):(D(!0),Z((0,O.jl)(o)))}),[Z,o]);return r?(0,a.BX)(a.HY,{children:[(0,a.tZ)(p.eV,{block:"CreationReferencesBar",content:u?{type:v,token:String(m)}:{},children:(0,a.BX)(p.Wi,{zaText:!0,shouldTrackClick:!0,zaType:"Card",as:c.Flex,onClick:k,justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"10px",py:"12px",color:"GBK06A",bg:"GBK10A",fontSize:"14px",lineHeight:"20px",css:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[(0,a.BX)(c.Flex,{children:[(0,a.tZ)(g,{css:{marginRight:"6.5px"}}),(0,a.tZ)(c.Box,{flexShrink:"0",children:i}),(0,a.BX)(c.Flex,{alignItems:"center",mx:"6px",children:[(0,a.tZ)(A.qE,{url:r.avatarUrl,round:!0,size:18,css:function(e){return{border:"1px solid ".concat(e.colors.GBK99A)}}}),(0,a.tZ)(c.Box,{flex:"1",ml:"6px",css:(0,y.S)(1),children:r.name})]}),(0,a.tZ)(c.Box,{flexShrink:"0",children:s})]}),(0,a.tZ)(d.N,{size:20,css:{flexShrink:"0"}})]})}),!R.Z.isMobileEntry&&(0,a.tZ)(b.Z,{onClose:function(){return D(!1)},title:"引用详情",children:N&&(T?(0,a.BX)(p.eV,{block:"CreationReferencesModal",children:[(0,a.tZ)(c.Box,{fontSize:"15px",fontWeight:"bold",children:"作者"}),null===(t=T.authors)||void 0===t?void 0:t.map((function(e){return(0,a.tZ)(B,{author:e},e.author)})),(0,a.tZ)(c.Box,{my:"24px",css:function(e){return{borderTop:"1px solid ".concat(e.colors.GBK10A)}}}),(0,a.tZ)(c.Box,{fontSize:"15px",fontWeight:"bold",children:"视频引用的原文"}),null===(n=T.originalContent)||void 0===n?void 0:n.map((function(e,t){return(0,a.tZ)(P,{item:e,index:t},t)}))]}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(S.O,{variant:"P01"}),(0,a.tZ)(S.O,{variant:"T02"})]}))})]}):null},x=function(e){var t=e.id,n=e.creationRelationship;if(!n)return null;if((0,o.HE)(n)){var i,c=(0,o.Ey)(n);return(null!==(i=null==c?void 0:c.author)&&void 0!==i?i:null)&&(0,a.tZ)(T,(0,r.Z)({},c))}if((0,o.Gz)(n)){var s,u=(0,o.y5)(n),l=null!==(s=null==u?void 0:u.author)&&void 0!==s?s:null,d="answer"===(null==u?void 0:u.type)?"回答":"文章";return l&&(0,a.tZ)(k,{id:t,subAuthor:l,before:"本视频引用",after:"的".concat(d,"进行创作"),content:u})}return null},L=n(8567),U=n(20722),F=function(e){var t=e.zvideo,n=t.id,o=t.imageUrl,r=t.author,i=t.video,a=t.playCount,c=t.voteupCount,s=e.stats,u=s.memberCount,l=s.count;return{zvideoId:n,thumbnail:o,duration:i.duration,avatarUrl:r.avatarUrl,userName:r.name,memberCount:u,videoCount:l,playCount:a,voteupCount:c}};function M(e){var t=e.coCreationRefBy,o=e.referenceRefBy,r=e.type,i=Boolean(t),c=!i&&Boolean(o),s=(0,L.Z)((function(){return n.e(7970).then(n.bind(n,70571))}));if(i){if(s){var u=F(t),l=u.zvideoId,d=u.thumbnail,p=u.duration,h=u.avatarUrl,f=u.userName,m=u.memberCount,v=u.videoCount,Z=u.playCount,g=u.voteupCount;return(0,a.tZ)(s.CoCreationCard,{zaContentId:l,thumbnail:d,duration:p,avatarUrl:h,userName:f,isMultiMember:m>1,videoCount:v,playCount:Z,voteupCount:g,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(l),showSingleVideoUI:!0})}return(0,a.tZ)("div",{css:{height:82}})}if(c){if(s){var E=F(o),T=E.zvideoId,C=E.avatarUrl,A=E.userName,_=E.memberCount;return(0,a.tZ)(s.ReferenceCard,{type:r,zaContentId:T,avatarUrl:C,userName:A,isMultiMember:_>1,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(T),showSingleVideoUI:!0})}return(0,a.tZ)("div",{css:{height:44}})}return null}function G(e){return(0,a.tZ)(U.SV,{replacement:null,children:(0,a.tZ)(M,(0,r.Z)({},e))})}var z=n(74264),H=function(e){var t=e.mainAuthor,n=e.subAuthor,o=function(e){return"plain"===e||"special-plain"===e}(e.preset);return(0,a.BX)(c.Flex,{mt:"10px",children:[(0,a.tZ)(z.Z,(0,i.Z)((0,r.Z)({},o&&{preset:"plain"}),{author:t,coCreationAuthorDescriptionText:"视频作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1,css:{marginRight:o?16:30}})),(0,a.tZ)(z.Z,(0,i.Z)((0,r.Z)({},o&&{preset:"plain"}),{author:n,coCreationAuthorDescriptionText:"图文作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1}))]})};function q(e,t,n,r){var i=(0,o.AQ)(t,n),c=(0,o.YJ)(n);return r&&(0,a.tZ)(H,{preset:e,mainAuthor:i,subAuthor:c},"coCreateAuthors")}var V=n(4428),X=n(8518),W=n(36701),K=(0,n(60594).FH)("coCreation",["CANCEL"]);function j(e){var t,n=e.contentType,o=e.contentId,r=(0,I.useDispatch)(),i=(t=(0,V.Z)((function(){return(0,X.Jh)(this,(function(e){switch(e.label){case 0:return[4,W.Z.confirm("",{title:"你确定要取消联合创作吗？",text:{ok:"同意"}})];case 1:return e.sent(),[4,r((t=n,i=o,{API:{types:K.CANCEL,endpoint:"creation-relationship/cancel",method:"PUT",body:{content_type:t,content_id:String(i)}}}))];case 2:return e.sent(),window.location.reload(),[2]}var t,i}))})),function(){return t.apply(this,arguments)});return(0,a.tZ)(p.$U,{zaType:"Button",zaText:!0,zaBlock:"CancelCoCreation",onClick:i,children:"取消联合创作"})}},69701:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(78724),s=n(32554),u=n(68562),l=n(72864),d=n(24076),p=n(47112),h=n.n(p),f=n(72928),m=n.n(f),v=n(75926),Z=n.n(v),g=n(87363),E=n(52495),T=n(52626),C=n(92799),A=n(91355),_=n(17098),y=n(11331),S=n(17222),I=n(40937),b=n(2886),w=n(98918),R=n(62372);var N=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).load=function(){var t=e.props,n=t.dispatch,o=t.id;n((0,w.ly)(o))},e.track=function(){var t,n=e.props.column;e.hoverCardElement&&n&&(S.Z.setModule(e.hoverCardElement,{module:"ColumnItem"},{card:{content:{type:"Column",token:n.id,item_num:n.articlesCount,follower_num:n.followers,publish_timestamp:1e3*n.updated,author_member_hash_id:null===(t=n.author)||void 0===t?void 0:t.id}}}),S.Z.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.toggler,o=t.column,r=t.id,s=t.isLoading,l=t.onRef,d=(0,c.Z)(t,["toggler","column","id","isLoading","onRef"]),p=o||{},h=p.title,f=p.intro,m=p.itemsCount,v=p.voteupCount,Z=p.lastArticle,g=p.articlesCount,E=p.followers,T=Z||{},C=T.title,S=T.created,w="".concat(A.i7,"/column/").concat(r);return(0,u.BX)(_.Z,(0,a.Z)((0,i.Z)({toggler:n,preventCloseOnTarget:!0,isLoading:s,onOpen:this.handleOpen,size:"large"},d),{ref:function(t){l&&"function"==typeof l&&l(t),e.hoverCardElement=t},children:[(0,u.tZ)(_.O,{title:(0,u.tZ)("a",{target:"_black",href:w,children:h})}),f,Z&&(0,u.BX)("div",{children:[(0,u.tZ)(y.x8,{text:!0,center:!0})," 最后更新",(0,u.tZ)("span",{className:"HoverCard-separate",children:" | "}),C,(0,u.BX)("span",{children:["（",(0,I.rL)(S),"）"]})]}),(0,u.tZ)("div",{children:(0,u.BX)(b.Z,{children:[(0,u.tZ)(b.Z.Item,{tag:R.Z,preset:"plain",a:!0,to:w,name:m>=0?"内容":"文章",value:null!=m?m:g}),(0,u.tZ)(b.Z.Item,{tag:R.Z,preset:"plain",a:!0,to:w,name:v>=0?"赞同":"关注",value:null!=v?v:E})]})})]}))},n}(g.Component),O=(0,E.connect)((function(e,t){var n=t.id,o=e.entities.columns,r=e.loading.local;return{column:o[n],isLoading:Boolean(r["column/".concat(n)])}}))(N),D=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e,t=this.props,n=t.isMobile,o=t.column,r=o.title,s=o.imageUrl,p=o.id,f=t.avatar,v=t.avatarProps,Z=t.noHoverCard,g=t.style,E=t.className,T=t.children,C=(0,c.Z)(t,["isMobile","column","avatar","avatarProps","noHoverCard","style","className","children"]),_=void 0===Z?n:Z;return e=f?(0,u.tZ)(l.qE,(0,i.Z)({url:s,alt:r},v)):T||r,_||(e=(0,u.tZ)(O,{toggler:e,id:p})),n&&A.dd?e:(0,u.tZ)(d._o,{zaAction:"OpenUrl",zaEventType:"Click",zaType:"Text",children:(0,u.tZ)("a",(0,a.Z)((0,i.Z)({style:g,className:h()("ColumnLink",E),href:"".concat(A.i7,"/column/").concat(p)},m()(C,["dispatch"])),{children:e}))})},n}(g.Component);D.propTypes={column:Z().object.isRequired,avatar:Z().bool,avatarProps:Z().object,noHoverCard:Z().bool,style:Z().object,className:Z().string,children:Z().node},D.defaultProps={avatar:!1};var B=(0,T.compose)((0,E.connect)((function(e){return{isMobile:(0,C.Hu)(e,{includeTablet:!0})}})))(D)},57886:function(e,t,n){"use strict";var o=n(88483),r=n(16600),i=n(78724),a=n(78194),c=n(68562),s=n(11950),u=n(47859),l=n(87363),d=n(58146),p=n(52495),h=n(3404),f=n(17222),m=n(83329),v=n(82096),Z=n(79926),g=n(73464),E=n(42116),T=n(20984),C=n(98918),A=n(40198),_=function(e){var t=e.required,n=e.getErrorText,r=e.initialValue,s=e.isModal,u=(0,i.Z)(e,["required","getErrorText","initialValue","isModal"]),d=(0,a.Z)((0,l.useState)(null!=r?r:""),2),p=d[0],f=d[1],v=n(p),Z=Boolean(!v&&(!t||p)),g=(0,l.useMemo)((function(){return(0,c.BX)(h.Flex,{mx:s?"0":"24px",flexDirection:"column",children:[(0,c.tZ)(m.Z,(0,o.Z)({css:{width:"100%"},value:p,onChange:function(e){return f(e.target.value)}},u)),(0,c.tZ)(h.Text,{mt:"8px",mb:"12px",minHeight:"22px",color:"GRD03A",fontSize:"15px",textAlign:"end",children:v})]})}),[s,p,u,v]);return[p,Z,g]},y=function(e){return function(t){var n=t.length-e;return n>0?"超出 ".concat(n," 个字"):(0,E.Vq)(t)?"不能包含 emoji":/^\s+$/.test(t)?"不能为纯空白字符":""}};t.ZP=function(e){var t=e.done,n=e.editing,i=e.columnId,m=e.isModal,E=void 0===m||m,S=e.disableRedirect,I=(0,p.useDispatch)(),b=(0,T.Z)(),w=(0,p.useSelector)((function(e){return e.entities.columns[i]})),R=(0,p.useSelector)(A.ib).hasApplyingColumn,N=(0,a.Z)(_({name:"专栏名称",required:!0,getErrorText:y(20),placeholder:"请输入专栏名称",initialValue:null==w?void 0:w.title,isModal:E}),3),O=N[0],D=N[1],B=N[2],P=(0,a.Z)(_({name:"一句话介绍",required:!1,getErrorText:y(25),placeholder:"请输入一句话介绍",multiline:!0,rows:4,initialValue:null==w?void 0:w.intro,isModal:E}),3),k=P[0],x=P[1],L=P[2],U=(0,a.Z)((0,l.useState)(null==w?void 0:w.acceptSubmission),2),F=U[0],M=U[1],G=n,z=function(){f.Z.trackEvent(null,{id:8173,action:"Click"})},H=(0,u.Z)((function(e){e.preventDefault(),z(),I((0,Z.Gw)(i,(0,r.Z)((0,o.Z)({},w),{intro:k,title:O,acceptSubmission:F}))).then((function(){b.alert("修改成功！该改动将在一个工作日内审核后生效。").then(t)}))}));return(0,l.useEffect)((function(){I((0,A.sF)(["hasApplyingColumn"]))}),[I]),(0,l.useEffect)((function(){R&&b.alert("你的专栏创建申请正在受理中。同时只能申请一个专栏。",{title:"你有正在申请的专栏",ok:"知道了"}).then((function(){t&&t()}))}),[t,R,b]),R?null:(0,c.BX)("div",{children:[!E&&(0,c.tZ)(d.ql,{title:n?"修改专栏介绍":"新建专栏"}),(0,c.tZ)(h.Flex,{fontSize:"24px",justifyContent:"center",mt:"40px",mb:"32px",fontWeight:"bold",children:n?"修改专栏介绍":"新建专栏"}),B,L,G&&(0,c.BX)(h.Flex,{justifyContent:"space-between","align-items":"center",mt:"-4px",fontSize:15,color:"GBL05A",children:["接受他人自荐内容",(0,c.tZ)(s.Z,{checked:F,onChange:function(e){M(e.target.checked)}})]}),(0,c.BX)(v.w,{direction:"horizontal",css:{marginTop:G?32:48},children:[E&&(0,c.tZ)(g.ZP,{color:g.EE.Primary,onClick:function(){return t&&t()},children:"取消"}),(0,c.tZ)(g.ZP,{type:"submit",preset:g.rp.Blue,color:g.EE.Primary,disabled:!D||!x,onClick:n?H:function(e){e.preventDefault(),z(),I((0,C.PG)({title:O,intro:k})).then((function(e){var n=e.res;n.payload.manualCensor?b.alert("已收到您的申请，知乎会在 3 个工作日内处理并通过私信反馈结果。",{title:"正在审核",ok:"完成"}).then((function(){t&&t()})):(S||(location.href="https://www.zhihu.com/column/".concat(n.payload.id)),t&&t())})).catch((function(e){b.alert(e.payload.message,{title:"出错了",ok:"知道了"}).then((function(){t&&t()}))}))},children:n?"保存":"新建专栏"})]})]})}},60414:function(e,t,n){"use strict";var o=n(68562),r=n(37148),i=n(57886);t.Z=function(e){var t=e.onClose,n=e.shown,a=e.editing,c=void 0!==a&&a,s=e.columnId,u=e.disableRedirect;return(0,o.tZ)(r.Z,{onClose:t,size:"large",children:n&&(0,o.tZ)(i.ZP,{isModal:!0,editing:c,columnId:s,done:t,disableRedirect:u})})}},46434:function(e,t,n){"use strict";var o=n(21620),r=n(84421),i=n(65390),a=n(88483),c=n(32554),s=n(68562),u=n(45405),l=n(75926),d=n.n(l),p=n(87363),h=n(17222),f=n(48457),m=n(70164),v=n(73464),Z=n(38793),g=n(70175),E=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).buttonRef=(0,p.createRef)(),e.handleClick=function(t){var n=e.props,o=n.zaInfos,r=o.toggleComment,c=o.getCommentAction,s=n.positionStatus,u=n.onClick,l=n.commentsShown;if(h.Z.trackEvent(e.buttonRef.current,(0,a.Z)({action:c?c(!l):"Comment",element:"Button",is_intent:!0},r&&{id:r})),u){var d="fixed"===s||g.Z.isMobileEntry?"fixed":"bottom",p={commentsShown:!e.props.commentsShown,commentsAutoFocus:!(0,i.Z)(t,KeyboardEvent),commentPattern:d};(0,i.Z)(t,KeyboardEvent)&&"bottom"===d&&e.buttonRef.current.focus(),u(t,p)}},e}var l=n.prototype;return l.componentDidMount=function(){this.props.onInstance(this)},l.componentWillUnmount=function(){this.props.onInstance(null)},l.render=function(){var e,t=this.props,n=t.className,o=t.count,r=t.commentsShown,i=t.commentClosed;if(r)e="收起评论";else{var a=o&&!i;e=g.Z.isMobileEntry?a?"评论 ".concat((0,m.Zh)(o).trim()):"评论":a?"".concat((0,m.uf)(o)," 条评论"):"添加评论"}return(0,s.BX)(p.Fragment,{children:[(0,s.tZ)(Z.bY,{input:"c",action:this.handleClick}),(0,s.tZ)(f.$U,{as:v.ZP,zaAction:r?"Collapse":"Expand",zaText:r?"收起评论":"展开评论",zaBlock:r?"收起评论":"展开评论",zaType:"Button",onRef:this.buttonRef,preset:"plain",className:n,onClick:this.handleClick,icon:u.b,label:e})]})},n}(p.Component);E.propTypes={commentsShown:d().bool,count:d().number,zaInfos:d().shape({id:d().number,getCommentAction:d().func}),onInstance:d().func},E.defaultProps={zaInfos:{},onInstance:function(){return null}},t.Z=E},88371:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(75926),s=n.n(c),u=n(87363),l=n(52495),d=n(48457),p=n(37148),h=n(88483),f=n(8567),m=function(e,t){var n=(0,u.useRef)(Boolean(e));return n.current!==t&&Boolean(e)===t&&(n.current=Boolean(e)),n.current},v=function(e){var t=m(e.shown,!0),o=(0,f.Z)((function(){return Promise.all([n.e(6248),n.e(9804),n.e(213)]).then(n.bind(n,9769))}),t);return o?(0,a.tZ)(o,(0,h.Z)({},e)):null},Z=n(73587),g=n(92799),E=n(52028),T=n(70175),C=["answer","question","article","pin","zvideo","club_post","videoanswer","edu_section"];var A=(0,E.withRouter)((function(e){var t=e.parent.type,o=!T.Z.isMobileEntry&&C.includes(t),r=(0,f.Z)((function(){return n.e(9521).then(n.bind(n,8723))}),!o),i=(0,f.Z)((function(){return n.e(9521).then(n.bind(n,43047))}),o),c=o?i:r;return c?(0,a.tZ)(c,(0,h.Z)({},e)):null})),_=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).zaRef=(0,u.createRef)(),e.handlePackup=function(){var t=e.props,n=t.onClose,o=t.commentPattern;n&&n(),"bottom"===o&&window.scrollTo(0,e.originPageYOffset)},e.openInApp=function(){(0,Z.Z)({trackEvent:e.zaRef.current.trackEvent,zaV3Text:"评论弹层",noEnteringSignin:Boolean(e.props.currentUser)})},e}var c=n.prototype;return c.componentDidUpdate=function(e){"bottom"===this.props.commentPattern&&this.props.shown&&!e.shown&&(this.originPageYOffset=window.pageYOffset)},c.render=function(){var e=this.props,t=e.className,n=e.containerClassName,o=e.shown,r=e.showPackupButton,i=e.parent,c=e.isSelf,s=e.commentPattern,u=e.commentInputPosition,l=e.onClose,h=e.byComment,f=e.targetLink,m=e.notificationId,Z=e.needLoadCommentPermission,g=e.isMobile,E=e.onOrderChange,T=e.onItemLike,C=e.onPaginationClick,_=e.onComment,y=e.autoFocus,S=e.onMount,I=e.zaInfo,b=e.useBizComment,w=void 0!==b&&b,R=e.ABUseBizComment;if(w||R||!g){var N=i.id,O=i.type,D=i.author;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(d.pS,{ref:this.zaRef}),(0,a.tZ)(v,{shown:o,className:t,resourceId:String(N),resourceType:O,isSelf:c,author:D,commentPattern:s,hideFoldButton:!r,hideBottomEditorShadow:!r,byComment:h,targetLink:f,onMount:S,onClose:this.handlePackup,onComment:_,openInApp:this.openInApp})]})}return o?"bottom"===s?(0,a.tZ)(A,{className:t,containerClassName:n,autoFocus:y,parent:i,commentPattern:s,commentInputPosition:u,showPackupButton:r,handlePackupButton:this.handlePackup,needLoadCommentPermission:Z,isMobile:g,onOrderChange:E,onItemLike:T,onPaginationClick:C,onMount:S,zaInfo:I}):(0,a.tZ)(p.Z,{size:"fullPage",onClose:l,maskClosable:!1,children:o&&"fixed"===s&&(0,a.tZ)(A,{className:t,containerClassName:n,parent:i,commentPattern:s,byComment:h,targetLink:f,notificationId:m,needLoadCommentPermission:Z,onOrderChange:E,onItemLike:T,onPaginationClick:C,onMount:S,zaInfo:I})}):null},n}(u.Component);_.propTypes={className:s().string,containerClassName:s().string,byComment:s().oneOfType([s().number,s().string]),parent:s().object,shown:s().bool,showPackupButton:s().bool,commentPattern:s().string,commentInputPosition:s().oneOf(["top","bottom"]),onClose:s().func,needLoadCommentPermission:s().bool,isMobile:s().bool,onOrderChange:s().func,onItemLike:s().func,onPaginationClick:s().func,autoFocus:s().bool,onMount:s().func,zaInfo:s().object},_.defaultProps={commentPattern:"fixed",showPackupButton:!0,commentInputPosition:"bottom"};var y=(0,l.connect)((function(e){return{isMobile:(0,g.Hu)(e),ABUseBizComment:"1"===(0,g.uC)(e,"use_biz_comment")}}))(_)},63328:function(e,t,n){"use strict";var o=n(68562),r=n(72351),i=n(27200),a=n(47859),c=n(52495),s=n(52028),u=n(73464),l=n(91355),d=n(43158),p=n(96666),h=n(92799);t.Z=(0,s.withRouter)((function(e){var t=e.parent,n=t.type,s=t.id,f=t.question,m=e.location.pathname,v=(0,h.dD)(),Z=(0,c.useSelector)((function(e){var t=null==m?void 0:m.includes("/answer/"),n=!t&&(null==m?void 0:m.includes("/question/"));return(0,h.hV)(e,{type:t?"answer":n?"question":"",id:s||(null==f?void 0:f.id)})})),g=(0,a.Z)((function(e,t){e&&e.stopPropagation(),l.dd&&v||("zvideo"!==n?Z?location.href="zhihu://".concat(n,"/").concat(s,"?utm_app_name=zhihu_check"):((0,r.rH)((0,d.MN)({type:n,id:s},{launch_button:t})),e.preventDefault()):(0,r.rH)((0,d.MN)({type:n,id:s},{launch_button:t})))}));return(0,o.tZ)("div",{className:"CommentsForOia",children:(0,o.tZ)(i.ZP,{css:{margin:0},showInteractions:!1,resourceType:n,resourceId:String(s),showCommentInput:!1,openInApp:function(e){return g(e,p.pA.comment_list)},customHeader:function(){return null},customFooter:function(e){return e<=2||l.dd?null:(0,o.tZ)(u.ZP,{color:"blue",preset:"primary",onClick:function(e){return g(e,p.pA.comment_more)},children:"打开 App 查看更多评论"})}})})}))},70538:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var o=n(68562),r=n(47112),i=n.n(r),a=n(59035);var c=function(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var r=n.tail,c=r.url,s=r.message;return(0,o.BX)("a",{className:i()("CommercialQuestionTail",t),href:c,children:[s,(0,o.tZ)(a.n,{className:"CommercialQuestionTail-Icon",center:!0,text:!0})]})}},81525:function(e,t,n){"use strict";var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(47112),s=n.n(c),u=n(87363),l=n(37148),d=n(73464),p=n(70175),h=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).handleSubmit=function(){var t=e.props,n=t.onSubmit,o=t.onCancel,r=t.needCancel;(void 0===r||r)&&o(),n()},e}return n.prototype.render=function(){var e=this.props,t=e.title,n=e.subtitle,o=e.shown,r=e.onCancel,i=e.className,c=e.isMobile,u=e.confirmText,h=e.cancelText,f=e.showButtonHorizontal,m=e.showConfirmButtonRight,v=(0,a.tZ)(d.ZP,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:u||"确认"},"confirm"),Z=(0,a.tZ)(d.ZP,{onClick:r,children:h||"取消"},"cancel"),g=p.Z.isMobileEntry||c||m?[Z,v]:[v,Z];return(0,a.tZ)(l.Z,{wrapperClassName:"ConfirmModal-wrapper",className:s()("ConfirmModal",i),title:t,size:p.Z.isMobileEntry||c?"small":"default",subtitle:n,onClose:r,closeButton:!1,buttonGroupOnly:!0,children:o&&(0,a.tZ)(l.w,{direction:p.Z.isMobileEntry||c||f?"horizontal":"vertical",children:g})})},n}(u.Component);t.Z=h},8905:function(e,t,n){"use strict";n.d(t,{PG:function(){return b},eX:function(){return y},n1:function(){return _},qb:function(){return S}});var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(78724),s=n(32554),u=n(68562),l=n(24076),d=n(47112),p=n.n(d),h=n(72928),f=n.n(h),m=n(87363),v=n(48457),Z=n(91840),g=n(38793),E=n(47496),T=n(28483);function C(e){return!!e&&!(Array.isArray(e)&&!e.some(Boolean))}function A(e){var t=e.onRef,n=e.listClassName,o=e.itemClassName,r=e.className,s=e.children,l=(0,c.Z)(e,["onRef","listClassName","itemClassName","className","children"]);return(0,u.tZ)("div",(0,a.Z)((0,i.Z)({ref:t,className:p()(n,r)},l),{children:m.Children.map(s,(function(e){return"string"==typeof e?(0,u.tZ)("span",{className:o,children:e}):e?(0,m.cloneElement)(e,{className:p()(o,e.props.className)}):e}))}))}var _=function(e){return(0,u.tZ)(A,(0,i.Z)({listClassName:"ContentItem-cells",itemClassName:"ContentItem-cell"},e))},y=function(e){return(0,u.tZ)(A,(0,i.Z)({listClassName:"ContentItem-actions",itemClassName:"ContentItem-action"},e))},S=function(e){return(0,u.tZ)(A,(0,i.Z)({listClassName:"ContentItem-status",itemClassName:"ContentItem-statusItem"},e))},I=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).onRef=function(t){e.domNode=t,e.props.onRef&&e.props.onRef(t)},e.onAccessContent=function(t,n){n===document.activeElement&&window.open(e.props.link)},e}var d=n.prototype;return d.componentDidMount=function(){var e=this;(0,Z.y3)(this.domNode,(function(){var t=e.props,n=t.data,o=void 0===n?{}:n,r=o.type,i=o.id,a=t.lastreadTouchable;t.currentUser&&a&&r&&i&&(0,T.ZP)("article"===r?"post":r,i,T.Qm)}))},d.render=function(){var e,t=f()(this.props,["noTrackCardShow","lastreadTouchable","data","onRef","dispatch","currentUser","isLogin"]),n=t.className,o=t.title,r=t.meta,s=t.children,d=t.extra,h=t.image,m=t.link,Z=(0,c.Z)(t,["className","title","meta","children","extra","image","link"]),E=(0,u.BX)(u.HY,{children:[o&&(0,u.tZ)(v.eV,{block:"卡片标题跳转",children:(0,u.tZ)("h2",{className:"ContentItem-title",children:(null===(e=o.props)||void 0===e?void 0:e.href)?(0,u.tZ)(l._o,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:o}):(0,u.tZ)("span",{children:o})})}),C(r)&&(0,u.tZ)("div",{className:"ContentItem-meta",children:r})]});return(0,u.BX)("div",(0,a.Z)((0,i.Z)({ref:this.onRef,className:p()("ContentItem",n)},Z),{children:[m&&(0,u.tZ)(g.bY,{input:"enter",action:this.onAccessContent}),h||d?(0,u.BX)("div",{className:"ContentItem-main",children:[h&&(0,u.tZ)("div",{className:"ContentItem-image",children:h}),(0,u.tZ)("div",{className:"ContentItem-head",children:E}),d&&(0,u.tZ)("div",{className:"ContentItem-extra",children:d})]}):E,s]}))},n}(m.Component),b={plain:"plain",default:"default",interactive:"interactive"};t.ZP=(0,E.Z)(I)},1168:function(e,t,n){"use strict";n.d(t,{zV:function(){return C},sJ:function(){return R},ZP:function(){return A}});var o=n(78194),r=n(68562),i=n(59591),a=n(69975),c=n(21845),s=n(88483),u=n(16600),l=n(78724),d=n(12232),p=n(70981),h=n(47112),f=n.n(h),m=n(75926),v=n.n(m),Z=function(e){var t=e.visible,n=e.children;return(0,r.tZ)("div",{className:f()("CornerAnimayedFlex",{"CornerAnimayedFlex--hidden":!t}),children:n})};Z.defaultProps={visible:!0};var g=Z,E=function(e){var t=e.className,n=e.visible,o=e.tooltip,i=e.children,a=(0,l.Z)(e,["className","visible","tooltip","children"]);return(0,r.tZ)(g,{visible:n,children:(0,r.tZ)(d.Z,(0,u.Z)((0,s.Z)({},a),{"data-tooltip":o,"data-tooltip-position":"left","data-tooltip-will-hide-on-click":!0,className:f()(t,"CornerButton"),"aria-label":o,preset:"plain",css:function(e){return(0,u.Z)((0,s.Z)({display:"flex",alignItems:"center",justifyContent:"center",background:e.colors.GBK99A,borderRadius:"4px",width:"40px",height:"40px",color:e.colors.GBL05A},(0,p.d)(e)),{"&:hover":{background:e.colors.GBK08A}})},children:i}))})};E.propTypes={className:v().string,tooltip:v().string.isRequired,visible:v().bool,children:v().node};var T=E,C=function(e){var t=e.className,n=e.onClick,s=e.threshold,u=void 0===s?1200:s,l=(0,o.Z)((0,a.Z)(),3),d=l[0],p=l[1],h=l[2];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(T,{visible:!p&&!!h,className:t,tooltip:"回到顶部",onClick:function(e){n&&n(e),e.defaultPrevented||window.scrollTo({top:0,behavior:"smooth"})},children:(0,r.tZ)(c.z,{"aria-hidden":!0})}),(0,r.tZ)(i.Z,{children:(0,r.tZ)("div",{ref:d,css:{position:"absolute",top:0,height:u}})})]})},A=function(e){var t=e.className,n=e.children;return(0,r.tZ)("div",{className:f()("CornerButtons",t),children:n})},_=n(21620),y=n(84421),S=n(32554),I=n(87363),b=n(46044),w=function(e){(0,y.Z)(n,e);var t=(0,S.Z)(n);function n(){return(0,_.Z)(this,n),t.apply(this,arguments)}var o=n.prototype;return o.navigationToZhiyisheng=function(){location.href="https://www.zhihu.com/messages/3d198a56310c02c4a83efb9f4a4c027e?message=".concat(encodeURIComponent("您好，我遇到的问题的场景是：\n具体功能是：\n具体反馈是："))},o.render=function(){var e=this.props.className;return(0,r.tZ)(T,{className:e,tooltip:"建议反馈",onClick:this.navigationToZhiyisheng,children:(0,r.tZ)(b.a,{"aria-label":"建议反馈"})})},n}(I.Component);w.propTypes={className:v().string};var R=w},51088:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var o=n(68562),r=n(47112),i=n.n(r),a=n(87363),c=n(17222),s=n(82096),u=n(73464),l=n(62372),d=n.p+"assets/background_blue.970aad09.svg",p=n.p+"assets/liukanshan_coin.32323a56.svg",h=n.p+"assets/liukanshan_loudspeaker.7c5d2423.svg",f=n.p+"assets/liukanshan_paper.6d897558.svg",m={answerAdmireCouldOpen:{image:p,title:"开启「赞赏」权益",content:"你已经获得了「赞赏」权益，使用「赞赏」可以得到更多收益。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/reward/community",detailViewName:"admire",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},answerAdmireCouldUse:{image:p,title:"使用「赞赏」权益",content:"你可以为这篇内容开启「赞赏」。「赞赏」开启后，读者将可以付费支持你的创作。",buttonText:"开启赞赏",detailViewName:"admire",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},promotionCouldOpen:{image:h,title:"开启「自定义推广」权益",content:"你已经获得了「自定义推广」权益，使用「自定义推广」可以让内容得到更多展示机会。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},promotionCouldUse:{image:h,title:"使用「自定义推广」权益",content:"你可以使用「自定义推广」权益，使这篇内容获得更多展示机会。快去使用权益吧。",buttonText:"立即使用权益",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},recommendationCouldOpen:{image:f,title:"开启「内容自荐」权益",content:"你已经获得了「内容自荐」权益，优质内容通过自荐后可以展示给更多人。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/recommend",detailViewName:"recommend",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},recommendationCouldUse:{image:f,title:"使用「内容自荐」权益",content:"你可以使用「内容自荐」权益，让更多人看到这篇内容。快去使用权益吧。",buttonText:"立即自荐",detailViewName:"recommend",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929}};var v=function(e){var t=e.notification,n=void 0===t?{}:t,r=e.className,p=e.onRead,h=e.onUseAdmire,f=e.onUseRecommend,v=Object.keys(n).find((function(e){return n[e]})),Z=m[v]||{},g=Z.title,E=Z.image,T=Z.content,C=Z.buttonText,A=Z.buttonLink,_=Z.detailViewName,y=Z.cardShowId,S=Z.buttonClickId,I=Z.readAlwaysId,b=Z.readNextId;return(0,a.useEffect)((function(){v&&c.Z.trackCardShow(null,{id:y,name:_})}),[v,y,_]),(0,o.tZ)(s.Z,{className:i()("CreatorRightsNotification",r),onClose:function(){p("next"),c.Z.trackEvent(null,{id:b,name:_})},children:v&&(0,o.BX)(a.Fragment,{children:[(0,o.tZ)("img",{className:"CreatorRightsNotification-background",src:d,alt:"blue background"}),(0,o.tZ)("img",{className:"CreatorRightsNotification-liukanshan",src:E,alt:"liukanshan image"}),(0,o.tZ)("div",{className:"CreatorRightsNotification-title",children:g}),(0,o.tZ)("div",{className:"CreatorRightsNotification-content",children:T}),(0,o.BX)(s.w,{className:"CreatorRightsNotification-buttonGroup",children:[A?(0,o.tZ)(l.Z,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",to:A,target:"_blank",onClick:function(){p("current"),c.Z.trackEvent(null,{id:S,name:_})},children:C}):(0,o.tZ)(u.ZP,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",onClick:function(){p("current"),c.Z.trackEvent(null,{id:S,name:_}),"answerAdmireCouldUse"===v&&h(),"recommendationCouldUse"===v&&f()},children:C}),(0,o.tZ)(u.ZP,{className:"CreatorRightsNotification-dismiss",preset:"plain",color:"grey",onClick:function(){p("always"),c.Z.trackEvent(null,{id:I,name:_})},children:"不再提醒"})]})]})})}},30728:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var o=n(78194),r=n(68562),i=n(87363),a=n(33393),c=n(62792),s=n(14562),u=n(36701),l=n(14262),d=n(48979),p=n(82096),h=n(32261);var f=function(e){var t=e.shown,n=e.onClose,o=e.onSubmit,a=(0,i.useCallback)((function(e){var t=e.type,r=e.payload;"browser/closeCurrentPage"!==t?"editor/submitAttachment"!==t||o(r.files):n()}),[o,n]);return(0,r.tZ)(p.Z,{className:"BaiduFileSelector",size:"large",onClose:n,children:t&&(0,r.tZ)("div",{className:"BaiduFileSelector-content",children:(0,r.tZ)(h.Z,{className:"BaiduFileSelector-iframe",src:"https://www.zhihu.com/appview/editor/attachment/baidu",onMessage:a})})})},m=(0,i.forwardRef)((function(e,t){var n=(0,o.Z)((0,i.useState)(!1),2),a=n[0],c=n[1];return(0,i.useImperativeHandle)(t,(function(){return{setBaiduFileSelectorShown:c}}),[]),(0,r.tZ)(f,{shown:a,onClose:function(){return c(!1)},onSubmit:function(t){c(!1),e.onSubmit(t)}})})),v=function(){var e={},t=function(t){e.getEditorRef().props.handleCommand("insert-file-link-card:".concat(JSON.stringify(t)))},n=function(){return(0,d.Z)(e.getEditorState()).filter((function(e){return"file-link-card"===e.getType()}))},o=function(){n().size>=10?u.Z.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)};return e.containerRef=(0,i.createRef)(),{initialize:function(t){Object.assign(e,t)},components:(0,r.tZ)(m,{handleSubmit:t,ref:e.containerRef,onSubmit:t}),handleCommand:function(e){return"insert-file-from-baidu-wangpan"===e?(o(),"handled"):"not-handled"},toolbar:{section:a.Z.CUSTOM_MAIN,label:"上传附件",icon:l._,toolType:s._W.ENTITY,onClick:function(){n().size>=10?u.Z.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)},priority:2},toolbarV2:{section:c.Z.BUSINESS_MEDIA,label:"上传附件",text:"网盘",icon:l._,toolType:s._W.ENTITY,onClick:function(){o()},priority:2}}}},69520:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var o=n(78194),r=n(68562),i=n(87363),a=n.n(i),c=n(17222),s=n(47859),u=n(11331),l=n(21620),d=n(84421),p=n(32554),h=n(75926),f=n.n(h),m=n(82096),v=n(52495),Z=n(74514),g=n(64068),E=n(47112),T=n.n(E),C=n(46698),A=n(17695),_=n(73464),y=n(13307),S=n(16915),I=Object.assign;var b=function(e){return a().createElement(S.Z,I({width:"150",height:"120",viewBox:"0 0 150 120"},e),a().createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0 0 98.998 28H50.002A2.996 2.996 0 0 0 47 30.998v58.147l.193-.125c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.316 2.79A1.997 1.997 0 0 1 44 93V30.997A5.996 5.996 0 0 1 50.002 25h48.996A5.996 5.996 0 0 1 105 30.998V93a2 2 0 0 1-.396 1.2l-4.112-2.66z"}),a().createElement("path",{fill:"#F7F8FA",d:"M55 38.999c0-.552.439-.999.999-.999H75c.552 0 .999.439.999.999V58a.993.993 0 0 1-.999.999H56a.993.993 0 0 1-.999-.999V39zm25 .501c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0 1 80 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.499 1.499 0 1 1 0 3h-35.99A1.499 1.499 0 0 1 55 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.499 1.499 0 1 1 0 3h-24.99A1.499 1.499 0 0 1 55 75.5z"}))},w={current:"当前草稿",saved:"自动保存",published:"发布过的版本"},R=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.apply(this,arguments)).formatDate=function(e){return C.Z("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"yyyy-MM-dd HH:mm")},e.handleDraftClick=function(e){e.preventDefault()},e}var o=n.prototype;return o.renderCurrentDraft=function(){var e=this.props,t=e.currentDraft,n=e.onRevert,o=e.draftId,a=e.draftType,c=t.isFetching,s=t.data;return(0,r.BX)("div",{className:"DraftHistory-main",children:[c&&(0,r.tZ)(g.Z,{className:"DraftHistory-loading"}),!c&&s&&(0,r.BX)(i.Fragment,{children:[s.draft.title&&(0,r.tZ)("div",{className:"DraftHistory-draftTitle",children:s.draft.title}),(0,r.tZ)("div",{className:"DraftHistory-draft",children:(0,r.tZ)(y.Z,{html:s.draft.content,onClick:this.handleDraftClick,sourceType:a,sourceId:o})}),(0,r.BX)("div",{className:"DraftHistory-actions",children:[(0,r.BX)("div",{className:"DraftHistory-meta",children:[this.formatDate(s)," ",w[s.versionType]]}),(0,r.tZ)(_.ZP,{className:"DraftHistory-revert",disabled:"current"===s.versionType,onClick:function(){return n(s)},children:"恢复此版本"})]})]})]})},o.render=function(){var e=this,t=this.props,n=t.history,o=t.currentVersion,i=t.currentDraft,a=t.getHistory,c=t.onSelect;return n?n.isFetching&&!n.items?(0,r.tZ)("div",{className:"DraftHistory",children:(0,r.tZ)(g.Z,{className:"DraftHistory-loading"})}):(0,r.BX)("div",{className:"DraftHistory",children:[(0,r.BX)("div",{className:"DraftHistory-side",children:[(0,r.tZ)("div",{className:"DraftHistory-title",children:"历史版本"}),(0,r.tZ)(A.Z,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:a,children:(0,r.tZ)("div",{children:n.items&&n.items.map((function(t,n){return(0,r.BX)("a",{href:"#",className:T()("DraftHistory-version",{"DraftHistory-version--selected":o&&t.versionType===o.versionType&&t.id===o.id}),onClick:function(e){e.preventDefault(),c(t)},children:[(0,r.tZ)("div",{className:"DraftHistory-versionDate",children:e.formatDate(t)}),(0,r.tZ)("div",{className:"DraftHistory-versionType",children:w[t.versionType]})]},n)}))})})]}),n.items&&!n.items.length&&(0,r.tZ)("div",{className:"DraftHistory-main",children:(0,r.BX)("div",{className:"DraftHistory-empty",children:[(0,r.tZ)(b,{className:"DraftHistory-emptyIcon"}),(0,r.tZ)("div",{className:"DraftHistory-emptyText",children:"还没有历史版本"})]})}),i&&this.renderCurrentDraft()]}):null},n}(i.Component);R.propTypes={history:f().object,currentVersion:f().object,currentDraft:f().object,onSelect:f().func,onRevert:f().func};var N=R,O=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.apply(this,arguments)).state={currentVersion:null},e.getHistory=function(){var t=e.props,n=t.type,o=t.id;(0,t.getHistory)(n,o)},e.handleSelect=function(t){e.setState({currentVersion:t})},e.handleRevert=function(t){var n=e.props,o=n.revert,r=n.onReverted;o(t.versionType,t.id).then((function(){r&&r(t)}))},e}var o=n.prototype;return o.componentDidMount=function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)},o.componentDidUpdate=function(e,t){var n=this.props,o=n.drafts,r=n.getDraft,i=this.state.currentVersion,a=t.currentVersion;!i||a&&a.versionType===i.versionType&&a.id===i.id||o["".concat(i.versionType,"_").concat(i.id)]||r(i.versionType,i.id)},o.componentWillUnmount=function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)},o.render=function(){var e=this.props,t=e.history,n=e.drafts,o=e.draftId,i=e.draftType,a=this.state.currentVersion;return(0,r.tZ)(N,{history:t,currentVersion:a,currentDraft:a?n["".concat(a.versionType,"_").concat(a.id)]:null,draftId:o,draftType:i,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})},n.getDerivedStateFromProps=function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null},n}(i.Component);O.propTypes={type:f().string.isRequired,id:f().number.isRequired,onReverted:f().func};var D=(0,v.connect)((function(e,t){var n=t.type,o=t.id;return{history:e.draftHistory.history["".concat(n,"_").concat(o)],drafts:e.draftHistory.drafts}}),{getHistory:Z.s1,getDraft:Z.eJ,revert:Z.CU,reset:Z.mc})(O),B=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.apply(this,arguments)).handleReverted=function(t){var n=e.props,o=n.onClose,r=n.onReverted;r&&r(t),o&&o(),c.Z.trackEvent(null,{id:5016,action:"Click"})},e.handleClose=function(){var t=e.props.onClose;t&&t(),c.Z.trackEvent(null,{id:5015,action:"Click"})},e}return n.prototype.render=function(){var e=this.props,t=e.shown,n=e.type,o=e.id,i=e.draftId,a=e.draftType;return(0,r.tZ)(m.Z,{className:"DraftHistoryModal",size:"fullPage",onClose:this.handleClose,children:t&&(0,r.tZ)(D,{type:n,id:o,draftId:i,draftType:a,onReverted:this.handleReverted})})},n}(i.Component);B.propTypes={shown:f().bool.isRequired,onClose:f().func,type:f().string.isRequired,id:f().number.isRequired,onReverted:f().func},B.defaultProps={shown:!0};var P=B,k=(0,i.forwardRef)((function(e,t){var n,a,c=e.type,u=e.id,l=e.getId,d=e.handleReverted,p=e.draftId,h=e.draftType,f=e.getDraftId,m=(0,o.Z)((0,i.useState)(!1),2),v=m[0],Z=m[1],g=(0,s.Z)((function(){return Z(!0)})),E=(0,s.Z)((function(){return Z(!1)}));return(0,i.useImperativeHandle)(t,(function(){return{handleOpen:g,handleClose:E}}),[g,E]),(0,r.tZ)(P,{shown:v,onClose:function(){return Z(!1)},type:c,id:null!==(n=null==l?void 0:l())&&void 0!==n?n:u,draftId:null!==(a=null==f?void 0:f())&&void 0!==a?a:p,draftType:h,onReverted:d})})),x=function(e){var t=e.type,n=e.id,o=e.syncDraft,a=e.getId,s=e.getDraftId,l=e.draftId,d=e.draftType,p=e.shouldShowToolbarButton,h=void 0===p?function(){return!0}:p,f={};f.draftModalRef=(0,i.createRef)(null);return{initialize:function(e){Object.assign(f,e)},handleCommand:function(e){return"toggle-draft-history-modal"===e?(f.draftModalRef.current.handleOpen(),"handled"):"not-handled"},components:[(0,r.tZ)(k,{type:t,id:n,getId:a,draftId:l,getDraftId:s,draftType:d,ref:f.draftModalRef,handleReverted:function(e){f.getEditorRef().props.resetWithValue(e.draft.content)}},"draft_history_modal")],toolbar:{section:"menu",label:"历史版本",icon:u.x8,onClick:function(){o.flush(),f.draftModalRef.current.handleOpen(),c.Z.trackEvent(null,{id:5013,action:"Click",name:"历史版本入口"})},shouldShow:h}}}},50236:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var o=n(78194),r=n(68562),i=n(87363),a=n(23323),c=n(88483),s=n(78724),u=n(3404),l=n(8190),d=n(48457),p=n(8567),h=n(96605),f=n(19831),m=n(99760),v=n(86283),Z=n(2829),g=n(2428),E=n(36070),T=n(11138),C=n(91368),A=n(31430),_=n(28053),y=n(36014),S=n(95313),I=n(98732),b=n(83695),w=n(97360),R=n(21329),N=n(12321),O=[{icon:h.Z,label:"粗体",shortcut:"⌘+B",shortcutWin:"Ctrl+B"},{icon:f.zT,label:"斜体",shortcut:"⌘+I",shortcutWin:"Ctrl+I"},{icon:m.ic,label:"一级标题",shortcut:"⌘+⌥+1",shortcutWin:"Ctrl+Alt+1"},{icon:v.NC,label:"二级标题",shortcut:"⌘+⌥+2",shortcutWin:"Ctrl+Alt+2"},{icon:Z.hS,label:"有序列表",shortcut:"⌘+⇧+L",shortcutWin:"Ctrl+Shift+L"},{icon:g.bd,label:"无序列表",shortcut:"⌘+L",shortcutWin:"Ctrl+L"},{icon:E.R7,label:"引用块",shortcut:"⌘+⇧+U",shortcutWin:"Ctrl+Shift+U"},{icon:T.Z,label:"代码块",shortcut:"⌘+⌥+C",shortcutWin:"Ctrl+Alt+C"},{icon:C.O1,label:"撤销",shortcut:"⌘+Z",shortcutWin:"Ctrl+Z"},{icon:A.OJ,label:"重做",shortcut:"⌘+Y",shortcutWin:"Ctrl+Y"},{icon:_.Z,label:"清除格式",shortcut:"⌘+\\",shortcutWin:"Ctrl+\\"},{label:"插入链接",icon:y.ZP,shortcut:"⌘+K",shortcutWin:"Ctrl+K"},{icon:S.ZP,label:"目录",shortcut:"⌘+⌥+J",shortcutWin:"Ctrl+Alt+J"},{icon:I.Z,label:"插入注释",shortcut:"⌘+⌥+R",shortcutWin:"Ctrl+Alt+R"},{icon:b.Z,label:"插入分割线",shortcut:"⌘+⌥+S",shortcutWin:"Ctrl+Alt+S"},{label:"插入表格",icon:w.Z,shortcut:"⌘+⌥+T",shortcutWin:"Ctrl+Alt+T"},{label:"插入公式",icon:R.Z,shortcut:"⌘+⌥+E",shortcutWin:"Ctrl+Alt+E"}],D=function(e){var t=e.name,n=e.isFirst;return(0,r.BX)(r.HY,{children:[!n&&(0,r.tZ)(u.Text,{color:"GBK06A",fontSize:"12px",mx:"4px",children:"+"}),(0,r.tZ)(u.Flex,{px:"4px",css:function(e){return[{minWidth:"24px",borderRadius:"2px",height:"24px",lineHeight:"26px",background:e.colors.GBK10C,textAlign:"center",color:e.colors.GBK05A,fontSize:"14px",alignItems:"center",justifyContent:"center"},n&&{marginLeft:"auto"}]},children:t})]})},B=function(e){var t=e.label,n=e.Icon,o=e.shortcut;return(0,r.BX)(u.Flex,{alignItems:"center",css:{"&+&":{marginTop:"20px"}},children:[(0,r.tZ)(n,{size:20,css:function(e){return{color:e.colors.GBK03A}}}),(0,r.tZ)(u.Text,{ml:"8px",color:"GBK03A",fontSize:"14px",children:t}),o.split("+").map((function(e,t){return(0,r.tZ)(D,{name:e,isFirst:!t},t)}))]})};var P=n(12489),k=n(93310),x=n(409),L=n(51592),U=n(25955),F=[{icon:m.ZP,label:"一级标题",shortcut:"#+空格"},{icon:v.ZP,label:"二级标题",shortcut:"##+空格"},{icon:Z.ZP,label:"有序列表",shortcut:"1+.+空格"},{icon:g.ZP,label:"无序列表",shortcut:"*+空格"},{icon:h.Z,label:"粗体",shortcut:"**文字**"},{icon:f.ZP,label:"斜体",shortcut:"*文字*"},{icon:P.Z,label:"倾斜加粗",shortcut:"***文字***"},{icon:k.Z,label:"行内代码",shortcut:"`文字`"},{icon:T.Z,label:"代码块",shortcut:"```+回车"},{icon:E.ZP,label:"引用块",shortcut:">+空格"},{icon:b.Z,label:"分割线",shortcut:"---+回车"},{icon:x.Z,label:"插入图片",shortcut:"![描述](链接)+空格"},{icon:L.Z,label:"LaTeX 语法",shortcut:"$$文字$$+空格"},{icon:y.ZP,label:"插入链接",shortcut:"[标题](链接)+空格"}];var M=[{tabName:"目录",describe:["选中工具栏的目录功能后，在编辑器中添加标题，左侧自动识别标题生成目录；",(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.Text,{my:"8px",children:"若不想添加此标题至目录中，可将鼠标悬浮在目录区域的对应标题上，点击「删除」按钮即可移除；"}),(0,r.tZ)(u.Image,{my:"8px",src:"https://pic1.zhimg.com/v2-3173fb93f4c628ebc8245a2ae2ecea1d.png?source=6a64a727"}),(0,r.tZ)(u.Text,{my:"8px",children:"若想重新添加标题至目录中，可以在正文中选中此标题，并在目录区域找到对应标题，点击「固定」按钮即可重新添加。"}),(0,r.tZ)(u.Image,{my:"8px",src:"https://pic2.zhimg.com/v2-1cabcd37bc16361cf95f172fc3ef86f0.png?source=6a64a727"})]})]},{tabName:"代码",describe:["点击工具栏中的代码块图标后，编辑器内生成代码卡片，右上方选择语法，可在代码块中展示语法高亮。"]},{tabName:"公式",describe:["点击工具栏中的公式图标后，在公式编辑器输入 LaTeX 语法，下方为预览区。",(0,r.BX)(r.HY,{children:["您可在",(0,r.tZ)(u.Link,{css:function(e){return{color:e.colors.GBL01A}},target:"_blank",href:"https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference",children:"LaTeX基础教程"}),"中参考更多语法"]})]},{tabName:"注释",describe:["点击工具栏中的注释图标，在注释编辑弹框中输入注释文本及链接后，文本对应的注释会出现在文末。"]},{tabName:"历史版本",describe:["点击工具栏中的历史版本后，可在自动保存的草稿版本中查看历史草稿，点击恢复此版本可还原历史草稿。"]},{tabName:"文档导入",describe:["点击工具栏中的文档图标，导入 .docx/.md 文档后，编辑器会自动解析内容并展示在编辑器中。若粘贴图片失败，建议使用文档导入功能。"]}],G=function(e){var t=e.name,n=e.describe,o=e.isFirst;return(0,r.BX)(u.Box,{css:function(e){return{color:e.colors.GBK03A,paddingTop:o?"0":"20px"}},fontSize:14,fontWeight:400,children:[(0,r.tZ)(u.Text,{css:function(e){return{color:e.colors.GBK02A}},mb:"8px",fontWeight:500,children:t}),n.map((function(e){return"string"==typeof e?(0,r.tZ)(u.Text,{lineHeight:"20px",children:e}):(0,r.tZ)(r.HY,{children:e})}))]})};var z=[{name:"快捷键",component:function(e){var t=e.activeTabName,n=(0,N.n)().isAppleDevice;return(0,r.tZ)(d.Wi,{zaType:"Text",zaText:t,as:u.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:O.map((function(e,t){var o=e.label,i=e.icon,a=e.shortcut,c=e.shortcutWin;return(0,r.tZ)(B,{label:o,Icon:i,shortcut:n?a:c},t)}))})}},{name:"Markdown",component:function(e){var t=e.activeTabName,n=(0,U.Z)().jumpUrl;return(0,r.BX)(d.Wi,{zaType:"Text",zaText:t,as:u.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:[(0,r.BX)(u.Box,{fontSize:12,css:function(e){return{color:e.colors.GBK06A,margin:"-10px 0 20px 0"}},children:[(0,r.tZ)(u.Text,{children:"在工具栏-更多中设置为 Markdown 模式后，才会自动识别后续输入内容，转化为对应格式；"}),(0,r.BX)(u.Text,{children:["如你希望每篇内容均为此格式，可在",(0,r.tZ)(u.Link,{css:{cursor:"pointer",textDecoration:"underline",margin:"0 5px"},onClick:function(){return window.open(n)},children:"默认设置"}),"中修改默认编辑器偏好"]})]}),F.map((function(e,t){var n=e.label,o=e.icon,i=e.shortcut;return(0,r.tZ)(B,{label:n,Icon:o,shortcut:i},t)}))]})}},{name:"功能说明",component:function(e){var t=e.activeTabName;return(0,r.tZ)(d.Wi,{zaType:"Text",zaText:t,as:u.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:M.map((function(e,t){var n=e.tabName,o=e.describe;return(0,r.tZ)(G,{name:n,describe:o,isFirst:!t},t)}))})}}],H=function(e){var t=e.children,n=e.className;return(0,r.tZ)("h1",{css:function(e){return{background:e.colors.GBK99A,color:e.colors.GBK02A,lineHeight:"31px",fontSize:"22px",fontWeight:"600"}},className:n,children:t})},q=function(e){var t=e.active,n=(0,s.Z)(e,["active"]);return(0,r.tZ)(d.$U,(0,c.Z)({zaType:"Button",zaText:!0,as:"button",css:function(e){return[{display:"inline-block",width:"88px",borderRadius:"999px",height:"26px",lineHeight:"26px",background:t?e.colorMod(e.colors.primary).alpha(.1):e.colors.GBK10C,textAlign:"center",cursor:"pointer",color:t?e.colors.primary:e.colors.GBK06A,fontSize:"13px",marginRight:"7px",marginBottom:"14px"},t&&{fontWeight:"500"}]}},n))};function V(e){var t=e.className,a=e.onClose,c=e.getInitialOffset,s=e.getShouldHide,h=(0,o.Z)((0,i.useState)(0),2),f=h[0],m=h[1],v=z[f].component,Z=(0,p.Z)((function(){return Promise.all([n.e(2607),n.e(3751),n.e(5052)]).then(n.bind(n,24641))}));return Z?(0,r.tZ)(d.eV,{block:"EditorHelpDoc",children:(0,r.BX)(Z,{className:t,getInitialOffset:c,getShouldHide:s,children:[(0,r.tZ)(d.Wi,{zaType:"Popup",zaText:"帮助文档"}),(0,r.BX)(u.Flex,{bg:"GBK99A",pl:"16px",sx:{borderBottom:"1px solid",borderColor:"GBK09A",height:"52px",alignItems:"center"},children:[(0,r.tZ)(H,{css:{fontSize:"18px",lineHeight:"24px"},children:"帮助文档"}),(0,r.tZ)(u.Text,{color:"GBK06A",fontSize:"12px",lineHeight:"17px",fontWeight:"400",ml:"8px",mt:"4px",children:"支持拖拽和调整高度"}),(0,r.tZ)(d.$U,{zaType:"Button",zaAction:"Unknown",zaText:"关闭帮助文档",as:l.eb,css:{marginLeft:"auto",padding:"16px",cursor:"pointer"},onClick:a})]}),(0,r.BX)(u.Box,{ml:"16px",mr:"9px",pt:"14px",children:[z.map((function(e,t){return(0,r.tZ)(q,{active:f===t,onClick:function(){f!==t&&m(t)},children:e.name},t)})),(0,r.tZ)(u.Box,{mr:"7px",sx:{height:"2px",borderBottom:"1px solid",borderColor:"GBK09A",alignItems:"center"}})]}),(0,r.tZ)(u.Box,{px:"16px",css:{height:"calc(100% - 112px)",overflow:"auto"},children:v&&(0,r.tZ)(v,{activeTabName:z[f].name})})]})}):null}var X=(0,i.forwardRef)((function(e,t){var n=e.getInitialOffset,c=e.getShouldHide,s=e.forceUpdate,u=(0,o.Z)((0,a.Z)(!1),2),l=u[0],d=u[1];return(0,i.useImperativeHandle)(t,(function(){return{toggle:d.toggle,getShown:function(){return l}}}),[d,l]),l&&(0,r.tZ)(V,{onClose:function(){d.toggle(),s&&requestAnimationFrame((function(){s()}))},getInitialOffset:n,getShouldHide:c})})),W=function(e){var t=e.getInitialOffset,n=e.getShouldHide,o=e.forceUpdate,a={};return a.helpDocRef=(0,i.createRef)(null),{initialize:function(e){Object.assign(a,e)},handleCommand:function(e){return"toggle-help-document"===e?(a.helpDocRef.current.toggle(),o&&requestAnimationFrame((function(){o()})),"handled"):"not-handled"},queryCommandState:function(e){var t;if("toggle-help-document"===e)return Boolean(null===(t=a.helpDocRef.current)||void 0===t?void 0:t.getShown())},components:[(0,r.tZ)(X,{getInitialOffset:t,getShouldHide:n,ref:a.helpDocRef,forceUpdate:o},"EditorHelpDocContainer")]}}},44540:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(68562),r=n(92066),i=n(76910),a=n(3404),c=n(21301),s=n(50934),u=n(73464);function l(e){var t=e.getSentences,n={},l=new Set,d=!1,p=!1,h=!1,f=null;return{initialize:function(e){Object.assign(n,e),function(e,t){var n=e.store,o=e.getSentences;Promise.resolve(null==o?void 0:o()).then((function(e){if(null==e?void 0:e.length){var o=n.getEditorState(),r=o.getCurrentContent(),a=r.getBlockMap();e.filter((function(e){var t;return(null==e||null===(t=e.position)||void 0===t?void 0:t.start)&&e.position.end})).forEach((function(e){var c=e.position,s=c.start,u=s.paragraphId,l=s.offset,d=c.end,p=d.paragraphId,h=d.offset,f=null,m=null,v=h,Z=a.skipUntil((function(e){var t,n=null===(t=e.getData())||void 0===t?void 0:t.get("pid"),o=e.getKey();return n===u&&(f=o,!0)})).takeUntil((function(e){var t;if(m)return!0;var n=null===(t=e.getData())||void 0===t?void 0:t.get("pid"),o=e.getKey();return n===p&&(m=o,v=Math.min(e.getLength(),h)),!1}));if(f&&m){var g=i.SelectionState.createEmpty(f).merge({anchorOffset:l,focusKey:m,focusOffset:v});r=i.Modifier.applyInlineStyle(r,g,"INTERACT"),o=i.EditorState.set(o,{currentContent:r}),n.setEditorState(o),t(Z)}else console.error("句子互动：无法找到对应的互动句子，startPid：".concat(u,"，startKey：").concat(f,"，endPid：").concat(p,"，endKey：").concat(m))}))}}))}({store:n,getSentences:t},(function(e){(null==e?void 0:e.size)&&e.forEach((function(e){var t=e.getKey();l.add(t)}))}))},customStyleMap:{INTERACT:{borderBottom:"1px dashed #BFBFBF"}},onChange:function(e){if(!l.size)return e;if(p)return e;var t=!1,n=e.getCurrentContent(),i=e.getSelection(),m=i.getHasFocus()&&h;if(h=i.getHasFocus(),m){var v=n.getBlockMap(),Z=i.getStartKey(),g=i.getEndKey(),E=!1;v.skipUntil((function(e){return e.getKey()===Z})).takeUntil((function(e){return!!E||(e.getKey()===g&&(E=!0),!1)})).toArray().forEach((function(e,n){t||e.findStyleRanges((function(e){return e.hasStyle("INTERACT")}),(function(o,r){t=n>0||i.hasEdgeWithin(e.getKey(),0,r)}))}))}return t!==d&&(!function(){if(d)return null==f||f(),void(f=null);(0,s.Z)((function(e){return f=e,(0,o.tZ)(c.Z,{css:{top:"126px"},delay:36e5,notification:{text:(0,o.BX)(a.Text,{css:{display:"flex",alignItems:"center"},children:[(0,o.tZ)(r.Z,{size:18,css:{marginRight:"8px"}}),"修改有互动的句子时，app 端对应的句子互动划线将不再外显"]}),key:"notificationInteractTexts",timeStamp:(new Date).getDate()},actions:(0,o.tZ)(u.ZP,{preset:u.EE.Link,color:u.rp.Blue,onClick:function(){e(),p=!0},children:"知道了"})})}))}(),d=t),e}}}},62147:function(e,t){"use strict";t.Z=function(e){var t=e.onToggle;return{handleCommand:function(e){return"toggle-markdown-enabled"===e?(t(),"handled"):"not-handled"}}}},7638:function(e,t,n){"use strict";n.d(t,{Z:function(){return Ct}});var o=n(88483),r=n(16600),i=n(68562),a=n(87363),c=n.n(a),s=n(62792),u=n(33393),l=n(41541),d=n(78194),p=n(47859),h=n(75926),f=n.n(h),m=n(48457),v=n(82096),Z=n(71103),g=n(78724),E=n(3404),T={LOCAL:{type:"local",name:"上传图片"},EMOTICON:{type:"emoticon",name:"表情包"},PUBLIC:{type:"public",name:"网络素材"},PRIVATE:{type:"private",name:"个人素材"},LATEST:{type:"latest",name:"最近使用"}},C=Object.values(T),A=Object.keys(T).reduce((function(e,t){return(0,r.Z)((0,o.Z)({},e),(0,Z.Z)({},t,T[t].type))}),{}),_=(Object.keys(T).reduce((function(e,t){return(0,r.Z)((0,o.Z)({},e),(0,Z.Z)({},T[t].type,T[t].name))}),{}),{ALL:{type:"all",name:"全部"},STATIC:{type:"static",name:"普通图片"},DYNAMIC:{type:"dynamic",name:"动图"}}),y=Object.values(_),S=(Object.keys(_).reduce((function(e,t){return(0,r.Z)((0,o.Z)({},e),(0,Z.Z)({},t,_[t].type))}),{}),Object.keys(_).reduce((function(e,t){return(0,r.Z)((0,o.Z)({},e),(0,Z.Z)({},_[t].type,_[t].name))}),{}),function(e){var t=e.active,n=(0,g.Z)(e,["active"]);return(0,i.tZ)(m.$U,(0,o.Z)({as:"button",zaType:"Button",zaText:!0,zaAction:"Unknown",color:"GBK03A",shouldTrackShow:!0,css:function(e){return[{marginRight:"20px",lineHeight:"50px",fontSize:"15px",cursor:"pointer"},t&&{position:"relative",fontWeight:"bold","::after":{position:"absolute",left:"0",bottom:"0",content:"''",display:"block",width:"100%",height:"4px",backgroundColor:e.colors.GBL01A,flexShrink:"0"}}]}},n))}),I=function(e){var t=e.tabType,n=e.tabChange,o=e.tabs,r=o?C.filter((function(e){var t=e.type;return o.includes(t)})):C;return(0,i.BX)(E.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return{height:"50px",padding:"0 20px",boxShadow:"inset 0px -0.5px 0px ".concat(e.colors.GBK09A)}},children:[(0,i.tZ)(E.Flex,{children:r.map((function(e){return(0,i.tZ)(S,{active:t===e.type,onClick:function(){n(e.type)},children:e.name},e.type)}))}),(0,i.tZ)("div",{className:"MaterialLibrary-SearchInputContainer"})]})};I.propTypes={tabType:f().string,tabChange:f().func};var b=I,w=n(30834),R=n(14116),N=n(51551),O=n(35314),D=n(48340),B=n(1319),P=n(33660),k=n(11116),x=n(29512),L=function(){return new Promise(requestAnimationFrame)},U=function(e,t,n){e({eventType:"Click",action:"Unknown",elementLocation:{type:t,text:n}})},F=function(){return(0,i.tZ)(E.Box,{color:"GBK02A",width:"96px",css:function(e){return{position:"absolute",left:"4px",bottom:"4px",width:"48px",height:"16px",lineHeight:"16px",textAlign:"center",fontSize:"12px",background:e.colors.GBL05A,color:e.colors.GBK99A,borderRadius:"2px",zIndex:1}},children:"已删除"})},M=function(e){return(0,i.tZ)(m.$U,(0,o.Z)({as:E.Flex,zaType:"Button",zaAction:"Unknown",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",css:{borderRadius:"2px",position:"absolute",lineHeight:"24px"}},e))},G=function(e){var t=e.data,n=e.chooseImage,c=e.deleted,s=e.deleteSingleImage,u=e.imageUrl,l=e.poster,p=e.isPrivate,h=void 0!==p&&p,f=(0,m.Q4)().trackEvent,v=(0,P.D)(),Z=(0,D.imgUrl)(u||(null==t?void 0:t.origin),"100w"),g=function(e){var t=(0,m.Q4)().trackEvent,n=(0,d.Z)((0,a.useState)(null),2),o=n[0],r=n[1],c="error"===o,s="ready"===o,u=function(n){n.stopPropagation(),"loading"!==o&&(r("loading"),U(t,"Button","加载 gif"),Promise.all([(0,D.loadImage)(e),L().then(L)]).then((function(){r("ready")})).catch((function(){r("error")})))};return{isGifReady:s,gifIcon:"loading"===o||s?(0,i.tZ)(B.e1,{className:"MaterialLibrary-GifIcon",onClick:u}):c?(0,i.tZ)(B.wT,{className:"MaterialLibrary-GifIcon",onClick:u}):(0,i.tZ)(B.OU,{className:"MaterialLibrary-GifIcon",onClick:u})}}(Z),T=g.isGifReady,C=g.gifIcon,A=T?Z:(0,D.imgUrl)(l||(null==t?void 0:t.thumbnail),"100w"),_="dynamic"===t.subtype?A:Z;return(0,i.BX)(E.Box,{color:"GBK02A",width:h?"96px":"105px",css:[{display:"inline-block",marginBottom:"10px",marginLeft:h?"14px":"5px",verticalAlign:"top",".MaterialLibrary-GifIcon":{position:"absolute",width:"46px",height:"46px",marginLeft:"-23px",marginTop:"-23px",top:"50%",left:"50%",transition:"0.3s ease-out",transitionProperty:"transform, opacity",transform:"scale(1)",transformOrigin:"center",opacity:"1"}},T&&{".MaterialLibrary-GifIcon":{transform:"scale(0.3)",opacity:"0",width:0,height:0,margin:0}}],children:[(0,i.BX)(E.Box,{width:h?"96px":"105px",height:h?"96px":"105px",css:function(e){return{borderRadius:"2px",cursor:"pointer",position:"relative",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.08),"&:hover > .MaterialLibrary-imgListItemHover":{display:"flex",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.3)}}},onClick:function(){c||(n(t),U(f,"Image","".concat((null==t?void 0:t.checked)?"取消选中图片":"选中图片")))},children:[(0,i.tZ)(E.Image,{src:_,loading:"lazy",size:"100%",css:(0,o.Z)({position:"absolute",left:0,right:0,objectFit:"cover",borderRadius:"inherit",opacity:c?"0.3":"1"},v)}),(0,i.tZ)(E.Box,{sx:{color:"GBK99A",border:"2px solid",borderColor:"GBL01A"},css:function(e){return(0,o.Z)({display:(null==t?void 0:t.checked)?"flex":"none",position:"absolute",top:"0",left:"0",right:"0",width:"100%",height:"100%",borderRadius:"inherit"},(null==t?void 0:t.checked)&&{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.3)})},className:"MaterialLibrary-imgListItemHover",children:c?(0,i.tZ)(M,{zaText:"删除图片",title:"删除",css:function(e){return{bottom:"2px",right:"2px",backgroundColor:e.colors.GBL01A}},onClick:function(e){e.stopPropagation(),s(t)},children:(0,i.tZ)(x.R,{fill:"currentColor",size:18})}):(0,i.tZ)(M,{zaType:"Image",zaText:"选中图片",title:"选中图片",onClick:function(e){e.stopPropagation(),n(t)},css:function(e){return{top:"6px",right:"6px",border:"2px solid ".concat((null==t?void 0:t.checked)?e.colors.GBL01A:e.colors.GBK99A),borderRadius:"50%"}}})}),(null==t?void 0:t.checked)&&(0,i.tZ)(M,{zaType:"Image",zaText:"取消选中图片",title:"取消选中图片",onClick:function(e){e.stopPropagation(),n(t)},css:function(e){return{top:"8px",right:"8px",fontSize:"14px",textAlign:"center",backgroundColor:e.colors.GBL01A,color:e.colors.GBK99A,borderRadius:"50%"}},children:null==t?void 0:t.checkedIndex}),"dynamic"===t.subtype&&C,c&&(0,i.tZ)(F,{})]}),(0,i.tZ)(E.Box,{mt:"4px",fontSize:"10px",lineHeight:"20px",css:(0,r.Z)((0,o.Z)({},(0,k.S)(1)),{wordBreak:"break-all"}),title:"文件名称",children:null==t?void 0:t.name})]})};G.propTypes={data:f().string,chooseImage:f().func,getLatestList:f().func};var z=G,H=n(17695),q=function(e){return(0,i.tZ)("i",(0,o.Z)({css:{marginLeft:"14px",width:"96px"}},e))},V=function(e){var t=e.children,n=(0,g.Z)(e,["children"]);return(0,i.BX)(H.Z,(0,r.Z)((0,o.Z)({css:{display:"flex",flex:1,overflow:"auto",flexWrap:"wrap",justifyContent:"space-between",alignContent:"flex-start",height:"100%",marginLeft:"-5px",padding:"0 20px 0"}},n),{children:[t,(0,i.tZ)(q,{}),(0,i.tZ)(q,{}),(0,i.tZ)(q,{}),(0,i.tZ)(q,{}),(0,i.tZ)(q,{}),(0,i.tZ)(q,{})]}))},X=n(39269),W=n(61533),K=n(83329),j=function(e){var t=e.onSearch,n=(0,g.Z)(e,["onSearch"]),r=(0,d.Z)((0,a.useState)(""),2),c=r[0],s=r[1],u=(0,d.Z)((0,a.useState)(null),2),l=u[0],p=u[1];return(0,a.useEffect)((function(){p(document.querySelector(".MaterialLibrary-SearchInputContainer"))}),[]),l&&(0,W.createPortal)((0,i.tZ)(K.Z,(0,o.Z)({className:"materials_library_public_search",onChange:function(e){return s(e.target.value)},value:c,after:(0,i.tZ)(X.J7,{text:!0,onClick:function(){t(c)}}),onKeyUp:function(e){13===e.keyCode&&t(c)},css:function(e){return{width:"198px",height:"28px",lineHeight:"28px",fontSize:"12px",color:e.colors.GBL05A,backgroundColor:e.colors.GBK99A,border:"1px solid",borderColor:e.colors.GBK08A}}},n)),l)},Y=n(49533),Q=function(e){var t=e.checked,n=e.onChange,a=(0,g.Z)(e,["checked","onChange"]);return(0,i.BX)(E.Flex,(0,r.Z)((0,o.Z)({alignItems:"center",css:function(e){return{fontSize:"13px",color:e.colors.GBL04A}}},a),{children:[(0,i.tZ)(Y.C,{type:"checkbox",checked:t,onChange:function(e){n(e.target.checked)},size:15,css:{marginRight:"5px",marginTop:"1px"}}),"本页全选"]}))},J=n(61565),$=n(36701),ee=n(12856),te=(0,a.createContext)({}),ne=function(){return(0,a.useContext)(te)},oe=function(e){var t=e.onClose,n=e.sourceType,o=e.sourceId,r=e.insertImage,c=e.setTabType,s=e.initLocalList,u=e.setInitLocalList,l=e.children,d=e.maxImage;return(0,i.tZ)(te.Provider,{value:(0,a.useMemo)((function(){return{onClose:t,sourceType:n,sourceId:o,insertImage:r,setTabType:c,initLocalList:s,setInitLocalList:u,maxImage:d}}),[t,n,o,r,c,s,u,d]),children:l})},re=function(e){var t=e.itemKey,n=(0,O.Z)(),i=(0,m.Q4)().trackEvent,c=ne(),s=c.sourceId,u=c.sourceType,l=c.insertImage,h=c.onClose,f=(0,d.Z)((0,a.useState)([]),2),v=f[0],Z=f[1],g=(0,d.Z)((0,a.useState)(!0),2),E=g[0],T=g[1],C=(0,d.Z)((0,a.useState)(!1),2),A=C[0],_=C[1],y=(0,d.Z)((0,a.useState)(!1),2),S=y[0],I=y[1],b=(0,d.Z)((0,a.useState)(!1),2),w=b[0],R=b[1],N=(0,d.Z)((0,a.useState)("all"),2),D=N[0],B=N[1],P=(0,d.Z)((0,a.useState)(null),2),k=P[0],x=P[1],L=v.length&&v.every((function(e){return e.checked})),U=function(){T(!0),R(!1),I(!1),x(null),Z([]),_(!1)},F=(0,p.Z)((function(e,t){var n;(T(!1),t)?R(!0):$.Z.alert((null==e?void 0:e.message)||(null==e||null===(n=e.error)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧!")})),M=(0,p.Z)((function(e){var t,n=(0,ee.camelizeKeys)(e.payload||{});T(!1),I(null==n||null===(t=n.paging)||void 0===t?void 0:t.isEnd),x(null==n?void 0:n.paging),Z((function(e){return e.concat((null==n?void 0:n.data)||[])}))})),G=(0,p.Z)((function(e){Z((function(n){var o,r=(0,J.Z)(n),i=r.find((function(n){return e[t]===n[t]})),a=(null===(o=null==r?void 0:r.map((function(e){return null==e?void 0:e.checkedIndex})).sort((function(e,t){return t-e})))||void 0===o?void 0:o[0])||0;return i&&(i.checked=!i.checked,i.checked?i.checkedIndex=a+1:(r.forEach((function(e){(null==e?void 0:e.checkedIndex)>i.checkedIndex&&e.checkedIndex--})),delete i.checkedIndex)),r}))})),z=(0,p.Z)((function(e){l(e.map((function(e){return e.origin}))),n("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{method:"POST",body:{source_type:u,source_id:String(s),material_type:"image",material_ids:e.map((function(e){return e.materialId}))}}),h()}));return{materialList:v,setMaterialList:Z,paging:k,isLoading:E,setIsLoading:T,hasInited:A,setHasInited:_,isDrained:S,setIsDrained:I,isPageError:w,setIsPageError:R,subTypeCatch:D,setSubTypeCatch:B,selectAllChecked:L,toggleSelectAll:function(e){e&&i({action:"Unknown",eventType:"Click",elementLocation:{type:"Button",text:"本页全选"}}),Z((function(t){return t.map((function(t,n){return(0,r.Z)((0,o.Z)({},t),{checked:e,checkedIndex:e?n+1:void 0})}))}))},reset:U,handleSubTypeChange:function(e){A&&e!==D&&(B(e),U())},handleResponseErrorData:F,handleResponseData:M,chooseImage:G,insertImages:z}},ie=function(e){return(0,i.tZ)(E.Flex,(0,o.Z)({justifyContent:"space-between",css:{padding:"10px 20px 10px 8px"}},e))},ae=function(e){return(0,i.tZ)("div",(0,r.Z)((0,o.Z)({css:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},e),{children:"加载中..."}))},ce=function(e){return(0,i.tZ)(m.$U,(0,o.Z)({as:"button",zaType:"Button",zaText:!0,zaAction:"Unknown",css:{marginRight:"10px",padding:"7px 15px",fontSize:"14px",borderRadius:"3px","&:last-child":{marginRight:0}}},e))},se=function(e){var t=e.active,n=(0,g.Z)(e,["active"]);return(0,i.tZ)(ce,(0,o.Z)({css:function(e){return[{background:e.colorMod(e.colors.GBL01A).alpha(.3),color:e.colors.GBK99A,"&[disabled]":{opacity:.5,cursor:"default"}},t&&{background:e.colors.GBL01A}]}},n))},ue=function(e){return(0,i.tZ)(ce,(0,o.Z)({css:function(e){return{background:e.colors.GBK10A,color:e.colors.GBK03A}}},e))},le=function(e){return(0,i.tZ)(ce,(0,o.Z)({css:function(e){return{background:e.colors.GBK10A,color:e.colors.GRD03A}}},e))},de=function(e){return(0,i.tZ)("svg",(0,r.Z)((0,o.Z)({},e),{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 0C11.4477 0 11 0.447716 11 1V11H1C0.447715 11 0 11.4477 0 12C0 12.5523 0.447716 13 1 13H11V23C11 23.5523 11.4477 24 12 24C12.5523 24 13 23.5523 13 23V13H23C23.5523 13 24 12.5523 24 12C24 11.4477 23.5523 11 23 11H13V1C13 0.447715 12.5523 0 12 0Z",fill:"#999999"})}))},pe=function(e){return(null==e?void 0:e.length)?e.sort((function(e,t){return(null==e?void 0:e.checkedIndex)-(null==t?void 0:t.checkedIndex)})):[]},he=function(e){var t=e.isPageError,n=e.keywordCatch,o=e.reset;return t?(0,i.tZ)(R.H.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:o}):(0,i.tZ)(R.H.EI1A,{image:"default",content:"没有找到".concat(n?"「"+n+"」":"","相关内容"),buttonText:"搜索其他内容",buttonOnClick:function(){var e;null===(e=document.querySelector(".materials_library_public_search"))||void 0===e||e.focus()}})},fe=function(e){var t=e.dataList,n=e.insertImages,a=(0,g.Z)(e,["dataList","insertImages"]),c=(t||[]).filter((function(e){return!0===e.checked}));return(0,i.tZ)(E.Flex,(0,r.Z)((0,o.Z)({css:{padding:"13px 20px"},justifyContent:"flex-end"},a),{children:(0,i.tZ)(se,{active:c.length>0,onClick:function(){n(pe(c))},css:{margin:0},zaText:"插入图片；图片数：".concat(c.length||0),children:"插入图片"})}))},me=function(e){var t=e.keywordCatch,n=(0,g.Z)(e,["keywordCatch"]),c=(0,O.Z)(),s=ne(),u=s.insertImage,l=s.onClose,d=re({itemKey:"id"}),h=d.materialList,f=d.paging,m=d.isLoading,v=d.setIsLoading,Z=d.hasInited,T=d.setHasInited,C=d.isDrained,A=d.isPageError,_=d.setIsPageError,y=d.selectAllChecked,S=d.toggleSelectAll,I=d.reset,b=d.handleResponseErrorData,w=d.handleResponseData,R=d.chooseImage,D=!h.length,B=(0,p.Z)((function(){return v(!0),_(!1),c((null==f?void 0:f.next)||(0,N.D)("".concat(location.origin,"/api/v4/materials/pc_editor/search"),{offset:null==h?void 0:h.length,limit:24,keyword:t||"表情包"}))})),P=(0,p.Z)((function(){return B().then(w).catch((function(e){b(e.payload)}))})),k=(0,p.Z)((function(e){u(e.map((function(e){return e.origin}))),l()}));(0,a.useEffect)((function(){Z||B().then(w).catch((function(e){b(e.payload,!0)})).finally((function(){T(!0)}))}),[Z,T,B,w,b]);var x=D?!m&&(0,i.tZ)(he,{isPageError:A,keywordCatch:t,reset:I}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(V,{getContainer:function(e){return e},onLoad:P,isLoading:m,isDrained:C,children:h.map((function(e,t){return(0,i.tZ)(z,{data:e,insertImages:k,chooseImage:R},String([e.id,t]))}))}),(0,i.tZ)(fe,{dataList:h,insertImages:k})]});return(0,i.BX)(E.Flex,(0,r.Z)((0,o.Z)({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},n),{children:[(0,i.BX)(ie,{children:[(0,i.tZ)("div",{className:"MaterialLibrary-SearchTipsContainer",children:t&&!D&&!m&&!A&&(0,i.BX)(E.Box,{color:"GBK03A",width:"200px",css:{margin:"0px 12px",fontSize:"12px"},children:["以下为「",t,"」相关搜索内容"]})}),(0,i.tZ)(Q,{checked:y,onChange:S})]}),Z?x:(0,i.tZ)(ae,{})]}))},ve=function(e){var t=(0,w.Z)({},e),n=(0,d.Z)((0,a.useState)(""),2),r=n[0],c=n[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(j,{placeholder:"搜索表情包",onSearch:c}),(0,i.tZ)(me,(0,o.Z)({keywordCatch:r},t),r)]})},Ze="materialId",ge=function(e){var t=e.isPageError,n=e.reset,o=ne().setTabType;return t?(0,i.tZ)(R.H.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:n}):(0,i.tZ)(R.H.EI1A,{image:"default",content:"最近使用为空，请搜索网络素材或上传图片",buttonText:"上传图片",buttonOnClick:function(){o(A.PRIVATE)}})},Ee=function(e){var t=e.dataList,n=e.deleteImages,a=e.insertImages,c=(0,g.Z)(e,["dataList","deleteImages","insertImages"]),s=(t||[]).filter((function(e){return!0===e.checked}));return(0,i.BX)(E.Flex,(0,r.Z)((0,o.Z)({css:{padding:"13px 20px"},justifyContent:s.length>0?"space-between":"flex-end"},c),{children:[s.length>0&&(0,i.tZ)(le,{onClick:function(){0!==s.length&&$.Z.confirm((0,i.BX)("div",{className:"MaterialLibrary-alert",children:[(0,i.BX)("h2",{children:["是否删除已选择共 ",s.length," 张图片？"]}),(0,i.tZ)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){n(s.map((function(e){return e.materialId})))}),(function(){}))},children:"删除图片"}),(0,i.tZ)(se,{active:s.length>0,onClick:function(){a(pe(s))},zaText:"插入图片；图片数：".concat(s.length||0),children:"插入图片"})]}))},Te=function(e){var t=(0,w.Z)({},e),n=(0,O.Z)(),c=re({itemKey:Ze}),s=c.materialList,u=c.paging,l=c.isLoading,d=c.setIsLoading,h=c.hasInited,f=c.setHasInited,m=c.isDrained,v=c.isPageError,Z=c.setIsPageError,g=c.selectAllChecked,T=c.toggleSelectAll,C=c.reset,A=c.handleResponseErrorData,_=c.handleResponseData,y=c.chooseImage,S=c.insertImages,I=!s.length,b=(0,p.Z)((function(){return d(!0),Z(!1),n((null==u?void 0:u.next)||(0,N.D)("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{offset:null==s?void 0:s.length,limit:24,material_type:"image"}))})),R=(0,p.Z)((function(){return b().then(_).catch((function(e){A(e.payload)}))})),D=(0,p.Z)((function(e){return n("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{method:"DELETE",body:{material_type:"image",material_ids:e}}).then((function(e){var t,n;(null===(t=e.payload)||void 0===t?void 0:t.success)?C():$.Z.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))})),B=(0,p.Z)((function(e){$.Z.confirm((0,i.BX)("div",{className:"MaterialLibrary-alert",children:[(0,i.tZ)("h2",{children:"是否从最近使用删除图片？"}),(0,i.tZ)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){D([e.materialId])}),(function(){}))}));(0,a.useEffect)((function(){h||b().then(_).catch((function(e){A(e.payload,!0)})).finally((function(){f(!0)}))}),[h,f,b,_,A]);var P=I?!l&&(0,i.tZ)(ge,{isPageError:v,reset:C}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(V,{getContainer:function(e){return e},onLoad:R,isLoading:l,isDrained:m,children:s.map((function(e,t){return(0,i.tZ)(z,{data:e,chooseImage:y,insertImages:S,deleted:e.deleted,deleteSingleImage:B},String([e.materialId,t]))}))}),(0,i.tZ)(Ee,{dataList:s,deleteImages:D,insertImages:S})]});return(0,i.BX)(E.Flex,(0,r.Z)((0,o.Z)({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{children:[(0,i.tZ)(ie,{children:(0,i.tZ)(Q,{css:{marginLeft:"auto"},checked:g,onChange:T})}),h?P:(0,i.tZ)(ae,{})]}))},Ce=n(97209),Ae=n(8567),_e=n(65468),ye=n.n(_e),Se=n(52495),Ie=n(32705),be=n.n(Ie),we=n(24316),Re=n(93442),Ne=n(24197),Oe=n(90674),De=n(22318),Be=function(e){var t,n=e.data,r=e.deleteImage,a=e.reUploadImage,c=e.dragWrapRef,s=n||{},u=s.tag,l=s.index,d=(null==c||null===(t=c.current)||void 0===t?void 0:t.clientWidth)||746,p={cursor:"pointer",userDrag:"none",userSelect:"none",WebkitUserDrag:"none",WebkitUserSelect:"none"};return(0,i.BX)(E.Box,{id:u.originSrc+l,css:function(e){return(0,o.Z)({position:"relative",display:"inline-block",width:"105px",height:"105px",margin:"0 calc(".concat(d-655,"px / 12) 15px"),borderRadius:"2px",background:e.colors.GBK10C,"&:active":{filter:"drop-shadow(0px 3px 6px rgba(0, 0, 0, 0.15)) drop-shadow(0px 0px 4px rgba(0, 0, 0, 0.3))"}},"pending"===u.status&&p)},children:[(0,i.tZ)(E.Image,{src:u.originSrc,width:"100%",height:"100%",css:{borderRadius:"2px"},sx:{objectFit:"cover"}}),(0,i.BX)(E.Box,{css:function(e){return{position:"absolute",top:0,left:0,width:"105px",height:"105px",borderRadius:"2px",zIndex:2,backgroundColor:e.colorMod(e.colors.GBK02A).alpha("success"===u.status?0:.4),"& .CircleLoadingBar .path":{stroke:e.colors.GBK99A},"&:hover":{".close":{display:"block"}}}},children:["pending"===u.status&&(0,i.tZ)(Ne.Z,{}),(0,i.tZ)(E.Box,{className:"close",css:function(e){return(0,o.Z)({position:"absolute",top:"-10px",right:"-9px",zIndex:3,width:"20px",height:"20px",lineHeight:"21px",fontSize:"15px",textAlign:"center",borderRadius:"50%",display:"none",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.4),color:e.colors.GBK99A,"&>span":{marginLeft:"1px"}},p)},onClick:function(){return r(u,l)},children:(0,i.tZ)(Oe.HN,{center:!0,width:"13px",height:"13px"})}),"error"===u.status&&(0,i.BX)(i.HY,{children:[(0,i.BX)(E.Flex,{fontSize:"15px",fontWeight:"400",height:"82px",color:"GBK99A",alignItems:"center",justifyContent:"center",css:p,onClick:function(){return a(u.file,l)},children:[(0,i.tZ)(De.x,{width:"20px",height:"22px"}),(0,i.tZ)(E.Text,{ml:"3px",children:"重试"})]}),(0,i.tZ)(E.Box,{css:function(e){return{position:"absolute",bottom:0,left:0,zIndex:3,width:"100%",height:"23px",lineHeight:"23px",fontSize:"12px",fontWeight:400,textAlign:"center",backgroundColor:e.colorMod(e.colors.GBK99A).alpha(.8),color:e.colors.GRD03A,borderRadius:"0 0 1px 1px"}},children:"上传失败"})]})]})]},u.originSrc+l)},Pe=n(68757),ke=function(e){var t=e.handleUploadImage,n=e.content,r=e.style,c=void 0===r?{}:r,s=e.isLocal,u=(0,a.useRef)();return(0,i.BX)(i.HY,{children:[(0,i.tZ)("input",{css:{display:"none"},ref:u,type:"file",onChange:function(e){t(e),s&&(u.current.value=null)},accept:"image/*",multiple:!0}),(0,i.tZ)(m.$U,{zaType:"Button",zaText:"本地上传图片",as:E.Flex,role:"button",width:"92px",height:"32px",lineHeight:"32px",fontSize:"12px",color:"GBL05A",alignItems:"center",justifyContent:"center",ml:"19px",mb:"6px",onClick:function(){return u.current.click()},css:function(e){return(0,o.Z)({verticalAlign:"top",display:"inline-flex",cursor:"pointer",borderRadius:"2px",backgroundColor:e.colorMod(e.colors.GBL05A).alpha(.08)},c)},children:n||(0,i.BX)(i.HY,{children:[(0,i.tZ)(Pe.We,{}),(0,i.tZ)(E.Text,{ml:"3px",mt:"2px",children:"本地上传"})]})})]})},xe=function(e){var t=e.handleUploadImage,n=(0,g.Z)(e,["handleUploadImage"]);return(0,i.tZ)(E.Flex,(0,r.Z)((0,o.Z)({},n),{height:"100%",alignItems:"center",justifyContent:"center",children:(0,i.BX)(E.Box,{textAlign:"center",children:[(0,i.tZ)(ke,{handleUploadImage:t,style:{width:"104px",height:"104px",border:"1px dashed #d3d3d3",margin:0,background:"transparent",borderRadius:"8px","&:hover":{background:"rgba(246, 246, 246, 0.3)"}},content:(0,i.tZ)(de,{})}),(0,i.tZ)(E.Text,{color:"GBK02A",fontSize:"14px",fontWeight:"500",mt:"10px",children:"上传图片"}),(0,i.tZ)(E.Text,{color:"GBK06A",fontSize:"12px",mt:"4px",children:"支持 JPG、JPEG、PNG 等格式"})]})}))},Le=function(e){var t=e.src,n=e.originalSrc,o=e.watermarkSrc,r=e.privateWatermarkSrc,i=e.watermark,a=e.dataRawwidth,c=e.dataRawheight,s=e.hash,u=(0,D.imgUrl)(t,{quality:be()(navigator.userAgent).Mobile?50:80,size:window.devicePixelRatio>=1.5?"1440w":"720w"});return{src:u,url:u,originalSrc:n,watermarkSrc:o,privateWatermarkSrc:r,watermark:i,rawWidth:a,rawHeight:c,id:s}},Ue=function(e){var t=e.dataList,n=e.insertImages,a=e.onClose,c=e.maxImage,s=(0,g.Z)(e,["dataList","insertImages","onClose","maxImage"]),u=!!c&&t.length>c;return(0,i.BX)(E.Flex,(0,r.Z)((0,o.Z)({css:{padding:"13px 20px",position:"relative"},alignItems:"center",justifyContent:"flex-end"},s),{children:[c&&(null==t?void 0:t.length)>0&&(0,i.BX)(E.Box,{css:{position:"absolute",left:20,top:20,display:"flex"},color:"GBK03A",fontSize:"13px",children:[(0,i.tZ)(E.Text,{css:{color:u&&"red"},children:t.length}),"/",c,(0,i.BX)(E.Text,{css:{opacity:.9,marginLeft:5},children:["(最多上传 ",c," 张图片)"]})]}),(null==t?void 0:t.length)>0&&(0,i.BX)(E.Text,{color:"GBK03A",fontSize:"14px",fontWeight:"400",mr:"10px",children:["已上传 ",t.length," 张图片，拖拽可调整顺序"]}),(0,i.tZ)(se,{active:t.length>0,onClick:function(){var e=t.map((function(e){return e.data||{}}));n(e,!0),a()},disabled:u,zaText:"插入图片；图片数：".concat(t.length||0),children:"插入图片"})]}))},Fe=function(e){var t=e.handleUploadImage,n=e.errorList,o=e.reUpload;return(0,i.BX)(E.Flex,{alignItems:"center",justifyContent:"space-between",children:[(0,i.tZ)(ke,{handleUploadImage:t,style:{margin:"5px 0 4px 20px",height:"32px"},isLocal:!0}),(null==n?void 0:n.length)>0&&(0,i.BX)(E.Flex,{alignItems:"center",mr:"20px",mt:"1px",fontSize:"14px",children:[(0,i.BX)(E.Text,{color:"GRD03A",children:[n.length," 张上传失败"]}),(0,i.tZ)(E.Text,{css:function(e){return{width:"114px",height:"32px",lineHeight:"32px",marginLeft:"10px",borderRadius:"3px",cursor:"pointer",background:e.colors.GBK10A,color:e.colors.GBL01A,fontWeight:500,textAlign:"center"}},onClick:o,children:"批量重新上传"})]})]})},Me=function(){var e=((0,Ae.Z)((function(){return n.e(5389).then(n.t.bind(n,68138,23))}))||{}).DraggableArea,t=(0,a.useRef)(),c=(0,Se.useDispatch)(),s=ne().sourceType,u=ne(),l=u.insertImage,p=u.onClose,h=u.initLocalList,f=u.setInitLocalList,m=u.maxImage,v=(0,d.Z)((0,a.useState)(h||[]),2),Z=v[0],g=v[1],T=(0,a.useRef)(Z);(0,a.useEffect)((function(){T.current=Z}),[Z]),(0,a.useEffect)((function(){return g(h),function(){var e;f(null===(e=T.current)||void 0===e?void 0:e.map((function(e){return(0,o.Z)({},e,"pending"===e.status&&{status:"error"})})))}}),[]);var C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.findIndex((function(e){return e.id===t})),i=(0,J.Z)(e);return-1!==r&&i.splice(r,1,(0,o.Z)({},e[r],n)),i},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var i=(null==n?void 0:n.isUpload)?null==n?void 0:n.imageList:Z;i.splice(t,1,(0,r.Z)((0,o.Z)({},i[t]),{status:"pending"})),g((function(){return(0,J.Z)(i)})),c((0,Re.Ix)(e,"default",s)).then((function(e){var n=e.payload;g((function(e){var o;return C(e,null===(o=i[t])||void 0===o?void 0:o.id,{data:Le(n),status:"success"})}))})).catch((function(){g((function(e){var n;return C(e,null===(n=i[t])||void 0===n?void 0:n.id,{status:"error"})}))}))}},_=function(e){var t,n=e.target.files;(null==n?void 0:n.length)&&((null==n?void 0:n.length)>100?$.Z.alert("添加图片请不要超过 100 张哦~"):null===(t=Array.from(n))||void 0===t||t.forEach((function(e){(0,Ce.fs)({file:e,preset:Ce.PG.content}).then((function(){g((function(t){var n=(0,J.Z)(t).concat([{originSrc:window.URL.createObjectURL(e),status:"pending",id:ye()("image"),file:e}]);return function(e,t){var n=t.length-1;A(t[n].file,n,{isUpload:!0,imageList:t})}(0,n),n}))})).catch((function(e){c((0,we.c0)(e.message||"图片上传未完成，请稍后发布","red"))}))})))},y=function(e,t){var n=(0,J.Z)(Z);n.splice(t,1),g(n)},S=function(e){var t=[];return null==e||e.forEach((function(e,n){"error"===e.status&&t.push((0,r.Z)((0,o.Z)({},e),{index:n}))})),t};return(null==Z?void 0:Z.length)?(0,i.BX)(i.HY,{children:[(0,i.tZ)(Fe,{handleUploadImage:_,errorList:S(Z),reUpload:function(){var e;null===(e=S(Z))||void 0===e||e.forEach((function(e){return A(e.file,e.index)}))}}),(0,i.tZ)(E.Box,{ref:t,css:{position:"relative",width:"100%",height:"505px",overflowY:"scroll",padding:"10px 12.5px 16px",lineHeight:"0.8"},children:e?(0,i.tZ)(e,{tags:Z.map((function(e){return(0,r.Z)((0,o.Z)({},e),{id:"".concat(e.id,"_").concat(e.status)})})),render:function(e){return(0,i.tZ)(Be,{data:e,deleteImage:y,reUploadImage:A,dragWrapRef:t})},onChange:function(e){g(e.map((function(e){var t,n;return(0,r.Z)((0,o.Z)({},e),{id:(null===(n=null===(t=e.id)||void 0===t?void 0:t.split("_"))||void 0===n?void 0:n[0])||ye()("image")})})))}}):Z.map((function(e,n){return(0,i.tZ)(Be,{data:{tag:e,index:n},deleteImage:y,reUploadImage:A,dragWrapRef:t},"".concat(e.id,"_").concat(n))}))}),(0,i.tZ)(Ue,{dataList:Z.filter((function(e){return"success"===e.status})),onClose:p,insertImages:l,maxImage:m})]}):(0,i.tZ)(xe,{css:{marginTop:"-20px"},handleUploadImage:_})},Ge=function(e){var t=(0,w.Z)({},e);return(0,i.tZ)(i.HY,{children:(0,i.tZ)(E.Flex,(0,r.Z)((0,o.Z)({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{children:(0,i.tZ)(Me,(0,o.Z)({},t))}))})},ze=n(53658),He=n(45477),qe=n(66681),Ve=function(e){var t=(0,O.Z)(),n=(0,d.Z)((0,a.useState)({}),2),o=n[0],r=n[1],i=(0,d.Z)((0,a.useState)(!1),2),c=i[0],s=i[1],u=(0,d.Z)((0,a.useState)(""),2),l=u[0],h=u[1],f=(0,d.Z)((0,a.useState)(!1),2),m=f[0],v=f[1],Z=(0,p.Z)((function(){v(!1),r({}),s(!1)})),g=(0,p.Z)((function(){return t("".concat(location.origin,"/api/v4/materials/pc_editor/folders?type=").concat(e,"&material_type=image")).then((function(e){var t,n=(0,ee.camelizeKeys)((null===(t=e.payload)||void 0===t?void 0:t.data)||{});return r(n),n}))}));return(0,a.useEffect)((function(){c||g().then((function(e){var t,n,o=null==e||null===(t=e.child)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id;h(o)})).catch((function(){v(!0)})).finally((function(){s(!0)}))}),[c,g]),{hasInited:c,isPageError:m,setIsPageError:v,reset:Z,folders:o,getFoldersList:g,activeFolderId:l,setActiveFolderId:h}},Xe=n(409),We=n(14262),Ke=n(14577),je=n(40980),Ye=n(47112),Qe=n.n(Ye),Je=function(e){var t=e.type,n=e.className,o=e.inputShowName,r=void 0===o?"":o,c=e.resetInput,s=e.folderId,u=e.getFoldersList,l=(0,O.Z)(),p=(0,a.useRef)(),h=(0,d.Z)((0,a.useState)(r),2),f=h[0],m=h[1];return(0,i.tZ)("input",{ref:p,type:"text",className:Qe()("MaterialLibrary-input-module",n),placeholder:"请输入文件名称",autoFocus:"autofocus",onChange:function(e){var t=e.target.value;m(t)},value:f,onBlur:function(){c&&c(""),"add"!==t&&f&&l("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(s),{method:"PUT",body:{name:f}}).then((function(){var e;null===(e=p.current)||void 0===e||e.blur(),u&&u()})).catch((function(e){var t,n,o;$.Z.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(o=n.error)||void 0===o?void 0:o.message)||"网络错误，稍后重试吧!")}))},onKeyUp:function(e){var t;13===e.keyCode&&(null===(t=p.current)||void 0===t||t.blur())}})};Je.propTypes={inputShowName:f().string,resetInput:f().func};var $e=Je,et=function(e){return(0,i.tZ)(m.$U,(0,o.Z)({as:E.Flex,zaType:"Button",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",css:function(e){return{borderRadius:"12px",backgroundColor:e.colors.GBK99A,cursor:"pointer","&+&":{marginLeft:"4px"}}}},e))},tt=function(e){var t,n=e.folders,o=void 0===n?{}:n,r=e.activeFolderId,c=e.getFoldersList,s=e.folderClick,u=e.reset,l=(0,O.Z)(),p=(0,d.Z)((0,a.useState)(""),2),h=p[0],f=p[1],m=(0,d.Z)((0,a.useState)(""),2),v=m[0],Z=m[1],g=function(e,t){"nav-edit"===e?(f(t.id),Z(t.name)):"nav-delete"===e&&$.Z.confirm((0,i.BX)("div",{className:"MaterialLibrary-alert",children:[(0,i.tZ)("h2",{children:"是否删除已选择分类？"}),(0,i.tZ)("p",{children:"分类中的图片将归入未分类中"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){l("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t.id),{method:"DELETE",body:{delete_material:!1}}).then((function(e){var t,n;(null===(t=e.payload)||void 0===t?void 0:t.success)?($.Z.alert("已成功删除分组，该分组的图片已移动至「我的图片-未分类」"),u()):$.Z.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))};return(null==o?void 0:o.hidden)?null:(0,i.BX)("div",{className:"MaterialLibraryNav",children:[(0,i.BX)("div",{className:"MaterialLibraryNav-nav",children:[(0,i.BX)(E.Flex,{className:"MaterialLibraryNav-Mine",justifyContent:"space-between",alignItems:"center",children:[(0,i.BX)(E.Flex,{justifyContent:"space-between",alignItems:"center",children:[(0,i.tZ)(Xe.y,{className:"nav-icon"}),null==o?void 0:o.name]}),(0,i.tZ)("div",{className:"nav-num",children:null==o?void 0:o.materialCount})]}),null==o||null===(t=o.child)||void 0===t?void 0:t.map((function(e){return(0,i.BX)(E.Flex,{className:Qe()("MaterialLibraryNav-Folder",{active:r===e.id}),justifyContent:"space-between",alignItems:"center",onClick:function(){s(e.id)},children:[(0,i.BX)(E.Flex,{justifyContent:"space-between",alignItems:"center",children:[(0,i.tZ)(We._,{className:"nav-icon"}),h!==e.id&&(0,i.tZ)("div",{className:"nav-name",children:e.name})]}),h!==e.id&&(0,i.tZ)("div",{className:Qe()("nav-num",{"disable-hover":!e.supportEdit&&!e.supportDelete}),children:e.materialCount||0}),h!==e.id&&(e.supportEdit||e.supportDelete)&&(0,i.BX)(E.Flex,{className:"nav-handle",children:[e.supportEdit&&(0,i.tZ)(et,{zaText:"编辑",onClick:function(t){t.stopPropagation(),g("nav-edit",e)},children:(0,i.tZ)(Ke.yc,{fill:"currentColor",size:10})}),e.supportDelete&&(0,i.tZ)(et,{zaText:"删除",onClick:function(t){t.stopPropagation(),g("nav-delete",e)},children:(0,i.tZ)(Oe.HN,{fill:"currentColor",size:10})})]}),h===e.id&&(0,i.tZ)($e,{folderId:e.id,inputShowName:v,getFoldersList:c,resetInput:function(e){f(e)}})]},e.id)}))]}),(0,i.BX)(E.Flex,{className:"MaterialLibraryNav-Add",justifyContent:"space-between",alignItems:"center",onClick:function(){var e;(null==o||null===(e=o.child)||void 0===e?void 0:e.length)>15?$.Z.alert("分组已达上限，请删除已有的分类后再行添加"):$.Z.confirm((0,i.BX)("div",{className:"MaterialLibrary-alert",children:[(0,i.tZ)("h2",{children:"添加分类"}),(0,i.tZ)($e,{type:"add",className:"MaterialLibraryNav-input-module"})]}),{text:{ok:"添加",cancel:"取消"}}).then((function(){var e,t=null===(e=document.querySelector(".MaterialLibrary-input-module"))||void 0===e?void 0:e.value;l("".concat(location.origin,"/api/v4/materials/pc_editor/folders"),{method:"POST",body:{name:t,material_type:"image"}}).then((function(){c()})).catch((function(e){var t,n,o;$.Z.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(o=n.error)||void 0===o?void 0:o.message)||"网络错误，稍后重试吧!")}))}),(function(){}))},children:[(0,i.tZ)(je.dU,{className:"nav-icon"}),"添加分类"]})]})};tt.propTypes={folders:f().object,getFoldersList:f().func,folderClick:f().func};var nt=tt,ot="uniqueId",rt=function(e){var t=e.isPageError,n=e.handleUploadImage,o=e.reset;return t?(0,i.tZ)(i.HY,{children:(0,i.tZ)(R.H.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:o})}):(0,i.tZ)(xe,{css:{marginTop:"-50px"},handleUploadImage:n})},it=function(e){var t=e.dataList,n=e.activeFolderId,c=e.folders,s=e.getFoldersList,u=e.insertImages,l=(0,g.Z)(e,["dataList","activeFolderId","folders","getFoldersList","insertImages"]),d=(0,O.Z)(),p=(t||[]).filter((function(e){return!0===e.checked})),h=(0,a.useMemo)((function(){var e;return null==c||null===(e=c.child)||void 0===e?void 0:e.filter((function(e){return e.id!==n}))}),[c,n]);return(0,i.BX)(E.Flex,(0,r.Z)((0,o.Z)({css:{padding:"13px 20px"},justifyContent:p.length>0?"space-between":"flex-end"},l),{children:[p.length>0&&(0,i.tZ)(le,{onClick:function(){0!==p.length&&$.Z.confirm((0,i.BX)("div",{className:"MaterialLibrary-alert",children:[(0,i.BX)("h2",{children:["是否删除已选择共 ",p.length," 张图片？"]}),(0,i.tZ)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){var e="".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(n,"/materials");d(e,{method:"DELETE",body:{material_type:"image",folder_material_ids:p.map((function(e){return e.uniqueId}))}}).then((function(e){var t,n;(null===(t=e.payload)||void 0===t?void 0:t.success)?s():$.Z.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))},children:"删除图片"}),(0,i.BX)(E.Box,{children:[p.length>0&&(null==h?void 0:h.length)>0&&(0,i.tZ)(ue,{css:{width:"86px"},onClick:function(){if(0!==p.length){var e=h[0].id;$.Z.confirm((0,i.BX)("div",{className:"MaterialLibrary-alert",children:[(0,i.BX)("h2",{children:["为已选择共 ",p.length," 张图片分类"]}),(0,i.tZ)(ze.Z,{buttonClassName:"MaterialLibraryContent-select",listClassName:"MaterialLibraryContent-option",value:n,onChange:function(t){e=t},children:h.map((function(e){var t=e.name,n=e.id;return(0,i.tZ)(ze.W,{value:n,text:t,children:t},n)}))})]}),{text:{ok:"确定",cancel:"取消"}}).then((function(){d("".concat(location.origin,"/api/v4/materials/pc_editor/material-move"),{method:"POST",body:{folder_id:n,target_folder_id:e,folder_material_ids:p.map((function(e){return e.uniqueId}))}}).then((function(e){var t,n;(null===(t=e.payload)||void 0===t?void 0:t.success)?s():$.Z.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))}},children:"移动"}),(0,i.tZ)(se,{active:p.length>0,onClick:function(){u(pe(p))},zaText:"插入图片；图片数：".concat(p.length||0),children:"插入图片"})]})]}))},at=function(e){var t=e.activeFolderId,n=e.getFoldersList,o=e.folders,r=(0,O.Z)(),c=(0,Se.useDispatch)(),s=re({itemKey:ot}),u=s.materialList,l=s.paging,d=s.isLoading,h=s.setIsLoading,f=s.hasInited,m=s.setHasInited,v=s.isDrained,Z=s.isPageError,g=s.setIsPageError,T=s.selectAllChecked,C=s.toggleSelectAll,A=s.reset,_=s.handleResponseErrorData,y=s.handleResponseData,S=s.chooseImage,I=s.insertImages,b=!u.length,w=(0,p.Z)((function(){return h(!0),g(!1),r((null==l?void 0:l.next)||(0,N.D)("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t,"/materials"),{offset:null==u?void 0:u.length,limit:24}))})),R=(0,p.Z)((function(){return w().then(y).catch((function(e){_(e.payload)}))})),D=function(e){var o=e.target.files;if(null==o?void 0:o.length)if((null==o?void 0:o.length)>100)$.Z.alert("添加图片请不要超过 100 张哦~");else{var i=[],a=!0,s=!1,u=void 0;try{for(var l,d=function(){var e=l.value;(0,Ce.fs)({file:e,preset:Ce.PG.content}).then((function(){(0,He.Z)(e).then((function(a){(0,qe.Z)(a).then((function(a){(i=i.concat({name:null==e?void 0:e.name,source:null==a?void 0:a.original_hash})).length===o.length&&function(e){r("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t,"/materials"),{method:"POST",body:{material_type:"image",materials:e}}).then((function(e){var t,o;(null===(t=e.payload)||void 0===t?void 0:t.success)?n():$.Z.alert((null===(o=e.payload)||void 0===o?void 0:o.message)||"网络错误，稍后重试吧！")})).catch((function(e){var t,n,o;$.Z.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(o=n.error)||void 0===o?void 0:o.message)||"网络错误，稍后重试吧!")}))}(i)}))}))})).catch((function(e){c((0,we.c0)(e.message||"图片上传未完成，请稍后发布","red"))}))},p=o[Symbol.iterator]();!(a=(l=p.next()).done);a=!0)d()}catch(e){s=!0,u=e}finally{try{a||null==p.return||p.return()}finally{if(s)throw u}}}};(0,a.useEffect)((function(){!f&&t&&w().then(y).catch((function(e){_(e.payload,!0)})).finally((function(){m(!0)}))}),[f,m,t,w,y,_]);var B=b?!d&&(0,i.tZ)(rt,{handleUploadImage:D,isPageError:Z,reset:A}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(E.Box,{mt:"-36px",width:"100px",children:(0,i.tZ)(ke,{handleUploadImage:D},u.length)}),(0,i.tZ)(V,{getContainer:function(e){return e},onLoad:R,isLoading:d,isDrained:v,css:{marginLeft:"-14px"},children:u.map((function(e,t){return(0,i.tZ)(z,{data:e,chooseImage:S,insertImages:I,isPrivate:!0},String([e.uniqueId,t]))}))}),(0,i.tZ)(it,{dataList:u,folders:o,activeFolderId:t,getFoldersList:n,insertImages:I})]});return(0,i.BX)(i.HY,{children:[(0,i.tZ)(ie,{children:(0,i.tZ)(Q,{css:{marginLeft:"auto"},checked:T,onChange:C})}),f?B:(0,i.tZ)(ae,{})]})},ct=function(e){var t,n=(0,w.Z)({},e),a=Ve(A.PRIVATE),c=a.hasInited,s=a.getFoldersList,u=a.reset,l=a.isPageError,d=a.folders,p=a.activeFolderId,h=a.setActiveFolderId,f=null===(t=d.child)||void 0===t?void 0:t.find((function(e){return e.id===p})),m=l?(0,i.tZ)(rt,{isPageError:!0,reset:u}):(0,i.tZ)(at,(0,o.Z)({folders:d,activeFolderId:p,getFoldersList:s},n),String([p,null==f?void 0:f.materialCount]));return(0,i.BX)(E.Flex,{color:"GBL05A",css:{height:"530px",overflow:"hidden",fontSize:"12px"},children:[!l&&(0,i.tZ)(nt,{folders:d,activeFolderId:p,folderClick:function(e){p!==e&&h(e)},getFoldersList:s,reset:u}),(0,i.tZ)(E.Flex,(0,r.Z)((0,o.Z)({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px",flex:1}},n),{children:c?m:(0,i.tZ)(ae,{css:{marginTop:42}})}))]})},st=function(e){var t=e.active,n=(0,g.Z)(e,["active"]);return(0,i.tZ)("button",(0,o.Z)({color:"GBK03A",css:[{padding:"0 12px",fontSize:"12px",cursor:"pointer"},t&&{fontWeight:"bold"}]},n))},ut=function(e){var t=e.tabType,n=e.tabChange;return(0,i.tZ)(E.Flex,{children:y.map((function(e){return(0,i.tZ)(st,{active:t===e.type,onClick:function(){n(e.type)},children:e.name},e.type)}))})};ut.propTypes={tabType:f().string,tabChange:f().func};var lt,dt="uniqueId",pt=function(e){var t=e.isPageError,n=e.keywordCatch,o=e.reset;return t?(0,i.tZ)(R.H.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:o}):(0,i.tZ)(R.H.EI1A,{image:"default",content:"没有找到".concat(n?"「"+n+"」":"","相关内容"),buttonText:"搜索其他内容",buttonOnClick:function(){var e;null===(e=document.querySelector(".materials_library_public_search"))||void 0===e||e.focus()}})},ht=function(e){var t=e.dataList,n=e.insertImages,a=(0,g.Z)(e,["dataList","insertImages"]),c=(t||[]).filter((function(e){return!0===e.checked}));return(0,i.tZ)(E.Flex,(0,r.Z)((0,o.Z)({css:{padding:"13px 20px"},justifyContent:"flex-end"},a),{children:(0,i.tZ)(se,{active:c.length>0,onClick:function(){n(pe(c))},zaText:"插入图片；图片数：".concat(c.length||0),children:"插入图片"})}))},ft=function(e){var t=e.keywordCatch,n=e.activeFolderId,o=ne(),r=o.sourceId,c=o.sourceType,s=(0,O.Z)(),u=re({itemKey:dt}),l=u.materialList,d=u.paging,h=u.isLoading,f=u.setIsLoading,m=u.hasInited,v=u.setHasInited,Z=u.isDrained,g=u.isPageError,T=u.setIsPageError,C=u.subTypeCatch,A=(u.handleSubTypeChange,u.selectAllChecked),_=u.toggleSelectAll,y=u.reset,S=u.handleResponseErrorData,I=u.handleResponseData,b=u.chooseImage,w=u.insertImages,R=!l.length,D=(0,p.Z)((function(){return f(!0),T(!1),s((null==d?void 0:d.next)||(0,N.D)("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(n,"/search"),{offset:null==l?void 0:l.length,limit:24,keyword:t,source_type:c,source_id:r,sub_type:C}))})),B=(0,p.Z)((function(){return D().then(I).catch((function(e){S(e.payload)}))}));(0,a.useEffect)((function(){!m&&n&&D().then(I).catch((function(e){S(e.payload,!0)})).finally((function(){v(!0)}))}),[m,n,v,D,I,S]);var P=R?!h&&(0,i.tZ)(pt,{isPageError:g,keywordCatch:t,reset:y}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(V,{getContainer:function(e){return e},onLoad:B,isLoading:h,isDrained:Z,children:l.map((function(e,t){return(0,i.tZ)(z,{data:e,insertImages:w,chooseImage:b},String([e.uniqueId,t]))}))}),(0,i.tZ)(ht,{dataList:l,insertImages:w})]});return(0,i.BX)(i.HY,{children:[(0,i.BX)(ie,{children:[(0,i.BX)("div",{className:"MaterialLibrary-SearchTipsContainer",children:[false,t&&!R&&!h&&!g&&(0,i.BX)(E.Box,{color:"GBK03A",width:"200px",css:{margin:"0px 12px",fontSize:"12px"},children:["以下为「",t,"」相关搜索内容"]})]}),(0,i.tZ)(Q,{checked:A,onChange:_})]}),m?P:(0,i.tZ)(ae,{})]})},mt=function(e){var t=(0,w.Z)({},e),n=(0,d.Z)((0,a.useState)(""),2),c=n[0],s=n[1],u=Ve(A.PUBLIC),l=u.hasInited,p=u.reset,h=u.isPageError,f=u.activeFolderId,m=h?(0,i.tZ)(pt,{isPageError:!0,reset:p}):(0,i.tZ)(ft,(0,o.Z)({keywordCatch:c,activeFolderId:f},t),c);return(0,i.BX)(i.HY,{children:[(0,i.tZ)(j,{placeholder:"搜索网络素材库",onSearch:s}),(0,i.tZ)(E.Flex,(0,r.Z)((0,o.Z)({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{children:l?m:(0,i.tZ)(ae,{css:{marginTop:42}})}))]})},vt=(lt={},(0,Z.Z)(lt,A.LOCAL,Ge),(0,Z.Z)(lt,A.EMOTICON,ve),(0,Z.Z)(lt,A.PUBLIC,mt),(0,Z.Z)(lt,A.PRIVATE,ct),(0,Z.Z)(lt,A.LATEST,Te),lt),Zt=function(e){var t=e.onClose,n=e.sourceType,o=e.sourceId,r=e.insertImage,c=e.maxImage,s=e.tabs,u=e.initImage,l=void 0===u?[]:u,p=(0,d.Z)((0,a.useState)(A.LOCAL),2),h=p[0],f=p[1],v=(0,d.Z)((0,a.useState)(l),2),Z=v[0],g=v[1],E=vt[h];return(0,a.useEffect)((function(){var e=function(e){return e.preventDefault()};return document.addEventListener("drop",e,!1),document.addEventListener("dragover",e,!1),function(){document.removeEventListener("drop",e,!1),document.removeEventListener("dragover",e,!1)}}),[]),(0,i.tZ)(oe,{onClose:t,sourceType:n,sourceId:o,insertImage:r,setTabType:f,initLocalList:Z,setInitLocalList:g,maxImage:c,children:(0,i.BX)("div",{children:[(0,i.tZ)(b,{tabType:h,tabChange:f,tabs:s}),E&&(0,i.tZ)(m.eV,{block:h,children:(0,i.tZ)(E,{})})]})})};Zt.propTypes={sourceType:f().string,sourceId:f().number,onClose:f().func,insertImage:f().func};var gt=Zt,Et=function(e,t){var n=e.sourceType,o=e.sourceId,r=e.insertImage,c=e.maxImage,s=e.tabs,u=e.initImage,l=(0,d.Z)((0,a.useState)(!1),2),h=l[0],f=l[1],Z=(0,p.Z)((function(){return f((function(e){return!e}))}));return(0,a.useImperativeHandle)(t,(function(){return{toggleShown:Z}}),[Z]),(0,i.tZ)(v.Z,{css:{minWidth:"746px",".Modal-content":{margin:0,padding:0}},onClose:Z,children:h&&(0,i.tZ)(m.eV,{block:"MaterialLibrary",children:(0,i.tZ)(gt,{onClose:Z,sourceType:n,sourceId:o,insertImage:r,maxImage:c,tabs:s,initImage:u})})})};Et.propType={sourceType:f().string.isRequired,sourceId:f().number.isRequired,insertImage:f().func.isRequired};var Tt=(0,a.forwardRef)(Et),Ct=function(e){var t=e.sourceType,n=e.sourceId,a=c().createRef(null),d={},p=!1,h=null,f=function(e,t,n){p?h=(0,l.Z)(h,"image","IMMUTABLE",(0,r.Z)((0,o.Z)({},t?null==e?void 0:e.value:{upload:e}),{size:"normal"}),void 0,{isBatched:!0,isLastOneOfBatch:n}):d.setEditorState((0,l.Z)(d.getEditorState(),"image","IMMUTABLE",{upload:e,size:"normal"}))};return{initialize:function(e){Object.assign(d,e)},components:[(0,i.tZ)(Tt,{ref:a,sourceType:t,sourceId:n,insertImage:function(e,t){var n;n=function(){for(var n=0;n<e.length;n++){var o=n===e.length-1;f({value:e[n]},t,o)}},p=!0,h=d.getEditorState(),n(),d.setEditorState(h),p=!1}},"material_library")],handleCommand:function(e){var t;return"insert-image-from-library"===e?(null===(t=a.current)||void 0===t||t.toggleShown(),"handled"):"not-handled"},toolbar:{label:"插入图片",section:u.Z.BASIC_MEDIA,text:"图片",icon:Xe.y,priority:2,onClick:function(){var e;null===(e=a.current)||void 0===e||e.toggleShown()}},toolbarV2:[{label:"插入图片",section:s.Z.BASIC_MEDIA,text:"图片",icon:Xe.y,priority:2,onClick:function(){var e;null===(e=a.current)||void 0===e||e.toggleShown()}}]}}},54598:function(e,t,n){"use strict";var o=n(78194),r=n(68562),i=n(87363),a=n(48628),c=n(82096),s=n(32261),u=n(36701),l=n(17222),d=n(33393),p=n(62792),h=n(14562),f=n(48979),m=n(22823),v=n(34965),Z=(0,i.forwardRef)((function(e,t){var n=e.getStore,a=e.getContentInfo,l=(0,o.Z)((0,i.useState)(!1),2),d=l[0],p=l[1],h=a(),Z=h.id,g=h.type;(0,i.useImperativeHandle)(t,(function(){return{setShowUserProfitCardSelector:p}}),[]);var E=function(){return(0,f.Z)(n().getEditorState()).filter((function(e){return"ad-link-card"===e.getType()}))};return(0,r.tZ)(r.HY,{children:(0,r.tZ)(c.Z,{className:"UserProfitCardSelector",size:"large",onClose:function(){p(!1)},children:d&&(0,r.tZ)("div",{className:"UserProfitCardSelector-content",children:(0,r.tZ)(s.Z,{className:"UserProfitCardSelector-iframe",src:(0,m.NY)({contentId:Z,contentType:g}),onMessage:function(e){var t=n().getEditorRef();if("ProfitCardSelector/submitProfitCardInfo"===(null==e?void 0:e.type)&&(null==e?void 0:e.payload)){var o=e.payload,r=o.type,i=o.id,a=o.url;if(o.preventClose||p(!1),"inserLinkCard"===r&&t.props.handleCommand("insert-link-card:".concat(a)),"insertMCNLinkCard"===r){if((0,f.Z)(n().getEditorState()).filter((function(e){return"mcn-link-card"===e.getType()})).size>=30)return void u.Z.alert(null,{title:"一篇内容最多可添加 ".concat(30," 个商品")});t.props.handleCommand("insert-mcn-link-card:".concat(i))}if("insertEduCard"===r){if((0,f.Z)(n().getEditorState()).filter((function(e){return e.getType()===v.o6.TYPE})).size>=v.o6.EDU_CARD_LIMIT)return void u.Z.alert(null,{title:"一篇内容最多可添加 ".concat(v.o6.EDU_CARD_LIMIT," 个教育卡片")});t.props.handleCommand("".concat(v.o6.WebInsertCommand).concat(i))}if("insertAdLinkCard"===r){if(i.startsWith("ZhiTask_"))if(E().filter((function(e){return e.getData().id.startsWith("ZhiTask_")})).size>=5)return void u.Z.alert("一篇内容最多可添加 ".concat(5," 个「知+自选」卡片"));if(i.startsWith("fee_"))if(E().filter((function(e){return e.getData().id.startsWith("fee_")})).size>=1)return void u.Z.alert("一篇内容最多可添加 ".concat(1," 个「付费回答」卡片"));t.props.handleCommand("insert-ad-link-card:".concat(i))}}}})})})})}));t.Z=function(e){var t=e.shouldDisabled,n=e.shouldShow,o=void 0===n?function(){return!0}:n,c=e.getContentInfo,s=void 0===c?function(){}:c,u={};return u.containerRef=(0,i.createRef)(),{initialize:function(e){Object.assign(u,e)},handleCommand:function(e){return"toggle-user-profit-modal"===e?(u.containerRef.current.setShowUserProfitCardSelector(!0),"handled"):"not-handled"},toolbar:{label:"用户收益",icon:a.Fo,shouldShow:o,shouldDisabled:function(){return!!(null==t?void 0:t())||null},section:d.Z.CUSTOM_MAIN,toolType:h._W.ENTITY,onClick:function(){u.containerRef.current.setShowUserProfitCardSelector(!0),l.Z.trackEvent(null,{id:6097,action:"Click"})},priority:1},toolbarV2:{label:"收益",text:"收益",icon:a.Fo,shouldShow:o,shouldDisabled:function(){return!!t()||null},section:p.Z.BUSINESS_MEDIA,toolType:h._W.ENTITY,onClick:function(){u.containerRef.current.setShowUserProfitCardSelector(!0),l.Z.trackEvent(null,{id:6097,action:"Click"})},priority:1},components:(0,r.tZ)(Z,{ref:u.containerRef,getStore:function(){return u},getContentInfo:s})}}},70311:function(e,t,n){"use strict";n.d(t,{Dt:function(){return w},KW:function(){return _},ct:function(){return b},hx:function(){return S},l0:function(){return R},vB:function(){return O}});var o=n(21620),r=n(84421),i=n(65390),a=n(88483),c=n(61565),s=n(32554),u=n(68562),l=n(397),d=n(37015),p=n(77568),h=n.n(p),f=n(38748),m=n.n(f),v=n(58386),Z=n.n(v),g=n(87363),E=n(97645),T=n.n(E),C=n(70175),A=n(27124),_={success:"success",fail:"fail",request:"request"},y="EDITABLE_STATSC";function S(){var e=T().get(y);e&&(e.forEach((function(e){d.ZP.increment(e)})),T().delete(y))}var I={get pageName(){return"UnknownPage"},reportRequest:Z(),reportSuccess:Z(),reportFail:Z(),recordError:function(e){return e},wrapAutoRecord:function(e){return e}},b=(0,g.createContext)(I),w=function(){return(0,g.useContext)(b)},R=function(e){return h()((function(t){var n=w();return(0,u.tZ)(e,(0,a.Z)({reporter:n},t))}),e)},N=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}var i=n.prototype;return i.componentDidCatch=function(e,t){var n=this.props,o=n.reporter,r=n.name;throw o&&o.reportFail(r,e,{extra:{errorInfo:t}},!0),e},i.render=function(){return this.props.children},n}(g.Component),O=R(N);t.ZP=function(e,t){var n=function(t,n){d.ZP.increment("".concat(e,".").concat(t,".").concat(n,".count"))},o=function(e){return n(e,_.request)},r=function(e){return n(e,_.success)},s=function(n,o,r,c){if((0,i.Z)(o,Error)&&!(0,A.hu)(o.message)){var s=function(e){var t=e.name;return"ResponseError"===t?"".concat(t,"_").concat(e.status||0):t||"Unknown"}(o);d.ZP.increment([e,n,_.fail,s,"count"].join(".")),function(t,n){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.Z)(n,Error)&&(null===(o=window.Raven)||void 0===o||o.captureException(n,(0,a.Z)({tags:{scope:"".concat(e,":").concat(t)}},r)))}(n,o,r),!c&&(0,l.zB)({type:"EditorActionError-"+n,appName:"heifetz",spanName:e,currentUser:(null==t?void 0:t())||"Unknown",release:C.Z.release,error:{name:s,message:o.message,payload:o.payload||"Unknown",stack:o.stack}})}},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.intent,a=void 0===i||i,u=n.success,l=void 0===u||u;return function(){for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];try{a&&o(e);var d=function(){return l?r(e):void 0},p=t.apply(void 0,(0,c.Z)(i));return m()(p)?p.then((function(e){return d(),e}),(function(t){throw s(e,t),t})):(d(),p)}catch(t){throw s(e,t),t}}};return{get pageName(){return e},reportRequest:o,reportSuccess:r,reportFail:s,wrapAutoRecord:u,recordError:function(e,t){return u(e,t,{success:!1})},stash:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(n.length){var r=T().get(y)||[];r.push("".concat(e,".").concat(n.join("."),".count")),T().set(y,r)}}}}},18585:function(e,t,n){"use strict";n.d(t,{GM:function(){return v},Uh:function(){return h},Wb:function(){return d},Wf:function(){return m},yN:function(){return Z}});var o,r=n(61565),i=n(45194),a=n.n(i),c=n(97645),s=n.n(c),u="EMOTICON_EMOJI",l=s().get(u);function d(){return!!o}function p(){if(o)return o;var e=function(){l&&(l=s().get(u));return l}();return e?(o={},e.forEach((function(e){o[e.placeholder]=e.staticImageUrl})),o):{}}function h(e){l=e,s().set(u,e)}function f(e){var t=p()[e];return t?'<img data-zhihu-emoticon="'.concat(e,'" src="').concat(t,'" alt="').concat(e,'" />'):e}function m(e){return e.replace(/\[.{1,8}?\]/g,f)}function v(e,t){return t.map((function(t){var n=t.id,o=t.type,i=e[n],c="emoji"===o?45:8;return i?a()(i.stickers,c).map((function(e,t){return{groupId:n,id:"".concat(n,"-").concat(t),data:e,type:o}})):a()((0,r.Z)(Array(t.stickerCount)),c).map((function(e,t){return{groupId:n,id:"".concat(n,"-").concat(t),data:[],type:o}}))})).flat()}function Z(e,t){return e?t:t.filter((function(e){return"vip"!==e.type}))}},25917:function(e,t,n){"use strict";n.d(t,{g:function(){return Z}});var o=n(21620),r=n(84421),i=n(88483),a=n(32554),c=n(68562),s=n(397),u=n(37015),l=n(77568),d=n.n(l),p=n(87363),h=n(52495),f=n(70175),m=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}var i=n.prototype;return i.componentDidCatch=function(e,t){var n,o,r,i=null!==(n=(0,u.j0)())&&void 0!==n?n:"Unknown",a=null!==(o=null==e?void 0:e.name)&&void 0!==o?o:"Unknown",c=null!==(r=this.props.currentUser)&&void 0!==r?r:"Unknown",l=f.Z.release;throw(0,s.Tb)(e,{logger:"EditorErrorReport",fingerprint:["editor-fail"],extra:{passWhitelistUrlsTest:!0,pageName:i,currentUser:c}}),(0,s.zB)({type:"EditorRenderError",appName:"heifetz",spanName:i,currentUser:c,release:l,error:{name:a,message:e.message,stack:e.stack,payload:e.payload||"Unknown",componentStack:t.componentStack}}),e},i.render=function(){return this.props.children},n}(p.Component),v=(0,h.connect)((function(e){return{currentUser:e.currentUser}}))(m),Z=function(e){var t=function(t){(0,r.Z)(s,t);var n=(0,a.Z)(s);function s(){return(0,o.Z)(this,s),n.apply(this,arguments)}return s.prototype.render=function(){return(0,c.tZ)(v,{children:(0,c.tZ)(e,(0,i.Z)({},this.props))})},s}(p.Component);return d()(t,e)}},16044:function(e,t,n){"use strict";var o=n(68562),r=n(58146),i=n(52495),a=n(1168),c=n(62372);t.Z=function(e){var t=e.subtitle,n=e.errorImage,s=void 0===n?"//zhstatic.zhihu.com/assets/error/liukanshan_wire.svg":n,u=(0,i.useSelector)((function(e){return e.env.ctx.query.error_title}))||e.title;return(0,o.BX)("div",{className:"ErrorPage",children:[(0,o.tZ)(r.ql,{title:u}),(0,o.BX)("div",{className:"ErrorPage-container",children:[(0,o.BX)("div",{className:"ErrorPage-text",children:[(0,o.tZ)("h1",{className:"ErrorPage-title",children:u}),(0,o.tZ)("p",{className:"ErrorPage-subtitle",children:t}),(0,o.tZ)(c.Z,{a:!0,preset:"primary",color:"blue",className:"ErrorPage-primaryButton",to:"https://www.zhihu.com",children:"去往首页"})]}),(0,o.tZ)("div",{className:"ErrorPage-errorImageContainer",children:(0,o.tZ)("img",{className:"ErrorPage-errorImage",src:s,alt:"page error"})})]}),(0,o.tZ)(a.ZP,{children:(0,o.tZ)(a.sJ,{})})]})}},20722:function(e,t,n){"use strict";n.d(t,{SV:function(){return v},mf:function(){return Z.Z},ds:function(){return O},Ko:function(){return f}});var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(78724),s=n(16125),u=n(32554),l=n(68562),d=n(87363),p=n(52028),h=function(e){(0,r.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.message,n=e.location.pathname;return(0,l.tZ)("div",{className:"UnknownError",children:t||(0,l.BX)("div",{children:["遇到不可预料的问题，请检查「网络连接」或",(0,l.tZ)("a",{href:n,children:"刷新重试"}),"。"]})})},n}(d.Component),f=(0,p.withRouter)(h),m=function(e){(0,r.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={hasError:!1},e}var d=n.prototype;return d.componentDidCatch=function(e,t){var n=this.props.target;window.Raven&&window.Raven.captureException(e,{logger:"ErrorBoundary",fingerprint:["ErrorBoundary"],extra:(0,i.Z)({info:t},n&&{target:n})})},d.render=function(){var e=this.props,t=e.children,n=e.replacement,o=e.message,r=(0,c.Z)(e,["children","replacement","message"]);if(this.state.hasError){var u=void 0===n?"undefined":(0,s.Z)(n);return"undefined"===u?(0,l.tZ)(f,{message:o||"遇到不可预料的问题"}):"function"===u?n((0,a.Z)((0,i.Z)({},r),{children:t})):n}return t},n.getDerivedStateFromError=function(){return{hasError:!0}},n}(d.Component),v=m,Z=n(16044),g=n.p+"assets/liukanshan_wire.dc5adecf.svg";var E=function(){return(0,l.tZ)(Z.Z,{title:"请求错误",subtitle:"无法访问当前页面",errorImage:g})};var T=function(){return(0,l.tZ)(Z.Z,{title:"未认证",subtitle:"无法访问当前页面",errorImage:g})};var C=function(){return(0,l.tZ)(Z.Z,{title:"没有权限",subtitle:"无法访问当前页面",errorImage:g})},A=n(52495),_=n(78194),y=n(91496),S=n.p+"assets/liukanshan_desert.ecf3c388.svg";function I(e){var t=e.seconds,n=void 0===t?5:t,o=e.source,r=e.title,i=(0,_.Z)((0,d.useState)(n),2),a=i[0],c=i[1],s=function(e){var t=/^\/question\/(\d+)\/answer\/(\d+)/.exec(e);return t&&t[1]&&t[2]?{destination:"回答所在的问题页",targetUrl:"/question/".concat(t[1])}:{destination:"知乎首页",targetUrl:"https://www.zhihu.com"}}(o),u=s.targetUrl,p=s.destination;return(0,y.Z)((function(){c(a-1)}),0===a?null:1e3),(0,d.useEffect)((function(){0===a&&(location.href=u)}),[a,u]),(0,l.tZ)(Z.Z,{title:r,subtitle:"".concat(a," 秒后自动跳转至").concat(p),errorImage:S})}var b=function(){var e=(0,A.useSelector)((function(e){return e.env.ctx.query})),t=e.redirect,n=e.error_title,o=e.error_from;return t?(0,l.tZ)(I,{source:o,seconds:5,title:n}):(0,l.tZ)(Z.Z,{title:"404",subtitle:"你似乎来到了没有知识存在的荒原",errorImage:g})},w=n.p+"assets/liukanshan_delete.5086fe3e.png";var R=function(){return(0,l.tZ)(Z.Z,{title:"该内容已删除",subtitle:"你似乎来到了没有知识存在的荒原",errorImage:w})},N=n.p+"assets/liukanshan_delivery.a6651701.svg";var O=function(){return(0,l.tZ)(Z.Z,{title:"出了一点问题",subtitle:"我们正在解决",errorImage:N})};n(77568),n.p;var D=n(22318),B=n(73464),P=(d.Component,n(40198)),k=n(92799),x=[{name:"BadRequestErrorPage",path:"/400",component:E},{name:"UnauthorizedErrorPage",path:"/401",component:T},{name:"ForbiddenErrorPage",path:"/403",component:C},{name:"NotFoundErrorPage",path:"/404",component:b,revalidate:864e5,getStaticPath:function(e){var t,n=e.data,o="NotFoundErrorPageCacheKey",r=null==n?void 0:n.initialState;r&&(o+=(0,k.Hu)(r)?"_mobile":"_pc",o+=(0,P.dd)(r)?"_login":"_notLogin");var i=/error_title=([^&]+)/.exec(null==n||null===(t=n.ctx)||void 0===t?void 0:t.originalUrl);return i&&i[1]&&(o+="data-".concat(i[1])),o}},{name:"GoneErrorPage",path:"/410",component:R,revalidate:864e5,getStaticPath:function(e){var t=e.data,n="GoneErrorPageCacheKey",o=null==t?void 0:t.initialState;return o&&(n+=(0,k.Hu)(o)?"_mobile":"_pc",n+=(0,P.dd)(o)?"_login":"_notLogin"),n}}];p.Route,x.map((function(e){return(0,l.tZ)(p.Route,{revalidate:e.revalidate,getStaticPath:e.getStaticPath,name:e.name,path:e.path,component:e.component},e.path)}))},4244:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(68562),r=n(90857),i=n(87363),a=n(48457),c=n(73464),s=n(38793),u=function(e){var t=e.className,n=e.onClick,u=e.label,l=e.onRef,d=e.disabled,p=e.showIcon,h=void 0===p||p;return(0,o.BX)(i.Fragment,{children:[(0,o.tZ)(s.bY,{input:"f",action:n}),(0,o.tZ)(a.$U,{as:c.ZP,zaText:"收藏",zaType:"Button",zaBlock:"收藏",onRef:l,className:t,preset:"plain",onClick:n,icon:h?r.mH:null,label:u,disabled:d})]})};u.defaultProps={label:"收藏"};var l=u},5700:function(e,t,n){"use strict";n.d(t,{E:function(){return _}});var o=n(21620),r=n(71103),i=n(84421),a=n(88483),c=n(16600),s=n(78724),u=n(61565),l=n(32554),d=n(68562),p=n(87363),h=n(52495),f=n(52626),m=n(65406),v=n(74453),Z=n(87655),g=n(85570),E=function(){return n.e(5258).then(n.bind(n,95258)).then((function(e){return e.FavlistsModal}))},T={ids:[],isFetching:!1,isDrained:!1},C=(0,m.P1)((function(e){return e.favlists[e.currentUser]||T}),(function(e){return e.entities.favlists}),(function(e,t){var n=e.ids,o=(0,s.Z)(e,["ids"]);return(0,c.Z)((0,a.Z)({},o),{items:n.map((function(e){return t[e]}))})}));var A=function(e){(0,i.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).onFavlistAdd=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=e.props,i=r.type,a=r.id,c=r.onFavlistAdd;return c.apply(void 0,(0,u.Z)(n).concat([{type:i,id:a}]))},e.onLoad=function(){var t=e.props,n=t.onLoad,o=t.type,i=t.id,s=t.onUpdateReaction;return n(o,i).then((function(e){s({contentType:o,contentId:i,relations:e.payload.data.reduce((function(e,t){return(0,c.Z)((0,a.Z)({},e),(0,r.Z)({},t.id,t.isFavorited))}),{})})}))},e}return n.prototype.render=function(){var e=this.props,t=e.currentUser,n=e.authRequired,o=(0,s.Z)(e,["currentUser","authRequired"]);return(0,d.tZ)(v.Z,(0,c.Z)((0,a.Z)({getComponent:E},o),{authRequired:n,isUserActive:Boolean(null==t?void 0:t.isActive),onLoad:this.onLoad,onFavlistAdd:this.onFavlistAdd}))},n}(p.Component),_=(0,f.compose)(Z.Z,(0,h.connect)((function(e,t){var n=t.id,o=t.type,r=e.favlists.relations,i=e.currentUser,a=C(e);return{isFetching:a.isFetching,isDrained:a.isDrained,items:a.items,relations:r["".concat(o,"_").concat(n)],zaEnabled:!0,urlToken:i}}),(function(e,t){return{onUpdateFav:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(g.NK.apply(void 0,(0,u.Z)(n)))},onFavlistAdd:t.onFavlistAdd||function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(g.Vf.apply(void 0,(0,u.Z)(n)))},onLoad:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(g.n2.apply(void 0,(0,u.Z)(n)))},onUpdateReaction:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(g.k1.apply(void 0,(0,u.Z)(n)))}}})))(A)},59836:function(e,t,n){"use strict";n.d(t,{Z:function(){return H}});var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(32554),s=n(68562),u=n(3090),l=n(47112),d=n.n(l),p=n(38748),h=n.n(p),f=n(75926),m=n.n(f),v=n(87363),Z=n(52495),g=n(52626),E=n(17222),T=n(48457),C=n(522),A=n(71103),_=n(60594),y=n(24316),S=n(91355),I=(0,_.FH)("user",["UPDATE_FOLLOWERS_PIN"]).UPDATE_FOLLOWERS_PIN;var b=n(73464),w=n(70175),R=n(87655),N=n(98918),O=n(92799),D=n(85570),B=n(29254),P=n(64833),k=n(62279),x=n(96531),L=n(5625),U=n(77568),F=n.n(U),M=function(e){return F()((function(t){var n=t.type,o=void 0===n?"":n,r=t.id,a=void 0===r?"":r;return o&&"people"===o||"rewardPeople"===o?(0,s.tZ)(T.eV,{content:{type:"User",token:a,id:a},children:(0,s.tZ)(e,(0,i.Z)({},t))}):(0,s.tZ)(e,(0,i.Z)({},t))}),e)},G={default:"default",primary:"primary"},z=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).zaRef=(0,v.createRef)(),e.state={hovered:!1,isFetching:!1},e.handleMouseEnter=function(){e.setState({hovered:!0})},e.handleMouseLeave=function(){e.setState({hovered:!1})},e.toggleFollow=function(t){var n=e.props,o=n.isFollowing,r=n.type,a=n.id,c=n.zaId,s=n.useCustomZa,u=n.onFollowButtonClick,l=n.onToggleFollow,d=!o;if(!s){E.Z.trackEvent(t.target,(0,i.Z)({action:d?"Follow":"UnFollow",element:"Button",element_name:S.ur[r]},c&&{id:c}));var p=d?"关注":"取消关注";e.zaRef.current.trackEvent({action:d?"Follow":"UnFollow",eventType:"Click",elementLocation:{type:"Button",text:p},block:p})}null==l||l(d);var f="toggleFollow".concat(r.slice(0,1).toUpperCase()).concat(r.slice(1)),m=e.props[f](a,d);h()(m)&&(e.setState({isFetching:!0}),m.then((function(){e.setState({isFetching:!1}),u&&u()})).catch((function(){return e.setState({isFetching:!1})})))},e.handleToggleFollow=function(t){var n=e.props,o=n.authRequired,r=n.globalAuthRequired,i=n.ua;o?o(e.toggleFollow,S.q0.follow,!0)(t):i.Zhihu?e.toggleFollow(t):r(e.toggleFollow,S.q0.follow)(t)},e.handleClick=function(t){e.setState({hovered:!1});var n=e.props.onClick;n&&!n(t)||(e.handleToggleFollow(t),t.stopPropagation())},e.getButtonPresetAndColor=function(e,t){var n=e.isFollowing,o=e.preset,r=e.getButtonPresetAndColor;return r&&"function"==typeof r?r(e,t):n?{preset:"primary",color:"grey"}:{preset:o,color:"blue"}},e.getButtonInner=function(e,t){var n=e.isFollowing,o=e.canShowMutualFollowStatus,r=e.isFollowed,i=e.children,a=e.type,c=e.gender,l=e.entityHidden,d=e.getButtonInner;if(d&&"function"==typeof d)return d(e,t);var p=t.hovered;return n?{inner:p?"取消关注":o&&r?"互相关注":"已关注"}:i?{inner:i}:"people"===a||"rewardPeople"===a?{inner:[(0,s.tZ)(u.nY,{className:"FollowButton-icon",text:!0,center:!0},"icon"),"关注".concat("number"==typeof c&&-1!==c?S.K_[c]:"")]}:{inner:"关注".concat(l?"":C.iB[a])}},e}return n.prototype.render=function(){var e=this.props,t=e.onRef,n=e.className,o=e.isMobile,r=e.disabled,c=this.getButtonPresetAndColor(this.props,this.state),u=c.preset,l=c.color,p=this.getButtonInner(this.props,this.state).inner,h=this.state.isFetching;return(0,s.BX)(b.ZP,(0,a.Z)((0,i.Z)({onRef:t,preset:u,color:l,onClick:this.handleClick,className:d()("FollowButton",n)},!w.Z.isMobileEntry&&!o&&{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),{disabled:r||h,children:[(0,s.tZ)(T.pS,{ref:this.zaRef}),p]}))},n}(v.Component);z.propTypes={preset:m().oneOf(Object.values(G)),type:m().oneOf(C.eX).isRequired,id:m().oneOfType([m().number,m().string]).isRequired,zaId:m().number,useCustomZa:m().bool},z.defaultTypes={preset:G.default},z.PRESETS=G;var H=(0,g.compose)(M,(0,R.M)("globalAuthRequired"),(0,Z.connect)((function(e){return{ua:e.env.userAgent,isMobile:(0,O.Hu)(e,{includeTablet:!0})}}),{toggleFollowQuestion:B.XX,toggleFollowCollection:D.I3,toggleFollowColumn:N.As,toggleFollowRoundtable:k.OQ,toggleFollowTopic:x.KS,toggleFollowPeople:L.KX,toggleFollowRewardPeople:P.Ad,toggleFollowClub_mask:function(e,t,n){return function(o,r){var i=r(),a=i.entities.users,c=i.currentUser,s=a[e];return o(n?(0,y.c0)(S.T$.blocked,"red"):{urlToken:c,userUrlToken:e,expect:t,API:{types:I,endpoint:"members/".concat(e,"/followers"),method:t?"POST":"DELETE"},UPDATE:{request:{users:(0,A.Z)({},e,{isFollowing:t})},failure:{users:(0,A.Z)({},e,s)},success:function(t){return{users:(0,A.Z)({},e,t)}}}})}}}))(z)},69298:function(e,t,n){"use strict";var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(87363),s=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.isFollowed,n=e.isFollowing;return t?(0,a.tZ)("span",{className:"FollowStatus",children:n?"相互关注":"关注了你"}):null},n}(c.Component);t.Z=s},70530:function(e,t,n){"use strict";n.d(t,{A6:function(){return H},qH:function(){return z},iH:function(){return M}});var o=n(68562),r=n(12232),i=n(70577),a=n(78194),c=n(38662),s=n(87363),u=n.n(s),l=n(32487),d=n(23323),p=n(74182),h=n(47859),f=n(26223),m=n(8190),v=n(3404),Z=n(48457),g=n.p+"assets/liukanshan-peek.a71ecf3e.png",E=function(e){var t=e.onLoginClick,n=e.onXMarkClick,i=(0,f.F)().colors;return(0,o.tZ)(Z.eV,{block:"bottom_layer",children:(0,o.BX)(Z.Wi,{as:v.Box,bg:"GBK99A",p:"32px 20px",css:{borderRadius:4},zaType:"Popup",children:[(0,o.tZ)(Z.$U,{zaType:"Button",zaText:"关闭",as:m.ZP,size:12,css:{position:"absolute",right:12,top:12,color:i.GBK06A,cursor:"pointer"},onClick:n}),(0,o.tZ)(v.Image,{css:{position:"absolute",right:0,top:44},width:82,src:g}),(0,o.BX)(v.Text,{as:"span",fontWeight:"bold",fontSize:17,color:"GBK02A",children:["登录即可查看",(0,o.tZ)(v.Text,{as:"span",color:"GBL01A",children:" 超5亿 "}),"专业优质内容"]}),(0,o.tZ)(v.Text,{color:"GBK03A",lineHeight:1.6,mt:12,fontSize:14,pr:36,children:"超 5 千万创作者的优质提问、专业回答、深度文章和精彩视频尽在知乎。"}),(0,o.tZ)(Z.$U,{zaType:"Button",zaText:!0,as:r.Z,css:{marginTop:24,width:"100%",position:"relative"},preset:"primary",onClick:function(){t(),n()},color:"blue",children:"立即登录/注册"})]})})},T={from:{opacity:0,translateY:4},enter:{opacity:1,translateY:0},leave:{opacity:0,translateY:4},config:{ease:"easeOut",duration:.3}},C=(0,i.Z)(null)((function(e){var t=e.onLoginClick,n=(0,a.Z)((0,d.Z)(!1),2),r=n[0],i=n[1],u=(0,s.useRef)(null),f=(0,p.Z)((function(){window.scrollY>700&&i.on()}),100),m=(0,h.Z)((function(){var e;i.off(),null===(e=u.current)||void 0===e||e.unsubscribe()}));return(0,s.useEffect)((function(){return u.current=(0,l.subscribe)("scroll",f),function(){var e;null===(e=u.current)||void 0===e||e.unsubscribe()}}),[f]),(0,o.tZ)(c.Z,{target:null,isOpen:r,animation:T,css:{position:"fixed",bottom:50,right:64,width:336,zIndex:2},arrowed:!1,children:(0,o.tZ)(E,{onLoginClick:t,onXMarkClick:m})})})),A=n(88635),_=n(16915),y=Object.assign;var S=function(e){return u().createElement(_.Z,y({width:"28",height:"28",fill:"none",viewBox:"0 0 28 28"},e),u().createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#id-2307047740-a)"}),u().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M11.111 7.972c-.181 0-.506.22-.506.734v7.627a.583.583 0 1 1-1.167 0v-3.957H7.591a.77.77 0 0 0-.008.114v5.81a.77.77 0 0 0 .008.115H10.02c.322 0 .584.261.584.583v.685c0 .513.325.733.506.733h7.632c.181 0 .506-.22.506-.733V8.706c0-.513-.325-.734-.506-.734h-7.631Zm-1.673 11.61v.1c0 .942.65 1.901 1.673 1.901h7.632c1.022 0 1.673-.959 1.673-1.9V8.706c0-.942-.65-1.9-1.673-1.9h-7.631c-1.023 0-1.674.958-1.674 1.9v2.503h-2.09c-.436 0-.674.338-.768.527a1.71 1.71 0 0 0-.164.754v5.81c0 .264.052.532.164.755.094.188.332.527.768.527h2.09Zm2.811-8.693c0-.322.261-.584.584-.584h3.889a.583.583 0 0 1 0 1.167h-3.89a.583.583 0 0 1-.583-.583Zm.584 2.139a.583.583 0 0 0 0 1.166h3.889a.583.583 0 0 0 0-1.166h-3.89Zm-.584 3.305c0-.322.261-.583.584-.583h2.333a.583.583 0 1 1 0 1.166h-2.333a.583.583 0 0 1-.584-.583Zm-4.623 2.205-.001-.002v.002Zm0-6.285-.001.001v-.001Z",clipRule:"evenodd"}),u().createElement("defs",null,u().createElement("linearGradient",{id:"id-2307047740-a",x1:"1.5",x2:"26",y1:"-2",y2:"32",gradientUnits:"userSpaceOnUse"},u().createElement("stop",{stopColor:"#CDE1FF"}),u().createElement("stop",{offset:".155",stopColor:"#D5E5FE",stopOpacity:".869"}),u().createElement("stop",{offset:".758",stopColor:"#E2E2FF",stopOpacity:".256"}),u().createElement("stop",{offset:".942",stopColor:"#E5E1FF",stopOpacity:".115"}))))},I=Object.assign;var b=function(e){return u().createElement(_.Z,I({width:"28",height:"28",fill:"none",viewBox:"0 0 28 28"},e),u().createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#id-2832850787-a)"}),u().createElement("path",{stroke:"#06F",strokeWidth:"1.167",d:"M20.028 12.444c0 3.082-2.665 5.64-6.028 5.64-3.363 0-6.028-2.558-6.028-5.64 0-3.081 2.665-5.639 6.028-5.639 3.363 0 6.028 2.558 6.028 5.64Z"}),u().createElement("path",{stroke:"#06F",strokeLinecap:"round",strokeWidth:"1.167",d:"M10.111 19.055v1.804c0 .44.445.74.854.577l2.573-1.029c.297-.119.628-.119.924 0l2.574 1.03a.622.622 0 0 0 .853-.578v-1.804"}),u().createElement("path",{stroke:"#06F",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.167",d:"M11.666 12.574c.273-.348.549-.693 1.152-.746 1.214-.106 1.328 1.189 2.542 1.082.61-.053.885-.406 1.162-.758"}),u().createElement("defs",null,u().createElement("linearGradient",{id:"id-2832850787-a",x1:"1.5",x2:"26",y1:"-2",y2:"32",gradientUnits:"userSpaceOnUse"},u().createElement("stop",{stopColor:"#CDE1FF"}),u().createElement("stop",{offset:".155",stopColor:"#D5E5FE",stopOpacity:".869"}),u().createElement("stop",{offset:".758",stopColor:"#E2E2FF",stopOpacity:".256"}),u().createElement("stop",{offset:".942",stopColor:"#E5E1FF",stopOpacity:".115"}))))},w=Object.assign;var R=function(e){return u().createElement(_.Z,w({width:"28",height:"28",fill:"none",viewBox:"0 0 28 28"},e),u().createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#id-2666423292-a)"}),u().createElement("path",{fill:"#06F",d:"m8.077 17.025.408-.417a.583.583 0 0 1 .148.593l-.556-.176Zm2.268 1.414-.174-.557a.583.583 0 0 1 .37.007l-.196.55Zm-2.222.694.174.557-.174-.557Zm-.54-.542-.557-.176.556.176Zm-.653-5.602c0 1.397.586 2.672 1.555 3.62l-.816.833c-1.175-1.149-1.906-2.718-1.906-4.453H6.93Zm5.639-5.25c-3.15 0-5.64 2.385-5.64 5.25H5.764c0-3.579 3.083-6.417 6.806-6.417V7.74Zm5.639 5.25c0-2.865-2.489-5.25-5.64-5.25V6.572c3.723 0 6.806 2.838 6.806 6.417h-1.166Zm-5.64 5.25c3.151 0 5.64-2.386 5.64-5.25h1.166c0 3.579-3.083 6.416-6.805 6.416V18.24Zm-2.026-.35c.628.226 1.31.35 2.027.35v1.166a7.16 7.16 0 0 1-2.421-.418l.394-1.098Zm-2.593.687 2.222-.694.348 1.113-2.222.695-.348-1.114Zm.19.19a.152.152 0 0 0-.19-.19l.348 1.114a1.015 1.015 0 0 1-1.271-1.275l1.113.352Zm.494-1.565-.494 1.566-1.113-.352.494-1.565 1.113.35Z"}),u().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M20.423 12.742a.583.583 0 0 1 .764.311c.376.893.542 1.879.454 2.876-.09 1.023-.478 2.03-1.065 2.917a.39.39 0 0 1-.005.006l.003.012a.7.7 0 0 1 .006.028l.257 1.249.002.011c.065.353-.06.7-.337.914a.943.943 0 0 1-.936.117l-1.064-.42-.015-.006a.083.083 0 0 0-.027-.008c-.004 0-.013 0-.034.004a1.31 1.31 0 0 0-.276.114l-.008.005c-.936.446-2.05.612-3.032.526a6.05 6.05 0 0 1-1.83-.46.584.584 0 0 1 .457-1.074c.473.201.972.327 1.475.371.795.07 1.695-.068 2.424-.415l.004-.002c.277-.137.745-.37 1.297-.137l.668.264-.165-.806a1.155 1.155 0 0 1 .17-.948c.493-.746.799-1.566.869-2.364a4.877 4.877 0 0 0-.367-2.32.583.583 0 0 1 .31-.765Z",clipRule:"evenodd"}),u().createElement("defs",null,u().createElement("linearGradient",{id:"id-2666423292-a",x1:"1.5",x2:"26",y1:"-2",y2:"32",gradientUnits:"userSpaceOnUse"},u().createElement("stop",{stopColor:"#CDE1FF"}),u().createElement("stop",{offset:".155",stopColor:"#D5E5FE",stopOpacity:".869"}),u().createElement("stop",{offset:".758",stopColor:"#E2E2FF",stopOpacity:".256"}),u().createElement("stop",{offset:".942",stopColor:"#E5E1FF",stopOpacity:".115"}))))},N=Object.assign;var O=[{Icon:S,text:"更懂你的优质内容"},{Icon:b,text:"更专业的大咖答主"},{Icon:R,text:"更深度的互动交流"},{Icon:function(e){return u().createElement(_.Z,N({width:"28",height:"28",fill:"none",viewBox:"0 0 28 28"},e),u().createElement("circle",{cx:"14",cy:"14",r:"14",fill:"url(#id-2355950134-a)"}),u().createElement("path",{stroke:"#06F",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.167",d:"M15.457 8.089H9.29a1.2 1.2 0 0 0-1.2 1.2v9.42a1.2 1.2 0 0 0 1.2 1.2h9.422a1.2 1.2 0 0 0 1.2-1.2v-6.167M13.999 14.002l5.835-5.836"}),u().createElement("defs",null,u().createElement("linearGradient",{id:"id-2355950134-a",x1:"1.5",x2:"26",y1:"-2",y2:"32",gradientUnits:"userSpaceOnUse"},u().createElement("stop",{stopColor:"#CDE1FF"}),u().createElement("stop",{offset:".155",stopColor:"#D5E5FE",stopOpacity:".869"}),u().createElement("stop",{offset:".758",stopColor:"#E2E2FF",stopOpacity:".256"}),u().createElement("stop",{offset:".942",stopColor:"#E5E1FF",stopOpacity:".115"}))))},text:"更高效的创作环境"}],D=function(e){var t=e.onLoginClick,n=e.onMouseEnter,i=e.onMouseLeave;return(0,o.tZ)(Z.eV,{block:"top_layer",children:(0,o.BX)(Z.Wi,{zaType:"Popup",as:v.Box,p:24,fontSize:14,css:{borderRadius:4},width:361,bg:"GBK99A",onMouseEnter:n,onMouseLeave:i,children:[(0,o.tZ)(v.Text,{fontWeight:"bold",children:"登录知乎，您可以享受以下权益："}),(0,o.tZ)(v.Flex,{mt:"24px",flexWrap:"wrap",justifyContent:"space-between",css:{"@supports (gap: 16px)":{gap:"16px"}},children:O.map((function(e){var t=e.Icon,n=e.text;return(0,o.BX)(v.Flex,{alignItems:"center",css:{flex:"none","@supports not (gap: 16px)":{marginTop:16}},children:[(0,o.tZ)(t,{width:"28px"}),(0,o.tZ)(v.Text,{ml:"6px",children:n})]},n)}))}),(0,o.tZ)(Z.$U,{zaType:"Button",zaText:!0,as:r.Z,css:{marginTop:16,width:"100%"},preset:"primary",onClick:t,color:"blue",children:"立即登录/注册"})]})})},B=n(60111),P=n(64102),k=n(58386),x=n.n(k),L=n(91355),U=(0,s.createContext)(null),F=(0,s.createContext)(!1),M=function(e){var t=e.children,n=(0,a.Z)((0,d.Z)(!1),2),r=n[0],i=n[1],c=i.on,u=i.off,l=(0,s.useRef)({authModalOpenCount:0,firstGuideConsumed:!1}),p=(0,h.Z)((function(e){e?(l.current.authModalOpenCount++,c()):u()})),f=(0,h.Z)((function(){l.current.firstGuideConsumed=!0}));return(0,o.tZ)(U.Provider,{value:(0,s.useState)({statusRef:l,collectModalOpen:p,consumeFirstGuide:f})[0],children:(0,o.tZ)(F.Provider,{value:r,children:t})})},G=function(e){var t=e.onLoginClick,n=(0,s.useRef)(null),i=(0,a.Z)((0,d.Z)(!1),2),u=i[0],l=i[1],p=l.on,f=l.off,m=(0,s.useRef)(!1);!function(e){var t=(0,s.useContext)(U),n=(0,s.useContext)(F);(0,P.Z)((function(){if(!t)return x();var o=t.consumeFirstGuide,r=t.statusRef.current,i=r.authModalOpenCount,a=r.firstGuideConsumed;!n&&(1===i||0===i)&&!a&&window.scrollY<L.BR&&(o(),e())}),n?null:0)}(p);var v=(0,h.Z)((function(){f(),null==t||t()})),g=(0,h.Z)((function(){u&&f()})),E=(0,h.Z)((function(){p(),m.current=!0})),T=(0,h.Z)((function(){m.current=!1,setTimeout((function(){m.current||f()}),300)}));return(0,o.BX)(o.HY,{children:[(0,o.tZ)(Z.Wi,{as:r.Z,zaType:"Button",zaText:"login",preset:"primary",color:"blue",css:{marginRight:16},ref:n,onMouseEnter:E,onMouseLeave:T,onClick:v,children:"登录/注册"}),(0,o.tZ)(A.Z,{onScrollDown:g,threshold:20}),(0,o.tZ)(c.Z,{isOpen:u,target:n.current,placement:"bottom",onClose:f,globalClose:!0,listenResize:!0,arrowed:!0,fixed:!0,children:(0,o.tZ)(D,{onLoginClick:v,onMouseEnter:E,onMouseLeave:T})})]})},z=(0,i.Z)((0,o.tZ)(r.Z,{className:"AppHeader-login",children:"登录"}))((function(e){var t=e.onClick;return(0,o.BX)(o.HY,{children:[(0,o.tZ)(G,{onLoginClick:t}),(0,o.tZ)(C,{onLoginClick:t})]})})),H=function(){var e;return e=(0,s.useContext)(U),(0,B.Z)((function(){return null==e||e.collectModalOpen(!0),function(){null==e||e.collectModalOpen(!1)}})),null}},4838:function(e,t,n){"use strict";n.d(t,{Z:function(){return K}});var o=n(68562),r=n(75926),i=n.n(r),a=n(87363),c=n(48457),s=n(8672),u=n(4428),l=n(21620),d=n(84421),p=n(88483),h=n(78724),f=n(32554),m=n(8518),v=n(72864),Z=n(24076),g=n(63950),E=n(85946),T=n(43819),C=n(91539),A=n(50385),_=n(90674),y=n(47112),S=n.n(y),I=n(40491),b=n.n(I),w=n(52495),R=n(52028),N=n(3404),O=n(52626),D=n(17222),B=n(96323),P=n(43131),k=n(73464),x=n(70175),L=n(47496),U=n(78248),F=n(66258),M=n(33855),G=n(83790),z=function(e){var t=e.href,n=e.className,r=(0,h.Z)(e,["href","className"]);return(0,o.tZ)(Z._o,{zaText:!0,children:(0,o.tZ)(B.sN,(0,p.Z)({tag:N.Link,className:S()("AppHeaderProfileMenu-item",n),css:function(e){return{color:e.colors.GBL05A,fontSize:"14px"}},href:(0,U.Z)(t)},r))})},H=function(e){(0,d.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.apply(this,arguments)).state={isMenuOpen:!1},e.handleMenuOpen=function(){D.Z.trackEvent((0,s.Z)(e),{id:2764,action:"Click"}),e.setState({isMenuOpen:!0}),e.closeCreatorHint()},e.handleMenuClose=function(){e.setState({isMenuOpen:!1}),e.openCreatorHint()},e.handleCreatorHintRef=function(t){e.creatorHintPopover=t,e.openCreatorHint()},e.openCreatorHint=function(){e.props.creatorNotification.invitationBubble>0&&e.creatorHintPopover&&!e.props.routes.find((function(e){return"Creator"===e.name}))&&(e.creatorHintPopover.open(),e.trackCreatorHintCardshow())},e.closeCreatorHint=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.closeForever,o=void 0!==n&&n;e.creatorHintPopover.close(),o&&e.props.readNotification("invitation_bubble")},e.trackCreatorHintCardshow=b()((function(){D.Z.trackCardShow(null,{id:4229})})),e.handleCreatorHintCloseIconClick=function(){D.Z.trackEvent(null,{id:4232,action:"Click"}),e.closeCreatorHint({closeForever:!0})},e}var r=n.prototype;return r.componentDidMount=function(){this.loadData()},r.loadData=function(){var e=this;return(0,u.Z)((function(){return(0,m.Jh)(this,(function(t){switch(t.label){case 0:return[4,e.props.loadSwitches(["isCreator"])];case 1:return t.sent().isCreator?[4,e.props.loadCreatorApplyStatus()]:[3,3];case 2:t.sent(),t.label=3;case 3:return e.props.creatorNotification.invitationBubble>0&&e.openCreatorHint(),[2]}}))}))()},r.render=function(){if(!this.props.isLogin)return null;var e=this.props,t=e.className,n=e.currentUser,r=e.currentUserIsCreator,i=e.creatorNotification,a=this.state.isMenuOpen,s=x.Z.isMobileEntry?24:30,u="https://".concat(x.Z.wwwHost,"/").concat("organization"===n.userType?"org":"people","/").concat(n.urlToken||n.id),l=(0,o.BX)(c.$U,{as:k.ZP,zaType:"Image",zaAction:"Unknown",zaText:"用户头像",className:"AppHeader-profileEntry",preset:"plain",children:[(0,o.tZ)(v.qE,{className:"AppHeader-profileAvatar",size:s,url:n.avatarUrl,alt:"点击打开".concat(n.name,"的主页")}),!a&&r&&i.accessed>0&&(0,o.tZ)("div",{className:"AppHeader-profileAvatarRedDot"})]});return(0,o.BX)(G.Z,{placeholder:l,children:[(0,o.BX)(B.ZP,{className:t,menuClassName:"AppHeaderProfileMenu",menuContainerClassName:"AppHeaderProfileMenu-container",positionStatus:"fixed",toggler:l,boundary:{padding:16},onOpen:this.handleMenuOpen,onClose:this.handleMenuClose,arrowed:!0,children:[(0,o.BX)(z,{href:u,children:[(0,o.tZ)(g.q,{size:16}),"我的主页"]}),(0,o.BX)(z,{href:"",onClick:function(e){var t;e.preventDefault(),null===(t=window.aria)||void 0===t||t.start()},children:[(0,o.tZ)(E.sh,{size:16}),"无障碍"]}),(0,o.BX)(z,{href:"https://".concat(x.Z.wwwHost,"/settings/profile"),children:[(0,o.tZ)(T.T,{size:16}),"设置"]}),(0,o.BX)(z,{href:"https://".concat(x.Z.wwwHost,"/logout"),children:[(0,o.tZ)(C.e,{size:16}),"退出"]})]}),(0,o.BX)(P.Z,{className:"AppHeaderProfileMenu-creatorHintPopover",toggler:(0,o.tZ)("div",{className:S()("AppHeaderProfileMenu-creatorHintToggler",x.Z.isMobileEntry&&"AppHeaderProfileMenu-creatorHintToggler--small")}),toggleEvent:null,targetClassName:"AppHeaderProfileMenu-creatorHint",placement:"bottom",positionStatus:"fixed",globalClose:!1,boundary:{padding:16},ref:this.handleCreatorHintRef,arrowed:!0,children:[(0,o.tZ)(A.y,{className:"AppHeaderProfileMenu-creatorHintCreatorIcon",size:20}),(0,o.tZ)("div",{className:"AppHeaderProfileMenu-creatorHintText",children:"你已被邀请入驻创作中心，"}),(0,o.tZ)("a",{className:"AppHeaderProfileMenu-creatorHintLink",href:"https://".concat(x.Z.wwwHost,"/creator"),"data-za-detail-view-id":4231,children:"立即入驻"}),(0,o.tZ)("div",{className:"AppHeaderProfileMenu-creatorHintCloseContainer",onClick:this.handleCreatorHintCloseIconClick,children:(0,o.tZ)(_.HN,{size:20})})]})]})},n}(a.PureComponent);H.propTypes={currentUser:i().object,currentUserIsCreator:i().bool};var q=(0,O.compose)(L.Z,R.withRouter,(0,w.connect)((function(e){return{currentUserIsCreator:e.switches.isCreator,creatorNotification:e.creator.applyStatus.notification||{}}}),{readNotification:F.iG,loadSwitches:M.X2,loadCreatorApplyStatus:F.bG}))(H),V=n(70530),X=n(80869);function W(e){var t=e.currentUser,n=e.enableGuidesForLogin,r=void 0!==n&&n;return t&&"guest"!==t.userType?(0,o.tZ)(q,{className:"AppHeader-menu"}):(0,o.tZ)(X.Vy,{loginButtonWithZa:r?(0,o.tZ)(V.qH,{}):(0,o.tZ)(c.Wi,{as:k.ZP,className:"AppHeader-login",zaType:"Button",zaText:"login",color:"blue",css:{whiteSpace:"nowrap"},children:"登录/注册"})})}var K=(0,a.memo)(W);W.propTypes={currentUser:i().object}},55509:function(e,t,n){"use strict";n.d(t,{pl:function(){return g}});var o=n(88483),r=n(16600),i=n(78724),a=n(78194),c=n(68562),s=n(12321),u=n(4795),l=n.n(u),d=n(87363),p=n(3404),h=n(48457),f=n(57948),m=function(e){return/^\w+:\/\//.test(e)||"undefined"==typeof window?e:/^\/\//.test(e)?location.protocol+e:location.origin+e},v=function(e,t){var n=t.params,o=t.onRequestOpen,r=(0,s.n)();return function(t){var i=e.href,c=e.onClick;if(c&&c(t),!t.defaultPrevented){var s=function(e,t){if(!t)return e;var n=(0,a.Z)(e.split("#"),2),o=n[0],r=n[1],i=o+(o.includes("?")?"&":"?")+t;return r?i+"#"+r:i}(m(i),n);return r.ZhihuHybrid?(t.preventDefault(),void(0,f.Z)("base/openURL").dispatch({url:s})):r.isMiniProgram?(t.preventDefault(),void function(e,t){var n,o=function(){var n,o,r,i=null,a=null;if(t.WxMiniProgram)i=null===(o=window.wx)||void 0===o||null===(r=o.miniProgram)||void 0===r?void 0:r.navigateTo;else if(t.JDMiniProgram){var c,s;i=null===(c=window.jd)||void 0===c||null===(s=c.miniProgram)||void 0===s?void 0:s.navigateTo}var u=null===(n=/\/topic\/(\d+)/.exec(e))||void 0===n?void 0:n[1];u&&(t.WxMiniProgram?a="/pages/topic?id=".concat(u):t.JDMiniProgram&&(a="/pages/topic/index?id=".concat(u))),a?null==i||i({url:a}):/^http(s)?:/.test(e)&&(location.href=e)};!t.WxMiniProgram||(null===(n=window.WeixinJSBridge)||void 0===n?void 0:n.invoke)?o():document.addEventListener("WeixinJSBridgeReady",o,!1)}(s,r)):void((null==o?void 0:o({ua:r,url:s}))&&t.preventDefault())}}},Z=function(e,t){var n=t.extra;return{zaType:"Button",zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:!0,extra:l()({link:{get url(){return m(e)}}},n)}},g=(0,d.forwardRef)((function(e,t){var n=e.params,a=e.onRequestOpen,s=e.extra,u=(0,i.Z)(e,["params","onRequestOpen","extra"]);return(0,c.tZ)(h.KC,(0,r.Z)((0,o.Z)({as:p.Link},Z(u.href,{extra:s}),u),{ref:t,onClick:v(u,{params:n,onRequestOpen:a})}))}))},67233:function(e,t,n){"use strict";var o=n(21620),r=n(61869),i=n(84421),a=n(88483),c=n(32554),s=n(68562),u=n(59591),l=n(48157),d=n(47112),p=n.n(d),h=n(75926),f=n.n(h),m=n(87363),v=n.n(m),Z=n(3404),g=n(48340),E=n(32705),T=n.n(E),C={top:10,left:20},A={top:0,left:0};var _=function(e){(0,i.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).scrollerRef=v().createRef(),e.state={transEnded:!1,rect:null,translate:null,scale:null},e.getBoundingClientRect=function(){var t=e.props,n=t.img,o=t.data,r=n.getBoundingClientRect(),i=r.left,a=r.top,c=r.width,s=r.height,u=o.width,l=o.height,d={left:i,top:a,width:c,height:s},p=1;return u>l?(d.height=s,p=s/l,d.width=u*p,d.left=i+(c-d.width)/2,d.top=a+(s-d.height)/2):u<l&&(d.width=c,p=c/u,d.height=l*p,d.left=i+(c-d.width)/2,d.top=a+(s-d.height)/2),d},e.handleClick=function(t){t.stopPropagation(),e.setState({translate:null,scale:null})},e.handleKeyDown=function(t){"Escape"===t.key&&(t.stopPropagation(),t.preventDefault(),e.setState({translate:null,scale:null}))},e.handleTransitionEnd=function(){var t=e.state,n=t.translate,o=t.scale,r=e.props.onClose;n&&o?(e.setState({transEnded:!0}),e.scrollerRef.current.style.overflow="auto"):r()},e}var d=n.prototype;return d.UNSAFE_componentWillMount=function(){var e=this.props,t=e.img,n=e.isOriginalUrl;this.originalSrc!==this.currentSrc&&((new Image).src=this.originalSrc);this.setState({rect:!1===n?this.getBoundingClientRect():t.getBoundingClientRect()})},d.componentDidMount=function(){var e=this;(0,l.disableBodyScroll)(this.scrollerRef.current);var t=this.props.img;setTimeout((function(){return e.setState((0,a.Z)({},e.computeTransition(e.state.rect,{width:t.dataset.rawwidth||t.naturalWidth})))}))},d.componentWillUnmount=function(){(0,l.enableBodyScroll)(this.scrollerRef.current)},d.computeTransition=function(e,t){var n,o=this.props,r=o.transitionType,i=o.data,a=T()(navigator.userAgent).Mobile?A:C,c=a.top,s=a.left,u={left:0,top:0,width:window.innerWidth,height:window.innerHeight},l=function(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}(u),d={width:u.width-2*s,height:u.height-2*c},p={},h={};return 1===r?(p.width=d.width>i.width?i.width:d.width,n=p.width/i.width,p.height=i.height*n,h={x:(d.width-p.width)/2+s,y:p.height<d.height?(d.height-p.height)/2+c:C.top}):(p.width=d.width>t.width?t.width:d.width,n=p.width/e.width,p.height=e.height*n,h={x:l.x-e.width/2,y:(p.height<d.height?l.y:C.top+p.height/2)-e.height/2}),{translate:h,scale:n}},d.render=function(){var e,t=this,n=this.props,o=n.img,r=n.isOriginalUrl,i=n.data,a=n.transitionType,c=n.className,l=this.state,d=l.translate,h=l.scale,f=l.rect,m=l.transEnded,v=d&&h,E=1,_="";if(1===a){var y=(T()(navigator.userAgent).Mobile?A:C).left;e=Math.min(window.innerWidth-2*y,i.width);var S=f.width/e;_=v?"translate(".concat(d.x,"px, ").concat(d.y,"px) scale(1) "):"translate(".concat(f.left,"px, ").concat(f.top,"px) scale(").concat(S,") "),E=v?1:0}else _=v?"translate(".concat(d.x,"px ,").concat(d.y,"px) scale(").concat(h,") "):"translate(".concat(f.left,"px,").concat(f.top,"px)");return(0,s.tZ)(u.Z,{children:(0,s.tZ)(Z.Box,{className:p()("ImageView",c,{"is-active":v}),style:{paddingBottom:C.top},onClick:this.handleClick,onKeyDown:this.handleKeyDown,children:(0,s.tZ)("div",{className:"ImageView-inner",ref:this.scrollerRef,children:(0,s.tZ)("img",{ref:function(e){t.imgEl=e},src:!1===r?(0,g.imgUrl)(o.dataset.original,"r"):m&&this.originalSrc||this.currentSrc,className:p()("ImageView-img",{"ImageView-transformOrigin":1===a}),style:{width:e||f.width,transform:_,opacity:E},onTransitionEnd:this.handleTransitionEnd,alt:"preview"})})})})},(0,r.Z)(n,[{key:"originalSrc",get:function(){return this.props.img.dataset.original}},{key:"currentSrc",get:function(){var e=this.props.img;return e.currentSrc||e.src}}]),n}(m.Component);_.propTypes={img:f().object.isRequired,onClose:f().func.isRequired},t.Z=_},8512:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var o=n(71103),r=n(88483),i=n(16600),a=n(68562),c=n(47112),s=n.n(c),u=n(8770),l=n(70577),d=n(20472),p=n(65194),h=n(57604),f=n(58958),m=n(58196),v=n(22634),Z=n(54744),g=n(35559),E=n(17789),T={online_roundtable:d.T,relevant:p.o,editor_recommendation:h.N,roundtable:d.T,special:f.xl,weekly:m.S,daily:v.N,professional:Z.W,zhizhi_plan_recommend:g.z,zhizhi_plan_edu_recommend:g.z,zhizhi_plan_baby_recommend:g.z,zhizhi_plan_acg_recommend:g.z,zhizhi_plan_outing_recommend:g.z,zhizhi_plan_rumour_deny:E.E,zhizhi_plan:g.z},C={alpha:1,group:"GYL02A"},A={alpha:.08,group:"GYL02A"},_={brand_special:u.T},y=(0,i.Z)((0,r.Z)({},T),{COMMERCIAL_ICONS:_}),S=function(e){return"GBL07A"===(e||C).group?"commercial":"positive"},I=function(e){return"GBL07A"===(e||A).group?"commercial":"positive"},b=function(e){return"recognition"===e?"professional":e},w=(0,l.Z)(null)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo,n=e.extra,r=void 0===n?{}:n,i=e.className;if(!t)return null;var c=t.type,u=t.text,l=t.foregroundColor,d=t.backgroundColor,p=r.customIcon,h=r.customIconClassName,f=S(l),m=I(d),v=p||y[b(c)];return v?(0,a.BX)("span",{className:s()("Label-icon","Label-iconColor--".concat(f),(0,o.Z)({},"Label-iconColor--".concat(m,"Background"),d),i),children:[(0,a.tZ)(v,{center:!0,className:s()("Label-iconImg",h)}),u]}):null}))},23e3:function(e,t,n){"use strict";var o=n(88483),r=n(68562),i=n(87363),a=n(52495),c=n(8567),s=n(30060),u=function(){return(0,r.tZ)("div",{className:"LabelContainer-loading"})};t.Z=function(e){var t=e.useOldLabels,l=e.item,d=e.abnormalDetailProps,p=e.collapseReasonProps,h=e.showDeleteButton,f=e.inviter,m=l.type,v=l.id,Z=l.isLabeled,g=(0,a.useDispatch)(),E=(0,a.useSelector)((function(e){return t||d||p?{}:h?{thankInviterInfo:f}:(0,s.yM)(e,l)})),T=(0,c.Z)((function(){return n.e(2033).then(n.bind(n,6732))}));return(0,i.useEffect)((function(){Z&&!E&&m&&v&&g((0,s.T$)(m,v))}),[g,m,v,Z,E]),T?(0,r.tZ)(T,(0,o.Z)({data:E},e)):Z&&!t?(0,r.tZ)(u,{}):null}},34614:function(e,t,n){"use strict";n.d(t,{vT:function(){return o.Z},QV:function(){return Z}});var o=n(8512),r=n(71103),i=n(88483),a=n(16600),c=n(78724),s=n(68562),u=n(52495),l=n(72928),d=n.n(l),p=n(77568),h=n.n(p),f=n(30060),m=["answer","article","post","item"],v=function(e){return e.itemType||m.find((function(t){return e[t]}))},Z=function(e){return h()((0,u.connect)((function(e,t){return{useNewLabels:(0,f.S2)(e,t[v(t)])}}))((function(t){var n=t.showLabelInfo,o=void 0===n||n,u=t.showLabels,l=void 0===u||u,p=(0,c.Z)(t,["showLabelInfo","showLabels"]),h=v(p),f=p,m=[];return l||m.push("isLabeled"),o||(m.push("labelInfo"),m.push("hermesLabel")),h&&m.length>0&&(f=(0,a.Z)((0,i.Z)({},f),(0,r.Z)({},h,d()(p[h],m)))),(0,s.tZ)(e,(0,i.Z)({},f))})),e)},g=(0,n(87363).createContext)({showLabelInfo:!0,showLabels:!0});g.Provider,g.Consumer},63426:function(e,t,n){"use strict";n.d(t,{Z:function(){return P}});var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(85946),s=n(36034),u=n(47112),l=n.n(u),d=n(75926),p=n.n(d),h=n(87363),f=n(52495),m=n(52626),v=n(17222),Z=n(522),g=n(70164),E=n(73464),T=n(91355),C=n(87655),A=n(26931),_=n(71103),y=n(88483),S=n(16600),I=n(60594),b=(0,I.FH)("ebook",["FOLLOW","UNFOLLOW"]);var w=(0,I.FH)("live",["UPDATE_LIKED","UPDATE_COURSE_LIKED"]);var R=n(20685),N=n(24316),O=(0,I.FH)("promotion",["LIKE"]);var D={ebook:"updateEBookVoters",live:"updateLiveLiked",live_course:"updateLiveCourseLiked",article:"updateArticleLike",promotion:"updatePromotionLike",pin:"updatePinsLike"},B=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).handleToggleVote=e.props.authRequired((function(t){var n=e.props,o=n.liked,r=n.type,i=n.id,a=!o;v.Z.trackEvent(t.target,{action:a?"Upvote":"UnUpvote",element:"Button"});var c=D[r];e.props[c](i,a)}),T.q0.vote),e.handleClick=function(t){var n=e.props,o=n.disableAuth,r=n.handleToggleGuide,i=n.onClick;i&&i(t)||(o?r(t):e.handleToggleVote(t))},e}return n.prototype.render=function(){var e=this.props,t=e.liked,n=e.count,o=e.className,r=e.icon,i=void 0===r?"like":r,u=e.disabled;return(0,a.BX)(E.ZP,{className:l()("LikeButton",{"is-active":t},o),onClick:this.handleClick,disabled:u,"aria-live":"polite",children:["thank"===i?(0,a.tZ)(c.sh,{center:!0}):(0,a.tZ)(s.g,{center:!0})," ",(0,g.Zh)(n).trim()]})},n}(h.Component);B.propTypes={type:p().oneOf(Z.eX).isRequired,id:p().oneOfType([p().number,p().string]).isRequired,icon:p().string,liked:p().bool,count:p().number};var P=(0,m.compose)(C.Z,(0,f.connect)(null,{updateEBookVoters:function(e){return function(t,n){var o=n().entities.ebooks[e],r=!(o.relationship||{}).voting;return t({API:{types:b.FOLLOW,method:r?"POST":"DELETE",endpoint:"v3/books/".concat(e,"/voters")},UPDATE:{request:{ebooks:(0,_.Z)({},e,{relationship:(0,S.Z)((0,y.Z)({},o.relationship),{voting:r}),voteupCount:o.voteupCount+(r?1:-1)})},failure:{ebooks:(0,_.Z)({},e,o)}}})}},updateLiveLiked:function(e){return function(t,n){var o=n().entities.lives[e],r=!o.isLiked;return t({API:{types:w.UPDATE_LIKED,endpoint:"v3/lives/".concat(e,"/like"),method:r?"POST":"DELETE"},UPDATE:{request:{lives:(0,_.Z)({},e,{isLiked:r,likedNum:o.likedNum+(r?1:-1)})},failure:{lives:(0,_.Z)({},e,o)}}})}},updateLiveCourseLiked:function(e){return function(t,n){var o=n().entities.liveCourses[e],r=!o.isLiked;return t({API:{types:w.UPDATE_COURSE_LIKED,endpoint:"v3/lives/course/".concat(e,"/like"),method:r?"POST":"DELETE"},UPDATE:{request:{liveCourses:(0,_.Z)({},e,{isLiked:r,likedNum:o.likedNum+(r?1:-1)})},failure:{liveCourses:(0,_.Z)({},e,o)}}})}},updateArticleLike:A.k5,updatePromotionLike:function(e){return function(t,n){var o=n().entities.promotions[e]||{},r=o.voteupCount,i=o.voting,a=i?0:1;return t({API:{types:O.LIKE,endpoint:"v3/promotions/".concat(e,"/voters"),query:{voting:a},method:"POST"},UPDATE:{request:{promotions:(0,_.Z)({},e,{voteupCount:r+(i?-1:1),voting:a})},success:function(t){return{promotions:(0,_.Z)({},e,t)}},failure:{promotions:(0,_.Z)({},e,o)}},NOTIFICATION:{failure:N.XR}})}},updatePinsLike:R.T8}))(B)},62372:function(e,t,n){"use strict";var o=n(21620),r=n(84421),i=n(88483),a=n(78724),c=n(32554),s=n(68562),u=n(75926),l=n.n(u),d=n(87363),p=n(52028),h=n(73464),f=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.a,n=e.to,o=e.activeClassName,r=(0,a.Z)(e,["a","to","activeClassName"]);return t?(r.component="a",r.href=n):(r.component=p.Link,r.to=n,r.activeClassName=o),(0,s.tZ)(h.ZP,(0,i.Z)({},r))},n}(d.Component);f.propTypes={a:l().bool,to:l().string},f.defaultProps={a:!1},t.Z=f},21822:function(e,t,n){"use strict";var o=n(68562),r=n(91464),i=n(3404),a=n(48457),c=n(43131),s=n(73464);t.Z=function(){return(0,o.tZ)(a.eV,{block:"MarkdownTips",children:(0,o.BX)(i.Text,{color:"GBL05A",ml:"24px",fontSize:14,children:[(0,o.tZ)(a.Wi,{zaType:"Popup",zaText:"Markdown 识别中"}),"Markdown 语法识别中",(0,o.tZ)(c.Z,{arrowed:!0,toggleEvent:"hover",toggler:(0,o.tZ)(s.ZP,{icon:r.ZP,preset:"plain",css:{marginLeft:5}}),children:(0,o.BX)(i.Box,{height:64,width:253,px:14,py:12,fontSize:14,css:function(e){return{color:e.colors.GBK02A}},children:[(0,o.tZ)(a.Wi,{zaType:"Popup",zaText:"Markdown 识别中 - 气泡"}),"可在「工具栏」-「更多」中关闭此模式，支持语法请参考「帮助文档」"," "]})})]})})}},80150:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var o=n(88483),r=n(68562),i=n(47112),a=n.n(i),c=function(e){return(0,r.tZ)("span",(0,o.Z)({css:function(e){return{fontSize:"14px",color:e.colors.GBL05A,"&.is-error":{color:e.colors.GRD03A}}}},e))};function s(e){var t=e.current,n=e.max,o=e.className,i=e.name,s=void 0===i?"字数":i,u=n-t;return t>n?(0,r.BX)(c,{className:a()(o,"MaxLength","is-error"),children:[s,"已超过 ",-u," 个字"]}):(0,r.tZ)(c,{className:a()(o,"MaxLength"),children:u<=10&&"还可以输入 ".concat(u," 个字")})}},38899:function(e,t,n){"use strict";var o=n(68562),r=n(48457),i=n(73464),a=n(74623);t.Z=function(e){var t=e.show,n=e.onCancel,c=e.onSubmit,s=(0,r.Q4)().trackEvent;return(0,o.tZ)(a.Z,{className:"SkipModal",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:t&&(0,o.BX)(r.Wi,{zaType:"Block",zaBlock:"expandBlockModal",zaText:"展开阅读全文弹窗",children:[(0,o.tZ)("div",{className:"title",children:"即将打开“知乎App”继续阅读"}),(0,o.BX)("div",{className:"button_container",children:[(0,o.tZ)(i.ZP,{preset:"plain",onClick:function(){s({eventType:"Click",block:"expandModal_cancel",elementLocation:{type:"Button"}}),n()},children:"取消"}),(0,o.tZ)(i.ZP,{preset:"primary",onClick:function(){s({eventType:"Click",action:"OpenUrl",block:"expandModal_open",elementLocation:{type:"Button"}}),c()},children:"打开App"})]})]})})}},74623:function(e,t,n){"use strict";var o=n(88483),r=n(68562),i=n(87363),a=n(47112),c=n.n(a),s=n(90674),u=n(37448);t.Z=function(e){var t=e.show,n=e.setModal,a=e.children,l=e.className,d=e.onCancel,p=e.hideIcon,h=e.maskClosable,f=void 0===h||h,m=function(){n?n(!1):d&&d()},v=(0,i.useRef)();return(0,i.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=(0,u.c)(v.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),t?(0,r.tZ)("div",{className:l,children:(0,r.BX)("div",{ref:v,children:[(0,r.tZ)("div",(0,o.Z)({className:c()({"ModalExp-background":t})},f&&{onClick:m})),(0,r.BX)("div",{className:c()("ModalExp-content",{"ModalExp-modalShow":t}),onClick:function(e){e.stopPropagation()},children:[!p&&(0,r.tZ)(s.HN,{size:24,fill:"#d3d3d3",className:"ModalExp-closeIcon",onClick:m}),a]})]})}):null}},21372:function(e,t,n){"use strict";var o=n(68562),r=n(24197),i=n(47112),a=n.n(i),c=n(87363),s=n(37448);t.Z=function(e){var t=e.show,n=e.children,i=e.className,u=(0,c.useRef)();return(0,c.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=(0,s.c)(u.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),(0,o.tZ)("div",{className:i,children:(0,o.BX)("div",{ref:u,children:[(0,o.tZ)("div",{className:a()({"ModalLoading-background":t})}),(0,o.BX)("div",{className:a()("ModalLoading-content",{"ModalLoading-modalShow":t}),children:[n,(0,o.tZ)(r.Z,{})]})]})})}},68324:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var o=n(68562),r=n(87363),i=n(97645),a=n.n(i),c=n(12321),s=n(89764),u=n(74623),l=[{title:"知乎",imageSrc:"https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png",description:"有问题，就会有回答",button:"打开"},{title:"浏览器",imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",description:"",button:"继续"}],d={uc:{imageSrc:"https://pic4.zhimg.com/80/v2-eb129ee601fe0521fbc05703a615ddd5_1440w.png",title:"UC 浏览器"},qq:{imageSrc:"https://pic1.zhimg.com/80/v2-211dd15e1000c599f5b89ecf4e1eb3b6_1440w.png",title:"QQ 浏览器"},wx:{imageSrc:"https://pic1.zhimg.com/80/v2-05fe05b84411fc88790189e95d7e84aa_1440w.png",title:"微信"},huawei:{imageSrc:"https://pic1.zhimg.com/80/v2-88a3ad0d3764917daaf92f5133a7024d_1440w.jpeg",title:"华为浏览器"},safari:{imageSrc:"https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png",title:"Safari"},chrome:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"Chrome"},default:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"浏览器"}},p=function(e){var t=e.show,n=e.onCancel,i=e.onSubmit,p=e.id,h=e.type,f=(0,c.n)(),m=f.origin.toLowerCase(),v=f.Android?d.chrome.imageSrc:d.safari.imageSrc,Z=a().get("question:firstCheckedTrue");(0,r.useEffect)((function(){Z&&t&&!f.Wechat&&(location.href="zhihu://".concat(h,"/").concat(p))}),[Z,t,h,p,f.Wechat]);var g="";return g=f.UC?"uc":f.Wechat?"wx":f.MQQBrowser?"qq":/huawei|honor/g.test(m)?"huawei":/chrome/g.test(m)||/crios/g.test(m)?"chrome":f.Safari?"safari":"default",l[1].title=d[g].title,l[1].imageSrc="default"===g?v:d[g].imageSrc,(0,o.BX)(u.Z,{className:"ModalWrap",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:[t&&(0,o.tZ)(s.dF,{className:"ModalWrap-body"}),(0,o.BX)("div",{className:"ModalWrap-content",children:[(0,o.tZ)("div",{className:"ModalWrap-title",children:"继续浏览内容"}),l.map((function(e,t){return(0,o.BX)("div",{className:"ModalWrap-item",children:[e.imageSrc&&(0,o.tZ)("div",{className:"ModalWrap-itemImg",children:(0,o.tZ)("img",{src:e.imageSrc,alt:""})}),(0,o.BX)("div",{className:"ModalWrap-itemContent",children:[(0,o.tZ)("div",{className:"ModalWrap-itemTitle",children:e.title}),e.description&&(0,o.tZ)("div",{className:"ModalWrap-itemDesc",children:e.description})]}),(0,o.tZ)("div",{className:"ModalWrap-itemBtn",role:"button",tabIndex:0,onClick:function(){return function(e){0===e?(a().set("question:firstCheckedTrue","true"),i()):n()}(t)},children:e.button})]},t)}))]})]})}},2886:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(78724),s=n(32554),u=n(68562),l=n(12232),d=n(47112),p=n.n(d),h=n(75926),f=n.n(h),m=n(87363),v=n(70164);function Z(e){var t=e.className,n=e.tag,o=e.name,r=e.value,s=e.isFormatted,d=void 0!==s&&s,h=(0,c.Z)(e,["className","tag","name","value","isFormatted"]),f="div";return n?f=n:h.href?f="a":h.onClick&&(f=l.Z),(0,u.tZ)(f,(0,a.Z)((0,i.Z)({className:p()("NumberBoard-item",t)},h),{children:(0,u.BX)("div",{className:"NumberBoard-itemInner",children:[(0,u.tZ)("div",{className:"NumberBoard-itemName",children:o}),(0,u.tZ)("strong",{className:"NumberBoard-itemValue",title:r,children:d?r:(0,v.uf)(r)})]})}))}var g=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.className,n=e.divider,o=e.children,r=e.items,s=(0,c.Z)(e,["className","divider","children","items"]);return(0,u.tZ)("div",(0,a.Z)((0,i.Z)({className:p()("NumberBoard",t,{"NumberBoard--divider":n})},s),{children:o||r.map((function(e){return(0,u.tZ)(Z,(0,i.Z)({},e),e.name)}))}))},n}(m.Component);g.propTypes={divider:f().bool},g.defaultProps={divider:!1},g.Item=Z;var E=g},76643:function(e,t,n){"use strict";n.d(t,{Z:function(){return F}});var o=n(78194),r=n(68562),i=n(87363),a=n(23323),c=n(74182),s=n(60111),u=n(47859),l=n(20003),d=n(48457),p=n(52495),h=n(32487),f=n(70577),m=n(40198),v=n(73587),Z=n(12232),g=function(e){var t=e.onClick;return(0,r.tZ)(Z.Z,{color:"blue",preset:"primary",onClick:t,css:{height:44,fontSize:17,width:"100%",borderRadius:24},children:"打开知乎，查看超 5 亿专业优质内容"})},E=n(3404),T=n(11116),C=function(e){var t=e.imgUrl;return(0,r.tZ)(E.Image,{src:t,alt:"",width:55,height:40,mr:"8px",css:{borderRadius:6}})},A=function(e){var t=e.imgUrl,n=e.onClick,o=e.firstRow,i=e.secondRow,a="calc(100vw - ".concat(t?191:128,"px)");return(0,r.BX)(E.Flex,{p:12,width:"100%",alignItems:"center",onClick:n,css:{borderRadius:6,boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.2)"},bg:"GBK99A",children:[t&&(0,r.tZ)(C,{imgUrl:t}),(0,r.BX)(E.Box,{width:a,children:[(0,r.tZ)(E.Text,{fontSize:15,fontWeight:"bold",css:(0,T.S)(1),children:o}),(0,r.tZ)(E.Text,{color:"GBK06A",fontSize:12,children:i})]}),(0,r.tZ)(Z.Z,{color:"blue",preset:"primary",css:{marginLeft:"auto",borderRadius:24,fontSize:13},children:"打开"})]})},_=n(21353),y=n(70164),S=n(52857),I=n.n(S),b=n(43158);function w(){var e=(0,_.Z)(["","的","",""]);return w=function(){return e},e}var R={article:"文章",answer:"回答"},N=function(e){var t;return"answer"===e.type?null===(t=e.question)||void 0===t?void 0:t.title:e.title},O=function(e){try{var t=e.voteupCount>0?"".concat((0,y.Zh)(e.voteupCount),"赞同"):"";return{firstRow:N(e),secondRow:I()(w(),e.author.name,R[e.type]||"内容",t),imgUrl:e.imageUrl||e.thumbnail,urlScheme:(0,b.MN)(e)}}catch(e){return null}},D=function(e){var t,n,o,r=(t=(0,p.useSelector)((function(e){var t;return(null==e||null===(t=e.relatedReadings)||void 0===t?void 0:t.list)||[]})).filter((function(e){return/(article|answer)/.test(e.type)})),0===t.length?null:O(t[0])),i=(o=(0,p.useSelector)((function(e){var t;return(null==e||null===(t=e.recommendation)||void 0===t?void 0:t.list)||[]})),0===o.length?null:O(null===(n=o[0])||void 0===n?void 0:n.article));return e?O(e):r||i},B=n(34870),P=n(47112),k=n.n(P),x={ease:"easeOut",duration:.3},L=function(){var e=(0,o.Z)((0,i.useState)(12),2),t=e[0],n=e[1];return(0,s.Z)((function(){n(function(){var e=document.querySelectorAll(".RichContent-actions");if(e.length>0){var t=Array.from(e).find((function(e){var t=e.classList;return t.contains("Sticky")&&t.contains("is-fixed")&&t.contains("is-bottom")}));return(null==t?void 0:t.clientHeight)||0}return 0}()+12)})),t},U=function(e){var t=e.children,n=e.className,o=L();return(0,r.tZ)(B.d7.div,{initial:{opacity:0,translateY:8},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:8},transition:x,className:k()("OpenInAppButton is-higher",n),css:{position:"fixed",top:"auto",left:16,bottom:o,width:"calc(100vw - 32px)",zIndex:1},children:t})},F=(0,f.Z)(null)((function(e){var t,n,f,Z,E,T,C=e.disableHideOnScroll,_=void 0!==C&&C,y=e.mainContentInPage,S=e.onClick,I=e.href,b=e.className,w=(t=!_,n=(0,o.Z)((0,a.Z)(!1),2),f=n[0],Z=n[1],E=(0,i.useRef)(!0),T=(0,c.Z)((function(){E.current=!0,Z.on()}),1e3),(0,s.Z)((function(){var e=setTimeout((function(){E.current=!0,Z.on()}),1500);if(!t)return function(){clearTimeout(e)};var n=(0,h.subscribe)("scroll",(function(){E.current&&(E.current=!1,Z.off())})),o=(0,h.subscribe)("scroll",T);return function(){n.unsubscribe(),o.unsubscribe(),clearTimeout(e)}})),f),R=D(y),N=(0,p.useSelector)(m.ib),O=(0,d.Q4)().trackEvent,B=(0,u.Z)(null!=S?S:function(){(0,v.Z)({trackEvent:O,href:R?R.urlScheme:I,zaV3Text:R?"底部打开App卡片":"底部打开App按钮",noEnteringSignin:Boolean(N)})}),P=R?(0,r.tZ)(A,{firstRow:R.firstRow,secondRow:R.secondRow,onClick:B,imgUrl:R.imgUrl},"card"):(0,r.tZ)(g,{onClick:B},"button");return(0,r.tZ)(l.M,{exitBeforeEnter:!0,initial:!1,children:w&&(0,r.tZ)(U,{className:b,children:P})})}))},73587:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var o=n(72351),r=n(43158);function i(e,t){var n=e.trackEvent,i=e.zaV3Text,a=e.href||(0,r.MN)((0,r.Qu)(location.pathname));null==n||n({eventType:"Click",action:"OpenUrl",block:"OpenInAppButton",elementLocation:{type:"Button",text:i}},{link:{url:a}}),(0,o.rH)(a,t)}},23993:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var o=n(68562),r=n(87363),i=n(75926),a=n.n(i),c=n(52495),s=n(52626),u=n(59333),l=n(70577),d=n(51944);function p(e){var t=e.loadBrandContentPlugin,n=e.contentType,i=e.contentToken,a=e.author,c=e.plugin,s=(0,r.useCallback)((function(){t(n,i)}),[n,i,t]),l="organization"===a.userType&&!c;if((0,r.useEffect)((function(){l&&s()}),[l,s]),!c)return null;var d={contentType:n,contentToken:i,suger:{},author:a,plugin:c,visible:!0};return(0,o.tZ)("div",{className:"OrgEquityPlugin",children:(0,o.tZ)(u.Z,{data:d})})}p.propTypes={contentType:a().oneOf(["answer","article"]).isRequired,contentToken:a().oneOfType([a().number,a().string]).isRequired,author:a().object.isRequired};var h=(0,s.compose)((0,l.Z)(null),(0,c.connect)((function(e,t){var n=t.contentType,o=t.contentToken;return{plugin:(0,d.PQ)(e,{contentType:n,contentToken:o})}}),{loadBrandContentPlugin:d.RD}))(p)},16514:function(e,t,n){"use strict";n.d(t,{Z:function(){return me}});var o=n(21620),r=n(71103),i=n(84421),a=n(88483),c=n(16600),s=n(32554),u=n(68562),l=n(74792),d=n(52627),p=n(59293),h=n(36014),f=n(61963),m=n(78209),v=n(47112),Z=n.n(v),g=n(75926),E=n.n(g),T=n(87363),C=n(52495),A=n(52626),_=n(17222),y=n(49236),S=n(74264),I=n(73464),b=n(4244),w=n(5700),R=n(59836),N=n(41191),O=n(96606),D=n(67664),B=n(48340),P=n(67233),k=n(59591),x=n(60236),L=n(30658),U=n(90674),F=n(35804),M=n(32705),G=n.n(M),z={top:10,left:20},H={top:0,left:0};function q(){var e,t=G()(navigator.userAgent).Mobile?H:z,n=t.top,o=t.left,r=window.innerWidth,i={left:0,top:0,width:r,height:window.innerHeight},a={x:(e=i).left+e.width/2,y:e.top+e.height/2},c=2*(96+o),s=r,u=0;return r<1e3+c?s=r-c:(s=1e3,u=(r-(1e3+c))/2),{x:a.x,y:a.y,imgContainerWidth:s,imgContainerHeight:i.height-2*n,left:u,top:n}}var V=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).getBoundingClientRect=function(e,t){var n=t.width,o=t.height,r={top:0,left:0,width:0,height:0},i=1;return e.width>e.height?(r.height=o,i=o/e.height,r.width=e.width*i,r.left="-".concat((r.width-n)/2)):e.width<e.height?(r.width=n,i=n/e.width,r.height=e.height*i,r.top="-".concat((r.height-o)/2)):(r.width=n,r.height=o),r},r.getParentNode=function(){for(var e,t=r.props.img.parentNode;t&&"BODY"!==t.nodeName;){if(t.classList.contains("Image-Wrapper-Preview"))return e=t;t=t.parentNode}return e},r.getChildImgNode=function(e){if(e){var t=e.childNodes,n=r.state.index,o=n;return{img:(n>=t.length?t[o=t.length-1]:t[o]).querySelector(".Image-Preview"),index:o}}},r.setImageElAttr=function(){var e=r.state,t=e.width,n=e.transition,o=r.props.images,i=r.getParentNode(),a=r.getChildImgNode(i);if(a&&a.img){var c=a.img.getBoundingClientRect(),s=r.getBoundingClientRect(o[a.index],{width:c.width,height:c.height}),u=r.imgEl.getBoundingClientRect(),l=r.containerClientRect,d=l.left,p=l.top,h={x:u.left+u.width/2-d-s.width/2,y:u.top+u.height/2-p-s.height/2},f=t/s.width;"transition"!==n?(r.setState({transition:""},(function(){r.setState({rect:c,transition:"",width:s.width,height:s.height,translate:h,scale:f,transform:"translate(".concat(h.x,"px ,").concat(h.y,"px) scale(").concat(f,")")})})),setTimeout((function(){r.setState({transition:"transition",translate:null,scale:null,transform:"translate(".concat(c.left-d,"px,").concat(c.top-p,"px)"),opacity:-1})}),20)):r.setState({translate:null,scale:null,opacity:-1,transform:"translate(".concat(c.left-d,"px,").concat(c.top-p,"px)")})}},r.getImageSize=function(e){var t=r.containerClientRect,n=t.imgContainerWidth,o=t.imgContainerHeight,i=e.width,a=e.height,c=!1,s=1;return(e.width>n||e.height>o)&&(e.width>n&&(s=n/e.width,i=e.width*s,a=s*e.height),a>o&&(a*=s=o/a,i*=s),c=!0),r.setState({cursorZoomIn:c}),{width:i,height:a}},r.handleResizeCallback=function(){r.containerClientRect=q();var e=r.state.index,t=r.props.images;r.setState((0,a.Z)({transition:"fixed",transform:""},r.getImageSize(t[e])))},r.handleClick=function(e){var t=r.state.cursorZoomIn,n=e.target;n&&n.classList&&n.classList.contains("ImageGallery-Img")&&t&&r.setState({previewImage:n}),(n.classList.contains("ImageGallery")||n.classList.contains("ImageGallery-Inner"))&&r.setImageElAttr()},r.handleTransEnd=function(){var e=r.state,t=e.translate,n=e.scale,o=r.props.onClose;t&&n||o()},r.handlePreviewImageClose=function(){r.setState({previewImage:null},(function(){F.Cp()}))},r.handleKeyUpCallback=function(e){39===e.keyCode?r.handleCutImage(1):37===e.keyCode&&r.handleCutImage(-1)},r.handleCutImage=function(e){var t=r.state.index+e,n=r.props.images;t<n.length&&t>=0&&r.setState((0,a.Z)({index:t,transition:"fixed",transform:""},r.getImageSize(n[t])))},r.state={transEnded:!1,translate:null,scale:null,url:null,index:e.index||0,width:0,height:0,rect:null,transition:"transition",previewImage:null,transform:"",cursorZoomIn:!1,opacity:1},r.containerClientRect=q(),r}var r=n.prototype;return r.UNSAFE_componentWillMount=function(){var e=this.props,t=e.data,n=e.img.getBoundingClientRect();F.Cp();var o=this.containerClientRect,r=o.left,i=o.top,a=this.getBoundingClientRect(t,{width:n.width,height:n.height}),c={left:n.left-r+Number(a.left),top:n.top-i+Number(a.top)};this.setState({rect:a,width:a.width,height:a.height,transform:"translate(".concat(c.left,"px, ").concat(c.top,"px)")})},r.componentDidMount=function(){var e=this;setTimeout((function(){e.setState((0,a.Z)({},e.computeTransition(e.props.index)))}),20),window.addEventListener("keyup",this.handleKeyUpCallback),window.addEventListener("resize",this.handleResizeCallback)},r.componentWillUnmount=function(){F.$Z(),window.removeEventListener("keyup",this.handleKeyUpCallback),window.removeEventListener("resize",this.handleResizeCallback)},r.computeTransition=function(e){var t=this.props.images[e],n=this.containerClientRect,o=n.x,r=n.y,i=n.left,a=n.top,c=this.getImageSize(t).width;if(this.imgEl){var s=this.imgEl.getBoundingClientRect(),u=c/s.width,l={x:o-s.width/2-i,y:r-s.height/2-a};return{translate:l,scale:u,transform:"translate(".concat(l.x,"px ,").concat(l.y,"px) scale(").concat(u,")")}}},r.render=function(){var e=this,t=this.props.images,n=this.state,o=n.translate,r=n.index,i=n.width,a=n.height,c=n.transition,s=n.previewImage,l=n.transform,d=n.cursorZoomIn,p=n.opacity,h=this.containerClientRect,f=h.left,m=h.top,v=h.imgContainerWidth,g=h.imgContainerHeight,E=(G()(navigator.userAgent).Mobile?H:z).left,T=t[r];return(0,u.tZ)(k.Z,{children:(0,u.BX)("div",{className:Z()("ImageGallery",{"is-active":o}),onClick:this.handleClick,children:[(0,u.BX)("div",{className:"ImageGallery-Content",style:{width:"".concat(v+2*(96+E),"px"),height:"".concat(g,"px"),left:"".concat(f,"px"),top:"".concat(m,"px")},children:[!s&&t.length>1&&(0,u.tZ)("a",{className:Z()("ImageGallery-arrow-left",{"ImageGallery-arrow-disabled":0===r}),style:{left:"".concat(E,"px")},onClick:function(){return e.handleCutImage(-1)},children:(0,u.tZ)(x.e,{fill:"#fff",size:42})}),(0,u.tZ)("div",{className:"ImageGallery-Inner",ref:function(t){e.scrollNode=t},children:(0,u.tZ)("img",{ref:function(t){e.imgEl=t},src:(0,B.imgUrl)(T.url,"r"),className:Z()("ImageGallery-Img",{"ImageGallery-transition":"transition"===c,"ImageGallery-fixed":"fixed"===c,"ImageGallery-CursorZoomIn":d}),style:{width:i,height:a,transform:l,opacity:p},onTransitionEnd:this.handleTransEnd,alt:"preview","data-rawwidth":T.width,"data-rawheight":T.height,"data-thumbnail":T.thumbnail,"data-original":(0,B.imgUrl)(T.url,"r"),"data-actualsrc":(0,B.imgUrl)(T.url,"b")})}),!s&&t.length>1&&(0,u.tZ)("a",{className:Z()("ImageGallery-arrow-right",{"ImageGallery-arrow-disabled":r>=t.length-1}),onClick:function(){return e.handleCutImage(1)},style:{right:"".concat(E,"px")},children:(0,u.tZ)(L.N,{fill:"#fff",size:42})})]}),!s&&(0,u.tZ)("a",{className:"ImageGallery-close",onClick:this.setImageElAttr,children:(0,u.tZ)(U.HN,{fill:"#fff"})}),s&&(0,u.tZ)(P.Z,{img:s,onClose:this.handlePreviewImageClose})]})})},n}(T.Component);V.propTypes={img:E().object.isRequired,data:E().object.isRequired,onClose:E().func.isRequired};var X=V,W=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).setImageAttr=function(){var e=r.state,t=e.width,n=e.height;if(!t||!n){var o=r.divEl.getBoundingClientRect();t=t||o.width,n=n||o.width,r.setState({width:t,height:n})}var i=r.getBoundingClientRect({width:t,height:n});r.setState({imageWidth:i.width,imageHeight:i.height,imageTop:i.top,imageLeft:i.left})},r.getBoundingClientRect=function(e){var t=e.width,n=e.height,o=r.props.data,i={top:0,let:0,width:0,height:0},a=1;return o.width>o.height?(i.height=n,a=n/o.height,i.width=o.width*a,i.left="-".concat((i.width-t)/2)):(i.width=t,a=t/o.width,i.height=o.height*a,i.top="-".concat((i.height-n)/2)),i},r.handlePreviewImageOpen=function(e){var t=r.props.onPreviewImageOpen;e.persist(),t&&t(e)||r.setState({previewImage:r.imgWrapper.querySelector("img")})},r.handlePreviewImageClose=function(){r.setState({previewImage:null})},r.state={width:e.width||0,height:e.height||0,imageWidth:0,imageHeight:0,imageTop:0,imageLeft:0,previewImage:null},r}var r=n.prototype;return r.componentDidMount=function(){this.setImageAttr()},r.render=function(){var e=this,t=this.state,n=t.width,o=t.height,r=t.previewImage,i=t.imageWidth,a=t.imageHeight,c=t.imageTop,s=t.imageLeft,l=this.props,d=l.data,p=l.images,h=l.index,f=l.surplus,m=l.previewType,v=void 0===m?1:m,g=l.data.isGif,E=l.vague,T=l.previewTransitionType,C=void 0===T?0:T;return(0,u.BX)("div",{onClick:this.handlePreviewImageOpen,className:"Thumbnail-Wrapper",ref:function(t){e.divEl=t},style:{width:n?"".concat(n,"px"):"",height:o?"".concat(o,"px"):""},children:[(0,u.tZ)("span",{ref:function(t){e.imgWrapper=t},className:Z()({"Image-PreviewVague":E}),children:E?(0,u.tZ)(D.Nm,{className:"Image-Preview",src:g?(0,B.imgUrl)(d.thumbnail,"xl"):(0,B.imgUrl)(d.url,"xl"),width:n,height:o,alt:"cover",thumbnail:g?(0,B.imgUrl)(d.thumbnail,"xl"):(0,B.imgUrl)(d.url,"xl"),"data-rawwidth":d.width,"data-rawheight":d.height,"data-thumbnail":d.thumbnail,"data-original":(0,B.imgUrl)(d.url,"r"),"data-actualsrc":(0,B.imgUrl)(d.url,"b")}):(0,u.tZ)("img",{className:"Image-Preview",src:g?d.thumbnail:(0,B.imgUrl)(d.url,"r"),width:i,height:a,style:{top:"".concat(c,"px"),left:"".concat(s,"px")},alt:"preview","data-rawwidth":d.width,"data-rawheight":d.height,"data-thumbnail":d.thumbnail,"data-original":(0,B.imgUrl)(d.url,"r"),"data-actualsrc":(0,B.imgUrl)(d.url,"b")})}),f>0&&(0,u.tZ)("em",{className:"Thumbnail-Surplus-Sign",children:"+".concat(f)}),g&&(0,u.tZ)("em",{className:"Thumbnail-Gif-Sign",children:"GIF"}),r&&(1===v?(0,u.tZ)(X,{img:r,data:d,index:h,images:p,onClose:this.handlePreviewImageClose}):(0,u.tZ)(P.Z,{img:r,isOriginalUrl:!E,transitionType:C,data:d,onClose:this.handlePreviewImageClose}))]})},n}(T.Component);W.propTypes={width:E().number,height:E().number,index:E().number,surplus:E().number,data:E().object,images:E().array,onPreviewImageOpen:E().func};var K=n(67694),j=n(87655),Y=n(92799),Q=n(20685),J=n(12255),$=n(91355),ee=n(46434),te=n(88371),ne=n(81525),oe=n(8905),re=n(47859),ie=n(85946),ae=n(70164);function ce(e){var t=e.authRequired,n=e.count,o=e.liked,r=e.id,i=e.onChange,a=(0,C.useDispatch)(),c=(0,re.Z)(t((function(e){var t=!o;_.Z.trackEvent(e.target,{action:t?"Upvote":"UnUpvote",element:"Button"}),i?i(r):a((0,Q.tW)(r))})));return(0,u.tZ)(I.ZP,{preset:I.EE.Plain,color:o?I.rp.Red:I.rp.Grey,onClick:c,icon:ie.ZP,label:n?"".concat((0,ae.Zh)(n),"人喜欢"):"喜欢","aria-live":"polite"})}var se=n(35655),ue=n(3505),le=n(52949),de=n(53923),pe=n(3404),he=function(e){var t=e.qualityLabel,n=null==t?void 0:t[0];return n?(0,u.tZ)(pe.Box,{marginY:16,children:(0,u.tZ)(de.Gh,{theme:n.theme.toUpperCase(),text:n.text,iconName:null==n?void 0:n.icon,detail:n.detail})}):null},fe=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;(0,o.Z)(this,n),(i=t.call(this)).openDeleteModal=function(){i.setState({deleteModalShown:!0})},i.closeDeleteModal=function(){i.setState({deleteModalShown:!1})},i.handleFavlistsShown=function(){_.Z.trackEvent(i.favButtonRef,{action:"Collect",element:"Button",is_intent:!0}),i.props.authRequired((function(){return i.setState({favlistsShown:!0})}),$.q0.favlists)()},i.handleFavlistHide=function(){i.setState({favlistsShown:!1})},i.handlePositionStatusChange=function(e){i.setState({positionStatus:e})},i.handleDeletePin=function(){var e=i.props,t=e.pin.id,n=e.deletePin;return(0,e.authRequired)(n(t),$.q0.deletePin)},i.handleCommentsShown=function(e,t){i.setState(t)},i.handleCommentsHide=function(){i.setState({commentsShown:!1})},i.renderQuoteContents=function(e,t){var n=e.content;return(0,u.tZ)("blockquote",{className:"PinItem-3lineBlockquote",children:n},t)},i.renderLinkContents=function(e,t,n){var o=e.url,i=e.title,a=e.card,c='<a href="'+o+'" data-draft-type="link-card" ></a>';return"text"===n?(0,u.BX)("a",{className:Z()("link-text",{"PinItem-contentTitle":!!i,"PinItem-contentUrl":!i}),href:o,target:"_blank",rel:"noopener noreferrer",children:[(0,u.tZ)(h.GI,{stroke:"#BBC1CC",text:!0,center:!0})," ",i||o]},t):(0,u.tZ)(d.Ho,{html:c,linkCardInfo:(0,r.Z)({},"".concat(o),a)})},i.renderVideoContents=function(e,t){var n=e.videoId||e.id,o={title:"",thumbnail:e.thumbnail||e.coverInfo&&e.coverInfo.thumbnail,isLens:!0,id:n,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(n)};return(0,u.tZ)(le.Z,{isAppView:i.isAppView,data:o},t)},i.renderOriginPinContents=function(e){if(!e)return null;var t=e.regulateInfo,n=e.isDeleted,o=e.deletedReason,r=e.content,a=e.author;if(null==t?void 0:t.isRegulating)return(0,u.tZ)("div",{className:Z()("PinItem-RichText","PinItem-content-originpin"),children:t.reason});if(n)return(0,u.tZ)("div",{className:Z()("PinItem-RichText","PinItem-content-originpin"),children:o});if(r&&r[0]){var c=i.props.noCollapsed,s=i.state.originPinExpanded,l=r.find((function(e){return"text"===e.type}));return(0,u.BX)("div",{className:Z()("PinItem-RichText","PinItem-content-originpin"),children:[(0,u.BX)("div",{children:[a.name,"："]}),l&&(0,u.tZ)(ue.Z,{html:l.content,noCollapsed:c,expanded:s}),i.renderPinContents(r)]})}return null},i.renderPinContents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.filter((function(e){return e.url&&"image"===e.type})),o=[];return(0,u.BX)("div",{className:Z()("RichText","ztext","PinItem-remainContentRichText"),children:[e.map((function(e,r){var a=e.type;return"quote"===a?i.renderQuoteContents(e,r):"link"===a?i.renderLinkContents(e,r,t):"video"===a?i.renderVideoContents(e,r):("image"===a&&o.length<4&&e.url&&o.push((0,u.tZ)(W,{data:e,vague:!0,index:o.length,images:n,surplus:n.length>4&&3===o.length?n.length-4:0},r)),null)})),o.length>0&&(0,u.tZ)("div",{className:"Image-Wrapper-Preview",children:o})]})},i.renderRemainContents=function(){var e=i.props.pin,t=e.id,n=e.created,o=e.updated,r=e.originPin,a=e.content,c=e.ipInfo,s="//".concat($.yK,"/pin/").concat(t);return(0,u.BX)("div",{children:[i.renderPinContents(a),i.renderOriginPinContents(r),(0,u.tZ)(ue.O,{href:s,created:n,updated:o,ipInfo:c})]})};var a=e.pin,c=e.noCollapsed,s=e.showCommentButton;return i.contentHTML=i.getContentHTML(a),i.state={expanded:c,originPinExpanded:c,commentPattern:s?"fixed":"bottom",commentsShown:!s,commentsAutoFocus:s,deleteModalShown:!1,favlistsShown:!1},i}var a=n.prototype;return a.UNSAFE_componentWillReceiveProps=function(e){this.contentHTML=this.getContentHTML(e.pin)},a.getContentHTML=function(e){var t;if(!(null==e||null===(t=e.content)||void 0===t?void 0:t[0]))return"";var n=e.content,o="";return"text"===n[0].type&&(o=n[0].content),o},a.render=function(){var e=this,t=this.props,n=t.pin,o=t.pin,r=o.id,i=o.author,a=o.virtuals,c=(void 0===a?{}:a).reactionType,s=o.commentCount,l=o.reactionCount,d=o.adminClosedComment,h=o.qualityLabel,v=t.preset,g=t.lastreadTouchable,E=t.isSticky,T=t.handleToggleSticky,C=t.noCollapsed,A=t.showFollowAuthorButton,_=t.showCommentButton,y=t.commentInputPosition,D=t.isMobile,B=t.renderOptions,P=t.currentUser,k=t.blockStrategies,x=void 0===k?{}:k,L=x.isBlockingCollect,U=x.isBlockingShare,F=x.isBlockingComment,M=x.isBlockingLike,G=t.authRequired,z=this.state,H=z.positionStatus,q=z.expanded,V=z.deleteModalShown,X=z.favlistsShown,W=z.commentsShown,j=z.commentsAutoFocus,Y=z.commentPattern,Q=P&&P.urlToken===i.urlToken,J="plain"===v,re="like"===c,ie="function"==typeof T,ae="//".concat($.yK,"/pin/").concat(r);return(0,u.BX)(oe.ZP,{data:n,link:ae,"data-zop":JSON.stringify({itemId:r,type:"pin"}),meta:J||(0,u.tZ)("div",{children:(0,u.BX)("div",{className:"PinItem-author",children:[(0,u.tZ)(S.Z,{author:i,className:"PinItem-authorInfo",userLinkV2:!0},"authorInfo"),A&&!Q&&P&&(0,u.tZ)(R.Z,{className:"PinItem-followButton",preset:"primary",type:i.type,id:i.urlToken,gender:i.gender,isFollowing:i.isFollowing,onClick:this.handleFollowButtonClick})]})}),className:Z()("PinItem",{"PinItem-withLabel":Boolean(null==h?void 0:h[0])}),lastreadTouchable:g,children:[(0,u.tZ)(he,{qualityLabel:h}),(0,u.BX)(ue.Z,{prefix:ie&&E&&(0,u.tZ)(O.Z,{}),alwaysShowPrefix:!0,data:n,html:this.contentHTML,excerpt:this.contentHTML,noCollapsed:C,expanded:q,onPositionStatusChange:this.handlePositionStatusChange,renderCanExpandExtra:this.renderRemainContents,children:[!M&&(0,u.tZ)(ce,{liked:Boolean(re),count:l,id:r,authRequired:G}),!F&&_&&(0,u.tZ)(ee.Z,{onClick:this.handleCommentsShown,commentsShown:W,commentClosed:d,count:s,positionStatus:H}),!U&&(0,u.tZ)(N.Z,{id:r,type:"pin",authorName:i&&i.name,href:ae,positionStatus:H}),!L&&(!P||!P.isOrg)&&(0,u.tZ)(b.Z,{onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:D?"":"收藏"}),!Q&&(0,u.tZ)(se.Z,{type:"pin",id:r}),!D&&ie&&Q&&(0,K.U)(P)&&(0,u.tZ)(I.ZP,{preset:"plain",onClick:T,icon:E?f.TX:m.rh,label:E?"取消置顶":"置顶"}),Q&&(0,u.tZ)(I.ZP,{preset:"plain",onClick:this.openDeleteModal,icon:p.Z,label:"删除"}),B()]}),Q&&(0,u.tZ)(ne.Z,{title:"你确定要删除自己的想法吗？",shown:V,onCancel:this.closeDeleteModal,onSubmit:this.handleDeletePin}),!F&&(0,u.tZ)(te.Z,{parent:n,commentPattern:Y,commentInputPosition:y,shown:W,showPackupButton:_,autoFocus:j,onClose:this.handleCommentsHide}),(0,u.tZ)(w.E,{id:r,type:"pin",shown:X,onClose:this.handleFavlistHide,zaEnabled:!0})]})},n}(T.Component);fe.propTypes={noCollapsed:E().bool,showFollowAuthorButton:E().bool,showCommentButton:E().bool,commentInputPosition:E().oneOf(["top","bottom"])},fe.defaultProps={noCollapsed:!1,showFollowAuthorButton:!1,showCommentButton:!0,commentInputPosition:"bottom",renderOptions:function(){return[null]}};var me=(0,A.compose)((0,J.Ib)((function(e){var t=e.pin;return{content:{type:"Pin",id:String(t.id)}}})),(0,y.a)((function(e){var t=e.pin,n=e.trackCardShow,o=void 0===n||n,r=e.zaInfos,i=(void 0===r?{}:r).cardShow;return(0,c.Z)((0,a.Z)({module:"PinItem",card:{content:{type:"Pin",id:String(t.id),author_member_hash_id:t&&t.author.id}}},i&&{view:{id:i}}),{trackCardShow:o})})),j.Z,(0,l.$_)({dataPath:"pin"}),l.OW,(0,C.connect)((function(e,t){var n=t.pin;return(0,c.Z)((0,a.Z)({},"string"==typeof(null==n?void 0:n.author)&&{pin:Object.assign({},n,{author:e.entities.users[n.author]})}),{isMobile:(0,Y.Hu)(e)})}),{deletePin:Q.q$}))(fe)},24362:function(e,t,n){"use strict";n.d(t,{rh:function(){return D},Rt:function(){return O},at:function(){return w}});var o=n(88483),r=n(78194),i=n(68562),a=n(87363),c=n.n(a),s=n(23323),u=n(52495),l=n(45086),d=n.n(l),p=n(3404),h=n(48457),f=n(90674),m=n(98793),v=n(24316),Z=n(16915),g=Object.assign;var E=function(e){return c().createElement(Z.Z,g({width:"20",height:"20",fill:"#06F",viewBox:"0 0 20 20"},e),c().createElement("path",{d:"m4.635 4.884-1.133.647 4.944 8.65 1.132-.647-4.943-8.65Z"}),c().createElement("path",{d:"M18.342 3.003 5.524 4.429l5.093 8.991a1.534 1.534 0 0 1 .14 1.153 1.488 1.488 0 0 1-1.25 1.102 1.448 1.448 0 0 1-1.096-.31 1.501 1.501 0 0 1-.377-.45l-4.975-8.79L2 6.76l5.042 8.882c.23.405.558.742.952.98a2.623 2.623 0 0 0 2.612.056 2.69 2.69 0 0 0 .99-.938l7.306-11.792a.622.622 0 0 0-.233-.883.588.588 0 0 0-.327-.062Zm-8.056 4.902a1.175 1.175 0 0 1-.665-.203 1.214 1.214 0 0 1-.442-.546 1.245 1.245 0 0 1 .256-1.331 1.17 1.17 0 0 1 1.301-.267 1.2 1.2 0 0 1 .536.45 1.24 1.24 0 0 1-.146 1.538 1.18 1.18 0 0 1-.84.36Zm3.82-.114a.756.756 0 0 1-.424-.14.781.781 0 0 1-.278-.357.802.802 0 0 1 .181-.853.762.762 0 0 1 .841-.154c.14.063.257.166.34.297a.798.798 0 0 1 .12.44.795.795 0 0 1-.23.556.761.761 0 0 1-.55.222v-.011Z"}))},T=n(16804),C=n(67608),A=n(14116),_=n(82096),y=n(73464),S=n(47527),I=function(e){var t=(null==e?void 0:e.bindTaskDTO)||{},n=t.taskType,o=t.taskId,r=t.taskName;return[S.AQ[n],o,r].join("  ").trim()},b=function(e){var t=e.visible,n=e.onClose,o=e.onConfirm,c=e.value,s=e.taskList,u=void 0===s?[]:s,l=(0,r.Z)((0,a.useState)(c),2),d=l[0],h=l[1];return(0,a.useEffect)((function(){var e,n;t&&(null==c||null===(e=c.bindTaskDTO)||void 0===e?void 0:e.taskId)!==(null==d||null===(n=d.bindTaskDTO)||void 0===n?void 0:n.taskId)&&h(c)}),[t]),(0,i.tZ)(_.Z,{title:"选择芝士任务",size:"large",onClose:n,children:t&&(0,i.BX)(p.Box,{children:[(0,i.tZ)(p.Box,{color:"GBK02A",maxHeight:"50vh",mr:"-24px",pr:"24px",overflowY:"auto",children:(null==u?void 0:u.length)?u.map((function(e){var t;return(0,i.BX)(p.Flex,{flex:1,py:"12px",justifyContent:"space-between",alignItems:"center",css:function(e){var t=e.colors;return{cursor:"pointer",borderBottom:"1px solid ".concat(t.GBK09A)}},as:"label",children:[(0,i.tZ)(p.Text,{fontSize:"14px",children:I(e)}),(0,i.tZ)(C.Z,{checked:(null==d||null===(t=d.bindTaskDTO)||void 0===t?void 0:t.taskId)===e.bindTaskDTO.taskId,onChange:function(){h(e)}})]},e.bindTaskDTO.taskId)})):(0,i.tZ)(A.H.EI1,{image:"default",content:"没有可绑定的任务"})}),(0,i.BX)(p.Flex,{mt:"32px",justifyContent:"center",children:[(0,i.tZ)(y.ZP,{preset:"outline",color:"grey",css:{width:"168px",marginRight:"16px"},onClick:n,children:"取消"}),(0,i.tZ)(y.ZP,{preset:"primary",color:"blue",css:{width:"168px"},disabled:!d,onClick:function(){o(d)},children:"确认"})]})]})})},w=function(e){return(null==e?void 0:e.bindTaskDTO)?{bind_operate:"BIND",task_id:e.bindTaskDTO.taskId,task_type:e.bindTaskDTO.taskType}:null},R=function(e){var t=e.value,n=e.onChange,c=e.taskList,u=e.disabled,l=void 0!==u&&u,m=e.onOpen,v=void 0===m?function(){return!0}:m,Z=(0,r.Z)((0,s.Z)(!1),2),g=Z[0],T=Z[1],C=(0,h.Q4)().trackEvent;(0,a.useEffect)((function(){l&&g&&T.off()}),[l,g,T]);var A=I(t),_=function(){C({eventType:"Click",elementLocation:{type:"Text",text:A||"选择绑定芝士任务",block:{blockText:"PublishSettingZhiTaskBind"}}}),T.on()};return(0,i.BX)(p.Flex,{flex:1,alignItems:"center",children:[(0,i.BX)(h.Wi,{zaType:"Text",zaText:!0,view:{elementLocation:{block:{blockText:"PublishSettingZhiTaskBind"}}},as:p.Flex,p:"3px 0",alignItems:"center",fontSize:"14px",color:"GBL05A",css:function(e){var n=e.colors;return(0,o.Z)({cursor:l?"not-allowed":"pointer",opacity:l?.5:1},t?{padding:"3px 14px",background:"rgba(0, 102, 255, .1)",borderRadius:"15px",color:n.GBL01A}:{})},onClick:function(){if(!l){var e=v();d()(null==e?void 0:e.then)?e.then(_):!1!==e&&_()}},children:[(0,i.tZ)(E,{css:function(e){var n=e.colors;return{fill:t?n.GBL01A:n.GBL05A,flexShrink:0}}}),(0,i.tZ)(p.Text,{mx:"4px",title:A||"",css:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:A||"选择绑定芝士任务"}),t&&!l&&(0,i.tZ)(f.HN,{size:"14px",css:{flexShrink:0},onClick:function(e){e.stopPropagation(),null==n||n(null)}})]}),(0,i.tZ)(b,{visible:g,value:t,taskList:c,onClose:T.off,onConfirm:function(e){null==n||n(e),T.off()}})]})},N=function(e){return(0,i.BX)(p.Flex,{py:"11px",children:[(0,i.tZ)(T.gN,{name:"芝士任务",title:"芝士任务绑定",helper:(0,i.tZ)("p",{children:"如该内容为芝士任务投稿内容，需在此处进行对应任务的绑定操作，请在发布前认真检查绑定关系，内容发布后关系即刻生效。"})}),(0,i.tZ)(R,(0,o.Z)({},e))]})},O=function(e){var t=e.taskList,n=e.commercialZhitaskBindInfo,o=e.onChange,c=(0,r.Z)((0,a.useState)(null),2),s=c[0],u=c[1],l=Boolean(n),d=function(e){o(e),u(e)};return(0,a.useEffect)((function(){(null==n?void 0:n.bindStatus)===S.W6.BINDING&&d(n)}),[l]),(0,i.tZ)(N,{taskList:t,disabled:(null==s?void 0:s.bindStatus)===S.W6.BINDING,value:s,onChange:function(e){return d(e)}})},D=function(e){var t=e.taskList,n=e.isAnonymous,o=(0,u.useDispatch)(),r=(0,a.useContext)(m.j),c=r.updateFormData,s=(0,r.getFormData)().commercialZhitaskBindInfo,l=(0,a.useCallback)((function(e){c({commercialZhitaskBindInfo:e})}),[c]);(0,a.useEffect)((function(){(null==s?void 0:s.bindStatus)===S.W6.UNBIND&&l(null)}),[s,l]);return(0,i.tZ)(N,{taskList:t,disabled:(null==s?void 0:s.bindStatus)===S.W6.BINDING,value:s,onChange:l,onOpen:function(){if(n)return o((0,v.c0)("已经启用匿名的内容不能进行芝士任务绑定","red")),!1}})}},47527:function(e,t,n){"use strict";n.d(t,{AQ:function(){return o},PC:function(){return r},W6:function(){return i}});var o={INVITED_TASK:"品牌任务",EVALUATE_TASK:"众测任务"},r={CHEESE:"CHEESE",COMMERCIAL_VIP:"COMMERCIAL_VIP"},i={FE_INIT:"FE_INIT",BINDING:"BINDING",UNBIND:"UNBIND"}},26654:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var o=n(88483),r=n(78194),i=n(68562),a=n(87363),c=n(52495),s=n(60111),u=n(60594),l=function(){if("undefined"==typeof window)return"https://bvip.zhihu.com";var e=window.location.host,t=e.includes(".test")||e.includes(".dev")?"dev":"com",n="https://bvip.zhihu.".concat(t),o=/--box-(\d+)--/g.exec(e);return o&&(n="https://ad-business-vip-web--box-".concat(o[1],"--bvip-zhihu-").concat(t,".zpres.zhihu.").concat(t,"/")),n},d=(0,u.FH)("biz",["OPEN_BIZ_VIP","QUERY_BIZ_VIP_STATUS","GET_COMMERCIAL_REPORT_INFO"]);var p=n(24362),h=n(16600),f=n(23323),m=n(47859),v=n(48457),Z=n(3404),g=n(78724),E=n(49533),T=n(82096),C=function(e){var t=e.shown,n=e.toggle,r=(0,g.Z)(e,["shown","toggle"]);return(0,i.tZ)(T.Z,(0,h.Z)((0,o.Z)({title:"",subtitle:"",onClose:function(){n()}},r),{children:t&&(0,i.BX)("div",{children:[(0,i.BX)(Z.Box,{color:"GBK02A",css:{fontSize:"15px",lineHeight:"22px"},children:[(0,i.tZ)(Z.Text,{children:"系统检测到您的账号已开通芝士平台权限。创作者与品牌主的商业合作，需统一通过知乎官方商业合作服务平台「芝士平台」进行。"}),(0,i.tZ)(Z.Text,{children:"知享仅针对品牌自营账号开放。如果您是商家，可以在推出芝士平台后，申请开通知享。"}),(0,i.BX)(Z.Text,{children:["如仍有疑问，请详询",(0,i.tZ)(Z.Link,{href:"https://www.zhihu.com/messages/0cb9df58ed7a3ff685d0ac55d1c1e553",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"@知乎商业小管家 "}),"反馈，我们将积极解决您的问题。"]})]}),(0,i.tZ)("button",{onClick:function(){n()},css:function(e){return[{width:"166px",height:"32px",backgroundColor:e.colors.GBL01A,textAlign:"center",lineHeight:"32px",fontSize:"14px",color:e.colors.GBK99A,borderRadius:"3px",margin:"25px 0 0 93px"}]},children:"知道了"})]})}))},A=n(24316),_=function(e){var t=e.shown,n=e.toggle,s=e.onSuccess,u=e.onFail,p=(0,g.Z)(e,["shown","toggle","onSuccess","onFail"]),m=(0,c.useDispatch)(),_=(0,r.Z)((0,a.useState)(!0),2),y=_[0],S=_[1],I=(0,r.Z)((0,f.Z)(!1),2),b=I[0],w=I[1],R=(0,v.Q4)().trackEvent;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(T.Z,(0,h.Z)((0,o.Z)({title:"商业内容推广",subtitle:"",onClose:function(){R({eventType:"Click",action:"Unknown",elementLocation:{text:"开通商业会员弹窗关闭"}}),n()}},p),{children:t&&(0,i.BX)("div",{children:[(0,i.tZ)(Z.Box,{color:"GBK02A",css:{fontSize:"15px",lineHeight:"22px"},children:"报备后，将自动为您开通「知享」试用版，符合商业内容规范的内容可以正常曝光"}),(0,i.BX)(Z.Flex,{flexDirection:"inherit",flexWrap:"nowrap",alignItems:"center",style:{marginTop:"10px"},children:[(0,i.tZ)(E.C,{onChange:function(){S(!y)},type:"checkbox",checked:y}),(0,i.BX)(Z.Text,{ml:"4px",children:["我已阅读并同意",(0,i.tZ)(Z.Link,{href:"https://bvip.zhihu.com/agreement",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"《知享服务使用协议》"})]})]}),(0,i.tZ)("button",{disabled:!y,onClick:function(){m({API:{types:d.OPEN_BIZ_VIP,endpoint:"/commercial/vip",root:"".concat(l(),"/api/v1"),method:"POST"}}).then((function(e){var t,n,o=e.payload;if(o.isSuccess)return s(),void m((0,A.c0)("开通成功"));u(),"-300"===(null==o||null===(t=o.err)||void 0===t?void 0:t.code)?w.on():m((0,A.c0)((null==o||null===(n=o.err)||void 0===n?void 0:n.msg)||"开通失败","red"))})).catch((function(e){var t;u(),m((0,A.c0)((null==e||null===(t=e.err)||void 0===t?void 0:t.msg)||"开通失败","red"))})),n()},css:function(e){return[{width:"166px",height:"32px",backgroundColor:e.colors.GBL01A,textAlign:"center",lineHeight:"32px",fontSize:"14px",color:e.colors.GBK99A,borderRadius:"3px",margin:"25px 0 0 93px"},!y&&{cursor:"not-allowed"}]},children:"确认并开通"})]})})),(0,i.tZ)(C,{shown:b,toggle:w.toggle})]})},y=n(98793),S=n(16804),I=[{type:!1,description:"非商业推广"},{type:!0,description:"商业推广"}],b=function(e){var t=e.isReport,n=e.commercialPermissionInfo,a=e.setCommercialPermissionInfo,c=e.setIsReport,s=e.validate,u=(0,v.Q4)().trackEvent,l=(0,r.Z)((0,f.Z)(!1),2),d=l[0],p=l[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(S.Qr,{onChange:function(e){if(!s||s()){var t=I.find((function(t){return t.type===e}));u({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"商业推广-".concat(null==t?void 0:t.description)}}),!0!==e||(null==n?void 0:n.isCommercialVip)?c(e):p.on()}},value:Boolean(t),children:I.map((function(e){return(0,i.tZ)(S.o3,{css:function(e){return{color:e.colors.GBK02A,fontSize:"14px"}},value:e.type,text:e.description},e.type)}))}),(0,i.tZ)(_,{shown:d,toggle:p.toggle,onSuccess:function(){c(!0),a((function(e){return(0,h.Z)((0,o.Z)({},e),{isCommercialVip:!0})}))},onFail:function(){c(!1)}})]})},w=function(e){return(0,i.BX)(Z.Flex,{py:"11px",children:[(0,i.tZ)(S.gN,{name:"商业推广",title:"商业内容推广",helper:(0,i.BX)(i.HY,{children:[(0,i.tZ)("p",{children:"商业内容是指，未经平台允许，用户以推广曝光为目的，发布含有产品售卖信息、牟利性外链等内容，或引导用户至第三方平台进行交易。"}),(0,i.tZ)("p",{children:"知乎提供了报备功能，创作者可以选择主动对包含商业推广的内容进行报备。对于包含商业推广但是未报备的内容，将按社区规范进行处理"}),(0,i.BX)("p",{style:{marginTop:"10px"},children:["关于报备功能更多的信息，",(0,i.tZ)("a",{href:"https://www.zhihu.com/creator/explore/academy/rights/rights",target:"_blank",rel:"noreferrer noopener",children:"点击前往了解"})]})]})}),(0,i.tZ)(Z.Box,{flex:"1",children:(0,i.tZ)(b,(0,o.Z)({},e))})]})},R=(0,a.forwardRef)((function(e,t){var n=e.commercialReportInfo,o=e.initCommercialPermissionInfo,c=(0,r.Z)((0,a.useState)(o),2),s=c[0],u=c[1],l=(0,r.Z)((0,a.useState)(!1),2),d=l[0],p=l[1],h=Boolean(n);return(0,a.useEffect)((function(){h&&p(n.isReport)}),[h]),(0,a.useImperativeHandle)(t,(function(){return{getIsReport:function(){return d}}})),(0,i.tZ)(w,{isReport:Boolean(d),commercialPermissionInfo:s,setIsReport:p,setCommercialPermissionInfo:u})})),N=function(e){var t=e.isAnonymous,n=e.updateDraftSettings,o=e.initCommercialPermissionInfo,s=(0,c.useDispatch)(),u=(0,r.Z)((0,a.useState)(o),2),l=u[0],d=u[1],p=(0,a.useContext)(y.j),h=p.updateFormData,f=(0,p.getFormData)().isReport,v=(0,m.Z)((function(e){h({isReport:e}),requestAnimationFrame(n)})),Z=(0,m.Z)((function(){return!t||(s((0,A.c0)("已经启用匿名的内容不能进行商业推广声明","red")),!1)}));return(0,i.tZ)(w,{isReport:Boolean(f),commercialPermissionInfo:l,setIsReport:v,setCommercialPermissionInfo:d,validate:Z})},O=n(47527),D=function(e){var t=e.type,n=e.questionId,u=e.answerId,l=e.articleId,h=e.reportProps,f=void 0===h?{}:h,m=e.taskBindProps,v=void 0===m?{}:m,Z=(0,c.useDispatch)(),g=(0,r.Z)((0,a.useState)([]),2),E=(0,r.Z)(g[0],3),T=E[0],C=void 0===T?null:T,A=E[1],_=void 0===A?{}:A,y=E[2],S=void 0===y?"":y,I=g[1],b="article"===t,w="answer"===t;return(0,s.Z)((function(){var e,t=b?(e=l,{API:{types:d.QUERY_BIZ_VIP_STATUS,endpoint:"/articles/settings",query:{token:e},method:"GET"}}):function(e,t){return{API:{types:d.QUERY_BIZ_VIP_STATUS,endpoint:"/questions/".concat(e,"/answer-settings"),query:{token:t},method:"GET"}}}(n,u);Z(t).then((function(e){var t,n=(null==e||null===(t=e.payload)||void 0===t?void 0:t.commercialPermissionInfo)||{};if(O.PC.CHEESE===n.businessLine){var o;if(!(null===(o=n.cheeseTaskList)||void 0===o?void 0:o.length))return;var r=b?p.Rt:p.rh,i=n.cheeseTaskList.map((function(e){return{bindStatus:O.W6.FE_INIT,bindTaskDTO:e}}));I([r,{taskList:i},O.PC.CHEESE])}else if(O.PC.COMMERCIAL_VIP===n.businessLine){if(n.isShowTab)I([b?R:N,{initCommercialPermissionInfo:n},O.PC.COMMERCIAL_VIP])}}))})),O.PC.CHEESE===S&&w&&v.isVideoAnswer?null:C?(0,i.tZ)(C,(0,o.Z)({},O.PC.CHEESE===S?v:f,_)):null}},16804:function(e,t,n){"use strict";n.d(t,{$_:function(){return N},KT:function(){return B},NZ:function(){return I},Qr:function(){return P},Tw:function(){return D},gN:function(){return b},o3:function(){return k},vQ:function(){return O}});var o=n(88483),r=n(16600),i=n(78724),a=n(78194),c=n(61565),s=n(68562),u=n(67608),l=n(26223),d=n(23323),p=n(47859),h=n(1474),f=n(91464),m=n(48239),v=n(40108),Z=n(58386),g=n.n(Z),E=n(87363),T=n(3404),C=n(53436),A=n(48457),_=n(36701),y=n(53658),S=n(91855),I=function(e){return(0,s.tZ)(T.Text,(0,o.Z)({color:"GBK03A",css:{lineHeight:"61px",fontSize:"17px",fontWeight:"500"}},e))},b=function(e){var t=e.required,n=e.name,i=e.title,a=e.helper,c=e.props,u=(0,l.F)();return(0,s.BX)(T.Flex,(0,r.Z)((0,o.Z)({as:"label",color:"GBK03A",mr:"3px",css:[{lineHeight:"38px",fontSize:"15px",fontWeight:"400",width:"110px"},!t&&{paddingLeft:"10px"}]},c),{children:[t&&(0,s.tZ)(T.Text,{"aria-label":"必填",color:"GRD03A",mt:"2px",mr:"4px",children:"*"}),n,a&&(0,s.tZ)(A.$U,{as:"button",zaType:"Button",zaText:"提示信息-".concat(n),css:function(e){return{color:e.colors.GBL05A}},onClick:function(){_.Z.alert((0,s.BX)("div",{css:{paddingTop:"16px",h2:{paddingBottom:"20px",fontWeight:"bold",fontSize:"24px",textAlign:"center"},p:{textAlign:"left",fontSize:"15px",textIndent:"30px"},a:{textDecoration:"underline",color:u.colors.primary}},children:[(0,s.tZ)("h2",{children:i||n}),a]}),{text:{ok:"我知道了"}}).then(g(),g())},children:(0,s.tZ)(f.rk,{css:{marginLeft:"4px"},center:!0,size:18})})]}))},w=function(e){var t=e.isBottom,n=(0,i.Z)(e,["isBottom"]);return(0,s.tZ)(A.$U,(0,r.Z)((0,o.Z)({as:"button",zaType:"Button",zaText:!0,css:function(e){return{cursor:"pointer",display:"flex",alignItems:"center",color:e.colors.GBL05A}}},n),{children:t?(0,s.BX)(s.HY,{children:[(0,s.tZ)(T.Text,{mr:"4px",fontSize:"14px",children:"回到顶部"}),(0,s.tZ)(m.v,{text:!0,fontSize:"16px"})]}):(0,s.BX)(s.HY,{children:[(0,s.tZ)(T.Text,{mr:"4px",fontSize:"14px",children:"发布设置"}),(0,s.tZ)(v.f,{text:!0,fontSize:"16px"})]})}))},R=function(e){var t=e.className,n=(0,i.Z)(e,["className"]);return(0,s.tZ)(T.Flex,(0,o.Z)({className:t,height:"52px",css:function(e){return{justifyContent:"center",borderTop:"1px solid ".concat(e.colors.GBK09A),background:e.colors.GBK99C,WebkitFontSmoothing:"subpixel-antialiased"}}},n))},N=function(e){var t=e.children,n=e.hideScrollButton,o=e.isAnswer,r=(0,a.Z)((0,d.Z)(!1),2),i=r[0],c=r[1];return(0,E.useEffect)((function(){var e=function(){var e=document.documentElement;e.scrollTop+e.clientHeight>=e.scrollHeight-5?c.on():c.off()};return document.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[c]),(0,s.BX)(s.HY,{children:[(0,s.tZ)(T.Box,{height:"52px",css:{visibility:"hidden"}}),(0,s.tZ)(R,{css:{position:"fixed",left:0,right:0,bottom:0,zIndex:1},children:(0,s.BX)(T.Flex,{height:"52px",alignItems:"center",mx:"auto",css:{width:o?"654px":"800px"},children:[!n&&(0,s.tZ)(w,{onClick:function(){(0,C.X5)(window,{top:i?0:document.body.scrollHeight,behavior:"smooth"})},isBottom:i}),t]})})]})},O=function(e){var t=e.children,n=e.hideScrollButton,o=e.getContaner;return(0,s.tZ)(S.Z,{bottom:!0,getStyle:function(){return{width:"1000px",bottom:0,maxWidth:"100vw"}},container:o,children:function(e){var r=!e.isFixed;return(0,s.tZ)(R,{children:(0,s.BX)(T.Flex,{width:"100%",height:"52px",alignItems:"center",mx:"auto",px:"20px",children:[!n&&(0,s.tZ)(w,{onClick:function(){if(r)(0,C.X5)(window,{top:0,behavior:"smooth"});else{var e=null==o?void 0:o();if(e){var t=e.getBoundingClientRect().bottom+52;(0,C.yZ)(window,{top:t-document.documentElement.clientHeight,behavior:"smooth"})}}},isBottom:r}),t]})})}})},D=function(e){return(0,s.tZ)("button",(0,r.Z)((0,o.Z)({css:function(e){return{color:e.colors.GBK08B,marginLeft:"auto",flex:"0 0 auto",height:"100%",padding:"0 10px"}}},e),{children:(0,s.tZ)(h.C,{text:!0})}))};function B(e){var t=e.checked,n=e.onChange,a=e.text,l=e.id,d=e.disabled,h=e.shouldTrackClick,f=e.zaTextPrefix,m=e.zaText,v=(0,i.Z)(e,["checked","onChange","text","id","disabled","shouldTrackClick","zaTextPrefix","zaText"]),Z=(0,A.Q4)().trackEvent;return(0,s.BX)(T.Flex,(0,r.Z)((0,o.Z)({flex:1,alignItems:"center",as:"label",htmlFor:l,css:{flex:"0 0 auto",marginRight:"20px",cursor:"pointer"}},v),{children:[(0,s.tZ)(u.Z,{id:l,size:20,checked:t,onChange:(0,p.Z)((function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];h&&Z({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:m||(f?"".concat(f,"-").concat(a):a)}}),n.apply(void 0,(0,c.Z)(t))})),disabled:d}),(0,s.tZ)(T.Text,{ml:"4px",fontSize:"14px",color:"GBL05A",children:a})]}))}var P=function(e){return(0,s.tZ)(y.Z,(0,o.Z)({css:{".Select-button":{width:"270px",height:"38px"},".Select-arrow":{marginLeft:"auto"}}},e))},k=function(e){return(0,s.tZ)(y.W,(0,o.Z)({css:function(e){return{color:e.colors.GBK02A,fontSize:"14px"}}},e))}},35655:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(78724),s=n(32554),u=n(68562),l=n(29338),d=n(58386),p=n.n(d),h=n(72928),f=n.n(h),m=n(75926),v=n.n(m),Z=n(87363),g=n(17222),E=n(48457),T=n(522),C=n(73464),A=n(37148),_=n(62372),y=function(e){var t=e.onClose,n=e.shown;return(0,u.tZ)(A.Z,{wrapperClassName:"WalleModal",className:"WalleModal",title:"举报成功",onClose:t,children:n&&(0,u.BX)("div",{className:"WalleModal-wrapper",children:[(0,u.tZ)("p",{className:"WalleModal-des",children:"你的举报我们已经收到，处理完成后将会私信告知处理结果。"}),(0,u.tZ)("img",{className:"WalleModal-img",src:"https://zhstatic.zhihu.com/heifetz/wall-E.png",alt:"walle"}),(0,u.BX)("div",{className:"WalleModal-open",children:[(0,u.BX)("div",{className:"WalleModal-content",children:[(0,u.tZ)("div",{className:"WalleModal-title",children:"遇到不友善评论了？"}),(0,u.tZ)("div",{className:"WalleModal-intro",children:"开启瓦力保镖评论区保护，瓦力将自动为你识别并处理不友善的评论。"})]}),(0,u.tZ)(_.Z,{className:"WalleModal-btn",preset:"primary",color:"blue",to:"/settings/preference",children:"立即开启"})]})]})})},S=n(91355),I=n(87655),b=n(13261),w=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={shown:!1,walleModalShown:!1},e.handleShow=e.props.authRequired((function(t){var n=e.props.zaReportId;e.setState({shown:!0}),e.props.onModalShown(!0),g.Z.trackEvent(t.target,(0,i.Z)({action:"Report",element:"Button",is_intent:!0},n&&{id:n}))}),S.q0.report),e.handleHide=function(t){e.setState({shown:!1}),e.props.onModalShown(!1,t)},e.handleWalleShow=function(){e.setState({walleModalShown:!0}),e.props.onModalShown(!0)},e.handleWalleClose=function(){e.setState({walleModalShown:!1}),e.props.onModalShown(!1)},e}return n.prototype.render=function(){var e=this.state,t=e.shown,n=e.walleModalShown,o=this.props,r=o.id,s=o.resourceType,d=o.type,p=o.modalProps,h=(0,c.Z)(o,["id","resourceType","type","modalProps"]),m=f()(h,["zaReportId","onModalShown","authRequired","isLogin","currentUser","dispatch"]);return(0,u.BX)(u.HY,{children:[(0,u.BX)(E.$U,(0,a.Z)((0,i.Z)({as:C.ZP,zaAction:"Report",zaType:"Button",preset:"plain",onClick:this.handleShow,zaModuleId:"click_report"},m),{children:[(0,u.tZ)(l.Z,{text:!0,center:!0})," 举报"]})),(0,u.tZ)(b.y,(0,a.Z)((0,i.Z)({resourceType:s,type:d,urlToken:r,shown:t,onClose:this.handleHide,showWalle:this.handleWalleShow},p),{zaEnabled:!0})),(0,u.tZ)(y,{shown:n,onClose:this.handleWalleClose})]})},n}(Z.Component);w.propTypes={type:v().oneOf(T.eX).isRequired,id:v().oneOfType([v().number,v().string]).isRequired,zaReportId:v().number,onModalShown:v().func},w.defaultProps={onModalShown:p()};var R=(0,I.Z)(w)},13261:function(e,t,n){"use strict";n.d(t,{y:function(){return m}});var o=n(21620),r=n(84421),i=n(88483),a=n(32554),c=n(68562),s=n(87363),u=n(52495),l=n(74453),d=n(90837),p=n(91356),h=function(){return Promise.all([n.e(7395),n.e(876)]).then(n.bind(n,36870)).then((function(e){return e.default}))};var f=function(e){(0,r.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){return(0,c.tZ)(l.Z,(0,i.Z)({getComponent:h},this.props))},n}(s.Component),m=(0,u.connect)(null,(function(e,t){return{loadProfile:function(t){e((0,d.hr)(t))},updateUserBlocking:function(t,n){e((0,d.cR)(t,n))},doReport:function(n){return e((0,p.Hj)(n)).then((function(e){return e.payload.sarcasmRecommend&&t.showWalle(),e}))}}}))(f);n(35655)},73195:function(e,t,n){"use strict";var o=n(68562),r=n(47112),i=n.n(r),a=n(86488);t.Z=function(e){var t=e.className;return(0,o.BX)("div",{className:i()("Reviewing",t),children:[(0,o.BX)("div",{className:"Reviewing-top",children:[(0,o.tZ)(a.P,{size:16}),(0,o.tZ)("span",{className:"Reviewing-tip",children:"内容审核中"})]}),(0,o.tZ)("div",{className:"Reviewing-text",children:"内容将在审核通过后自动发布"})]})}},43251:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(75926),s=n.n(c),u=n(87363),l=n(52495),d=n(52626),p=n(74453),h=n(97645),f=n.n(h),m=n(87655),v=n(91355),Z=n(27869),g=n(24316),E=n(64833),T=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.totalMoney,n=e.showRewarders;return(0,a.tZ)("div",{children:Boolean(t)&&(0,a.tZ)("div",{className:"Reward-money",children:(0,a.BX)("span",{onClick:n,role:"button",tabIndex:0,children:["¥ ",t.toFixed(2)]})})})},n}(u.Component);T.propTypes={totalMoney:s().number,showRewarders:s().func};var C=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props.activateReward;return(0,a.BX)("div",{className:"Reward",children:[(0,a.tZ)("button",{className:"Reward-activateBtn",onClick:e,children:"开启赞赏"}),(0,a.tZ)("div",{className:"Reward-activateHint",children:"赞赏开启后，读者将可以付费支持你的创作。"})]})},n}(u.Component);C.propTypes={activateReward:s().func};var A=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.tagline,n=e.onClick;return(0,a.BX)("div",{children:[(0,a.tZ)("div",{className:"Reward-tagline",children:t||v.Sp}),(0,a.tZ)("button",{className:"Reward-rewardBtn",onClick:n,children:"赞赏"})]})},n}(u.Component);A.propTypes={onClick:s().func,tagline:s().string};var _=n(52028),y=n(49236),S=n(70164),I=n(70175),b=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={hoverName:""},e.hoverUser=function(t){e.setState({hoverName:t.target.dataset.name})},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.users,o=t.handleListShown,r=t.rewardMemberCount,i=t.onUserClick,c=this.state.hoverName,s=n.slice(0,5);return(0,a.BX)("div",{className:"Reward-count",children:[(0,a.tZ)("p",{className:"Reward-User-text",onClick:o,children:"".concat((0,S.uf)(r)," 人已赞赏")}),(0,a.BX)("div",{children:[s.map((function(t,n){return I.Z.isMobileEntry&&v.dd?(0,a.tZ)("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,alt:"赞赏用户"}):(0,a.tZ)(_.Link,{to:"//".concat(I.Z.wwwHost,"/").concat(t.userType,"/").concat(t.urlToken),className:"Reward-User-img","data-hover-title":c,target:"_blank",onClick:i,children:(0,a.tZ)("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"})},n)})),r>6&&(0,a.BX)("span",{className:"Reward-MoreUser",onClick:o,children:[(0,a.tZ)("i",{}),(0,a.tZ)("i",{}),(0,a.tZ)("i",{})]})]})]})},n}(u.Component);b.propTypes={users:s().array,handleListShown:s().func,rewardMemberCount:s().number,onUserClick:s().func},b.defaultProps={users:[]};var w=(0,y.a)({module:"UserList",moduleName:"*** 人已赞赏"})(b),R=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,o=e.isAuthor,r=e.users,i=e.onUserClick;return t?(0,a.tZ)(w,{users:r,onUserClick:i,handleListShown:n,rewardMemberCount:t}):(0,a.tZ)("div",{className:"Reward-countZero",children:o?null:"还没有人赞赏，快来当第一个赞赏的人吧！"})},n}(u.Component);R.propTypes={rewardMemberCount:s().number,handleListShown:s().func,isAuthor:s().bool,users:s().array,onUserClick:s().func};var N=n(37148),O=n(9426),D=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.modalShown,n=e.onLoad,o=e.items,r=e.voteupCount,i=e.isRewardList,c=e.onClose,s=e.notice;return(0,a.tZ)(N.Z,{size:"fullPage",onClose:c,children:t&&(0,a.tZ)(O.Z,{items:o,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:r,onLoad:n,isRewardList:i,notice:s,type:"rewardPeople"})})},n}(u.Component);D.propTypes={onLoad:s().func,modalShown:s().bool};var B=function(){return n.e(1384).then(n.bind(n,61384)).then((function(e){return e.TipjarDialog}))},P=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={TipjarRender:!1,modalShown:!1},e.onSubmitReward=function(t){f().set("isRewardable",!0),e.updateReward(t)},e.onPaySuccess=function(){var t=e.props,n=t.reward,o=t.currentUser,r=t.id,i=t.type,a=n[i][r].users,c=[o];Array.isArray(a)&&(a.push(o),c=a),e.props.onRewardSuccess(c,r,i),e.colseTijarDialog(),e.props.showNotification("你已赞赏成功！")},e.onLoad=function(t){"article"===e.props.type?"normal"===t?e.onLoadArticleRewardUser():e.onLoadArticleRewardUserDetails():e.onLoadRewardUser()},e.onLoadArticleRewardUser=function(){var t=e.props.id;e.props.getArticleRewardUser(t)},e.onLoadArticleRewardUserDetails=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getPagingArticleRewardUserDetails(n):e.props.getPagingArticleRewardUser(n)},e.onLoadRewardUser=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getRewardUserDetails(e.props.id):e.props.getRewardUser(n).then((function(t){var n=t.payload.data;if(n.length>0){var o={};n.forEach((function(e){o[e.urlToken]=e})),e.props.updateEntitiesUsers(o)}}))},e.handleListShown=function(t){var n=e.props.onRewardUserMoreClick;n&&n(t),e.setState({modalShown:!0})},e.handleListHide=function(){e.setState({modalShown:!1})},e.updateReward=function(t){var n=e.props,o=n.type,r=n.id,i=n.rewardInfo.canOpenReward;if("article"===o){var a=!!i||void 0;e.props.updateArticleReward(r,t,a)}else e.props.updateAnswerReward(r,t)},e.activateReward=function(){e.onSubmitReward(v.Sp)},e.showRewarders=function(){e.setState({modalShown:!0})},e.addReward=e.props.authRequired((function(t,n){var o=e.props,r=o.id;"article"===o.type?e.props.createArticleTipjar(r,t):e.props.createTipjar(r,t,n)}),void 0,g.zQ),e.handleRewardButtonClick=function(t){var n=e.props.onRewardButtonClick;n&&n(t),e.setState({TipjarRender:!0})},e.colseTijarDialog=function(){e.setState({TipjarRender:!1})},e.removeTradeNumber=function(){var t=e.props,n=t.id,o=t.type;e.props.removeTradeNumber(n,o)},e}var c=n.prototype;return c.componentDidMount=function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal"),this.props.imperativeRef&&(this.props.imperativeRef.current={activateReward:this.activateReward.bind(this)})},c.componentWillUnmount=function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)},c.render=function(){var e=this.props,t=e.currentUser,n=e.isAuthor,o=e.isMobile,r=e.id,i=e.reward,c=e.author,s=e.type,u=e.ua,l=e.rewardInfo,d=l.canOpenReward,h=l.isRewardable,f=l.tagline,m=l.rewardTotalMoney,v=l.rewardMemberCount,Z=e.onRewardUserClick,g=e.balanceEnable;if(n&&t&&"organization"===t.userType)return null;var E=this.state,_=E.TipjarRender,y=E.modalShown;if(n&&d)return(0,a.tZ)("div",{children:(0,a.tZ)(C,{activateReward:this.activateReward})});if(h){var S=i&&i[s][r]||{},I=S.tradeNumber,b=S.users,w=S.notice,N=(0,a.tZ)(D,{modalShown:y,items:b,voteupCount:v,onLoad:this.onLoad,isRewardList:n,notice:w,onClose:this.handleListHide}),O=(0,a.tZ)(R,{rewardMemberCount:v,handleListShown:this.handleListShown,onUserClick:Z,users:b,isAuthor:n});if(!n)return(0,a.BX)("div",{className:"Reward",children:[(0,a.tZ)(A,{tagline:f,onClick:this.handleRewardButtonClick}),O,N,(0,a.tZ)(p.Z,{getComponent:B,author:c,tagline:f,isMobile:o,ua:u,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:I,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:_,type:s,balanceEnable:g})]});var P=(Number(m)||0)/100;return(0,a.BX)("div",{className:"Reward",children:[(0,a.tZ)(T,{tagline:f,totalMoney:P,showRewarders:this.showRewarders}),N,O]})}return null},n}(u.Component);P.propTypes={reward:s().object,isAuthor:s().bool,author:s().object,id:s().number,rewardInfo:s().object,currentUser:s().object,ua:s().object,type:s().string,isMobile:s().bool,balanceEnable:s().bool,onRewardButtonClick:s().func,onRewardUserClick:s().func,onRewardUserMoreClick:s().func},P.defaultProps={rewardInfo:{},type:"answer",balanceEnable:!0};var k=(0,d.compose)(m.Z,(0,l.connect)(null,{updateAnswerReward:Z.fT,updateArticleReward:E.i3,createArticleTipjar:E.pb,getRewardUserDetails:E.Js,getPagingArticleRewardUser:E.Ze,getPagingArticleRewardUserDetails:E.BE,getArticleRewardUser:E.nb,updateEntitiesUsers:E.$U,getRewardUser:E.vu,createTipjar:E.Cf,removeTradeNumber:E.on,onRewardSuccess:E.TN,showNotification:g.c0}))(P)},16846:function(e,t,n){"use strict";var o=n(68562),r=n(48457);t.Z=function(e){var t=e.moduleId,n=(0,r.x3)({action:"ReadFinished",elementLocation:{type:"Text",text:"阅读完成",block:{blockText:"阅读完成"},moduleId:t}});return(0,o.tZ)("span",{ref:n})}},3505:function(e,t,n){"use strict";n.d(t,{O:function(){return de},Z:function(){return ve}});var o=n(21620),r=n(61869),i=n(84421),a=n(88483),c=n(16600),s=n(78724),u=n(78194),l=n(32554),d=n(68562),p=n(81345),h=n(67664),f=n(69975),m=n(47859),v=n(37015),Z=n(40108),g=n(47112),E=n.n(g),T=n(89231),C=n.n(T),A=n(75926),_=n.n(A),y=n(87363),S=n(52495),I=n(52626),b=n(17222),w=n(48457),R=n(58214),N=n(91855),O=n(74891),D=n(81159),B=n(91840),P=n(71848),k=n(73464),x=n(60048),L=n(8905),U=n(8672),F=n(87676),M=n(40198),G=n(13307),z=function(e){(0,i.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.call(this)).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind((0,U.Z)(e)),e.handleCopy=e.handleCopy.bind((0,U.Z)(e)),e.handleTipClose=e.handleTipClose.bind((0,U.Z)(e)),e.rightClickX=-1,e.rightClickY=-1,e}var r=n.prototype;return r.getRange=function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)},r.getExtraCopyright=function(e,t,n){var o=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],r=["",""];return o=n?o.concat(r):r.concat(o)},r.getCopyText=function(e,t,n,o){var r=this.getExtraCopyright(t,n,o).join("\n");return o?r+e:e+r},r.getRangeHtml=function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML},r.getCopyHtml=function(e,t,n,o){var r=this.getExtraCopyright(t,n,o).join("<br />");return"<div>".concat(o?r+e:e+r,"</div>")},r.randomRange=function(e,t){return Math.floor(Math.random()*(t-e)+e)},r.addCopyright=function(e,t,n){if(window.getSelection){var o=window.getSelection(),r=this.getRange(o),i=r.toString().trim(),a=this.getRangeHtml(r);if(i&&!(i.length<128)){var c=i.length>=512,s=this.getCopyHtml(a,t,n,c),u=this.getCopyText(i,t,n,c),l=e.nativeEvent.clipboardData;if("object"==typeof l){if(l.setData("text/html",'<meta charset="utf-8">'+s),l.setData("text/plain",u),l.getData("text/plain")&&l.getData("text/plain").length>0)return void e.preventDefault()}var d=document.createElement("div");d.innerHTML=s;var p=d.firstChild;p.style.position="fixed",p.style.left="-9999px",document.body.appendChild(p),o.selectAllChildren(p),setTimeout((function(){document.body.removeChild(p),o.removeAllRanges(),o.addRange(r)}),200)}}},r.showTip=function(e,t){if(window.getSelection){var n=window.getSelection(),o=this.getRange(n),r=o.toString().trim(),i=this.randomRange(44,66);if(!(r.length<=i)){e.preventDefault(),e.stopPropagation();var a,c=o.getBoundingClientRect(),s=window.pageYOffset,u=this.rightClickX,l=this.rightClickY,d="bottom";if(-1!==l)a=l+3;else{var p=this.props.viewPort,h=c.top+s,f=c.bottom+s,m=s+p.top+52,v=s+p.bottom-52;f<m?a=m-52:f<v?a=f:(d="top",a=h>m&&h<v?h:v+52)}var Z=-1!==u?u+3:c.left+(c.right-c.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:Z,tipY:a,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}},r.handleTipClose=function(){this.setState({tipShown:!1})},r.handleCopy=function(e){var t=this.props,n=t.data,o=n.author,r=n.type,i=n.id,a=n.question,c=n.reshipmentSettings,s=n.relationship,u=void 0===s?{}:s,l=u.isAuthor,p=u.isAuthorized,h=t.isCurrentUser,f="";if("article"===r?f="https://zhuanlan.zhihu.com/p/".concat(i):"answer"===r&&(f="https://www.zhihu.com/question/".concat(a.id,"/answer/").concat(i)),!h&&!l)switch(c){case"disallowed":this.showTip(e,(0,d.tZ)("a",{href:"https://www.zhihu.com/term/zhihu-terms#sec-licence-6",children:"禁止转载"}));break;case"need_payment":if(!p){this.showTip(e,(0,d.tZ)("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(i),children:"申请转载"}));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,f,o.name)}},r.handleMouseDown=function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)},r.render=function(){var e=this.props,t=e.onRef,n=e.data,o=e.tag,r=e.html,i=e.children,a=e.onClick,c=e.className,s=e.itemProp,u=e.style,l=e.prefix,p=e.ecommerce,h=e.shouldShowCatalog,f=e.shouldCatalogCollapse,m=e.richContentKey,v=e.isCurrentUser,Z=e.isNovel,g=e.isExpanded,E=e.entityWords,T=e.isVideoAnswer,C=this.state,A=C.tipShown,_=C.tipContent,y=C.tipX,S=C.tipY,I=C.tipPosition;return(0,d.BX)("div",{ref:t,onClick:a,className:c,style:u,children:[l,(0,d.tZ)(G.Z,{entityWords:E,richContentKey:m,sourceId:n.id,sourceType:n.type,itemProp:s,tag:o,html:r,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:p,shouldShowCatalog:h,useCatalogV2:!0,isAuthor:v,isNovel:Z,isExpanded:g,shouldCatalogCollapse:f,isVideoAnswer:T}),i,(0,d.tZ)(F.Z,{shown:A,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:y,y:S,position:I,content:_,className:"CopyrightRichText-tooltip"})]})},n}(y.Component);z.propTypes={onRef:_().func,viewPort:_().object};var H=(0,I.compose)((0,S.connect)((function(e,t){return{isCurrentUser:(0,M.pG)(e,t.data.author)}})))(z),q=n(52949),V=n(38793),X=n(70175),W=n(28483),K=n(42178),j=n(47496),Y=n(92799),Q=n(82832),J=n(16846),$=n(21353),ee=n(52857),te=n.n(ee),ne=n(52028),oe=n(70164),re=n(40937);function ie(){var e=(0,$.Z)(["发布于",""]);return ie=function(){return e},e}function ae(){var e=(0,$.Z)(["发布于",""]);return ae=function(){return e},e}function ce(){var e=(0,$.Z)(["编辑于",""]);return ce=function(){return e},e}function se(){var e=(0,$.Z)(["发布于",""]);return se=function(){return e},e}function ue(){var e=(0,$.Z)(["・",""]);return ue=function(){return e},e}var le=function(e){(0,i.Z)(n,e);var t=(0,l.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.href,n=e.created,o=e.updated,r=e.onClick,i=e.videoPlayCount,a=e.ipInfo;return(0,d.BX)("div",{className:"ContentItem-time",children:[(0,d.tZ)(ne.Link,{to:t,target:X.Z.isMobileEntry?"":"_blank",onClick:r,children:(0,d.tZ)("span",{"data-tooltip":te()(ie(),(0,re.KZ)(n)),"aria-label":te()(ae(),(0,re.KZ)(n)),children:o!==n?te()(ce(),(0,re.KZ)(o)):te()(se(),(0,re.KZ)(n))})}),Boolean(a)&&te()(ue(),a),Boolean(i)&&(0,d.BX)("span",{css:{marginTop:10,marginLeft:5},children:["· ",(0,oe.Zh)(i),"次播放"]})]})},n}(y.Component);le.propTypes={href:_().string,created:_().number,updated:_().number,videoPlayCount:_().number,onClick:_().func,ipInfo:_().string};var de=le,pe=new Set([106713022,429615779,435773734,426291898,250310031,414291487,409115369,446861209,247003387,73377905,254989758,35134669,36249462,435345603,182387634,140256060,437667891,153624684,47216571,1009993776,1166287748,150785754,573667246,345093461,2051581556,423418617,24921526,427937981,119180585,442812865,175851487,285113967,807213480,415830436,125852644,399866520,269912473,736404714,630788898,217627201,32718846,233425911,1965977070,1703482555,425876259,376921084,477237451,430849009,409175983,395659900,404407636,33593650,29355234,45519587,477365726,407347055,128506044,324992390,391677046,399503822,540487048,514491508,340627548,433773279,125028091,126685323,1073936835,128655569,1782124590,431426144,198577418,449399100,2074550774,342658316,429187404,275411797,121202894,356603699,211168793,1182049284,88545788,435377412,142918293,112180819,107952366,394146559,239506554,243404812,967162682,416311991,108937963,503648342,37744326,338336040,742041726,2142758456,13098904,435935045,181579258,17350640]),he=/.*?(class="link-box")/;var fe=function(e){var t=e.children,n=e.onChange,o=(0,s.Z)(e,["children","onChange"]),r=(0,u.Z)((0,f.Z)(o),2),i=r[0],a=r[1],c=(0,m.Z)(n);return(0,y.useEffect)((function(){c(a)}),[c,a]),(0,d.tZ)("span",{ref:i,children:t})},me=function(e){(0,i.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state=(0,c.Z)((0,a.Z)({},e.getInitTruncatedState(e.props)),{shouldSticky:!1,offset:0,prevImgUrls:[]}),e.richContentRef=(0,y.createRef)(),e.zaRef=(0,y.createRef)(),e.truncateContent=function(){var t=e.props,n=t.isMobile,o=t.onToggleExpend,r=n?400:800,i=e.props.expandedHeight||r;(!e.content||e.content.scrollHeight<i)&&(e.setState({isTruncated:!1,isExpanded:!1}),null==o||o(!1,{trackUserAction:!1})),e.content&&e.content.scrollHeight>e.content.offsetHeight&&e.setState({contentCollapsed:!0})},e.updateStateInBrowser=function(){var t=e.props,n=t.excerpt,o=t.allowCollapseWithEmptyExcerpt,r=t.html,i=t.expanded,a=t.cover,c=t.unescapable,s=t.limit,u=t.limitWithImage,l=t.truncateHTMLOptions,d=t.truncateDisabled,p=!0,h=e.state.truncatedContent;if((n||o)&&(he.test(n)||d))h=n;else if(!c){var f=a?u:s,m=e.truncate(r,f,l);p=m.isTruncated,h=m.content}return{isTruncated:p,isExpanded:r&&i,truncatedContent:h,previewImg:null}},e.checkOpenInAppStyle=function(e){if(X.Z.isMobileEntry){var t=document.querySelector(".OpenInApp");t&&(e?t.classList.add("is-higher"):t.classList.remove("is-higher"))}},e.toggle=function(t){e.isCollapsed()?e.handleExpand(t):e.handleCollapse(t)},e.trackExpand=function(t){var n=e.props.expandButtonZaType,o=t?"阅读全文":"收起阅读全文";e.zaRef.current.trackEvent({eventType:"Click",action:t?"Expand":"Collapse",elementLocation:{type:n||"Card",text:o},block:o})},e.handleExpand=function(t){var n,o,r,i,c,s=e.props.zaIds.expand;((null==t?void 0:t.target)&&((null==(r=t.target.textContent)?void 0:r.length)>10||t.target.classList.contains("RichContent-inner")||t.target.classList.contains("List-item"))&&(r=null),b.Z.trackEvent(e.richContentRef.current,(0,a.Z)({action:"Expand"},r&&{name:r},s&&{id:s})),pe.has(null===(n=e.props)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.id))&&v.ZP.increment("RichContent.Expand.afterZALog.".concat(r||"default",".").concat(s||"default",".").concat(null===(i=e.props)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.id,".count"));var u=e.props.onExpand;if(u)u(t);else{var l=e.props,d=l.onToggleExpend,p=l.data,h=p.type,f=p.id;l.currentUser&&(0,W.ZP)("article"===h?"post":h,f,W._x);var m=!0;d&&(d(m),e.trackExpand(m)),e.setState({isExpanded:m},(function(){"article"===h&&(0,B.y3)(e.richContentRef.current,(function(){b.Z.trackEvent(e.richContentRef.current,{action:"ReadFinish"})}))}))}},e.handleCollapse=function(){var t=e.props.onToggleExpend;b.Z.trackEvent(e.richContentRef.current,{action:"Collapse",element:"Button"});var n=!1;t&&(t(n),e.trackExpand(n)),e.setState({isExpanded:n},(function(){return e.checkOpenInAppStyle(!1)}))},e.handlePreview=function(t){var n,o,r=e.props,i=r.ua,a=r.isMobile,c=e.state,s=c.isExpanded,u=c.isTruncated,l=c.prevImgUrls,d=u&&!s,p=t.target;d||"IMG"!==p.tagName||!p.classList.contains("zh-lightbox-thumb")&&!p.classList.contains("Slideshow-swiperImage")||(a&&i.MQQBrowser&&(null===(n=window.browser)||void 0===n||null===(o=n.app)||void 0===o?void 0:o.openPhotoBrowser)?setTimeout((function(){window.browser.app.openPhotoBrowser(l,C()(l,(function(e){return e===p.dataset.original})),0)}),0):e.setState({previewImg:p}))},e.handlePositionStatusChange=function(t){var n=e.props.onPositionStatusChange;n&&(n(t),e.checkOpenInAppStyle("fixed"===t))},e.handleBodyInViewChange=function(t){var n=t;n!==e.state.shouldSticky&&(e.setState({shouldSticky:n}),n||e.checkOpenInAppStyle(!1))},e.handleTrunObserve=function(t){var n=e.props,o=n.data,r=o.type,i=o.id,a=n.updateReadStatus,c=n.html,s=t[0],u=s.intersectionRatio,l=s.isIntersecting;!X.Z.isMobileEntry||"answer"!==r||e.isReadMarked||e.isCollapsed()||((0,B.y3)(e.richContentRef.current,(function(){a({type:r,id:i},!0)})),e.isReadMarked=!0),e.truncateComputed||(u>0||l||!c)&&(setTimeout((function(){return e.truncateContent()})),e.truncateComputed=!0)},e.isCollapsed=function(){var t=e.props,n=t.after,o=t.before,r=t.unescapable,i=e.state,a=i.isExpanded,c=i.isTruncated;return!o&&!n||r?c&&!a:!a},e}var s=n.prototype;return s.componentDidMount=function(){var e=this;this.setState((0,c.Z)((0,a.Z)({},this.updateStateInBrowser()),{viewPort:{top:148,bottom:window.innerHeight-56}}),(function(){var t,n;null===(n=(t=e.props).onToggleExpend)||void 0===n||n.call(t,e.state.isExpanded,{trackUserAction:!1})})),(0,B.y3)(this.richContentRef.current,(function(){var t=e.props,n=t.data,o=n.type,r=n.id,i=t.expanded;t.currentUser&&i&&(0,W.ZP)("article"===o?"post":o,r,W._x)})),this.props.imperativeRef&&(this.props.imperativeRef.current={handleExpand:this.handleExpand.bind(this)})},s.UNSAFE_componentWillReceiveProps=function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))},s.UNSAFE_componentWillUpdate=function(e,t){var n=e.ua,o=e.html,r=e.isMobile;if(this.state.isExpanded&&!t.isExpanded){var i=this.richContentRef.current.getBoundingClientRect();i.top<this.props.topExcludedHeight&&(this.rect=i,this.scroll=window.pageYOffset)}r&&!this.state.isExpanded&&t.isExpanded&&n.MQQBrowser&&this.setState({prevImgUrls:(0,K.Z)(o)})},s.componentDidUpdate=function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,o=n.top,r=n.bottom,i=n.height,a=this.richContentRef.current.offsetHeight,c=window.innerHeight,s=r<c?a-i:o-(c-a);window.scrollTo(0,this.scroll+s),this.rect=null,this.scroll=null}},s.componentWillUnmount=function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)},s.getInitTruncatedState=function(e){var t=e.excerpt,n=e.html,o=e.expanded,r=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:o,truncatedContent:r?n:t,previewImg:null}},s.truncate=function(e,t,n){var o=(0,D.tK)(e,t,n);return{isTruncated:o.isTruncated,content:o.content}},s.renderActions=function(){var e=this,t=this.props,n=t.children,o=t.unescapable,r=t.noCollapsed,i=t.expandText,a=void 0===i?"展开阅读全文":i,c=t.onClick,s=t.videoData,u=t.needExpandArrow,l=void 0===u||u,p=t.forceSticky,h=this.state,f=h.isExpanded,m=h.isTruncated,v=h.shouldSticky,g=h.offset;if(!f)return[o&&m&&!s&&(0,d.BX)(k.ZP,{preset:"plain",className:"ContentItem-rightButton ContentItem-expandButton",onClick:c||this.handleExpand,children:[a,l&&(0,d.tZ)(Z.f,{className:"ContentItem-arrowIcon",center:!0})]},"expand-button"),n&&(0,d.tZ)(L.eX,{children:n},"actions")];var E=(n||!r)&&(0,d.BX)(L.eX,{className:"RichContent-actions",children:[n,!r&&(0,d.BX)(k.ZP,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse,children:[(0,d.tZ)("span",{className:"RichContent-collapsedText",children:"收起"}),(0,d.tZ)(Z.f,{className:"ContentItem-arrowIcon is-active",center:!0})]})]});return(p||v)&&E?(0,d.tZ)(N.Z,{offset:g,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange,children:E}):E},s.renderText=function(){var e=this,t=this.props,n=t.html,o=t.excerpt,r=t.data,i=t.itemProp,s=void 0===i?"text":i,u=t.expandText,l=void 0===u?"阅读全文":u,h=t.onClick,f=t.prefix,m=t.unescapable,v=t.isSearchContent,g=t.collapsedHeight,T=t.ecommerce,C=t.canAbstract,A=t.richContentKey,_=t.shouldCatalogCollapse,y=t.isNovel,S=t.entityWords,I=t.isVideoAnswer,b=this.state,w=b.truncatedContent,N=b.previewImg,O=b.viewPort,D=b.contentCollapsed,B=b.isExpanded,L=this.isCollapsed(),U=L?w||o:n,F=v&&X.Z.isMobileEntry?{onClick:h}:{},M=(0,d.BX)(H,(0,c.Z)((0,a.Z)({entityWords:S,richContentKey:A&&String([A,L]),itemProp:s,className:E()("RichContent-inner",{"RichContent-inner--collapsed":D}),style:L&&m?{maxHeight:g}:null,tag:"span",onRef:function(t){e.content=t},isExpanded:B,data:r,html:U,viewPort:O,prefix:f},L&&{onClick:h||this.handleExpand},F),{ecommerce:T,shouldCatalogCollapse:_,shouldShowCatalog:(0,x.Z)(r)&&(B||m&&!L),isNovel:y,isVideoAnswer:I,children:[C&&(0,d.tZ)(P.Z,(0,a.Z)({},this.abstractProps)),!m&&L&&(0,d.BX)(k.ZP,{preset:"plain",className:"ContentItem-more",children:[l,(0,d.tZ)(Z.f,{className:"ContentItem-arrowIcon",center:!0})]}),(0,d.tZ)(p.Z,{img:N,onClose:function(){return e.setState({previewImg:null})}})]}),L);return m?(0,d.tZ)(R.Z,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve,children:M}):M},s.render=function(){var e=this.props,t=e.unescapable,o=e.after,r=e.before,i=e.extra,a=e.cover,c=e.onCoverImageLoad,s=e.hasVideo,u=e.renderCanExpandExtra,l=e.className,p=e.videoData,h=e.handleClickVideoMoreButton,f=e.duration,m=e.isVideoAnswer,v=e.readFinishModuleId,Z=this.state.isExpanded,g=this.isCollapsed(),T=p?(0,d.BX)(d.HY,{children:[(0,d.tZ)(q.Z,{data:p}),(0,d.tZ)("p",{className:"RichContent-videoMore",onClick:h,children:"点击查看全文"})]}):this.renderText(),C=(0,d.tZ)(fe,{rootMargin:"-".concat(240,"px 0px"),onChange:this.handleBodyInViewChange,children:T});return(0,d.BX)("div",{className:E()("RichContent",l,{"is-collapsed":g,"RichContent--unescapable":t}),ref:this.richContentRef,onClick:this.handlePreview,children:[(0,d.tZ)(w.pS,{ref:this.zaRef}),(0,d.tZ)(V.bY,{input:"o",action:this.toggle}),!g&&r,!t&&g&&a&&(0,d.tZ)(n.Cover,{url:a,onCoverImageLoad:c,hasVideo:s,onClick:this.handleExpand,duration:f,isVideoAnswer:m}),C,i||"function"==typeof u&&u(Z,this.handleExpand),!g&&(0,d.BX)(d.HY,{children:[o,(0,d.tZ)(J.Z,{root:this.richContentRef,moduleId:v})]}),this.renderActions()]})},(0,r.Z)(n,[{key:"abstractProps",get:function(){var e=this.props.data,t=e.id,n=e.type,o=e.author,r=e.question;return{objectId:t,type:n,author:o,title:(void 0===r?{}:r).title,url:e.url,isCopyable:e.isCopyable}}}]),n}(y.Component);me.propTypes={enableConvert:_().bool,unescapable:_().bool,expanded:_().bool,noCollapsed:_().bool,limit:_().number,limitWithImage:_().number,collapsedHeight:_().number,html:_().string,excerpt:_().string,allowCollapseWithEmptyExcerpt:_().bool,truncateDisabled:_().bool,before:_().node,after:_().node,prefix:_().node,extra:_().node,renderCanExpandExtra:_().func,topExcludedHeight:_().number,onPositionStatusChange:_().func,type:_().string,data:_().object,canAbstract:_().bool,cover:_().string,hasVideo:_().bool,truncateHTMLOptions:_().object,expandText:_().string,onToggleExpend:_().func,videoData:_().object,handleClickVideoMoreButton:_().func,zaIds:_().shape({expand:_().number}),forceSticky:_().bool},me.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",allowCollapseWithEmptyExcerpt:!1,hasVideo:!1,isVideoAnswer:!1,data:{},collapsedHeight:400,zaIds:{},forceSticky:!1},me.Cover=function(e){var t=e.url,n=e.hasVideo,o=e.duration,r=e.isVideoAnswer,i=e.onCoverImageLoad,u=(0,s.Z)(e,["url","hasVideo","duration","isVideoAnswer","onCoverImageLoad"]);return(0,d.BX)("div",(0,c.Z)((0,a.Z)({className:E()("RichContent-cover",{"RichContent-cover--mobile":X.Z.isMobileEntry})},u),{children:[(0,d.BX)("div",{className:"RichContent-cover-inner",children:[(0,d.tZ)(h.Nm,{src:t,width:190,height:105,alt:"cover",onLoad:i}),o&&(0,d.tZ)("div",{className:"RichContent-cover-mask"}),o&&(0,d.tZ)("div",{className:"RichContent-cover-duration",children:o})]}),r&&(0,d.tZ)(h.Nm,{alt:"",width:64,height:18,css:{position:"absolute",left:0,top:0,objectFit:"cover"},src:"https://pic1.zhimg.com/80/v2-c19ceba4b1bea7204cb67e27f469c95b_1440w.png"}),n&&(0,d.tZ)(O.o,{className:"RichContent-cover-play"})]}))};var ve=(0,I.compose)(j.Z,(0,S.connect)((function(e){return{ua:(0,Y.Uh)(e),isMobile:(0,Y.Hu)(e)}}),{updateReadStatus:Q.m3}))(me)},75724:function(e,t,n){"use strict";var o=n(88483),r=n(16600),i=n(61565),a=n(68562),c=n(87363),s=n(52495),u=n(98148),l=n(93442),d=n(50647),p=n(24316),h=n(91355),f=[".webp",".jpg",".jpeg",".png",".gif"];function m(e,t){var n=(0,s.useDispatch)(),m=(0,s.useSelector)((function(e){return e.switches.couldSuperVideoUpload})),v=(0,s.useSelector)((function(e){return e.env.trafficSource})),Z=(0,c.useCallback)((function(t){return n((0,l.Ix)(t,e.uploadType,e.editingContentType)).then((function(e){return e.payload})).then((function(e){return{url:e.src,originalSrc:e.originalSrc,watermarkSrc:e.watermarkSrc,privateWatermarkSrc:e.privateWatermarkSrc,watermark:e.watermark,rawWidth:e.dataRawwidth,rawHeight:e.dataRawheight,id:e.hash}}))}),[n,e.editingContentType,e.uploadType]),g=(0,c.useCallback)((function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n(d.Ty.apply(void 0,(0,i.Z)(t))).then((function(e){return e.payload}))}),[n]),E=(0,c.useCallback)((function(e){if("object"!=typeof e)switch(e){case"type":return void n((0,p.c0)("格式不支持，请上传以下格式的图片：".concat(f.join(", ")),"red"));case"size":return void n((0,p.c0)("请上传不超过 ".concat(h.i3,"M 的图片"),"red"));case"dimension":return void n((0,p.c0)("GIF 图片的长或宽低于 ".concat(120,"px，无法上传"),"red"));case"disable-question-answer-image-upload":return void n((0,p.c0)("图片服务进行升级改造，暂时不能在「问题」「回答」中添加图片","red"));case"other":return void n((0,p.c0)("图片上传未完成，请稍后发布"))}else n((0,p.c0)(e.message,"red"))}),[n]),T=(0,c.useCallback)((function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n(d.o2.apply(void 0,(0,i.Z)(t))).then((function(e){return e.payload}))}),[n]);return(0,a.tZ)(u.Z,(0,r.Z)((0,o.Z)({},e),{ref:t,allowInlineCode:!0,allowImageCaption:!0,allowResizeImage:!0,onImageUpload:Z,onVideoUpload:g,uploadImageError:E,loadVideo:T,couldSuperVideoUpload:m,isProduction:"production"===v}))}t.Z=(0,c.forwardRef)(m)},52949:function(e,t,n){"use strict";n.d(t,{Z:function(){return D}});var o=n(8672),r=n(21620),i=n(84421),a=n(88483),c=n(16600),s=n(32554),u=n(68562),l=n(87363),d=n(52626),p=n(52495),h=n(74891),f=n(28029),m=n(17222),v=n(69045),Z=n(24316),g=n(50647),E=n(49236),T=n(37694),C=n.n(T),A=function(e,t){return e+(t?Date.now()-t:0)},_=function(e,t){return Math.abs(e-t)<.01},y={auto:"Auto",ld:"LD",sd:"SD",hd:"HD"},S={auto:"自动",ld:"低清",sd:"标清",hd:"超清"},I=[1,2,3,5,8,13];function b(e){var t,n=function(t,n){e(t,(0,a.Z)({play_event_identifier:s,duration:1e3*c,elapsed:A(u,l),video_quality:y[i]},n))},o=function(){(++h<15?I.includes(h):h%15==0)&&n({action:"Playing"})},r=function(){clearInterval(t)},i="sd",c=0,s=null,u=0,l=null,d=!1,p=0,h=0;return{handlePlayEvent:function(e){var i=e.currentTime,a=e.duration;c=a,_(i,0)&&(s=C()(),u=0),l=Date.now(),_(i,0)?n({action:"Play"}):n({action:"ResumePlay"}),h=0,r(),t=setInterval(o,1e3)},handlePauseEvent:function(e){var t=e.currentTime,o=e.duration;l&&(u+=Date.now()-l,l=null),_(t,o)?n({action:"EndPlay"}):n({action:"Pause"}),r()},handleQualityChangeEvent:function(e){var t=e.quality;n({action:"Switch",name:S[t]}),i=t},handleFragmentLoading:function(){d||(p=Date.now())},handleFragmentLoaded:function(){if(!d){d=!0;var e=Date.now()-p;n({action:"Load"},{video_load_time:e})}},clearTick:r}}var w=n(70175),R=n(9990);var N=function(e){var t=e.children,n=e.videoId,o=e.iframeRef;return(0,R.Z)({videoId:n,iframeRef:o}),t},O=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;(0,r.Z)(this,n),(i=t.call(this,e)).handleMessage=function(e,t){var n=i.videoTracker,o=n.handlePlayEvent,r=n.handlePauseEvent,a=n.handleQualityChangeEvent,c=n.handleFragmentLoading,s=n.handleFragmentLoaded;switch(e){case v.FP.DOM.PLAY:o(t);break;case v.FP.DOM.PAUSE:r(t);break;case v.FP.PLAYER.QUALITY_CHANGE:a(t);break;case"fragment-loading":c(t);break;case"fragment-loaded":s(t)}},i.handlePlay=function(){i.props.trackEvent((0,o.Z)(i),{id:5500,action:"Play",element:"Video"})},i.handlePlayFailed=function(){(0,i.props.showNotification)("视频加载失败，请刷新页面重试","red")},i.handleIframeLoad=function(e){i.setState({iframe:e})};var a=e.data;return i.messageHelper=(0,v.Wn)(a.id,"*",!0),i.videoTracker=b((function(e,t){m.Z.trackEvent((0,o.Z)(i),e,{play:t})})),i.state={iframe:null},i}var l=n.prototype;return l.componentDidMount=function(){var e=this.props,t=e.data,n=t.isLens,o=t.id,r=t.playerUrl,i=t.flvPlayerUrl,a=e.loadVideo;n||!o||r||i||a(o);var c=this.messageHelper.subscribeMessage;this.messageSubscription=c(this.handleMessage)},l.componentWillUnmount=function(){this.messageSubscription.unsubscribe(),this.videoTracker.clearTick()},l.render=function(){var e,t,n=this.props,o=n.data,r=n.data.error,i=n.onBeforePlay,s=n.hideWatermark&&o.playerUrl?(e=o.playerUrl,(t=new URL(e)).searchParams.append("hideWatermark","1"),t.toString()):o.playerUrl;return(0,u.tZ)("div",{className:"RichText-video",children:r?(0,u.tZ)(f.Z,(0,a.Z)({},o)):(0,u.tZ)(N,{videoId:o.id,iframeRef:{current:this.state.iframe},children:(0,u.tZ)(h.Z,(0,c.Z)((0,a.Z)({},o),{playerUrl:s,onIframeRef:this.handleIframeLoad,onPlay:this.handlePlay,onPlayFailed:this.handlePlayFailed,onBeforePlay:i}))})})},n}(l.Component),D=(0,d.compose)((0,p.connect)((function(e,t){var n=t.data,o=n.isLens,r=n.id;return o?{data:(0,c.Z)((0,a.Z)({},t.data),{source:"lens",playerUrl:"https://".concat(w.Z.videoHost,"/video/").concat(r)})}:{data:e.video.data[r]||t.data}}),{showNotification:Z.c0,loadVideo:g.o2}),(0,E.a)((function(e){var t=e.data,n=t.isLens,o=t.id,r=t.isPlayable;return{module:"VideoItem",content:{type:"Video",sub_type:n?"SelfHosted":"Embedded",video_id:o,is_playable:Boolean(r)},trackCardShow:!0,view:{id:174}}})))(O)},13307:function(e,t,n){"use strict";n.d(t,{Z:function(){return Ro}});var o=n(88483),r=n(16600),i=n(78724),a=n(78194),c=n(61565),s=n(68562),u=n(29934),l=n(87363),d=n.n(l),p=n(52626),h=n(39849),f=n(20722),m=n(71103),v=n(26223),Z=n(18034),g=n(4537),E=n(37186),T=n(52627),C=n(60822),A=n(42281),_=n(5184),y=n(91858),S=n(68697),I=n(83626),b=n(89954),w=n(34965),R=n(3404),N=n(52495),O=n(92799),D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,N.useSelector)((function(n){return(0,O.tQ)(n,(0,o.Z)({paramId:e},t))}))},B=n(58386),P=n.n(B);var k=function(e){var t=this;return e.length?function(n,o){for(var r=e.length-1,i=n;r>=0;)i=e[r].call(t,i,o),r--;return i}:P()},x=n(47859),L=n(21620),U=n(84421),F=n(32554),M=n(43669),G=n(17341),z=n(47112),H=n.n(z),q=n(75926),V=n.n(q),X=n(17222),W=n(48457),K=n(49236),j=n(96323),Y=n(73464),Q=n(37148),J=n(82096),$=n(43131),ee=n(70164),te=n(40937),ne=n(70175),oe=n(91355),re=n(47496),ie=n(90837),ae=n(12255),ce=n(69701),se=n(8905),ue=n(59836),le=n(41191),de=function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){var e;return(0,L.Z)(this,n),(e=t.apply(this,arguments)).state={showQuit:!1},e.onClose=function(){e.setState({showQuit:!1})},e.handleQuitButton=function(){e.setState({showQuit:!0})},e.handleQuitColumn=function(t,n){e.props.fetchQuitColumn(t,n),e.setState({showQuit:!1})},e}var i=n.prototype;return i.renderStatus=function(){var e=this.props,t=e.column,n=t.itemsCount,o=t.voteupCount,r=e.isProfile,i=e.urlToken===(e.currentUser||{}).urlToken;return(0,s.BX)(se.qb,{children:["".concat((0,ee.uf)(n)," 篇内容"),"".concat((0,ee.uf)(o)," 赞同"),r&&i&&this.renderProfileContent()]})},i.renderMeta=function(){var e=this.props,t=e.preset,n=e.column.intro;return(0,s.tZ)("div",{className:"ColumnItem-meta",children:ne.Z.isMobileEntry?(0,s.tZ)("span",{className:"ColumnItem-meta",children:this.renderStatus()}):(0,s.BX)(s.HY,{children:[n,t===se.PG.default&&this.renderStatus()]})})},i.renderProfileContent=function(){var e=this,t=this.props,n=t.column,o=n.id,r=n.author,i=t.contributions,a=this.state.showQuit,c=r.urlToken===i.urlToken;return(0,s.BX)(s.HY,{children:[(0,s.tZ)($.Z,{toggler:(0,s.tZ)(Y.ZP,{preset:"plain",icon:G.AZ}),placement:"top",className:"ColumnItem-more",arrowed:!0,children:c?(0,s.tZ)(Y.ZP,{component:"a",preset:"plain",href:"".concat(oe.i7,"/column/").concat(o),className:"ColumnItem-botton",children:"管理专栏"}):(0,s.tZ)(Y.ZP,{preset:"plain",className:"ColumnItem-botton",onClick:this.handleQuitButton,children:"退出专栏"})}),(0,s.tZ)(Q.Z,{onClose:this.onClose,title:"确定退出该专栏吗？",children:a&&(0,s.tZ)("div",{className:"ColumnAuthorsList-modal",children:(0,s.BX)(J.w,{direction:"horizontal",children:[(0,s.tZ)(Y.ZP,{onClick:function(){return e.onClose},children:"取消"}),(0,s.tZ)(Y.ZP,{className:"ColumnPosts-confirmButton",onClick:function(){return e.handleQuitColumn(i.urlToken,o)},color:"blue",preset:"primary",children:"确定"})]})})})]})},i.renderInteractiveContent=function(){var e=this,t=this.props,n=t.column,i=n.id,a=n.type,c=n.articlesCount,u=n.followers,l=n.lastArticle,d=n.isFollowing,p=n.author,h=n.title,f=t.zaInfos,m=f.follow,v=f.options,Z=t.renderOptions,g={id:i,type:a},E=(l||{}).updated;return(0,s.BX)(s.HY,{children:[!ne.Z.isMobileEntry&&(0,s.BX)(se.n1,{className:"ContentItem-counts",children:[(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"文章："}),(0,ee.uf)(c)]}),(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"最后更新于："}),(0,te.rL)(E)||"暂未更新"]}),(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"关注者："}),u]})]}),(0,s.BX)(se.eX,{children:[(0,s.tZ)(ue.Z,(0,r.Z)((0,o.Z)({},g),{isFollowing:d,zaId:m})),(0,s.tZ)(le.Z,(0,r.Z)((0,o.Z)({},g),{title:h,authorName:p&&p.name,href:"".concat(oe.i7,"/column/").concat(i)})),Z&&Z((function(){return e.contentItem}),v)]})]})},i.render=function(){var e=this,t=this.props,n=t.preset,o=t.column,r=t.lastreadTouchable,i=(0,s.tZ)(ce.Z,{column:o,target:"_blank"});return(0,s.tZ)(se.ZP,{className:"ColumnItem",data:o,link:"".concat(oe.i7,"/column/").concat(o.id),onRef:function(t){return e.contentItem=t},title:i,meta:this.renderMeta(),lastreadTouchable:r,children:n===se.PG.interactive&&this.renderInteractiveContent()})},n}(l.Component);de.propTypes={preset:V().oneOf(Object.values(se.PG)),isProfile:V().bool,zaInfos:V().shape({follow:V().number,options:V().number}),renderOptions:V().func},de.defaultProps={preset:se.PG.default,isProfile:!1,zaInfos:{}};var pe=(0,p.compose)((0,ae.Ib)((function(e){var t=e.column;return{content:{type:"Column",token:String(t.id)}}})),(0,K.a)((function(e){var t=e.column,n=e.trackCardShow,o=void 0===n||n;return{module:"ColumnItem",card:{content:{type:"Column",token:t.id,item_num:t.articlesCount,follower_num:t.followers,publish_timestamp:1e3*t.updated,author_member_hash_id:(t.author||{}).id}},trackCardShow:o}})),re.Z,(0,N.connect)(null,{fetchQuitColumn:ie.eB}))(de);function he(e,t,n){return t&&n?function(t,i){var a=e.relationship,c=(void 0===a?{}:a).isAuthor,u={toggler:(0,s.tZ)(Y.ZP,{preset:"plain",className:"OptionsButton",icon:G.AZ,"aria-label":"更多"}),reversed:!0,onOpen:function(){return function(e,t){X.Z.trackEvent(e,(0,o.Z)({action:"Click",element_name:"MoreAction"},t&&{id:t}))}(t(),i)},menuClassName:"ItemOptions-selfMenu",itemClassName:"ItemOptions-selfMenuItem"};if(!c)return(0,l.createElement)(j.ZP,(0,r.Z)((0,o.Z)({},u),{key:"options"}),n({itemClassName:"ItemOptions-selfMenuItem",getContainer:t}))}:null}var fe=n(48340),me=n(16915),ve=Object.assign;var Ze=function(e){return d().createElement(me.Z,ve({viewBox:"0 0 15 15"},e),d().createElement("g",{fill:"#ffab2e",fillRule:"evenodd"},d().createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 0 0 .175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 0 0-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),d().createElement("path",{d:"M7.5 1.4a.47.47 0 0 0-.474.354l-1.318 4.29H1.49a.499.499 0 0 0-.467.36.523.523 0 0 0 .185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},ge=Object.assign;var Ee=function(e){return d().createElement(me.Z,ge({width:"15",height:"15",viewBox:"0 0 15 15"},e),d().createElement("g",{fillRule:"evenodd"},d().createElement("path",{fill:"#d7d8d9",d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 0 0 .175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 0 0-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),d().createElement("path",{fill:"#ffab2e",d:"M7.5 1.4a.47.47 0 0 0-.474.354l-1.318 4.29H1.49a.499.499 0 0 0-.467.36.523.523 0 0 0 .185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},Te=Object.assign;var Ce=function(e){return d().createElement(me.Z,Te({viewBox:"0 0 15 15"},e),d().createElement("g",{fill:"#d7d8d9",fillRule:"evenodd"},d().createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 0 0 .175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 0 0-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),d().createElement("path",{d:"M7.5 1.4a.47.47 0 0 0-.474.354l-1.318 4.29H1.49a.499.499 0 0 0-.467.36.523.523 0 0 0 .185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},Ae=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return(0,s.tZ)("div",{className:"Rating",children:Array.from({length:5}).map((function(e,t){var o=function(e,t){return t>=e+1?Ze:t>=e+.5?Ee:Ce}(t,n);return(0,s.tZ)(o,{size:15},t)}))})};function _e(e){return e?"¥".concat(e/100):"免费"}var ye=n(46434),Se=n(88371),Ie=n(63426),be=n(24336),we=function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){var e;return(0,L.Z)(this,n),(e=t.apply(this,arguments)).state={commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return n.prototype.render=function(){var e=this.props,t=e.preset,i=e.ebook,a=e.lastreadTouchable,c=i.id,u=i.type,l=i.url,d=i.title,p=i.cover,h=i.authors,f=i.price,m=i.promotionPrice,v=i.description,Z=i.relationship,g=void 0===Z?{}:Z,E=i.voteupCount,T=i.commentCount,C=i.score,A=this.state,_=A.commentsShown,y=A.commentsAutoFocus,S=A.commentPattern;if(t!==se.PG.interactive)return(0,s.tZ)(se.ZP,{title:(0,s.tZ)("a",{href:l,target:"_blank",rel:"noopener noreferrer",children:d}),data:i,link:l});var I={id:c,type:u},b=h.slice(0,2);return(0,s.BX)(se.ZP,{className:"EBookItem",data:i,link:l,title:!ne.Z.isMobileEntry&&(0,s.tZ)("a",{className:"EBookItem-title",href:l,target:"_blank",rel:"noopener noreferrer",children:d}),image:(0,s.tZ)(n.Cover,{url:l,title:d,cover:p}),meta:ne.Z.isMobileEntry?(0,s.BX)("div",{className:"EBookItem-meta",children:[(0,s.tZ)("a",{className:"EBookItem-title",href:l,target:"_blank",rel:"noopener noreferrer",children:d}),(0,s.BX)("span",{children:[b.length&&(0,s.tZ)(be.Z,{user:b[0]}),b.length>1&&"等","的电子书"]}),(0,s.tZ)(Ae,{score:C})]}):(0,s.BX)("div",{children:[(0,s.tZ)("div",{className:"EBookItem-description",children:v}),(0,s.BX)(se.n1,{children:[(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"作者："}),b.map((function(e,t){return(0,s.BX)("span",{children:[(0,s.tZ)(be.Z,{user:e}),t<b.length-1&&"、"]},t)}))]}),(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"知乎价："}),"number"==typeof m?(0,s.BX)("span",{className:"EBookItem-price",children:[_e(m),(0,s.tZ)("del",{children:_e(f)})]}):_e(f)]})]})]}),lastreadTouchable:a,children:[(0,s.BX)(se.eX,{className:"EBookItem-actions",children:[(0,s.tZ)(Ie.Z,(0,r.Z)((0,o.Z)({},I),{liked:Boolean(g.voting),count:E})),(0,s.tZ)(ye.Z,{onClick:this.handleCommentsShown,commentsShown:_,count:T}),(0,s.tZ)(le.Z,(0,r.Z)((0,o.Z)({},I),{title:d,authorName:h[0]&&h[0].name,href:l}))]}),(0,s.tZ)(Se.Z,{parent:i,commentPattern:S,shown:_,autoFocus:y,onClose:this.handleCommentsHide})]})},n}(l.Component);we.propTypes={preset:V().oneOf(Object.values(se.PG))},we.defaultProps={preset:se.PG.default},we.Cover=function(e){var t=e.url,n=e.cover,o=e.title;return(0,s.tZ)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:(0,s.tZ)("img",{className:"EBookItem-image",style:{width:ne.Z.isMobileEntry?"60px":"78px",height:ne.Z.isMobileEntry?"80px":"104px"},src:(0,fe.imgUrl)(n,"100w"),srcSet:"".concat((0,fe.imgUrl)(n,"xld")," 2x"),alt:o})})};var Re,Ne=(0,K.a)((function(e){var t=e.trackCardShow;return{module:"EBookItem",trackCardShow:void 0===t||t}}))(we),Oe=n(96347),De=n.n(Oe),Be=n(42116),Pe=n(3505),ke=n(91855),xe=n(74550),Le=n(87655),Ue=(0,Le.Z)((function(e){var t=e.hide,n=e.stickyBottom,o=e.stickyContainer,r=e.contentType,i=e.contentId,a=e.zaContentType,c=e.children,u=e.onPositionStatusChange,l=e.authRequired,d=e.useProvider;if(t)return null;var p=void 0===d||d?(0,s.tZ)(xe.Rj,{loginCheck:l([function(){return!0},function(){return!1}]),contentType:r,contentId:i,zaContentType:a,children:c}):c;return n?(0,s.tZ)(ke.Z,{bottom:!0,container:o,onPositionStatusChange:u,children:p}):p})),Fe=n(5880),Me=function(e){var t=e.defaultVoteUpCount,n=e.defaultStatus,o=e.onChange,r=e.disabled,i=(0,xe.Rv)(t||0,n,o),a=i.voteUpCount,c=i.isVotedUp,u=i.isVotedDown,l=i.voteUp,d=i.voteDown,p=i.cancel,h=(0,x.Z)((function(e){switch(e){case"up":return l();case"down":return d();default:return p()}}));return(0,s.tZ)(Fe.Z,{count:a,voting:c?1:u?-1:0,onVote:h,isOwner:r})},Ge=n(85946),ze=(0,Le.Z)((function(e){var t=e.isLiked,n=e.onClick,r=e.showIcon,a=void 0===r||r,c=e.authRequired,u=(e.currentUser,e.isLogin,(0,i.Z)(e,["isLiked","onClick","showIcon","authRequired","currentUser","isLogin"])),l=(0,x.Z)((function(){return c((function(){return n(!t)}))()}));return(0,s.tZ)(Y.ZP,(0,o.Z)({preset:"plain",onClick:l,icon:a?Ge.ZP:null,label:t?"取消喜欢":"喜欢","aria-live":"polite"},u))})),He=function(e){var t=e.currentIsLiked,n=e.onClick,a=(0,i.Z)(e,["currentIsLiked","onClick"]),c=(0,xe.Tq)({currentIsLiked:t}),u=c.isLiked,l=c.like,d=c.unLike;return(0,s.tZ)(ze,(0,r.Z)((0,o.Z)({},a),{isLiked:u,onClick:function(e){e?l():d(),null==n||n(e)}}))},qe=n(74792),Ve=n(58168),Xe=n(34440),We=n(30942);!function(e){e.Vote="vote",e.Comment="comment",e.Like="like",e.Favlist="favlist",e.Collect="collect",e.Thank="thank",e.Share="share",e.Unknown="unknown"}(Re||(Re={}));var Ke=Re,je=function(e){return{componentList:e.componentList.map((function(e,t){var n=e.name,o=e.component;return(0,l.isValidElement)(o)?{name:n,component:(0,l.cloneElement)(o,{key:o.key||n===Ke.Unknown?n+t:n})}:{name:n,component:o}}))}},Ye=function(e){var t=e.className,n=e.renderChildren,o=e.compatibleRenderActionButtons,r=e.middlewares,i=void 0===r?[]:r,a=(0,qe.qC)().blockStrategies,u=(0,We.Z)([(0,We.m)(a),je].concat((0,c.Z)(i)),o||Xe.Z);return(0,s.tZ)(se.eX,{className:t,css:function(e){return{display:"flex",alignItems:"center",padding:"10px 16px",margin:"0 -16px -10px",color:e.colors.GBK04A,background:e.colors.GBK99A,clear:"both","&.is-fixed":{margin:0,boxShadow:"0 -1px 3px ".concat((0,Ve.a)(e.colors.GBK02A).alpha(.1))},"& > *":{flexShrink:0},"& > .AnnotationTag":{whiteSpace:"nowrap"}}},children:u({componentList:(null==n?void 0:n(Ke))||[]})})},Qe=n(5700),Je=n(4244),$e=n(40198),et={"-1":xe.Ad.VOTED_DOWN,0:xe.Ad.NEUTRAL,1:xe.Ad.VOTED_UP,2:xe.Ad.VOTED_DOWN},tt=function(e){return et[e]||xe.Ad.NEUTRAL},nt=n(436),ot=function(e){var t=e.commentsShown,n=void 0!==t&&t,o=e.onCommentButtonClick,r=void 0===o?P():o,i=e.eduSection,c=e.author,u=e.renderOptions,d=i.commentCount,p=i.isLiked,h=i.id,f=i.voting,m=i.voteCount,v=i.title,Z=i.type,g=i.routeUrl,E=(0,$e.xw)(c),T=(0,O.dD)(),C=(0,a.Z)((0,l.useState)(!1),2),A=C[0],_=C[1],y=(0,l.useCallback)((function(){_(!0)}),[]),S=(0,l.useCallback)((function(){_(!1)}),[]),I=(0,N.useDispatch)(),b=(0,x.Z)((function(e){I((0,nt.jY)(h,e))})),w=(0,x.Z)((function(e,t){I((0,nt.Qm)(h,e,t))}));return(0,s.BX)(s.HY,{children:[(0,s.tZ)(Ye,{renderChildren:function(e){return[{name:e.Vote,component:(0,s.tZ)(Me,{defaultStatus:tt(f),defaultVoteUpCount:m,onChange:w})},{name:e.Comment,component:(0,s.tZ)(ye.Z,{onClick:r,commentsShown:n,count:d,positionStatus:"normal"})},{name:e.Share,component:(0,s.tZ)(le.Z,{id:h,type:Z,url:g,title:v,authorName:c.name,css:{marginLeft:"24px"}})},{name:e.Favlist,component:(0,s.tZ)(Je.Z,{onClick:y,label:"收藏",showIcon:!T},"favlist")},{name:e.Like,component:(0,s.tZ)(He,{currentIsLiked:Boolean(p),css:{marginLeft:"24px"},onClick:b})},{name:e.Unknown,component:E?null:u()}]}}),(0,s.tZ)(Qe.E,{id:h,type:"edu_section",shown:A,onClose:S,zaEnabled:!0})]})};ot.defaultProps={renderOptions:function(){return null}};var rt=ot,it=n(24076),at=n(74264),ct=n(5150),st=function(e){var t,n;return(null==e||null===(t=e.thumbnailExtraInfo)||void 0===t?void 0:t.videoId)||(null==e||null===(n=e.video)||void 0===n?void 0:n.videoId)},ut=n(53466),lt=n(11116),dt=function(e){var t=e.className,n=e.imgSrc,r=e.href,i=e.title,a=e.children,c=e.imgStyle,u=void 0===c?{}:c,l=e.zaBlockText,d=void 0===l?"":l;return(0,s.tZ)(it.pl,{href:r,shouldTrackShow:!0,zaType:"Card",zaAction:"OpenUrl",view:{elementLocation:{block:{blockText:d}}},extra:{link:{url:r}},target:"_blank",children:(0,s.BX)(R.Flex,{height:"72px",className:t,bg:"GBK10A",p:"0 20px 0 16px",alignItems:"center",justifyContent:"space-between",children:[(0,s.BX)(R.Flex,{children:[n&&(0,s.tZ)(R.Image,{mr:"16px",src:n,css:(0,o.Z)({width:"64px",height:"40px",borderRadius:"4px",objectFit:"cover"},u)}),(0,s.BX)(R.Box,{children:[(0,s.tZ)(R.Text,{fontWeight:500,fontSize:"15px",lineHeight:"18px",mb:"4px",color:"GBK02A",maxWidth:"400px",css:(0,lt.S)(1),children:i}),(0,s.tZ)(R.Text,{fontSize:"13px",lineHeight:"18px",color:"GBK06A",children:a})]})]}),(0,s.tZ)(ut.ZP,{fill:"#999999"})]})})},pt=function(e){var t=e.eduSection,n=t.routeUrl,o=t.playCount,r=t.courseNum,i=t.courseTitle,a=t.courseImageInfo,c=(void 0===a?{}:a).url,u=void 0===c?"":c;return(0,s.BX)(dt,{imgSrc:u,href:n,title:"来自视频课：".concat(i),zaBlockText:"视频课卡片",children:[r?"共 ".concat(r," 集"):""," ",r&&o?"·":""," ",o?"".concat((0,ee.Zh)(o),"次学习"):""]})},ht=function(e){var t=e.eduSection,n=void 0===t?{}:t,o=e.author,r=e.expanded,i=n.title,a=n.routeUrl,c=n.id,u=n.attachedInfoBytes,l=st(n);return(0,s.BX)(se.ZP,{className:"EduSectionItem",data:n,title:(0,s.tZ)(s.HY,{children:(0,s.tZ)(it._o,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:(0,s.tZ)("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:i})})}),link:a,lastreadTouchable:!0,"data-zop":JSON.stringify({authorName:null==o?void 0:o.name,itemId:c,title:i,type:"edu_section"}),children:[(0,s.BX)(R.Box,{my:"16px",children:[(0,s.tZ)("div",{className:"EduSectionItem-video",css:{margin:"0px"},children:(0,s.tZ)(ct.Z,{videoId:l,itemId:c,itemType:"edu_section",zaProps:{type:"EduSection",token:n.id,attachedInfo:u}})}),r&&(0,s.tZ)(pt,{eduSection:n})]}),r&&(0,s.tZ)(at.Z,{preset:"plain",author:o,userLinkV2:!0},"authorInfo")]})},ft=function(e){var t=e.eduSection,n=e.renderContent,o=e.renderActions,r=t.id;return(0,s.BX)(qe.xM,{data:t,children:[null==n?void 0:n(),(0,s.tZ)(Ue,{contentId:r,contentType:"edu_section",children:null==o?void 0:o(Ye)})]})};function mt(e){var t=e.eduSection,n=e.eduSection,i=n.id,c=n.description,u=void 0===c?"":c,d=n.author,p=e.onToggleExpand,h=e.renderOptions,f=e.truncateDisabled,m=e.limit,v=(0,N.useSelector)((function(e){return De()(d)?e.entities.users[d]:d})),Z=(0,a.Z)((0,l.useState)(!1),2),g=Z[0],E=Z[1],T=(0,a.Z)((0,l.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),2),C=T[0],A=T[1],_=function(e){E(e),p&&p(e)};return(0,s.BX)("div",{children:[(0,s.tZ)(ft,{eduSection:t,renderContent:function(){return(0,s.tZ)(ht,{eduSection:t,author:v,expanded:g})},renderActions:function(){return(0,s.tZ)(Pe.Z,(0,r.Z)((0,o.Z)({excerpt:(0,Be.NJ)(u,200),html:u,cover:null,hasVideo:!1},m?{limit:m}:{}),{truncateDisabled:f,allowCollapseWithEmptyExcerpt:!0,expanded:g,onToggleExpend:_,data:(0,r.Z)((0,o.Z)({},t),{id:i}),children:(0,s.tZ)(rt,{className:"EduSectionItem-toolbar",eduSection:t,author:v,commentsShown:C.commentsShown,onCommentButtonClick:function(e,t){return A(t)},renderOptions:h})}))}}),(0,s.tZ)(Se.Z,{className:"EduSectionItem-comment",containerClassName:"EduSectionItem-commentContainer",parent:t,shown:C.commentsShown,commentPattern:C.commentPattern,autoFocus:C.autoFocus,onClose:function(){return A((0,r.Z)((0,o.Z)({},C),{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})}mt.defaultProps={renderOptions:function(){return[null]},truncateDisabled:!0};var vt=(0,p.compose)((0,ae.Ib)((function(e){var t=e.eduSection;return{content:{type:"EduSection",id:String(t.id)},extra:{mediaInfo:{videoInfo:{videoId:st(t)}}}}})))(mt),Zt=n(86488),gt=function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){var e;return(0,L.Z)(this,n),(e=t.apply(this,arguments)).state={commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.preset,i=t.favlist,a=t.favlist,c=a.id,u=a.type,l=a.title,d=a.updatedTime,p=a.answerCount,h=a.followerCount,f=a.isFollowing,m=a.isPublic,v=a.creator,Z=void 0===v?{}:v,g=a.commentCount,E=t.status,T=t.action,C=t.lastreadTouchable,A=t.zaInfos,_=A.follow,y=A.options,S=t.renderOptions,I=this.state,b=I.commentsShown,w=I.commentsAutoFocus,N=I.commentPattern,O="/collection/".concat(c),D=(0,s.tZ)("a",{href:O,target:"_blank",rel:"noopener noreferrer",children:l});if(n===se.PG.plain)return(0,s.tZ)(se.ZP,{data:i,link:O,title:D});var B={id:c,type:u};return n===se.PG.default?(0,s.tZ)(se.ZP,{data:i,link:O,title:(0,s.BX)(R.Flex,{alignItems:"center",children:[D,!m&&(0,s.tZ)(R.Text,{color:"GBL05A",ml:".3em",children:(0,s.tZ)(Zt.P,{center:!0,size:18})})]}),meta:E||(0,s.BX)(se.qb,{children:["".concat((0,te.tC)(d)," 更新"),"".concat((0,ee.uf)(p)," 条内容"),"".concat((0,ee.uf)(h)," 人关注")]}),extra:T}):(0,s.BX)(se.ZP,{data:i,link:O,onRef:function(t){e.contentItem=t},title:D,lastreadTouchable:C,children:[ne.Z.isMobileEntry?(0,s.BX)("div",{className:"FavlistItem-cells",children:[(0,s.tZ)("span",{children:Boolean(h)&&"".concat((0,ee.uf)(h)," 关注")}),(0,s.BX)("span",{children:[(0,te.tC)(d),"更新"]})]}):(0,s.BX)(se.n1,{children:[(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"关注数："}),(0,ee.uf)(h)]}),(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"最后更新于："}),(0,te.tC)(d)]}),(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"作者："}),(0,s.tZ)(be.Z,{user:Z})]})]},"favlist-item-cells"),(0,s.BX)(se.eX,{children:[(0,s.tZ)(ue.Z,(0,r.Z)((0,o.Z)({},B),{isFollowing:f,zaId:_})),(0,s.tZ)(ye.Z,{onClick:this.handleCommentsShown,commentsShown:b,count:g}),(0,s.tZ)(le.Z,(0,r.Z)((0,o.Z)({},B),{title:l,authorName:Z&&Z.name})),S&&S((function(){return e.contentItem}),y)]},"favlist-item-actions"),(0,s.tZ)(Se.Z,{parent:i,commentPattern:N,shown:b,autoFocus:w,onClose:this.handleCommentsHide})]})},n}(l.Component);gt.propTypes={preset:V().oneOf(Object.values(se.PG)),zaInfos:V().shape({follow:V().number,options:V().number}),renderOptions:V().func},gt.defaultProps={preset:se.PG.default,zaInfos:{}};var Et=(0,K.a)((function(e){var t=e.favlist,n=e.trackCardShow,o=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:o}}))(gt),Tt=function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){return(0,L.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this,t=this.props,n=t.preset,i=t.liveCourse,a=t.liveCourse,c=a.id,u=a.type,l=a.subject,d=a.courseMemberCount,p=a.liveCount,h=a.price,f=a.promotionPrice,m=a.headImageMobile,v=a.likedNum,Z=a.isLiked,g=a.description,E=a.speakers,T=void 0===E?[]:E,C=t.lastreadTouchable,A=t.renderOptions,_=t.zaIds.options,y="/lives/courses/".concat(c);if(n!==se.PG.interactive)return(0,s.tZ)(se.ZP,{data:i,link:y,title:(0,s.tZ)("a",{href:y,target:"_blank",rel:"noopener noreferrer",children:l})});var S=Boolean(T.length)&&"".concat(T[0].member.name).concat(T.length>1?"等":"","的私家课 · ").concat(p," 节课"),I={id:c,type:u};return(0,s.BX)("div",{className:"LiveCourseItem",children:[m&&(0,s.tZ)("a",{className:"LiveCourseItem-cover",href:y,target:"_blank",rel:"noopener noreferrer",children:(0,s.tZ)("img",{src:(0,fe.imgUrl)(m,"640w"),srcSet:"".concat((0,fe.imgUrl)(m,"r")," 2x"),alt:l})}),(0,s.tZ)(se.ZP,{data:i,link:y,title:(0,s.tZ)("a",{href:y,target:"_blank",rel:"noopener noreferrer",children:l}),lastreadTouchable:C,children:(0,s.BX)(Pe.Z,{excerpt:"",limit:60,limitWithImage:60,html:ne.Z.isMobileEntry?S:g||"",data:i,extra:!ne.Z.isMobileEntry&&(0,s.BX)(se.n1,{children:[(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"参与人数："}),(0,ee.uf)(d)]}),(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"课程节数："}),(0,ee.uf)(p)]}),(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"特价："}),"number"==typeof f?(0,s.BX)("span",{className:"LiveItem-price",children:[_e(f),(0,s.tZ)("del",{children:_e(h)})]}):_e(h)]})]}),children:[(0,s.tZ)(Ie.Z,(0,r.Z)((0,o.Z)({},I),{liked:Z,count:v,icon:"thank"})),(0,s.tZ)(le.Z,(0,r.Z)((0,o.Z)({},I),{url:y,title:l})),A&&A((function(){return e.contentItem}),_)]})})]})},n}(l.Component);Tt.propTypes={preset:V().oneOf(Object.values(se.PG)),renderOptions:V().func,zaIds:V().object},Tt.defaultProps={zaIds:{}};var Ct=(0,K.a)((function(e){var t=e.liveCourse,n=e.trackCardShow,o=void 0===n||n;return{module:"LiveCourseItem",card:{content:{type:"LiveCourse",id:t.id}},trackCardShow:o}}))(Tt),At=n(61963),_t=n(78209),yt=n(72864),St=function(e){var t=e.className,n=e.children;return(0,s.tZ)("div",{className:H()(t,"LiveAvatar-column"),children:n})},It=function(e){var t=e.className,n=e.speakers,a=e.size,c=e.alt;if(!n||!n.length)return null;var u=n.map((function(e){return e.avatarUrl})).slice(0,4),d=function(e){var t=e.className,n=e.src,a=(0,i.Z)(e,["className","src"]);return(0,s.tZ)(yt.qE,(0,r.Z)((0,o.Z)({url:n},a),{className:H()("LiveAvatar-img",t)}))},p=function(e){return(0,s.tZ)(d,(0,r.Z)((0,o.Z)({},e),{size:a}))},h=function(e){var t=e.className,n=(0,i.Z)(e,["className"]);return(0,s.tZ)(St,{children:(0,s.tZ)(d,(0,r.Z)((0,o.Z)({},n),{className:H()(t,"alignCenter"),size:a}))})},f=function(e){return(0,s.tZ)(d,(0,r.Z)((0,o.Z)({},e),{size:a/2-1}))},m=function(e){var t=e.imageUrls,n=(0,i.Z)(e,["imageUrls"]);return(0,s.tZ)(St,{children:t.map((function(e,t){return(0,l.createElement)(f,(0,r.Z)((0,o.Z)({},n),{key:t,src:e}))}))})},v=[];switch(u.length){case 1:v=(0,s.tZ)(p,{src:u[0],alt:c});break;case 2:v=u.map((function(e,t){return(0,s.tZ)(h,{src:e,alt:c},t)}));break;case 3:v=[(0,s.tZ)(h,{src:u[0],alt:c},"1"),(0,s.tZ)(m,{imageUrls:u.slice(1,3),alt:c},"2")];break;default:v=[u.slice(0,2),u.slice(2)].map((function(e,t){return(0,s.tZ)(m,{imageUrls:e,alt:c},t)}))}return(0,s.tZ)("div",{className:H()(t,"LiveAvatar-wrapper"),style:{width:a,height:a},children:v})},bt=n(96606),wt=n(67694),Rt=function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){return(0,L.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this,t=this.props,n=t.preset,i=t.live,a=t.live,c=a.id,u=a.type,l=a.subject,d=a.speaker.member,p=a.startsAt,h=a.price,f=a.promotionPrice,m=a.description,v=void 0===m?"":m,Z=a.image,g=a.isLiked,E=a.likedNum,T=a.seats,C=t.lastreadTouchable,A=t.zaIds.options,_=t.renderOptions,y=t.isSticky,S=t.handleToggleSticky,I=t.currentUser,b=I&&I.urlToken===d.urlToken,w="function"==typeof S,R=(T||{}).taken,N="/lives/".concat(c);if(n!==se.PG.interactive)return(0,s.tZ)(se.ZP,{data:i,link:N,title:(0,s.BX)(s.HY,{children:[w&&y&&(0,s.tZ)(bt.Z,{}),(0,s.tZ)("a",{href:N,target:"_blank",rel:"noopener noreferrer",children:l})]}),children:!ne.Z.isMobileEntry&&w&&b&&(0,wt.U)(I)&&(0,s.tZ)(Y.ZP,{preset:"plain",onClick:S,icon:y?At.TX:_t.rh,label:y?"取消置顶":"置顶"})});var O=(0,s.tZ)(It,{className:"LiveItem-avatar",speakers:[d],size:60}),D={id:c,type:u};return(0,s.BX)("div",{className:"LiveItem",children:[!ne.Z.isMobileEntry&&Z&&(0,s.tZ)("a",{className:"LiveItem-cover",href:N,target:"_blank",rel:"noopener noreferrer",children:(0,s.tZ)("img",{src:(0,fe.imgUrl)(Z,"640w"),srcSet:"".concat((0,fe.imgUrl)(Z,"r")," 2x"),alt:l})}),(0,s.tZ)(se.ZP,{image:ne.Z.isMobileEntry&&O,data:i,link:N,onRef:function(t){e.contentItem=t},title:(0,s.BX)("span",{children:[d.name,"：",(0,s.tZ)("a",{href:N,target:"_blank",rel:"noopener noreferrer",children:l})]}),meta:ne.Z.isMobileEntry&&(0,s.BX)("span",{children:[(0,ee.uf)(R)," 参与"]}),lastreadTouchable:C,children:ne.Z.isMobileEntry?(0,s.tZ)(Ie.Z,(0,r.Z)((0,o.Z)({},D),{liked:g,count:E,icon:"thank"})):(0,s.BX)(Pe.Z,{className:"LiveItem-description",excerpt:(0,Be.$G)(v,60),limit:60,limitWithImage:60,html:v,data:i,extra:(0,s.BX)(se.n1,{children:[Boolean(R)&&(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"参与人数："}),R]}),(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"时间："}),(0,te.P5)(p)]}),(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"特价："}),"number"==typeof f?(0,s.BX)("span",{className:"LiveItem-price",children:[_e(f),(0,s.tZ)("del",{children:_e(h)})]}):_e(h)]})]}),children:[(0,s.tZ)(Ie.Z,(0,r.Z)((0,o.Z)({},D),{liked:g,count:E,icon:"thank"})),(0,s.tZ)(le.Z,(0,r.Z)((0,o.Z)({},D),{title:l,authorName:d&&d.name,url:N})),_&&_((function(){return e.contentItem}),A)]})})]})},n}(l.Component);Rt.propTypes={preset:V().oneOf(Object.values(se.PG)),renderOptions:V().func,zaIds:V().object},Rt.defaultProps={zaIds:{}};var Nt=(0,p.compose)(re.Z,(0,K.a)((function(e){var t=e.live,n=e.trackCardShow,i=void 0===n||n,a=e.zaInfos,c=(void 0===a?{}:a).cardShow;return(0,r.Z)((0,o.Z)({module:"LiveItem",card:{content:{type:"Live",id:t.id,author_member_hash_id:t.speaker.member.id}}},c&&{view:{id:c}}),{trackCardShow:i})})))(Rt),Ot=n(16514),Dt=n(62198),Bt=n(83173),Pt=n(71206),kt=n(67184),xt=n(62372),Lt={placeholders:{img:" [图片] "}},Ut=function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){var e;return(0,L.Z)(this,n),(e=t.apply(this,arguments)).state={collapsed:!0,commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleOpenComment=function(t){var n=t.target.parentNode.className.includes("is-fixed")?"fixed":"bottom",o=e.state.modalShown,r=!("bottom"===n&&o);e.setState({modalShown:r,commentPattern:n})},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e.handlePackupButton=function(){e.setState({modalShown:!1}),e.CommentsButtonEl.scrollIntoView({block:"start",behavior:"smooth"}),window.scrollTo(0,window.pageYOffset-window.screen.height/2)},e.handleContentToggleExpand=function(t){e.setState({collapsed:!t})},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.preset,i=t.question,a=t.question,c=a.id,u=a.title,l=a.type,d=a.created,p=a.answerCount,h=a.followerCount,f=a.isMuted,m=a.questionType,v=a.detail,Z=a.commentCount,g=a.adminClosedComment,E=a.relationship,T=void 0===E?{}:E,C=a.annotationDetail,A=t.action,_=t.isConcise,y=t.isAnonymousFollowing,S=t.lastreadTouchable,I=t.zaInfos,b=I.title,w=I.expand,R=I.follow,N=I.options,O=t.renderOptions,D=t.blockStrategies,B=void 0===D?{}:D,P=B.isBlockingFollowQuestion,k=B.isBlockingComment,x=B.isBlockingShare,L=this.state,U=L.commentsShown,F=L.commentsAutoFocus,M=L.commentPattern,G=L.collapsed,z={id:c,type:l},H="/question/".concat(c);return(0,s.BX)(se.ZP,{data:i,link:H,lastreadTouchable:S,onRef:function(t){e.contentItem=t},title:(0,s.BX)("div",{className:"QuestionItem-title",children:[(0,s.tZ)(it._o,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:(0,s.tZ)("a",(0,r.Z)((0,o.Z)({href:H,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-name":"Title"},b&&{"data-za-detail-view-id":b}),{children:u}))}),y&&(0,s.tZ)(Dt._,{className:"QuestionItem-icon"}),"commercial"===m&&f&&(0,s.tZ)("span",{className:"QuestionItem-muteStatus",children:"待推广"})]}),children:[!G&&C&&(0,s.tZ)(Pt.Z,{annotationDetail:C}),n===se.PG.default&&(0,s.BX)(se.qb,{children:[(0,te.KZ)(d),"".concat((0,ee.uf)(p)," 个回答"),"".concat((0,ee.uf)(h)," 个关注")]}),n===se.PG.interactive&&(0,s.BX)(Pe.Z,{data:i,html:v||"",excerpt:i.excerpt,limit:60,limitWithImage:60,truncateHTMLOptions:Lt,onToggleExpend:this.handleContentToggleExpand,zaIds:{expand:w},children:[!P&&(A||(0,s.tZ)(ue.Z,(0,r.Z)((0,o.Z)({},z),{isFollowing:(T&&{}.hasOwnProperty.call(T,"isFollowing")?T:i).isFollowing,zaId:R}))),ne.Z.isMobileEntry&&_?(0,s.BX)("div",{className:"QuestionItem-concise",children:[Boolean(p)&&(0,s.BX)("span",{children:[(0,ee.uf)(p)," 个回答"]}),Boolean(p&&h)&&(0,s.tZ)("span",{className:"QuestionItem-mobileDot"}),Boolean(h)&&(0,s.BX)("span",{children:[(0,ee.uf)(h)," 关注"]})]}):[!k&&(0,s.tZ)(ye.Z,{onClick:this.handleCommentsShown,commentsShown:U,commentClosed:g,count:Z},"comment"),!x&&(0,s.tZ)(le.Z,(0,r.Z)((0,o.Z)({},z),{title:u,href:H}),"share"),Boolean(p)&&(0,s.BX)(xt.Z,{preset:"plain",to:H,target:"_blank",children:[(0,s.tZ)(Bt.C,{style:{marginRight:"4px"},center:!0,text:!0}),(0,ee.uf)(p)," 个回答"]},"linkbutton"),O&&O((function(){return e.contentItem}),N),G&&C&&(0,s.tZ)(kt.Z,{annotationDetail:C})]]}),(0,s.tZ)(Se.Z,{parent:i,commentPattern:M,shown:U,autoFocus:F,onClose:this.handleCommentsHide})]})},n}(l.Component);Ut.propTypes={preset:V().oneOf(Object.keys(se.PG)).isRequired,isAnonymousFollowing:V().bool,contentShown:V().bool,zaInfos:V().shape({title:V().number,expand:V().number,follow:V().number,options:V().number}),renderOptions:V().func},Ut.defaultProps={preset:se.PG.default,zaInfos:{}};var Ft=(0,p.compose)((0,ae.Ib)((function(e){var t=e.question;return{content:{type:"Question",token:String(t.id)}}})),(0,K.a)((function(e){var t=e.question,n=e.trackCardShow,o=void 0===n||n;return{module:"QuestionItem",card:{content:{type:"Question",token:String(t.id),item_num:t.answerCount,comment_num:t.commentCount,follower_num:t.followerCount,publish_timestamp:1e3*t.created}},trackCardShow:o}})),(0,qe.$_)({dataPath:"question"}),qe.OW)(Ut),Mt=n(11331),Gt=n(17098),zt=n(36933),Ht=n(52028),qt=n(2886),Vt=n(62279);var Xt=function(e){var t=e.userKey,n=e.isLast,a=(0,i.Z)(e,["userKey","isLast"]),c=(0,N.useSelector)((function(e){return e.entities.users[t]}));if(!c)return null;var u=c.urlToken,l=c.name,d=c.isOrg;return(0,s.BX)(Ht.Link,(0,r.Z)((0,o.Z)({to:"/".concat(d?"org":"people","/").concat(u)},a),{children:[l,!n&&"、"]}))},Wt=function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){var e;return(0,L.Z)(this,n),(e=t.apply(this,arguments)).load=function(){var t=e.props,n=t.dispatch,o=t.id;n((0,Vt.AO)(o))},e.track=function(){var t=e.props.roundtable;e.hoverCardElement&&t&&(X.Z.setModule(e.hoverCardElement,{module:"RoundtableItem"},{card:{content:{type:"Roundtable",token:t.id,item_num:t.questionsCount,follower_num:t.followers,publish_timestamp:1e3*t.stopTime}}}),X.Z.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.toggler,a=t.roundtable,c=t.id,u=t.isLoading,l=t.onRef,d=(0,i.Z)(t,["toggler","roundtable","id","isLoading","onRef"]),p=a||{},h=p.name,f=p.type,m=p.description,v=p.guests,Z=void 0===v?[]:v,g=p.activitiesCount,E=p.questionsCount,T=p.followers,C=p.logo,A=p.stopTime,_=p.isFollowing,y=Z.length,S="/roundtable/".concat(c);return(0,s.BX)(Gt.Z,(0,r.Z)((0,o.Z)({toggler:n,preventCloseOnTarget:!0,isLoading:u,onOpen:this.handleOpen,size:"large"},d),{ref:function(t){l&&"function"==typeof l&&l(t),e.hoverCardElement=t},children:[(0,s.tZ)(Gt.O,{title:(0,s.tZ)("a",{target:"_blank",href:"/roundtable/".concat(c),rel:"noopener noreferrer",children:h}),avatarUrl:C,attrInfo:(0,s.BX)("div",{children:[(0,s.tZ)(Mt.x8,{text:!0,center:!0})," ",(0,te.rL)(A)]})}),m&&(0,s.tZ)("div",{children:(0,s.tZ)("div",{className:"HoverCard-description",children:m})}),(0,s.BX)("div",{children:[(0,s.tZ)(zt.H,{text:!0,center:!0})," 组织机构",(0,s.tZ)("span",{className:"HoverCard-separate",children:" | "}),(0,s.tZ)("a",{href:"/topic/19793502",children:"圆桌"})]}),y>0&&(0,s.BX)("div",{children:["嘉宾",(0,s.tZ)("span",{className:"HoverCard-separate",children:" | "}),Z.map((function(e,t){var n=e.member;return(0,s.tZ)(Xt,{userKey:n,isLast:t===y-1},t)}))]}),(0,s.BX)("div",{children:[(0,s.BX)(qt.Z,{children:[(0,s.tZ)(qt.Z.Item,{tag:xt.Z,preset:"plain",a:!0,to:S,name:"动态",value:g}),(0,s.tZ)(qt.Z.Item,{tag:xt.Z,preset:"plain",a:!0,to:"".concat(S,"/question"),name:"问题",value:E}),(0,s.tZ)(qt.Z.Item,{tag:xt.Z,preset:"plain",a:!0,to:"".concat(S,"/followers"),name:"关注者",value:T})]}),(0,s.tZ)("div",{className:"HoverCard-buttons",children:(0,s.tZ)(ue.Z,{id:c,type:f,isFollowing:_,preset:"primary"})})]})]}))},n}(l.Component),Kt=(0,N.connect)((function(e,t){var n=t.id,o=e.entities.roundtables,r=e.loading.local;return{roundtable:o[n],isLoading:Boolean(r["roundtable/".concat(n)])}}))(Wt),jt=function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){return(0,L.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.roundtable,n=t.name,a=t.id,c=e.noHoverCard,u=e.style,l=e.className,d=e.children,p=(0,i.Z)(e,["roundtable","noHoverCard","style","className","children"]),h=d||n;return c||(h=(0,s.tZ)(Kt,{toggler:h,id:a})),(0,s.tZ)("a",(0,r.Z)((0,o.Z)({style:u,className:H()("RoundTableLink",l),href:"/roundtable/".concat(a)},p),{children:h}))},n}(l.Component);jt.propTypes={roundtable:V().object.isRequired,noHoverCard:V().bool,style:V().object,className:V().string,children:V().node},jt.defaultProps={noHoverCard:!1};var Yt=jt;var Qt=function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){var e;return(0,L.Z)(this,n),(e=t.apply(this,arguments)).state={commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.preset,i=t.roundtable,a=t.lastreadTouchable,c=t.zaInfos.follow,u=i||{},l=u.id,d=u.logo,p=u.type,h=u.guests,f=void 0===h?[]:h,m=u.stopTime,v=u.startTime,Z=u.followers,g=u.commentCount,E=u.isFollowing,T=this.state,C=T.commentsShown,A=T.commentsAutoFocus,_=T.commentPattern,y=(0,s.tZ)(Yt,{roundtable:i,target:"_blank"}),S="/roundtable/".concat(l);if(n!==se.PG.interactive)return(0,s.tZ)(se.ZP,{data:i,link:S,title:y});var I,b,w,R={id:l,type:p};return(0,s.BX)(se.ZP,{data:i,link:S,onRef:function(t){e.contentItem=t},title:(0,s.BX)("div",{className:"RoundtableItem-title",children:[y,(0,s.BX)("div",{className:"RoundtableItem-badge",children:[(0,s.tZ)(Mt.x8,{text:!0,center:!0})," ",(I=v,b=m,w=Date.now()/1e3,w>b?"已结束":w<I?"".concat((0,te.rL)(I)," 开始"):"".concat((0,te.rL)(b)," 结束"))]})]}),image:(0,s.tZ)(yt.qE,{url:d,size:60}),meta:(0,s.BX)("div",{className:"RoundtableItem-meta",children:[(0,ee.uf)(Z)," 人关注",!ne.Z.isMobileEntry&&"了该圆桌"]}),lastreadTouchable:a,children:[!ne.Z.isMobileEntry&&f.length>0&&(0,s.tZ)(se.n1,{children:(0,s.BX)("div",{children:[(0,s.tZ)("span",{children:"嘉宾："}),f.map((function(e,t){return(0,s.BX)("span",{children:[(0,s.tZ)(be.Z,{user:e}),t<f.length-1&&"、"]},t)}))]})}),(0,s.BX)(se.eX,{children:[(0,s.tZ)(ue.Z,(0,r.Z)((0,o.Z)({},R),{isFollowing:E,zaId:c})),(0,s.tZ)(ye.Z,{onClick:this.handleCommentsShown,commentsShown:C,count:g}),(0,s.tZ)(le.Z,(0,r.Z)((0,o.Z)({},R),{title:i.name}))]}),(0,s.tZ)(Se.Z,{parent:i,commentPattern:_,shown:C,autoFocus:A,onClose:this.handleCommentsHide})]})},n}(l.Component);Qt.propTypes={preset:V().oneOf(Object.values(se.PG)),zaInfos:V().shape({follow:V().number,options:V().number}),renderOptions:V().func},Qt.defaultProps={preset:se.PG.default,zaInfos:{}};var Jt=n(5217),$t=n(80964),en=n(73195),tn=n(75714);function nn(e){var t=e.target,n=e.target,i=n.id,c=n.attachment.url,u=n.description,d=n.title,p=n.author,h=n.thumbnailExtraInfo,f=n.isReviewing,m=n.isUpdateReviewing,v=e.lastreadTouchable,Z=e.preset,g=void 0===Z?"primary":Z,E=e.onToggleExpand,T=e.renderOptions,C=e.renderActionButtons,A=e.toggleUninterest,_=h||{},y=_.videoId,S=_.url,I=(0,N.useSelector)((function(e){return De()(p)?e.entities.users[p]:p})),b=(0,$e.xw)(I),w=(0,a.Z)((0,l.useState)(!1),2),R=w[0],O=w[1],D=(0,a.Z)((0,l.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),2),B=D[0],P=D[1],k=(0,a.Z)((0,tn.Z)(g,R,I),1)[0];return(0,s.tZ)(qe.xM,{data:t,children:(0,s.BX)(se.ZP,{className:"ZVideoItem",data:t,title:(0,s.tZ)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:d}),link:c,meta:k,lastreadTouchable:v,"data-zop":JSON.stringify({authorName:null==I?void 0:I.name,itemId:i,title:d,type:"zvideo"}),children:[b&&(f||m)&&(0,s.tZ)(en.Z,{}),R&&y&&(0,s.tZ)("div",{className:"ZVideoItem-video",children:(0,s.tZ)(ct.Z,{videoId:y,itemId:i,itemType:"zvideo",zaProps:{token:i}})}),R&&(0,s.tZ)($t.Z,{}),(0,s.tZ)(Pe.Z,{excerpt:(0,Be.NJ)(u),html:u,cover:S,hasVideo:!0,truncateDisabled:!0,allowCollapseWithEmptyExcerpt:!0,expanded:R,onToggleExpend:function(e){O(e),E&&E(e)},children:(0,s.tZ)(Jt.Z,{className:"ZVideoItem-toolbar",zvideo:t,author:I,commentsShown:B.commentsShown,onCommentButtonClick:function(e,t){return P(t)},renderOptions:T,renderActionButtons:C,toggleUninterest:A})}),(0,s.tZ)(Se.Z,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:t,shown:B.commentsShown,commentPattern:B.commentPattern,autoFocus:B.autoFocus,onClose:function(){return P((0,r.Z)((0,o.Z)({},B),{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})})}nn.defaultProps={renderOptions:function(){return[null]}};var on=(0,p.compose)((0,ae.Ib)((function(e){var t,n=e.target;return{content:{type:"Answer",token:String(n.id)},extra:{mediaInfo:{videoInfo:{videoId:null===(t=n.thumbnailExtraInfo)||void 0===t?void 0:t.videoId}}}}})))(nn),rn=n(10044),an=n(51234),cn={expand:2765,title:2812,voteUp:2756,voteDown:2761,toggleComment:2757,share:2758,favlists:2759,thank:2767,options:2760,report:2796,ignore:2821,follow:2797,getCommentAction:function(e){return e?"Expand":"Collapse"}},sn=(oe.BR,function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){return(0,L.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this,t=this.props,n=t.eventcard,o=n.linkTitle,r=n.linkUrl,i=n.title,a=n.eventUrl,c=n.extraInfo,u=n.content,l=n.bannerUrl,d=t.eventcard,p=t.lastreadTouchable,h=t.renderOptions,f=t.zaIds.options;return(0,s.BX)("div",{className:"EventcardItem",children:[l&&(0,s.tZ)("a",{className:"EventcardItem-cover",href:a,target:"_blank",rel:"noopener noreferrer",children:(0,s.tZ)("img",{src:l,srcSet:"".concat(l," 2x"),alt:i})}),(0,s.BX)(se.ZP,{data:d,link:a,onRef:function(t){e.contentItem=t},title:(0,s.tZ)("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:i}),lastreadTouchable:p,children:[(0,s.tZ)("div",{className:"EventcardItem-content",children:u}),(0,s.BX)(se.eX,{children:[Boolean(o)&&(0,s.tZ)(xt.Z,{a:!0,color:"blue",to:r,children:o}),(0,s.tZ)("span",{children:c}),h&&h((function(){return e.contentItem}),f)]})]})]})},n}(l.Component));sn.propTypes={preset:V().oneOf(Object.values(se.PG)),zaIds:V().object,renderOptions:V().func};var un=(0,K.a)((function(e){var t=e.trackCardShow;return{module:"EventItem",trackCardShow:void 0===t||t}}))(sn),ln=n(41933),dn=function(e){var t=e.className;return(0,s.tZ)("span",{className:H()("Bull",t),children:" · "})},pn=n(8512),hn=Object.assign;var fn=function(e){return d().createElement(me.Z,hn({width:"40",height:"40",viewBox:"0 0 40 40"},e),d().createElement("path",{d:"M20 12c6.904 0 12.5 5.596 12.5 12.5S26.904 37 20 37c-6.903 0-12.5-5.596-12.5-12.5S13.097 12 20 12zm0 16.826 3.222 2.061c.76.486 1.218.165 1.016-.72l-.886-3.892 2.867-2.572c.677-.608.494-1.165-.413-1.241l-3.734-.314-1.467-3.693c-.334-.841-.876-.841-1.21 0l-1.467 3.693-3.734.314c-.917.077-1.092.631-.413 1.24l2.867 2.573-.886 3.891c-.202.886.253 1.209 1.016.721L20 28.826zM29.525 3a1 1 0 0 1 .79 1.612l-4.336 5.6a1 1 0 0 1-.79.388h-.446a1 1 0 0 1-.853-.479l-3.792-6.208A.6.6 0 0 1 20.61 3h8.915zm-8.692 6.043a1 1 0 0 1-.83 1.557h-5.468a1 1 0 0 1-.81-.413l-4.06-5.6A1 1 0 0 1 10.476 3h5.772a1 1 0 0 1 .83.443l3.756 5.6z"}))};function mn(e){return"FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"===e?{labelInfo:{foregroundColor:{alpha:1,group:"GYL02A"},backgroundColor:{alpha:.08,group:"GYL02A"},text:"专业",type:"recognition"},extra:{customIcon:fn,customIconClassName:"FeedSource-recognizeIcon"}}:null}var vn=["MEMBER_ANSWER_QUESTION","MEMBER_PUBLISH_EBOOK","MEMBER_CREATE_ARTICLE","MEMBER_ASK_QUESTION","MEMBER_CREATE_PIN","MEMBER_PUBLISH_LIVE_COURSE"],Zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.author.name;return n?"".concat(n,"：").concat(e):e},gn=n(43676),En=/({})/,Tn={people:{Component:be.Z,type:"user"},topic:{Component:gn.Z},column:{Component:ce.Z},roundtable:{Component:Yt}},Cn=function(e){var t=e.actors,n=e.template,i=t.slice(0,5);return(0,s.tZ)(ln.CJKSpace,{children:n.split(En).map((function(e){return"{}"===e?i.map((function(e,t){if(!Tn[e.type])return(0,s.BX)("span",{children:[e.title,t<i.length-1&&"、"]},e.id);var n=Tn[e.type],a=n.Component,c=n.type,u=void 0===c?e.type:c,l=(0,o.Z)((0,m.Z)({},u,e),"people"===e.type&&{noBadge:!0});return(0,s.BX)("span",{children:[(0,s.tZ)(a,(0,r.Z)((0,o.Z)({},l),{children:e.name||e.title})),t<i.length-1&&"、"]},e.id)})):e}))})},An=/{}/,_n=["pin","answer","article"],yn=["FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"],Sn=(0,re.Z)((function(e){var t=e.feed,n=e.currentUser,i=t.actionTextTpl,a=void 0===i?"":i,c=t.createdTime,u=t.actors,d=void 0===u?[]:u,p=t.verb,h=void 0===p?"":p,f=h.includes("MEMBER"),m=(0,l.useMemo)((function(){return f&&1e3*c<=Date.now()&&(0,te.rL)(c)}),[f,c]);if(function(e){return vn.includes(e.verb)}(t)){var v=d[0],Z=a.replace(An,"");return(0,s.tZ)("div",{className:"FeedSource",children:(0,s.BX)("div",{className:"FeedSource-firstline",children:[(0,s.BX)(ln.CJKSpace,{children:[(0,s.tZ)(be.Z,{user:v,noHoverCard:ne.Z.isMobileEntry,badgeProps:{css:{margin:"0 .3em"}},children:v.name}),Z]}),m&&[(0,s.tZ)(dn,{},"bull"),m]]})})}return(0,s.BX)("div",{className:"FeedSource",children:[(0,s.BX)("div",{className:"FeedSource-firstline",children:[(0,s.tZ)(Cn,{actors:d,template:a}),yn.includes(h)&&(0,s.tZ)(pn.Z,(0,r.Z)((0,o.Z)({},mn(h)),{className:"FeedSource-labelIcon"})),m&&[(0,s.tZ)(dn,{},"bull"),m]]}),t.target&&_n.includes(t.target.type)&&(0,s.tZ)(at.Z,{className:"FeedSource-byline",author:t.target.author,preset:"plain",extra:ne.Z.isMobileEntry&&!n})]})})),In=n(40108),bn=n(73571);function wn(e){return e.closest(".TopstoryItem").querySelector(".ContentItem")}var Rn=function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){var e;return(0,L.Z)(this,n),(e=t.apply(this,arguments)).handleToggleUninterest=function(){var t=e.props,n=t.zaIgnoreId,r=t.getContainer,i=e.props,a=i.item,c=a.id,s=a.type,u=a.ad,l=a.isUninterest,d=i.toggleUninterest,p=i.type,h="feed_advert"===s;h&&(0,an.WY)(u.closeTrack);var f=h?wn(e.el):r();return X.Z.trackEvent(f,(0,o.Z)({action:l?"UnIgnore":"Ignore",element:"Button",is_intent:!0},n&&{id:n})),d(c,p)},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.ua,o=t.isVip,r=!ne.Z.isMobileEntry&&(0,s.tZ)(W.$U,{as:j.sN,zaAction:"Ignore",zaType:"Button",className:this.props.itemClassName,onClick:this.handleToggleUninterest,onRef:function(t){e.el=t},children:"不感兴趣"}),i=!ne.Z.isMobileEntry&&(0,s.tZ)(j.sN,{className:"TopstoryItem-menuItem",onClick:this.props.authRequired((function(){})),children:(0,s.tZ)(M.Z,{extra:{ua:n,isVip:o}})});return"feed_advert"===this.props.item.type?(0,s.BX)(j.ZP,{className:"TopstoryItem-rightButton",toggler:(0,s.BX)(Y.ZP,{onRef:function(t){e.el=t},className:"TopstoryItem-advertButton",preset:"plain",children:["广告",(0,s.tZ)(In.f,{center:!0})]}),children:[(0,s.tZ)(j.sN,{className:"TopstoryItem-menuItem",onClick:this.handleToggleUninterest,children:"不感兴趣"}),(0,s.tZ)(j.sN,{className:"TopstoryItem-menuItem",tag:"a",target:"_blank",href:"/promotion-intro",children:"知乎广告介绍"}),i]}):(0,s.BX)(l.Fragment,{children:[r,i]})},n}(l.Component);Rn.propTypes={zaIgnoreId:V().number,getContainer:V().func};var Nn=(0,N.connect)(null,{toggleUninterest:bn.L$})(Rn),On=n(91159),Dn=n(14577);var Bn=(0,p.compose)((0,ae.Ib)((function(e){var t=e.question;return{content:{type:"Question",token:String(t.id)},block:"写回答卡片"}})))((function(e){var t=e.question,n=e.lastreadTouchable,i=e.renderOptions,c=e.zaInfos,u=t.id,d=t.title,p=t.content,h=t.excerpt,f=t.viewCount,m=t.answerCount,v=t.recReason,Z=c.options,g=c.title,E=c.expand,T=(0,a.Z)((0,l.useState)(!0),2),C=T[0],A=T[1],_=(0,a.Z)((0,l.useState)(null),2),y=_[0],S=_[1];return(0,s.BX)("div",{className:"TopstoryQuestionAskItem",children:[(0,s.BX)("div",{className:"TopstoryQuestionAskItem-hint",children:[(0,s.tZ)(On.Z,{center:!0}),v]}),(0,s.tZ)(se.ZP,{data:t,title:(0,s.tZ)("a",(0,r.Z)((0,o.Z)({href:"/question/".concat(u),target:"_blank",rel:"noopener noreferrer"},g&&{"data-za-detail-view-id":g}),{children:d})),lastreadTouchable:n,onRef:S,children:(0,s.BX)(Pe.Z,{html:p,excerpt:h,limit:60,limitWithImage:60,zaIds:{expand:E},onToggleExpend:function(){return A(!C)},children:[(0,s.BX)(xt.Z,{className:"TopstoryQuestionAskItem-writeAnswerButton",preset:"outline",color:"blue",to:"/question/".concat(u,"?write"),target:"_blank","data-za-detail-view-id":5121,"data-za-detail-view-action":"Answer",children:[(0,s.tZ)(Dn.yc,{}),"写回答"]}),(0,s.BX)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[(0,ee.uf)(f)," 次浏览"]}),(0,s.BX)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[(0,ee.uf)(m)," 个回答"]}),i&&i((function(){return y}),Z)]})})]})})),Pn=n(5671),kn=n(30806),xn=n(73950),Ln=n(87050),Un=n(45638),Fn=n(76745),Mn=n.n(Fn)()((function(e){return e.findIndex((function(e){return"annotation"===e.name}))}),(function(e){return e.map((function(e){return e.name})).join("-")})),Gn=(0,s.tZ)(kt.Z,{annotationDetail:{showOuter:!0,reasonDescription:"品牌提问"}},"BrandQuestion");var zn=[function(e,t){var n=e.componentList,i=t.item.target,a=t.tabType;if(!Boolean(!ne.Z.isMobileEntry&&"recommend"===a&&i.question&&"commercial"===i.question.questionType))return e;var s=Mn(n);if(n[s].component){var u=(0,c.Z)(n);return u[s]={name:"annotation",component:Gn},(0,r.Z)((0,o.Z)({},e),{componentList:u})}return e}];var Hn=n(23436),qn=n(91840),Vn=n(47698),Xn=n(55053),Wn=function(e){return null==e?void 0:e.forEach((function(e){return(0,Vn.dJ)(e,{})}))};function Kn(e){var t=e.promotionExtra,n=e.children,o=(0,l.useRef)(null),r=(0,l.useMemo)((function(){return(0,Xn.dj)(t)}),[t]);(0,l.useEffect)((function(){r&&(Wn(r.impression_tracks),(0,qn.y3)(o.current,(function(){return Wn(r.view_tracks)})))}),[r]);var i=(0,l.useCallback)((function(){r&&Wn(r.click_tracks)}),[r]);return(0,s.BX)("div",{ref:o,children:[(0,s.tZ)(f.SV,{children:(0,s.tZ)(Hn.Z,{data:r,node:o.current})}),"function"==typeof n?n(i):n]})}Kn.propTypes={promotionExtra:V().string.isRequired,children:V().oneOfType([V().func,V().any]).isRequired};function jn(e){var t,n=e.item,i=e.tabType,a=e.isFollowTab,c=e.preset,u=e.hasAuthorBeforeContent,d=e.handleExpand,p=e.renderIgnoreButton,h=n.actionTextTpl,f=n.actors,m=n.target,v=n.promotionExtra,Z=(0,l.useMemo)((function(){return function(e){var t;if(2===(null===(t=e.attachment)||void 0===t?void 0:t.type)){var n=e.attachment,i=n.parentTitle,a=n.isComplete,c=n.parentContentToken,s=n.parentPlayCount,u=n.parentVoteupCount,l=n.splitStart,d={videoId:e.thumbnailExtraInfo.videoId,zvideoId:c,title:i,playCount:s,voteupCount:u,isComplete:a,startTime:l};return(0,r.Z)((0,o.Z)({},e),{videoAnswerData:d})}return e}(m)}),[m]),g="recommend"===i,E=(0,l.useMemo)((function(){return null==f?void 0:f.find((function(e){return"people"===e.type}))}),[f]),T=(0,x.Z)((function(e){v&&(0,Ln.w)("answer",e,v)})),C=(0,s.tZ)(kn.Z,(0,r.Z)((0,o.Z)({answer:Z},u&&{formatContent:Zn}),{action:a&&"{}赞同了回答"===h&&"voted",actor:E,preset:c,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,renderExtraOptions:p,onToggleExpand:d,zaInfos:cn,renderActionButtons:(t={tabType:i,item:n},function(e){var n=zn.reduce((function(e,n){return n(e,t)}),e);return(0,Un.W9)(n)}),hideCommercialInviteLabel:!0,shouldAlwaysShowPlayer:g,isRecommend:g,shouldTrackDisappear:!0,readFinishModuleId:"pc_reco_detail_read_finish"}));return v?(0,s.BX)(xn.ZP,{extra:v,children:[(0,s.tZ)(Pn.Z,{type:"answer",id:Z.id}),(0,s.tZ)(Kn,{promotionExtra:v,children:function(e){return(0,l.cloneElement)(C,{trackPromotionClick:e,onClickTitle:T})}})]}):C}jn.propTypes={item:V().object.isRequired,tabType:V().oneOf(["recommend","follow"]),isFollowTab:V().bool,preset:V().string,hasAuthorBeforeContent:V().bool,handleExpand:V().func,renderIgnoreButton:V().func};var Yn=n(66220);function Qn(e){var t=e.item,n=e.isFollowTab,i=e.preset,a=e.hasAuthorBeforeContent,c=e.handleExpand,u=e.renderOptions,d=t.actionTextTpl,p=t.actors,h=t.target,f=t.promotionExtra,m=(0,l.useMemo)((function(){return null==p?void 0:p.find((function(e){return"people"===e.type}))}),[p]),v=(0,x.Z)((function(e){f&&(0,Ln.w)("article",e,f)})),Z=(0,s.tZ)(Yn.Z,(0,r.Z)((0,o.Z)({article:h},a&&{formatContent:Zn}),{action:n&&("{}赞了文章"===d||"{}赞同了文章"===d)&&"voted",actor:m,preset:i,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,zaInfos:cn,onToggleExpand:c,renderOptions:u,shouldTrackDisappear:!0,readFinishModuleId:"pc_reco_detail_read_finish"}));return f?(0,s.BX)(xn.ZP,{extra:f,children:[(0,s.tZ)(Pn.Z,{type:"article",id:h.id}),(0,s.tZ)(Kn,{promotionExtra:f,children:function(e){return(0,l.cloneElement)(Z,{trackPromotionClick:e,onClickTitle:v})}})]}):Z}Qn.propTypes={item:V().object.isRequired,isFollowTab:V().bool,preset:V().string,hasAuthorBeforeContent:V().bool,handleExpand:V().func,renderOptions:V().func};var Jn={question:"question",answer:"answer",question_ask:"question_ask",article:"article",column:"column",collection:"collection",roundtable:"roundtable",live_course:"live_course",live:"live",ebook:"ebook",pin:"pin",eventcard:"eventcard",zvideo:"zvideo",edu_section:"edu_section"},$n=function(e){(0,U.Z)(n,e);var t=(0,F.Z)(n);function n(){var e;return(0,L.Z)(this,n),(e=t.apply(this,arguments)).state={preset:"special-plain",hasAuthorBeforeContent:"recommend"===e.props.type,limitProps:{}},e.handleExpand=function(t){var n=e.props.type;e.setState({preset:"recommend"===n&&t?"plain":"special-plain",hasAuthorBeforeContent:"recommend"===n&&!t})},e.handleToggleUninterest=function(t){var n=e.props,o=n.item.id,r=n.toggleUninterest,i=n.type;return X.Z.trackEvent(t.target,{id:cn.ignore,action:"Ignore",element:"Button",is_intent:!0}),r(o,i)},e.renderZVideoOptions=function(t,n){return[(0,s.BX)(j.ZP,{toggler:(0,s.tZ)(Y.ZP,{preset:"plain",className:"OptionsButton",icon:G.AZ,"aria-label":"更多"}),children:[(0,s.tZ)(W.$U,{zaType:"Button",zaAction:"Ignore",as:j.sN,className:"ZVideoToolbar-menuItem",onClick:e.handleToggleUninterest,children:"不感兴趣"}),(0,s.tZ)(j.sN,{className:"TopstoryItem-menuItem",onClick:e.props.authRequired((function(){})),children:(0,s.tZ)(M.Z,{extra:{ua:t,isVip:n}})})]},"options")]},e.renderItem=function(t,n){var r=e.props,i=r.ua,a=r.currentUser,c=((null==a?void 0:a.vipInfo)||{}).isVip,u=t.target,l=t.actor,d=t.actionTextTpl,p=e.state,h=p.preset,f=p.hasAuthorBeforeContent,m="follow"===n,v="recommend"===n,Z=v?function(r){return(0,s.tZ)(Nn,(0,o.Z)({type:n,item:t,zaIgnoreId:cn.ignore,ua:i,isVip:c,authRequired:e.props.authRequired},r))}:void 0,g=Z?he(u,a,Z):void 0;switch(u.type){case Jn.question:return(0,s.tZ)(Ft,{preset:se.PG.interactive,question:u,trackCardShow:!1,lastreadTouchable:!0,zaInfos:cn,renderOptions:g});case Jn.question_ask:return(0,s.tZ)(Bn,{question:u,lastreadTouchable:!0,zaInfos:cn,renderOptions:g});case Jn.answer:return(0,s.tZ)(jn,{item:t,tabType:n,isFollowTab:m,preset:h,hasAuthorBeforeContent:f,handleExpand:e.handleExpand,renderIgnoreButton:Z});case Jn.article:return(0,s.tZ)(Qn,{item:t,isFollowTab:m,preset:h,hasAuthorBeforeContent:f,handleExpand:e.handleExpand,renderOptions:g});case Jn.column:return(0,s.tZ)(pe,{preset:se.PG.interactive,column:u,trackCardShow:!1,lastreadTouchable:!0,zaInfos:cn,renderOptions:g});case Jn.collection:return(0,s.tZ)(Et,{preset:se.PG.interactive,favlist:u,trackCardShow:!1,lastreadTouchable:!0,zaInfos:cn,renderOptions:g});case Jn.roundtable:return(0,s.tZ)(Qt,{preset:se.PG.interactive,roundtable:u,trackCardShow:!1,lastreadTouchable:!0,zaInfos:cn});case Jn.live_course:return(0,s.tZ)(Ct,{liveCourse:u,preset:se.PG.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:g,zaIds:cn});case Jn.live:return(0,s.tZ)(Nt,{live:u,preset:se.PG.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:g,zaIds:cn});case Jn.ebook:return(0,s.tZ)(Ne,{ebook:u,preset:se.PG.interactive,trackCardShow:!1,lastreadTouchable:!0});case Jn.pin:return(0,s.tZ)(Ot.Z,{action:"{}赞了想法"===d&&"voted",actor:l,pin:u,preset:"plain",trackCardShow:!1,lastreadTouchable:!0});case Jn.zvideo:var E;return 1===(null===(E=u.attachment)||void 0===E?void 0:E.type)?(0,s.tZ)(on,{target:u,preset:h,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(i,c)},lastreadTouchable:!0}):(0,s.tZ)(rn.Z,{zvideo:u,preset:h,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(i,c)},lastreadTouchable:!0,shouldAlwaysShowPlayer:v,showMetaAfterPlayer:v});case Jn.eventcard:return(0,s.tZ)(un,{trackCardShow:!1,eventcard:u,lastreadTouchable:!0,renderOptions:g,zaIds:cn});case Jn.edu_section:return(0,s.tZ)(vt,{eduSection:u,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(i,c)},lastreadTouchable:!0});default:return null}},e}return n.prototype.render=function(){var e=this.props,t=e.item,n=e.type,o=e.className;return t.target.isDelete?null:(0,s.BX)("div",{className:H()("Feed",o),children:["follow"===n&&(0,s.tZ)(Sn,{feed:t}),this.renderItem(t,n)]})},n}(l.PureComponent);$n.propTypes={item:V().object.isRequired,type:V().oneOf(["recommend","follow"]),className:V().string};(0,p.compose)(Le.Z,(0,N.connect)((function(e){return{ua:e.env.userAgent}})),(0,K.a)((function(e){var t=e.item,n=t.id,i=t.attachedInfo,a=t.target,c=t.target,s=c.id,u=c.type,l=t.dataZaIndex;return{module:"FeedItem",index:String(void 0===l?0:l),isAd:!1,attachedInfoBytes:i,card:{card_type:"Feed",feed_id:n,has_image:Boolean(a.thumbnailExtraInfo&&"image"===a.thumbnailExtraInfo.type),has_video:Boolean(a.thumbnailExtraInfo&&"video"===a.thumbnailExtraInfo.type),content:(0,r.Z)((0,o.Z)({type:oe.LA[u]},(0,an.A$)(u,s)),{video_id:a.thumbnailExtraInfo&&a.thumbnailExtraInfo.videoId})},view:{id:2743},trackCardShow:!0}})))($n);var eo=n(9990),to=function(e){var t=e.root,n=e.parentType,c=e.parentId,u=(0,i.Z)(e,["root","parentType","parentId"]),d=(0,a.Z)((0,l.useState)(),2),p=d[0],h=d[1];(0,eo.Z)({videoId:null==p?void 0:p.videoId,iframeRef:null==p?void 0:p.videoIframeRef});var f=(0,x.Z)((function(e){var t="";return[Jn.zvideo,Jn.answer].includes(n)&&(t="?".concat(new URLSearchParams([["itemId",c],["itemType",n]]).toString())),"https://".concat(ne.Z.videoHost,"/video/").concat(e).concat(t)})),m=(0,x.Z)((function(e){var t=e.videoId,n=e.videoIframeRef;t&&(null==n?void 0:n.current)&&h({videoId:t,videoIframeRef:n})}));return(0,s.tZ)(s.HY,{children:(0,s.tZ)(b.SM,(0,r.Z)((0,o.Z)({onLinkCardPlayerLoaded:m,getVideoUrl:f,useZVideoLinkCard:!1},u),{root:t}))})},no="data-uncomfortable-flag",oo=function(e){var t=e.onRef,n=e.htmlProcessors,u=void 0===n?[]:n,d=e.linkCardInfo,p=e.zvideoLinkCardProps,h=e.adLinkCardProps,f=e.mcnLinkCardProps,N=e.eduCardProps,O=e.mkSkuLinkCardProps,B=e.html,P=e.sourceId,x=e.shouldShowCatalog,L=e.shouldCatalogCollapse,U=e.shouldFoldCatalog,F=e.referenceLinkProps,M=e.useCatalogV2,G=e.isAuthor,z=e.maskGradientColor,H=e.isVideoAnswer,q=void 0!==H&&H,V=(0,i.Z)(e,["onRef","htmlProcessors","linkCardInfo","zvideoLinkCardProps","adLinkCardProps","mcnLinkCardProps","eduCardProps","mkSkuLinkCardProps","html","sourceId","shouldShowCatalog","shouldCatalogCollapse","shouldFoldCatalog","referenceLinkProps","useCatalogV2","isAuthor","maskGradientColor","isVideoAnswer"]),X="1"===D("wm_img_notwell",{mock:"1"}),W=h||{},K=W.parentType,j=W.parentId,Y=(0,a.Z)((0,l.useState)(null),2),Q=Y[0],J=Y[1],$=(0,a.Z)((0,l.useState)(null),2),ee=$[0],te=$[1],ne=(0,v.F)(),oe=k((0,c.Z)(u).concat([(0,I.Pq)(),C.g,A.Tw,(0,E.PD)(M)]));(0,b.af)(Q,p,d),(0,I.AV)(Q,F),(0,E.cy)(Q);var re=(0,l.useMemo)((function(){return(0,E.f1)(B,P)}),[B,P]).catalog,ie=(0,l.useMemo)((function(){if(!Q)return{};var e=Q.getBoundingClientRect().left-20;return{shouldFold:L||(0,E.b6)(e),width:(0,E.XD)(e)}}),[Q,L]),ae=ie.shouldFold,ce=ie.width;return(0,s.BX)("div",{css:{position:"relative",display:"inline"},children:[(0,A.fv)(Q),x&&U&&(0,s.tZ)(E.$n,{root:Q}),(0,s.tZ)(g.H,(0,r.Z)((0,o.Z)({},h),{root:Q})),(0,s.tZ)(S._,(0,r.Z)((0,o.Z)({},O),{root:Q})),(0,s.tZ)(to,(0,r.Z)((0,o.Z)({parentId:j,parentType:K,isVideoAnswer:q},p),{root:Q})),(0,y.H)({root:Q,mcnLinkCardProps:f,contentType:K,token:j,isAuthor:G}),(0,w.cD)({root:Q,createLinkCardPortal:T.EN,eduCardProps:N}),x&&M&&(null==re?void 0:re.length)>0&&(0,s.BX)(s.HY,{children:[(0,s.tZ)(R.Box,{ref:te,css:{position:"absolute",left:ae?-20:-ce-E.PO-20,top:ae?60:0,width:ce}}),(0,s.tZ)(E.fo,{catalog:re,inEditor:!1,scrollOffset:52,stickyOffset:ae?132:72,contentRoot:Q,container:ee,shouldShowFoldIcon:ae,shouldCollapse:L,maskGradientColor:z})]}),(0,s.tZ)(T.Ho,(0,o.Z)((0,r.Z)((0,o.Z)({ref:(0,Z.Z)(t,J)},X&&(0,m.Z)({},no,"")),{css:function(e){return(0,o.Z)({},(0,C.b)(e),X&&(t="img[data-uncomfortable]",(0,m.Z)({},"&[".concat(no,"] ").concat(t),_.e[t])));var t},html:oe(B,{sourceId:P,theme:ne,shouldShowCatalog:x,shouldFoldCatalog:U,linkCardInfo:d})}),V))]})},ro=n(37015),io={},ao=function(e,t){var n=function(e){return e.split("/").reverse()[0]}(t),o=(0,a.Z)(n.split("."),2),r=o[0],i=o[1],c=(0,a.Z)(r.split("_"),2)[1],s="webp"===i||"gif"===i?i:"image",u=(0,ro.HP)({appName:"heifetz"})("".concat(s,".").concat(c,".unknown.RichText"));switch(e){case"loadstart":io[n]=Date.now();break;case"load":if(io[n]){var l="".concat(u,".success");ro.ZP.increment({raw:"".concat(l,".count")}),ro.ZP.timing(l,Date.now()-io[n]),delete io[n]}break;case"timeout":io[n]&&(ro.ZP.increment({raw:"".concat(u,".timeout.count")}),delete io[n]);break;case"error":io[n]&&(ro.ZP.increment({raw:"".concat(u,".failure.count")}),delete io[n])}},co=function(e){return(0,s.tZ)(T.BU,(0,r.Z)((0,o.Z)({onLoadStateChange:ao},e),{useMp4:!0}))},so=function(e){var t=e.node,n="1"===D("wm_img_notwell",{mock:"1"}),o=t.dataset.thumbnail,r=n&&"uncomfortable"in t.dataset,i=function(){return o?"load-gif":"load-image"},c=(0,a.Z)((0,l.useState)(r?"uncomfortable":i()),2),u=c[0],d=c[1];return"load-image"===u?(0,s.tZ)(T.RP,{node:t,onLoadStateChange:ao}):"load-gif"===u?(0,s.tZ)(T.pE,{node:t,Component:co}):"uncomfortable"===u?(0,s.BX)(s.HY,{children:[(0,s.tZ)(T.rI,{node:t,style:{display:"none"}}),(0,s.tZ)(_.i,{node:t,onClick:function(){delete t.dataset.uncomfortable,d(i())}})]}):null},uo=n(15568),lo=n.n(uo),po=n(8567),ho=n(87970),fo=function(e){var t=e.goodsCardId,o=e.handleClose,r=(0,N.useSelector)((function(e){return e.currentUser})),i=(0,po.Z)((function(){return n.e(430).then(n.bind(n,81009))})),a=(0,ho._)(),c=(0,x.Z)((function(e){var t=e.id,n=e.sourceId,o=e.url,r=e.app_schema_ios,i=e.app_schema_android;a({id:t,source:n,url:o,appSchemaIos:r,appSchemaAndroid:i})}));return t?(0,s.tZ)(i,{showModal:Boolean(t),id:t,userId:r,clientId:lo().get("_zap"),onClose:o,onSelectCard:c}):null},mo=n(35367),vo=function(e){var t=e.className,n=e.html,o=e.lazyLoadImageProps,r=(0,a.Z)((0,l.useState)(null),2),i=r[0],c=r[1];return(0,T.RK)(i,o),(0,s.tZ)("div",{ref:c,children:(0,s.tZ)(mo.Z,{className:t,content:n})})},Zo=n(74182);var go=n(61533),Eo=function(e){var t=e.getAttribute("data-hash"),n=e.textContent.replace(/^@/,""),o=document.createElement("span");return e.parentNode.replaceChild(o,e),{target:o,data:{id:t,name:n}}},To=function(e){var t=(0,a.Z)((0,l.useState)(null),2),n=t[0],o=t[1];return(0,l.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".member_mention"));if(t.length){var n=t.map(Eo).map((function(e,t){var n=e.data,o=e.target;return(0,go.createPortal)((0,s.BX)(be.Z,{user:n,children:["@",n.name]},t),o)}));o(n)}}}),[e]),n},Co=n(12321),Ao=n(57948),_o=function(e){var t=(0,Co.n)(),n=(0,l.useCallback)((function(n){t.ZhihuHybrid&&function(e,t){var n=t.root;if(!e.defaultPrevented){var r=e.target;if("img"===r.tagName.toLowerCase()&&(r.src.includes("zhimg")||!r.src.includes("equation"))&&(!r.classList.contains("ztext-gif")||r.parentNode.classList.contains("isPlaying"))){var i=Array.from(n.querySelectorAll(["img"])).filter((function(e){return e.src.includes("zhimg")&&!e.src.includes("equation")})),a=i.indexOf(r);if(-1!==a){e.preventDefault();var c=i.map((function(e){return e.dataset.thumbnail&&e.src.replace(/\.jpg|\.webp/,".gif")||e.dataset.src||e.src||""})).map((function(e){return(0,fe.imgUrl)(e,(0,o.Z)({quality:""},e.endsWith("webp")&&{extension:"jpg"}))}));(0,Ao.Z)("base/openImage").dispatch({images:c,index:a})}}}}(n,{root:e})}),[e,t.ZhihuHybrid]);(0,l.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},yo=n(52949),So=function(e){var t=e.getAttribute("data-poster"),n="data:,"===t?"":t,i={title:e.getAttribute("data-name"),thumbnail:n,url:e.getAttribute("href"),src:e.getAttribute("data-src")};i=e.getAttribute("data-lens-id")?(0,r.Z)((0,o.Z)({},i),{isLens:!0,id:e.getAttribute("data-lens-id"),isPlayable:!0}):(0,r.Z)((0,o.Z)({},i),{isLens:!1,id:e.getAttribute("data-video-id"),isPlayable:"true"===e.getAttribute("data-video-playable")}),e.hasAttribute("data-lens-status")&&(i=(0,r.Z)((0,o.Z)({},i),{error:{status:e.getAttribute("data-lens-status"),message:e.getAttribute("data-description")}}));var a=document.createElement("div");return e.parentNode.replaceChild(a,e),{target:a,data:i}},Io=function(e,t){var n=t.hideWatermark,o=(0,a.Z)((0,l.useState)(null),2),r=o[0],i=o[1];return(0,l.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".video-box, .video-link, .unprocessable_video"));if(t.length){var o=t.map(So).map((function(e,t){var o=e.data,r=e.target;return(0,go.createPortal)((0,s.tZ)(yo.Z,{data:o,hideWatermark:n},t),r)}));i(o)}}}),[e,n]),r},bo=function(e){var t=e.root,o=e.ecommerce,r=e.sourceType,i=e.sourceId,a=e.entityWords,c=e.hideWatermark;return(0,s.BX)(s.HY,{children:[Io(t,{hideWatermark:c}),To(t),(0,s.tZ)(f.SV,{target:"ecommercePortal",replacement:null,children:(0,h.su)(t,{ecommerce:o,getComponent:function(){return Promise.all([n.e(2523),n.e(8400)]).then(n.bind(n,61421))}})}),(0,u.K)(t,{type:r,sourceId:i,entityWords:a})]})},wo=function(e){var t=e.className,n=e.ecommerce,d=e.html,h=e.shouldShowCatalog,f=e.sourceId,m=e.sourceType,v=e.isExpanded,Z=void 0===v||v,g=e.entityWords,E=e.isVideoAnswer,T=e.hideWatermark,C=(0,i.Z)(e,["className","ecommerce","html","shouldShowCatalog","sourceId","sourceType","isExpanded","entityWords","isVideoAnswer","hideWatermark"]),A=(0,a.Z)((0,l.useState)(null),2),_=A[0],y=A[1],S=(0,l.useMemo)((function(){return d?p.compose.apply(void 0,(0,c.Z)([(0,u.z)(g)].filter(Boolean)))(d):""}),[d,g]);_o(_),function(e){var t=(0,a.Z)((0,l.useState)(!1),2),n=t[0],o=t[1],r=(0,W.Q4)().trackEvent,i=(0,x.Z)((0,Zo.Z)((function(){document.getSelection().toString()&&r({eventType:"Click",elementLocation:{moduleId:"text_select",type:"Text"}})}),1e3)),c=(0,x.Z)((function(){document.addEventListener("selectionchange",i)})),s=(0,x.Z)((function(){document.getSelection().toString()&&(r({eventType:"Click",elementLocation:{moduleId:"text_copy",type:"Text",text:n?"快捷键复制":"右键复制"}}),o(!1))})),u=(0,x.Z)((function(e){"c"!==e.key&&67!==e.keyCode||!e.ctrlKey&&!e.metaKey||o(!0)}));(0,l.useEffect)((function(){if(e)return e.addEventListener("selectstart",c),e.addEventListener("copy",s),document.addEventListener("keydown",u),function(){e.removeEventListener("selectstart",c),e.removeEventListener("copy",s),document.removeEventListener("keydown",u),document.removeEventListener("selectionchange",i)}}),[e,s,u,i,c])}(_);var I=(0,a.Z)(function(){var e=(0,a.Z)((0,l.useState)(null),2),t=e[0],n=e[1];return[t,(0,x.Z)((function(e){var t=e.currentTarget.dataset.mcnId;n(t)})),(0,x.Z)((function(){return n(null)}))]}(),3),b=I[0],w=I[1],R=I[2];return(0,s.BX)(s.HY,{children:[(0,s.tZ)(oo,(0,r.Z)((0,o.Z)({},C),{className:t,html:Z?S:d,onRef:y,ConditionalImage:so,adLinkCardProps:{parentId:f,parentType:m},mcnLinkCardProps:{onClick:w},mkSkuLinkCardProps:{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1},eduCardProps:{token:f,contentType:m},zvideoLinkCardProps:{enableInlinePlay:!0},shouldShowCatalog:h,sourceId:f,useCatalogV2:!0,isVideoAnswer:E})),(0,s.tZ)(bo,{root:_,ecommerce:n,sourceId:f,sourceType:m,entityWords:g,hideWatermark:T}),(0,s.tZ)(fo,{goodsCardId:b,handleClose:R})]})},Ro=function(e){var t=e.isNovel,n=(0,i.Z)(e,["isNovel"]);if(t){var r=n.className,a=n.html;return(0,s.tZ)(vo,{className:r,html:a,lazyLoadImageProps:{onLoadStateChange:ao,useWebP:!1}})}return(0,s.tZ)(wo,(0,o.Z)({},n))}},83790:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var o=n(21620),r=n(84421),i=n(32554),a=(n(68562),n(75926)),c=n.n(a),s=n(87363),u=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={visible:e.props.disabled},e.onShow=function(){e.setState({visible:!0})},e}var a=n.prototype;return a.componentDidMount=function(){this.state.visible||(this.props.timeout>0?this.timeout=setTimeout(this.onShow,this.props.timeout):this.onShow())},a.componentWillUnmount=function(){this.timeout&&clearTimeout(this.timeout)},a.render=function(){var e=this.props,t=e.children,n=e.placeholder;return this.state.visible?t:n},n}(s.Component);u.propTypes={disabled:c().bool,placeholder:c().node,timeout:c().number},u.defaultProps={disabled:!1,placeholder:null,timeout:-1}},59039:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var o=n(87363);function r(){return(0,o.useEffect)((function(){window.scrollTo(0,0)}),[]),null}},18538:function(e,t,n){"use strict";var o=n(68562),r=n(86488);t.Z=function(){return(0,o.BX)("div",{className:"SelfVisibleLable-wrap",children:[(0,o.tZ)(r.P,{className:"SelfVisibleLable-lockIcon",width:16,center:!0}),"仅自己可见"]})}},41191:function(e,t,n){"use strict";var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(32554),s=n(68562),u=n(36014),l=n(25654),d=n(51261),p=n(57636),h=n(47112),f=n.n(h),m=n(48404),v=n.n(m),Z=n(58386),g=n.n(Z),E=n(75926),T=n.n(E),C=n(87363),A=n(52495),_=n(17222),y=n(48457),S=n(522),I=n(96323),b=n(19628),w=n(73464),R=n(38793),N=n(70175),O=n(91355),D=n(24316),B=n(89411);function P(e){return e&&e.startsWith("//")?"https:".concat(e):e}function k(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&")}var x=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={qrCodeUrl:"",url:""},e.togglerRef=(0,C.createRef)(),e.shouldShowMenu=function(){var t=e.props,n=t.onTogglerClick,o=t.disabled;return!1!==n()&&!o},e.handleTogglerClick=function(t){e.shouldShowMenu()?(e.loadQrcodeImage(),e.handleShare(t)):t.preventDefault()},e.handleMouseEnter=function(t){e.shouldShowMenu()?(e.loadQrcodeImage(),e.handleShare(t)):t.preventDefault()},e.open=function(t){e.shouldShowMenu()&&(e.loadQrcodeImage(),e.menu.popover.open(),e.handleShare(t))},e.handleShare=function(){var t=e.props,n=t.id,o=t.type,r=t.getShareText,a=t.zaShareId,c=t.onShare;["live","club","edu_course","edu_section"].includes(o)||r(n,o),_.Z.trackEvent(e.togglerRef.current,(0,i.Z)({action:"Share",element:"Button",is_intent:!0,element_name:O.ur[o]},a&&{id:a})),null==c||c()},e.copyLink=function(){var t=e.props,n=t.type,o=t.title,r=t.authorName,i=t.href,a=t.showNotification,c=S.iB[n]||"",s=o?"".concat(o," - "):"",u=r&&"匿名用户"!==r&&c?"".concat(r,"的").concat(c," - "):"",l=i?(0,b.BY)(i):e.url();v()("".concat(s).concat(u,"知乎\n").concat(P(l))),a("链接复制成功！")},e.url=function(){var t=e.props,n=t.id,o=t.type,r=t.shouldUseHrefFirst,i=t.href;return r?(0,b.BY)(i):P((0,b.BY)(e.props.url))||"".concat(location.origin,"/").concat(o,"/").concat(n)},e.loadQrcodeImage=function(){var t=e.state.qrCodeUrl,n=e.props,o=n.shouldUseHrefFirst,r=n.href;if(!t){var i="".concat(location.protocol,"//www.zhihu.com/"),a=o?r:"".concat(e.url()).concat("#showWechatShareTip");t="".concat(i,"qrcode?").concat(k({url:a})),e.setState({qrCodeUrl:t,url:a})}},e.shareToWeibo=function(){var t={appKey:"3063806388"},n=e.props.shareText;n&&(t.title=n);var o="http://service.weibo.com/share/share.php?".concat(k(t));window.open(o,"_blank","width=615,height=505")||(location.href=o)},e}var p=n.prototype;return p.componentDidUpdate=function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()},p.render=function(){var e=this,t=this.props,n=t.className,o=t.togglerClassName,r=t.positionStatus,c=t.toggler,p=t.type,h=t.disabled,m=t.placement,v=t.toggleEvent,Z=t.stickHover,g=t.children,E=this.state.qrCodeUrl,T=(0,s.BX)("div",{className:f()("ShareMenu-toggler",o),children:[E&&(0,s.tZ)("img",{className:"ShareMenu-fakeQRCode",src:E,alt:"微信二维码"}),(0,C.cloneElement)(c,{onMouseEnter:this.loadQrcodeImage,disabled:h,ref:this.togglerRef})]}),A="hover"===v?{onMouseEnter:this.handleMouseEnter}:{onClick:this.handleTogglerClick};return(0,s.BX)(C.Fragment,{children:[(0,s.tZ)(R.bY,{input:"s",action:this.open}),(0,s.BX)(y.$U,(0,a.Z)((0,i.Z)({as:I.ZP,zaText:!0,zaType:"Button",zaAction:"Share",className:f()("ShareMenu",n),positionStatus:r,ref:function(t){e.menu=t},toggler:T,placement:m,toggleEvent:v,stickHover:Z},A),{children:[(0,s.BX)(y.$U,{as:I.sN,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.copyLink,children:[(0,s.tZ)(u.n,{size:17,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"]}),"live"===p||(0,s.BX)(y.$U,{as:I.sN,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.shareToWeibo,children:[(0,s.tZ)(l.kH,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"]}),(0,s.BX)(I.sN,{tag:"div",className:"ShareMenu-wechat",noActive:!0,children:[(0,s.BX)(w.ZP,{className:"ShareMenu-button",preset:"plain",children:[(0,s.tZ)(d.F3,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"]}),(0,s.tZ)("img",{className:"ShareMenu-qrCode",src:E,alt:"微信二维码"})]}),g]}))]})},n}(C.Component);x.propTypes={toggler:T().node,onTogglerClick:T().func,zaShareId:T().number},x.defaultProps={toggler:(0,s.tZ)(w.ZP,{preset:"plain",icon:p.xP,label:"分享"}),onTogglerClick:g()},t.Z=N.Z.isMobileEntry?function(){return null}:(0,A.connect)((function(e,t){var n=t.id,o=t.type,r=e.shareTexts;return{shareText:(null==r?void 0:r["".concat(o).concat(n)])||t.shareText}}),{showNotification:D.c0,getShareText:B.kB})(x)},67849:function(e,t,n){"use strict";n.d(t,{n:function(){return s},y:function(){return u}});var o=n(87363),r=n(73224),i=n.n(r),a=n(47859),c=n(74989),s=function(e,t){var n=(0,c.Z)(),r=(0,a.Z)(t);(0,o.useEffect)((function(){if(n){var t=new(i());return t.bind(e,r),function(){t.reset()}}}),[r,n,e])},u=function(e){var t=e.input,n=e.action;return s(t,n),null}},38793:function(e,t,n){"use strict";n.d(t,{yW:function(){return o.y},bY:function(){return m},wi:function(){return v}});var o=n(67849),r=n(68562),i=(n(47112),n(87363)),a=n.n(i),c=n(78194),s=n(61565),u=n(73224),l=n.n(u),d=n(47859),p=n(74989),h=a().createContext(null),f=function(e){return/^(input|textarea|select)$/i.test(e.tagName)||e.isContentEditable},m=function(e){var t=e.input,n=e.action;return function(e,t){var n=(0,p.Z)(),o=(0,i.useContext)(h),r=(0,d.Z)(t);(0,i.useEffect)((function(){if(n&&o)return o.bind(e,r),function(){o.unbind(e)}}),[n,o,e,r])}(t,(function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];f(e.target)||n.apply(void 0,[e].concat((0,s.Z)(o)))})),null},v=function(e){var t=e.children,n=e.root,o=(0,c.Z)((0,i.useState)(null),2),a=o[0],s=o[1];return(0,i.useEffect)((function(){if(n){var e=new(l())(n);return s(e),function(){e.reset()}}}),[n]),(0,r.tZ)(h.Provider,{value:a,children:t})}},74989:function(e,t,n){"use strict";var o=n(52495);t.Z=function(){return(0,o.useSelector)((function(e){return e.env.enableShortcut}))}},20829:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(87363),s=n(75926),u=n.n(s),l=n(32705),d=n.n(l),p=n(49236),h=n(37148),f=n(72351),m={zhihu:"注册或登录",wechat:"使用微信快速登录",weibo:"使用微博快速登录",qq:"使用 QQ 快速登录"},v={qq:"qqconn",weibo:"sina",wechat:"wechat_mp"},Z=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).jumpToOAuthUrl=function(t){var n=e.props.redirectUrl,o=void 0===n?location.href:n,r=(0,f.tL)(o),i=r.utm_source,a=r.utm_medium,c=d()(navigator.userAgent).isZhihu;location.href="zhihu"!==t?"https://www.zhihu.com/oauth/redirect/login/".concat(v[t],"?next=/oauth/account_callback&from=").concat(encodeURIComponent(o),"&utm_source=").concat(i,"&ref_source=").concat(a):c?"zhihu://signin?next=".concat(o):"https://www.zhihu.com/signin?next=".concat(o).concat(i?"?utm_source=".concat(i):"")},e.renderSignButtons=function(){var t=e.props.buttons;return"string"==typeof t?e.renderSingleSignButton({name:t}):t.map((function(t){return"string"==typeof t?e.renderSingleSignButton({name:t}):"object"==typeof t?e.renderSingleSignButton(t):null}))},e.renderSingleSignButton=function(t){var n=t.name,o=t.text,r=t.fill,i=t.color,c="#fff"===r||"#ffffff"===r;return Object.keys(m).includes(n)?(0,a.tZ)("button",{className:"SignInModal-button-".concat(n),style:{backgroundColor:r,borderColor:c?"#0f88eb":r,color:c?"#0f88eb":i},onClick:function(){e.jumpToOAuthUrl(n)},children:o||m[n]},n):null},e}return n.prototype.render=function(){var e=this.props,t=e.onClose,n=e.urlScheme,o=this.props.title||"".concat(n?"打开 App 或":"","登录后继续操作");return(0,a.tZ)(h.Z,{size:"small",className:"SignInModal",title:o,onClose:t,children:(0,a.tZ)(p.r,{module:"SignForm",moduleName:o,trackCardShow:!0,children:(0,a.BX)("div",{className:"SignInModal-content",children:[n&&(0,a.tZ)(f.yv,{className:"SignInModal-openInAppButton",href:n,children:"立即打开 App"}),this.renderSignButtons()]})})})},n}(c.Component);Z.propTypes={onClose:u().func.isRequired,urlScheme:u().string,redirectUrl:u().string,buttons:u().oneOfType([u().array,u().string])},Z.defaultProps={buttons:["zhihu"]}},96606:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var o=n(68562),r=n(47112),i=n.n(r);function a(e){var t=e.className;return(0,o.tZ)("span",{className:i()("ActivityItem-StickyMark",t),children:"置顶"})}},4025:function(e,t,n){"use strict";var o=n(68562),r=n(87363),i=n(8825),a=(0,r.forwardRef)((function(e,t){var n=e.fixSections,r=e.onCommand,a=e.queryCommandState,c=e.queryCommandEnable,s=e.editorState;return(0,o.tZ)("div",{className:"fixArea",ref:t,css:{display:"flex"},children:n.map((function(e){return e.items.length>0&&(0,o.tZ)(i.Z,{items:e.items,onCommand:r,queryCommandState:a,queryCommandEnable:c,editorState:s,showDivider:!1,showRightSpace:!1},e.sectionName)}))})}));t.Z=a},63205:function(e,t,n){"use strict";var o=n(68562),r=n(87363),i=n(8825),a=(0,r.forwardRef)((function(e,t){var n=e.mainSections,r=e.setButtonRectInfo,a=e.onCommand,c=e.queryCommandState,s=e.queryCommandEnable,u=e.editorState;return(0,o.tZ)("div",{className:"mainArea",ref:t,css:{display:"flex",flexShrink:1},children:n.map((function(e,t,n){return e&&n?e.items.length>0&&(0,o.tZ)(i.Z,{sectionIndex:t,onButtonRectInfoGet:r,items:e.items,onCommand:a,queryCommandState:c,queryCommandEnable:s,editorState:u,showDivider:!0,showRightSpace:!0},e.sectionName):null}))})}));t.Z=a},23288:function(e,t,n){"use strict";var o=n(68562),r=n(87363),i=n(8825),a=(0,r.forwardRef)((function(e,t){var n=e.moreSections,r=e.onCommand,a=e.queryCommandState,c=e.queryCommandEnable,s=e.editorState;return(0,o.tZ)("div",{className:"moreArea",ref:t,css:{display:"flex"},children:n.map((function(e){return e?e.items.length>0&&(0,o.tZ)(i.Z,{items:e.items,onCommand:r,queryCommandState:a,queryCommandEnable:c,editorState:s,showDivider:!1,showRightSpace:!1,replaceIconByOnlyChild:!1,shouldHide:function(e){return e.every((function(e){var t;return 0===(null==e||null===(t=e.children)||void 0===t?void 0:t.length)}))}},e.sectionName):null}))})}));t.Z=a},8825:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var o=n(88483),r=n(16600),i=n(68562),a=n(75926),c=n.n(a),s=n(18034),u=n(51092),l=n(47112),d=n.n(l),p=n(87363),h=n(48457),f=n(73464),m=function(e){return{background:e.colors.GBK10A,borderRadius:"4px"}},v=function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},Z=(0,p.forwardRef)((function(e,t){var n=e.showTogglerIcon,a=e.isMenuOpen,c=e.icon,l=e.isActive,Z=e.disabled,g=e.onClick,E=e.className,T=e.text,C=e.label,A=e.sectionIndex,_=e.buttonIndex,y=e.onButtonRectInfoGet,S=(0,p.useRef)(null);(0,p.useEffect)((function(){var e,t=(null===(e=S.current)||void 0===e?void 0:e.getBoundingClientRect()).right;t&&(null==y||y({label:C,sectionIndex:A,buttonIndex:_,right:t}))}),[A,_]);var I=n&&(0,i.tZ)("div",{className:"togglerIcon",css:{transform:"".concat(a?"rotate(180deg)":"rotate(0deg)"),fontSize:0,marginBottom:"2px"},children:(0,i.tZ)(u.r,{})});return(0,i.BX)(h.$U,{as:f.ZP,zaType:"Button",zaText:C,ref:(0,s.Z)(t,S),preset:f.EE.Plain,className:d()("ToolbarButton",E),disabled:Z,css:function(e){return{"&.Button.Button--plain":(0,r.Z)((0,o.Z)({marginRight:"20px",padding:"2px 4px",paddingRight:n?"1px":"4px",fontSize:"11px",color:e.colors.GBK03A,textAlign:"center",alignItems:"flex-end",display:"flex",whiteSpace:"nowrap"},l&&v(e)),{"&:hover":m(e)})}},"aria-label":C,onClick:g,children:[(0,i.BX)("div",{css:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.tZ)(c,{center:!0}),(0,i.tZ)("span",{css:{width:"100%"},children:null!=T?T:C})]}),I]})}));Z.propTypes={icon:c().elementType.isRequired,label:c().string.isRequired,isActive:c().bool,disabled:c().bool,showTogglerIcon:c().bool,isMenuOpen:c().bool,className:c().string,text:c().string,shortcut:c().string,onClick:c().func,sectionIndex:c().number,buttonIndex:c().number,onButtonRectInfoGet:c().func},Z.defaultProps={isActive:!1,disabled:!1,isMenuOpen:!1,showTogglerIcon:!1,onClick:function(){}};var g=Z,E=n(78194),T=n(96323),C=n(3942),A=function(e){return{background:e.colors.GBK10A,".togglerIcon":{borderLeftColor:e.colors.GBL01A}}},_=function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},y=(0,p.forwardRef)((function(e,t){var n=e.isActive,r=e.disabled,a=e.onClick,c=e.icon,s=e.text,u=e.label,l=e.onMouseEnter,d=e.onMouseLeave,p=e.component;return p?(0,i.tZ)(p,(0,o.Z)({},e)):(0,i.BX)(h.$U,{as:f.ZP,zaType:"Button",zaText:u,preset:f.EE.Plain,"aria-label":u,disabled:r,css:function(e){return{"&.Button.Button--plain":(0,o.Z)({padding:"12px 20px",display:"flex",alignItems:"center",color:e.colors.GBK03A,width:"100%",boxSizing:"border-box",whiteSpace:"nowrap",borderRadius:"4px","&:hover":A(e),"&:active":_(e)},n&&_(e))}},onClick:a,onMouseEnter:l,onMouseLeave:d,ref:t,children:[(0,i.tZ)(c,{center:!0,css:{marginRight:"4px"}}),null!=s?s:u]})}));y.propTypes={icon:c().elementType.isRequired,label:c().string.isRequired,isActive:c().bool,disabled:c().bool,className:c().string,text:c().string,shortcut:c().string,onClick:c().func,onMouseEnter:c().func,onMouseLeave:c().func},y.defaultTypes={isActive:!1,disabled:!1,onClick:function(){},onMouseEnter:function(){},onMouseLeave:function(){}};var S=y;function I(e,t,n){return!!n&&((null==e?void 0:e.children)?e.children.find((function(e){return I(e,t,n)})):e.commandName?t(e.commandName,n)&&e:void 0)}function b(e,t,n){return!!n&&((null==e?void 0:e.children)?e.children.some((function(e){return b(e,t,n)})):t(e.commandName,n))}function w(e){var t=e.items,n=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,a=e.editorState;return t.map((function(e){var t;if(!0===e.hide)return null;var c,s,u=I(e,o,a),l=!b(e,r,a);return(null==e||null===(t=e.children)||void 0===t?void 0:t.length)?(0,i.tZ)(T.ZP,{toggleEvent:"hover",placement:C.RIGHT,enterDelay:300,leaveDelay:300,toggler:(0,i.tZ)(S,{icon:null!==(c=null==u?void 0:u.icon)&&void 0!==c?c:e.icon,onClick:function(t){var o;null===(o=e.onClick)||void 0===o||o.call(e,t),e.commandName&&n(e.commandName)},label:e.label,isActive:!!u,disabled:l}),className:"ToolbarV3SubmenuButton",children:(0,i.tZ)(w,{items:e.children,onCommand:n,queryCommandState:o,queryCommandEnable:r,editorState:a})},e.label):(0,i.tZ)(S,{icon:null!==(s=null==u?void 0:u.icon)&&void 0!==s?s:e.icon,onClick:function(t){var o;null===(o=e.onClick)||void 0===o||o.call(e,t),e.commandName&&n(e.commandName),e.hideMenuOnClick&&document.body.click()},label:e.label,isActive:!!u,disabled:l,component:e.Component},e.label)}))}function R(e){var t=e.subMenu,n=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,a=e.editorState,c=e.isActive,s=e.label,u=e.shortcut,l=e.disabled,d=e.onClick,h=e.icon,f=e.sectionIndex,m=e.buttonIndex,v=e.onButtonRectInfoGet,Z=(0,E.Z)((0,p.useState)(!1),2),C=Z[0],A=Z[1],_=(0,i.tZ)(g,{isMenuToggler:!0,isMenuOpen:C,showTogglerIcon:!0,icon:h,isActive:c,disabled:l,shortcut:u,onClick:d,label:s,sectionIndex:f,buttonIndex:m,onButtonRectInfoGet:v});return(0,i.tZ)(T.ZP,{toggler:_,onOpen:function(){return A(!0)},onClose:function(){return A(!1)},arrowed:!1,menuContainerClassName:"ToolbarV3Menu-container",preventCloseOnTarget:!0,children:(0,i.tZ)(w,{items:t,onCommand:n,queryCommandState:o,queryCommandEnable:r,editorState:a})})}function N(){return(0,i.tZ)("span",{className:"ToolbarDivider",css:function(e){return{height:"20px",borderRight:"1px solid",borderColor:e.colors.GBK09A,marginLeft:"-4px"}}})}function O(e){var t=e.items,n=e.onCommand,a=e.queryCommandState,c=e.queryCommandEnable,s=e.editorState,u=e.showDivider,l=e.showRightSpace,d=e.replaceIconByOnlyChild,p=void 0===d||d,h=e.shouldHide,f=e.sectionIndex,m=e.onButtonRectInfoGet;return(null==h?void 0:h(t))?null:(0,i.BX)("div",{className:"toolbar-section",css:(0,o.Z)({display:"flex",alignItems:"center"},l&&{marginRight:"16px"}),children:[t.filter((function(e){return!!e})).map((function(e,t){var u=e.Component,l=e.label,d=e.text,h=e.children,v=e.shortcut,Z=e.commandName,E=e.onClick;if(!0===e.hide)return null;var T,C=I(e,a,s),A=!b(e,c,s),_=e.icon,y={label:l,icon:_,disabled:A,shortcut:v,isActive:!!C,text:d,sectionIndex:f,buttonIndex:t,onButtonRectInfoGet:m,onClick:function(e){null==E||E(e),Z&&n(Z)}};if((null==h?void 0:h.length)>1||!p&&(null==h?void 0:h.length)>0)_=(null==C?void 0:C.icon)||_,T=R,y=(0,r.Z)((0,o.Z)({},y),{icon:_,onCommand:n,queryCommandState:a,queryCommandEnable:c,editorState:s,subMenu:h});else if(1===(null==h?void 0:h.length)&&p){T=g;var S=h[0],w=S.icon,N=S.label,O=S.text,D=S.shortcut,B=S.commandName;y=(0,r.Z)((0,o.Z)({},y),{icon:w,label:N,text:O,shortcut:D,onClick:function(e){null==E||E(e),B&&n(B)}})}else T=g;return u?(0,i.tZ)(u,(0,o.Z)({toolbarButton:T},y),e.label):(0,i.tZ)(T,(0,o.Z)({},y),e.label)})),u&&(0,i.tZ)(N,{})]})}w.propTypes={items:c().arrayOf(c().oneOfType([c().object,c().bool])).isRequired,onCommand:c().func.isRequired,queryCommandState:c().func.isRequired,queryCommandEnable:c().func.isRequired,editorState:c().object.isRequired},R.propTypes={icon:c().elementType.isRequired,subMenu:c().arrayOf(c().oneOfType([c().object,c().bool])).isRequired,label:c().string.isRequired,onCommand:c().func.isRequired,queryCommandEnable:c().func.isRequired,queryCommandState:c().func.isRequired,editorState:c().object.isRequired,shortcut:c().string,disabled:c().bool,isActive:c().bool,onClick:c().func,sectionIndex:c().number,buttonIndex:c().number,onButtonRectInfoGet:c().func},R.defaultTypes={disabled:!1,isActive:!1,onClick:function(){}},O.propTypes={items:c().arrayOf(c().oneOfType([c().object,c().bool])).isRequired,onCommand:c().func.isRequired,queryCommandState:c().func.isRequired,queryCommandEnable:c().func.isRequired,shouldHide:c().func,editorState:c().object.isRequired,showDivider:c().bool.isRequired,showRightSpace:c().bool.isRequired,isMoreSection:c().bool,sectionIndex:c().number,replaceIconByOnlyChild:c().bool,onButtonRectInfoGet:c().func}},28183:function(e,t,n){"use strict";var o=n(68562),r=n(87363),i=n(47112),a=n.n(i),c=n(48457),s=(0,r.forwardRef)((function(e,t){var n=e.children,r=e.className;return(0,o.tZ)(c.eV,{block:"EditorToolbar",children:(0,o.tZ)("div",{ref:t,css:{width:"100%",display:"flex",justifyContent:"center"},children:(0,o.tZ)("div",{className:a()("toolbarV3",r),css:{display:"flex",overflowX:"auto",padding:"10px 0 10px 20px",boxShadow:"0px -0.5px 0px 0px rgba(235, 235, 235, 1) inset"},onMouseDown:function(e){return e.preventDefault()},children:n})})})}));t.Z=s},37372:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var o=n(68562),r=n(28183),i=n(63205),a=n(23288),c=n(4025),s=n(78194),u=n(20592),l=n(47859),d=n(60111),p=n(37452),h=n(87363);function f(e){var t=e.onCommand,n=e.queryCommandState,f=e.queryCommandEnable,m=e.editorState,v=e.toolbarMainAreaData,Z=e.toolbarMoreAreaData,g=e.toolbarFixtureAreaData,E=e.className,T=function(e){var t=e.toolbarMainAreaData,n=e.toolbarMoreAreaData,o=(0,s.Z)((0,h.useState)((function(){return[(0,p.fromJS)(t),(0,p.fromJS)(n)]})),2),r=o[0],i=o[1],a=(0,s.Z)((0,h.useState)(!1),2),c=a[0],f=a[1],m=(0,s.Z)((0,u.Z)(),2),v=m[0],Z=m[1],g=(0,h.useRef)(null),E=(0,h.useRef)(null),T=(0,h.useRef)(null),C=(0,h.useRef)(0),A=(0,l.Z)((function(e){e&&(g.current=e,C.current=e.offsetLeft)})),_=(0,h.useRef)([]),y=(0,l.Z)((function(e){var t=e.label,n=e.sectionIndex,o=e.buttonIndex,r=e.right;_.current.push({label:t,right:r,sectionIndex:n,buttonIndex:o}),_.current=_.current.sort((function(e,t){var n=e.sectionIndex,o=e.buttonIndex,r=t.sectionIndex,i=t.buttonIndex;return n>r?-1:n<r?1:o>i?-1:o<i?1:0}))})),S=(0,l.Z)((function(){var e,t,n,o=null==Z?void 0:Z.width,a=null==g||null===(e=g.current)||void 0===e?void 0:e.getBoundingClientRect().width,c=(null==E||null===(t=E.current)||void 0===t?void 0:t.getBoundingClientRect().width)||0,u=null==T||null===(n=T.current)||void 0===n?void 0:n.getBoundingClientRect().width;if(o&&a&&void 0!==c&&u){var l,d=o-c-u,p=null===(l=_.current)||void 0===l?void 0:l.find((function(e){var t=e.right;return d>t-C.current}));if(p){var h=p.sectionIndex,m=p.buttonIndex,v=h,A=m;h<3&&(v=3),(h<3||m<1)&&(A=1);var y=(0,s.Z)(r,2),S=y[0],I=y[1],b=S.getIn([v,"items"]),w=I.getIn([0,"items",0,"children"]),R=b.concat(w),N=R.slice(0,A+1),O=R.slice(A+1),D=S.setIn([v,"items"],N),B=I.setIn([0,"items",0,"children"],O);i([D,B])}}f(!1)}));return(0,h.useEffect)((function(){i([(0,p.fromJS)(t),(0,p.fromJS)(n)]),f(!0)}),[t]),(0,h.useEffect)((function(){c&&S()}),[c]),(0,h.useEffect)((function(){f(!0)}),[Z]),(0,d.Z)((function(){f(!0)})),{mainSections:r[0].toJS(),moreSections:r[1].toJS(),setToolbarRef:v,setMainAreaRef:A,moreAreaRef:E,fixAreaRef:T,setButtonRectInfo:y}}({toolbarMainAreaData:v,toolbarMoreAreaData:Z}),C=T.mainSections,A=T.moreSections,_=T.setToolbarRef,y=T.setMainAreaRef,S=T.moreAreaRef,I=T.fixAreaRef,b=T.setButtonRectInfo;return(0,o.BX)(r.Z,{ref:_,className:E,children:[(0,o.tZ)(i.Z,{ref:y,mainSections:C,setButtonRectInfo:b,onCommand:t,queryCommandState:n,queryCommandEnable:f,editorState:m}),(0,o.tZ)(c.Z,{ref:I,fixSections:g,queryCommandEnable:f,queryCommandState:n,onCommand:t,editorState:m}),(0,o.tZ)(a.Z,{ref:S,queryCommandState:n,queryCommandEnable:f,editorState:m,onCommand:t,moreSections:A})]})}},87676:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var o=n(8672),r=n(21620),i=n(84421),a=n(32554),c=n(68562),s=n(47112),u=n.n(s),l=n(75926),d=n.n(l),p=n(87363),h=n(86880),f=n(88483),m=n(16600),v=n(78724),Z=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.position,n=e.preset,o=e.restricted,r=e.className,i=e.childrenClassName,a=e.children,s=(0,v.Z)(e,["position","preset","restricted","className","childrenClassName","children"]);return(0,c.tZ)("div",{className:"TooltipContent-wrapper",children:(0,c.BX)("div",(0,m.Z)((0,f.Z)({className:u()("TooltipContent","TooltipContent--".concat(t),"TooltipContent--".concat(n),r)},s),{children:[(0,c.tZ)("div",{className:"TooltipContent-arrow"}),(0,c.tZ)("div",{className:u()("TooltipContent-children",i,{"TooltipContent-children--restricted":o}),children:a})]}))})},n}(p.Component);Z.propTypes={position:d().oneOf(["top","bottom","left","right"]),preset:d().oneOf(["black","white"]),restricted:d().bool,className:d().string,childrenClassName:d().string,children:d().node},Z.defaultProps={position:"top",preset:"black",restricted:!0};var g=Z,E=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this)).handleBodyClick=e.handleBodyClick.bind((0,o.Z)(e)),e.hideOnNextClick=!1,e}var s=n.prototype;return s.componentDidMount=function(){this.props.hideOnClick&&document.body.addEventListener("click",this.handleBodyClick)},s.UNSAFE_componentWillReceiveProps=function(e){var t=this.props,n=t.timeout,o=t.hideOnClick,r=t.onClose;!this.props.shown&&e.shown&&(o&&(this.hideOnNextClick=!0),-1!==n&&(this.timeoutId=setTimeout((function(){r&&r()}),n))),this.props.shown&&!e.shown&&this.reset()},s.componentWillUnmount=function(){this.reset(),this.props.hideOnClick&&document.body.removeEventListener("click",this.handleBodyClick)},s.handleBodyClick=function(){this.hideOnNextClick&&(this.reset(),this.props.onClose&&this.props.onClose())},s.reset=function(){this.hideOnNextClick=!1,clearTimeout(this.timeoutId)},s.render=function(){var e=this.props,t=e.className,n=e.contentClassName,o=e.contentChildrenClassName,r=e.preset,i=e.restricted,a=e.shown,s=e.x,l=e.y,d=e.position,p=e.content,f=e.children;return(0,c.tZ)(h.Z,{transitionName:"Tooltip",timeout:300,children:a&&(0,c.tZ)("div",{style:{left:s,top:l},className:u()("Tooltip",t),children:(0,c.tZ)(g,{className:n,childrenClassName:o,position:d,preset:r,restricted:i,children:p||f})},JSON.stringify({x:s,y:l}))})},n}(p.Component);E.propTypes={position:g.propTypes.position,preset:g.propTypes.preset,restricted:g.propTypes.restricted,className:d().string,contentClassName:d().string,contentChildrenClassName:d().string,shown:d().bool,timeout:d().number,hideOnClick:d().bool,onClose:d().func,content:d().node,x:d().number,y:d().number},E.defaultProps={position:g.defaultProps.position,preset:g.defaultProps.preset,restricted:g.defaultProps.restricted,shown:!0,timeout:-1,hideOnClick:!1};var T=E},81367:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var o=n(68562),r=n(47112),i=n.n(r),a=n(70175);function c(e){var t=e.header,n=e.options,r=e.className,c=e.onRef,s=e.showOptions,u=void 0===s||s;return(0,o.BX)("div",{className:i()("Topbar",r,a.Z.isMobileEntry&&"Topbar--mobile"),ref:c,children:[(0,o.tZ)("div",{className:"Topbar-title",children:t}),u&&(0,o.tZ)("div",{className:"Topbar-options",children:n})]})}},43676:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(78724),s=n(32554),u=n(68562),l=n(72864),d=n(24076),p=n(47112),h=n.n(p),f=n(75926),m=n.n(f),v=n(87363),Z=n(52495),g=n(52626),E=n(92799),T=n(17098),C=n(17222),A=n(93642),_=n(70164),y=n(73464),S=n(2886),I=n(91355),b=n(87655),w=n(96531),R=n(62372);var N=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).load=function(){var t=e.props,n=t.dispatch,o=t.id;n((0,w.hX)(o))},e.track=function(){var t=e.props.topic;e.hoverCardElement&&t&&(C.Z.setModule(e.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:t.id,item_num:t.questionsCount,follower_num:t.followersCount}}}),C.Z.trackCardShow(e.hoverCardElement))},e.handleFollow=e.props.authRequired((function(){var t=!e.props.topic.isFollowing;C.Z.trackEvent(e.hoverCardElement,{action:t?"Follow":"UnFollow",element:"Button"});var n=e.props,o=n.dispatch,r=n.id;o((0,w.KS)(r))}),I.q0.follow),e.handleOpen=function(){e.load(),e.track()},e}var l=n.prototype;return l.isTopicReady=function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,o=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===o)},l.render=function(){var e=this,t=this.props,n=t.toggler,o=t.topic,r=t.id,s=t.isLoading,l=t.onRef,d=(0,c.Z)(t,["toggler","topic","id","isLoading","onRef"]),p=o||{},h=p.name,f=p.introduction,m=p.totalPv,v=p.discussCount,Z=p.bestAnswersCount,g=p.avatarUrl,E=p.isFollowing,C=p.headerCard,I="//www.zhihu.com/topic/".concat(r),b=C&&C.avatarUrl||g;return(0,u.BX)(T.Z,(0,a.Z)((0,i.Z)({toggler:n,preventCloseOnTarget:!0,isLoading:s,onOpen:this.handleOpen,size:"large"},d),{ref:function(t){l&&"function"==typeof l&&l(t),e.hoverCardElement=t},children:[(0,u.tZ)(T.O,{title:(0,u.tZ)("a",{target:"_blank",rel:"noopener noreferrer",href:I,children:h}),avatarUrl:b,avatarFit:"cover"}),f&&(0,u.tZ)("div",{children:(0,u.tZ)(A.Z,{className:"HoverCard-description",html:f})}),(0,u.BX)("div",{children:[this.isTopicReady()&&(0,u.BX)(S.Z,{children:[(0,u.tZ)(S.Z.Item,{tag:R.Z,preset:"plain",a:!0,to:"".concat(I,"/questions"),name:"浏览量",value:(0,_.Zh)(Number(m)),isFormatted:!0,target:"_blank"}),(0,u.tZ)(S.Z.Item,{tag:R.Z,preset:"plain",a:!0,to:"".concat(I,"/top-answers"),name:"精华",value:Z,target:"_blank"}),(0,u.tZ)(S.Z.Item,{tag:R.Z,preset:"plain",a:!0,to:"".concat(I,"/followers"),name:"讨论量",target:"_blank",value:(0,_.Zh)(Number(v)),isFormatted:!0})]}),(0,u.tZ)("div",{className:"HoverCard-buttons",children:o&&(0,u.tZ)(y.ZP,{preset:"primary",color:E?"grey":"blue",onClick:this.handleFollow,children:E?"已关注":"关注话题"})})]})]}))},n}(v.Component),O=(0,g.compose)(b.Z,(0,Z.connect)((function(e,t){var n=t.id,o=e.entities.topics,r=e.loading.local;return{topic:o[n],isLoading:Boolean(r["topic/".concat(n)])}})))(N),D=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e,t=this.props,n=t.isMobile,o=t.topic,r=o.name,s=o.avatarUrl,p=o.id,f=o.headerCard,m=t.avatar,v=t.avatarProps,Z=t.noHoverCard,g=t.noLink,E=t.style,T=t.className,C=t.children,A=(t.dispatch,t.trackEvent,(0,c.Z)(t,["isMobile","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children","dispatch","trackEvent"])),_=void 0===Z?n:Z,y=f&&f.avatarUrl||s;e=m?(0,u.tZ)(l.qE,(0,i.Z)({className:"TopicLink-avatar",url:y,alt:r},v)):C||r,g||_||(e=(0,u.tZ)(O,{toggler:e,id:p}));var S=g?"span":d.pl,I=g?"":"a";return(0,u.tZ)(S,(0,a.Z)((0,i.Z)({style:E,className:h()("TopicLink",T),href:"//www.zhihu.com/topic/".concat(p),target:"_blank",as:I,zaBlock:"TopicLink"},A),{children:e}))},n}(v.Component);D.propTypes={topic:m().object.isRequired,user:m().object,avatar:m().bool,avatarProps:m().object,noHoverCard:m().bool,noLink:m().bool,style:m().object,className:m().string,children:m().node},D.defaultProps={avatar:!1,noLink:!1};var B=(0,g.compose)((0,Z.connect)((function(e){return{isMobile:(0,E.Hu)(e,{includeTablet:!0})}})))(D)},62459:function(e,t,n){"use strict";n.d(t,{OP:function(){return p},SS:function(){return h}});var o=n(88483),r=n(78194),i=n(68562),a=n(77568),c=n.n(a),s=n(87363),u=n(37694),l=n.n(u),d=(0,s.createContext)(null),p=function(){return(0,s.useContext)(d)},h=function(e){return c()((function(t){var n=p();return(0,i.tZ)(e,(0,o.Z)({traceId:n},t))}),e)};t.ZP=function(e){var t=e.children,n=(0,r.Z)((0,s.useState)((function(){return l()()})),1)[0];return(0,i.tZ)(d.Provider,{value:n,children:t})}},53830:function(e,t,n){"use strict";var o=n(88483),r=n(16600),i=n(78724),a=n(68562),c=n(87363),s=n(75926),u=n.n(s),l=n(93642),d=n(663),p=n(60732);function h(e){var t,n=e.user,s=e.noHeadline,u=(0,i.Z)(e,["user","noHeadline"]),h=n.headline,f=n.isOrg,m=n.subTitle,v=(0,c.useMemo)((function(){return(0,d.TE)(n.badgeV2||n.badge)}),[n]),Z=v.identity,g=v.bestAnswerer,E=v.baike,T=v.title;return m||T?(0,a.tZ)(l.Z,(0,o.Z)({html:m||T},u)):!f&&(null==g||null===(t=g.topics)||void 0===t?void 0:t.length)?(0,a.BX)("div",(0,r.Z)((0,o.Z)({},u),{children:[(0,a.tZ)(p.Z,{topics:g.topics,user:n}),"的优秀答主"]})):Z?(0,a.tZ)("div",(0,r.Z)((0,o.Z)({},u),{children:Z[0].description})):E?(0,a.tZ)("div",(0,r.Z)((0,o.Z)({},u),{children:E.description})):h&&!s?(0,a.tZ)(l.Z,(0,o.Z)({html:h},u)):null}h.propTypes={user:u().object.isRequired,noHeadline:u().bool},t.Z=(0,c.memo)(h)},93238:function(e,t,n){"use strict";var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(75926),s=n.n(c),u=n(87363),l=n(17222),d=n(70164),p=n(40937),h=n(70175),f=n(8905),m=n(59836),v=n(69298),Z=n(53830),g=n(24336),E=n(67206),T=n(26494),C=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}var c=n.prototype;return c.componentDidMount=function(){var e=this.props.user;l.Z.setModule(this,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:e.id,follower_num:e.followerCount}}})},c.renderRewardDetails=function(){var e=this.props.user,t=e.amount,n=e.rewardCreated;return(0,a.BX)("div",{className:"ContentItem-rewardDetails",children:[(0,a.tZ)("p",{className:"ContentItem-rewardAmount",children:t&&"赞赏了 ¥".concat(t/100)}),(0,a.tZ)("p",{className:"ContentItem-rewardTime",children:(0,p.rL)(n)})]})},c.render=function(){var e=this.props,t=e.user,n=t.urlToken,o=t.isFollowed,r=t.isFollowing,i=t.answerCount,c=t.articlesCount,s=t.followerCount,u=t.id,l=t.isOrg,p=e.user,C=e.type,A=e.isRewardList,_=e.action,y=e.meta,S=e.status,I=e.noTrackCardShow,b=e.onClick,w=e.currentUser,R=!n,N=w&&w.id===u,O=void 0!==_?_:!N&&!R&&(0,a.tZ)(m.Z,{id:p.urlToken,type:C||p.type,preset:m.Z.PRESETS.primary,gender:p.gender,isFollowing:r,onClick:b}),D=void 0!==y?y:R||(0,a.tZ)(Z.Z,{user:p}),B=void 0!==S?(0,a.tZ)(f.qb,{children:S}):!R&&(0,a.BX)(f.qb,{children:[Boolean(i)&&"".concat((0,d.uf)(i)," 回答"),Boolean(c)&&"".concat((0,d.uf)(c)," 文章"),Boolean(s)&&"".concat((0,d.uf)(s)," 关注者")]}),P="//www.zhihu.com/".concat(l?"org":"people","/").concat(n||u),k=this.props.userLinkV2;return(0,a.tZ)(f.ZP,{data:p,link:P,image:k?(0,a.tZ)(T.Z,{className:"UserItem-avatar",avatarProps:{size:h.Z.isMobileEntry?46:60},user:p,target:"_blank"}):(0,a.tZ)(g.Z,{className:"UserItem-avatar",avatar:!0,avatarProps:{size:h.Z.isMobileEntry?46:60},user:p,target:"_blank"}),title:(0,a.BX)("div",{className:"UserItem-title",children:[k?(0,a.tZ)(E.Z,{user:p,target:"_blank"}):(0,a.tZ)(g.Z,{user:p,target:"_blank"}),(0,a.tZ)(v.Z,{isFollowing:r,isFollowed:o})]}),meta:(0,a.BX)("div",{children:[D,B]}),noTrackCardShow:I,extra:A?this.renderRewardDetails():O})},n}(u.Component);C.propTypes={action:s().node,status:s().node,meta:s().node,type:s().string,isRewardList:s().bool,onClick:s().func,currentUser:s().object},t.Z=C},88946:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var o=n(88483),r=n(16600),i=n(78724),a=n(68562),c=n(52495),s=n(8567),u=n(92799),l=n(87363),d=n(58386),p=n.n(d),h=n(52028),f=n(57948),m=n(17222),v=n(47859),Z=n(24076);function g(e,t){var n=e.isPinProfile,c=e.user,s=e.isPinDaily,u=e.onClick,l=void 0===u?p():u,d=e.children,g=(0,i.Z)(e,["isPinProfile","user","isPinDaily","onClick","children"]),E=c.id,T=c.urlToken,C=c.isOrg,A=c.url,_=c.maskLevel,y="//www.zhihu.com/".concat(C?"org":"people","/").concat(T||E),S="zhihu://pin".concat(A,"/moments"),I=(0,v.Z)((function(e){s&&"A"===e.target.nodeName&&m.Z.trackEvent(e.target,{id:2065}),n&&(e.preventDefault(),(0,f.Z)("base/openURL").dispatch({url:S})),_&&e.preventDefault(),l(e)}));return(0,a.tZ)(Z._o,{zaText:!0,zaBlock:"User",children:(0,a.tZ)(h.Link,(0,r.Z)((0,o.Z)({ref:t,to:y,href:y,target:"_blank",onClick:I,className:"UserLink-link","data-za-detail-view-element_name":"User"},g),{children:d}))})}var E=(0,l.forwardRef)(g),T=n(97288);var C=function(e){var t=e.user,l=e.noHoverCard,d=e.noLink,p=e.children,h=(0,i.Z)(e,["user","noHoverCard","noLink","children"]),f=t.id,m=t.urlToken,v=!(0,T.e)(t)||d,Z=(0,c.useSelector)((function(e){return(0,u.Hu)(e,{includeTablet:!0})})),g=null!=l?l:Z,C=(0,s.Z)((function(){return Promise.all([n.e(4667),n.e(9597)]).then(n.bind(n,3321))}),!g);if(v)return p||null;var A=(0,a.tZ)(E,(0,r.Z)((0,o.Z)({},h),{user:t,children:p}));return g||!C?A:(0,a.tZ)(C,{toggler:A,id:f,urlToken:m,user:t})}},25290:function(e,t,n){"use strict";var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(75926),s=n.n(c),u=n(87363),l=n(52495),d=n(91840),p=n(17222),h=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}var c=n.prototype;return c.componentDidMount=function(){var e=this.props.zaViewName;(0,d.y3)(this.node,(function(){p.Z.trackCardShow(null,{id:3613,name:e})}))},c.render=function(){var e=this,t=this.props,n=t.theme,o=t.zaViewName,r=t.vipIcon,i=r.nightModeUrl,c=r.url,s="light"===n?c:i;return(0,a.tZ)("a",{className:"UserLink-vipIcon",href:"https://www.zhihu.com/vip",target:"_blank",rel:"noopener noreferrer",ref:function(t){return e.node=t},"data-za-detail-view-id":3612,"data-za-detail-view-name":o,children:(0,a.tZ)("img",{src:s,alt:"zhihu vip"})})},n}(u.Component);h.propTypes={vipIcon:s().shape({nightModeUrl:s().string,url:s().string}).isRequired,zaViewName:s().string},t.Z=(0,l.connect)((function(e){return{theme:e.env.theme}}))(h)},24336:function(e,t,n){"use strict";var o=n(88483),r=n(16600),i=n(78724),a=n(68562),c=n(72864),s=n(663),u=n(8567),l=n(47112),d=n.n(l),p=n(72928),h=n.n(p),f=n(75926),m=n.n(f),v=n(52495),Z=n(52028),g=n(17222),E=n(57948),T=n(92799),C=n(25290),A=n(97288),_=function(e){var t,l=e.isPinProfile,p=e.onClick,f=e.isPinDaily,m=e.user,_=e.avatar,y=e.avatarProps,S=e.showVipIcon,I=e.vipIconZaViewName,b=e.badgeProps,w=e.noBadge,R=e.noLink,N=e.noHoverCard,O=e.style,D=e.className,B=e.children,P=(0,i.Z)(e,["isPinProfile","onClick","isPinDaily","user","avatar","avatarProps","showVipIcon","vipIconZaViewName","badgeProps","noBadge","noLink","noHoverCard","style","className","children"]),k=(0,v.useSelector)((function(e){return(0,T.Hu)(e,{includeTablet:!0})})),x=m.id,L=m.name,U=m.avatarUrl,F=m.urlToken,M=m.isOrg,G=m.vipInfo,z=m.url,H=m.maskLevel,q=void 0===N?k:N,V=(0,u.Z)((function(){return Promise.all([n.e(4667),n.e(9597)]).then(n.bind(n,3321))}),!q&&!k);t=_?(0,a.tZ)(c.qE,(0,o.Z)({className:"UserLink-avatar",url:U,alt:L},y)):B||L;var X=Boolean((0,A.e)(m)),W="//www.zhihu.com/".concat(M?"org":"people","/").concat(F||x),K="zhihu://pin".concat(z,"/moments");return X&&!R&&(t=(0,a.tZ)(Z.Link,(0,r.Z)((0,o.Z)({className:"UserLink-link","data-za-detail-view-element_name":"User",to:W,target:"_blank",onClick:function(e){return function(t){f&&"A"===t.target.nodeName&&g.Z.trackEvent(t.target,{id:2065}),l&&(t.preventDefault(),(0,E.Z)("base/openURL").dispatch({url:e})),H&&t.preventDefault(),p&&"function"==typeof p&&p(t)}}(K)},h()(P,["isPinProfile","trackEvent","onClick","dispatch","isPinDaily"])),{children:t})),!q&&V&&(t=(0,a.tZ)(V,{toggler:t,id:x,urlToken:F,user:m}))),(0,a.BX)("span",{style:O,className:d()("UserLink",D),children:[t,X&&!w&&!_&&(0,a.tZ)(s.Vh,(0,o.Z)({css:{marginLeft:".3em"},isOrg:M,badge:m.badgeV2||m.badge,linkify:!0,enableTooltip:!0},b)),X&&S&&!_&&G&&G.vipIcon&&(0,a.tZ)(C.Z,{vipIcon:G.vipIcon,zaViewName:I})]})};_.propTypes={user:m().object.isRequired,avatar:m().bool,avatarProps:m().object,noBadge:m().bool,noHoverCard:m().bool,showVipIcon:m().bool,style:m().object,className:m().string,children:m().node,isPinProfile:m().bool,isPinDaily:m().bool},_.defaultProps={avatar:!1,noBadge:!1,showVipIcon:!1},t.Z=_},97288:function(e,t,n){"use strict";function o(e){var t=e.id,n=e.urlToken;return"0"===t?null:Boolean(n||t)}n.d(t,{e:function(){return o}})},26494:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var o=n(88483),r=n(16600),i=n(78724),a=n(68562),c=n(72864),s=n(47112),u=n.n(s),l=n(88946);function d(e){var t=e.className,n=e.user,s=void 0===n?{}:n,d=e.avatarProps,p=void 0===d?{}:d,h=(0,i.Z)(e,["className","user","avatarProps"]),f=s.name,m=s.avatarUrl;return(0,a.tZ)("span",{className:u()("UserLink",t),children:(0,a.tZ)(l.Z,(0,r.Z)((0,o.Z)({},h),{user:s,children:(0,a.tZ)(c.qE,(0,o.Z)({className:"UserLink-avatar",url:m,alt:f},p))}))})}},67206:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var o=n(88483),r=n(16600),i=n(78724),a=n(68562),c=n(47112),s=n.n(c),u=n(663),l=n(97288),d=n(21620),p=n(84421),h=n(32554),f=n(87363),m=(f.Component,n(48457)),v=n(52117),Z=n(83958),g=n(26223);function E(e){var t=e.vipInfo,n=(0,i.Z)(e,["vipInfo"]),c=function(e){var t=e.vipIcon,n=e.imageToken,o=e.nightModeToken,r=(0,g.F)().isDarkMode,i=t||{},a=i.url,c=i.nightModeUrl;return r?o?"https://picx.zhimg.com/".concat(o):c:n?"https://picx.zhimg.com/".concat(n):a}(t);return(0,a.BX)(m.$U,(0,r.Z)((0,o.Z)({as:"span",rel:"noopener noreferrer",zaBlock:"VipBadge",zaType:"Button",zaEventType:"Click",onClick:Z.Z.show,css:{cursor:"pointer",display:"inline-flex",alignItems:"center"}},n),{children:["​",c?(0,a.tZ)("img",{src:c,alt:"",css:{width:"1em",height:"1em"}}):(0,a.tZ)(v.Z,{css:{height:"1em",width:"1em"}})]}))}var T=(0,f.memo)(E),C=n(25290),A=n(88946);function _(e){var t,n,c=e.className,d=e.showVipIcon,p=e.vipIconZaViewName,h=e.user,f=void 0===h?{}:h,m=e.noBadge,v=e.noVipBadge,Z=void 0!==v&&v,g=e.children,E=e.badgeProps,_=void 0===E?{}:E,y=(0,i.Z)(e,["className","showVipIcon","vipIconZaViewName","user","noBadge","noVipBadge","children","badgeProps"]),S=(0,l.e)(f),I=S&&!m,b=(null===(t=f.vipInfo)||void 0===t?void 0:t.isVip)&&!Z,w=S&&d&&(null===(n=f.vipInfo)||void 0===n?void 0:n.vipIcon);return(0,a.BX)("span",{className:s()("UserLink",c),children:[(0,a.tZ)(A.Z,(0,r.Z)((0,o.Z)({},y),{user:f,children:g||f.name})),I&&(0,a.tZ)(u.Vh,(0,o.Z)({css:{marginLeft:".3em"},isOrg:f.isOrg,badge:f.badgeV2||f.badge,linkify:!0,enableTooltip:!0},_)),b&&(0,a.tZ)(T,{vipInfo:f.vipInfo,css:{marginLeft:".3em"}}),w&&(0,a.tZ)(C.Z,{vipIcon:f.vipInfo.vipIcon,zaViewName:p})]})}},35981:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var o=n(78194),r=n(68562),i=n(47859),a=n(69975),c=n(47112),s=n.n(c),u=n(87363),l=n.n(u),d=n(48457),p=n(55270),h=n(97645),f=n.n(h),m=n(73464);var v=n(16915),Z=Object.assign;var g=function(e){return l().createElement(v.Z,Z({width:"1.2em",height:"1.2em",viewBox:"0 0 24 24"},e),l().createElement("path",{fillRule:"evenodd",d:"M19.027 10c.239.01 1.973.138 1.973 2l-.001 8.027c-.009.24-.137 1.973-2 1.973H5.003C3.138 22 3.009 20.266 3 20.027V12c0-1.862 1.733-1.99 1.972-2Zm-8.481 3.004c-.475-.277-.86-.064-.86.5V18.5c0 .553.394.773.86.5l4.278-2.496c.475-.277.466-.731 0-1.003ZM18 2a2 2 0 0 1 2 2v1.134a1 1 0 0 1 1.207 1.573l-1.5 1.5a1 1 0 0 1-1.414 0l-1.5-1.5A1 1 0 0 1 18 5.134V4h-2a1 1 0 1 1 0-2h2Zm-8 4a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2h6Zm2-4a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2h8Z"}))},E=n(26171),T="vessayTipShown",C=!1,A=function(){var e=(0,o.Z)((0,u.useState)(!1),2),t=e[0],n=e[1],a=(0,u.useRef)(null);(0,u.useEffect)((function(){f().get(T)||n(!0)}),[]),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(0,u.useRef)({boundaryRef:t,callback:e});(0,u.useEffect)((function(){n.current={boundaryRef:t,callback:e}})),(0,u.useEffect)((function(){var e=function(e){var t,o=n.current,r=o.boundaryRef,i=o.callback;null!==r&&(null==r||null===(t=r.current)||void 0===t?void 0:t.contains(e.target))||i(e)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[])}((function(){n(!1),f().set(T,!0)}),a);var c=(0,i.Z)((function(e){e.stopPropagation(),n(!1),f().set(T,!0)}));return t&&(0,r.tZ)("img",{ref:a,onClick:c,onKeyUp:c,src:"https://pic1.zhimg.com/v2-97ce1cdeee383ce98263fc787f08ba9e.png",alt:"一键生成视频",css:{width:"347px",height:"120px",objectFit:"cover",transform:"translate(-50%, -100%)",position:"absolute",top:"4px",left:"50%"}})},_=function(e){var t=e.className,n=e.type,i=e.id,c=e.useVessayV2,l=e.isAuthor,h=(0,E.Mr)(n,i,c),v=(0,p.isBrowser)()&&location.href.includes("/people"),Z=(0,o.Z)((0,u.useState)(!1),2),_=Z[0],y=Z[1],S=(0,o.Z)((0,a.Z)({once:!0}),2),I=S[0],b=S[1];return(0,u.useEffect)((function(){b&&!C&&(C=!0,y(!0))}),[b]),(0,r.BX)(d.$U,{as:m.ZP,zaAction:"OpenUrl",zaText:"生成视频",zaType:"Button",preset:"plain",onClick:function(){f().set(T,!0),window.open(h)},className:s()("ContentItem-convertVideoButton",t),css:{position:"relative"},extra:{link:{url:h}},children:[_&&l&&v&&(0,r.tZ)(A,{}),(0,r.tZ)(g,{}),(0,r.tZ)("span",{ref:I,children:"一键生成视频"})]})}},5150:function(e,t,n){"use strict";n.d(t,{Z:function(){return X}});var o=n(78194),r=n(68562),i=n(71113),a=n(69975),c=n(47859),s=n(43137),u=n(69045),l=n(87363),d=n.n(l),p=n(4428),h=n(8518),f=n(20592),m=n(70175),v=n(35314),Z=n(8567),g=n(48457),E={width:null},T=1920,C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";if(E.width)return t?"".concat(E.width/T*e).concat(t," "):E.width/T*e},A=function(e){var t=e.src;return(0,r.tZ)("div",{css:{margin:"auto 0",width:C(240),height:C(240),borderRadius:C(240),position:"absolute",left:"50%",transform:"translate(-50%,0)",backgroundColor:"#eee",fontSize:0},children:t&&(0,r.tZ)("img",{width:"100%",css:{borderRadius:C(240)},src:t,alt:"头像"})})},_=n(88483),y=n(78724),S=n(3404),I=n(40491),b=n.n(I)()((function(){return new Promise((function(e){return requestAnimationFrame((function(){return setTimeout(e)}))}))})),w=function(e,t){var i=e.renderer,a=void 0===i?"svg":i,c=e.loop,s=void 0===c||c,u=e.autoplay,d=void 0===u||u,p=e.data,h=e.src,f=(0,y.Z)(e,["renderer","loop","autoplay","data","src"]),m=(0,l.useRef)(),v=(0,Z.Z)((function(){return n.e(6018).then(n.t.bind(n,60970,23))}),function(){var e=(0,o.Z)((0,l.useState)(!1),2),t=e[0],n=e[1];return(0,l.useEffect)((function(){b().then((function(){return n(!0)}))}),[]),t}());return(0,l.useImperativeHandle)(t,(function(){return{get lottie(){return v}}})),(0,l.useEffect)((function(){v&&v.loadAnimation({container:m.current,renderer:a,loop:s,autoplay:d,animationData:p,path:h})}),[v]),(0,r.tZ)(S.Box,(0,_.Z)({ref:m},f))},R=(0,l.forwardRef)(w),N=function(e){var t=e.showKanShan,n=e.src;return(0,r.tZ)("div",{css:{position:"absolute",top:C(-120),left:C(100),backgroundColor:"#000",width:C(300),height:C(250),overflow:"hidden"},children:n&&(0,r.tZ)(R,{loop:!1,autoPlay:!0,src:n,css:{position:"absolute",top:C(-80),left:C(-250),opacity:t?1:0,width:C(600),height:C(600)}})})},O=n(16915),D=Object.assign;var B=function(e){return d().createElement(O.Z,D({width:"318",height:"28",fill:"none",viewBox:"0 0 318 28"},e),d().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M290.976 20.112a.862.862 0 0 0 .61.253l9.471-.043a26.203 26.203 0 0 1-9.802 3.972 1.172 1.172 0 0 0-.536.62c-.098.264-.097.555.004.82a1.337 1.337 0 0 0 1.612.417 25.695 25.695 0 0 0 10.435-5.268v5.599a1.077 1.077 0 0 0 1.079 1.079 1.079 1.079 0 0 0 1.08-1.08v-5.757a24.248 24.248 0 0 0 10.434 5.268 1.21 1.21 0 0 0 1.512-.432c.144-.72-.044-1.223-.547-1.439a27.624 27.624 0 0 1-9.687-3.756h9.471a.976.976 0 0 0 .979-.864c0-.576-.331-.864-.979-.864h-11.183v-1.611a1.078 1.078 0 0 0-1.08-1.08 1.079 1.079 0 0 0-1.079 1.08v1.611h-11.184a.863.863 0 0 0-.61 1.475Zm.144-10.414a.891.891 0 0 0 .567.217l5.901.044c-.193.238-.384.436-.574.634-.234.244-.468.487-.707.805-.432.576-.331.993.317 1.281l5.268 1.295a54.534 54.534 0 0 1-9.572 1.44.78.78 0 0 0-.701.71c-.01.121.008.242.054.355a1.062 1.062 0 0 0 1.18.762 54.98 54.98 0 0 0 12.104-2.475c4.011 1.142 6.847 1.967 8.507 2.475a1.222 1.222 0 0 0 1.439-.546.936.936 0 0 0 .08-.576.916.916 0 0 0-.613-.706c-1.007-.215-2.691-.618-5.066-1.194-.849-.216-1.497-.389-1.929-.533a10.786 10.786 0 0 0 3.656-3.77h4.851c.561-.072.964-.173.964-.749 0-.576-.331-.863-.964-.863h-14.293c.192-.27.409-.52.648-.749.288-.36.504-.619.648-.763a.74.74 0 0 0 .117-.712.741.741 0 0 0-.549-.468 1.44 1.44 0 0 0-1.612.432c-.278.466-.606.9-.979 1.295-.36.432-.604.749-.748.965h-7.427a.937.937 0 0 0-.863.863.888.888 0 0 0 .296.53Zm22.257-2.575c.058.504.418.864 1.065.864.705 0 1.037-.288 1.022-.749V4.763a1.194 1.194 0 0 0-1.194-1.18h-8.924a12 12 0 0 0-.763-2.375c-.187-.504-.647-.648-1.439-.648a1.05 1.05 0 0 0-.864 1.18 2.564 2.564 0 0 0 .216.648c.174.387.318.786.432 1.195h-9.514c-.863 0-1.295.388-1.295 1.18v2.36c.067.5.427.787 1.079.864a.963.963 0 0 0 .965-.864V5.684a.46.46 0 0 1 .532-.533h18.25c.288 0 .432.173.432.533v1.44Zm-11.327 5.268-2.878-.748h.057c-.36-.072-.59-.173-.245-.533a20.893 20.893 0 0 0 1.065-1.195h8.463a8.272 8.272 0 0 1-3.871 3.124l-2.591-.648ZM136.762 5.913c.178.16.41.247.649.246l12.061-.043a.92.92 0 0 0 .849-.864.965.965 0 0 0-.849-.964h-4.635v-.23a.558.558 0 0 0 .059-.11 1.08 1.08 0 0 0 .041-.123.797.797 0 0 0 .016-.084 9.725 9.725 0 0 1-.432-1.828 3.386 3.386 0 0 0-.216-.648 1.124 1.124 0 0 0-1.295-.647.88.88 0 0 0-.759.711.879.879 0 0 0 .01.368c.023.07.049.154.079.252.049.164.107.368.176.612l.062.216c.077.487.187.968.331 1.439v.115h-5.498a1.004 1.004 0 0 0-.964.964.96.96 0 0 0 .315.618Zm.132 17.768c.084.095.187.17.301.224h-.014a.944.944 0 0 0 1.079-.125.947.947 0 0 0 .23-.306 35.592 35.592 0 0 0 2.145-4.635c.144-.432-.029-.82-.533-1.18-.647-.072-1.036.144-1.18.648-.144.33-.36.791-.648 1.439a62.54 62.54 0 0 1-1.511 2.878.947.947 0 0 0-.097.57.931.931 0 0 0 .228.488Zm1.725-7.975c.221.224.521.352.836.355l3.137-.043v7.096c0 1.08-.504 1.511-1.439 1.511h-1.439c-.576 0-.864.317-.864.964a1.183 1.183 0 0 0 1.108 1.008 7.872 7.872 0 0 0 1.713-.101c2.015 0 2.951-1.036 2.807-3.123V16.06h3.008a1.195 1.195 0 0 0 1.18-1.194V9.815a1.186 1.186 0 0 0-.729-1.09 1.177 1.177 0 0 0-.451-.09h-8.031a1.238 1.238 0 0 0-1.181 1.28v4.952c0 .314.124.616.345.84Zm1.598-1.933v-2.879h-.014a.482.482 0 0 1 .133-.414.472.472 0 0 1 .414-.133h5.484a.488.488 0 0 1 .28.048l.028.015a.498.498 0 0 1 .241.39.48.48 0 0 1-.002.095v2.878a.49.49 0 0 1-.304.5l-.015.006-.012.004a.49.49 0 0 1-.216.022h-5.484a.473.473 0 0 1-.511-.318.474.474 0 0 1-.022-.214Zm8.234 7.959a.877.877 0 0 0 .258-.086h-.014a1.036 1.036 0 0 0 .446-1.137c-.144-.331-.389-.792-.748-1.44l-.864-1.295a1.021 1.021 0 0 0-1.295-.317.808.808 0 0 0-.44.45.813.813 0 0 0 .008.63c.288.49.863 1.396 1.727 2.677a.856.856 0 0 0 .735.527.831.831 0 0 0 .187-.01Zm1.371-11.808a.98.98 0 0 0 .614.323l2.274.014c-.076 6.237-1.727 11.15-4.951 14.738a1.207 1.207 0 0 0 .202 1.44 1.193 1.193 0 0 0 1.439-.216c3.234-3.877 4.994-9.221 5.282-16.034h.864a.858.858 0 0 0-.064.146l-.006.02-.016.054a.943.943 0 0 0-.029.212v12.694c0 1.986.906 2.879 2.691 2.879h.979c1.857.1 2.907-.864 3.109-2.879a6.564 6.564 0 0 1 .115-.964c.121-.859.193-1.724.216-2.59a1.034 1.034 0 0 0-.749-1.181.675.675 0 0 0-.863.648c-.015.433-.053.866-.115 1.295a20.009 20.009 0 0 1-.216 2.044c-.087 1.209-.59 1.713-1.44 1.713h-.547c-.791.13-1.18-.375-1.18-1.44V10.463l-.1-.216h4.087a.978.978 0 0 0 0-1.943h-6.678c0-.72.029-1.857.115-3.44V1.625a1.083 1.083 0 0 0-1.08-.964 1.022 1.022 0 0 0-.978.964c0 1.285-.028 2.51-.054 3.674-.024 1.053-.047 2.055-.047 3.005h-2.26a.98.98 0 0 0-.614 1.62Zm7.293-5.391c1.065.935 1.755 1.554 2.043 1.842h-.014c.576.36 1.022.417 1.454.029.431-.389.46-.864.1-1.44a16.122 16.122 0 0 1-1.281-1.065c-.647-.503-1.079-.834-1.295-.978-.619-.36-1.094-.36-1.439 0a.748.748 0 0 0-.246.237.739.739 0 0 0 .131.943 3.539 3.539 0 0 0 .547.432ZM1.629 5.295c0 .648.288.965.85.965l6.462.043a38.14 38.14 0 0 1-7.643 8.938 1.353 1.353 0 0 0-.216 1.612.95.95 0 0 0 .66.482l.018.003a.948.948 0 0 0 .834-.27 33.572 33.572 0 0 0 3.555-3.44v12.48a1.151 1.151 0 0 0 1.18 1.079 1.108 1.108 0 0 0 1.08-1.08V20.94h13.226v1.828c.072 1.296-.561 1.9-1.929 1.828h-3.022c-.49 0-.749.288-.749.864.077.652.51 1.012 1.296 1.08h3.152c2.447 0 3.584-1.109 3.454-3.34V10.722a1.295 1.295 0 0 0-1.295-1.296H9.588a118.968 118.968 0 0 0 1.943-3.123h14.623a.965.965 0 0 0 0-1.929H12.597c.445-.673.807-1.398 1.079-2.159a1.137 1.137 0 0 0-.648-1.439 1.252 1.252 0 0 0-1.612.964l-1.295 2.591H2.478c-.561 0-.849.317-.849.964Zm6.78 8.924v-2.476a.475.475 0 0 1 .532-.532h12.162a.474.474 0 0 1 .331.08l.01.006.007.006.01.008a.496.496 0 0 1 .039.035.475.475 0 0 1 .135.397v2.476H8.408Zm0 4.85v-3.008h13.226v3.008H8.408Zm32.966 7.851c.201.201.471.317.755.324a1.109 1.109 0 0 0 1.08-1.08V7.34a.951.951 0 0 0-1.08-1.08 1.109 1.109 0 0 0-1.079 1.08v18.826c.007.284.123.554.324.755Zm4.992-20.744c.148-.047.284-.127.398-.233h-.029a.993.993 0 0 0 .058-1.511 37.095 37.095 0 0 0-2.792-2.879 1.166 1.166 0 0 0-1.613-.216.993.993 0 0 0-.114 1.44c.523.434 1.004.916 1.439 1.439.508.476.989.98 1.439 1.511a1.05 1.05 0 0 0 1.214.45Zm1.83 13.43.075.005.025.001a1.174 1.174 0 0 0 .18-.01l8.334.072a1.324 1.324 0 0 0 1.44-1.281v-8.046a1.224 1.224 0 0 0-1.44-1.44h-8.333c-.85 0-1.281.505-1.281 1.44v7.974a1.135 1.135 0 0 0 1 1.284Zm7.73 6.583c.236.197.533.306.84.307h.044c1.828 0 3.08-.043 3.757-.086 2.648-.072 3.914-1.396 3.77-3.973V3.928a1.44 1.44 0 0 0-1.439-1.44H49.341a1.022 1.022 0 0 0-.964.98 1.05 1.05 0 0 0 .964 1.065h12.162c.432 0 .648.187.648.546v16.898c.072 1.64-.72 2.36-2.36 2.36h-3.455c-.72.067-1.007.427-.863 1.08.056.302.217.575.453.772Zm.193-9.063c0 .36-.216.547-.647.547h-5.758c-.431 0-.647-.187-.647-.547v-5.584a.763.763 0 0 1 .648-.648h5.757a.763.763 0 0 1 .647.648v5.584Zm22.755-1.713a.892.892 0 0 1-.748-.863c.072-.576.317-.864.748-.864h10.766c.504 0 .749.288.749.864a.892.892 0 0 1-.749.863h-3.555v2.879h3.224c.504 0 .763.288.763.85 0 .56-.26.69-.763.762h-3.224v3.656a11.3 11.3 0 0 0 4.088.647c4.02.144 8.338.144 12.953 0 .777 0 1.18.317 1.18.965a.992.992 0 0 1-.217.586 1.022 1.022 0 0 1-.963.378h-5.383c-3.526.072-6.102.072-7.757 0-4.443-.144-7.322-1.468-8.636-3.972a16.162 16.162 0 0 1-1.44 3.972.874.874 0 0 1-.936.472.879.879 0 0 1-.344-.14.979.979 0 0 1-.331-1.296 15.544 15.544 0 0 0 1.727-7.643.936.936 0 0 1 .863-.863c.648 0 .965.287.965.863a9.196 9.196 0 0 1-.115 1.08c.017.362-.017.726-.101 1.08a9.267 9.267 0 0 0 2.519 3.022v-7.312l-5.283.014Zm2.26-3.871c-.864 0-1.295-.403-1.295-1.195V3.251c0-.791.431-1.194 1.295-1.194h6.678a1.236 1.236 0 0 1 1.281 1.194v7.096c0 .792-.417 1.195-1.28 1.195h-6.679Zm.533-7.326v1.828h5.498V4.216c0-.36-.144-.533-.432-.533h-4.419c-.432 0-.647.173-.647.533Zm5.066 5.757c.288 0 .432-.187.432-.547V7.497h-5.498v1.929c0 .36.215.547.647.547h4.419Zm5.052 13.241a.99.99 0 0 1-1.428-.335.994.994 0 0 1 .463-1.392 7.34 7.34 0 0 0 5.268-8.175v-2.59c0-.576.331-.864.979-.864.648 0 .921.36.864.863v2.591a19.18 19.18 0 0 1-.332 3.757l2.879 2.26c1.079.863 1.871 1.438 2.375 1.827a.89.89 0 0 1 .348 1.105.9.9 0 0 1-.247.334c-.36.432-.821.461-1.44.101-.356-.207-.693-.543-1.121-.969-.315-.314-.68-.677-1.138-1.075-1.08-.935-1.871-1.568-2.375-1.928a10.306 10.306 0 0 1-5.095 4.548v-.058Zm-.502-19.369a.763.763 0 0 1-.678-.867.935.935 0 0 1 .863-.864h11.629a.878.878 0 0 1 0 1.728h-5.282l-.431 3.108h4.044a1.167 1.167 0 0 1 .251.02l.024.005a1.156 1.156 0 0 1 .861.779c.05.159.065.327.044.492v8.635c0 .576-.317.864-.964.864a.765.765 0 0 1-.864-.864V9.138a.46.46 0 0 0-.532-.532h-6.146c-.432 0-.633.172-.633.532v7.815a.863.863 0 1 1-1.727 0V8.246c0-.792.431-1.195 1.295-1.195h2.26l.532-3.109-4.36-.1a.762.762 0 0 1-.186.003Zm85.487 8.459a1.226 1.226 0 0 1-.678.022 1.24 1.24 0 0 1-.772-.583c-.287-.56-.1-1.108.547-1.612a29.074 29.074 0 0 0 10.651-8.074 2.69 2.69 0 0 1 1.612-.964 2.117 2.117 0 0 1 1.612.964 24.714 24.714 0 0 0 10.55 7.758 1.048 1.048 0 0 1 .46.218 1.034 1.034 0 0 1 .188 1.394 1.339 1.339 0 0 1-1.728.431A30.56 30.56 0 0 1 188.462 3.9c-.216-.216-.403-.216-.547 0a34.166 34.166 0 0 1-10.866 8.276 1.264 1.264 0 0 1-.278.129Zm-.039 5.628a1.078 1.078 0 0 1-.979-1.08 1.021 1.021 0 0 1 .979-.963h22.697a1.064 1.064 0 0 1 1.08.964 1.11 1.11 0 0 1-1.08 1.08h-12.162a71.474 71.474 0 0 1-5.397 5.612.292.292 0 0 0-.086.202s0 .1.216.1c3.655-.143 7.527-.32 11.615-.532a30.668 30.668 0 0 0-2.26-2.26 1.065 1.065 0 0 1 0-1.439 1.268 1.268 0 0 1 1.626.1l1.713 1.728c1.25 1.198 2.199 2.17 2.884 2.872.261.268.484.496.671.683a.957.957 0 0 1 .206.344.994.994 0 0 1-.307 1.096 1.122 1.122 0 0 1-1.626-.101 6.447 6.447 0 0 1-.532-.648l-.648-.648c-.648 0-1.684 0-3.123.216-5.095.216-8.996.389-11.731.547-.935 0-1.54-.187-1.827-.763a1.811 1.811 0 0 1 .647-1.928 34.96 34.96 0 0 0 5.052-5.283l-7.628.101Zm5.052-5.599a1.051 1.051 0 0 1-.965-1.065 1.022 1.022 0 0 1 .965-.978h12.594a1.024 1.024 0 0 1 .964.978 1.054 1.054 0 0 1-.964 1.065h-12.594Zm32.499-7.038c0 .648.288.965.849.965l6.549.043a37.813 37.813 0 0 1-7.643 8.938 1.353 1.353 0 0 0-.216 1.612.955.955 0 0 0 1.08.415.95.95 0 0 0 .36-.2 33.584 33.584 0 0 0 3.555-3.44v12.48a1.15 1.15 0 0 0 1.18 1.079 1.107 1.107 0 0 0 1.079-1.08V20.94h13.242v1.828c.057 1.296-.504 1.9-1.943 1.828h-3.009c-.503 0-.762.288-.762.864.067.652.499 1.012 1.295 1.08h3.224c2.447 0 3.584-1.109 3.454-3.34V10.722a1.294 1.294 0 0 0-1.295-1.296h-13.097a118.765 118.765 0 0 0 1.942-3.123h14.696a.962.962 0 0 0 .964-.964.964.964 0 0 0-.964-.965H225.25a10.08 10.08 0 0 0 1.08-2.159 1.138 1.138 0 0 0-.648-1.439 1.252 1.252 0 0 0-1.612.964l-1.295 2.591h-7.643c-.561 0-.849.317-.849.964Zm6.779 8.924v-2.476h-.058a.484.484 0 0 1 .151-.425.481.481 0 0 1 .206-.11l.016-.003a.51.51 0 0 1 .132-.008.46.46 0 0 1 .085.014h12.162a.489.489 0 0 1 .547.532v2.476h-13.241Zm0 4.85v-3.008h13.241v3.008h-13.241Zm32.599-2.26c-.863.145-1.439 0-1.626-.532a1.22 1.22 0 0 1 .763-1.44 26.994 26.994 0 0 0 10.651-6.03 1.175 1.175 0 0 1 .316-.216 2.166 2.166 0 0 1 1.627-.748c.489 0 1.108.288 1.827 1.065a24.738 24.738 0 0 0 10.335 5.498 1.146 1.146 0 0 1 .682.662 1.157 1.157 0 0 1-.049.95c-.144.504-.677.69-1.612.532a35.98 35.98 0 0 1-10.867-6.232.518.518 0 0 0-.748 0 35.353 35.353 0 0 1-5.464 3.838.868.868 0 0 1 .254-.038h10.866a.864.864 0 0 1 0 1.727H259.75a.865.865 0 0 1-.574-1.509 35.332 35.332 0 0 1-5.515 2.474Zm-1.079-7.642a1.037 1.037 0 0 1 0-1.511 18.427 18.427 0 0 0 4.519-6.347 1.183 1.183 0 0 1 1.512-.533c.561.144.748.533.532 1.18a8.214 8.214 0 0 1-.748 1.44h6.664a.961.961 0 0 1 .863.964.94.94 0 0 1-.863.863h-7.744a20.168 20.168 0 0 1-3.238 3.872 1.44 1.44 0 0 1-1.526.072h.029Zm5.383 16.681c-.864 0-1.339-.46-1.439-1.439v-4.85a1.302 1.302 0 0 1 .376-1.063 1.309 1.309 0 0 1 1.063-.377h14.637a1.342 1.342 0 0 1 1.215.91c.058.17.08.35.066.53v4.85a1.316 1.316 0 0 1-.566 1.205 1.327 1.327 0 0 1-.715.234h-14.637Zm3.224-16.364a1.037 1.037 0 0 1-1.439-.216 10.083 10.083 0 0 1-1.44-1.929c-.359-.504-.331-.892.101-1.18a1.108 1.108 0 0 1 1.439.1c.395.453.756.934 1.08 1.44.094.152.2.296.316.432a1.126 1.126 0 0 1-.057 1.353Zm10.075 14.536a.5.5 0 0 0 .343-.086.48.48 0 0 0 .204-.446v-2.879a.497.497 0 0 0-.14-.407.486.486 0 0 0-.407-.14h-11.831c-.432 0-.648.188-.648.547v2.879c0 .345.216.532.648.532h11.831Zm-5.167-16.364a1.092 1.092 0 0 1-.115-1.44 15.455 15.455 0 0 0 3.022-4.85 1.14 1.14 0 0 1 1.439-.648.936.936 0 0 1 .533 1.296 7.425 7.425 0 0 1-.748 1.44h7.326a1.009 1.009 0 0 1 .964.963.981.981 0 0 1-.964.864h-8.291c-.1.184-.211.361-.331.533l-1.18 1.51a1.28 1.28 0 0 1-1.612.332h-.043Zm7.743 1.943a1.02 1.02 0 0 1-1.439-.331 81.324 81.324 0 0 1-.222-.284l-.006-.007c-.282-.36-.741-.95-1.384-1.753a.905.905 0 0 1 .216-1.18 1.121 1.121 0 0 1 1.439.115l.439.54c.619.761 1.032 1.268 1.173 1.504a1.05 1.05 0 0 1-.173 1.396h-.043Z",clipRule:"evenodd"}))},P=function(e){var t=e.showSlogn;return(0,r.tZ)(B,{css:{position:"absolute",left:"50%",bottom:"8%",transform:"translate(-50%,0%)",opacity:t?1:0,transition:"opacity 0.3s linear",width:"30%"}})},k=Object.assign;var x=function(e){return d().createElement(O.Z,k({fill:"none",viewBox:"0 0 40 40"},e),d().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M18.194 28.016a9.844 9.844 0 1 1 0-19.688 9.844 9.844 0 0 1 0 19.688Zm10.362-1.813a13.069 13.069 0 1 0-2.317 2.331l6.045 6.045a1.684 1.684 0 0 0 2.317-2.331l-6.045-6.045Z",clipRule:"evenodd"}))},L=Object.assign;var U=function(e){return d().createElement(O.Z,L({fill:"none",viewBox:"0 0 124 64"},e),d().createElement("path",{fill:"#fff",d:"M0 6a6 6 0 0 1 6-6h117v64H6a6 6 0 0 1-6-6V6Z"}),d().createElement("path",{fill:"#0767FB",fillRule:"evenodd",d:"M35.274 31.36h5.729A1.642 1.642 0 0 1 42.629 33v1.813h-7.657a37.718 37.718 0 0 1-1.44 6.794 19.258 19.258 0 0 1-4.159 7.412 7.082 7.082 0 0 1-6.966 1.238 41.498 41.498 0 0 0 4.016-3.872 21.589 21.589 0 0 0 3.872-6.836 23.184 23.184 0 0 0 1.021-4.736h-8.39a3.44 3.44 0 0 1 3.44-3.44h5.281c.058-.623.087-1.256.087-1.9v-7.196h-2.98c-.115.144-.115.274-.115.389a5.413 5.413 0 0 1-2.62 3.756 7.542 7.542 0 0 1-3.266.778s1.51-3.052 2.13-4.779l.059-.172c.378-1.106.968-2.831 1.61-4.635a4.174 4.174 0 0 1 1.77-2.519 5.455 5.455 0 0 1 3.11-.92s-1.094 3.252-1.44 4.317l-.033.073a.628.628 0 0 0-.082.258h10.19a1.77 1.77 0 0 1 1.77 1.756v1.684h-6.563v9.096Zm8.694-12.48H59.8l.043 27.707h-6.189l-5.282 3.368-.518-3.368h-3.886V18.88Zm6.045 26.224 3.094-1.957h3.109V22.321h-8.708v20.826h2.202l.303 1.957ZM88.6 32.712V20.58l12.133-.633h1.094c.679-1.193.99-2.56.892-3.93l-.001-.002c-.101-.317-.274-.86-.819-.732a41.76 41.76 0 0 1-5.498.936c-3.364.407-4.925.52-9.248.832l-.827.06c-8.636.634-16.336.936-16.336.936a3.282 3.282 0 0 0 3.44 3.296c2.878-.115 7.196-.317 11.514-.533v11.903H68.579a3.44 3.44 0 0 0 3.44 3.44h12.954v9.197c0 1.152-.59 1.54-1.57 1.569h-5.037a5.412 5.412 0 0 0 2.879 3.397c1.12.374 2.31.497 3.483.36 1.756-.087 3.814-1.08 3.814-4.635v-9.888h14.508a1.638 1.638 0 0 0 1.52-1.023c.082-.2.123-.415.121-.632v-1.785H88.6Zm-12.207-9.054c.333.206.622.475.85.793l3.7 5.181-2.879 2.087-5.47-7.585.49-.36a2.979 2.979 0 0 1 3.31-.116Zm19.792.548-4.016 5.31 2.879 2.16 5.757-7.7-.49-.36a2.941 2.941 0 0 0-2.203-.575 2.95 2.95 0 0 0-1.956 1.165h.029ZM33.92 40.398l3.023-1.929 3.972 5.93c.45.863.577 1.858.36 2.807a9.04 9.04 0 0 1-.863 2.878l-6.492-9.686Z",clipRule:"evenodd"}))},F=Object.assign;var M=function(e){return d().createElement(O.Z,F({width:"31",height:"17",fill:"none",viewBox:"0 0 31 17"},e),d().createElement("path",{fill:"#fff",d:"M2.928 14.638 0 0h31L5.962 15.933a2 2 0 0 1-3.034-1.295Z"}))},G=function(e){var t=e.currentUser;return(0,r.BX)("div",{css:{display:"flex",alignItems:"center",border:"".concat(C(3)," solid #fff"),backgroundColor:"#fff",position:"relative",height:C(70),boxSizing:"border-box",borderRadius:C(3),width:C(400)},children:[(0,r.tZ)(M,{css:{position:"absolute",bottom:parseInt(C(-18)),right:C(30),width:C(31),height:C(17.5)}}),(0,r.tZ)(U,{css:{width:C(123),height:"100%"}}),(0,r.BX)("div",{css:{backgroundColor:"#000",display:"inline-flex",alignItems:"center",position:"relative",height:"100%",paddingRight:C(10),paddingLeft:C(20),borderTopRightRadius:C(3),borderBottomRightRadius:C(3),flex:1},children:[(0,r.tZ)("span",{css:{fontSize:C(34),color:"#fff",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:C(180),WebkitLineClamp:1},children:t.name}),(0,r.tZ)(x,{css:{position:"absolute",right:C(10),width:C(40),height:C(40)}})]})]})},z=function(e){var t=e.setShowEndVideo,i=e.handleOpacityChange,a=e.subscribeEvent,s=e.hasEndVideo,d=e.currentUser,p=e.itemType,h=e.itemId,f=!1,m=(0,o.Z)((0,l.useState)(f),2),v=m[0],E=m[1],T=(0,o.Z)((0,l.useState)(f),2),_=T[0],y=T[1],S=(0,o.Z)((0,l.useState)(f),2),I=S[0],b=S[1],w=(0,o.Z)((0,l.useState)(f),2),R=w[0],O=w[1],D=(0,l.useRef)(!1),B=(0,l.useRef)(!1),k=(0,l.useRef)([]),x=(0,l.useRef)(new Audio),L=(0,Z.Z)((function(){return n.e(6018).then(n.t.bind(n,60970,23))})),U=(0,c.Z)((function(e){if(e){var t=k.current.findIndex((function(t){return t[e]}));k.current[t]&&clearTimeout(k.current[t][e]),k.current.splice(t,1)}else k.current.forEach((function(e){"object"==typeof e?clearTimeout(Object.values(e)[0]):clearTimeout(e)})),k.current=[]})),F=(0,c.Z)((function(){t(!1),y(!1),O(!1),b(!1)})),M=(0,c.Z)((function(){y(!0),k.current.push({author:setTimeout((function(){O(!0),k.current.push({content:setTimeout((function(){E(!0),b(!0),x.current.play()}),200)})}))}),k.current.push({exit:setTimeout((function(){i({value:0}),k.current.push({destroy:setTimeout((function(){F(),U()}),500)})}),2300)})}));(0,l.useEffect)((function(){B.current&&!D.current&&s&&(U("timeout"),M()),s&&B.current&&!D.current&&(U("timeout"),M());var e=function(){t(!0),i({value:1,time:0}),B.current=!0,!1!==s?D.current?F():s?M():k.current.push({timeout:setTimeout((function(){D.current=!0,y(!1),t(!1)}),3e3)}):F()};if(a){var n=a(u.FP.ENDED,e).unsubscribe;return function(){n(e),U()}}}),[s,a]);var z,H={type:(z=p,z?z.charAt(0).toUpperCase()+z.slice(1):"")};return"answer"===p?H.token=h:H.id=h,(0,l.useEffect)((function(){x.current.src="https://zhstatic.zhihu.com/heifetz_static/1632738186715.wav"}),[]),_&&L&&(0,r.tZ)(g.eV,{content:H,children:(0,r.BX)(g.Wi,{zaType:"Video",zaBlock:"EndVideo",children:[(0,r.BX)("div",{css:{position:"absolute",left:"50%",top:C(250),transform:"translate(-50%,0)",textAlign:"center",opacity:R?1:0,transition:"opacity 0.2s linear"},children:[(0,r.BX)("div",{css:{position:"relative",height:C(250),width:C(300),margin:"0 auto ".concat(C(53))},children:[v&&(0,r.tZ)(N,{src:"https://zhstatic.zhihu.com/heifetz_static/kanshan.json",showKanShan:v}),(0,r.tZ)(A,{src:d.avatarUrl})]}),(0,r.tZ)(G,{currentUser:d})]}),(0,r.tZ)(P,{showSlogn:I})]})})},H=function(e){var t=e.id,n=e.itemId,i=e.itemType,a=(0,l.useRef)((0,u.Wn)(t,"*",!0)).current.subscribeMessage,s=(0,o.Z)((0,l.useState)(!1),2),d=s[0],Z=s[1],g=(0,o.Z)((0,l.useState)({value:1,time:.5}),2),T=g[0],A=g[1],_=(0,o.Z)((0,l.useState)(null),2),y=_[0],S=_[1],I=(0,o.Z)((0,l.useState)({}),2),b=I[0],w=I[1],R=(0,l.useRef)(!0),N=(0,o.Z)((0,l.useState)(!1),2),O=N[0],D=N[1],B=(0,v.Z)(),P=(0,l.useRef)(),k=(0,o.Z)((0,f.Z)(0),2),x=k[0],L=k[1],U=(0,c.Z)((function(e){var t=e.value,n=e.time;A({value:t,time:void 0===n?.5:n})})),F=(0,c.Z)((function(){var e;B("".concat(m.Z.fetchRoot.www,"/api/v4/video/tail?object_id=").concat(n,"&object_type=").concat(i),{headers:{"X-Referer":document.referrer,"Content-Type":"application/json","X-App-Za.OS":"webplayer"},credentials:"include"}).then((e=(0,p.Z)((function(e){var t;return(0,h.Jh)(this,(function(n){switch(n.label){case 0:if(!(t=e.payload).displayAnimation)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(o=t.author.avatarUrl,new Promise((function(e,t){var n=new Image;n.onload=e,n.onerror=t,n.src=o})))];case 2:return n.sent(),S(!0),w({name:t.author.name,avatarUrl:t.author.avatarUrl}),[3,4];case 3:return n.sent(),S(!1),[3,4];case 4:return[3,6];case 5:S(!1),n.label=6;case 6:return[2]}var o}))})),function(t){return e.apply(this,arguments)})).catch((function(){S(!1)}))})),M=(0,c.Z)((function(){R.current&&(D(!0),R.current=!1)}));return(0,l.useEffect)((function(){if(n&&i&&O&&B&&F(),a){var e=a(u.FP.PLAY,M).unsubscribe;return function(){e(M)}}}),[F,O,B,a]),(0,l.useEffect)((function(){if(P.current&&(E.width=P.current.clientWidth,x(P.current)),a){var e=function(){setTimeout((function(){E.width=P.current.clientWidth}))},t=[a(u.FP.ENTER_FULLSCREEN,e).unsubscribe,a(u.FP.EXIT_FULLSCREEN,e).unsubscribe,a(u.FP.ENTER_PAGE_FULLSCREEN,e).unsubscribe,a(u.FP.EXIT_PAGE_FULLSCREEN,e).unsubscribe];return function(){t.forEach((function(e){return e()}))}}}),[P.current,a]),(0,l.useEffect)((function(){L&&(E.width=L&&L.width)}),[L]),(0,r.tZ)("div",{ref:P,children:(0,r.tZ)("div",{css:{position:"absolute",height:"100%",width:C(1920),left:0,top:0,backgroundColor:"black",visibility:d?"visible":"hidden"},children:(0,r.tZ)("div",{css:{position:"absolute",top:"50%",left:0,transform:"translateY(-50%)",opacity:T.value,transition:"opacity ".concat(T.time,"s linear"),backgroundColor:"black",height:9*C(1920,null)/16,width:"100%"},children:P.current&&(0,r.tZ)(z,{itemId:n,itemType:i,currentUser:b,hasEndVideo:y,handleOpacityChange:U,subscribeEvent:a,setShowEndVideo:Z})})})})},q=n(83790),V=function(e){var t=e.videoId,n=e.itemId,d=e.itemType,p=e.zaProps,h=e.muted,f=void 0!==h&&h,m=e.standalone,v=void 0!==m&&m,Z=e.useSingle,g=void 0!==Z&&Z,E=e.useHEVC,T=void 0!==E&&E,C=e.usePrefetch,A=void 0!==C&&C,_=(0,l.useRef)({isPlaying:!1,isPip:!1}).current,y=(0,l.useRef)((0,u.Wn)(t,"*",!0)).current,S=(0,o.Z)((0,a.Z)({threshold:.5},g),2),I=S[0],b=S[1],w=(0,c.Z)((function(){b||!_.isPlaying||_.isPip||y.dispatchMessage(window,u.aO.PAUSE,{dontApplyOnFullScreen:!0})})),R=(0,c.Z)((function(){_.isPlaying=!0,y.dispatchMessage(window,u.aO.EXIT_PIP)})),N=(0,c.Z)((function(){_.isPlaying=!1})),O=(0,c.Z)((function(){_.isPip=!0})),D=(0,c.Z)((function(){_.isPip=!1})),B=(0,s.Z)((0,c.Z)((function(){w()})),200);return(0,l.useEffect)((function(){if(g){var e=[y.subscribeMessage(u.FP.PLAY,R).unsubscribe,y.subscribeMessage(u.FP.PAUSE,N).unsubscribe,y.subscribeMessage(u.FP.ENTER_PIP,O).unsubscribe,y.subscribeMessage(u.FP.EXIT_PIP,D).unsubscribe];return window.addEventListener("scroll",B),function(){window.removeEventListener("scroll",B),e.forEach((function(e){return e()}))}}}),[g,N,R,B,y,O,D]),(0,r.tZ)("div",{ref:I,css:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:(0,r.tZ)(q.Z,{children:(0,r.tZ)(i.ZP,{id:t,zaProps:p,pageName:d,muted:f,useHEVC:T,usePrefetch:A,standalone:v,shouldShowPageFullScreenButton:!0,children:n&&d&&(0,r.tZ)(H,{id:t,itemId:n,itemType:d})})})})},X=(0,l.memo)(V)},5880:function(e,t,n){"use strict";var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(78194),s=n(32554),u=n(68562),l=n(28074),d=n(15706),p=n(47112),h=n.n(p),f=n(75926),m=n.n(f),v=n(87363),Z=n(52626),g=n(17222),E=n(48457),T=n(82096),C=n(70164),A=n(73464),_=n(38793),y=n(70175),S=n(91355),I=n(87655),b=n(49252),w=function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:e.props.isRecognized}},e.voteUpButtonRef=(0,v.createRef)(),e.voteDownButtonRef=(0,v.createRef)(),e.onVote=e.props.authRequired((function(t){e.props.onVote(t)}),S.q0.vote),e.voteUp=function(t){var n=e.props.voting,o=(0,c.Z)(1===n?["UnUpvote","neutral"]:["Upvote","up"],2),r=o[0],i=o[1];e.vote(t,r,i),e.voteUpButtonRef.current.focus()},e._voteDown=function(t){var n=e.props.voting,o=(0,c.Z)(-1===n?["UnDownvote","neutral"]:["Downvote","down"],2),r=o[0],i=o[1];e.vote(t,r,i),e.voteDownButtonRef.current.focus()},e.voteDown=function(t){e.shouldShowMenu()&&e.popover.open(),e._voteDown(t)},e.vote=function(t,n,o){var r=e.props,a=r.disableAuth,c=r.handleToggleGuide,s=r.onClick,u=r.type,l=r.zaIds,d=l.voteUp,p=l.voteDown,h=n.includes("Upvote")?d:p;"article"===u&&"down"===o&&g.Z.trackEvent(e.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),g.Z.trackEvent(n.includes("Upvote")?e.voteUpButtonRef.current:e.voteDownButtonRef.current,(0,i.Z)({action:n,element:"Button"},h&&{id:h})),s?s(t,o):a?c(t,o):e.onVoteWithRecognize(n,o)},e.onVoteWithRecognize=function(t,n){var o=e.props.voting;!e.state.recognizeInfo.isRecognized||1!==o||"UnUpvote"!==t&&"Downvote"!==t?e.onVote(n):e.setState({recognizeInfo:(0,a.Z)((0,i.Z)({},e.state.recognizeInfo),{showRecognizeModal:!0,action:t,voteType:n})})},e.handleConfirmCancelRecognize=function(){e.onVote(e.state.recognizeInfo.voteType),e.setState({recognizeInfo:(0,a.Z)((0,i.Z)({},e.state.recognizeInfo),{isRecognized:!1,showRecognizeModal:!1})})},e.handleCloseCancelRecognizeModal=function(){return e.setState({recognizeInfo:(0,a.Z)((0,i.Z)({},e.state.recognizeInfo),{showRecognizeModal:!1})})},e.handleTogglerClick=function(t){e.shouldShowMenu()||t.preventDefault(),e._voteDown(t)},e.renderVoteUpButton=function(){var t=e.props,n=t.isOwner,o=t.count,r=t.voting,i=t.disabled,a=t.hideDesc,c=1===r,s=c?"已赞同":"赞同",d=[s,(0,C.Zh)(o)].join(" "),p=[!a&&s,0!==o&&(0,C.Zh)(o).trim()].filter(Boolean).join(" ");return(0,u.BX)(E.$U,{as:A.ZP,zaText:c?"取消赞同":"赞同",zaType:"Button",zaAction:c?"UnUpvote":"Upvote",className:h()("VoteButton VoteButton--up",{"is-active":1===r}),disabled:n||i,onClick:e.voteUp,"aria-label":d,"aria-live":"polite",onRef:e.voteUpButtonRef,children:[(0,u.tZ)(l.Ex,{center:!0,size:10,className:"VoteButton-TriangleUp"}),p]})},e.renderVoteDownButton=function(){var t=e.props,n=t.voting,o=t.disabled,r=t.isMobile,i=-1===n,a=i?"已反对":"反对";return(0,u.tZ)(E.$U,{as:A.ZP,zaText:i?"取消反对":"反对",zaType:"Button",zaAction:i?"UnDownvote":"Downvote",className:h()("VoteButton VoteButton--down",{"is-active":-1===n},{"VoteButton--mobileDown":y.Z.isMobileEntry||r}),disabled:o,onClick:e._voteDown,"aria-label":a,"aria-live":"polite",onRef:e.voteDownButtonRef,children:(0,u.tZ)(d.y,{center:!0,size:10})})},e}return n.prototype.render=function(){var e=this.props.isOwner,t=this.state.recognizeInfo,n=t.showRecognizeModal,o="UnUpvote"===t.action;return(0,u.BX)("span",{ref:this.voteButtonRef,children:[(0,u.tZ)(_.bY,{input:"v",action:this.voteUp}),(0,u.tZ)(_.bY,{input:"d",action:this.voteDown}),this.renderVoteUpButton(),!e&&this.renderVoteDownButton(),(0,u.tZ)(T.Z,{title:"确定".concat(o?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal,children:n&&(0,u.BX)("div",{children:[(0,u.BX)("div",{children:[o?"取消赞同":"选择反对","时，你赠与作者的专业徽章也会收回，并且赠与次数不会返还，是否仍要取消？"]}),(0,u.BX)(T.w,{direction:"horizontal",children:[(0,u.tZ)(A.ZP,{onClick:this.handleCloseCancelRecognizeModal,children:o?"暂不取消":"暂不选择"}),(0,u.tZ)(A.ZP,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize,children:o?"取消赞同":"选择反对"})]})]})})]})},n}(v.Component);w.propTypes={voting:m().oneOf([-1,0,1]).isRequired,disabled:m().bool,type:m().string,hideDesc:m().bool,zaIds:m().shape({voteUp:m().number,voteDown:m().number}),isRecognized:m().bool},w.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}},t.Z=(0,Z.compose)((0,b.$)(),I.Z)(w)},67070:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var o=n(21620),r=n(84421),i=n(88483),a=n(61565),c=n(32554),s=n(68562),u=n(87363),l=n(52495),d=n(27869),p=n(26931),h=n(20685),f=n(98918),m=n(75926),v=n.n(m),Z=n(37148),g=n(522),E=n(41933),T=n(70164),C=n(73464),A=n(24336),_=function(e){var t=e.upvotedFollowees,n=e.voteupCount,o=e.actionText,r=e.canClick,i=e.onClick;if(!n)return null;var a=t.length,c=a===n?"":"".concat((0,T.uf)(n)," 人");return(0,s.BX)(E.CJKSpace,{children:[t.map((function(e,t){return(0,s.BX)("span",{children:[t>0&&"、",(0,s.tZ)(A.Z,{noBadge:!0,user:e,children:e.name},t)]},t)})),a>0&&n-a>0&&"等",r?(0,s.BX)(C.ZP,{preset:"plain",onClick:i,children:[c,o]}):c+o]})};_.propTypes={voteupCount:v().number.isRequired,upvotedFollowees:v().array.isRequired,actionText:v().string.isRequired,canClick:v().bool,onClick:v().func},_.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var y=_,S=n(9426),I=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={modalShown:e.props.defaultModalShown},e.handleListHide=function(){return e.setState({modalShown:!1})},e.handleListShown=function(){return e.setState({modalShown:!0})},e}return n.prototype.render=function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,o=e.openable,r=e.type,i=e.too,a=e.isFetching,c=e.isDrained,u=e.items,l=e.onLoad;if(t<=0)return null;var d,p=this.state.modalShown;return d="pin"===r?"为该".concat(g.iB[r],"鼓掌"):"column"===r?"关注":"".concat(i?"也":"","赞同了该").concat(g.iB[r]),(0,s.BX)("span",{className:"Voters",children:[(0,s.tZ)(y,{canClick:o,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:d}),(0,s.tZ)(Z.Z,{size:"fullPage",onClose:this.handleListHide,children:p&&(0,s.tZ)(S.Z,{isFetching:a,isDrained:c,text:"column"===r?"关注了":"赞同了",items:u,voteupCount:t,onLoad:l})})]})},n}(u.Component);I.propTypes={openable:v().bool,upvotedFollowees:v().array,id:v().oneOfType([v().number,v().string]),type:v().oneOf(["pin","answer","article","column"]).isRequired,defaultModalShown:v().bool},I.defaultProps={openable:!0,defaultModalShown:!1};var b=I,w={answer:"answers",article:"articles",pin:"pins",column:"columns"};var R=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).handleLoad=function(){var t=e.props,n=t.type,o=t.id,r=t.loadAnswerVoters,i=t.loadPinVoters,a=t.loadArticleVoters,c=t.loadColumnsFollowers;switch(n){case"answer":return r(o);case"pin":return i(o);case"article":return a(o);case"column":return c(o);default:return null}},e}return n.prototype.render=function(){return(0,s.tZ)(b,(0,i.Z)({onLoad:this.handleLoad},this.props))},n}(u.Component);R.propsTypes=(0,i.Z)({},b.propsTypes),R.defaultProps=(0,i.Z)({},b.defaultProps);var N=(0,l.connect)((function(e,t){var n=t.id,o=t.type,r=e.entities.users,i=e[w[o]]||{},c=i.voters,s=void 0===c?{}:c,u=i.concernedUpvoters,l=void 0===u?{}:u,d=s[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},p=d.isFetching,h=d.isDrained,f=d.order,m=d.ids,v=(l[n]||{ids:[]}).ids,Z=(0,a.Z)(v).concat((0,a.Z)(m.filter((function(e){return!v.includes(e)}))));return{isFetching:p,isDrained:h,order:f,items:Z.map((function(e){return r[e]}))}}),{loadAnswerVoters:d.Yu,loadArticleVoters:p.Id,loadPinVoters:h.Qw,loadColumnsFollowers:f.bK})(R)},9426:function(e,t,n){"use strict";var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(32554),s=n(68562),u=n(75926),l=n.n(u),d=n(87363),p=n(17695),h=n(74922),f=n(70164),m=n(70175),v=n(81367),Z=n(93238),g=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.props,t=e.isFetching,n=e.isDrained,o=e.items,r=e.voteupCount,c=e.onLoad,u=e.text,l=e.isRewardList,d=e.notice,g=e.type,E=e.currentUser,T=m.Z.isMobileEntry?{}:{getContainer:function(e){return e}};return(0,s.BX)("div",{className:"VoterList",children:[(0,s.tZ)(v.Z,{header:"".concat((0,f.uf)(r)," 人").concat(u||"赞同了")}),l&&d&&(0,s.tZ)("div",{className:"VoterList-description",children:(0,s.tZ)("p",{children:d})}),(0,s.tZ)(p.Z,(0,a.Z)((0,i.Z)({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:c,placeholder:(0,s.tZ)(p.i,{className:"List-item",withAvatar:!0})},T),{children:o&&o.map((function(e,t){return(0,s.tZ)(h.HC,{children:(0,s.tZ)(Z.Z,{currentUser:E,user:e,isRewardList:l,meta:null,type:g,userLinkV2:!0})},"".concat(t,".").concat(e.urlToken))}))}))]})},n}(d.Component);g.propTypes={isFetching:l().bool.isRequired,isDrained:l().bool.isRequired,items:l().array.isRequired,voteupCount:l().number.isRequired,text:l().string.isRequired,onLoad:l().func.isRequired,isRewardList:l().bool,type:l().string,currentUser:l().object},t.Z=g},10044:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var o=n(88483),r=n(16600),i=n(78194),a=n(68562),c=n(24076),s=n(74792),u=n(82074),l=n(96347),d=n.n(l),p=n(87363),h=n(52495),f=n(3404),m=n(52626),v=n(5217),Z=n(44707),g=n(88371),E=n(8905),T=n(73195),C=n(3505),A=n(5150),_=n(70175),y=n(14468),S=n(42116),I=n(40198),b=n(12255),w=function(e){var t=e.expanded,n=e.isVideoCoverFullSize;return e.renderFlag?(0,a.tZ)(Z.xJ,{mb:t||n?"8px":"4px"}):null},R=n(75714);function N(e){var t,n,l=e.zvideo,m=e.zvideo,y=m.id,b=m.description,N=void 0===b?"":b,O=m.title,D=m.author,B=m.isVisible,P=m.creationRelationship,k=m.attachedInfoBytes,x=e.lastreadTouchable,L=e.preset,U=void 0===L?"primary":L,F=e.onToggleExpand,M=e.renderOptions,G=e.couldShowHiddenSign,z=e.renderActionButtons,H=e.shouldAlwaysShowPlayer,q=e.truncateDisabled,V=e.limit,X=e.showMetaAfterPlayer;l.thumbnailExtraInfo&&(t=l.thumbnailExtraInfo.videoId,n=l.thumbnailExtraInfo.url),l.video&&(t=l.video.videoId,n=l.video.thumbnail);var W=(0,h.useSelector)((function(e){return d()(D)?e.entities.users[D]:D})),K=(0,I.xw)(W),j=(0,i.Z)((0,p.useState)(!1),2),Y=j[0],Q=j[1],J=(0,i.Z)((0,p.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),2),$=J[0],ee=J[1],te=(0,i.Z)((0,R.Z)(U,Y,W,P),1)[0],ne=K&&!B&&G,oe="https://".concat(_.Z.wwwHost,"/zvideo/").concat(y),re=t&&(H||Y),ie=(0,Z.HE)(P),ae=w({expanded:Y,isVideoCoverFullSize:H&&X,renderFlag:ie}),ce=ie?140:200;return(0,a.tZ)(s.xM,{data:l,children:(0,a.BX)(E.ZP,{className:"ZVideoItem",data:l,title:(0,a.BX)(a.HY,{children:[ne&&(0,a.BX)("span",{className:"ZVideoItem-hiddenSign",children:[(0,a.tZ)(u.Z,{}),"隐藏"]}),(0,a.tZ)(c._o,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:(0,a.tZ)("a",{href:oe,target:"_blank",rel:"noopener noreferrer",children:O})})]}),link:oe,meta:X?null:te,lastreadTouchable:x,"data-zop":JSON.stringify({authorName:null==W?void 0:W.name,itemId:y,title:O,type:"zvideo"}),children:[K&&(l.isReviewing||l.isUpdateReviewing)&&(0,a.tZ)(T.Z,{}),re&&(0,a.BX)(f.Box,{my:"16px",children:[(0,a.tZ)("div",{className:"ZVideoItem-video",css:{margin:"0px"},children:(0,a.tZ)(A.Z,{videoId:t,itemId:y,itemType:"zvideo",zaProps:{type:"Zvideo",token:l.id,attachedInfo:k}})}),Y&&(0,a.tZ)(Z._N,{id:y,creationRelationship:P})]}),X&&te,(0,a.tZ)(C.Z,(0,r.Z)((0,o.Z)({excerpt:(0,S.NJ)(N,ce),html:N,cover:H?null:n,hasVideo:!H},V?{limit:V}:{}),{truncateDisabled:q,allowCollapseWithEmptyExcerpt:!0,expanded:Y,onToggleExpend:function(e){Q(e),F&&F(e)},data:(0,r.Z)((0,o.Z)({},l),{id:y}),prefix:ae,children:(0,a.tZ)(v.Z,{className:"ZVideoItem-toolbar",zvideo:l,author:W,commentsShown:$.commentsShown,onCommentButtonClick:function(e,t){return ee(t)},renderOptions:M,renderActionButtons:z})})),(0,a.tZ)(g.Z,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:l,shown:$.commentsShown,commentPattern:$.commentPattern,autoFocus:$.autoFocus,onClose:function(){return ee((0,r.Z)((0,o.Z)({},$),{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})})}N.defaultProps={renderOptions:function(){return[null]},truncateDisabled:!0};var O=(0,m.compose)((0,b.Ib)((function(e){var t=e.zvideo;return{content:{type:"Zvideo",token:String(t.id)},extra:{mediaInfo:{videoInfo:{videoId:t.id}}}}})),(0,h.connect)((function(e,t){return(0,r.Z)((0,o.Z)({},t),{zvideo:(0,r.Z)((0,o.Z)({},t.zvideo),{creationRelationship:(0,y.ze)(t.zvideo)})})})))(N)},75714:function(e,t,n){"use strict";var o=n(88483),r=n(16600),i=n(78194),a=n(68562),c=n(87363),s=n(74264),u=n(44707),l=function(e){return"plain"===e||"special-plain"===e},d=l,p=function(e){return"special-plain"===e};t.Z=function(e,t,n){var h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=(0,i.Z)((0,c.useMemo)((function(){var t;if((0,u.HE)(h)){var i=!p(e);t=(0,u.SF)(e,n,h,i)}else t=!p(e)&&(0,a.tZ)(s.Z,(0,r.Z)((0,o.Z)({},d(e)&&{preset:"plain"}),{author:n,userLinkV2:!0}),"authorInfo");return l(e)?[t,null]:[[t,null],null]}),[h,e,n]),2),m=f[0],v=f[1];return[m,v]}},439:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var o=n(88483),r=n(78194),i=n(61565),a=n(68562),c=n(47859),s=n(52495),u=n(3404),l=n(48457),d=n(3090),p=n(36701),h=n(58386),f=n.n(h),m=n(62704),v=n(5815),Z=n(71103),g=n(16600),E=n(11116),T=n(43131),C=n(1474),A=function(e){var t=e.className,n=e.index,r=void 0===n?0:n,i=e.selected,c=e.onClick,s=e.onDelete,d=e.item,p=e.item,h=p.status,f=p.target,m=(void 0===f?{}:f).parentObject.title,v=0===h,A="ContributionItem-deleteButton",_=(0,a.BX)(l.$U,(0,g.Z)((0,o.Z)({zaType:"Card",zaText:m,view:{elementLocation:{card:{index:r}}},as:u.Flex,role:"button",className:t,width:"168px",height:"52px",color:"GBK03A",px:"8px",alignItems:"center",lineHeight:"normal"},v&&{onClick:c}),{css:function(e){var t;return{border:"1px solid ".concat(i?"transparent":v?e.colorMod(e.colors.GBL01A).alpha(.08):e.colors.GBK09A),boxShadow:i?"inset 0 0 0 2px ".concat(e.colors.GBL01A):"none",borderRadius:"3px",backgroundColor:e.colors.GBK99C,":hover":(t={background:v?e.colorMod(e.colors.GBL01A).alpha(.08):e.colors.GBK10A},(0,Z.Z)(t,".".concat(A),{visibility:"visible"}),(0,Z.Z)(t,"cursor",v?"pointer":"not-allowed"),t),position:"relative"}},children:[(0,a.tZ)(u.Flex,(0,g.Z)((0,o.Z)({},v&&{color:"GBL01A"}),{fontSize:"11px",fontWeight:"600",alignItems:"center",justifyContent:"space-between",children:(0,a.tZ)(l.$U,{zaBlock:"Delete",zaText:"删除投稿",zaType:"Button",as:u.Box,role:"button",className:A,onClick:function(e){e.stopPropagation(),null==s||s(d)},css:{cursor:"pointer",visibility:"hidden",position:"absolute",right:"-8px",top:"-8px"},children:(0,a.tZ)(C.Z,{size:12,css:function(e){return{color:e.colors.GRD03A,backgroundColor:e.colors.GBK99A,borderRadius:"50%",border:"2px solid ".concat(e.colors.GBK99A)}}})})})),(0,a.tZ)(u.Box,{fontSize:"14px",css:[(0,E.S)(2),{wordBreak:"break-all"}],children:m})]}));return(0,a.tZ)(l.eV,{block:"VideoAnswerItem",children:v?_:(0,a.tZ)(T.Z,{toggler:_,placement:"top",arrowed:!0,toggleEvent:"hover",children:(0,a.tZ)(u.Box,{fontSize:"12px",p:"8px",children:"已投稿问题仅支持在回答详情页编辑"})})})},_=function(e){var t=e.className,n=e.onClick,i=e.totalCount,c=e.currentCount,s=(0,r.Z)((0,v.Z)("zvideo_contribution_form:should_hide_new_tag"),2),p=s[0],h=s[1];return(0,a.BX)(l.$U,{zaType:"Button",zaAction:"",zaBlock:"AddVideoAnswer",zaText:"添加问题",as:u.Flex,className:t,role:"button",width:"168px",height:"52px",color:"GBL01A",alignItems:"center",justifyContent:"center",onClick:function(e){p||h(!0),null==n||n(e)},css:function(e){return(0,o.Z)({position:"relative",cursor:"pointer",borderRadius:"3px",border:"1px solid ".concat(e.colorMod(e.colors.GBL01A).alpha(.08)),":hover":{background:e.colorMod(e.colors.GBL01A).alpha(.08)},overflow:"hidden"},!p&&{"::after":{content:'"NEW"',position:"absolute",top:"0",right:"0",color:e.colors.GRD03A,fontSize:"8px",fontWeight:"bold",textAlign:"center",background:e.colorMod(e.colors.GRD03A).alpha(.08),borderBottomLeftRadius:"3px",padding:"4px"}})},children:[(0,a.tZ)(d.nY,{size:12}),(0,a.tZ)(u.Box,{fontSize:"14px",fontWeight:"500",mt:"1px",ml:"5px",children:c&&i?"继续添加 (".concat(c,"/").concat(i,")"):"添加问题"})]})},y=function(e){var t=e.zvideoId,n=e.showCreateButton,o=void 0!==n&&n,r=e.showSelect,l=void 0!==r&&r,d=e.onAdd,h=e.onSelect,v=e.isProduce,Z=(0,s.useDispatch)(),g=(0,m.oL)(),E=(0,m.fh)(t);if(v)E.reverse();else{var T=E.filter((function(e){return 2===e.status})),C=E.filter((function(e){return 2!==e.status}));C.reverse(),E=(0,i.Z)(C).concat((0,i.Z)(T))}var y=(0,m.cF)(t).answer,S=void 0===y?{}:y,I=S.canContribute,b=void 0!==I&&I,w=S.totalCount,R=void 0===w?0:w,N=E.length,O=(0,c.Z)((function(e){Z((0,m.O)(e.id)),Z((0,m.ry)(e.id)),null==h||h(e)})),D=(0,c.Z)((function(e){p.Z.confirm((0,a.tZ)(u.Box,{textAlign:"center",children:"已编辑的投稿内容不会被保存"}),{title:(0,a.tZ)(u.Box,{ml:"23px",children:"确定删除该视频投稿？"}),text:{ok:"确认删除",cancel:"继续编辑"}}).then((function(){if(e.status&&0!==e.status){var n=e.target.object.id;n&&Z((0,m.EB)(t,e.id,n))}else Z((0,m.KQ)(t,e.id));Z((0,m.O)(null))}),f())}));return(0,a.tZ)(u.Flex,{flexWrap:"wrap",ml:"-8px",children:(0,a.BX)(a.HY,{children:[E.map((function(e){return(0,a.tZ)(A,{selected:l&&(null==g?void 0:g.id)===e.id,onClick:function(){return O(e)},onDelete:function(){return D(e)},item:e,css:{marginLeft:"8px"}},e.id)})),b&&N<R&&o&&(0,a.tZ)(_,{onClick:d,currentCount:N,totalCount:R,css:{marginLeft:"8px"}})]})})}},86832:function(e,t,n){"use strict";var o=n(68562),r=n(47859),i=n(58386),a=n.n(i),c=n(3404),s=n(48457),u=n(36701),l=n(83329),d=n(73464),p=n(7828);t.Z=function(e){var t=e.isEditing,n=e.onSubmit,i=e.onCancel,h=e.selectedQuestion,f=e.value,m=e.onChange,v=(0,r.Z)((function(){n()})),Z=(0,r.Z)((function(){f?u.Z.confirm((0,o.tZ)(c.Box,{textAlign:"center",children:t?"已编辑的投稿内容不会被保存":"当前输入的投稿内容不会被保存"}),{title:(0,o.tZ)(c.Box,{ml:"23px",children:t?"确定取消当前修改":"确定返回选择其他问题？"}),text:{ok:t?"取消修改":"确定返回",cancel:t?"继续编辑":"继续投稿"}}).then(i,a()):i()}));return(0,o.BX)(s.eV,{block:"AnswerEditor",children:[(0,o.tZ)(p.Z,{selected:!0,item:h,css:{padding:"0 20px",marginTop:"24px"}}),(0,o.tZ)(s.$U,{zaType:"Input",zaAction:"Answer",as:c.Box,px:"20px",mt:"17px",flex:"1",children:(0,o.tZ)(l.Z,{autoFocus:!0,maxLength:"150000",value:f,onChange:function(e){m(e.target.value)},css:{width:"100%",height:"100%!important",textarea:{height:"100%"}},multiline:!0,placeholder:"针对问题介绍下视频（选填）"})}),(0,o.BX)(c.Flex,{height:"82px",justifyContent:"space-between",alignItems:"center",px:"20px",css:{button:{width:"236px"}},children:[(0,o.tZ)(s.$U,{zaType:"Button",zaAction:"Close",zaText:!0,as:d.ZP,onClick:Z,children:t?"取消修改":"返回选择"}),(0,o.tZ)(s.$U,{zaType:"Button",zaAction:"Save",zaText:!0,as:d.ZP,onClick:v,preset:"primary",color:"blue",children:t?"提交修改":"添加投稿"})]})]})}},7828:function(e,t,n){"use strict";var o=n(68562),r=n(87363),i=n(48457),a=n(70164),c=n(73464),s=n(3404),u=s.Box,l=s.Flex;t.Z=function(e){var t=e.className,n=e.index,s=void 0===n?0:n,d=e.onSelect,p=e.selected,h=void 0!==p&&p,f=e.item,m=f.title,v=f.followCount,Z=f.commentCount,g=f.visitCount,E=f.highlight,T=(0,r.useMemo)((function(){return[v,Z,g].every((function(e){return"number"==typeof e}))?["".concat((0,a.ok)(v)," 关注"),"".concat((0,a.ok)(Z)," 评论"),"".concat((0,a.ok)(g)," 浏览")].join(" · "):null}),[v,Z,g]);return(0,o.BX)(i.$U,{zaBlock:"QuestionItem",zaType:"Card",zaText:T,view:{elementLocation:{card:{index:s}}},as:l,py:"12px",alignItems:"start",className:t,children:[(0,o.BX)(u,{flex:"1",children:[(0,o.tZ)(u,{fontSize:"15px",fontWeight:"500",dangerouslySetInnerHTML:{__html:(null==E?void 0:E.title)||m},css:function(e){return{wordBreak:"break-all",em:{fontStyle:"inherit",color:e.colors.GYL01A}}}}),T&&(0,o.tZ)(u,{mt:"3px",color:"GBL05A",fontSize:"14px",children:T})]}),h?(0,o.tZ)(c.ZP,{preset:"secondary",color:"blue",css:{cursor:"unset"},children:"已选择"}):(0,o.tZ)(c.ZP,{onClick:d,color:"blue",css:{padding:"0 9px",marginLeft:"20px"},children:"选择问题"})]})}},19445:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var o=n(88483),r=n(16600),i=n(78194),a=n(68562),c=n(74182),s=n(47859),u=n(14116),l=n(90674),d=n(39269),p=n(58386),h=n.n(p),f=n(34248),m=n.n(f),v=n(87363),Z=n(52495),g=n(3404),E=n(48457),T=n(64634),C=n(64068),A=n(47112),_=n.n(A),y=n(88840),S=n.n(y),I=n(96485),b=(0,n(55270).isBrowser)()?v.useLayoutEffect:function(){},w=function(e){return e===window?window.pageYOffset:e.scrollTop},R=function(){return window},N=function(e){var t=e.children,n=e.className,o=e.getContainer,r=void 0===o?R:o,c=e.isDrained,s=e.isLoading,u=e.isLocal,l=e.isPrevDrained,d=void 0===l||l,p=e.onLoad,h=e.onRef,f=e.placeholder,m=e.stopPropagation,Z=e.threshold,g=void 0===Z?1200:Z,E=(0,i.Z)((0,v.useState)(!1),2),T=E[0],A=E[1],y=(0,i.Z)((0,v.useState)(!1),2),N=y[0],O=y[1],D=(0,i.Z)((0,v.useState)(!1),2),B=D[0],P=D[1],k=(0,v.useRef)(),x=(0,v.useRef)(),L=(0,v.useRef)(),U=(0,v.useRef)(),F=(0,v.useRef)(0),M=(0,v.useRef)(0),G=(0,v.useRef)(s),z=(0,v.useCallback)((function(){var e=x.current,t=U.current,n=L.current,o=w(e),r=o-F.current;F.current=o;var i=r<0,a=i&&d||!i&&c;if(!G.current&&!a){var s=function(e){var t,n,o=e.isPrev,r=e.container,i=e.nextPlaceholderEl,a=e.prevPlaceholderEl;if(void 0!==r.innerHeight)t=0,n=r.innerHeight;else{var c=r.getBoundingClientRect();t=c.top,n=c.bottom}var s=i.getBoundingClientRect().top;return o?t-a.getBoundingClientRect().bottom:s-n}({isPrev:i,container:e,nextPlaceholderEl:t,prevPlaceholderEl:n});i&&(M.current=t.getBoundingClientRect().top,P(s<=0)),s<=g&&(A(i),p(i))}}),[c,d,p,g]);(0,v.useEffect)((function(){G.current=s}),[s]),(0,v.useEffect)((function(){var e=r(k.current);x.current=e}),[r]),(0,v.useEffect)((function(){if(!c||!d){var e=x.current;z();var t=S()(z,100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t),t.cancel()}}}),[c,d,z]),b((function(){var e,t,n=x.current,o=U.current;if(n&&(T&&!s)){var r=w(n)+o.getBoundingClientRect().top-M.current;return t=r,(e=n)===window?e.scrollTo(e.pageXOffset,t):e.scrollTop=t,F.current=r,function(){M.current=o.getBoundingClientRect().top}}}),[s,T]);var H=u&&v.Children.toArray(t).length<=0;(0,v.useEffect)((function(){if(s&&H){var e=setTimeout((function(){O(G.current)}),300);return function(){clearTimeout(e),O(!1)}}}),[s,H]);var q=f;return N?q=(0,a.tZ)(C.Z,{}):H&&(q=null),(0,a.BX)(I.Z,{className:_()(n,{"InfiLoader--bounceShown":N}),stopPropagation:m,onRef:function(e){"function"==typeof h?h(e):"object"==typeof h&&(h.current=e),k.current=e},children:[(0,a.tZ)("div",{ref:L,children:T&&!d&&s&&B&&q}),t,(0,a.tZ)("div",{ref:U,children:!c&&s&&q})]})},O=n(35314),D=n(62704),B=n(7828),P=m()(1),k=function(e){var t=e.title,n=e.description,p=e.zvideoId,f=e.onSelect,m=(0,O.Z)(),C=(0,Z.useDispatch)(),A=(0,v.useRef)(),_=(0,i.Z)((0,v.useState)(!1),2),y=_[0],S=_[1],I=(0,i.Z)((0,v.useState)(""),2),b=I[0],w=I[1],R=(0,i.Z)((0,v.useState)([]),2),k=R[0],x=R[1],L=(0,Z.useSelector)((function(e){return e.zvideos.contribution[y?"questionSearchResults":"recommendQuestions"]})),U=L.isLoading,F=L.paging.isEnd,M=L.data,G=(0,E.Q4)(),z=(0,c.Z)((function(e){return P((function(){return m("/api/v4/search/suggest",{query:{q:e},headers:{"X-API-Version":"3.0.91","X-App-Za":"OS=Web"}})})).then((function(e){var t=e.payload.suggest;x(t.map((function(e,t){return(0,r.Z)((0,o.Z)({},e),{name:e.query,index:t})})))}),h())}),500),H=(0,v.useCallback)((function(){A.current&&(A.current.scrollTop=0)}),[]),q=(0,s.Z)((function(e){e!==b&&(w(e),e?z(e):(H(),S(!1),x([])))})),V=(0,s.Z)((function(e,t){var n=t.index;G.trackEvent({eventType:"Click",action:"Question",block:"SuggestItem",elementLocation:{type:"Text",text:e,card:{index:n}}}),H(),w(e),S(!0),C((0,D.nL)(e,!0))})),X=(0,s.Z)((function(){b&&(H(),S(!0),C((0,D.nL)(b,!0)))})),W=(0,s.Z)((function(){M.length&&C(b?(0,D.nL)():(0,D.GC)())}));return(0,v.useEffect)((function(){C((0,D.GC)({zvideoId:p,title:t,description:n},!0))}),[p,t,n,C]),(0,a.BX)(a.HY,{children:[(0,a.tZ)(g.Box,{px:"20px",my:"24px",fontSize:"24px",fontWeight:"500",children:"选择投稿问题"}),(0,a.tZ)(T.Z,{autoSelect:!1,value:b,onChange:q,onSelect:V,onEnterInput:X,items:k,css:{".Popover":{width:"100%",padding:"0 20px",boxSizing:"border-box"},".Input-wrapper":{width:"100%"}},inputProps:{grey:!0,placeholder:"搜索相关问题…",after:b?(0,a.tZ)(l.HN,{size:16,css:function(e){return{cursor:"pointer",color:e.colors.GBK07A}},onClick:function(){return q("")}}):(0,a.tZ)(d.J7,{size:20,css:function(e){return{color:e.colors.GBL05A}}})},menuProps:{style:{width:"470px"}}}),F&&!M.length?(0,a.tZ)(u.H.EI1,{image:"default",content:"暂无相关问题"}):(0,a.tZ)(N,{onRef:A,css:{flex:"1",padding:"0 20px",overflowY:"auto"},isLoading:U,isDrained:F,onLoad:W,getContainer:function(e){return e},children:M.map((function(e,t){return(0,a.tZ)(B.Z,{onSelect:function(){f(e)},index:t,item:e,css:function(e){return{"& + &":{borderTop:"1px solid ".concat(e.colors.GBK09A)}}}},e.id)}))})]})}},81512:function(e,t){"use strict";t.Z=function(e){return e?e.replace(/\n/g,"<br>"):e}},26566:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var o=n(88483),r=n(78194),i=n(68562),a=n(47859),c=n(21845),s=n(87363),u=n(52495),l=n(3404),d=n(17222),p=n(82096),h=n(73464),f=function(e){var t=e.dataTransfer;return t.items?Array.from(t.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})):Array.from(t.files)},m=n(88276),v=n.n(m),Z=n(91355);function g(e){if("number"!=typeof e)return null;var t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(String(t),":").concat(v()(String(n),2,"0"))}var E=n(24316),T=n(32671),C=n(47112),A=n.n(C),_=n(48457);var y=function(e){var t=e.className,n=e.text,o=e.onFiles,r=e.zaClickId,a=e.zaBlockText,c=e.multiple,u=void 0===c||c,p=e.disabled,f=e.preset,m=e.size,v=e.icon,g=e.handleMouseEnter,E=e.handleMouseLeave,T=(0,s.useRef)(null);return(0,i.BX)(i.HY,{children:[(0,i.tZ)(_.$U,{zaText:!0,zaType:"Button",as:l.Box,zaBlock:a,zaAction:"Upload",css:{display:"spread"===m?"block":"inline-block"},onMouseEnter:g,onMouseLeave:E,children:(0,i.tZ)(h.ZP,{className:A()("VideoUploadButton",t),preset:f||"primary",size:m||"spread",color:"blue",disabled:p,icon:v,onClick:function(e){r&&d.Z.trackEvent(e.target,{id:r,action:"Upload"}),T.current.click()},children:n})}),(0,i.tZ)("input",{type:"file",className:"VideoUploadButton-fileInput",ref:T,onChange:function(){o(T.current.files,"Add"),T.current.value=null},accept:Z.CZ.VIDEO.join(","),multiple:u})]})},S=n(26223),I=function(e){var t=e.className,n=e.showRuleDesc,o=void 0!==n&&n,r=(0,S.F)().colors;return(0,i.BX)(l.Box,{className:t,css:{fontSize:14,lineHeight:"22px",color:r.GBL05A,textAlign:"center",a:{textDecoration:"underline"}},children:[o&&(0,i.BX)(l.Flex,{marginTop:34,fontSize:10,width:688,justifyContent:"center",children:[(0,i.BX)(l.Box,{css:{width:"134px"},children:[(0,i.tZ)(l.Text,{css:{color:r.GBK04A,fontWeight:500,marginBottom:6},fontSize:13,children:"视频大小"}),(0,i.tZ)(l.Text,{fontSize:12,lineHeight:1.4,css:{color:r.GBK06A},children:"时长和大小均不限"}),(0,i.tZ)(l.Text,{fontSize:12,lineHeight:1.4,css:{color:r.GBK06A},children:"推荐上传大小为 5G 以内"})]}),(0,i.BX)(l.Box,{css:{width:"340px",position:"relative",margin:"0 40px","&::after,&::before":{content:'""',position:"absolute",width:1,height:20,verticalAlign:"middle",top:"50%",transform:"translate(0,-50%)",backgroundColor:r.GBK09A},"&::after":{left:0},"&::before":{right:0}},children:[(0,i.tZ)(l.Text,{css:{color:r.GBK04A,fontWeight:500,marginBottom:6},fontSize:13,children:"视频分辨率"}),(0,i.tZ)(l.Text,{fontSize:12,lineHeight:1.4,css:{color:r.GBK06A},children:"最大支持 1080P"}),(0,i.tZ)(l.Text,{fontSize:12,lineHeight:1.4,css:{color:r.GBK06A},children:"分辨率超过 1920 *1080，会被压缩为 1920 *1080"})]}),(0,i.BX)(l.Box,{css:{width:"134px"},children:[(0,i.tZ)(l.Text,{css:{color:r.GBK04A,fontWeight:500,marginBottom:6},fontSize:13,children:"视频格式"}),(0,i.tZ)(l.Text,{fontSize:12,lineHeight:1.4,css:{color:r.GBK06A},children:"支持常用视频格式"}),(0,i.tZ)(l.Text,{fontSize:12,lineHeight:1.4,css:{color:r.GBK06A},children:"推荐使用 mp4"})]})]}),(0,i.BX)(l.Text,{marginTop:35,color:r.GBL05A,fontSize:12,children:["上传视频，即代表您已同意"," ",(0,i.tZ)("a",{href:"https://www.zhihu.com/question/20118966",target:"_blank",rel:"noopener noreferrer",css:{color:r.GBL07A},children:"知乎视频使用规范"})," ","与"," ",(0,i.tZ)("a",{href:"https://www.zhihu.com/term/video",target:"_blank",rel:"noopener noreferrer",css:{color:r.GBL07A},children:"《知乎视频用户协议》"})]})]})},b=(0,s.memo)(I),w=n(17695),R=n(20722),N=n(49533),O=n(11116),D=n(40937);function B(e){var t=e.item,n=e.onCheck,o=(0,r.Z)((0,s.useState)(!1),2),a=o[0],c=o[1],u=t.id,d=t.title,p=t.description,h=t.imageUrl,f=t.publishedAt,m=t.video,v=null==m?void 0:m.duration;return(0,i.BX)(l.Flex,{p:"20px 24px",justifyContent:"space-between",alignItems:"center",children:[(0,i.BX)(l.Flex,{flex:1,children:[(0,i.BX)(l.Box,{width:112,height:70,flexShrink:0,marginRight:"16px",css:{position:"relative",borderRadius:3,overflow:"hidden"},children:[(0,i.tZ)(l.Image,{width:"100%",height:"100%",src:h,alt:"",css:{objectFit:"cover"}}),(0,i.tZ)(l.Text,{fontSize:12,lineHeight:"14px",color:"GBK99A",css:{position:"absolute",bottom:4,right:7,textShadow:"0 0 5px rgba(0,0,0,0.5)"},children:g(v)})]}),(0,i.BX)(l.Flex,{flexDirection:"column",justifyContent:"center",flex:1,children:[(0,i.tZ)(l.Text,{fontSize:14,fontWeight:500,lineHeight:"20px",color:"GBK03A",css:[(0,O.S)(1)],children:d}),(0,i.tZ)(l.Text,{mt:"6px",fontSize:14,lineHeight:"20px",color:"GBK04A",css:[(0,O.S)(1)],children:p}),(0,i.tZ)(l.Text,{mt:"8px",fontSize:13,lineHeight:"16px",color:"GBK06A",children:(0,D.rL)(f)})]})]}),(0,i.tZ)(N.C,{css:{marginLeft:16,flexShrink:0},checked:a,onChange:function(e){c(e.currentTarget.checked),n(u)}})]})}function P(e){var t,n=e.onClose,o=e.onSubmit,a=(0,r.Z)((0,s.useState)([]),2),c=a[0],d=a[1],p=(0,u.useSelector)((function(e){return e.zvideos.insertable}))||{},f=p.isLoading,m=p.data,v=p.paging,Z=(0,u.useDispatch)(),g=(0,s.useCallback)((function(){Z((0,T.Fn)())}),[Z]),E=(0,s.useCallback)((function(e){c.includes(e)?d(c.filter((function(t){return t!==e}))):d(c.concat([e]))}),[c]);return(0,i.BX)(l.Box,{height:688,children:[(0,i.tZ)(l.Box,{m:"40px auto",fontSize:24,fontWeight:500,lineHeight:"30px",color:"GBK02A",textAlign:"center",children:"选择已发布的视频"}),(0,i.tZ)(w.Z,{css:{marginBottom:100},onLoad:g,isLoading:null!=f&&f,isDrained:null!==(t=null==v?void 0:v.isEnd)&&void 0!==t&&t,getContainer:function(e){return e.parentElement.parentElement.parentElement},children:m.map((function(e,t){return(0,i.tZ)(R.SV,{children:(0,i.tZ)(B,{item:e,onCheck:E})},t)}))}),(0,i.BX)(l.Flex,{bg:"GBK99A",p:"32px 25px",width:"100%",height:100,justifyContent:"center",css:{position:"absolute",left:0,right:0,bottom:0},children:[(0,i.tZ)(h.ZP,{css:{flex:1},onClick:n,children:"返回"}),(0,i.tZ)(h.ZP,{disabled:0===c.length,css:{flex:1,marginLeft:18},preset:"primary",color:"blue",onClick:function(){o(c),n()},children:"添加"})]})]})}var k=function(e){var t=e.show,n=e.onZVideoSubmit,m=e.onVideoSubmit,v=e.onClose,g=((0,u.useSelector)((function(e){return e.zvideos.insertable}))||{}).data,C=(0,r.Z)((0,s.useState)(!1),2),A=C[0],_=C[1],S=(0,r.Z)((0,s.useState)(!1),2),I=S[0],w=S[1],R=(0,u.useDispatch)(),N=(0,a.Z)((function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.multiple,o=void 0!==n&&n,r=t.numLimit,i=void 0===r?Z.lM:r,a=t.uploadPartiallyWhenExceedsLimit,c=void 0===a||a,s=Array.from(e).filter((function(e){return Z.CZ.VIDEO.some((function(t){return e.name.toLowerCase().endsWith(t)}))}));if(0===s.length)return{message:"视频格式不支持",abortUpload:!0};var u=s.filter((function(e){return e.size>102400}));return 0===u.length?{message:"视频必须大于 100KB，请重新选择上传",abortUpload:!0}:!o&&u.length>1?{message:"一次仅能上传一个视频，请分开上传",abortUpload:!1,validFiles:[u[0]]}:o&&u.length>i?0===i?{message:"上传个数已达上限",abortUpload:!0}:c?{message:"最多可上传 ".concat(i," 个视频，已默认选择").concat(i>1?"前":"第"," ").concat(i," 个视频"),abortUpload:!1,validFiles:u.slice(0,i)}:{message:"一次最多上传 ".concat(i," 个视频, 请重新选择上传"),abortUpload:!0}:{message:null,abortUpload:!1,validFiles:u}}(e),n=t.message,o=t.abortUpload,r=t.validFiles;n&&(R((0,E.c0)(n,o?"red":"white")),o)||m({value:r[0]})}));return t?(0,i.BX)(p.Z,{css:{width:688},onClose:v,children:[I&&(0,i.tZ)(P,{onSubmit:n,onClose:function(){w(!1)}}),!I&&(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.Text,{fontSize:"24px",color:"GBK02A",lineHeight:"34px",fontWeight:500,m:"40px 0 30px",textAlign:"center",children:"导入视频"}),(0,i.BX)(l.Flex,{flexDirection:"column",alignItems:"center",width:"440px",height:"300px",margin:"0 auto 45px",css:function(e){return(0,o.Z)({border:"2px dashed ".concat(e.colors.GBK09A),borderRadius:4},A&&{borderColor:e.colors.GBL05A,"*":{pointerEvents:"none"}})},onDragOver:function(e){return e.preventDefault()},onDragEnter:function(){return _(!0)},onDragLeave:function(){return _(!1)},onDrop:function(e){e.preventDefault(),N(f(e))},children:[(0,i.tZ)(c.z,{size:90,css:function(e){return{color:A?e.colors.GBL05A:e.colors.GBK09A,marginTop:66}}}),(0,i.tZ)(l.Text,{color:"GBK03A",fontSize:"20px",lineHeight:"28px",fontWeight:"500",mt:"16px",children:"拖放要导入的视频文件"}),(0,i.BX)(l.Box,{mt:"20px",children:[(0,i.tZ)(y,{text:"导入视频",multiple:!1,css:{width:142},zaBlockText:"UploadVideoFile",onFiles:N}),(0,i.tZ)(h.ZP,{preset:"secondary",color:"blue",css:{width:142,marginLeft:12,padding:"0 14px",whiteSpace:"nowrap"},onClick:function(e){d.Z.trackEvent(e.target,{id:8622,action:"Click"},{button:{text:"选择已发布的视频"}}),(null==g?void 0:g.length)>0?w(!0):R((0,T.Fn)()).then((function(e){e.payload.data.length?w(!0):R((0,E.c0)("还没有发布过视频"))}))},children:"选择已发布的视频"})]})]}),(0,i.tZ)(b,{})]})]}):null}},43950:function(e,t,n){"use strict";n.d(t,{o:function(){return d},Z:function(){return p}});var o=n(65390),r=n(88483),i=n(78194),a=n(68562),c=n(47859),s=n(87363),u=n(35314),l=function(e){return new Promise((function(t,n){try{var o=document.createElement("video");o.preload="metadata",o.onloadedmetadata=function(){URL.revokeObjectURL(o.src),t(Math.floor(1e3*o.duration))},o.onerror=n,o.src=URL.createObjectURL(e)}catch(e){n(e)}}))},d=(0,s.createContext)({}),p=function(e){var t=e.children,n=e.zvideo_id,p=e.defaultVideo,h=(0,i.Z)((0,s.useState)(null),2),f=h[0],m=h[1],v=(0,u.Z)(),Z=(0,c.Z)((function(e){v&&n&&v("/api/v4/zvideos/".concat(n,"/publish/permissions?full_duration_millis=").concat(e)).then((function(e){if(e.ok){var t=e.payload,n=(null!=t?t:{}).chapters;if(!n)return;var o=(0,r.Z)({},n,{minInterval:"number"==typeof n.minInterval?parseInt("".concat(n.minInterval/1e3)):5});m(o)}}))})),g=(0,s.useRef)();return(0,s.useEffect)((function(){var e;n&&void 0===g.current&&(p.file&&(0,o.Z)(p.file,File)?l(p.file).then((function(e){g.current=e,Z(e)})):(null===(e=p.video)||void 0===e?void 0:e.duration)&&Z(1e3*p.video.duration))}),[p,n,v,Z]),(0,a.tZ)(d.Provider,{value:f,children:f&&t})}},88158:function(e,t,n){"use strict";var o=n(78194),r=n(68562),i=n(67608),a=n(87363),c=n(82096),s=n(73464);function u(e){var t=e.campaign,n=e.selected,o=e.onSelect,a=t.title,c=t.description;return(0,r.BX)("div",{className:"VideoContributableCampaignModalCampaign",children:[(0,r.BX)("div",{role:"button",tabIndex:0,className:"VideoContributableCampaignModalCampaign-info",onClick:o,children:[(0,r.tZ)("div",{className:"VideoContributableCampaignModalCampaign-title",children:a}),(0,r.tZ)("div",{className:"VideoContributableCampaignModalCampaign-description",children:c})]}),(0,r.tZ)(i.Z,{checked:n,onChange:o,size:16})]})}t.Z=function(e){var t=e.shown,n=e.onClose,i=e.defaultCampaignId,l=e.campaignList,d=e.onSubmit,p=(0,o.Z)((0,a.useState)((function(){return i?l.find((function(e){return e.id===i})):null})),2),h=p[0],f=p[1];return(0,r.tZ)(c.Z,{title:"选择活动",size:"large",onClose:n,children:t&&(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{className:"VideoContributableCampaignModal-list",children:l.map((function(e){return(0,r.tZ)(u,{campaign:e,selected:(null==h?void 0:h.id)===e.id,onSelect:function(){f((null==h?void 0:h.id)===e.id?null:e)}},e.id)}))}),(0,r.BX)(c.w,{direction:"horizontal",children:[(0,r.tZ)(s.ZP,{onClick:n,children:"返回"}),(0,r.tZ)(s.ZP,{preset:"primary",color:"blue",onClick:function(){d(h)},children:"确定"})]})]})})}},81144:function(e,t,n){"use strict";n.d(t,{Z:function(){return de}});var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(87363),s=n(47112),u=n.n(s),l=n(85296),d=n(49109),p=n(89760),h=n(62685),f=n(42357),m=n(3785),v=n(23580),Z=n(95088),g=n(87172),E=n(46698),T=n(44507),C=n(97356),A=n(80401),_=n(55525),y=n(99610),S=n.n(y),I=n(88276),b=n.n(I),w=n(6100),R=n.n(w),N=n(53658),O=n(75926),D=n.n(O),B=n(27889),P=n(43131),k=n(30648),x=n(87808),L=n(61565),U=n(66140),F=n(46315),M=n(72275),G=n(63601),z=n(65687),H=n(79959),q=n(5767),V=n(31228),X=n(91561),W=n(25715),K=n(320),j=n(97864),Y=n(49510),Q=n(12839),J=n(97595),$=n(75489),ee=n(77637),te=n(60236),ne=n(30658),oe=n(68144),re=["日","一","二","三","四","五","六"],ie=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={calendarDate:e.props.defaultCalendarDate||(Array.isArray(e.props.value)?e.props.value[0]:e.props.value),hoveringDate:null,now:new Date},e.handlePrevYearClick=function(){var t=(0,U.Z)(e.state.calendarDate,-1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handlePrevMonthClick=function(){var t=(0,F.Z)(e.state.calendarDate,-1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleNextMonthClick=function(){var t=(0,F.Z)(e.state.calendarDate,1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleNextYearClick=function(){var t=(0,U.Z)(e.state.calendarDate,1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleDayClick=function(t){e.setState({calendarDate:t}),e.props.onCalendarDateChange(t),e.props.onChange(t)},e.handleDayHover=function(t){e.setState({hoveringDate:t}),e.props.onHover(t)},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.className,o=t.weekStartsOn,r=t.value,i=t.disabledDate,c=t.showToday,s=t.showPrevMonth,l=t.showPrevYear,d=t.showNextMonth,p=t.showNextYear,h=this.state,f=h.calendarDate,m=h.hoveringDate,v=h.now,Z=(0,M.Z)((0,G.Z)(f),{weekStartsOn:o}),g=(0,z.Z)((0,H.Z)(f),{weekStartsOn:o}),T=(0,L.Z)(Array((0,q.Z)(g,Z)+1)).map((function(e,t){return(0,V.Z)(Z,t)})).reduce((function(e,t){var n=(0,X.Z)(t,Z,{weekStartsOn:o});return e[n]=e[n]?(0,L.Z)(e[n]).concat([t]):[t],e}),[]),C=T[0].map(W.Z),A=Array.isArray(r),_=c;return(0,a.BX)("div",{className:u()("Calendar",n,{"Calendar--hasBottomTool":_}),children:[(0,a.BX)("div",{className:"Calendar-topTool",children:[l&&(0,a.tZ)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevYear",onClick:this.handlePrevYearClick,children:(0,a.tZ)(ee.t,{size:20,center:!0})}),s&&(0,a.tZ)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevMonth",onClick:this.handlePrevMonthClick,children:(0,a.tZ)(te.e,{size:20,center:!0})}),(0,a.tZ)("div",{className:"Calendar-topToolDate",children:(0,E.Z)(f,"yyyy 年 M 月")}),d&&(0,a.tZ)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextMonth",onClick:this.handleNextMonthClick,children:(0,a.tZ)(ne.N,{size:20,center:!0})}),p&&(0,a.tZ)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextYear",onClick:this.handleNextYearClick,children:(0,a.tZ)(oe.r,{size:20,center:!0})})]}),(0,a.BX)("table",{className:"Calendar-table",cellSpacing:0,children:[(0,a.tZ)("thead",{className:"Calendar-thead",children:(0,a.tZ)("tr",{children:C.map((function(e){return(0,a.tZ)("th",{className:"Calendar-weekName",children:re[e]},e)}))})}),(0,a.tZ)("tbody",{children:T.map((function(t,n){return(0,a.tZ)("tr",{children:t.map((function(t,n){var o=i(t),c=A?(0,K.Z)(t,r[0])||(0,K.Z)(t,r[1]):(0,K.Z)(t,r),s=!1;if(A){var l=(0,j.Z)(r),d=(0,Y.Z)(r);s=(0,Q.Z)(t,l)>0&&(0,Q.Z)(d,t)>0}return(0,a.tZ)("td",{className:u()("Calendar-day",{"is-hovered":(0,K.Z)(t,m),"is-today":(0,K.Z)(t,v),"is-disabled":o,"is-not-this-month":!(0,J.Z)(t,f),"is-input-date":c,"is-in-range":s}),onClick:function(){o||e.handleDayClick(t)},onMouseEnter:function(){o||e.handleDayHover(t)},onMouseLeave:function(){o||e.handleDayHover(null)},children:(0,$.Z)(t)},n)}))},n)}))})]}),_&&(0,a.tZ)("div",{className:"Calendar-bottomTool",children:c&&(0,a.tZ)("button",{className:"Calendar-todayButton",onClick:function(){return e.handleDayClick(v)},disabled:i(v),children:"今天"})})]})},n}(c.Component);ie.defaultProps={weekStartsOn:0,disabledDate:function(){return!1},onChange:function(){return!1},onCalendarDateChange:function(){return!1},onHover:function(){return!1},showToday:!0,showPrevMonth:!0,showPrevYear:!0,showNextMonth:!0,showNextYear:!0},ie.propTypes={defaultCalendarDate:D().instanceOf(Date),value:D().oneOfType([D().instanceOf(Date),D().arrayOf(D().instanceOf(Date))]),weekStartsOn:D().number,disabledDate:D().func,onChange:D().func,onHover:D().func,showToday:D().bool,showPrevMonth:D().bool,showPrevYear:D().bool,showNextMonth:D().bool,showNextYear:D().bool};var ae=ie,ce=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={isFocused:!1},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.className,o=t.large,r=t.value,i=t.onChange,c=t.isButtonActive,s=t.toggler,l=t.disabledDate,d=t.getContainer,p=t.showIcon,h=void 0!==p&&p,f=this.state.isFocused;return(0,a.tZ)(P.Z,{className:u()("DatePicker",n),toggler:s||(0,a.BX)(B.Z,{large:o,className:u()("DatePicker-Button",{"is-active":f||c}),children:[h&&(0,a.tZ)(k.i,{center:!0,size:20}),E.Z(r,"yyyy/MM/dd"),(0,a.tZ)(x.ji,{css:{marginLeft:8}})]}),onOpen:function(){e.setState({isFocused:!0})},onClose:function(){e.setState({isFocused:!1})},ref:function(t){e.popover=t},placement:"bottom",arrowed:!0,preventCloseOnTarget:!0,getContainer:d,children:(0,a.tZ)(ae,{value:r,onChange:function(t){e.popover.close(),i(t)},disabledDate:l})})},n}(c.Component);ce.propTypes={toggler:D().element,disabledDate:D().func};var se=S()(0,24).map((function(e){return b()(e,2,"0")})),ue=S()(0,60).map((function(e){return b()(e,2,"0")})),le=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={value:l.Z(e.props.value,0)},e}var c=n.prototype;return c.handleChange=function(e,t){var n=this.props,o=n.onChange,r=n.min,i=n.max,a=e;r&&d.Z(e,r)&&(a=r),i&&p.Z(e,i)&&(a=i),this.setState({value:a}),o(a,t)},c.render=function(){var e=this,t=this.props,n=t.className,o=t.large,r=t.min,i=t.max,c=t.onRef,s=t.showIcon,l=void 0!==s&&s,y=this.state.value,S=r&&h.Z(f.Z(y),f.Z(r)),I=S&&h.Z(m.Z(y),m.Z(r)),b=i&&h.Z(f.Z(y),f.Z(i)),w=b&&h.Z(m.Z(y),m.Z(i));return(0,a.BX)("div",{className:u()("DateTimePicker",n),ref:c,children:[(0,a.tZ)(ce,{showIcon:l,large:o,value:y,disabledDate:function(e){return!(!r||!d.Z(e,f.Z(r)))||!(!i||!p.Z(e,f.Z(i)))},onChange:function(t){e.handleChange(R()((function(e){return v.Z(e,t.getFullYear())}),(function(e){return Z.Z(e,t.getMonth())}),(function(e){return g.Z(e,t.getDate())}))(y),{date:t})}}),(0,a.tZ)(N.Z,{listClassName:"DateTimePicker-selectList",large:o,value:E.Z(y,"HH"),onChange:function(t){return e.handleChange(T.Z(y,t),{hours:t})},children:se.map((function(e){var t=S&&e<C.Z(r)||b&&e>C.Z(i);return(0,a.tZ)(N.W,{value:e,disabled:t,css:function(e){return{color:t?e.colors.GBK07B:e.colors.GBK02A}}},e)}))}),(0,a.tZ)("span",{className:"DateTimePicker-label",children:"时"}),(0,a.tZ)(N.Z,{listClassName:"DateTimePicker-selectList",large:o,value:E.Z(y,"mm"),onChange:function(t){return e.handleChange(A.Z(y,t),{minutes:t})},children:ue.map((function(e){var t=I&&e<_.Z(r)||w&&e>_.Z(i);return(0,a.tZ)(N.W,{value:e,disabled:t,css:function(e){return{color:t?e.colors.GBK07B:e.colors.GBK02A}}},e)}))}),(0,a.tZ)("span",{className:"DateTimePicker-label",children:"分"})]})},n}(c.Component),de=le},75701:function(e,t,n){"use strict";n.r(t);var o=JSON.parse(document.getElementById("js-clientConfig").textContent);t.default=o},70175:function(e,t,n){"use strict";var o=n(75701);t.Z=o.default},91355:function(e,t,n){"use strict";n.d(t,{AW:function(){return G},An:function(){return y},BR:function(){return p},CZ:function(){return W},Dm:function(){return O},G5:function(){return J},If:function(){return T},K9:function(){return D},K_:function(){return s},LA:function(){return F},M:function(){return w},M5:function(){return A},Pw:function(){return m},R8:function(){return k},Sp:function(){return M},T$:function(){return E},TY:function(){return N},Uw:function(){return R},W0:function(){return B},Wy:function(){return C},Xq:function(){return q},aK:function(){return K},dd:function(){return Q},fH:function(){return I},hE:function(){return h},hY:function(){return b},i3:function(){return z},i7:function(){return u},iG:function(){return _},jB:function(){return P},lH:function(){return $},lM:function(){return H},o$:function(){return j},o7:function(){return S},oP:function(){return x},of:function(){return X},ov:function(){return ee},pL:function(){return Y},q0:function(){return g},rX:function(){return l},ur:function(){return U},vg:function(){return d},xR:function(){return V},yK:function(){return f},zg:function(){return v},zs:function(){return L}});var o=n(71103),r=n(88483),i=n(16600),a=n(48340),c=n(70175),s={"-1":"他",0:"她",1:"他"},u="//www.zhihu.com",l="column"!==c.Z.currentEntry?"":u,d="//zhuanlan.zhihu.com",p=52,h={weekly:"知乎周刊",roundtable:"圆桌",editor_recommendation:"编辑推荐"},f="www.zhihu.com",m={hang:"hang",lock:"lock",ban:"ban",isForceRenamed:"isForceRenamed",isGuest:"isGuest",destroy:"destroy",suicide:"suicide",notBindPhone:"notBindPhone"},v=Object.keys(m).map((function(e){return m[e]})),Z={follow:[m.ban,m.isForceRenamed,m.notBindPhone,m.isGuest],report:[m.ban,m.notBindPhone],share:[m.ban,m.isForceRenamed],editProfile:[m.ban,m.isForceRenamed,m.notBindPhone],thank:[m.notBindPhone],deblock:[m.lock],vote:[m.notBindPhone],favlists:[m.notBindPhone],like:[m.notBindPhone],message:[m.notBindPhone],serviceAccountMessage:[m.notBindPhone,m.ban],deletePin:[m.notBindPhone],invite:[m.notBindPhone],getCoupon:[m.notBindPhone],gift:[m.notBindPhone],blockUser:[m.notBindPhone],buy:[m.notBindPhone],reply_club:[m.notBindPhone]},g=Object.keys(Z).reduce((function(e,t){return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t,v.filter((function(e){return!Z[t].includes(e)}))))}),{}),E={blocking:"因为你已将此人屏蔽，暂时无法进行该操作。您可以进入他的个人主页解除屏蔽。",commentBlocked:"根据对方设置，暂时无法进行评论操作。",blocked:"根据对方设置，暂时无法进行该操作。"},T=2400,C=1e4,A={sina:"3063806388",qqconn:"100490701",wechat:"wx268fcfe924dcb171",mobileWechat:"wx21dd00cd1ccac236"},_="bindPhoneLastAlertTime",y=4039,S=100007,I=1e5,b=100010,w=100016,R=100017,N=100018,O=100028,D=40312,B=110600,P={add:"annotation",cancel:"annotation_cancel",view:"show_annotation_detail"},k=0,x=1,L=2,U={topic:"Topic",people:"User",column:"Column",collection:"Collection",live:"Live",ebook:"EBook",publication:"EBook",pin:"Pin",article:"Post",answer:"Answer",question:"Question",club:"Club",question_ask:"QuestionAsk",promotion:"Promotion",roundtable:"RoundtableItem",live_course:"LiveCourse",remix_album:"RemixAlbum",search_course:"LiveCourse",search_special:"LiveAlbum",out_link:"ExternalAd",ad:"Ad",album:"RemixAlbum",rewardPeople:"User",zvideo:"Video"},F={question:"Question",answer:"Answer",comment:"Comment",message:"Message",pin:"Pin",live:"Live",live_message:"LiveMessage",book_review:"BookReview",promotion:"Promotion",column:"Column",club_mask:"ClubMask",theater:"Theater",drama:"Drama",zvideo:"Zvideo",zvideo_collection:"ZvideoCollection",topic:"Topic",collection:"Collection",question_ask:"QuestionAsk",roundtable:"Roundtable",ebook:"EBook",remix_album:"RemixAlbum",live_course:"LiveCourse",ad:"Ad",article:"Post",favlist:"Collection",people:"User",member:"User",club_post:"Clubpost",publication:"EBook",album:"RemixAlbum",search_course:"LiveCourse",search_special:"LiveAlbum",out_link:"ExternalAd",paid_consultation_question:"Conversation",paid_consultation_answer:"Conversation",activity:"Unknown",live_feedback:"Unknown",live_feedback_reply:"Unknown",infinity:"Unknown",zhihu_daily:"Unknown",market_comment:"Unknown",topic_log:"Unknown",book_note:"Unknown",discussion_review:"Unknown",drama_bullet:"Unknown",drama_statement:"Unknown",bullet:"Unknown",vip_comment:"Unknown",search_suggested_word:"Unknown",zpoll:"Unknown"},M="真诚赞赏，手留余香",G={abuseip:40350,imfrozen:40351,unhuman:40352},z=10,H=20,q="global::enableShortcut",V={alertTimeSpan:3600,canWrite:!1,tip:"应国家法规对于帐号实名的要求，进行下一步操作前，需要先完成手机绑定。"},X={NO_AUTH:-1,ENTER_RECRUIT:0,NO_SETTING:1,PASS:2},W={IMAGE:[".png",".jpeg",".gif",".jpg"],VIDEO:[".3gp",".asf",".avi",".dat",".f4v",".flv",".m4v",".mkv",".mov",".mp4",".mp4v",".mpe",".mpeg",".mpg",".ra",".ram",".rm",".rmvb",".vob",".webm",".wm",".wmv"]},K={id:null,urlToken:null,name:"匿名用户",gender:-1,avatarUrl:(0,a.imgUrl)("https://pic1.zhimg.com/v2-d41c2ceaed8f51999522f903672a521f.jpeg","is"),headline:null,badge:null,isOrg:!1,isFollowing:!1,isFollowed:!1,isBlocking:!1,isBlocked:!1},j=((0,i.Z)((0,r.Z)({},K),{name:" 知乎用户",avatarUrl:(0,a.imgUrl)("https://pic1.zhimg.com/v2-abed1a8c04700ba7d72b45195223e0ff.jpeg","is")}),{answer:["1396303730","1394715943","1309692335","571602599","1405988657","1551858840","528969715","1126833448","1551974986"],question:["329062584","298155229","335633281","344276433","418460881","424224869","423070517"]}),Y="https://www.zhihu.com/xen/market/vip-privileges",Q=!0,J="zhihumobilesvip",$=["四川","地震"],ee={collect_answer:"收藏",up:"赞同",down:"反对",neutral:"取消赞同/反对"}},49019:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var o=n(21620),r=n(84421),i=n(32554),a=n(68562),c=n(3090),s=n(47112),u=n.n(s),l=n(75926),d=n.n(l),p=n(87363),h=n(17222),f=n(73464),m=n(61565),v=n(33386),Z=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).handleAdd=function(t){var n=e.props,o=n.value,r=n.onChange,i=n.onAdd;i&&i(t),r&&r((0,m.Z)(o).concat([t]))},e.handleRemove=function(t){var n=e.props,o=n.value,r=n.onChange,i=n.onRemove;i&&i(o[t],t),r&&r((0,m.Z)(o.slice(0,t)).concat((0,m.Z)(o.slice(t+1))))},e.handleIfBackspace=function(t){var n=e.props.value;8===t.keyCode&&!e.state.value&&n.length&&e.handleRemove(n.length-1)},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.className,o=t.value,r=t.renderTagInner,i=t.renderInput;return(0,a.BX)("div",{className:u()("TagInputAlias",n),children:[o&&o.map((function(t,n){return(0,a.tZ)(v.Z,{removable:!0,onRemove:function(){return e.handleRemove(n)},children:r(t)},n)})),i({onAdd:this.handleAdd,onIfBackspace:this.handleIfBackspace})]})},n}(p.Component);Z.propTypes={renderTagInner:d().func.isRequired,renderInput:d().func,value:d().array.isRequired,onAdd:d().func,onRemove:d().func,onChange:d().func};var g=Z,E=n(88483),T=n(16600),C=n(52626),A=n(52495),_=n(11153),y=n.n(_),S=n(69149),I=n(64634),b=n(96531),w=n(40198),R=function(e){return e.name.startsWith("创建 ")&&e.name.endsWith(" 话题")},N=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).state={value:"",items:[]},e.mounted=!1,e.fetchTopic=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return S.F.apply(void 0,(0,m.Z)(n).concat([[],{topic_filter:1}])).then((function(t){t=t.filter((function(e){return!R(e)}));var o=e.props.currentUser,r=n[0];return o&&o.canEditTopic&&!t.find((function(e){return e.name===r}))?(0,m.Z)(t).concat([{urlToken:"topic",token:r,name:"创建 ".concat(r," 话题")}]):t}))},e.createTopic=function(t){return e.props.createTopic(t).then((function(e){return e.payload}))},e.handleSelect=function(t,n){var o=e.props.onSelect;Promise.resolve(R(n)?e.createTopic(n.token||n.name):n).then((function(t){o&&o(t),e.mounted&&e.setState({value:""})})).catch((function(){e.setState({value:""})}))},e.handleChange=y()((function(t){e.setState({value:t}),e.fetchTopic(t).then((function(t){return e.mounted&&e.setState({items:t})}))}),200),e}var c=n.prototype;return c.componentDidMount=function(){this.mounted=!0,(0,this.props.fillCurrentUserIfNeeded)(["canEditTopic"])},c.componentWillUnmount=function(){this.mounted=!1},c.render=function(){var e=this.state,t=e.value,n=e.items,o=this.props.filter;return(0,a.tZ)(I.Z,(0,T.Z)((0,E.Z)({},this.props),{autoFocus:!0,value:t,items:o&&n?n.filter(o):n,onChange:this.handleChange,onSelect:this.handleSelect}))},n}(p.Component),O=(0,C.compose)((0,A.connect)((function(e){return{currentUser:(0,w.ib)(e)}}),{createTopic:b.HV,fillCurrentUserIfNeeded:w.sF}))(N),D=function(e){(0,r.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).handleClick=function(t){var n=e.props.onToggleActived;n&&n(),h.Z.trackEvent(t.target,{id:2465,action:"Click"})},e.handleBlur=function(t){var n=e.props.onBlur;n&&n(t);var o=e.props.onToggleActived;o&&o()},e.handleChange=function(t){var n=e.props,o=n.max,r=n.onChange;o>0&&r(t.slice(0,o))},e}return n.prototype.render=function(){var e=this,t=this.props,n=t.className,o=t.max,r=t.value,i=t.inputProps,s=t.onAdd,l=t.onRemove,d=t.actived,p=t.onRef,h=t.placeholderNote,m="绑定话题".concat(r.length>0?"（".concat(r.length,"/").concat(o,"）"):h||"（至少添加一个）");return(0,a.tZ)(g,{className:u()("TopicInputAlias-tagInput",n),value:r,renderInput:function(t){var n=t.onAdd,s=t.onIfBackspace;return(!r||r.length<o)&&(d?(0,a.tZ)(O,{className:"TopicInputAlias-autocomplete",inputProps:{className:u()("TopicInputAlias-input",null==i?void 0:i.className)},menuProps:{menuClassName:"TopicInputAlias-suggestionContainer"},filter:r&&function(e){return!r.find((function(t){return function(e,t){if(!e||!t)return!1;var n=e.urlToken||e.id,o=t.urlToken||t.id;return n&&n===o}(t,e)}))},onRef:p,onKeyDown:s,onSelect:n,onBlur:e.handleBlur,placeholder:m}):(0,a.tZ)(f.ZP,{className:"TopicInputAlias-placeholderButton",label:m,icon:c.nY,onClick:e.handleClick,preset:"plain",color:"blue"}))},renderTagInner:function(e){return(0,a.tZ)("a",{target:"_blank",rel:"noopener noreferrer",href:"//www.zhihu.com/topic/".concat(e.id||e.urlToken),children:e.name})},onAdd:s,onRemove:l,onChange:this.handleChange})},n}(p.Component);D.propTypes={max:d().number},D.defaultProps={max:5};var B=D},440:function(e,t,n){"use strict";n.d(t,{tA:function(){return D},Lf:function(){return w},rt:function(){return T}});var o=n(78194),r=n(21353),i=n(68562),a=n(87363),c=n(52495),s=n(23323),u=n(44457),l=n(86193),d=n(96323),p=n(54048),h=n(15703),f=n(64448),m=n(62485);function v(){var e=(0,r.Z)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return v=function(){return e},e}var Z=(0,l.F4)(v()),g=function(e){var t=e.className,n=e.isLoading;return(0,i.BX)(d.sN,{className:t,css:function(e){return{display:"inline-flex",alignItems:"center",color:e.colors.GBK06A}},children:[(0,i.tZ)("span",{css:{display:"inline-flex",alignItems:"center",width:24,marginLeft:-24},children:(0,i.tZ)(u.Z,{css:n?{animation:"".concat(Z," 1s linear 600ms infinite")}:{}})}),n?"加载中...":"加载失败，点击「设置」重试"]})},E=function(e){var t=e.className,n=e.current,o=e.permissionItem,r=e.onClick,a=o.permission,c=o.text,s=o.disable,u=o.disableAlert;return a!==p.sO||n===a||(0,p.M1)()?(0,i.tZ)(f.Z,{className:t,onClick:function(){s?(0,m.t)(u,{theme:"red-ghost"}):r(a,c)},checked:n===a,children:c}):null};function T(e){var t=e.current,n=e.target,r=e.type,u=e.onChange,l=e.className,d=(0,o.Z)((0,s.Z)(!1),2),f=d[0],v=d[1],Z=(0,o.Z)((0,s.Z)(!0),2),T=Z[0],C=Z[1],A=(0,c.useDispatch)(),_=n.type,y=n.id,S=r||_,I=(0,c.useSelector)((function(e){var t;return null===(t=e.commentPermission[S])||void 0===t?void 0:t[y]}))||[];(0,a.useEffect)((function(){f||A((0,h.n5)(S,y)).finally((function(){C.off(),v.on()}))}),[A,S,y,f,v,C]),(0,a.useEffect)((function(){t!==p.sO||(0,p.M1)()||(0,p.UJ)()}),[t]);var b=function(e,o){if(e!==t)if(n){var r=n.id;n.adminClosedComment?(0,m.t)("此内容无法更改评论权限",{theme:"red-ghost"}):e===p.Kz||t===p.Kz?(0,m.y)("你确定要更改评论权限吗？",{content:e===p.Kz?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来"}).then((function(){return u(r,e,o)})).catch((function(){return null})):u(r,e,o)}else u(e)};return T?(0,i.tZ)(g,{className:l,isLoading:!0}):T||!f||I.length?(0,i.tZ)(i.HY,{children:I.map((function(e){return(0,i.tZ)(E,{className:l,permissionItem:e,onClick:b,current:t},e.permission)}))}):(0,i.tZ)(g,{className:l})}var C=n(21620),A=n(84421),_=n(32554),y=n(82096),S=n.p+"assets/deleteComment.d2efe0dc.gif",I=n(49236),b=function(e){(0,A.Z)(n,e);var t=(0,_.Z)(n);function n(){return(0,C.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){return(0,i.tZ)("img",{src:S,style:{maxWidth:"200px",marginTop:"30px"},alt:"delete-comment-success"})},n}(a.Component);b.showModal=function(e){y.Z.open((function(t){var n=(e||{}).reportText;return setTimeout(t,2e3),(0,i.tZ)(y.Z,{title:"举报成功",onClose:t,children:(0,i.BX)("div",{style:{textAlign:"center"},children:[(0,i.tZ)("div",{children:n||"你的举报我们已经收到，处理完成后将会私信告知处理结果。"}),(0,i.tZ)(b,{})]})})}))};var w=(0,I.a)({view:{id:3038},trackCardShow:!0})(b),R=n(73464),N=n(13261),O=function(e){(0,A.Z)(n,e);var t=(0,_.Z)(n);function n(){var e;return(0,C.Z)(this,n),(e=t.apply(this,arguments)).state={reportModalShown:!1},e.handleSubmit=function(){var t=e.props,n=t.id,o=t.onDelete,r=t.onClose;o(n),r()},e.handleReportModalOpen=function(){return e.setState({reportModalShown:!0})},e.handleReportModalClose=function(){e.setState({reportModalShown:!1}),e.handleSubmit()},e.handleSuccess=function(){e.handleSubmit()},e}return n.prototype.render=function(){var e=this.props,t=e.id,n=e.shown,o=e.onClose,r=e.reportAndDeleteExperiment;return(0,i.BX)(a.Fragment,{children:[(0,i.tZ)(y.Z,{title:"你确定要删除这条评论吗？",closeButton:null,maskClosable:!1,hotKeyClosable:!1,onClose:o,footer:r&&(0,i.BX)("div",{className:"CommentDeleteAndReport-extra",children:["评论若构成举报条件可以",(0,i.tZ)(R.ZP,{preset:"link",onClick:this.handleReportModalOpen,children:"删除并举报"})]}),children:n&&(0,i.BX)(y.w,{direction:"horizontal",children:[(0,i.tZ)(R.ZP,{onClick:o,children:"取消"}),(0,i.tZ)(R.ZP,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:"确定"})]})}),(0,i.tZ)(N.y,{title:"删除成功，请选择举报理由",subtitle:"",shown:this.state.reportModalShown,type:"comment",urlToken:t,zaEnabled:!0,onSuccess:this.handleSuccess,onClose:this.handleReportModalClose})]})},n}(a.Component),D=O},23621:function(e,t,n){"use strict";n.d(t,{xu:function(){return ue},WD:function(){return se},Zy:function(){return ae},AN:function(){return ce},Yj:function(){return re},EE:function(){return de},Oo:function(){return pe},Gf:function(){return le}});var o=n(71103),r=n(88483),i=n(61565),a=n(57773),c=n(95708),s=n(24111),u=n(90857),l=n(5214),d=n(52264),p=n(95790),h=n(20472),f=n(86034),m=n(42844),v=n(87363),Z=n.n(v),g=n(16915),E=Object.assign;var T=function(e){return Z().createElement(g.Z,E({width:"24",height:"24",viewBox:"0 0 24 24"},e),Z().createElement("defs",null,Z().createElement("path",{id:"id-1100645874-a",d:"M14.4 2.778c1.988 0 3.6 1.527 3.6 3.412v7.676c0 1.884-1.612 3.412-3.6 3.412H3.6c-1.988 0-3.6-1.528-3.6-3.412V6.19c0-1.885 1.612-3.412 3.6-3.412h10.8ZM7.771 7c-.556 0-1.014.446-1.066 1.017l-.005.108v3.75l.005.108c.052.57.51 1.017 1.066 1.017.165 0 .32-.039.46-.109l.008.005 2.846-1.878A1.13 1.13 0 0 0 11.7 10c0-.397-.196-.746-.492-.949L8.454 7.258A1.037 1.037 0 0 0 7.771 7Zm-.328-3.444L5.361 1.463A.858.858 0 0 1 6.571.249l2.318 2.33L11.204.252a.856.856 0 1 1 1.213 1.21l-2.083 2.094h-2.89Z"})),Z().createElement("g",{fill:"none",fillRule:"evenodd"},Z().createElement("path",{d:"M0 0h24v24H0z"}),Z().createElement("g",{transform:"translate(3 3)"},Z().createElement("mask",{id:"id-1100645874-b",fill:"#fff"},Z().createElement("use",{xlinkHref:"#id-1100645874-a"})),Z().createElement("use",{xlinkHref:"#id-1100645874-a",fill:"currentColor",fillRule:"nonzero"}),Z().createElement("g",{fill:"currentColor",mask:"url(#id-1100645874-b)"},Z().createElement("path",{d:"M-3-3h24v24H-3z"})))))},C=Object.assign;var A=function(e){return Z().createElement(g.Z,C({width:"18",height:"20",viewBox:"0 0 18 20"},e),Z().createElement("path",{fillRule:"evenodd",d:"M2 0h14a2 2 0 0 1 2 2v15.133a1.9 1.9 0 0 1-2.7 1.723l-1.788-.83a2 2 0 0 0-1.796.055l-1.86 1.009a2 2 0 0 1-1.75.076l-2.7-1.171a2 2 0 0 0-1.77.088l-1.386.773A1.513 1.513 0 0 1 0 17.534V2a2 2 0 0 1 2-2Zm8.005 9.055a1.005 1.005 0 0 0 0 2.011h3.99a1.005 1.005 0 0 0 0-2.011h-3.99Zm-1.05-6.033A3.479 3.479 0 0 0 6.5 2.011 3.51 3.51 0 0 0 3 5.531a3.51 3.51 0 0 0 3.5 3.518A3.51 3.51 0 0 0 10 5.53c0-.478-.095-.934-.267-1.35L7.135 7.685a.654.654 0 0 1-.868.17l-1.859-1.14a.662.662 0 0 1-.218-.907.654.654 0 0 1 .902-.22l1.348.827 2.515-3.392Zm-4.95 10.055a1.005 1.005 0 1 0 0 2.011h9.99a1.005 1.005 0 0 0 0-2.011h-9.99Z"}))},_=Object.assign;var y=function(e){return Z().createElement(g.Z,_({width:"24",height:"24",viewBox:"0 0 24 24"},e),Z().createElement("path",{fillRule:"evenodd",d:"M2 4a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4Zm7 4a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm-3.5 6a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1h-13ZM5 17.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5ZM14.5 6a.5.5 0 0 0-.5.5v3.761a.5.5 0 0 0 .686.465l1.443-.577a1 1 0 0 1 .742 0l1.443.577A.5.5 0 0 0 19 10.26V6.5a.5.5 0 0 0-.5-.5h-4Z",clipRule:"evenodd"}))},S=Object.assign;var I=function(e){return Z().createElement(g.Z,S({width:"24",height:"24",viewBox:"0 0 24 24"},e),Z().createElement("path",{fillRule:"evenodd",d:"M4 4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4Zm10.023 4.462a.75.75 0 1 0-1.046 1.076l1.773 1.723v.392H13a.75.75 0 0 0 0 1.5h1.75v1.68a.75.75 0 0 0 1.5 0v-1.68H18a.75.75 0 0 0 0-1.5h-1.75v-.392l1.773-1.723a.75.75 0 1 0-1.046-1.076L15.5 9.898l-1.477-1.436ZM6 8.25a.75.75 0 0 0 0 1.5h4a.75.75 0 0 0 0-1.5H6Zm0 5.25A.75.75 0 0 0 6 15h4a.75.75 0 0 0 0-1.5H6Z",clipRule:"evenodd"}))},b=Object.assign;var w=function(e){return Z().createElement(g.Z,b({width:"24",height:"24",viewBox:"0 0 24 24"},e),Z().createElement("path",{fillRule:"evenodd",d:"M16.27 8.611c0 .346-.03.684-.09 1.012a6.264 6.264 0 0 0-4.075 10.612h-8.66c-.434 0-.869-.18-1.153-.527a1.275 1.275 0 0 1-.152-1.393c.518-1.05 1.7-2.26 3.223-3.204a11.542 11.542 0 0 1 3.084-1.341A5.613 5.613 0 0 1 10.66 3a5.611 5.611 0 0 1 5.611 5.611Zm6.015 6.692c.315 0 .573-.256.542-.569a5.697 5.697 0 0 0-5.1-5.1c-.313-.031-.57.227-.57.541v4.558c0 .315.256.57.57.57h4.558Zm-.556.57a5.128 5.128 0 1 1-5.128-5.127v4.627a.5.5 0 0 0 .5.5h4.628Z",clipRule:"evenodd"}))},R=Object.assign;var N=function(e){return Z().createElement(g.Z,R({width:"24",height:"24",viewBox:"0 0 24 24"},e),Z().createElement("path",{fillRule:"evenodd",d:"M15.408 8.665c0 .887-.203 1.726-.566 2.473-1.79.744-3.253 2.282-4.18 4.188l-.204.419.204.418c.948 1.95 2.456 3.514 4.302 4.238H2.459a1.5 1.5 0 0 1-1.164-.532 1.287 1.287 0 0 1-.154-1.407c.524-1.058 1.716-2.282 3.254-3.234a11.657 11.657 0 0 1 3.114-1.354A5.667 5.667 0 0 1 9.743 3a5.666 5.666 0 0 1 5.665 5.665Zm-3.886 7.08c1.21-2.488 3.328-4.136 5.739-4.136 2.41 0 4.529 1.648 5.739 4.136-1.21 2.487-3.328 4.136-5.74 4.136-2.41 0-4.528-1.649-5.738-4.136Zm7.173-.31a1.435 1.435 0 1 1-2.869 0 1.435 1.435 0 0 1 2.87 0Z",clipRule:"evenodd"}))},O=Object.assign;var D=function(e){return Z().createElement(g.Z,O({width:"36",height:"36",fill:"none",viewBox:"0 0 36 36"},e),Z().createElement("path",{fill:"#06F",d:"M13.5 3A1.5 1.5 0 0 1 15 1.5h6a1.5 1.5 0 0 1 0 3h-6A1.5 1.5 0 0 1 13.5 3Z"}),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M10.5 3h-3a3 3 0 0 0-3 3v24a3 3 0 0 0 3 3h21a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3h-3a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3Zm2.25 11.25a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm0 9a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm3-10.125a1.125 1.125 0 0 0 0 2.25h10.124a1.125 1.125 0 1 0 0-2.25H15.75ZM14.625 23.25c0-.621.504-1.125 1.125-1.125h10.125a1.125 1.125 0 0 1 0 2.25H15.75a1.125 1.125 0 0 1-1.125-1.125Z",clipRule:"evenodd"}))},B=Object.assign;var P=function(e){return Z().createElement(g.Z,B({width:"36",height:"36",fill:"none",viewBox:"0 0 36 36"},e),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M7 7.828C9.003 6.34 11.822 4.5 15 4.5c1.934 0 3.189.729 4.404 1.435 1.14.662 2.246 1.304 3.846 1.304 2.634 0 4.405-.58 6.535-1.278.346-.113.7-.23 1.07-.347a.496.496 0 0 1 .645.474v16.62a.097.097 0 0 1-.043.082c-.44.293-4.2 2.71-8.207 2.71-2.32 0-3.669-.956-4.9-1.827-1.032-.731-1.982-1.404-3.35-1.404-1.608 0-3.43.696-5.123 1.342-1.034.395-2.02.771-2.877.958V31.5a1 1 0 1 1-2 0V6.24a1 1 0 0 1 2 0v1.588Z",clipRule:"evenodd"}))},k=Object.assign;var x=function(e){return Z().createElement(g.Z,k({width:"36",height:"36",fill:"none",viewBox:"0 0 36 36"},e),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M15 31.5c8.284 0 15-1.679 15-3.75 0-1.909-5.706-3.485-13.086-3.72.602-.02 1.214-.03 1.835-.03 8.699 0 15.75 2.015 15.75 4.5S27.448 33 18.75 33c-6.275 0-11.693-1.049-14.225-2.566 2.704.66 6.4 1.066 10.476 1.066Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M25.388 4.324a2 2 0 0 0-2.833.004L3.476 23.52a2 2 0 0 0-.565 1.152l-.603 4.645a.5.5 0 0 0 .554.561l4.695-.547a2 2 0 0 0 1.183-.573L27.86 9.623a2 2 0 0 0-.001-2.827l-2.471-2.472Zm-7.025-.209a1 1 0 0 0-1.415 0l-4.95 4.95a1 1 0 0 0 0 1.414l.178.177a1 1 0 0 0 1.414 0l4.95-4.95a1 1 0 0 0 0-1.414l-.177-.177Z",clipRule:"evenodd"}))},L=Object.assign;var U=function(e){return Z().createElement(g.Z,L({width:"36",height:"36",fill:"none",viewBox:"0 0 36 36"},e),Z().createElement("path",{fill:"#06F",d:"M18 1.5c-7.27 0-13.33 5.17-14.707 12.035A3 3 0 0 0 .75 16.5v6a3 3 0 0 0 3 3h1.5a3 3 0 0 0 3-3v-6a3.001 3.001 0 0 0-1.922-2.8C7.59 8.423 12.337 4.5 18 4.5s10.41 3.923 11.672 9.2a3.001 3.001 0 0 0-1.922 2.8v6c0 .841.346 1.602.904 2.147A10.497 10.497 0 0 1 19.5 30a1.5 1.5 0 0 0 0 3c5.3 0 9.888-3.055 12.097-7.5h.653a3 3 0 0 0 3-3v-6a3 3 0 0 0-2.543-2.965C31.33 6.67 25.269 1.5 18 1.5Z"}))},F=Object.assign;var M=function(e){return Z().createElement(g.Z,F({width:"36",height:"36",fill:"none",viewBox:"0 0 36 36"},e),Z().createElement("path",{fill:"#06F",d:"M30 20.24c0 6.218-5.373 11.26-12 11.26S6 26.458 6 20.24c0-2.052.693-3.975 1.714-5.631 1.199-1.944 2.572-2.703 4.286-4.722 1.714-2.018 2.25-4.583 2.25-5.387 0-.804 3.393.255 5.464 4.41 2.072 4.157 1.072 6.84 2.786 6.84s1.5-5.488 3.214-4.137C28.334 13.68 30 16.777 30 20.24Z"}))},G=Object.assign;var z=function(e){return Z().createElement(g.Z,G({width:"36",height:"36",fill:"none",viewBox:"0 0 36 36"},e),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"m32.543 31.104-13.772-7.138V10.783c0-.097.055-.186.142-.229l11.36-5.652a.292.292 0 0 1 .422.237l1.098 12.821-1.53.694-.012-.13-9.937 4.546 10.8 5.675-.694-8.225 1.532-.695.946 11.043a.243.243 0 0 1-.355.236Zm-29.087 0 13.772-7.138V10.783a.256.256 0 0 0-.142-.229L5.726 4.903a.292.292 0 0 0-.421.236L4.203 18.006l1.345.61.008-.091 9.937 4.546-10.8 5.674.697-8.263-1.347-.61-.941 10.996a.243.243 0 0 0 .354.236Z",clipRule:"evenodd"}))},H=Object.assign;var q=function(e){return Z().createElement(g.Z,H({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},e),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M.552 6.167h2.945l2.853 6.575 2.865-6.575h5.352v11.666h-2.619V6.593l-5.163 11.24h-.858L.552 6.167Zm15.457 0h2.842c1.376 0 2.492.292 3.237.982.733.678 1.079 1.598 1.079 2.696 0 1.242-.366 2.267-1.16 2.995-.791.726-1.921 1.046-3.3 1.046h-.064v3.947h-2.634V6.167Zm2.634 2.422v2.86h.107c.798 0 1.21-.181 1.405-.399.25-.28.378-.615.378-1.03 0-.47-.131-.807-.36-1.057-.19-.207-.567-.374-1.279-.374h-.251Z",clipRule:"evenodd"}))},V=Object.assign;var X=function(e){return Z().createElement(g.Z,V({width:"36",height:"36",fill:"none",viewBox:"0 0 36 36"},e),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M22.429 32.336c-1.4.431-2.887.664-4.429.664-8.284 0-15-6.716-15-15C3 9.716 9.716 3 18 3c8.284 0 15 6.716 15 15 0 1.8-.317 3.524-.898 5.123A8.029 8.029 0 0 0 29 22.5c-3.675 0-6.699 2.482-8.346 5.84l-.325.66.325.66c.48.98 1.078 1.885 1.775 2.676ZM11.77 19.907s-.098.128-.044.29c.053.161.24.154.24.154l4.08-.1-1.564 7.714s-.038.138.075.186c.112.047.208-.082.208-.082l8.497-11.009s.098-.127.045-.289c-.054-.162-.241-.154-.241-.154l-4.08.1 1.565-7.715s.037-.137-.075-.185c-.113-.048-.209.082-.209.082L11.77 19.907Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M22 29c1.476-3.007 4.06-5 7-5 2.94 0 5.524 1.993 7 5-1.476 3.007-4.06 5-7 5-2.94 0-5.524-1.993-7-5Zm8.75-.375c0 .958-.784 1.734-1.75 1.734-.967 0-1.75-.776-1.75-1.734s.783-1.734 1.75-1.734c.966 0 1.75.776 1.75 1.734Z",clipRule:"evenodd"}))},W=Object.assign;var K=function(e){return Z().createElement(g.Z,W({width:"36",height:"36",fill:"none",viewBox:"0 0 36 36"},e),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M5 6a2 2 0 0 0-2 2v5.756a4.502 4.502 0 0 1 0 8.488V28a2 2 0 0 0 2 2h26a2 2 0 0 0 2-2v-5.756a4.502 4.502 0 0 1 0-8.488V8a2 2 0 0 0-2-2H5Zm10.523 6.962a.75.75 0 1 0-1.046 1.076l2.773 2.695v1.121h-3a.75.75 0 0 0 0 1.5h3V22.5a.75.75 0 0 0 1.5 0v-3.146h3a.75.75 0 0 0 0-1.5h-3v-1.12l2.773-2.696a.75.75 0 1 0-1.046-1.076L18 15.371l-2.477-2.409Z",clipRule:"evenodd"}))},j=Object.assign;var Y=function(e){return Z().createElement(g.Z,j({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},e),Z().createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 7.42a1 1 0 0 1 .594-.914l2.393-1.064a4 4 0 0 1 3.683.226l.463.277a2 2 0 0 0 1.923.074l5.828-2.913a1 1 0 0 1 .84-.025l.119.05a1 1 0 0 1 .514 1.337l-.062.135a1 1 0 0 1-.461.477l-5.759 2.88a4 4 0 0 1-3.846-.149l-.392-.235a2 2 0 0 0-1.841-.112L4.703 8.927A.5.5 0 0 1 4 8.47V7.42Zm6.138 2.858c0-.307.335-.497.599-.339.927.557 2.074.6 3.041.117l.027-.013a.402.402 0 0 1 .583.36V18a1 1 0 0 1-1 1h-2.25a1 1 0 0 1-1-1v-7.722Zm-2.591-.801a.5.5 0 0 1 .703.457V18a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-6.297a1 1 0 0 1 .594-.914l2.953-1.312Zm12.255-2.34a.5.5 0 0 1 .724.447V12h-3.598a1.64 1.64 0 0 0-.652.136V9.518a1 1 0 0 1 .553-.894l2.973-1.487ZM16.928 13h4.135c.117 0 .231.032.332.093a.686.686 0 0 1 .244.255l1.296 2.334a.523.523 0 0 1-.081.614l-3.528 3.564a.465.465 0 0 1-.33.14.464.464 0 0 1-.331-.14l-3.52-3.565a.522.522 0 0 1-.082-.612l1.288-2.334a.686.686 0 0 1 .244-.255.642.642 0 0 1 .333-.094Z",clipRule:"evenodd"}))},Q=Object.assign;var J=function(e){return Z().createElement(g.Z,Q({width:"36",height:"36",fill:"none",viewBox:"0 0 36 36"},e),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M3 7.5a3 3 0 0 1 3-3h9.133a1.5 1.5 0 0 1 1.175.568l2.67 3.364A1.5 1.5 0 0 0 20.153 9H30a3 3 0 0 1 3 3v16.5a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-21Zm22.5 10.875c.621 0 1.125.504 1.125 1.125v2.063h2.063a1.125 1.125 0 0 1 0 2.25h-2.063v2.062a1.125 1.125 0 0 1-2.25 0v-2.063h-2.063a1.125 1.125 0 0 1 0-2.25h2.063V19.5c0-.621.504-1.125 1.125-1.125Z",clipRule:"evenodd"}))},$=Object.assign;var ee=function(e){return Z().createElement(g.Z,$({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},e),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M12.98 2C18.79 2 23 6.746 23 12.015c0 1.682-.49 3.414-1.35 4.997-.16.26-.18.59-.07.902l.67 2.243c.15.541-.31.94-.82.78l-2.02-.6c-.55-.18-.98.05-1.49.361C16.46 21.558 14.64 22 13 22c-1.622 0-3.253-.41-4.713-1.178V19.45a1.978 1.978 0 0 0 1.555-1.164 1.885 1.885 0 0 0-.509-2.196l-2.998-2.598a2.052 2.052 0 0 0-2.67 0l-.492.427A10.699 10.699 0 0 1 3 11.985C3 6.656 7.3 2 12.98 2Zm4.038 11.32a1.103 1.103 0 1 0 0-2.2 1.103 1.103 0 0 0 0 2.2Zm-4.25 0a1.103 1.103 0 1 0 0-2.2 1.103 1.103 0 0 0 0 2.2Zm-3.147-1.103a1.103 1.103 0 0 1-2.205 0 1.103 1.103 0 0 1 2.205 0Z",clipRule:"evenodd"}),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M5.55 14.2a.856.856 0 0 0-1.1 0l-3.198 2.771c-.526.455-.174 1.264.55 1.264h1.025v3.033c0 .404.358.732.8.732h2.745c.443 0 .8-.328.8-.732v-3.033h1.026c.724 0 1.076-.809.55-1.264l-3.197-2.77Z",clipRule:"evenodd"}))},te=Object.assign;var ne,oe=function(e){return Z().createElement(g.Z,te({width:"36",height:"36",fill:"none",viewBox:"0 0 36 36"},e),Z().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M18 33c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C9.716 3 3 9.716 3 18c0 8.284 6.716 15 15 15Zm6.482-14.41a5 5 0 0 0-7.071-7.072.834.834 0 0 0 1.178 1.179 3.333 3.333 0 1 1 4.714 4.714.833.833 0 0 0 1.179 1.178ZM11.518 17.41a5 5 0 0 0 7.071 7.071.833.833 0 0 0-1.178-1.178 3.333 3.333 0 0 1-4.714-4.714.833.833 0 0 0-1.179-1.179Zm3.982-.244a.833.833 0 0 0 0 1.667h1.667V20.5a.833.833 0 1 0 1.666 0v-1.666H20.5a.833.833 0 0 0 0-1.667h-1.667V15.5a.833.833 0 0 0-1.666 0v1.667H15.5Z",clipRule:"evenodd"}))},re={pass:"pass",applying:"applying",canDraw:"can_draw",canApply:"can_apply",notActive:"not_active",banned:"banned"},ie={vip_coupon:{id:"vip_coupon",name:"盐选会员代金券",icon:q,url:null},vip:{id:"vip",name:"盐选会员卡",icon:q,url:null},enjoy_live_free:{id:"enjoy_live_free",name:"畅享免费 Live",icon:X,url:null},read:{id:"read",name:"读书卡",icon:z,url:null},zhihu_vouchers:{id:"zhihu_vouchers",name:"知乎自营代金券",icon:K,url:null}},ae=(0,r.Z)({"0513324000":{id:"0513324000",name:"内容分析",icon:a.Z,url:"/creator/analytics"},5713324e3:{id:"5713324000",name:"近期热点",icon:M,url:"/creator/hot-question/hot/0/hour"},6713324e3:{id:"6713324000",name:"申请盐选作者",icon:x,url:"/creator-salt/welfare"},9613324e3:{id:"9613324000",name:"主页置顶",icon:c.Z,url:null},9513324e3:{id:"9513324000",name:"知乎直播",icon:T,url:"/creator/rights-streaming"},2613324e3:{id:"2613324000",name:"知+自选",icon:oe,url:"/creator/zixuan"},1613324e3:{id:"1613324000",name:"好物推荐",icon:s.Z,url:"/creator/mcn"},7413324e3:{id:"7413324000",name:"内容自荐",icon:u.ZP,url:"/creator/recommend"},3713324e3:{id:"3713324000",name:"内容收益",icon:I,url:"/creator/video-support"},3613324e3:{id:"3613324000",name:"招募任务",icon:P,url:"/creator/recruit-task"},"0713324000":{id:"0713324000",name:"创作贴纸",icon:y,url:null},1513324e3:{id:"1513324000",name:"赞赏功能",icon:l.Z,url:"/creator/reward"},1713324e3:{id:"1713324000",name:"关注者画像",icon:w,url:"/creator/followers"},8713324e3:{id:"8713324000",name:"编辑器扩容",icon:J,url:null},3513324e3:{id:"3513324000",name:"品牌特邀",icon:d.ZP,url:"/creator/commercial-task"},9413324e3:{id:"9413324000",name:"自定义推广",icon:p.Z,url:"/creator/custom-promotion"},7513324e3:{id:"7513324000",name:"圆桌主持人",icon:h.Z,url:"/creator/roundtable-host"},2513324e3:{id:"2513324000",name:"知乎 Live",icon:f.Z,url:"/creator/live"},2713324e3:{id:"2713324000",name:"关注者在看",icon:N,url:"/creator/followers"},7713324e3:{id:"7713324000",name:"专属小管家",icon:U,url:null},6613324e3:{id:"6613324000",name:"复用任务",icon:D,url:"/creator/reuse-task"},4713324e3:{id:"4713324000",name:"内容分析高级数据",icon:Y,url:"/creator/analytics/work/all?detailType=profile"},4613324e3:{id:"4613324000",name:"视频推广",url:"/creator/video-distribution",icon:a.Z},8613324e3:{id:"8613324000",name:"图文流量包",url:"/creator/recommend/article-exposure-promotion",icon:u.ZP},5613324e3:{id:"5613324000",name:"流量加油包",url:"/creator/recommend/exposure-promotion",icon:u.ZP},7613324e3:{id:"7613324000",name:"文章发布回答",url:"/creator/manage/creation/article",icon:null},6513324e3:{id:"6513324000",name:"版权服务",url:"/creator/explore/copyright",icon:m.Z},"0613324000":{id:"0613324000",name:"互选任务",url:"https://cheese.zhihu.com/creator/elect/task",icon:A},4513324e3:{id:"4513324000",name:"作者经纪",url:"/creator/manager",icon:null},8413324e3:{id:"8413324000",name:"问题推荐",url:null,icon:null},9713324e3:{id:"9713324000",name:"评论置顶",url:null,icon:ee}},ie),ce={analytics:ae["0513324000"],hotSpot:ae[5713324e3],advancedCreation:ae[6713324e3],dynamicTopping:ae[9613324e3],drama:ae[9513324e3],zixuan:ae[2613324e3],mcn:ae[1613324e3],recommend:ae[7413324e3],contentRevenue:ae[3713324e3],recruitTask:ae[3613324e3],pasterPaper:ae["0713324000"],reward:ae[1513324e3],followProfile:ae[1713324e3],commercialTask:ae[3513324e3],customPromotion:ae[9413324e3],roundtableHost:ae[7513324e3],live:ae[2513324e3],followInteraction:ae[2713324e3],yourHelp:ae[7713324e3],reuseTask:ae[6613324e3],editorExpansion:ae[8713324e3],analyticsAdvancedData:ae[4713324e3],videoDistribution:ae[4613324e3],articleExposurePromotion:ae[8613324e3],exposurePromotion:ae[5613324e3],articleToAnswer:ae[7613324e3],copyright:ae[6513324e3],contentTask:ae["0613324000"],manager:ae[4513324e3],question:ae[8413324e3],commentTopping:ae[9713324e3]},se=(ne={},(0,o.Z)(ne,re.pass,[ce.pasterPaper.id]),(0,o.Z)(ne,re.canDraw,(0,i.Z)(Object.keys(ie))),ce.mcn.id,ce.contentRevenue.id,ce.articleToAnswer.id,ce.zixuan.id,ce.live.id,ce.recruitTask.id,ce.reuseTask.id,ce.commercialTask.id,ce.mcn.id,ce.exposurePromotion.id,ce.articleExposurePromotion.id,ce.videoDistribution.id,ce.reuseTask.id,ce.recruitTask.id,ce.contentTask.id,ce.manager.id,ce.articleToAnswer.id,[ce.advancedCreation.id,ce.commercialTask.id,ce.contentTask.id,ce.reuseTask.id,ce.recruitTask.id]),ue=[ce.mcn.id],le=function(e){return!!e&&e.status===re.pass},de="https://hm.baidu.com/hm.js?bff3d83079cef1ed8fc5e3f4579ec3b3",pe=function(e){return{script:[{src:e,async:"async"}]}}},73950:function(e,t,n){"use strict";n.d(t,{LY:function(){return g},jM:function(){return v},zc:function(){return Z}});var o=n(4428),r=n(88483),i=n(16600),a=n(78194),c=n(8518),s=n(68562),u=n(47859),l=n(77568),d=n.n(l),p=n(87363),h=n(65160),f=n(87050),m=function(e){var t=e.type,n=e.id,r=e.extra,i=e.children,l=(0,a.Z)((0,p.useState)(r),2),d=l[0],m=l[1],v=(0,u.Z)((0,o.Z)((function(){var e;return(0,c.Jh)(this,(function(o){switch(o.label){case 0:return t&&n?[4,(0,f.a)(t,n)]:[2];case 1:return(e=o.sent())&&m(e),[2]}}))})));return(0,p.useEffect)((function(){r||v()}),[r,v,n,t]),(0,s.tZ)(h.Z.Provider,{value:d,children:i})},v=function(e){var t=e.dataPath;return function(e){return d()((function(n){var o,i;return(0,s.tZ)(m,{type:null===(o=n[t])||void 0===o?void 0:o.type,id:null===(i=n[t])||void 0===i?void 0:i.id,children:(0,s.tZ)(e,(0,r.Z)({},n))})}),e)}},Z=function(){return(0,p.useContext)(h.Z)},g=function(e){return d()((function(t){var n=Z();return(0,s.tZ)(e,(0,i.Z)((0,r.Z)({},t),{promotionExtra:n}))}),e)};t.ZP=m},52773:function(e,t,n){"use strict";n.d(t,{getCreateStore:function(){return m}});var o=n(61565),r=n(52626),i=n(62412),a=n(23177),c=n(15390),s=n(4795),u=n.n(s),l=function(){return{}},d=function(){return function(e){return function(t){if(t.FAILSAFE){t=u()(t,{NOTIFICATION:!1,API:{fetchOptions:{failsafe:!0,timeout:t.FAILSAFE.timeout||1e3}}});var n=e(t);return n.catch?n.catch(l):n}return e(t)}}},p=n(17907),h=n(36373);function f(){return function(e){return function(t){if(!t.payload)return e(t);var n=t.payload,o=n.rootComment,r=n.topComments;if(o){var i=(0,p.Fv)(o,c.l.COMMENT_V2),a=i.entities,s=i.result;t.rootComment=s,t.entities=(0,h.Z)(t.entities,a)}if(r){var u=r.data,l=r.paging,d=(0,p.Fv)(u,c.l.COMMENT_ARRAY_V2),f=d.entities,m=d.result;t.topComments={result:m,paging:l},t.entities=(0,h.Z)(t.entities,f)}return e(t)}}}function m(e){return function(t,n){var s=n.http,u=n.root,l=[i.Z.withExtraArgument({fnRefs:{}}),d,(0,a.Z)(s,u),c.Z,f];return(0,r.createStore)(e,t,r.applyMiddleware.apply(void 0,(0,o.Z)(l)))}}},82026:function(e,t,n){e.exports=n(52773)},59706:function(e,t,n){"use strict";n.d(t,{a:function(){return r},n:function(){return i}});var o={1:49,2:50,r:82,t:84,e:69};function r(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Array.isArray(n)&&"function"==typeof(null===window||void 0===window||null===(e=window.aria)||void 0===e||null===(t=e.initcallback)||void 0===t?void 0:t.disableShortKeys)){var r=n.map((function(e){return o[e]}));window.aria.initcallback.disableShortKeys(r)}}function i(){var e,t;"function"==typeof(null===window||void 0===window||null===(e=window.aria)||void 0===e||null===(t=e.initcallback)||void 0===t?void 0:t.disableShortKeys)&&window.aria.initcallback.disableShortKeys([])}},51234:function(e,t,n){"use strict";n.d(t,{A$:function(){return T},Aj:function(){return Z},Hf:function(){return v},WY:function(){return m},jS:function(){return g}});var o=n(65390),r=n(88483),i=n(16600),a=n(37015),c=n(18056),s=n(87363),u=n(61533),l=n(17222),d=n(48457),p=n(57948),h=n(55270),f=function(){return null};function m(e){return e?fetch(e,{mode:"no-cors"}).catch(f):Promise.reject(new Error("request but no url"))}function v(e,t){var n=t.ZhihuHybrid,c={userId:null==e?void 0:e.uid,memberHashId:null==e?void 0:e.id,userType:{people:"People",organization:"Org"}[null==e?void 0:e.userType],orgStatus:{normal:"Normal",forbidden:"Forbidden",reject:"Reject",audit:"Audit",register:"Register"}[null==e?void 0:e.orgStatus]},h=(0,i.Z)((0,r.Z)({},c),{sdkVersion:"4.6.0",normalizeElement:function(e){return(0,o.Z)(e,s.Component)?(0,u.findDOMNode)(e):e},shouldAutoTrackPageShow:!1});n||(h.pageProfile="zhihu-web");var f,m=(0,i.Z)((0,r.Z)({},c),{enableDyeing:!0}),v=new Promise((function(e){f=e}));return function(e){if(t.ZhihuHybrid){var n=/\b(from=home_tab|in_app_home_tab=|position=tab)\b/.test(location.search);if(t.Android&&n)var o=(0,p.Z)("base/viewDidAppear").listen((function(){o(),e()}));else p.Z.onceViewAppeared().finally(e)}else e()}((function(){l.Z.init(h).then((function(){var e=new window.zap.Client(m,{experimentalProto3:!0});(0,d.U3)(e),"function"==typeof f&&(null==f||f())})).catch((function(e){throw a.ZP.increment("za_helper.init_failed.count"),e}))})),v}function Z(e){l.Z.config({base:{ab:{experiment:c.Z.getAbExperiments(e.config,e.triggers)}}})}var g={onEnter:function(e){if((0,h.isBrowser)()){var t=e.routes[e.routes.length-1];t.zaNotTrackPageShow||l.Z.trackPageShow({id:t.zaPageShowId})}},onChange:function(e,t){var n=t.routes[t.routes.length-1];n.zaNotTrackPageShow||l.Z.trackPageShow({id:n.zaPageShowId})}},E=["pin","comment","live","search_course","search_special","album"],T=function(e,t){return t=String(t),"people"===e?{member_hash_id:t}:E.includes(e)?{id:t}:{token:t}}},54048:function(e,t,n){"use strict";n.d(t,{Kz:function(){return l},M1:function(){return c},Qz:function(){return u},UJ:function(){return a},sO:function(){return s}});var o=n(97645),r=n.n(o),i="enabled_follower_n_days",a=function(){r().set(i,!0)},c=function(){return r().get(i)},s="follower_n_days",u=function(e,t){var n;if(c())return e;var o=null===(n=e.find((function(e){return e.permission===s})))||void 0===n?void 0:n.checked;return!c()&&o?(a(),e):"answer"===t||e.find((function(e){return"follower"===e.permission}))?e.filter((function(e){return e.permission!==s})):e.map((function(e){return e.permission===s?{permission:"follower",text:"关注我的人能评论",checked:!1,disable:!1,disable_alert:""}:e}))},l="censor"},53745:function(e,t,n){"use strict";function o(e){return Promise.all([n.e(6649),n.e(4408)]).then(n.t.bind(n,72825,23)).then((function(t){return t.createMqttClient(e)}))}n.d(t,{Z:function(){return o}})},14468:function(e,t,n){"use strict";n.d(t,{AU:function(){return a},JP:function(){return s},ze:function(){return c}});var o=n(12856),r=n(55053);function i(e){var t,n,i;return(null==e||null===(t=e.bizExt)||void 0===t?void 0:t.creationRelationship)?e.bizExt.creationRelationship:"string"==typeof(null==e||null===(n=e.creationRelationship)||void 0===n?void 0:n.renderJson)?(0,o.camelizeKeys)(null!==(i=(0,r.dj)(e.creationRelationship.renderJson))&&void 0!==i?i:{}):e.creationRelationship}var a=i,c=i,s=i},27124:function(e,t,n){"use strict";n.d(t,{Xc:function(){return a},hu:function(){return c}});var o=n(95114),r=n.n(o),i=(n(48340),{"video-count":"最多只能上传 10 个视频","video-count-one":"视频暂时只支持上传一个","video-size":"请上传大小不超过 2G 的视频","video-duration":"请上传不超过 60 分钟的视频","video-type":"暂不支持该文件格式","video-uploading":"视频上传完成后即可发布","video-uploading-draft":"视频上传完成后即可保存草稿","video-upload-cancelled":"匿名身份不能使用视频功能","video-uploading-entity-small":"请上传大小超过 100KB 的视频","video-upload-error":"视频上传失败，请重新上传","doc-size":"文档最大 10MB，请重新上传","doc-type":"暂不支持该文件格式","image-uploading":"图片上传完成后即可发布","mage-uploading-draft":"图片上传完成后即可保存草稿","video-and-image":"图片、视频暂时无法同时上传","unsupported-browser":"暂不支持的浏览器, 请更换浏览器后重试"});function a(e,t,n,o){if("image-upload-error"!==e)if(["doc-size","doc-type"].includes(e)){var a=(null==t?void 0:t.message)||i[e];n(a,"red",o,{shouldTrackShow:!0,zaText:"文档导入-".concat(a),zaBlock:"EditorInsertDoc",key:Date.now()})}else n(i[e],"red",o);else n(r()(t,"payload.err.payload.message")||"图片上传失败，请重新上传","red",o)}var c=function(e){return"string"==typeof e&&["Failed to fetch","Network request failed","NetworkError when attempting to fetch resource","网络连接已中断","请求超时"].some((function(t){return e.includes(t)}))}},59083:function(e,t,n){"use strict";n.d(t,{Z:function(){return i},z:function(){return r}});var o=n(78194);function r(e){return new URLSearchParams(Object.entries(e).filter((function(e){return null!=(0,o.Z)(e,2)[1]})))}function i(e){return new URLSearchParams(Object.entries(e).map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];return[n,null!=r?r:""]})))}},30135:function(e,t,n){"use strict";var o,r,i=n(4428),a=n(8518),c=n(40491),s=n.n(c),u="growth-chain",l={},d=new Promise((function(e){return o=e})),p=function(){return new Promise(requestAnimationFrame)},h=function(e){try{return e()}catch(e){}},f="https://www.zhihu.com",m=function(e){return h((function(){return localStorage.setItem(u,JSON.stringify(e))}))},v=s()((0,i.Z)((function(){var e,t,n,o,r,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,d];case 1:return(e=a.sent().userId)?(t=h((function(){return JSON.parse(localStorage.getItem(u))})),n=new Date,!t||t.userId!==e||n>new Date(t.expiresAt)?[4,fetch("".concat(f,"/api/v4/me/guides"),{credentials:"include"}).then((function(e){return e.json()}))]:[3,3]):[2,null];case 2:return o=a.sent(),(r=new Date(n)).setDate(n.getDate()+1),m(i={userId:e,data:o,expiresAt:r}),[2,i];case 3:return[2,t]}}))}))),Z=(r=(0,i.Z)((function(e){var t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(f,"/api/v4/me/operation_guides/").concat(e.operation_guide_id_str),{method:"DELETE",credentials:"include"})];case 1:return n.sent(),[4,v()];case 2:return(t=n.sent())&&(t.data.actions=t.data.actions.filter((function(t){return t!==e})),m(t)),[2]}}))})),function(e){return r.apply(this,arguments)}),g=function(){var e=(0,i.Z)((function(e){var t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return[4,v()];case 1:return t=n.sent(),[4,p()];case 2:return n.sent(),t?[2,t.data.actions.filter((function(t){return e.includes(t.guide_name)}))]:[2,[]]}}))}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)((function(e){var t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return[4,v()];case 1:return t=n.sent(),[4,p()];case 2:return n.sent(),t?[2,t.data.actions.filter((function(t){return t.show_page===e}))]:[2,[]]}}))}));return function(t){return e.apply(this,arguments)}}();t.Z={config:function(e){o(Object.assign(l,e))},markAsShown:Z,getActionsByNames:g,getActionsByPage:E}},14790:function(e,t,n){"use strict";function o(e,t){return!(!e||!t)&&(e.id===t.id&&void 0!==e.id||e.urlToken===t.urlToken&&void 0!==e.urlToken)}n.d(t,{Z:function(){return o}})},55053:function(e,t,n){"use strict";function o(e){try{return JSON.parse(e)}catch(e){return null}}n.d(t,{dj:function(){return o}})},28483:function(e,t,n){"use strict";n.d(t,{Qm:function(){return d},_x:function(){return l}});var o,r,i,a=n(76745),c=n.n(a),s=n(47698),u=(o=550,r=function(e){var t=new FormData;return t.append("items",JSON.stringify(e)),(0,s.dJ)("/lastread/touch",{method:"POST",body:t})},i=[],c()((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.push(t),setTimeout((function(){i.length&&(r(i),i.length=0)}),o)}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)}))),l="read",d="touch";t.ZP=u},22823:function(e,t,n){"use strict";n.d(t,{NY:function(){return i},l6:function(){return r}});var o=n(70175),r=function(e){var t=e.title,n=e.originTitle,r=e.source,i=e.sourceId,a=e.productTypeName,c=new URLSearchParams({title:t,originTitle:n,source:r,sourceId:i,productTypeName:a}).toString();return"".concat(o.Z.protocol,"//").concat(o.Z.wwwHost,"/selection/goods-editor?").concat(c)},i=function(e){var t=e.contentId,n=e.contentType,r=new URLSearchParams({contentId:t,contentType:n}).toString();return"".concat(o.Z.protocol,"//").concat(o.Z.wwwHost,"/selection/profit-selector?").concat(r)}},62485:function(e,t,n){"use strict";n.d(t,{t:function(){return u},y:function(){return l}});var o=n(88483),r=n(78724),i=n(68562),a=n(36701),c=n(21301),s=n(55270),u=function(e,t){var n=(0,o.Z)({delay:2e3},t),r=n.delay,a=n.theme,u=n.className;return(0,s.isBrowser)()?c.Z.show((0,i.tZ)(c.Z,{className:u,delay:r,notification:{text:e,theme:a}})):null},l=function(e,t){var n=t||{},c=n.content,s=(0,r.Z)(n,["content"]),u=c&&(0,i.tZ)("div",{style:{textAlign:"center"},children:c});return a.Z.confirm(u,(0,o.Z)({title:e},s))}},43158:function(e,t,n){"use strict";n.d(t,{MN:function(){return c},Qu:function(){return s}});var o=n(78194),r=n(14910),i=n(55270),a=function(e){var t=e||{},n=t.type,o=t.id,a=t.urlToken,c=t.q;switch(n){case"question":return"/questions/".concat(o);case"answer":return"/answers/".concat(o);case"article":case"p":return"/articles/".concat(o);case"column":return"/columns/".concat(o);case"live":return"/lives/".concat(o);case"ebook":case"book":return"/pub/book/".concat(o);case"feed":return"/feed";case"topic":return"/topics/".concat(o);case"people":return"/people/".concat(a||o);case"search":return"/search?".concat(r.stringify({q:c}));case"video":return"video_topic/".concat(o);case"zvideo":if((0,i.isBrowser)()){var s=new URL(location.href);if(!/^\d+$/.test(o)){var u="".concat(s.pathname.replace(/^\//,"")).concat(s.search);return"".concat(decodeURIComponent(u))}var l=s.searchParams.get("page");return l?"/zvideo/".concat(o,"?page=").concat(l):"/zvideo/".concat(o)}return"/zvideo/".concat(o);case"zvideo_answer":case"zvideo_article":var d=n.replace("zvideo_","");return"/".concat(d,"s/").concat(o);case"brief":return"/brief/".concat(o);default:return null}},c=function(e,t){var n=t?"?".concat(r.stringify(t)):"",o="string"==typeof e?e:a(e);if(o){var i=o.startsWith("/")?o.slice(1):o;return"zhihu://".concat(i).concat(n)}return"zhihu://".concat(n)},s=function(e){if(!e)return"/feed";try{var t=e.match(/(\/[\w]+)?(\/[\w-]+)?(\/[\w]+)?(\/[\w-]+)?/)||[],n=(0,o.Z)(t[3]&&t[4]?[t[3],t[4]]:[t[1],t[2]],2),r=n[0],i=n[1];return a({type:r.slice(1),id:i.slice(1)})||"/feed"}catch(e){return"/feed"}}},67694:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var o=n(663);function r(e){var t,n=e.isOrg,r=e.badgeV2,i=e.badge;if(!n)return!1;var a=(0,o.TE)(r||i);return Boolean(null===(t=a.identity)||void 0===t?void 0:t.length)}},42178:function(e,t,n){"use strict";function o(e){for(var t,n=e.replace(/(<noscript>).*?(<\/noscript>)/g,""),o=[],r=/<\s*img.*?>/g,i=/(zh-lightbox-thumb)|(Slideshow-swiperImage)/,a=/(data-original=").*?"/,c=null;c=null===(t=r.exec(n))||void 0===t?void 0:t[0];)if(i.test(c)){var s=a.exec(c);s&&o.push(s[0].split("data-original=")[1].replace(/"|\\/g,""))}return o}n.d(t,{Z:function(){return o}})},60594:function(e,t,n){"use strict";n.d(t,{FH:function(){return d},N4:function(){return f},O1:function(){return h},co:function(){return p}});var o,r=n(71103),i=n(88483),a=n(16600),c=n(12856),s=n(25011),u=n(91355),l=(o={},(0,r.Z)(o,u.fH,"username"),(0,r.Z)(o,100003,"username"),(0,r.Z)(o,100006,"username"),(0,r.Z)(o,u.Dm,"username"),(0,r.Z)(o,100029,"username"),(0,r.Z)(o,100030,"username"),(0,r.Z)(o,120017,"username"),(0,r.Z)(o,12e4,"captcha"),(0,r.Z)(o,120001,"captcha"),(0,r.Z)(o,120005,"captcha"),(0,r.Z)(o,100002,"password"),(0,r.Z)(o,100004,"password"),(0,r.Z)(o,100005,"password"),(0,r.Z)(o,u.o7,"digits"),(0,r.Z)(o,u.M,"digits"),(0,r.Z)(o,100085,"digits"),(0,r.Z)(o,403,"extra"),o);function d(e,t){return t.reduce((function(t,n){return(0,a.Z)((0,i.Z)({},t),(0,r.Z)({},n,["request","success","failure"].reduce((function(t,o){return(0,a.Z)((0,i.Z)({},t),(0,r.Z)({},o,"".concat(e,"/").concat((0,c.camelize)(n.toLowerCase()),"/").concat(o)))}),{})))}),{})}function p(e,t){return t.reduce((function(t,n){return(0,a.Z)((0,i.Z)({},t),(0,r.Z)({},n,"".concat(e,"/").concat((0,c.camelize)(n.toLowerCase()))))}),{})}function h(e){var t=e.code,n=e.message,o=l[t]||"unknown";return(0,r.Z)({},o,n||"系统繁忙，请稍后再试")}function f(e){(0,s.i4)(!0),(0,s.L0)(e)}},51433:function(e,t,n){"use strict";n.d(t,{LP:function(){return c},ZP:function(){return u},qz:function(){return s}});var o=n(97645),r=n.n(o),i="refresh_token",a="uhiuhvk_wrnhq";function c(){var e;return(e=r().get(i))&&(r().delete(i),r().set(a,e)),r().get(a)}function s(){r().delete(i),r().delete(a)}function u(e){r().set(a,JSON.stringify({token:e,timestamp:Date.now()}))}},42116:function(e,t,n){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";return e.length>t?e.slice(0,t)+n:e}function r(e,t){for(var n,o=0,r="",i=e.length,a=0;a<i&&((n=e[a]).charCodeAt(0)<128?o+=1:o+=2,r+=n,!(o>=t-1));a+=1);return r}n.d(t,{$G:function(){return o},NJ:function(){return a},Vq:function(){return c},Xs:function(){return s}});var i=null;function a(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"undefined"==typeof document?t=r(n=e.replace(/<.+?>/g,""),o):((i=i||document.createElement("div")).textContent=e,t=r(n=i.textContent.replace(/<.+?>/g,""),o));var s=!1;return t!==n&&(s=!0,t=t.slice(0,t.length-a.length),t+=a),c?{output:t,truncated:s}:t}function c(e){return/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g.test(e)}var s=function(e,t){var n=t?e.replace(/<.+?>/g,""):e;return Array.from(n).length}},51551:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});var o=n(78194),r=function(e,t){try{if(!e||"string"!=typeof e)return"";if(!t||"object"!=typeof t||!Object.keys(t))return e;var n=(0,o.Z)(e.split("#"),2),r=n[0],i=n[1],a=void 0===i?"":i,c=(0,o.Z)(r.split("?"),2),s=c[0],u=c[1],l=new URLSearchParams(u);Object.entries(t).forEach((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];null!=r&&l.set(n,r)}));var d=function(e,t){return t?e+t:""};return s+d("?",l.toString())+d("#",a)}catch(t){return console.error(t),e}}},37314:function(e,t,n){"use strict";n.d(t,{Hk:function(){return _},cp:function(){return S},es:function(){return N},yX:function(){return y}});var o=n(88483),r=n(78194),i=n(61565),a=n(68562),c=n(97645),s=n.n(c),u=n(40937),l=n(91355),d=n(80869),p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{color:"#3e7ac2"};return(0,a.tZ)("a",{target:"_blank",rel:"noopener noreferrer",href:e,style:n,children:t})},h=p("/term/community","知乎社区管理规定"),f=p("/term/community","知乎社区管理规定",{color:"#fff","text-decoration":"underline"}),m=p("/question/19551824","知乎用户信息管理规范"),v=p("/settings/profile#rename-section","修改"),Z=p("/people/edit","修改"),g=p("/account/unblock","验证"),E={ads:"发布垃圾信息",unfriendly:"发布不友善内容",illegal:"发布违反法律法规的内容",politics:"发布不宜公开讨论的政治内容",animus_edit:"恶意编辑",other:"其他原因"},T={hang:(0,a.BX)("span",{children:["由于严重违反 ",h,"，该帐号已被停用。"]}),lock:function(e){var t=e.unBlockInfo,n=t.isAppealed,o=t.spamLevel;return n?(0,a.tZ)("span",{children:"你的帐号由于存在异常行为暂时被知乎反作弊系统限制使用，我们已收到了您的申诉信息，24 小时内会以私信的方式告知你申诉结果，请耐心等待。"}):6===o?(0,a.BX)("span",{children:["您的帐号由于违反 ",f," ，已被永久封禁。"]}):4===o?(0,a.BX)("span",{children:["您的帐号异常 ，部分功能暂不可用。如需恢复，请完成"," ",p("/account/unblock","帐号验证")]}):(0,a.BX)("span",{children:["你的帐号存在异常行为，部分功能已被反作弊系统限制使用，如需恢复，请完成",g]})},ban:function(e){var t=e.expiredAt,n=e.reason;return t>999?(0,a.BX)("span",{children:["由于严重违反 ",h," ，该帐号已被永久禁言"]}):(0,a.BX)("span",{children:["您的帐号由于 ",(0,a.tZ)("a",{target:"_blank",href:"/term/community",style:{color:"#3e7ac2"},children:E[n]||"违反知乎社区规定"})," 暂时被限制使用，",t," 天后恢复正常。"]})},isForceRenamed:function(e){var t=e.isOrg;return(0,a.BX)("span",{children:["您的用户名不符合 ",m,"，请您 ",t?v:Z,"。"]})},notBindPhone:(0,a.BX)("span",{children:["您的帐号未激活，无法正常使用赞同、评论等功能。请 ",(0,a.tZ)(d.$7,{})," 。"]})},C={profile:{hang:(0,a.BX)("span",{children:["由于严重违反 ",h,"，该帐号已被停用"]}),lock:function(e){var t=e.unBlockInfo,n=t.isAppealed,o=t.spamLevel;return n&&3===o||!o?null:4===o?(0,a.BX)("span",{children:["您的帐号异常 ，部分功能暂不可用。如需恢复，请完成"," ",p("/account/unblock","帐号验证")]}):6===o?(0,a.BX)("span",{children:["您的帐号由于违反 ",h," ，已被永久封禁。"]}):(0,a.BX)("span",{children:["你的帐号存在异常行为，部分功能已被反作弊系统限制使用，如需恢复，请完成",g]})},ban:function(e){var t=e.isCurrentUser,n=e.expiredAt,o=e.reason;return n>999?(0,a.BX)("span",{children:["由于严重违反 ",h," ，该帐号已被永久禁言"]}):t?(0,a.BX)("span",{children:["您的帐号由于 ",(0,a.tZ)("a",{href:"/term/community",target:"_blank",style:{color:"#3e7ac2"},children:E[o]||"违反知乎社区规定"})," 暂时被限制使用，",n," 天后恢复正常。"]}):(0,a.BX)("span",{children:["由于违反 ",h,"，该用户暂时处于禁言状态，",n," ","日后将恢复正常使用。"]})},isForceRenamed:function(e){var t=e.isCurrentUser,n=e.hasRenamed,o=e.isOrg;return t?(0,a.tZ)("span",{children:n?"您的用户名已修改，请等待管理员确认。申诉邮箱：i@zhihu.com。":(0,a.BX)("span",{children:["您的用户名不符合 ",m,"，请您 ",o?v:Z]})}):(0,a.BX)("span",{children:["由于违反 ",m," ，该用户暂时处于改名状态。"]})},notBindPhone:function(){return null}},behavior:T};function A(e,t,n){if(!t)return"";var r=C[e];return"function"==typeof r[t]?r[t]((0,o.Z)({},n)):r[t]}function _(e){return e.payload&&31e4===e.payload.code}function y(e){return e.payload&&310001===e.payload.code}function S(e){return e.payload&&310001001===e.payload.code}function I(e,t){return Math.ceil((0,u.NV)(t-Date.now()/1e3+e))}function b(e,t,n){var o,r="object"==typeof e?e.name:e;if("ban"===r){var i=e.createdAt,a=e.expiredAt;o={reason:e.reason,expiredAt:I(i,a)}}return r===l.Pw.lock&&(o={unBlockInfo:t}),r===l.Pw.isForceRenamed&&(o={isOrg:Boolean(n&&"organization"===n.userType)}),A("behavior",r,o)}function w(e,t){var n=e.accountStatus,o=e.isForceRenamed,r=e.isBindPhone,i=e.userType,a=e.isRealname;if(n&&n.length){var c=n.find((function(e){var n=e.name;return t.includes(n)}));if(c)return c}return!1===r&&!a&&t.includes("notBindPhone")?"notBindPhone":o&&t.includes("isForceRenamed")?"isForceRenamed":"guest"===i&&t.includes("isGuest")?"isGuest":null}function R(e,t,n){for(var o=arguments.length,r=new Array(o>3?o-3:0),a=3;a<o;a++)r[a-3]=arguments[a];var c=e.canWrite,u=e.alertTimeSpan;if(!c)return t.apply(void 0,(0,i.Z)(r));var d=(new Date).getTime(),p=1e3*u,h=s().get(l.iG);return isNaN(h)||h>d||h+p<d?(s().set(l.iG,d),t.apply(void 0,(0,i.Z)(r))):n.apply(void 0,(0,i.Z)(r))}function N(e,t,n,o,a,c){var s=this;return function(u){for(var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.zg,p=arguments.length,h=new Array(p>2?p-2:0),f=2;f<p;f++)h[f-2]=arguments[f];var m=function(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.apply(void 0,(0,i.Z)(n)),"function"==typeof E&&E.apply(void 0,(0,i.Z)(n))}};if(!u){var v="function"==typeof e?e():e;return b(w(v,d),null,v)}var Z=(0,r.Z)(Array.isArray(u)?u:[u],2),g=Z[0],E=Z[1];return function(){for(var r=arguments.length,u=new Array(r),p=0;p<r;p++)u[p]=arguments[p];var f="function"==typeof e?e():e;if(!f)return m(o).apply(s,(0,i.Z)(u));var v=w(f,d);return v?"notBindPhone"===v&&c?m(R.bind(null,t,c,g)).apply(s,(0,i.Z)(u)):"isGuest"===v?m(o).apply(s,(0,i.Z)(u)):m((function(){return a.apply(void 0,[b(v,v.name===l.Pw.lock?n():null,f)].concat((0,i.Z)(h)))})).apply(s,(0,i.Z)(u)):g.apply(void 0,(0,i.Z)(u))}}}},7187:function(e,t,n){"use strict";n.d(t,{Ef:function(){return d},aF:function(){return f}});var o=n(88483),r=n(61565),i=n(16125),a=n(37015),c=n(78493),s=n.n(c),u=n(17222),l={2555:{id:2555,name:"SEM落地页顶部下载点击"},2556:{id:2556,name:"SEM落地页按钮下载点击"},2557:{id:2557,name:"SEM落地页内容下载点击"}},d=function(e,t){var n="number"==typeof t?l[t]:t;"object"==typeof n&&u.Z.trackEvent(e&&e.currentTarget,(0,o.Z)({action:"Click"},n))},p=["a","b","c","d","e","f","g","h","i","j","k","l"],h=function(e,t){var n=new Array(8).fill("").map((function(){return p[s()(11)]})).join("");(new Image).src="https://lens.zhihu.com/report?type=msg&msg=".concat(e,"&dummy=").concat(n,"&uploadtype=").concat(t)};function f(e,t){return function(n){for(var o=arguments.length,c=new Array(o>1?o-1:0),s=1;s<o;s++)c[s-1]=arguments[s];var u=Date.now(),l=["upload",t?"new":"old",void 0===n?"undefined":(0,i.Z)(n),n&&n.size?"normal":"empty"].join("_"),d=(0,a.HP)({appName:"heifetz"})("image.".concat((0,a.j0)(),".").concat(l));return a.ZP.increment({raw:"".concat(d,".start.count")}),h("puploadcount",l),Promise.resolve(e.apply(void 0,[n].concat((0,r.Z)(c)))).then((function(e){var t=Date.now();h("psuccesscount",l),a.ZP.increment({raw:"".concat(d,".success.count")});var n=t-u;return a.ZP.timing({raw:"".concat(d,".success")},n),e})).catch((function(e){throw a.ZP.increment({raw:"".concat(d,".error.count")}),h("pfailedcount",l),e}))}}},7620:function(e,t,n){"use strict";n.d(t,{H2:function(){return S},Z1:function(){return y}});var o=n(88483),r=n(16600),i=n(78194),a=n(68562),c=n(23323),s=n(8567),u=n(47859),l=n(60111),d=n(77568),p=n.n(d),h=n(58386),f=n.n(h),m=n(87363),v=n(70175),Z=n(2421),g=n(35314),E="".concat(v.Z.fetchRoot.api,"/content/publish/control/v2"),T={init:!0},C={write:{instruction:!1,msg:""},contribute:{instruction:!1,msg:""},anonymous:{instruction:!1,msg:""}},A=(0,m.createContext)(void 0),_=function(e){return function(t){return p()((function(d){var p,h=(0,i.Z)((0,c.Z)(!1),2),v=h[0],_=h[1],y=(0,i.Z)((0,m.useState)(!0),2),S=y[0],I=y[1],b=(0,i.Z)((0,m.useState)(C),2),w=b[0],R=b[1],N=(0,o.Z)({},T,e),O=(0,Z.n)(),D=(0,g.Z)(),B=(0,m.useRef)({onClose:f()}),P=(0,s.Z)((function(){return n.e(5634).then(n.bind(n,77483))}),O),k=(0,u.Z)((function(e){var t=e.getScene(d);return D(E,{method:"GET",query:(0,o.Z)({scene:t.type},t.token&&{questionToken:t.token})}).then((function(e){return e.payload}))})),x=(0,u.Z)((function(e){B.current.onClose=e})),L=(0,m.useMemo)((function(){return{commands:w,setOnModalClose:x,isLoading:S}}),[w,x,S]),U=(0,u.Z)((function(){var e,t;_.off(),null===(e=B.current)||void 0===e||null===(t=e.onClose)||void 0===t||t.call(e)}));return(0,l.Z)((function(){N.init&&"function"==typeof N.getScene&&O&&k(N).then((function(e){var t=e.data;R(t),t.write.instruction&&_.on()})).finally((function(){I(!1)}))})),(0,a.BX)(A.Provider,{value:L,children:[P?(0,a.tZ)(P,{show:v,text:(null==w||null===(p=w.write)||void 0===p?void 0:p.msg)||"系统升级中，敬请谅解",onClose:U}):null,(0,a.tZ)(t,(0,r.Z)((0,o.Z)({},d),{writeShield:L}))]})}),t)}},y=function(){return(0,m.useContext)(A)},S=_({init:!0,getScene:function(e){return e.writeScene}})((function(e){var t=e.writeShield,n=e.onClose;return(0,l.Z)((function(){t.setOnModalClose((function(){null==n||n()}))})),null}));t.ZP=_},98807:function(e,t,n){"use strict";var o=n(21620),r=n(84421),i=n(88483),a=n(32554),c=n(68562),s=n(87363),u=n(77568),l=n.n(u);t.Z=function(e){return function(t){var n=e.shouldLoad,u=void 0===n?function(e){return!e.isDrained}:n,d=e.load,p=function(e){(0,r.Z)(s,e);var n=(0,a.Z)(s);function s(){var e;return(0,o.Z)(this,s),(e=n.apply(this,arguments)).load=function(){return d(e.props,e.state)},e}var l=s.prototype;return l.componentDidMount=function(){u(this.props,this.state)&&this.load()},l.componentDidUpdate=function(e,t){var n=u(e,t),o=u(this.props,this.state);o&&o!==n&&this.load()},l.render=function(){return(0,c.tZ)(t,(0,i.Z)({},this.props))},s}(s.Component);return l()(p,t)}}},47496:function(e,t,n){"use strict";var o=n(88483),r=n(16600),i=n(68562),a=n(77568),c=n.n(a),s=n(52495),u=n(40198);(0,s.connect)((function(e){return{currentUser:(0,u.ib)(e)}}));t.Z=function(e){return c()((function(t){var n=(0,s.useSelector)((function(e){return(0,u.ib)(e)}));return(0,i.tZ)(e,(0,r.Z)((0,o.Z)({},t),{isLogin:n&&"guest"!==n.userType,currentUser:n}))}),e)}},87655:function(e,t,n){"use strict";n.d(t,{M:function(){return d}});var o=n(71103),r=n(88483),i=n(68562),a=n(77568),c=n.n(a),s=n(75926),u=n.n(s),l=n(47496),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authRequired";return function(t){var n=function(n,a){var c=a.authRequired,s=void 0===c?function(){}:c,u=(0,o.Z)({},e,s);return(0,i.tZ)(t,(0,r.Z)({},n,u))};return n.contextTypes={authRequired:u().func},c()((0,l.Z)(n),t)}},p=d();t.Z=p},89764:function(e,t,n){"use strict";n.d(t,{b8:function(){return T},dF:function(){return v},dT:function(){return g},nx:function(){return E}});var o=n(88483),r=n(16600),i=n(68562),a=n(87363),c=n(58146),s=n(52495),u=n(77568),l=n.n(u),d=n(47112),p=n.n(d),h=n(57191),f=n.n(h),m=n(10754),v=(0,a.memo)((function(e){var t=e.className,n=function(e){return Object.keys(e).filter((function(t){return f()(e[t])&&e[t]})).filter((function(t){return"Mobile"!==t||!e.Tablet})).map((function(e){return"Body--".concat(e)}))}((0,s.useSelector)(m.Uh));return(0,i.tZ)(c.ql,{children:(0,i.tZ)("body",{className:p()(t,n)})})})),Z=function(e){return function(t){var n=(0,a.forwardRef)((function(n,a){return(0,i.BX)(i.HY,{children:[(0,i.tZ)(v,{className:e}),(0,i.tZ)(t,(0,r.Z)((0,o.Z)({},n),{ref:a}))]})}));return l()(n,t)}},g=Z("LightGreyBg-body"),E=Z("WhiteBg-body"),T=Z("GreyBg-body");t.ZP=Z},70577:function(e,t,n){"use strict";var o=n(21620),r=n(84421),i=n(88483),a=n(16600),c=n(32554),s=n(68562),u=n(87363),l=n(77568),d=n.n(l),p=n(20722);t.Z=function(e){return function(t){var n=function(n){(0,r.Z)(d,n);var l=(0,c.Z)(d);function d(){return(0,o.Z)(this,d),l.apply(this,arguments)}return d.prototype.render=function(){var n=e&&!(0,u.isValidElement)(e)?e:{replacement:e};return(0,s.tZ)(p.SV,(0,a.Z)((0,i.Z)({},n),{children:(0,s.tZ)(t,(0,i.Z)({},this.props))}))},d}(u.Component);return d()(n,t)}}},90463:function(e,t,n){"use strict";n.d(t,{W5:function(){return c},ZP:function(){return u},mv:function(){return a},pe:function(){return s}});var o=n(88483),r=n(16600),i=n(52495),a={normal:{logo:"primary",navActiveColor:"primary",headerTitle:"GBL01A"},custom:{logo:"GBK99B",boxShadow:"none",icon:"GBK99B",iconOpacity:"0.9",navColor:"GBK99B",navOpacity:"0.75",navActiveColor:"GBK99B",headerTitle:"GBK99B",searchInputColor:"GBK99B",searchButtonColor:"GBL01A",searchButtonBg:"GBK99B",searchButtonOpacity:"0.9",searchAreaColor:"GBK99B",searchBorder:"none",searchBorderColor:"transparent",searchPlaceHolderOpacity:"0.75",searchInputOpacity:"0.2",searchIconOpacity:"0.8"}},c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{transitionProperty:"".concat(t.join(",")),transitionDuration:"0.25s",transitionTimingFunction:"ease-in"}},s=function(e){return function(t){return e.colors[t]||t}};function u(){var e=(0,i.useSelector)((function(e){return e.env.appHeaderTheme})),t=e.current,n=e[t].bgColor;return(0,r.Z)((0,o.Z)({type:t,bgColor:n},a[t]),{themeTransition:c})}},2421:function(e,t,n){"use strict";n.d(t,{n:function(){return u}});var o=n(61565),r=n(87363),i=n(10187),a=n.n(i),c=n(52495),s=n(40198),u=function(){return(0,c.useSelector)(s.dd)};t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,c.useDispatch)(),n=(0,c.useSelector)((function(t){return a()((0,s.ib)(t),e)}),c.shallowEqual);return(0,r.useEffect)((function(){t((0,s.sF)(e))}),[t].concat((0,o.Z)(e))),n}},25955:function(e,t,n){"use strict";var o=n(52495),r=n(40198);t.Z=function(){var e=(0,o.useSelector)((function(e){return(0,r.ib)(e)})),t=(0,o.useSelector)((function(e){return e.switches})),n="https://www.zhihu.com";if("undefined"!=typeof window){var i=window.location,a=i.hostname,c=i.origin,s=[".zpres.zhihu.dev",".zpres.zhihu.com"].some((function(e){return a.endsWith(e)})),u=c.replace(/\D+/g,"");s&&u&&(n="https://heifetz--box-".concat(u,"--www-zhihu-com.zpres.zhihu.").concat(a.slice(-3)))}return{jumpUrl:e&&!e.isOrg&&t&&t.isCreator?"".concat(n,"/creator/editor-setting"):"".concat(n,"/knowledge-plan/editor-setting")}}},35314:function(e,t,n){"use strict";n.d(t,{Z:function(){return i},q:function(){return r}});var o=n(87363),r=(0,o.createContext)(null);function i(){return(0,o.useContext)(r)}},49252:function(e,t,n){"use strict";n.d(t,{$:function(){return u}});var o=n(88483),r=n(16600),i=n(68562),a=n(77568),c=n.n(a),s=n(92799);t.Z=s.dD;var u=function(e){return function(t){return c()((function(n){return(0,i.tZ)(t,(0,r.Z)((0,o.Z)({},n),{isMobile:(0,s.dD)(e)}))}),t)}}},42931:function(e,t,n){"use strict";var o=n(52495),r=n(92799);t.Z=function(){return(0,o.useSelector)(r.Xj)}},92718:function(e,t,n){"use strict";var o=n(52495),r=n(40198);t.Z=function(){return(0,o.useSelector)(r.W5)}},20984:function(e,t,n){"use strict";var o=n(88483),r=n(16600),i=n(78724),a=n(78194),c=n(68562),s=n(12321),u=n(65468),l=n.n(u),d=n(87363),p=n(3404),h=n(82096),f=n(73464),m=n(28938),v=function(e){var t=e.title,n=e.content,u=e.ok,l=e.cancel,m=e.onOk,v=e.onCancel,Z=e.disabled,g=(0,i.Z)(e,["title","content","ok","cancel","onOk","onCancel","disabled"]),E=(0,a.Z)((0,d.useState)(!0),2),T=E[0],C=E[1],A=function(e){return function(){C(!1),e()}},_=(0,s.n)();return(0,c.tZ)(h.Z,(0,r.Z)((0,o.Z)({closeButton:null,maskClosable:!1,hotKeyClosable:!1,css:[{overflow:"hidden",maxWidth:"96vw",".Modal-content":{margin:0,padding:0}},_.Mobile&&{width:320,borderRadius:12,boxShadow:""}]},g),{children:T&&(0,c.BX)(p.Box,{px:"36px",py:"24px",children:[t&&(0,c.tZ)(p.Text,{fontSize:"18px",lineHeight:"28px",fontWeight:"bold",textAlign:"center",children:t}),n&&(0,c.tZ)(p.Text,{mt:t?"16px":"0",fontSize:"14px",lineHeight:"normal",color:"GBK03A",maxHeight:"calc(67vh - 100px)",css:{wordBreak:"break-all",overflowY:"auto",WebkitOverflowScrolling:"touch",marginRight:-10,paddingRight:10},children:n}),(0,c.BX)(p.Flex,{mt:"16px",css:{button:{padding:0,flex:1,height:36,lineHeight:1,fontSize:15,borderRadius:4,":active":{opacity:.6}}},fontWeight:"bold",children:[l&&(0,c.tZ)(f.ZP,{css:{marginRight:4},onClick:A(v),children:l}),(0,c.tZ)(f.ZP,{preset:"primary",color:"blue",onClick:A(m),disabled:Z,children:u})]})]})}))};t.Z=function(){var e=(0,m.Z)(),t=e.addInstance,n=e.removeInstance,o=function(e){return setTimeout((function(){return n(e)}),300)};return{alert:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.title,a=r.ok;return new Promise((function(o){n=(0,c.tZ)(v,{content:e,title:i,ok:a||"确定",onOk:o,css:{textAlign:"center"}},l()("modal")),t(n)})).finally((function(){return o(n)}))},confirm:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.title,a=r.ok,s=r.cancel,u=r.disabled;return new Promise((function(o,r){n=(0,c.tZ)(v,{content:e,title:i,ok:a||"确定",onOk:o,cancel:s||"取消",onCancel:r,disabled:u},l()("modal")),t(n)})).finally((function(){return o(n)}))}}}},9990:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var o=n(78194),r=n(69975),i=n(47859),a=n(43137),c=n(69045),s=n(87363),u=new(n(27063).EventEmitter),l=Symbol("useAllowOnePlayer/startPlay"),d=!1,p=function(e){var t=e.videoId,n=e.iframeRef,p=(0,o.Z)((0,s.useState)(null==n?void 0:n.current),2),h=p[0],f=p[1],m=(0,o.Z)((0,r.Z)({threshold:.5}),2),v=m[0],Z=m[1],g=(0,o.Z)((0,s.useState)((0,c.Wn)(t,"*",!0)),2),E=g[0],T=g[1],C=(0,s.useRef)(!1),A=(0,i.Z)((function(){!Z&&(null==h?void 0:h.contentWindow)&&C.current&&!d&&E.dispatchMessage(null==h?void 0:h.contentWindow,c.aO.PAUSE,{dontApplyOnFullScreen:!0})})),_=(0,i.Z)((function(e){var n=e.sourceId;t!==n&&(null==h?void 0:h.contentWindow)&&E.dispatchMessage(h.contentWindow,c.aO.PAUSE)})),y=(0,i.Z)((function(){C.current=!0,u.emit(l,{sourceId:t})})),S=(0,i.Z)((function(){C.current=!1})),I=(0,a.Z)((0,i.Z)((function(){C.current&&A()})),100),b=(0,i.Z)((function(){d=!0})),w=(0,i.Z)((function(){d=!1}));(0,s.useEffect)((function(){var e=[E.subscribeMessage(c.FP.PLAY,y).unsubscribe,E.subscribeMessage(c.FP.PAUSE,S).unsubscribe,E.subscribeMessage(c.FP.ENTER_PIP,b).unsubscribe,E.subscribeMessage(c.FP.EXIT_PIP,w).unsubscribe];return u.on(l,_),window.addEventListener("scroll",I),function(){u.removeListener(l,_),e.forEach((function(e){return e()}))}}),[S,y,I,_,E,b,w]),(0,s.useEffect)((function(){v(h)}),[h,v]),(0,s.useEffect)((function(){A()}),[Z,h,A]),(0,s.useEffect)((function(){!h&&(null==n?void 0:n.current)&&t&&(f(n.current),T((0,c.Wn)(t,"*",!0)))}))}},28938:function(e,t,n){"use strict";n.d(t,{j:function(){return c}});var o=n(78194),r=n(68562),i=n(87363),a=(0,i.createContext)(),c=function(e){var t=e.children,n=(0,o.Z)((0,i.useState)([]),2),c=n[0],s=n[1],u=(0,i.useCallback)((function(e){return s((function(t){return t.concat(e)}))}),[]),l=(0,i.useCallback)((function(e){return s((function(t){return t.filter((function(t){return t!==e}))}))}),[]),d=(0,i.useRef)({addInstance:u,removeInstance:l});return(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.Provider,{value:d.current,children:t}),c]})};t.Z=function(){var e=(0,i.useContext)(a);return{addInstance:e.addInstance,removeInstance:e.removeInstance}}},5815:function(e,t,n){"use strict";var o=n(78194),r=n(87363),i=n(97645),a=n.n(i);t.Z=function(e){var t=(0,o.Z)((0,r.useState)((function(){return a().get(e)})),2),n=t[0],i=t[1];return[n,(0,r.useCallback)((function(t){a().set(e,t),i(t)}),[e])]}},78248:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});var o=n(87363),r=(0,o.createContext)("");t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://www.zhihu.com",n=(0,o.useContext)(r);return e?n?((e=new URL(e,t)).searchParams.append("utm_source",n),e.toString()):e:n}},87050:function(e,t,n){"use strict";n.d(t,{a:function(){return d},w:function(){return l}});var o,r=n(4428),i=n(8518),a=n(70175),c="ad/getAdPromotionExtra/get",s="ad/getAdPromotionExtra/give",u=function(e){return["https://".concat(a.Z.wwwHost),"https://".concat(a.Z.zhuanlanHost)].includes(e)},l=function(e,t,n){var o=function(r){var i=r.data,a=r.origin,l=r.source;if(u(a)&&i.type===c){var d=i.data,p=d.type,h=d.id;p===e&&h===t&&(null==l||l.postMessage({type:s,data:{type:e,id:t,promotionExtra:n}},a),window.removeEventListener("message",o))}};window.addEventListener("message",o,!1);var r=setTimeout((function(){window.removeEventListener("message",o),clearTimeout(r)}),6e4)},d=(o=(0,r.Z)((function(e,t){return(0,i.Jh)(this,(function(n){return"undefined"!=typeof window&&(null===window||void 0===window?void 0:window.opener)?[2,new Promise((function(n){var o=function(r){var i=r.data,a=r.origin;if(u(a)&&i.type===s){var c=i.data,l=c.type,d=c.id,p=c.promotionExtra;l===e&&d===t&&(n(p),window.removeEventListener("message",o))}};window.addEventListener("message",o,!1),window.opener.postMessage({type:c,data:{type:e,id:t}},"https://".concat(a.Z.wwwHost))}))]:[2,void 0]}))})),function(e,t){return o.apply(this,arguments)})},31803:function(e,t){"use strict";t.Z=function(){return function(){}}},31995:function(e,t,n){"use strict";var o=n(52495),r=n(65406),i=(0,r.wN)(r.PW,o.shallowEqual);t.Z=i},35568:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var o=n(61565),r=n(11153),i=n.n(r);function a(e,t,n){var r=!1,a=i()((function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r=!1,e.apply(void 0,(0,o.Z)(n))}),t,n);return Object.assign((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r=!0,a.apply(void 0,(0,o.Z)(t))}),{cancel:a.cancel,flush:a.flush,pending:function(){return r}})}},37262:function(e,t){"use strict";t.Z=function(e,t){var n=!1,o=[],r=null;return function(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return o.push(a),n||(n=!0,r=new Promise((function(r){t((function(){var t=o;n=!1,o=[],r(e(t))}))}))),r}}},15558:function(e,t){"use strict";t.Z=function(e,t,n){return t in e?e[t]:e[t]=n()}},96666:function(e,t,n){"use strict";n.d(t,{FX:function(){return i},pA:function(){return o}});var o={auto_notif:"auto_notif",header:"header",question_header_card:"question_header_card",force_launch_notif:"force_launch_notif",agree:"agree",disagree:"disagree",comment:"comment",star:"star",comment_list:"comment_list",comment_more:"comment_more",more_answers:"more_answers",bottom:"bottom",capsule:"capsule",follow:"follow",write_answer:"write_answer"},r="auto_notif",i={expand_answer:"force_launch_notif",expand_answer1:r,expand_answer2:r,up:"agree",down:"disagree",comment_answer:"comment",collect_answer:"star"}},26171:function(e,t,n){"use strict";n.d(t,{Jl:function(){return a},Mr:function(){return r},Ti:function(){return i}});var o=n(70175);function r(e,t,n){return"//".concat(o.Z.wwwHost,"/vessay").concat(n?"/v2":"","/editor?type=").concat(e,"&id=").concat(t)}var i="vessay_v2_sdk",a="2"},48494:function(e,t,n){"use strict";n.d(t,{ZP:function(){return ee},fn:function(){return J},sQ:function(){return W},F4:function(){return V},t_:function(){return Q},Z3:function(){return K},L3:function(){return j},MM:function(){return X},LC:function(){return H},Hr:function(){return q},Rv:function(){return Y}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(12856),s=n(59083),u=(n(40198),n(60594));function l(e){if(!e)return"";var t=e+"";return t.slice(0,6)+"****"+t.slice(10)}function d(e){if(!e)return"";var t=e.indexOf("@");return t>2?e.slice(0,2)+"****"+e.slice(t):e}var p=n(15568),h=n.n(p),f="unlock_ticket";function m(){return"undefined"!=typeof document&&h().remove(f),{unlockTicketStatus:!1,unlockTicket:null,challenge:[]}}function v(e){var t=e.payload,n=e.res,o=t.unlockTicket;return o?{unlockTicketStatus:n.ok,unlockTicket:o,challenge:[],errorStatus:!1,message:""}:m()}var Z=n(91355),g=[Z.An,Z.hY,Z.M,Z.Uw,Z.TY],E=(0,r.Z)({},(0,u.FH)("account",["UNLOCK_TICKET_BY_DIGITS","UNLOCK_TICKET_BY_PASSWORD","GET_UNLOCK_REQUEST","REQUEST_UNLOCK_TICKET","GET_UNBLOCK_INFO","REQUEST_PHONE_VERIFICATION_CODE","UPDATE_PHONE_NUMBER","GET_ACCOUNT_PHONE_VERIFY_CODE","UPDATE_ACCOUNT_PHONE","REQUEST_EMAIL_VERIFY_CODE","UPDATE_EMAIL","ACTIVE_EMAIL","MONOPOLIZE_PHONE_NUMBER","GET_LOCK_LEVEL","RESET_PASSWORD","RESET_ORG_PASSWORD","REQUEST_URL_TOKEN","UPDATE_URL_TOKEN","GET_ACCOUNT_INFO","GET_ORG_ACCOUNT_INFO","UPDATE_ORG_EMAIL","REQUEST_ORG_EMAIL_VERIFY_CODE","GET_ACCOUNT_CARDINFO","GET_ACCOUNT_STICKERS_LIST","GET_ACCOUNT_WIDGET","GET_ACCOUNT_WIDGETID"]),(0,u.co)("account",["RECOVER_DEFAULT_TYPE","SET_UNLOCK_TICKET","SET_HANDLEWIDGET","SET_ACCOUNTUSER_WIDGETID"])),T=E.UNLOCK_TICKET_BY_DIGITS,C=E.UNLOCK_TICKET_BY_PASSWORD,A=E.GET_UNLOCK_REQUEST,_=E.REQUEST_UNLOCK_TICKET,y=E.GET_UNBLOCK_INFO,S=E.REQUEST_PHONE_VERIFICATION_CODE,I=E.UPDATE_PHONE_NUMBER,b=(E.GET_ACCOUNT_PHONE_VERIFY_CODE,E.UPDATE_ACCOUNT_PHONE),w=(E.REQUEST_EMAIL_VERIFY_CODE,E.REQUEST_ORG_EMAIL_VERIFY_CODE,E.UPDATE_EMAIL),R=(E.ACTIVE_EMAIL,E.MONOPOLIZE_PHONE_NUMBER),N=E.GET_LOCK_LEVEL,O=(E.RESET_PASSWORD,E.RESET_ORG_PASSWORD,E.REQUEST_URL_TOKEN),D=E.UPDATE_URL_TOKEN,B=E.GET_ACCOUNT_INFO,P=E.GET_ORG_ACCOUNT_INFO,k=E.UPDATE_ORG_EMAIL,x=E.GET_ACCOUNT_CARDINFO,L=E.GET_ACCOUNT_STICKERS_LIST,U=(E.GET_ACCOUNT_WIDGET,E.GET_ACCOUNT_WIDGETID),F=E.RECOVER_DEFAULT_TYPE,M=E.SET_UNLOCK_TICKET,G=E.SET_HANDLEWIDGET,z=E.SET_ACCOUNTUSER_WIDGETID;function H(e){return{API:{types:T,method:"POST",body:(0,s.z)((0,c.decamelizeKeys)({digits:e})),endpoint:"v3/oauth/account/unlock/digits"}}}function q(e){return{API:{types:C,method:"POST",body:(0,s.z)((0,c.decamelizeKeys)({password:e})),endpoint:"v3/oauth/account/unlock/password"}}}function V(){return{API:{types:A,method:"GET",endpoint:"v3/oauth/account/unlock/request",fetchOptions:{credentials:"include"}}}}function X(e){return{API:{types:_,method:"POST",endpoint:"v3/oauth/account/unlock/request/".concat(e)}}}function W(){return{API:{types:y,method:"GET",endpoint:"/antispam/lock_info"}}}function K(){return{type:F}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.notification,o=void 0===n||n;return{API:{types:S,endpoint:"v3/account/api/account/phone_no",method:"POST",fetchOptions:{credentials:"include",zsEncrypt:!0,body:(0,s.Z)({new_phone_no:e})}},NOTIFICATION:o}}function Y(e,t){return{phone:e,API:{types:I,endpoint:"v3/account/api/account/phone_no",method:"PUT",fetchOptions:{credentials:"include",zsEncrypt:!0,body:(0,s.Z)({new_phone_no:e,digits:t})}},NOTIFICATION:!1}}var Q=function(){return{API:{types:R,endpoint:"v3/account/api/account/phone_no/cover",method:"POST",fetchOptions:{credentials:"include"}}}};function J(){return{API:{types:B,method:"GET",endpoint:"v3/oauth/account"}}}var $={lockLevel:{},unlockTicketStatus:!1,unlockTicket:null,challenge:[],errorStatus:!1,message:"",isFetching:!1,accountInfo:{},urlToken:{loading:!1},cardUserInfo:{vipInfo:{}},handleWidget:{},widgetList:[],userWidgetId:""};function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;if(n===N.success)return(0,i.Z)((0,r.Z)({},e),{lockLevel:(0,i.Z)((0,r.Z)({},e.lockLevel),(0,o.Z)({},t.id,c.level))});if(n===y.success){var s=c.spamLevel,u=c.isAppealed;return(0,i.Z)((0,r.Z)({},e),{spamLevel:s,isAppealed:u,antispamLockInfo:c,isUnblockInfoFetched:!0})}var p=[T.success,C.success];if(-1!==p.indexOf(n))return(0,r.Z)({},e,v(t));var h=[I.success,b.success];if(-1!==h.indexOf(n)){var f=t.phone,Z=(0,i.Z)((0,r.Z)({},e.accountInfo),{phoneNo:l(f)});return(0,i.Z)((0,r.Z)({},e,m()),{accountInfo:Z})}if(n===w.success||n===k.success){var E=t.email,_=(0,i.Z)((0,r.Z)({},e.accountInfo),{email:d(E)});return(0,i.Z)((0,r.Z)({},e,m()),{accountInfo:_})}if(n===A.request)return(0,i.Z)((0,r.Z)({},e),{isFetching:!0});if(n===A.success)return(0,i.Z)((0,r.Z)({},e),{challenge:c.challenge,isFetching:!1});if(n===A.failure)return(0,i.Z)((0,r.Z)({},e),{isFetching:!1});if(n===B.success)return(0,i.Z)((0,r.Z)({},e),{accountInfo:c});if(n===P.success)return(0,i.Z)((0,r.Z)({},e),{accountInfo:{passwordSet:"已设置"===c.accountPwd.status,email:c.accountEmail.email}});if(n===O.request)return(0,i.Z)((0,r.Z)({},e),{urlToken:{loading:!0}});if(n===O.success)return(0,i.Z)((0,r.Z)({},e),{urlToken:{loading:!1,setable:c.setable,token:c.urlToken}});if(n===O.failure)return(0,i.Z)((0,r.Z)({},e),{urlToken:{loading:!1}});if(n===D.success){var S=t.urlToken;return(0,i.Z)((0,r.Z)({},e),{urlToken:{loading:!1,setable:!1,token:S}})}if(n===F)return(0,i.Z)((0,r.Z)({},e),{errorStatus:!1,isFetching:!1});if(n===G)return(0,i.Z)((0,r.Z)({},e),{handleWidget:(0,r.Z)({},t.handleWidget)});if(n===M)return(0,i.Z)((0,r.Z)({},e),{unlockTicket:t.unlockTicket});if(t.err&&t.err.payload){var R=t.err.payload;if(g.includes(R.code))return(0,i.Z)((0,r.Z)({},e),{unlockTicketStatus:!1,errorStatus:!0,message:R.message})}return n===x.success?(0,i.Z)((0,r.Z)({},e),{cardUserInfo:(0,r.Z)({},c)}):n===L.success?(0,i.Z)((0,r.Z)({},e),{widgetList:(0,a.Z)(c.data)}):n===U.success?(0,i.Z)((0,r.Z)({},e),{userWidgetId:c.data.widgetId}):n===z?(0,i.Z)((0,r.Z)({},e),{userWidgetId:t.widgetId}):e}},55695:function(e,t,n){"use strict";n.d(t,{Cz:function(){return m},SE:function(){return u}});var o,r=n(71103),i=n(44010),a=n(27869),c=n(26931),s=n(85570),u={vote:{positive:"voteup",revertPositive:"revert_voteup",negative:"votedown",revertNegative:"revert_votedown"},like:"like",revertLike:"revert_like",collect:"collect",revertCollect:"revert_collect",follow:"follow",revertFollow:"revert_follow",comments:{show:"show_comments",close:"close_comments",publish:"comment_publish"},shareClick:"share_click"},l={answer:{},article:{}},d=function(e,t){var n=t.type,o=t.id,r=t.action;Object.keys(l).includes(n)&&o&&(e[n][o]=r)},p=function(e){return function(t,n){var o=n.meta,r=n.payload,i=t.answer[o.id];1===r.voting?i=u.vote.positive:-1===r.voting?i=u.vote.negative:0===r.voting&&1===o.beforeVoting?i=u.vote.revertPositive:0===r.voting&&-1===o.beforeVoting&&(i=u.vote.revertNegative),d(t,{type:e,id:o.id,action:i})}},h=function(e){return function(t,n){var o=n.meta,r=n.payload;d(t,{type:e,id:o.id,action:r.isThanked||r.isLiked?u.like:u.revertLike})}},f=(0,i.oM)({initialState:l,name:"adPromotion",reducers:{updateAdPromotionAction:function(e,t){var n=t.payload,o=n.type,r=n.id,i=n.currentAction;d(e,{type:o,id:r,action:i})}},extraReducers:(o={},(0,r.Z)(o,a.uJ.UPDATE_VOTE.success,p("answer")),(0,r.Z)(o,c.VA.VOTE.success,p("article")),(0,r.Z)(o,a.uJ.UPDATE_THANK.success,h("answer")),(0,r.Z)(o,c.VA.LIKE.success,h("article")),(0,r.Z)(o,s.xb.UPDATE_FAVLIST_ITEM.success,(function(e,t){var n=t.meta,o=n.collected,r=n.contentId,i=n.contentType;d(e,{type:i,id:r,action:o?u.collect:u.revertCollect})})),o)}),m=f.actions.updateAdPromotionAction;t.ZP=f.reducer},27869:function(e,t,n){"use strict";n.d(t,{G:function(){return S},G_:function(){return G},Hh:function(){return O},Md:function(){return F},Mn:function(){return q},OC:function(){return w},ON:function(){return D},Pe:function(){return b},TC:function(){return C},V7:function(){return M},Vc:function(){return P},Yu:function(){return N},Zq:function(){return E},bs:function(){return L},eP:function(){return H},eu:function(){return A},f0:function(){return I},fT:function(){return _},h4:function(){return B},iM:function(){return y},i_:function(){return T},oe:function(){return k},p3:function(){return x},ri:function(){return U},uJ:function(){return m},z:function(){return z}});var o=n(71103),r=n(88483),i=n(16600),a=n(12856),c=n(52626),s=n(15390),u=n(74480),l=n.n(u),d=n(70175),p=n(60594),h=n(96053),f=n(5625),m=(0,p.FH)("answer",["UPDATE_VOTE","UPDATE_THANK","UPDATE_COMMENT_PERMISSION","UPDATE_RESHIPMENTSETTINGS","DELETE","RESTORE","GET","GET_SOME","GET_VOTERS","GET_COPYRIGHT_APPLICANTS","GET_FAVLISTS","GET_COMMENT_PERMISSION","COLLAPSE","ADD","UPDATE","STICK","UPDATE_ANSWER_REWARD","GET_CONCERNED_UPVOTERS","GET_SIMPLE_CONCERNED_UPVOTERS","LOAD_MARKET_ANSWER_PAID_CONTENT","GET_SETTINGS","SCHEDULED_PUBLISH","VALIDATE_SCHEDULED_PUBLISH","CANCEL_SCHEDULED_PUBLISH","CHECK_IF_CAN_CONVERT_TO_VESSAY","SUBMIT_EVALUTE","LOAD_ANSWER_SEARCH_ENTITY"]),v=(0,p.co)("answer",["UPDATE_SETTINGS_DISCLAIMER"]),Z=l()({is_visible:!0,paid_info:!0,paid_info_content:!0,admin_closed_comment:!0,reward_info:!0,annotation_action:!0,annotation_detail:!0,collapse_reason:!0,is_normal:!0,is_sticky:!0,collapsed_by:!0,suggest_edit:!0,comment_count:!0,can_comment:!0,content:!0,editable_content:!0,voteup_count:!0,reshipment_settings:!0,comment_permission:!0,created_time:!0,updated_time:!0,review_info:!0,relevant_info:!0,question:!0,excerpt:!0,attachment:!0,relationship:{is_authorized:!0,voting:!0,is_thanked:!0,is_author:!0,is_nothelp:!0,is_recognized:!0,is_labeled:!0},mark_infos:[{url:!0}],author:{badge:[{topics:!0}],vip_info:!0},settings:{table_of_content:{enabled:!0}},reaction_instruction:!0,ip_info:!0}),g=(l()({"":[{is_normal:!0,is_sticky:!0,collapsed_by:!0,suggest_edit:!0,comment_count:!0,content:!0,editable_content:!0,voteup_count:!0,reshipment_settings:!0,comment_permission:!0,created_time:!0,updated_time:!0,question:!0,excerpt:!0,relationship:{is_authorized:!0,voting:!0,is_thanked:!0,is_author:!0,is_nothelp:!0,is_recognized:!0},mark_infos:[{url:!0}],author:{badge:[{topics:!0}]},settings:{table_of_content:{enabled:!0}},ip_info:!0}]}),{up:1,down:-1,neutral:0});function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"answer";return function(n){return n({meta:{id:e},API:{types:m.CHECK_IF_CAN_CONVERT_TO_VESSAY,endpoint:"vessay/".concat(t,"s/").concat(e,"/status")},UPDATE:{success:function(n){return(0,o.Z)({},"".concat(t,"s"),(0,o.Z)({},e,(0,r.Z)({},n)))}}})}}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=n.zVideoId,s=n.cardType,u=arguments.length>3?arguments[3]:void 0;return function(n,l){var d,p,h,f,v,Z,E=l().entities,T=E.answers,C=void 0===T?{}:T,A=E.users,_=void 0===A?{}:A,y=E.videoanswers,S=u||("videoanswers"===s?(void 0===y?{}:y)[e]:("koc"===s?null===(d=C[e])||void 0===d?void 0:d.answer:C[e])||{}),I=S.author||{},b=I.urlToken,w="videoanswers"===s?"videoanswers":"answers";return h="up"===t?1:1===S.voting?-1:0,n({API:{types:m.UPDATE_VOTE,endpoint:c?"zvideos/".concat(c,"/voters"):"answers/".concat(e,"/voters"),method:"POST",body:(0,a.decamelizeKeys)(c?{voting:t}:{type:t})},meta:{beforeVoting:S.relationship.voting,id:e},UPDATE:{request:(v={},(0,o.Z)(v,w,(0,o.Z)({},e,(0,i.Z)((0,r.Z)({},S),{voteupCount:S.voteupCount+h,relationship:(0,i.Z)((0,r.Z)({},S.relationship),{voting:g[t]})}))),(0,o.Z)(v,"users",(0,o.Z)({},b,{voteupCount:(null!==(f=null===(p=_[b])||void 0===p?void 0:p.voteupCount)&&void 0!==f?f:0)+h})),v),failure:(Z={},(0,o.Z)(Z,w,(0,o.Z)({},e,S)),(0,o.Z)(Z,"users",(0,o.Z)({},b,I)),Z),success:function(t){return c?{answers:(0,o.Z)({},e,{voteupCount:t.voteupCount,relationship:(0,i.Z)((0,r.Z)({},S.relationship),{voting:t.voting})})}:"koc"===s?{answers:(0,o.Z)({},e,{answer:{voteupCount:t.voteupCount,relationship:(0,i.Z)((0,r.Z)({},S.relationship),{voting:t.voting})}})}:(0,o.Z)({},w,(0,o.Z)({},e,t))}}})}}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.zVideoId,c=n.cardType,s=arguments.length>3?arguments[3]:void 0;return function(n,u){var l,d=u().entities,p=d.answers,h=void 0===p?{}:p,f=d.videoanswers,v="videoanswers"===c?"videoanswers":"answers",Z=s||("videoanswers"===c?(void 0===f?{}:f)[e]:"koc"===c?null===(l=h[e])||void 0===l?void 0:l.answer:h[e]);return n({API:{types:m.UPDATE_THANK,endpoint:a?"zvideos/".concat(a,"/likers"):"answers/".concat(e,"/thankers"),method:t?"POST":"DELETE"},meta:{id:e},UPDATE:{request:(0,o.Z)({},v,(0,o.Z)({},e,(0,i.Z)((0,r.Z)({},Z),{relationship:(0,i.Z)((0,r.Z)({},Z.relationship),{isThanked:t}),thanksCount:Z.thanksCount+(t?1:-1)}))),success:function(t){if(a){var n=t.isLiked,r=t.likedCount;return{answers:(0,o.Z)({},e,{relationship:{isThanked:n},thanksCount:r})}}var i=t.isThanked,s=t.thanksCount;return"koc"===c?{answers:(0,o.Z)({},e,{answer:{relationship:{isThanked:i},thanksCount:s}})}:(0,o.Z)({},v,(0,o.Z)({},e,{relationship:{isThanked:i},thanksCount:s}))},failure:(0,o.Z)({},v,(0,o.Z)({},e,Z))}})}}function A(e,t){return function(n,r){var i=r().entities.answers[e];return n({API:{types:m.UPDATE_RESHIPMENTSETTINGS,endpoint:"answers/".concat(e),method:"PUT",body:(0,a.decamelizeKeys)({reshipmentSettings:t})},UPDATE:{request:{answers:(0,o.Z)({},e,{reshipmentSettings:t})},failure:{answers:(0,o.Z)({},e,i)}}})}}function _(e,t){return function(n,c){var s=c().entities.answers[e];return n({API:{types:m.UPDATE_ANSWER_REWARD,endpoint:"answers/".concat(e),method:"PUT",query:{include:Z},body:(0,a.decamelizeKeys)({rewardSetting:{canReward:Boolean(t),tagline:t}})},UPDATE:{success:function(t){return{answers:(0,o.Z)({},e,(0,i.Z)((0,r.Z)({},t),{rewardInfo:(0,r.Z)({},t.rewardInfo)}))}},failure:{answers:(0,o.Z)({},e,s)}}})}}function y(e,t){return function(n,r){var i=r().entities.answers[e];return n({API:{types:m.UPDATE_COMMENT_PERMISSION,endpoint:"answers/".concat(e),method:"PUT",body:(0,a.decamelizeKeys)({commentPermission:t})},UPDATE:{request:{answers:(0,o.Z)({},e,{commentPermission:t})},failure:{answers:(0,o.Z)({},e,i)}}})}}function S(e){return function(t,n){var r=n(),i=r.currentUser,a=r.entities,c=a.answers,s=a.questions,u=a.users,l=c[e],d=l.question.id,p=s[d],h=u[i];return t({API:{types:m.DELETE,endpoint:"answers/".concat(e),method:"DELETE"},UPDATE:{request:{answers:(0,o.Z)({},e,{isDelete:!0}),questions:(0,o.Z)({},d,{answerCount:p?p.answerCount-1:0,relationship:{myAnswer:{answerId:e,isDeleted:!0}}}),users:(0,o.Z)({},i,{answerCount:h.answerCount-1})},failure:{answers:(0,o.Z)({},e,l),questions:(0,o.Z)({},d,p),users:(0,o.Z)({},i,h)}}})}}function I(e,t){return function(n,r){var i=r(),a=i.currentUser,c=i.entities,u=c.answers,l=c.questions,d=c.users,p=u[t],h=l[e],f=d[a];return n({API:{types:m.RESTORE,endpoint:"/answers/".concat(t,"/actions/restore"),query:{include:Z},method:"POST"},schema:s.l.ANSWER,id:e,UPDATE:{request:{answers:(0,o.Z)({},t,{isDelete:!1}),questions:(0,o.Z)({},e,{answerCount:h?h.answerCount+1:0,relationship:{myAnswer:{answerId:t,isDeleted:!1}}}),users:(0,o.Z)({},a,{answerCount:f.answerCount+1})},failure:{answers:(0,o.Z)({},t,p),questions:(0,o.Z)({},e,h),users:(0,o.Z)({},a,f)}}})}}function b(e){return{API:{endpoint:"v3/entity_word",query:{type:"answer",token:e},types:m.LOAD_ANSWER_SEARCH_ENTITY},meta:e}}function w(e){return{id:e,API:{types:m.GET_SIMPLE_CONCERNED_UPVOTERS,endpoint:"answers/".concat(e,"/concerned_upvoters"),query:{limit:5,offset:0}},NOTIFICATION:!1,schema:s.l.USER_ARRAY}}function R(e,t){return function(n,o){var i=(t||o().answers.voters[e]||{}).next;return n({id:e,API:(0,r.Z)({types:m.GET_VOTERS},i?{endpoint:i}:{endpoint:"answers/".concat(e,"/voters"),query:{include:l()({data:[{answer_count:!0,articles_count:!0,follower_count:!0,gender:!0,is_followed:!0,is_following:!0,badge:!0}]}),limit:h.VZ,offset:0}}),schema:s.l.USER_ARRAY})}}function N(e){return function(t,n){var o=n().answers,i=o.voters,a=void 0===i?{}:i,c=o.concernedUpvoters,u=void 0===c?{}:c,d=a[e]||{},p=u[e]||{};return p.isDrained?t(R(e,d)):t(function(e,t){return function(n,o){var i=(t||o().question.concernedFollowers[e]||{}).next;return n({id:e,API:(0,r.Z)({types:m.GET_CONCERNED_UPVOTERS},i?{endpoint:i}:{endpoint:"answers/".concat(e,"/concerned_upvoters"),query:{include:l()({data:[{answer_count:!0,articles_count:!0,follower_count:!0,gender:!0,is_followed:!0,is_following:!0,badge:!0}]}),limit:h.VZ,offset:0}}),NOTIFICATION:!1,schema:s.l.USER_ARRAY})}}(e,p)).then((function(n){var o=n.payload,r=o.paging,i=o.data;return r.isEnd||!i.length?t(R(e,d)):n}),(function(){return t(R(e,d))}))}}function O(e){return function(e,t){return{API:{types:m.GET,endpoint:"answers/".concat(e),query:{include:t||Z}},schema:s.l.ANSWER}}(e,l()({reshipment_settings:!0,comment_permission:!0}))}function D(e){return function(t,n){var r,i=n(),a=i.currentUser,c=i.entities,s=c.answers[e]||{},u=s.question.questionType,l=c.users[a],d=l.isAdvertiser,p=l.isOrg,h="nobody"!==s.collapsedBy;return t({id:e,answer:s,collapsedBy:r=h?"nobody":d&&"commercial"===u?"advertiser":p?"org":"community",API:{types:m.COLLAPSE,endpoint:"answers/".concat(e,"/actions/collapse"),method:h?"DELETE":"POST"},UPDATE:{request:{answers:(0,o.Z)({},e,{collapsedBy:r,isSticky:!1})},failure:{answers:(0,o.Z)({},e,{collapsedBy:s.collapsedBy,isSticky:s.isSticky})}}})}}function B(e){return{API:{types:m.GET_COMMENT_PERMISSION,endpoint:"answers/".concat(e),query:{include:l()({can_comment:!0,comment_permission:!0})}},UPDATE:{success:function(t){var n=t.canComment,r=t.commentPermission;return{answers:(0,o.Z)({},e,{canComment:n,commentPermission:r})}}}}}function P(e){return function(t,n){var i,a=n().entities,c=(a.answers[e]||{}).isSticky,s=Object.values(a.answers).find((function(e){return e.isSticky})),u={};return i=c?"已取消当前精选回答。":s?"已设置为精选，之前的精选回答将被替换。":"已设置为精选，刷新后回答将置顶",s&&(u[s.id]={isSticky:!1}),t({id:e,API:{types:m.STICK,endpoint:"answers/".concat(e,"/actions/stick"),method:c?"DELETE":"POST"},UPDATE:{request:{answers:(0,r.Z)((0,o.Z)({},e,{isSticky:!c}),u)},failure:{answers:(0,o.Z)({},e,{isSticky:c})}},NOTIFICATION:{success:i,failure:function(e){return e.message}}})}}function k(e,t){return function(n,r){var i=r(),c=i.currentUser,u=i.entities,l=u.users,d=u.questions,p=l[c]||{},h=d[e]||{};return n({API:{types:m.ADD,method:"POST",endpoint:t.publishAt?"questions/".concat(e,"/scheduled-answer"):"questions/".concat(e,"/answers"),query:{include:Z},body:(0,a.decamelizeKeys)(t),fetchOptions:{zsAutoSignature:!1}},schema:s.l.ANSWER,id:e,question:h,UPDATE:{success:function(t){var n=h.answerCount;return"commercial"!==h.questionType&&n++,{users:(0,o.Z)({},c,{answerCount:p.answerCount+1}),questions:(0,o.Z)({},e,{answerCount:n,relationship:{myAnswer:{answerId:t.id,isDeleted:!1},isFollowing:!0}}),drafts:(0,o.Z)({},"question_".concat(e),null)}}}})}}function x(e,t){return function(n,c){var u=c().entities,l=u.answers,d=u.drafts,p=l[e];return n({API:{types:m.UPDATE,method:"PUT",endpoint:"answers/".concat(e),query:{include:Z},body:(0,a.decamelizeKeys)(t),fetchOptions:{zsAutoSignature:!1}},schema:s.l.ANSWER,UPDATE:{request:{answers:(0,o.Z)({},e,t),drafts:(0,o.Z)({},"question_".concat(p.question.id),null)},success:function(t){return{answers:(0,o.Z)({},e,(0,i.Z)((0,r.Z)({},t),{rewardInfo:(0,i.Z)((0,r.Z)({},t.rewardInfo),{rewardMemberCount:p.rewardInfo.rewardMemberCount,rewardTotalMoney:p.rewardInfo.rewardTotalMoney})})),drafts:(0,o.Z)({},"question_".concat(p.question.id),null)}},failure:{answers:(0,o.Z)({},e,p),drafts:d}}})}}function L(e){return{id:e,API:{root:d.Z.fetchRoot.api,endpoint:"/kmqa/answers/".concat(e,"/paid_content"),query:{include:l()({goods_card:!0,btn_info:!0,za_info:!0,ab_param:!0,benefits_pics:!0})},types:m.LOAD_MARKET_ANSWER_PAID_CONTENT}}}function U(e){return{id:e,API:{types:m.GET_SETTINGS,endpoint:"/answers/".concat(e,"/settings")}}}function F(e,t,n){return{type:v.UPDATE_SETTINGS_DISCLAIMER,id:e,payload:{status:t,type:n}}}function M(e,t){var n,o=t.id,r=null===(n=e.answers)||void 0===n?void 0:n.simpleConcernedUpvoters[o];return r?r.ids.map((function(t){return(0,f.np)(e,{id:t})})):null}function G(e){if(!e||!e.relevantInfo)return!1;var t=e.relevantInfo.relevantType;return["self_commercial","self_community"].includes(t)}function z(e){if(!e||!e.relevantInfo)return!1;var t=e.relevantInfo.relevantType;return["brand_special","brand_best"].includes(t)}function H(e){if(!e||!e.relevantInfo)return!1;var t=e.relevantInfo.relevantType;return["brand_answer","brand_special","brand_best"].includes(t)}function q(e,t){var n,o;return null===(n=e.answers)||void 0===n||null===(o=n.paidContent)||void 0===o?void 0:o[t]}t.ZP=(0,c.combineReducers)({voters:(0,h.Fd)(m.GET_VOTERS),copyrightApplicants:(0,h.Fd)(m.GET_COPYRIGHT_APPLICANTS),favlists:(0,h.Fd)(m.GET_FAVLISTS),newAnswer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===m.ADD.success?t.payload:e},entityWords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===m.LOAD_ANSWER_SEARCH_ENTITY.success){var n=t.meta,a=t.payload,c=void 0===a?{}:a,s=c.searchWords;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,s))}return t.type===m.LOAD_ANSWER_SEARCH_ENTITY.failure&&window.Raven.captureException(t.err,{logger:"searchEntityError",extra:{id:t.meta,type:"answer"}}),e},concernedUpvoters:(0,h.Fd)(m.GET_CONCERNED_UPVOTERS),simpleConcernedUpvoters:(0,h.Fd)(m.GET_SIMPLE_CONCERNED_UPVOTERS),paidContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===m.LOAD_MARKET_ANSWER_PAID_CONTENT.request){var n=t.id;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,{isRequesting:!0}))}if(t.type===m.LOAD_MARKET_ANSWER_PAID_CONTENT.success){var a=t.id;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,{isRequesting:!1,result:t.payload}))}if(t.type===m.LOAD_MARKET_ANSWER_PAID_CONTENT.failure){var c=t.id;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c,{isRequesting:!1,error:!0}))}return e},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===m.GET_SETTINGS.success){var n=t.id,a=t.payload;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,a))}if(t.type===v.UPDATE_SETTINGS_DISCLAIMER){var c=t.id,s=t.payload,u=s.status,l=s.type;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c,(0,i.Z)((0,r.Z)({},e[c]),{disclaimerInfo:[{type:l,status:u}]})))}return e}})},26931:function(e,t,n){"use strict";n.d(t,{Id:function(){return Z},Pt:function(){return m},Sb:function(){return g},V7:function(){return E},VA:function(){return h},cg:function(){return T},k5:function(){return v},md:function(){return C}});var o=n(71103),r=n(88483),i=n(52626),a=n(15390),c=n(74480),s=n.n(c),u=n(60594),l=n(96053),d=n(24316),p=n(5625),h=(0,u.FH)("article",["LIKE","VOTE","GET_VOTERS","GET_COMMENT_PERMISSION","GET_CONCERNED_UPVOTERS"]),f={up:1,down:-1,neutral:0};function m(e,t,n){return function(i,a){var c,s=a().entities.articles[e],u=("koc"===n?s.article:s)||{},l=u.voteupCount,p=u.votePosting,m=u.voting;if(c=-1===m&&"neutral"===t||0===m&&"down"===t?l:Math.max(l+f[t],0),!p)return i({id:e,API:{types:h.VOTE,endpoint:"articles/".concat(e,"/voters"),method:"POST",body:{voting:f[t]}},meta:{id:e,beforeVoting:m},UPDATE:{request:{articles:(0,o.Z)({},e,{voteupCount:c,voting:f[t],votePosting:!0})},success:function(t){return"koc"===n?{articles:(0,o.Z)({},e,{votePosting:!1,article:(0,r.Z)({},t)})}:{articles:(0,o.Z)({},e,(0,r.Z)({votePosting:!1},t))}},failure:{articles:(0,o.Z)({},e,(0,r.Z)({votePosting:!1},s))}},NOTIFICATION:{failure:d.XR}})}}function v(e){return function(t,n){var r=n().entities.articles[e],i=r.voteupCount,a=r.voting,c=1===a?i-1:i+1;return t({id:e,API:{types:h.LIKE,endpoint:"articles/".concat(e,"/likers"),method:1===a?"delete":"post"},UPDATE:{request:{articles:(0,o.Z)({},e,{voteupCount:Math.max(c,0),voting:1===a?0:1})},success:function(t){return{articles:(0,o.Z)({},e,t)}},failure:{articles:(0,o.Z)({},e,r)}},NOTIFICATION:{failure:d.XR}})}}function Z(e){return function(t,n){var o=n().articles,i=((void 0===o?{}:o).voters[e]||{}).next;return t({id:e,API:(0,r.Z)({types:h.GET_VOTERS},i?{endpoint:i}:{endpoint:"articles/".concat(e,"/likers"),query:{include:s()({data:[{answer_count:!0,articles_count:!0,follower_count:!0,gender:!0,is_followed:!0,is_following:!0,badge:!0}]}),offset:0,limit:l.VZ}}),schema:a.l.USER_ARRAY})}}function g(e){return{id:e,API:{types:h.GET_CONCERNED_UPVOTERS,endpoint:"articles/".concat(e,"/concerned_upvoters"),query:{limit:5,offset:0}},NOTIFICATION:!1,schema:a.l.USER_ARRAY}}function E(e,t){var n,o,r=t.id,i=null===(n=e.articles)||void 0===n||null===(o=n.concernedUpvoters)||void 0===o?void 0:o[r];return i?i.ids.map((function(t){return(0,p.np)(e,{id:t})})):null}var T=function(e){return function(t,n){var r=n().entities.articles[e].isLiked;return t({API:{types:h.LIKE,endpoint:"/articles/".concat(e,"/like"),method:r?"DELETE":"POST"},meta:{id:e},UPDATE:{success:function(){return{articles:(0,o.Z)({},e,{isLiked:!r})}}}})}};function C(e){return{API:{types:h.GET_COMMENT_PERMISSION,endpoint:"articles/".concat(e),query:{include:s()({can_comment:!0,comment_permission:!0})}},UPDATE:{success:function(t){var n=t.canComment,r=t.commentPermission;return{articles:(0,o.Z)({},e,{canComment:n,commentPermission:r})}}}}}t.ZP=(0,i.combineReducers)({voters:(0,l.Fd)(h.GET_VOTERS),concernedUpvoters:(0,l.Fd)(h.GET_CONCERNED_UPVOTERS)})},62740:function(e,t,n){"use strict";n.d(t,{ZP:function(){return u},c1:function(){return s}});var o=n(71103),r=n(88483),i=n(16600),a=n(60594),c=(0,r.Z)({},(0,a.FH)("banner",["GET","GET_BRANDTRACK"]),(0,a.co)("banner",["CLOSE"]));function s(e){var t=e.type,n=e.id;return{API:{types:c.GET_BRANDTRACK,endpoint:"/brand/track",query:{content_type:t,url_token:n}},NOTIFICATION:!1,FAILSAFE:!0}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===c.GET.success){var n=t.id,a=t.location,s=t.payload.banner;e=(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),(0,o.Z)({},a,{banner:s,isDrained:!0}))))}if(t.type===c.CLOSE){var u=t.id,l=t.location;e=(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},u,(0,i.Z)((0,r.Z)({},e[u]),(0,o.Z)({},l,null))))}return e}},51944:function(e,t,n){"use strict";n.d(t,{PQ:function(){return u},RD:function(){return c},ZP:function(){return d}});var o=n(71103),r=n(88483),i=n(16600),a=(0,n(60594).FH)("brand",["LOAD_CONTENT_PLUGIN"]).LOAD_CONTENT_PLUGIN;function c(e,t){var n={contentType:e,contentToken:t};return{FAILSAFE:!0,API:{types:Object.values(a),endpoint:"brand/content/plugin",query:n},meta:n}}var s=function(e){var t=e.contentType,n=e.contentToken;return"".concat(t,"_").concat(n)},u=function(e,t){var n,o=e.brand,r=t.contentType,i=t.contentToken;return null==o||null===(n=o.contentPlugin)||void 0===n?void 0:n[s({contentType:r,contentToken:i})]},l={contentPlugin:{}};function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;if(n===a.success){var u=e.contentPlugin,d=t.meta,p=s(d);return(0,i.Z)((0,r.Z)({},e),{contentPlugin:(0,i.Z)((0,r.Z)({},u),(0,o.Z)({},p,c))})}return e}},77209:function(e,t,n){"use strict";n.d(t,{PI:function(){return d},ZP:function(){return f},hU:function(){return l},il:function(){return u},o5:function(){return p}});var o=n(88483),r=n(16600),i=n(59083),a=n(10754),c=n(60594),s=(0,o.Z)({},(0,c.FH)("captcha",["GET","GET_V2","PUT_V2"]),(0,c.co)("captcha",["RESET_CAPTCHA_INFO","CAPTCHA_EXPIRES","RESET_CAPTCHA_V2"]));function u(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{API:{types:s.GET_V2,endpoint:"v3/oauth/captcha/v2",method:"GET",query:{type:e},fetchOptions:{zsAutoSignature:!1}},NOTIFICATION:t}}function l(){return{type:s.RESET_CAPTCHA_V2}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var c,u=(null!==(c=(0,a.Uh)(r()))&&void 0!==c?c:{}).isAppleDevice;return n({API:(0,o.Z)({types:s.PUT_V2,endpoint:"v3/oauth/captcha/v2",method:"PUT",fetchOptions:{body:(0,i.Z)({ticket:e})}},u&&{query:{ticket:e}}),NOTIFICATION:t})}}function p(){return{type:s.RESET_CAPTCHA_INFO}}var h={captchaNeeded:!1,captchaValidated:!1};function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=arguments.length>1?arguments[1]:void 0,i=n.type,a=n.payload;return i===s.GET_V2.success?(0,r.Z)((0,o.Z)({},t),{v2:a,captchaNeeded:Boolean(null===(e=a.script)||void 0===e?void 0:e.length),captchaValidated:!1}):i===s.PUT_V2.success?(0,r.Z)((0,o.Z)({},t),{captchaNeeded:!a.success,captchaValidated:a.success}):i===s.RESET_CAPTCHA_INFO?(0,r.Z)((0,o.Z)({},h),{captchaValidated:t.captchaValidated,v2:t.v2}):i===s.RESET_CAPTCHA_V2?(0,r.Z)((0,o.Z)({},t),{captchaValidated:!1}):t}},95510:function(e,t,n){"use strict";n.d(t,{Ok:function(){return b},vn:function(){return I},JB:function(){return A},ZP:function(){return Y},Rn:function(){return F},$Z:function(){return U},sT:function(){return P},ii:function(){return B},tw:function(){return D},fb:function(){return R},xY:function(){return N},wh:function(){return G},N1:function(){return _},Vq:function(){return k},RW:function(){return x},bG:function(){return O},Hf:function(){return w},BI:function(){return L}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(12856),s=n(31922),u=n.n(s),l=n(65468),d=n.n(l),p=n(96979),h=n(18585),f=n(70175);var m=n(60594),v=n(82054),Z=n(33585),g=n(35987),E=(0,m.co)("chat",["UPDATE_INBOX"]),T=function(){return function(e){return e((0,v.pU)(!0)).then((function(t){return t.payload.strangerMessage.switch?e((0,Z.v)(!0)):Promise.resolve()}))}},C=function(e){var t=e.senderId,n=e.isRead;return function(e,r){var i=r(),a=i.entities,c=i.chat,s=a.chats[t],u=[],l=c.inbox.strangers||{};if(l.result&&(u=l.result),s){var d=s.unreadCount,p=void 0===d?0:d;return n?u.includes(t)?e((0,g.pP)(!1)):e((0,g.cs)(-1*p)):u.includes(t)?e((0,g.pP)(!0)):e((0,g.cs)(1)),e({type:E.UPDATE_INBOX,UPDATE:{update:{chats:(0,o.Z)({},t,{unreadCount:n?0:p+1})}}})}return e(T())}},A=(0,r.Z)({},(0,m.FH)("chat",["GET_HISTORY_MESSAGES","GET_LATEST_MESSAGES","SEND_MESSAGE","SEND_ECOM_MESSAGE","SET_MESSAGE_READ","DELETE_MESSAGE","DELETE_MESSAGE_THREAD","GET_ECOM_EVENT","GET_ECOM_COUPON","GET_ECOM_PROFILE","SEND_ECOM_SUBMIT"]),(0,m.co)("chat",["ADD_NEW_MESSAGE","INPUT_MESSAGE","ADD_TEMP_IMAGE_MESSAGE","ADD_TEMP_ECOM_CARD_MESSAGE","SET_IMAGE_SEND_FAILURE","DELETE_LOCAL_MESSAGE"]));function _(e){var t=e.senderId,n=e.inputValue;return{type:A.INPUT_MESSAGE,meta:{inputValue:n,senderId:t}}}function y(e){return!!e&&new RegExp(/<a href="https:\/\/www.zhihu.com\/inbox\/+[\s\S]*?is_ecom=1/).test(e)}function S(e){var t=e.contentType,n=e.receiverId,o=e.data,a=e.tempMessageId||d()("tempMessageId_"),c=null;return t===p.wF.text&&(c=(0,h.Wf)(o.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"))),{receiverId:n,data:(0,i.Z)((0,r.Z)({userType:"receiver",type:"message",createdTime:Date.now(),contentType:t,id:a},o),{richText:c})}}function I(e,t,n,o,r){var i={id:n,image:{height:o,width:r,url:t}},a=S({contentType:p.wF.image,receiverId:e,data:i,tempMessageId:n});return{type:A.ADD_TEMP_IMAGE_MESSAGE,meta:a}}function b(e,t,n){var o={id:t,ecomCard:{cardType:n}},r=S({contentType:p.wF.ecomcard,receiverId:e,data:o,tempMessageId:t});return{type:A.ADD_TEMP_ECOM_CARD_MESSAGE,meta:r}}function w(e){var t=e.receiverId,n=e.tempMessageId,o=e.file;return{type:A.SET_IMAGE_SEND_FAILURE,meta:{receiverId:t,tempMessageId:n,file:o}}}function R(e){var t=e.senderId,n=e.clientScene;return function(e,o){var i=(o().chat.chats[t]||{}).nextApiUrl,a=(void 0===i?"":i).split("?")[1],s=a?{endpoint:"/chat?".concat(a)}:{endpoint:"/chat",query:(0,c.decamelizeKeys)(u()({senderId:t,clientScene:n}))};return e({API:(0,r.Z)({types:A.GET_HISTORY_MESSAGES},s),meta:{senderId:t}})}}function N(e){var t=e.senderId,n=e.clientScene;return function(e){var o={endpoint:"/chat",query:(0,c.decamelizeKeys)(u()({senderId:t,clientScene:n}))};return e({API:(0,r.Z)({types:A.GET_LATEST_MESSAGES},o),meta:{senderId:t}})}}function O(e){var t=e.contentType,n=e.receiverId,o=e.data,i=e.tempMessageId,a=e.sourceType,c=e.sourceId,s=e.replySource,u=S({contentType:t,receiverId:n,data:o,tempMessageId:i});return{API:{types:A.SEND_MESSAGE,endpoint:"/chat",method:"POST",body:(0,r.Z)({content_type:p.YX[t],receiver_id:n},a&&{source_type:a},c&&{source_id:c},s&&{reply_source:s},o)},meta:u}}function D(e){return{API:{types:A.GET_ECOM_PROFILE,root:f.Z.fetchRoot.api,endpoint:"api/v4/crm/chat/plugin/profile/".concat(e),method:"GET"}}}function B(e){var t=e.templateType,n=void 0===t?2:t,o=e.senderId;return{API:{types:A.GET_ECOM_EVENT,root:f.Z.fetchRoot.api,endpoint:"api/v4/crm/chat/plugin/clue_activities?template_type=".concat(n),method:"GET"},meta:{senderId:o}}}function P(){return{API:{types:A.GET_ECOM_COUPON,root:f.Z.fetchRoot.api,endpoint:"api/v4/crm/chat/plugin/coupons",method:"GET"}}}function k(e){var t=e.contentType,n=e.id,o=e.token,r=e.data,i=e.tempMessageId,a=r.receiverId,c=r.cardType,s=S({contentType:t,receiverId:a,data:r,tempMessageId:i});return{API:{types:A.SEND_ECOM_MESSAGE,root:f.Z.fetchRoot.api,endpoint:1===c?"api/v4/crm/chat/plugin/clue_activities/".concat(o,"/action/send"):"api/v4/crm/chat/plugin/coupons/".concat(n,"/action/send"),method:"POST",body:{receiver_id:a}},meta:s}}function x(e){var t=e.token,n=e.data.phone;return{API:{types:A.SEND_ECOM_SUBMIT,root:f.Z.fetchRoot.api,endpoint:"api/v4/crm/chat/plugin/clue_activities/".concat(t,"/action/submit"),method:"POST",body:{phone_no:n}}}}function L(e){return function(t){t(C({senderId:e,isRead:!0})),t({API:{types:A.SET_MESSAGE_READ,endpoint:"/messages/read/".concat(e),method:"PUT"}})}}function U(e,t){return{API:{types:A.DELETE_MESSAGE,endpoint:"/messages/".concat(e),method:"DELETE"},meta:{messageId:e,senderId:t}}}function F(e,t){return{type:A.DELETE_LOCAL_MESSAGE,meta:{messageId:e,senderId:t}}}function M(e,t){return e.filter((function(e){return e.id!==t}))}function G(e,t){var n=e.content,o=void 0===n?{}:n,i=e.meta,a=void 0===i?{}:i,s=a.sender_id,u=a.content_type,l=a.created_at,d=a.id,f=e.extra,m=void 0===f?{}:f,v=m.message_type,Z=m.extra_content,g=m.associate_id,E=m.unfriendly,T={userType:t!==s?"sender":"receiver",type:v||"message",createdTime:l,contentType:u,id:d,status:p.Gs.success,extraContent:Z,unfriendly:Boolean(Number(E)),associateId:g,isEcomWelcomeCard:!1};return T[T.contentType]=(0,c.camelizeKeys)(o[T.contentType]),u===p.wF.text&&(T.richText=(0,h.Wf)(T.text),T.isEcomWelcomeCard=y(T.richText)),u===p.wF.ecomcard&&(T.ecomCard=(0,r.Z)({},o.ecom_card)),function(e){e(C({senderId:s})),e({type:A.ADD_NEW_MESSAGE,meta:{messageInfo:T,senderId:s}})}}function z(e){var t=p.HG[e.contentType],n="text"===t?(0,h.Wf)(e.text||e.content):null;return(0,i.Z)((0,r.Z)({},e),{contentType:t,createdTime:1e3*e.createdTime,status:p.Gs.success,richText:n,isEcomWelcomeCard:"text"===t&&y(e.text||e.content)})}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!(null==e?void 0:e.length))return{formattedMessages:[],lastTimeStamp:t};var n=t||1e3*e[0].createdTime,o=e.map((function(t,o){var a=(0,i.Z)((0,r.Z)({},t),{showTime:!1}),c=1e3*a.createdTime;if(Math.abs(n-c)>p.X||n===c)a.showTime=!0;else{var s=e[o+1];s&&Math.abs(c-1e3*s.createdTime)>p.X&&(a.showTime=!0)}return n=c,z(a)})).reverse();return{formattedMessages:o,lastTimeStamp:n}}var q=function(e){return(null==e?void 0:e.messages)||[]},V=function(e){var t=(e||{}).lastTimeStamp;return{lastTimeStamp:void 0===t?null:t}};function X(e,t,n,o){for(var c=(0,a.Z)(e),s=(0,r.Z)({},n),u=o,l=e.length-1;l>=0;l--)if(e[l].id===t){1e3*s.createdTime-u>=p.X?(s.showTime=!0,u=1e3*s.createdTime):s.showTime=!1,c[l]=(0,i.Z)((0,r.Z)({},z(s)),{tempMessageId:t});break}return{realMessageList:c,lastTimeStamp:u}}function W(e,t,n){for(var o=(0,a.Z)(e),r=e.length-1;r>=0;r--)if(e[r].id===t){o[r].image.url=n;break}return o}function K(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,a.Z)(e),c=n.file,s=e.length-1;s>=0;s--)if(e[s].id===t){o[s]=(0,i.Z)((0,r.Z)({},o[s],c&&{file:c}),{status:p.Gs.failure});break}return o}function j(e,t){var n=(0,r.Z)({},e),o=t;return n.createdTime-o>=p.X?(n.showTime=!0,o=n.createdTime):n.showTime=!1,{message:n,lastTimeStamp:o}}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===A.GET_HISTORY_MESSAGES.request){var n=t.meta.senderId;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{isLoading:!0})))}if(t.type===A.GET_HISTORY_MESSAGES.success||t.type===A.GET_LATEST_MESSAGES.success){var c=t.payload,s=c.warning,u=void 0===s?{}:s,l=c.paging,d=c.data,h=l.isEnd,f=l.next,m=d.receiver,v=d.sender,Z=d.messages,g=v.id,E=e[g],T=(null==E?void 0:E.sender)?q(E):[],C=V(E).lastTimeStamp,_=H(Z,C),y=_.formattedMessages,S=_.lastTimeStamp,I=t.type===A.GET_LATEST_MESSAGES.success?(0,a.Z)(y):(0,a.Z)(y).concat((0,a.Z)(T));return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},g,{receiver:m,sender:v,messages:I,isLoading:!1,isEnd:h,nextApiUrl:f,lastTimeStamp:S,inputValue:e[g].inputValue,warning:u}))}if(t.type===A.ADD_NEW_MESSAGE){var b=t.meta,w=b.senderId,R=b.messageInfo,N=e[w],O=q(N),D=V(N).lastTimeStamp,B=j(R,D),P=B.message,k=B.lastTimeStamp;return O.length&&O[O.length-1].id===P.id?(0,r.Z)({},e):(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},w,(0,i.Z)((0,r.Z)({},e[w]),{messages:(0,a.Z)(O).concat([P]),lastTimeStamp:k})))}if(t.type===A.INPUT_MESSAGE){var x=t.meta,L=x.senderId,U=x.inputValue;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},L,(0,i.Z)((0,r.Z)({},e[L]),{inputValue:U})))}if(t.type===A.ADD_TEMP_IMAGE_MESSAGE||t.type===A.ADD_TEMP_ECOM_CARD_MESSAGE){var F=t.meta.receiverId;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},F,(0,i.Z)((0,r.Z)({},e[F]),{messages:(0,a.Z)(e[F].messages).concat([(0,i.Z)((0,r.Z)({},t.meta.data),{status:p.Gs.loading})])})))}if(t.type===A.SET_IMAGE_SEND_FAILURE){var G=t.meta,z=G.receiverId,Y=G.tempMessageId,Q=G.file,J=e[z].messages,$=K(J,Y,{file:Q});return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},z,(0,i.Z)((0,r.Z)({},e[z]),{messages:$})))}if(t.type===A.SEND_MESSAGE.request||t.type===A.SEND_ECOM_MESSAGE.request){var ee=t.meta,te=ee.receiverId,ne=ee.data.contentType;if(ne===p.wF.image){var oe=t.meta.data,re=oe.image,ie=re.url,ae=oe.id,ce=e[te].messages,se=W(ce,ae,ie);return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},te,(0,i.Z)((0,r.Z)({},e[te]),{messages:se})))}if(ne===p.wF.ecomcard&&1===t.meta.data.cardType){var ue=e[te].messages;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},te,(0,i.Z)((0,r.Z)({},e[te]),{messages:ue})))}return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},te,(0,i.Z)((0,r.Z)({},e[te],ne===p.wF.text&&{inputValue:""}),{messages:(0,a.Z)(e[te].messages).concat([(0,i.Z)((0,r.Z)({},t.meta.data),{status:p.Gs.loading})])})))}if(t.type===A.SEND_MESSAGE.success||t.type===A.SEND_ECOM_MESSAGE.success){var le=t.payload,de=le.info,pe=t.meta,he=pe.receiverId,fe=pe.data,me=fe.id,ve=fe.contentType,Ze=e[he],ge=V(Ze).lastTimeStamp,Ee=Ze.messages,Te=X(Ee,me,de,ge),Ce=Te.realMessageList,Ae=Te.lastTimeStamp;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},he,(0,i.Z)((0,r.Z)({},e[he],ve===p.wF.text&&{inputValue:""}),{messages:Ce,lastTimeStamp:Ae})))}if(t.type===A.SEND_MESSAGE.failure||t.type===A.SEND_ECOM_MESSAGE.failure){var _e=t.meta,ye=_e.receiverId,Se=_e.data,Ie=Se.id,be=e[ye].messages,we=K(be,Ie);return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},ye,(0,i.Z)((0,r.Z)({},e[ye]),{messages:we})))}if(t.type===A.DELETE_MESSAGE.success||t.type===A.DELETE_LOCAL_MESSAGE){var Re=t.meta,Ne=Re.messageId,Oe=Re.senderId,De=M(e[Oe].messages,Ne);return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},Oe,(0,i.Z)((0,r.Z)({},e[Oe]),{messages:De})))}if(t.type===A.GET_ECOM_PROFILE.success){var Be=t.payload.receiver;return(0,i.Z)((0,r.Z)({},e),{isEcomMerchant:Boolean(Be.isMerchant)})}return e}},35987:function(e,t,n){"use strict";n.d(t,{ZP:function(){return p},cs:function(){return l},pP:function(){return d}});var o=n(88483),r=n(16600),i=n(60594),a=n(82054),c=n(51818),s={newCount:0,strangerMessageSwitch:!1,strangerMessageUnread:!1,friendCount:0},u=(0,i.co)("chat",["UPDATE_TOTAL_UNREAD_COUNT","CHANGE_STRANGER_MESSAGE_UNREAD_STATUS"]);function l(e){return{type:u.UPDATE_TOTAL_UNREAD_COUNT,meta:{count:e}}}function d(e){return{type:u.CHANGE_STRANGER_MESSAGE_UNREAD_STATUS,meta:{status:e}}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.Hp.GET_RECENTS.success:var n=t.payload,i=n.newCount,l=n.strangerMessage,d=l.switch,p=l.unread;return(0,r.Z)((0,o.Z)({},e),{newCount:i,strangerMessageSwitch:d,strangerMessageUnread:p});case c.Hp.GET_FRIENDS.success:return(0,r.Z)((0,o.Z)({},e),{friendCount:t.totals});case u.UPDATE_TOTAL_UNREAD_COUNT:var h=e.newCount,f=t.meta,m=f.count,v=void 0===m?0:m,Z=h+v;return(0,r.Z)((0,o.Z)({},e),{newCount:Z>0?Z:0});case u.CHANGE_STRANGER_MESSAGE_UNREAD_STATUS:var g=t.meta.status;return(0,r.Z)((0,o.Z)({},e),{strangerMessageUnread:g});default:return e}}},69800:function(e,t,n){"use strict";var o=n(88483),r=n(16600),i=n(49603),a=n.n(i),c={isFetching:!1,isDrained:!1,isPrevDrained:!1,result:[],next:null,key:null};t.Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},i=e.request,s=e.success,u=e.failure;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,l=arguments.length>1?arguments[1]:void 0;switch(l.type){case t:return c;case i:return(0,r.Z)((0,o.Z)({},e),{isFetching:!0});case s:var d=l.key,p=l.result,h=l.next,f=l.isDrained,m=l.isPrevDrained,v=d!==e.key;return(0,r.Z)((0,o.Z)({},e),{result:v?p:a()(e.result,p),key:d,next:h,isDrained:f||p.length<10,isPrevDrained:m,isFetching:!1});case u:return(0,r.Z)((0,o.Z)({},e),{isFetching:!1});default:return n(e,l)}}}},51818:function(e,t,n){"use strict";n.d(t,{Hp:function(){return i}});n(15390);var o=n(60594),r=n(69800),i=(0,o.FH)("chat",["GET_FRIENDS"]);t.ZP=(0,r.Z)(i.GET_FRIENDS)},82054:function(e,t,n){"use strict";n.d(t,{Hp:function(){return l},pU:function(){return d}});var o=n(88483),r=n(16600),i=n(61565),a=n(69031),c=n(60594),s=n(69800),u=n(95510),l=(0,c.FH)("chat",["GET_RECENTS"]),d=function(e){return function(t,n){var o=n().chat.inbox.recents.next,r=e||!o?"/inbox":o;return t({API:{types:l.GET_RECENTS,endpoint:r},schema:a.e})}};t.ZP=(0,s.Z)(l.GET_RECENTS,null,(function(e,t){if(t.type===u.JB.SEND_MESSAGE.success){var n=e.result,a=t.meta.receiverId;return n.indexOf(a)>=0?e:(0,r.Z)((0,o.Z)({},e),{result:[a].concat((0,i.Z)(n))})}if(t.type===u.JB.DELETE_MESSAGE_THREAD.success){var c=t.meta.chatId;return(0,r.Z)((0,o.Z)({},e),{result:e.result.filter((function(e){return e!==c}))})}return e}))},33585:function(e,t,n){"use strict";n.d(t,{v:function(){return l}});var o=n(88483),r=n(16600),i=n(69031),a=n(60594),c=n(69800),s=n(95510),u=(0,a.FH)("chat",["GET_STRANGERS"]),l=function(e){return function(t,n){var o=n().chat.inbox.strangers.next,r=e||!o?"/stranger_inbox":o;return t({API:{types:u.GET_STRANGERS,endpoint:r},schema:i.e})}};t.Z=(0,c.Z)(u.GET_STRANGERS,null,(function(e,t){if(t.type===s.JB.SEND_MESSAGE.success){var n=e.result,i=t.meta.receiverId;return n.indexOf(i)<0?e:(0,r.Z)((0,o.Z)({},e),{result:n.filter((function(e){return e!==i}))})}if(t.type===s.JB.DELETE_MESSAGE_THREAD.success){var a=t.meta.chatId;return(0,r.Z)((0,o.Z)({},e),{result:e.result.filter((function(e){return e!==a}))})}return e}))},69031:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var o=n(17907),r=n(15390),i=new o.fK.Entity("chats",{participant:r.l.USER},{idAttribute:function(e){return e.participant.id}}),a=new o.fK.Array(i)},38174:function(e,t,n){"use strict";n.d(t,{e:function(){return h},u:function(){return p}});var o=n(71103),r=n(88483),i=n(16600),a=n(12856),c=n(59083),s=n(60594),u=n(91355),l=(0,r.Z)({},(0,s.FH)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),d=function(e){return e===u.R8?"answers":e===u.oP?"pins":e===u.zs?"articles":null},p=function(e,t,n,r){return{API:{types:l.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:(0,c.z)((0,a.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:r}))},UPDATE:{success:function(n){var r=d(e);return r?(0,o.Z)({},r,(0,o.Z)({},t,n)):null}}}},h=function(e,t,n,s){return{API:{types:l.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:(0,c.z)((0,a.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:s}))},UPDATE:{success:function(n){var a=d(e);return a?(0,o.Z)({},a,(0,o.Z)({},t,(0,i.Z)((0,r.Z)({},n),{annotationDetail:null}))):null}}}}},95193:function(e,t,n){"use strict";n.d(t,{Hp:function(){return p},ZP:function(){return v},Nn:function(){return Z}});var o=n(88483),r=n(16600),i=n(61565),a=n(52626),c=n(85570),s=n(17907),u=n(15390),l=n(60594),d=n(12856),p=(new s.fK.Array(new s.fK.Entity("favlistFeedsByIds",{content:new s.fK.Union({article:u.l.ARTICLE,answer:u.l.ANSWER,pin:u.l.PIN,zvideo:u.l.ZVIDEO,eduCourse:u.l.EDU_COURSE,eduSection:u.l.EDU_SECTION},(function(e){return(0,d.camelize)(e.type)}))},{idAttribute:function(e){var t=e.content,n=t.type,o=t.id;return"".concat(n,"_").concat(o)}})),(0,o.Z)({},(0,l.FH)("collections",["ADD","DELETE","UPDATE","GET_DETAIL","GET_FEEDS","DELETE_FEED_ITEM","CANCEL_DELETE_FEED_ITEM"]))),h=n(65138),f={data:[],paging:{},isLoading:!1};var m=(0,h.V6)(p.GET_FEEDS,{additionalCaseTypes:[p.DELETE_FEED_ITEM.success,p.CANCEL_DELETE_FEED_ITEM.success],additionalCase:function(e,t){return t.type===p.DELETE_FEED_ITEM.success?(0,r.Z)((0,o.Z)({},e),{deletedItems:(0,i.Z)(e.deletedItems||[]).concat([t.deletedItemId])}):t.type===p.CANCEL_DELETE_FEED_ITEM.success?(0,r.Z)((0,o.Z)({},e),{deletedItems:e.deletedItems.filter((function(e){return e!==t.deletedItemId}))}):e}}),v=(0,a.combineReducers)({hot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;if(t.type===c.xb.GET_HOT_FAVLISTS.request)return(0,r.Z)((0,o.Z)({},e),{isLoading:!0});if(t.type===c.xb.GET_HOT_FAVLISTS.success){var n=t.payload,a=n.data,s=n.paging;return{data:(0,i.Z)(e.data).concat((0,i.Z)(a.map((function(e){return e.id})))),paging:s,isLoading:!1}}return t.type===c.xb.GET_HOT_FAVLISTS.failure?(0,r.Z)((0,o.Z)({},e),{paging:(0,r.Z)((0,o.Z)({},e.paging),{isEnd:!0}),isLoading:!1}):e},collectionFeeds:m});function Z(e,t){return t.type===p.ADD.success?(0,r.Z)((0,o.Z)({},e),{totals:e.totals+1,ids:[t.result].concat((0,i.Z)(e.ids))}):t.type===p.DELETE.success?(0,r.Z)((0,o.Z)({},e),{totals:e.totals-1,ids:e.ids.filter((function(e){return e!==t.id}))}):e}},98918:function(e,t,n){"use strict";n.d(t,{As:function(){return p},PG:function(){return d},Pu:function(){return u},bK:function(){return h},ly:function(){return l}});var o=n(71103),r=n(88483),i=n(52626),a=n(15390),c=n(60594),s=n(96053),u=(0,c.FH)("column",["GET","UPDATE_FOLLOW","GET_COLUMN_FOLLOWERS","SUBMIT_REQUEST"]);function l(e){return{API:{types:u.GET,endpoint:"columns/".concat(e),query:{include:"title,intro,description,image_url,articles_count,followers,is_following,last_article.created"}},urlToken:e,schema:a.l.COLUMN}}function d(e){var t=e.title,n=e.intro;return{API:{types:u.SUBMIT_REQUEST,endpoint:"/columns/request",method:"POST",body:{title:t,intro:n}},NOTIFICATION:!1}}function p(e){return function(t,n){var r=n(),i=r.entities,a=i.columns,c=i.users,s=r.currentUser,l=a[e],d=c[s],p=l.isFollowing,h=l.followers,f=p?-1:1;return t({urlToken:s,columnId:e,expect:!p,API:{types:u.UPDATE_FOLLOW,endpoint:"columns/".concat(e,"/followers"),method:p?"DELETE":"POST"},UPDATE:{request:{columns:(0,o.Z)({},e,{isFollowing:!p,followers:h+f}),users:(0,o.Z)({},s,{followingColumnsCount:d.followingColumnsCount+f})},failure:{columns:(0,o.Z)({},e,l),users:(0,o.Z)({},s,c)}}})}}function h(e){return function(t,n){var o=(n().columns.voters[e]||{}).next;return t({id:e,API:(0,r.Z)({types:u.GET_COLUMN_FOLLOWERS},o?{endpoint:o}:{endpoint:"columns/".concat(e,"/followers"),query:{include:"data[*].follower_count,gender,is_followed,is_following",offset:0,limit:s.VZ}}),schema:a.l.USER_ARRAY})}}t.ZP=(0,i.combineReducers)({voters:(0,s.Fd)(u.GET_COLUMN_FOLLOWERS)})},15703:function(e,t,n){"use strict";n.d(t,{I6:function(){return u},ZP:function(){return d},n5:function(){return l}});var o=n(71103),r=n(88483),i=n(16600),a=n(60594),c=n(54048),s=(0,a.FH)("commentPermission",["LOAD_TYPE_RELATED_COMMENT_PERMISSIONS","LOAD_CONTENT_COMMENT_PERMISSION"]);function u(e){return{API:{types:s.LOAD_TYPE_RELATED_COMMENT_PERMISSIONS,endpoint:"/comment_v5/".concat(e,"s/permission")},meta:{type:e}}}function l(e,t){return{API:{types:s.LOAD_CONTENT_COMMENT_PERMISSION,endpoint:"/comment_v5/".concat(e,"s/").concat(t,"/permission")},meta:{type:e,id:t}}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.payload,a=t.meta;switch(t.type){case s.LOAD_TYPE_RELATED_COMMENT_PERMISSIONS.success:var u=a.type;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},u,(0,i.Z)((0,r.Z)({},e[u]),{default:n.data})));case s.LOAD_CONTENT_COMMENT_PERMISSION.success:var l=a.type,d=a.id;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},l,(0,i.Z)((0,r.Z)({},e[l]),(0,o.Z)({},d,(0,c.Qz)(n.data,l)))))}return e}},45051:function(e,t,n){"use strict";n.d(t,{Hc:function(){return C},Ir:function(){return v},J4:function(){return E},KT:function(){return m},TY:function(){return T},YF:function(){return A},j9:function(){return _},rq:function(){return Z},tp:function(){return g}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(12856),s=n(52626),u=n(15390),l=n(96053),d=n(24316),p=n(60594),h=(0,r.Z)({},(0,p.FH)("comment",["GET","GET_COLLAPSED","GET_REVERSE","GET_REVIEWING","GET_CONVERSATION","UPDATE_LIKE","UPDATE_DISLIKE","UPDATE_FEATURED","UPDATE_COLLAPSED","APPROVE","REJECT","DELETE","ADD","GET_MORE_REPLY_COMMENT","GET_CONVERSATION_MORE","GET_STICKERS","GET_COMMENT_WITH_PIC_PERMISSION","LOAD_NOTI_COMMENTS"]),(0,p.co)("comment",["ORDER"])),f={ebook:"book",collection:"favlist"};function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.order,c=void 0===a?"normal":a,s=n.isPrevious,p=void 0!==s&&s,m=n.byComment,v=n.status,Z=void 0===v?"open":v,g=n.commentPattern,E=n.current,T=n.patternLimit,C=void 0===T?20:T,A=arguments.length>3?arguments[3]:void 0;return function(n,a){var s=a().comments,v=s.pagination,T=h.GET;"reviewing"===Z&&(v=s.reviewing,T=h.GET_REVIEWING),"collapsed"===Z&&(v=s.collapsed,T=h.GET_COLLAPSED),"reverse"===c&&"open"===Z&&(v=s.reverse,T=h.GET_REVERSE);var _=v["".concat(e,"_").concat(t)]||{},y=_.next,S=_.previous,I=_.ids,b=(void 0===I?[]:I).length&&(p?S:y),w=0,R=l.VZ;return"bottom"!==g||A||(w=(E-1)*C,R=C,b=!1),n({parentId:t,parentType:e,isPrevious:p,API:(0,i.Z)((0,r.Z)({types:T},b?{endpoint:b}:{endpoint:"".concat(f[e]||e,"s/").concat(t,"/comments"),query:(0,r.Z)({include:"data[*].author",order:c,limit:R},"open"===Z&&m?{byComment:m}:{offset:w,status:Z})}),{headers:{"X-APP-VERSION":"6.42.0"}}),schema:u.l.COMMENT_ARRAY,UPDATE:{failure:function(n){return n&&n.res&&403===n.res.status?(0,o.Z)({},"".concat(e,"s"),(0,o.Z)({},t,{adminClosedComment:!0})):{}}},NOTIFICATION:{key:d.zQ,failure:function(e){return(!e||403!==e.code)&&"获取评论失败，请稍后重试"}}})}}function v(e,t,n,r,i){return function(a,s){var l="".concat(e,"s"),p=(s().entities[l]||{})[t]||{};if(!p.isSubmitting){var m,v,Z=p.commentCount,g=f[e]||e,E="评论发布成功！";if("commercial"===p.questionType&&"censor"===p.commentPermission)E=(null===(m=p.question)||void 0===m||null===(v=m.brand)||void 0===v?void 0:v.toastCommentDescription)||"评论已提交，由品牌筛选后公开";return a({parentType:e,parentId:t,id:i,API:{types:h.ADD,endpoint:"".concat(g,"s/").concat(t,"/comments"),method:"POST",fetchOptions:{zsEncrypt:!0,body:(0,c.decamelizeKeys)({content:n,replyToId:r})}},schema:u.l.COMMENT,UPDATE:{request:(0,o.Z)({},l,(0,o.Z)({},t,{commentCount:Z+1,isSubmitting:!0})),success:(0,o.Z)({},l,(0,o.Z)({},t,{isSubmitting:!1})),failure:(0,o.Z)({},l,(0,o.Z)({},t,{commentCount:Z,isSubmitting:!1}))},NOTIFICATION:{key:d.zQ,success:E,failure:"评论发布失败。"},replyToId:r})}}}function Z(e){return function(t,n){var r=n().entities.comments[e],i=r.voteCount,a=r.voting,c=r.disliked;return t({id:e,API:{types:h.UPDATE_LIKE,endpoint:"comments/".concat(e,"/actions/like"),method:a?"DELETE":"POST"},UPDATE:{request:{comments:(0,o.Z)({},e,{voteCount:i+(a?-1:1),voting:!a,disliked:!!a&&c})},success:function(t){return{comments:(0,o.Z)({},e,t)}},failure:{comments:(0,o.Z)({},e,r)}},NOTIFICATION:{key:d.zQ,failure:d.XR}})}}function g(e,t,n,r){return function(i,a){var c=a().entities.comments[e],s=c.featured,u=c.collapsed;return i({id:e,parentId:t,parentType:n,lastFeaturedIndex:r,expect:!s,API:{types:h.UPDATE_FEATURED,endpoint:"comments/".concat(e,"/actions/feature"),method:s?"delete":"post"},UPDATE:{request:{comments:(0,o.Z)({},e,{featured:!s,collapsed:!!s&&u})},failure:{comments:(0,o.Z)({},e,c)}},NOTIFICATION:{key:d.zQ,failure:d.XR,endpoint:"comments/".concat(e,"/actions/feature"),method:s?"delete":"post"}})}}function E(e,t,n){return function(r,i){var a=i().entities.comments[e],c=a.collapsed,s=a.featured,u=!c;return r({id:e,expect:u,parentType:t,parentId:n,API:{types:h.UPDATE_COLLAPSED,endpoint:"comments/".concat(e,"/actions/collapse"),method:u?"post":"delete"},UPDATE:{request:{comments:(0,o.Z)({},e,{collapsed:u,featured:!u&&s})},failure:{comments:(0,o.Z)({},e,a)}},NOTIFICATION:{key:d.zQ,failure:d.XR}})}}function T(e,t,n){return function(r,i){var a=i().entities,c=a.comments[e],s="".concat(t,"s"),u=a[s][n]||{commentCount:0};return r({id:e,parentId:n,parentType:t,API:{types:h.APPROVE,endpoint:"comments/".concat(e,"/actions/approve"),method:"PUT"},UPDATE:{request:(0,o.Z)({comments:(0,o.Z)({},e,{status:"open",isDelete:!0})},s,(0,o.Z)({},n,{commentCount:u.commentCount+1})),failure:(0,o.Z)({comments:(0,o.Z)({},e,c)},s,(0,o.Z)({},n,u))}})}}function C(e){return function(t,n){var r=n().entities.comments[e],i=r.voting,a=r.voteCount,c=r.disliked,s=!c;return t({id:e,API:{types:h.UPDATE_DISLIKE,endpoint:"comments/".concat(e,"/actions/dislike"),method:c?"DELETE":"POST"},UPDATE:{request:{comments:(0,o.Z)({},e,{disliked:s,voting:!!c&&i,voteCount:s&&i?a-1:a})},failure:{comments:(0,o.Z)({},e,r)}},NOTIFICATION:{key:d.zQ,failure:d.XR}})}}function A(e,t,n){return function(a,c){var s=c(),u=function(e){return{API:{types:h.DELETE,endpoint:"comments/".concat(e),method:"delete"}}}(e),l={UPDATE:{request:{},failure:{}}},p=function(e,t){var n=t.id;return e.entities.comments[n]}(s,{id:e});p&&(l.UPDATE.request.comments=(0,o.Z)({},e,{isDelete:!0}),l.UPDATE.failure.comments=(0,o.Z)({},e,p));var f="".concat(t,"s"),m=(s.entities[f]||{})[n],v=!!p&&p.reviewing;return m&&!v&&(l.UPDATE.request[f]=(0,o.Z)({},n,{commentCount:m.commentCount-1}),l.UPDATE.failure[f]=(0,o.Z)({},n,m)),a((0,i.Z)((0,r.Z)({id:e,collapsed:p&&p.collapsed,reviewing:v,parentType:t,parentId:n},u,l),{NOTIFICATION:{key:d.zQ,failure:d.XR}}))}}function _(e){return{id:e,API:{types:h.GET_CONVERSATION,endpoint:"comments/".concat(e,"/conversation")},schema:u.l.COMMENT_ARRAY,NOTIFICATION:{key:d.zQ,failure:d.XR}}}var y=function(e){var t=e.parentType,n=e.parentId;return"".concat(t,"_").concat(n)};t.ZP=(0,s.combineReducers)({pagination:(0,l.Fd)(h.GET,{mapActionToKey:y,additionalCaseTypes:[h.APPROVE.success,h.ADD.success,h.GET_CONVERSATION.success].concat((0,a.Z)(Object.values(h.UPDATE_FEATURED)),(0,a.Z)(Object.values(h.UPDATE_COLLAPSED))),additionalCase:function(e,t){switch(t.type){case h.APPROVE.success:return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids).concat([t.id])});case h.ADD.success:var n=t.replyToId,o=t.id;if(n&&!o){var c=e.ids.indexOf(n);return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids.slice(0,c+1)).concat([t.result],(0,a.Z)(e.ids.slice(c+1))),newIds:(0,a.Z)(e.newIds.slice(0,c+1)).concat([t.result],(0,a.Z)(e.newIds.slice(c+1)))})}return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids).concat([t.result]),newIds:(0,a.Z)(e.newIds).concat([t.result])});case h.UPDATE_COLLAPSED.request:var s=e.ids,u=s.indexOf(t.id),l=s.slice();return t.expect?l.splice(u,1):l.push(t.id),(0,i.Z)((0,r.Z)({},e),{ids:l,newIds:l,index:u});case h.UPDATE_COLLAPSED.success:return delete e.index,(0,r.Z)({},e);case h.UPDATE_COLLAPSED.failure:var d=e.ids.slice(),p=d.indexOf(t.id);return t.expect?d.splice(p,0,t.id):d.splice(p,1),delete e.index,(0,i.Z)((0,r.Z)({},e),{ids:d,newIds:d});default:return e}}}),collapsed:(0,l.Fd)(h.GET_COLLAPSED,{mapActionToKey:y,additionalCaseTypes:(0,a.Z)(Object.values(h.UPDATE_COLLAPSED)),additionalCase:function(e,t){switch(t.type){case h.UPDATE_COLLAPSED.request:var n=e.ids,o=n.indexOf(t.id),a=n.slice();return t.expect?a.push(t.id):a.splice(o,1),(0,i.Z)((0,r.Z)({},e),{ids:a,newIds:a,index:o});case h.UPDATE_COLLAPSED.success:return delete e.index,(0,r.Z)({},e);case h.UPDATE_COLLAPSED.failure:var c=e.ids,s=e.index,u=c.slice();return t.expect?u.splice(s,1):u.splice(s,0,t.id),delete e.index,(0,i.Z)((0,r.Z)({},e),{ids:c,newIds:u});default:return e}}}),reverse:(0,l.Fd)(h.GET_REVERSE,{mapActionToKey:y,additionalCaseTypes:[h.APPROVE.success,h.ADD.success],additionalCase:function(e,t){switch(t.type){case h.APPROVE.success:return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:[t.id].concat((0,a.Z)(e.ids))});case h.ADD.success:var n=t.replyToId,o=t.id;if(n&&!o){var c=e.ids.indexOf(n);return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,newIds:(0,a.Z)(e.newIds.slice(0,c+1)).concat([t.result],(0,a.Z)(e.newIds.slice(c+1))),ids:(0,a.Z)(e.ids.slice(0,c+1)).concat([t.result],(0,a.Z)(e.ids.slice(c+1)))})}return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids).concat([t.result]),newIds:(0,a.Z)(e.newIds).concat([t.result])});default:return null}}}),reviewing:(0,l.Fd)(h.GET_REVIEWING,{mapActionToKey:y,additionalCaseTypes:[h.APPROVE.success],additionalCase:function(e,t){if(t.type===h.APPROVE.success){var n=e.ids;return n.splice(n.indexOf(t.id),1),(0,i.Z)((0,r.Z)({},e),{ids:n})}return e}}),conversation:(0,l.Fd)(h.GET_CONVERSATION,{additionalCaseTypes:[h.ADD.success].concat((0,a.Z)(Object.values(h.UPDATE_FEATURED))),additionalCase:function(e,t){return t.type===h.ADD.success?(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids).concat([t.payload.id])}):e}}),parent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=y(t);switch(t.type){case h.GET.success:var a=t.payload,c=a.featuredCounts,s=a.collapsedCounts,u=a.reviewingCounts,l=a.commonCounts,d=a.commentStatus;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,{featuredCounts:c,collapsedCounts:s,reviewingCounts:u,commonCounts:l,commentStatus:d}));case h.APPROVE.success:var p=e[n].reviewingCounts-1;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{reviewingCounts:p})));case h.REJECT.success:var f=e[n].reviewingCounts+1;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{reviewingCounts:f})));case h.UPDATE_COLLAPSED.success:var m=e[n]||{};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},m),{collapsedCounts:m.collapsedCounts+(t.expect?1:-1)})));case h.DELETE.success:var v=e[n]||{};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,r.Z)({},v,t.collapsed&&{collapsedCounts:v.collapsedCounts-1},t.reviewing?{reviewingCounts:v.reviewingCounts-1}:{commonCount:v.commonCount-1})));default:return e}}})},57236:function(e,t,n){"use strict";n.d(t,{FX:function(){return w},FZ:function(){return E},Hc:function(){return S},Ir:function(){return _},J4:function(){return N},KT:function(){return A},Rf:function(){return T},TY:function(){return O},YF:function(){return I},_H:function(){return C},j9:function(){return b},r_:function(){return D},rq:function(){return y},tp:function(){return R}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(12856),s=n(15390),u=n(52626),l=n(84160),d=n.n(l),p=n(96053),h=n(24316),f=n(60594),m={ebook:"book",videoanswer:"answer"},v={club_post:"posts",edu_section:"eduSections"};function Z(e,t){var n=e[t]&&e[t].ids||[],o=n.filter((function(e){return String(e).includes("_featured")})).length;return{featuredCounts:o,commonCounts:n.length-o}}var g=(0,r.Z)({},(0,f.FH)("commentV2",["GET","GET_COLLAPSED","GET_REVERSE","GET_REVIEWING","GET_CONVERSATION","UPDATE_LIKE","UPDATE_DISLIKE","UPDATE_FEATURED","UPDATE_COLLAPSED","APPROVE","REJECT","DELETE","ADD","GET_MORE_REPLY_COMMENT","GET_CONVERSATION_MORE","GET_STICKERS","GET_COMMENT_WITH_PIC_PERMISSION","LOAD_NOTI_COMMENTS"]),(0,f.co)("comment",["ORDER"]));function E(){return function(e){e({API:{types:g.GET_COMMENT_WITH_PIC_PERMISSION,method:"GET",endpoint:"/user-permission"}})}}function T(){return function(e){e({API:{types:g.GET_STICKERS,method:"GET",endpoint:"/stickers"}})}}function C(e){return function(t,n){var o=n().commentsV2.notificationsComments,r=(o||{})[e]||{},i=r.next,a=r.isDrained,c=r.isFetching,u="notifications/v2/timeline/".concat(e);if(!a&&i&&(u=i),!c)return t({id:e,notificationId:e,notificationsComments:o,API:{types:g.LOAD_NOTI_COMMENTS,endpoint:u},schema:s.l.NOTIFICATION_COMMENT_ARRAY,NOTIFICATION:{key:h.zQ,failure:function(e){return 403!==(null==e?void 0:e.code)&&40313!==(null==e?void 0:e.code)&&h.XR}}})}}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.order,c=void 0===a?"normal":a,u=n.isPrevious,l=void 0!==u&&u,d=n.byComment,f=n.status,v=void 0===f?"open":f,Z=n.commentPattern,E=n.current,T=n.patternLimit,C=void 0===T?20:T,A=arguments.length>3?arguments[3]:void 0;return function(n,a){var u=a().commentsV2,f=u.pagination,T=g.GET;"reviewing"===v&&(f=u.reviewing,T=g.GET_REVIEWING),"collapsed"===v&&(f=u.collapsed,T=g.GET_COLLAPSED),"reverse"===c&&"open"===v&&(f=u.reverse,T=g.GET_REVERSE);var _=f["".concat(e,"_").concat(t)]||{},y=_.next,S=_.previous,I=_.ids,b=(void 0===I?[]:I).length&&(l?S:y),w=0,R=p.VZ;"bottom"!==Z||A||(w=(E-1)*C,R=C,b=!1);var N="reviewing"===v||d||"reverse"===c||A||"pin"===e;return n({parentId:t,parentType:e,isPrevious:l,API:(0,i.Z)((0,r.Z)({types:T},b?{endpoint:b}:{endpoint:"".concat(m[e]||e,"s/").concat(t,"/").concat(N?"comments":"root_comments"),query:(0,r.Z)({order:c,limit:R},"open"===v&&d?{byComment:d}:{offset:w,status:v})}),{headers:{"X-APP-VERSION":"6.42.0"}}),schema:s.l.COMMENT_ARRAY_V2,UPDATE:{failure:function(n){return n&&n.res&&403===n.res.status?(0,o.Z)({},"".concat(e,"s"),(0,o.Z)({},t,{adminClosedComment:!0})):{}}},NOTIFICATION:{key:h.zQ,failure:function(e){return 403!==(null==e?void 0:e.code)&&40313!==(null==e?void 0:e.code)&&h.XR}}})}}function _(e){var t=e.parentType,n=e.parentId,i=e.content,u=e.replyTo,l=e.conversationId,d=e.rootCommentId,p=e.isConversation,f=e.replyType,Z=e.isAnchorComments,E=e.notificationId,T=e.useStrictMode,C=void 0===T||T,A=e.enableUnfriendlyCheck,_=void 0!==A&&A;return function(e,T){var A,y,S=parseInt(null==u?void 0:u.id,10)||void 0,I=T().entities,b=v[t]||"".concat(t,"s"),w=I[b][n]||{},R=w.commentCount,N=m[t]||t,O="评论发布成功！";"commercial"===w.questionType&&"censor"===w.commentPermission&&(O=(null===(A=w.question)||void 0===A||null===(y=A.brand)||void 0===y?void 0:y.toastCommentDescription)||"评论已提交，由品牌筛选后公开");var D=I.comments[d],B=["replyToFeatured","replyToCommon","replyToSubCommon"].includes(f)&&D;return e({notificationId:E,parentType:t,parentId:n,id:l,shouldUpdateChildComments:B,isConversation:p,replyType:f,isAnchorComments:Z,API:{types:g.ADD,endpoint:"".concat(N,"s/").concat(n,"/comments"),method:"POST",fetchOptions:{zsEncrypt:!0,body:(0,c.decamelizeKeys)((0,r.Z)({content:i,replyToId:S},_&&{unfriendlyCheck:C?"strict":"unstrict"}))}},schema:s.l.COMMENT,UPDATE:{request:(0,o.Z)({},b,(0,o.Z)({},n,{commentCount:R+1})),success:B&&function(e,t){var n=t.result,r=D.childComments,i=D.childCommentCount,c=void 0===i?0:i;return{comments:(0,o.Z)({},d,{childCommentCount:c+1,childComments:(0,a.Z)(r||[]).concat([n])})}},failure:(0,o.Z)({},b,(0,o.Z)({},n,{commentCount:R}))},NOTIFICATION:{key:h.zQ,success:O,failure:function(e){return 40313!==(null==e?void 0:e.code)&&"评论发布失败"}},replyToId:S,replyTo:u})}}function y(e){return function(t,n){var r,i,a=n().entities.comments,c=a[e]||a["".concat(e,"_featured")],s=c.voteCount,u=c.voting,l=c.disliked;return t({id:e,API:{types:g.UPDATE_LIKE,endpoint:"comments/".concat(e,"/actions/like"),method:u?"DELETE":"POST"},UPDATE:{request:{comments:(r={},(0,o.Z)(r,e,{voteCount:s+(u?-1:1),voting:!u,disliked:!!u&&l}),(0,o.Z)(r,"".concat(e,"_featured"),{voteCount:s+(u?-1:1),voting:!u,disliked:!!u&&l}),r)},success:function(t){var n;return{comments:(n={},(0,o.Z)(n,e,t),(0,o.Z)(n,"".concat(e,"_featured"),t),n)}},failure:{comments:(i={},(0,o.Z)(i,e,c),(0,o.Z)(i,"".concat(e,"_featured"),{voteCount:s,disliked:l}),i)}},NOTIFICATION:{key:h.zQ,failure:h.XR}})}}function S(e){return function(t,n){var r,i,a=n().entities.comments,c=a[e]||a["".concat(e,"_featured")],s=c.voting,u=c.voteCount,l=c.disliked,d=!l;return t({id:e,API:{types:g.UPDATE_DISLIKE,endpoint:"comments/".concat(e,"/actions/dislike"),method:l?"DELETE":"POST"},UPDATE:{request:{comments:(r={},(0,o.Z)(r,e,{disliked:d,voting:!!l&&s,voteCount:d&&s?u-1:u}),(0,o.Z)(r,"".concat(e,"_featured"),{disliked:d,voting:!!l&&s,voteCount:d&&s?u-1:u}),r)},failure:{comments:(i={},(0,o.Z)(i,e,c),(0,o.Z)(i,"".concat(e,"_featured"),{disliked:l,voting:s,voteCount:u}),i)}},NOTIFICATION:{key:h.zQ,failure:h.XR}})}}function I(e,t,n){return function(a,c){var s=c(),u=function(e){return{API:{types:g.DELETE,endpoint:"comments/".concat(e),method:"delete"}}}(e),l={UPDATE:{request:{},failure:{}}},d=function(e,t){var n=t.id;return e.entities.comments[n]}(s,{id:e});d&&(l.UPDATE.request.comments=(0,o.Z)({},e,{isDelete:!0,content:"该评论已删除"}),l.UPDATE.failure.comments=(0,o.Z)({},e,(0,i.Z)((0,r.Z)({},d),{isDelete:!1})));var p=v[t]||"".concat(t,"s"),f=s.entities[p]||{},m=!!d&&d.reviewing;if(!m){var Z=f[n]?f[n].commentCount-1:0;l.UPDATE.request[p]=(0,o.Z)({},n,{commentCount:Z}),l.UPDATE.failure[p]=(0,o.Z)({},n,f)}return a((0,i.Z)((0,r.Z)({id:e,collapsed:d&&d.collapsed,reviewing:m,parentType:t,parentId:n},u,l),{NOTIFICATION:{key:h.zQ,failure:h.XR}}))}}function b(e){var t=e.id,n=e.isAnchorComments,r=e.isLoadRest;return function(e,i){var c,u=i(),l=u.commentsV2.conversation,p=u.entities.comments;if(l[t]&&l[t].newIds.length){var f=l[t],m=f.newIds,v=f.next,Z=f.isFetching;if(!m.length||Z)return;c=v}else c="comments/".concat(t,n?"/anchor_comments":"/child_comments");var E=(p[t]||p["".concat(t,"_featured")]||{}).childComments,T=void 0===E?[]:E;return e({id:t,isLoadRest:r,comments:p,API:{types:g.GET_CONVERSATION,endpoint:c},schema:s.l.COMMENT_ARRAY_V2,UPDATE:{success:r&&function(e,n){var r,i=n.result;return{comments:(r={},(0,o.Z)(r,t,{childComments:d()((0,a.Z)(T).concat((0,a.Z)(i)))}),(0,o.Z)(r,"".concat(t,"_featured"),{childComments:d()((0,a.Z)(T).concat((0,a.Z)(i)))}),r)}}},NOTIFICATION:{key:h.zQ,failure:h.XR}})}}function w(e){var t=e.nextUrl,n=e.conversationId;return function(e,o){var r=o().commentsV2.conversationMore[n]||{},i=r.isFetching,a=r.next,c=r.isDrained;if(!i&&!c)return e({id:n,API:{types:g.GET_CONVERSATION_MORE,endpoint:a||t},schema:s.l.COMMENT_ARRAY,NOTIFICATION:{key:h.zQ,failure:h.XR}})}}function R(e,t){var n=e.id,a=e.parentId,c=e.commentId,s=e.parentType,u=e.notificationId,l=e.noSideEffect,d=void 0!==l&&l;return function(e,l){var p,f=l(),m=f.entities.comments,v=f.commentsV2.notificationsComments,Z=m[m["".concat(c,"_featured")]?"".concat(c,"_featured"):c],E=Z.collapsed,T=Z.id,C="boolean"==typeof t?t:Z.featured,A=null;(A=C?m[T]?m[T]:(0,o.Z)({},T,(0,i.Z)((0,r.Z)({},Z),{featured:!1,collapsed:E})):(0,o.Z)({},"".concat(T,"_featured"),(0,i.Z)((0,r.Z)({},Z),{childComments:[],childCommentCount:0,featured:!0,collapsed:!1})),d)&&(p={},(0,o.Z)(p,T,(0,i.Z)((0,r.Z)({},Z),{featured:!C})),(0,o.Z)(p,"".concat(T,"_featured"),(0,i.Z)((0,r.Z)({},Z),{featured:!C})),A=p);return e({id:n,commentId:T,parentId:a,notificationsComments:v,parentType:s,expect:!C,notificationId:u,API:{types:g.UPDATE_FEATURED,endpoint:"comments/".concat(T,"/actions/feature"),method:C?"delete":"post"},UPDATE:{request:{comments:A},failure:{comments:(0,o.Z)({},T,Z)}},NOTIFICATION:{key:h.zQ,failure:h.XR,endpoint:"comments/".concat(n,"/actions/feature"),method:C?"delete":"post"}})}}function N(e,t,n){return function(r,i){var a=i().entities.comments[e],c=a.collapsed,s=a.featured,u=!c;return r({id:e,expect:u,parentType:t,parentId:n,API:{types:g.UPDATE_COLLAPSED,endpoint:"comments/".concat(e,"/actions/collapse"),method:u?"post":"delete"},UPDATE:{request:{comments:(0,o.Z)({},e,{collapsed:u,featured:!u&&s})},failure:{comments:(0,o.Z)({},e,a)}},NOTIFICATION:{key:h.zQ,failure:h.XR}})}}function O(e,t,n){return function(r,i){var a=i().entities,c=a.comments[e],s="".concat(t,"s"),u=a[s][n]||{commentCount:0};return r({id:e,parentId:n,parentType:t,API:{types:g.APPROVE,endpoint:"comments/".concat(e,"/actions/approve"),method:"PUT"},UPDATE:{request:(0,o.Z)({comments:(0,o.Z)({},e,{status:"open",isDelete:!0,reviewing:!1})},s,(0,o.Z)({},n,{commentCount:u.commentCount+1})),failure:(0,o.Z)({comments:(0,o.Z)({},e,c)},s,(0,o.Z)({},n,u))}})}}function D(e,t,n){return function(r,i){var a=i().entities,c=a.comments[e],s="".concat(t,"s"),u=a[s][n]||{commentCount:0};return r({id:e,parentId:n,parentType:t,API:{types:g.REJECT,endpoint:"comments/".concat(e,"/actions/approve"),method:"DELETE"},UPDATE:{request:(0,o.Z)({comments:(0,o.Z)({},e,{status:"open",isDelete:!0,reviewing:!0})},s,(0,o.Z)({},n,{commentCount:u.commentCount-1})),failure:(0,o.Z)({comments:(0,o.Z)({},e,c)},s,(0,o.Z)({},n,u))}})}}var B=function(e){var t=e.parentType,n=e.parentId;return"".concat(t,"_").concat(n)};t.ZP=(0,u.combineReducers)({stickers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===g.GET_STICKERS.success?(0,a.Z)(e).concat((0,a.Z)(t.payload.data)):e},commentWithPicPermission:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===g.GET_COMMENT_WITH_PIC_PERMISSION.success?(0,r.Z)({},e,t.payload):e},notificationsComments:(0,p.Fd)(g.LOAD_NOTI_COMMENTS,{mapActionToKey:function(e){return e.notificationId||e.id},additionalCaseTypes:[g.ADD.success].concat((0,a.Z)(Object.values(g.UPDATE_FEATURED))),additionalCase:function(e,t){switch(t.type){case g.ADD.success:var n=t.replyType,o=t.result;return"notification"===n?(0,i.Z)((0,r.Z)({},e),{ids:(0,a.Z)(e.ids).concat([o])}):e;case g.UPDATE_FEATURED.success:var c=t.notificationId,s=t.commentId;if(c){var u=e.ids,l=u.indexOf("".concat(s,"_featured"));-1===l?u.unshift("".concat(s,"_featured")):u.splice(l,1)}return e;default:return e}}}),pagination:(0,p.Fd)(g.GET,{mapActionToKey:B,additionalCaseTypes:[g.APPROVE.success,g.REJECT.success,g.ADD.success,g.ADD.failure,g.GET_CONVERSATION.success].concat((0,a.Z)(Object.values(g.UPDATE_FEATURED)),(0,a.Z)(Object.values(g.UPDATE_COLLAPSED))),additionalCase:function(e,t){switch(t.type){case g.APPROVE.success:return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids).concat([t.id])});case g.REJECT.success:var n=e.ids;return(0,i.Z)((0,r.Z)({},e),{totals:e.totals-1,ids:n.filter((function(e){return e!==t.id}))});case g.ADD.success:var o=t.replyToId,c=t.shouldUpdateChildComments;switch(t.replyType){case"comment":return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids).concat([t.result]),newIds:(0,a.Z)(e.newIds).concat([t.result])});case"replyToFeatured":return c?(0,r.Z)({totals:e.totals+1},e):(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids).concat([t.result]),newIds:(0,a.Z)(e.newIds).concat([t.result])});case"replyToSubFeatured":var s=e.ids.indexOf("".concat(o,"_featured"));return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids.slice(0,s+1)).concat([t.result],(0,a.Z)(e.ids.slice(s+1))),newIds:(0,a.Z)(e.newIds.slice(0,s+1)).concat([t.result],(0,a.Z)(e.newIds.slice(s+1)))});case"replyToCommon":case"replyToSubCommon":return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1});default:return e}case g.UPDATE_COLLAPSED.request:var u=e.ids,l=u.indexOf(t.id),d=u.slice();return t.expect?d.splice(l,1):d.push(t.id),(0,i.Z)((0,r.Z)({},e),{ids:d,newIds:d,index:l});case g.UPDATE_COLLAPSED.success:return delete e.index,(0,r.Z)({},e);case g.UPDATE_COLLAPSED.failure:var p=e.ids.slice(),h=p.indexOf(t.id);return t.expect?p.splice(h,0,t.id):p.splice(h,1),delete e.index,(0,i.Z)((0,r.Z)({},e),{ids:p,newIds:p});case g.UPDATE_FEATURED.request:var f=t.commentId,m=e.ids,v=e.newIds,Z=m.indexOf("".concat(f,"_featured"));return-1===Z?(0,i.Z)((0,r.Z)({},e),{ids:["".concat(f,"_featured")].concat((0,a.Z)(m)),newIds:["".concat(f,"_featured")].concat((0,a.Z)(v))}):(m.splice(Z,1),v.splice(Z,1),e);default:return e}}}),collapsed:(0,p.Fd)(g.GET_COLLAPSED,{mapActionToKey:B,additionalCaseTypes:(0,a.Z)(Object.values(g.UPDATE_COLLAPSED)),additionalCase:function(e,t){switch(t.type){case g.UPDATE_COLLAPSED.request:var n=e.ids,o=n.indexOf(t.id),a=n.slice();return t.expect?a.push(t.id):a.splice(o,1),(0,i.Z)((0,r.Z)({},e),{ids:a,newIds:a,index:o});case g.UPDATE_COLLAPSED.success:return delete e.index,(0,r.Z)({},e);case g.UPDATE_COLLAPSED.failure:var c=e.ids,s=e.index,u=c.slice();return t.expect?u.splice(s,1):u.splice(s,0,t.id),delete e.index,(0,i.Z)((0,r.Z)({},e),{ids:c,newIds:u});default:return e}}}),reverse:(0,p.Fd)(g.GET_REVERSE,{mapActionToKey:B,additionalCaseTypes:[g.APPROVE.success,g.ADD.success],additionalCase:function(e,t){switch(t.type){case g.APPROVE.success:return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:[t.id].concat((0,a.Z)(e.ids))});case g.ADD.success:var n=t.replyToId,o=t.id;if(n&&!o){var c=e.ids.indexOf(n);return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,newIds:(0,a.Z)(e.newIds.slice(0,c+1)).concat([t.result],(0,a.Z)(e.newIds.slice(c+1))),ids:(0,a.Z)(e.ids.slice(0,c+1)).concat([t.result],(0,a.Z)(e.ids.slice(c+1)))})}return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids).concat([t.result]),newIds:(0,a.Z)(e.newIds).concat([t.result])});default:return null}}}),reviewing:(0,p.Fd)(g.GET_REVIEWING,{mapActionToKey:B,additionalCaseTypes:[g.APPROVE.success,g.REJECT.success],additionalCase:function(e,t){switch(t.type){case g.APPROVE.success:var n=e.ids;return n.splice(n.indexOf(t.id),1),(0,i.Z)((0,r.Z)({},e),{ids:n});case g.REJECT.success:return(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids).concat([t.id])});default:return e}}}),conversation:(0,p.Fd)(g.GET_CONVERSATION,{additionalCaseTypes:[g.ADD.success].concat((0,a.Z)(Object.values(g.UPDATE_FEATURED))),additionalCase:function(e,t){switch(t.type){case g.ADD.success:var n=t.replyToId,o=t.replyType,c=t.isAnchorComments;if("conversation"===o){var s=e.ids.indexOf(n);return-1===s&&(s=e.ids.indexOf("".concat(n,"_featured"))),c&&-1===s?e:(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids.slice(0,s+1)).concat([t.result],(0,a.Z)(e.ids.slice(s+1)))})}return e;case g.UPDATE_FEATURED.request:var u=t.commentId,l=e.ids,d=e.newIds,p=l.indexOf("".concat(u,"_featured")),h=l.indexOf(u);return-1!==p?(l.splice(p,1,u),d.splice(p,1,u)):-1!==h&&(l.splice(h,1,"".concat(u,"_featured")),d.splice(h,1,"".concat(u,"_featured"))),e;default:return e}}}),conversationMore:(0,p.Fd)(g.GET_CONVERSATION_MORE,{additionalCaseTypes:[g.ADD.success].concat((0,a.Z)(Object.values(g.UPDATE_FEATURED))),additionalCase:function(e,t){switch(t.type){case g.ADD.success:var n=t.replyToId,o=t.replyType,c=t.isAnchorComments;if("conversation"===o){if(!c)return(0,r.Z)({},e);var s=e.ids.indexOf(n);return-1===s&&-1===(s=e.ids.indexOf("".concat(n,"_featured")))?e:(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:(0,a.Z)(e.ids.slice(0,s+1)).concat([t.result],(0,a.Z)(e.ids.slice(s+1)))})}return e;case g.UPDATE_FEATURED.request:var u=t.commentId,l=e.ids,d=e.newIds,p=l.indexOf("".concat(u,"_featured")),h=l.indexOf(u);return-1!==p?(l.splice(p,1,u),d.splice(p,1,u)):-1!==h&&(l.splice(h,1,"".concat(u,"_featured")),d.splice(h,1,"".concat(u,"_featured"))),e;default:return e}}}),parent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=B(t);switch(t.type){case g.GET.success:var a=t.payload,c=a.featuredCounts,s=a.collapsedCounts,u=a.reviewingCounts,l=a.commonCounts,d=a.commentStatus;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,{featuredCounts:c,collapsedCounts:s,reviewingCounts:u,commonCounts:l,commentStatus:d}));case g.APPROVE.success:var p=e[n].reviewingCounts-1;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{reviewingCounts:p})));case g.REJECT.success:var h=e[n].reviewingCounts+1;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{reviewingCounts:h})));case g.UPDATE_COLLAPSED.success:var f=e[n]||{};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},f),{collapsedCounts:f.collapsedCounts+(t.expect?1:-1)})));case g.DELETE.success:var m=e[n]||{};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,r.Z)({},m,t.collapsed&&{collapsedCounts:m.collapsedCounts-1},t.reviewing?{reviewingCounts:m.reviewingCounts-1}:{commonCount:m.commonCount-1})));case g.LOAD_NOTI_COMMENTS.success:var v=t.notificationsComments,E=t.notificationId;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},E,(0,r.Z)({},Z(v,E))));case g.UPDATE_FEATURED.request:case g.UPDATE_FEATURED.success:var T=t.notificationsComments,C=t.notificationId;return C?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},C,(0,r.Z)({},Z(T,C)))):e;default:return e}}})},66258:function(e,t,n){"use strict";n.d(t,{UH:function(){return w},Sk:function(){return L},ZP:function(){return F},oE:function(){return x},NC:function(){return P},bG:function(){return N},sO:function(){return D},Ke:function(){return B},Uq:function(){return k},iG:function(){return O}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(12856),s=n(35934),u=n.n(s),l=(n(76745),n(17312),n(40491)),d=n.n(l),p=(n(31922),n(65468)),h=n.n(p),f=n(74480),m=n.n(f),v=(n(55270),n(97645)),Z=n.n(v),g=(n(52495),n(92799)),E="VIDEO_CLIP";function T(){var e=Z().get(E,"edit");if(!e)return null;var t=e.sourceId,n=e.timestamp;return Z().delete(E),Date.now()-n>3e5?null:t}var C={videoSucccess:1,videoEdit:2,pinPublish:3,pinSuccess:4},A=n(60594),_=n(15558),y=(n(68562),n(70452),n(79930),n(65406)),S=n(23621),I=(0,y.P1)((function(e){return e.creator.newRights}),g.Xj,(function(e,t){return e.map((function(e){var n=Object.values(S.Zy).find((function(t){return t.id===e.id}));return n?(null==n?void 0:n.officeOnly)&&!t?null:(0,r.Z)({},n,e):null})).filter(Boolean)})),b=((0,y.P1)(I,(function(e){return e.filter((function(e){return e.needShow}))})),n(40198),n(43270)),w=m()({data:[{question:{answer_count:!0,follower_count:!0,visit_count:!0,detail:!0,excerpt:!0,relationship:{is_following:!0},author:!0,created:!0}}]}),R=(0,r.Z)({},(0,A.FH)("creator",["GET_CREATOR_APPLY_STATUS","READ_NOTIFICATION","GET_CREATOR_APPLY_SKILL_LIST","GET_CREATOR_APPLY_INFO","GET_CREATOR_CAPTCHA","GET_CREATOR_SMS_SUPPORTED_COUNTRIES","VALIDATE_CREATOR_CAPTCHA","POST_CREATOR_APPLY_INFO","GET_GOODAT_TOPIC_LIST","SEARCH_TOPIC","MODIFY_GOODAT_TOPIC","GET_HOT_EVENT","GET_HOME_DATA","VALIDATE_CREATOR_CAPTCHA","LOAD_CREATOR_SMS_SUPPORTED_COUNTRIES","GET_TOOLS_QUESTION_IGNORE_REASON","POST_TOOLS_QUESTION_IGNORE_REASON","GET_TOOLS_QUESTION_INVITED_COUNT","GET_TOOLS_QUESTION_DOMAIN","GET_TOOLS_QUESTION_INVITED_LIST","DELETE_TOOLS_QUESTION_INVITED","GET_TOOLS_QUESTION_LIST","DELETE_TOOLS_QUESTION","GET_TOOLS_HOT_QUESTION_LIST","GET_TOOLS_MCN_QUESTION_LIST","GET_TOOLS_RECOMMEND_LIST_AVAILABLE_TIMES","GET_TOOLS_RECOMMEND_LIST","GET_TOOLS_RECOMMEND_TIMES_RECORD","POST_TOOLS_RECOMMEND","GET_TOOLS_RECOMMEND_RECORD","GET_TOOLS_HOTSPOT_LIST","GET_TOOLS_SEARCH_QUESTION_LIST","GET_TOOLS_HOTSPOT_DOMAIN_LIST","SUBSCRIBE_TOOLS_HOTSPOT_DOMAIN_LIST","UPDATE_TOOLS_HOTSPOT_DOMAIN","GET_PROFIT_REWARD_COMMUNITY_LIST","GET_PROFIT_REWARD_PROMOTION_TOTAL","GET_PROFIT_REWARD_PROMOTION_LIST","GET_CUSTOM_PROMOTION_STATUS","GET_PROMOTION_ITEM_LIST","GET_PROMOTION_ITEM","UPDATE_CURRENT_PROMOTION","DELETE_CURRENT_PROMOTION","LOAD_PROMOTION_PROTOCOL","GET_GROWTH_LEVEL","GET_CREATOR_NEW_RIGHTS","GET_NEW_RIGHTS_IS_ACTIVE","GET_CREATOR_RIGHTS_STATUS","GET_CONTENT_RIGHTS_NOTIFICATION","READ_CONTENT_RIGHTS_NOTIFICATION","APPLY_CREATOR_RIGHTS","GET_REALNAME_STATUS","GET_MCN_DAILY_STATUS","GET_MCN_ORDER_LIST","GET_MCN_OVERDUE_GOODS_LIST","GET_MCN_ORDER_DETAIL","GET_MCN_STATISTICS","GET_MCN_CURRENT_MONTH_STATS","GET_MCN_OVERVIEW_DATA","GET_MCN_BALANCE_DATA","GET_MCN_BALANCE_LIST","LOAD_ACTIVITY_LIST","LOAD_TABLE","GET_VIDEO_SUPPORT_BASE_STATISTICS","GET_VIDEO_SUPPORT_USER_SHOW_STATUS","GET_VIDEO_SUPPORT_USER_STATUS","APPLY_VIDEO_SUPPORT","GET_VIDEO_SUPPORT_DAILY_STATISTICS","GET_VIDEO_SUPPORT_CONTENT_STATISTICS","GET_TEXT_SUPPORT_BASE_STATISTICS","GET_TEXT_SUPPORT_CONTENT_STATISTICS","GET_VIDEO_SUPPORT_BANNER","LOAD_MCN_HOMEPAGE","ACCEPT_MCN_INVITE","REJECT_MCN_INVITE","LAUNCH_UNBIND","ACCEPT_UNBIND","REJECT_UNBIND","GET_CREATOR_TASKS","GET_NEW_CREATOR_TASKS","DO_CREATOR_TASK","FINISH_NEW_CREATOR_TASKS_POP","TASK_FOLLOW_ACCOUNT","TASK_RECEIVE_REWARDS","LOAD_CREATOR_SCORE_INFO","GET_RECETLY_CREATED","LOAD_HOT_QUESTION_LIST","LOAD_CREATOR_STATISTICS","DELETE_ANSWER","LOAD_CREATION_LIST","LOAD_CREATION","LOAD_ANALYSIS_STATUS","GET_DRAFT_COUNT","GET_DRAFTS","CANCEL_CREATION_RELATION","LOAD_ANNOUNCEMENT_LIST","LOAD_ANNOUNCEMENT","LOAD_VIDEO_DISTRIBUTION_LIST","LOAD_VIDEO_DISTRIBUTION_MAPS","LOAD_VIDEO_DISTRIBUTION_RESOURCE","VIDEO_DISTRIBUTION_DETAIL","VIDEO_DISTRIBUTION_AUTH","VIDEO_DISTRIBUTION_ANSWER_DELETE","LOAD_EXPOSURE_PROMOTION_AMOUNT_BALANCE","LOAD_EXPOSURE_PROMOTION_LIST","LOAD_EXPOSURE_PROMOTION_RECORD","CHECK_EXPOSURE_PROMOTION_PERMISSION","START_EXPOSURE_PROMOTION","GET_RECOMMEND_QUESTION_LIST","GET_ALGORITHM_RECOMMEND_LIST","CHECK_ARTICLE_PUBLISH","LOAD_BVIP_RECOMMEND_MENU_SHOULD_SHOW","LOAD_CREATION_RELATIONSHIP_MENU_SHOULD_SHOW","LOAD_BANNER_LIST","LOAD_ARTICLE_EXPOSURE_PROMOTION_LIST","LOAD_ARTICLE_EXPOSURE_PROMOTION_AMOUNT_BALANCE","LOAD_ARTICLE_EXPOSURE_PROMOTION_RECORD","CHECK_ARTICLE_EXPOSURE_PROMOTION_PERMISSION","START_ARTICLE_EXPOSURE_PROMOTION","LOAD_QUESTION_RECOMMEND_LIST","LOAD_HOUR_HOT_QUESTION","LOAD_AGGREGATION_CARD_DATA","LOAD_TABLE_DATA","GET_EDITOR_SETTING","UPDATE_EDITOR_SETTING","GET_HOMEPAGE_INFO","GET_LEVEL_UP_WINDOW_SHOW","UPGRADE_WINDOW_DONE","GET_FALLBACK","UPDATE_FALLBACK","GET_KNOWLEDGE_TASK_INFO","GET_RUNNING_TASKS","GET_KNOWLEDGE_TASK_DETAIL","GET_KNOWLEDGE_BENEFIT","GET_CLOSED_TASKS","RECEIVE_TASK","GET_KNOWLEDGE_QUESTIONS"]),(0,A.co)("creator",["SET_CURRENT_CREATOR","READ_CONTENT_RIGHTS_NOTIFICATION_LOCALLY","CLEAN_MCN_ORDER_LIST","CLEAN_GRADE_INFO","UPDATE_EDIT_MODAL_STATUS"]));function N(){return function(e,t,n){var o=n.fnRefs;return(0,_.Z)(o,"loadCreatorApplyStatus",(function(){return d()((function(){return e({API:{types:R.GET_CREATOR_APPLY_STATUS,endpoint:"/creator/apply"}})}))}))()}}function O(e){return{API:{types:R.READ_NOTIFICATION,endpoint:"/creator/notification/read",method:"PATCH",body:{type:e}},meta:{type:e}}}function D(e,t){return{API:{types:R.GET_TOOLS_SEARCH_QUESTION_LIST,endpoint:e,query:t}}}function B(e,t){return{API:{types:R.POST_TOOLS_RECOMMEND,endpoint:"/creators/recommendation/".concat(e),body:{url_token:t},method:"POST"}}}function P(e,t){return{API:{types:R.GET_CONTENT_RIGHTS_NOTIFICATION,method:"GET",endpoint:"/creator/notification/content/".concat(e,"s/").concat(t)},UPDATE:{success:function(n){return(0,o.Z)({},"".concat(e,"s"),(0,o.Z)({},t,{creatorRightsNotification:n}))}}}}function k(e,t,n){return function(r,i){var a=i().entities["".concat(e,"s")][t].creatorRightsNotification,c=(0,o.Z)({},"".concat(e,"s"),(0,o.Z)({},t,{creatorRightsNotification:u()(a,(function(){return 0}))}));return r("current"===n?{type:R.READ_CONTENT_RIGHTS_NOTIFICATION_LOCALLY,UPDATE:{update:c}}:{API:{types:R.READ_CONTENT_RIGHTS_NOTIFICATION,method:"next"===n?"PATCH":"DELETE",endpoint:"/creator/notification/content/".concat(e,"s/").concat(t)},UPDATE:{request:c}})}}function x(e){return{API:{types:R.GET_ALGORITHM_RECOMMEND_LIST,endpoint:"creators/match/question/list",method:"GET",query:{article_token:e}}}}function L(e,t){var n={article_token:e};return t&&(n.question_token=t),{API:{types:R.CHECK_ARTICLE_PUBLISH,endpoint:"creators/article_publish/check/question",method:"POST",body:n}}}var U={currentCreatorUrlToken:null,homeData:{recommendQuestions:[]},tools:{question:{invitationCount:{questionFolloweeCount:0,questionTotalCount:0},goodatTopics:[]},customPromotion:{itemLists:{}},recommend:{recommendTimes:{}}},explore:{},rights:[],newRights:[],rightsStatus:{},levelUpperLimit:10,account:{growthLevel:{}},mcn:{},applyStatus:{},videoSupport:{},textBenefit:{},mcnManage:{},tasks:{},newTasks:{creatorTask:{tasks:[],des:[]}},scoreInfo:{},recentlyCreated:[],announcement:{},bannerList:[],creatorsRecommendInfo:{},menusShowControlByServer:{bVipRecomend:!1,creationRelationship:!1},income:{aggregation:{}},editModal:{status:!1,type:C.videoSuccess}};function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,n=t.meta,s=void 0===n?{}:n,u=t.payload;switch(t.type){case R.GET_HOME_DATA.success:return(0,i.Z)((0,r.Z)({},e),{homeData:(0,r.Z)({},e.homeData,t.payload)});case R.GET_HOME_DATA.failure:var l,d;return(0,i.Z)((0,r.Z)({},e),{isHomepageForbidden:"403"===(null===(l=t.err)||void 0===l||null===(d=l.payload)||void 0===d?void 0:d.code)});case R.GET_TOOLS_QUESTION_LIST.request:var p=s.stateKey;return(0,i.Z)((0,r.Z)({},e),{homeData:(0,i.Z)((0,r.Z)({},e.homeData),(0,o.Z)({},p,(0,i.Z)((0,r.Z)({},e.homeData[p]),{isLoading:!0})))});case R.GET_TOOLS_QUESTION_LIST.failure:var f=s.stateKey;return(0,i.Z)((0,r.Z)({},e),{homeData:(0,i.Z)((0,r.Z)({},e.homeData),(0,o.Z)({},f,(0,i.Z)((0,r.Z)({},e.homeData[f]),{isLoading:!1})))});case R.GET_TOOLS_QUESTION_LIST.success:var m,v=s.stateKey;return(0,i.Z)((0,r.Z)({},e),{homeData:(0,i.Z)((0,r.Z)({},e.homeData),(0,o.Z)({},v,(0,i.Z)((0,r.Z)((0,i.Z)((0,r.Z)({},e.homeData[v]),{isLoading:!1}),u),{data:(0,a.Z)((null===(m=e.homeData[v])||void 0===m?void 0:m.data)||[]).concat((0,a.Z)(u.data))})))});case R.DELETE_TOOLS_QUESTION.success:var Z=s.stateKey;return(0,i.Z)((0,r.Z)({},e),{homeData:(0,i.Z)((0,r.Z)({},e.homeData),(0,o.Z)({},Z,(0,i.Z)((0,r.Z)({},e.homeData[Z]),{data:e.homeData[Z].data.filter((function(e){return e.question.id!==t.meta.questionId}))})))});case R.SET_CURRENT_CREATOR:return(0,i.Z)((0,r.Z)({},e),{currentCreatorUrlToken:t.payload});case R.GET_TOOLS_QUESTION_INVITED_COUNT.success:return(0,i.Z)((0,r.Z)({},e),{tools:(0,i.Z)((0,r.Z)({},e.tools),{question:(0,i.Z)((0,r.Z)({},e.tools.question),{invitationCount:t.payload.data,isDrained:!0})})});case R.GET_GOODAT_TOPIC_LIST.success:return(0,i.Z)((0,r.Z)({},e),{tools:(0,i.Z)((0,r.Z)({},e.tools),{question:(0,i.Z)((0,r.Z)({},e.tools.question),{goodatTopics:t.payload.data.map((function(e){return(0,i.Z)((0,r.Z)({},e),{isGoodat:!0})})),isDrained:!0})})});case R.MODIFY_GOODAT_TOPIC.success:var g=t.meta.goodatTopics;return(0,i.Z)((0,r.Z)({},e),{tools:(0,i.Z)((0,r.Z)({},e.tools),{question:(0,i.Z)((0,r.Z)({},e.tools.question),{goodatTopics:g})})});case R.GET_CUSTOM_PROMOTION_STATUS.success:return(0,i.Z)((0,r.Z)({},e),{tools:(0,i.Z)((0,r.Z)({},e.tools),{customPromotion:(0,r.Z)({},e.tools.customPromotion,t.payload)})});case R.GET_PROMOTION_ITEM_LIST.success:var E=t.itemType,A=t.offset,_=t.limit,y=t.payload,S=y.data,I=y.count,w=e.tools.customPromotion.itemLists[E]||{count:I,data:Array.from({length:I},(function(){return null}))},N=(0,i.Z)((0,r.Z)({},w),{data:(0,a.Z)(w.data.slice(0,A)).concat((0,a.Z)(S),(0,a.Z)(w.data.slice(A+_)))});return(0,i.Z)((0,r.Z)({},e),{tools:(0,i.Z)((0,r.Z)({},e.tools),{customPromotion:(0,i.Z)((0,r.Z)({},e.tools.customPromotion),{itemLists:(0,i.Z)((0,r.Z)({},e.tools.customPromotion.itemLists),(0,o.Z)({},E,N))})})});case R.GET_TOOLS_RECOMMEND_TIMES_RECORD.success:var O=t.itemType,D=t.offset,B=t.limit,P=t.payload,k=P.data,x=P.paging,L=x.totals,F=e.tools.recommend.recommendTimes[O]||{count:L,data:Array.from({length:L},(function(){return null}))},M=(0,i.Z)((0,r.Z)({},F),{data:(0,a.Z)(F.data.slice(0,D)).concat((0,a.Z)(k.map((function(e){return(0,i.Z)((0,r.Z)({},e),{id:h()(e.created)})}))),(0,a.Z)(F.data.slice(D+B)))});return(0,i.Z)((0,r.Z)({},e),{tools:(0,i.Z)((0,r.Z)({},e.tools),{recommend:(0,i.Z)((0,r.Z)({},e.tools.recommend),{recommendTimes:(0,i.Z)((0,r.Z)({},e.tools.recommend.recommendTimes),(0,o.Z)({},O,M))})})});case R.GET_CREATOR_NEW_RIGHTS.success:var G=t.payload,z=G.rights,H=void 0===z?[]:z;return(0,i.Z)((0,r.Z)({},e),{newRights:H});case R.GET_GROWTH_LEVEL.success:var q=t.payload;return(0,i.Z)((0,r.Z)({},e),{account:(0,i.Z)((0,r.Z)({},e.account),{growthLevel:(0,r.Z)({},e.account.growthLevel,q)})});case R.GET_CREATOR_RIGHTS_STATUS.success:var V=t.payload,X=t.meta.rightsId;return(0,i.Z)((0,r.Z)({},e),{rightsStatus:(0,i.Z)((0,r.Z)({},e.rightsStatus),(0,o.Z)({},X,V))});case R.APPLY_CREATOR_RIGHTS.success:var W=t.meta,K=W.rightsId,j=W.isExperience,Y=t.payload;return(0,i.Z)((0,r.Z)({},e),{newRights:e.newRights.map((function(e){return(0,i.Z)((0,r.Z)({},e),{status:e.id===K?Y.status:e.status})})),rights:e.rights.map((function(e){return(0,i.Z)((0,r.Z)({},e),{status:e.id===K?j?"experience":Y.status:e.status})}))});case R.GET_CREATOR_APPLY_INFO.success:return(0,i.Z)((0,r.Z)({},e),{applyConfigInfo:t.payload});case R.GET_CREATOR_APPLY_STATUS.success:return(0,i.Z)((0,r.Z)({},e),{applyStatus:(0,r.Z)({},t.payload)});case R.READ_NOTIFICATION.success:return(0,i.Z)((0,r.Z)({},e),{applyStatus:(0,i.Z)((0,r.Z)({},e.applyStatus),{notification:(0,i.Z)((0,r.Z)({},e.applyStatus.notification),(0,o.Z)({},(0,c.camelize)(t.meta.type),0))})});case R.CLEAN_MCN_ORDER_LIST:return(0,i.Z)((0,r.Z)({},e),{mcn:(0,i.Z)((0,r.Z)({},e.mcn),{orderSource:void 0,orders:void 0})});case R.CLEAN_GRADE_INFO:return(0,i.Z)((0,r.Z)({},e),{upgradeInfo:(0,i.Z)((0,r.Z)({},e.upgradeInfo),{needPop:!1})});case R.GET_MCN_ORDER_LIST.success:var Q=t.payload,J=Q.data,$=Q.paging.totals,ee=t.source,te=t.limit,ne=t.offset,oe=e.mcn.orderSource===ee?e.mcn.orders:Array.from({length:$});return(0,i.Z)((0,r.Z)({},e),{mcn:(0,i.Z)((0,r.Z)({},e.mcn),{orderSource:ee,orders:oe.map((function(e,t){return t>=ne&&t<ne+te?J[t-ne]:e}))})});case R.GET_MCN_OVERDUE_GOODS_LIST.success:var re=t.payload,ie=re.data,ae=re.paging.totals,ce=t.source,se=t.limit,ue=t.offset,le=e.mcn.goodsListSource===ce?e.mcn.goodsList:Array.from({length:ae});return(0,i.Z)((0,r.Z)({},e),{mcn:(0,i.Z)((0,r.Z)({},e.mcn),{goodsListSource:ce,goodsList:le.map((function(e,t){return t>=ue&&t<ue+se?ie[t-ue]:e}))})});case R.GET_MCN_ORDER_DETAIL.success:var de=t.payload,pe=t.id;return(0,i.Z)((0,r.Z)({},e),{mcn:(0,i.Z)((0,r.Z)({},e.mcn),{orders:e.mcn.orders.map((function(e){return(null==e?void 0:e.id)&&String(e.id)===pe?(0,i.Z)((0,r.Z)({},e,de),{id:e.id,imgURL:e.imgURL}):e}))})});case R.GET_CREATOR_APPLY_STATUS.failure:return t.err&&403===t.err.status?(0,i.Z)((0,r.Z)({},e),{guide:!0}):e;case R.LOAD_ACTIVITY_LIST.success:var he,fe=e.activity,me=void 0===fe?{}:fe,ve=t.meta.groupToken,Ze=t.payload;return(0,i.Z)((0,r.Z)({},e),{activity:(0,i.Z)((0,r.Z)({},me),(0,o.Z)({},ve,(0,i.Z)((0,r.Z)({},me[ve],Ze),{data:(0,a.Z)((null===(he=me[ve])||void 0===he?void 0:he.data)||[]).concat((0,a.Z)(Ze.data||[])),page:(0,i.Z)((0,r.Z)({},Ze.page),{isLoading:!1})})))});case R.LOAD_TABLE.success:var ge,Ee=s.stateKey,Te=s.pagesKey,Ce=s.totalKey,Ae=s.dataKey,_e=s.current,ye=u.data,Se=u.paging;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},Ee,(0,b.qS)(null!==(ge=e[Ee])&&void 0!==ge?ge:{},_e,{data:null!=ye?ye:[],total:null==Se?void 0:Se.totals},{pagesKey:Te,totalKey:Ce,dataKey:Ae})))}switch(t.type){case R.GET_VIDEO_SUPPORT_USER_SHOW_STATUS.success:var Ie;return(0,i.Z)((0,r.Z)({},e),{videoSupport:(0,i.Z)((0,r.Z)({},e.videoSupport),{status:null===(Ie=t.payload)||void 0===Ie?void 0:Ie.status})});case R.GET_VIDEO_SUPPORT_USER_STATUS.success:return(0,i.Z)((0,r.Z)({},e),{videoSupport:(0,i.Z)((0,r.Z)({},e.videoSupport),{userStatus:t.payload})});case R.GET_VIDEO_SUPPORT_BASE_STATISTICS.success:return(0,i.Z)((0,r.Z)({},e),{videoSupport:(0,i.Z)((0,r.Z)({},e.videoSupport),{base:t.payload})});case R.GET_VIDEO_SUPPORT_DAILY_STATISTICS.success:return(0,i.Z)((0,r.Z)({},e),{videoSupport:(0,i.Z)((0,r.Z)({},e.videoSupport),{daily:t.payload})});case R.GET_VIDEO_SUPPORT_CONTENT_STATISTICS.success:return(0,i.Z)((0,r.Z)({},e),{videoSupport:(0,i.Z)((0,r.Z)({},e.videoSupport),{content:t.payload})});case R.GET_VIDEO_SUPPORT_BANNER.success:return(0,i.Z)((0,r.Z)({},e),{videoSupport:(0,i.Z)((0,r.Z)({},e.videoSupport),{banner:t.payload})});case R.GET_TEXT_SUPPORT_BASE_STATISTICS.success:return(0,i.Z)((0,r.Z)({},e),{textBenefit:(0,i.Z)((0,r.Z)({},e.textBenefit),{base:t.payload})});case R.GET_TEXT_SUPPORT_CONTENT_STATISTICS.success:return(0,i.Z)((0,r.Z)({},e),{textBenefit:(0,i.Z)((0,r.Z)({},e.textBenefit),{content:t.payload})});case R.LOAD_MCN_HOMEPAGE.success:return(0,i.Z)((0,r.Z)({},e),{mcnManage:t.payload});case R.GET_CREATOR_TASKS.success:var be=t.payload;return(0,i.Z)((0,r.Z)({},e),{tasks:be});case R.GET_NEW_CREATOR_TASKS.success:return(0,i.Z)((0,r.Z)({},e),{newTasks:t.payload||{}});case R.LOAD_CREATOR_SCORE_INFO.success:var we=t.payload;return(0,i.Z)((0,r.Z)({},e),{scoreInfo:we});case R.GET_RECETLY_CREATED.success:var Re=t.payload;return(0,i.Z)((0,r.Z)({},e),{recentlyCreated:null==Re?void 0:Re.data});case R.LOAD_HOT_QUESTION_LIST.success:var Ne=t.payload;return(0,i.Z)((0,r.Z)({},e),{hotQuestionList:null==Ne?void 0:Ne.data});case R.LOAD_CREATOR_STATISTICS.success:return(0,i.Z)((0,r.Z)({},e),{creatorStatistics:t.payload});case R.GET_DRAFT_COUNT.success:var Oe,De,Be,Pe=t.meta.contentType;return"zvideo"===Pe?(0,i.Z)((0,r.Z)({},e),{draftCount:(0,i.Z)((0,r.Z)({},e.draftCount),(0,o.Z)({},Pe,null===(De=t.payload)||void 0===De||null===(Be=De.paging)||void 0===Be?void 0:Be.totals))}):(0,i.Z)((0,r.Z)({},e),{draftCount:(0,i.Z)((0,r.Z)({},e.draftCount),(0,o.Z)({},Pe,null===(Oe=t.payload)||void 0===Oe?void 0:Oe.count))});case R.LOAD_ANALYSIS_STATUS.success:return(0,i.Z)((0,r.Z)({},e),{analysisStatus:t.payload});case R.LOAD_ANNOUNCEMENT_LIST.success:var ke,xe=s.stateKey,Le=s.offset;return(0,i.Z)((0,r.Z)({},e),{announcement:(0,i.Z)((0,r.Z)({},e.announcement),(0,o.Z)({},xe,(0,i.Z)((0,r.Z)({},u),{data:(0,i.Z)((0,r.Z)({},null===(ke=e.announcement[xe])||void 0===ke?void 0:ke.data),(0,o.Z)({},Le,u.data))})))});case R.GET_TOOLS_HOTSPOT_DOMAIN_LIST.success:return(0,i.Z)((0,r.Z)({},e),{tools:(0,i.Z)((0,r.Z)({},e.tools),{hotspot:(0,i.Z)((0,r.Z)({},e.tools.hospot),{domains:t.payload.domains})})});case R.GET_TOOLS_HOTSPOT_LIST.success:return(0,i.Z)((0,r.Z)({},e),{tools:(0,i.Z)((0,r.Z)({},e.tools),{hotspot:(0,i.Z)((0,r.Z)({},e.tools.hotspot),(0,o.Z)({},s.stateKey,t.payload))})});case R.GET_RECOMMEND_QUESTION_LIST.success:return u?(0,i.Z)((0,r.Z)({},e),{creatorsRecommendInfo:(0,i.Z)((0,r.Z)({},u),{showType:(0,c.camelize)(u.showType||"")})}):(0,r.Z)({},e);case R.GET_RECOMMEND_QUESTION_LIST.failure:return(0,i.Z)((0,r.Z)({},e),{creatorsRecommendInfo:{showType:"data"}});case R.LOAD_BVIP_RECOMMEND_MENU_SHOULD_SHOW.success:return(0,i.Z)((0,r.Z)({},e),{menusShowControlByServer:(0,i.Z)((0,r.Z)({},e.menusShowControlByServer),{bVipRecomend:u.data})});case R.LOAD_CREATION_RELATIONSHIP_MENU_SHOULD_SHOW.success:return(0,i.Z)((0,r.Z)({},e),{menusShowControlByServer:(0,i.Z)((0,r.Z)({},e.menusShowControlByServer),{creationRelationship:u.canRef})});case R.LOAD_BANNER_LIST.success:var Ue;return(0,i.Z)((0,r.Z)({},e),{bannerList:(null==u||null===(Ue=u.data)||void 0===Ue?void 0:Ue.bannerList)||[]});case R.GET_HOT_EVENT.success:return(0,i.Z)((0,r.Z)({},e),{hotEventsList:(null==u?void 0:u.data)||[]});case R.LOAD_HOUR_HOT_QUESTION.success:return(0,i.Z)((0,r.Z)({},e),{hotHourQuestionList:(null==u?void 0:u.data)||[]});case R.LOAD_AGGREGATION_CARD_DATA.success:return(0,i.Z)((0,r.Z)({},e),{income:(0,i.Z)((0,r.Z)({},e.income),{aggregation:u})});case R.GET_EDITOR_SETTING.success:return(0,i.Z)((0,r.Z)({},e),{editorSettings:u});case R.GET_HOMEPAGE_INFO.success:return(0,i.Z)((0,r.Z)({},e),{homepageInfo:u});case R.GET_LEVEL_UP_WINDOW_SHOW.success:return(0,i.Z)((0,r.Z)({},e),{upgradeInfo:u});case R.GET_KNOWLEDGE_TASK_INFO.success:return(0,i.Z)((0,r.Z)({},e),{knowledgeTaskInfo:u});case R.GET_KNOWLEDGE_TASK_DETAIL.success:return(0,i.Z)((0,r.Z)({},e),{knowledgeTaskDetail:u});case R.GET_KNOWLEDGE_BENEFIT.success:return(0,i.Z)((0,r.Z)({},e),{knowledgeBenefit:u});case R.UPDATE_EDIT_MODAL_STATUS:var Fe=T(),Me=t.payload||{},Ge=Me.status,ze=Me.zvideoId,He=Fe||ze,qe=C.videoSucccess,Ve=C.videoEdit;return Ge&&He?(0,i.Z)((0,r.Z)({},e),{editModal:{status:Ge,type:Fe?qe:Ve,sourceId:He}}):(0,i.Z)((0,r.Z)({},e),{editModal:(0,i.Z)((0,r.Z)({},e.editModal),{status:!1})})}return e}},59110:function(e,t,n){"use strict";n.d(t,{Sy:function(){return u},Xd:function(){return s},ZP:function(){return l}});var o=n(88483),r=n(16600),i=n(60594),a={list:[]},c=(0,i.FH)("creatorRightStatus",["LOAD_CREATOR_RIGHT_STATUS"]);function s(){return{API:{types:c.LOAD_CREATOR_RIGHT_STATUS,endpoint:"/creators/rights/status"}}}var u=function(e){var t;return(null===(t=e.creatorRightStatus)||void 0===t?void 0:t.list)||a.list};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0,n=t.payload;return t.type===c.LOAD_CREATOR_RIGHT_STATUS.success?(0,r.Z)((0,o.Z)({},e),{list:n.data||[]}):e}},16762:function(e,t,n){"use strict";n.d(t,{Hp:function(){return p},Pq:function(){return m},sF:function(){return f}});var o=n(88483),r=n(61565),i=n(84160),a=n.n(i),c=n(12856),s=n(37262),u=n(15558),l=n(60594),d=n(56332),p=(0,o.Z)({},(0,l.FH)("currentUser",["GET","GET_COLUMN_CONTRIBUTIONS","UPDATE_FULLNAME","GET_REAL_NAME_STATUS"]),(0,l.co)("currentUser",["ACTIVE_USER"])),h=function(e){return{API:(0,o.Z)({types:p.GET,endpoint:"me"},e&&{query:{include:a()(e.map(c.decamelize)).join(",")}})}};function f(e){return function(t,n){var o=(0,d.ib)(n());if(o){var i=e.filter((function(e){return!(e in o)}));return i.length?t(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,o){var i=o.fnRefs;return(0,u.Z)(i,"fetchCurrentUser",(function(){return(0,s.Z)((function(t){return e(h(t.map((function(e){return e[0]})).flat()))}),queueMicrotask)})).apply(void 0,(0,r.Z)(t))}}(i)):void 0}}}var m=function(){return function(e,t){var n=t().currentUser;return e({API:{types:p.GET_COLUMN_CONTRIBUTIONS,endpoint:"/members/".concat(n,"/column-contributions"),method:"GET",query:{offset:0,limit:50,include:"data[*].column.articles_count,voteup_count"},fetchOptions:{credentials:"include"}}})}}},40198:function(e,t,n){"use strict";n.d(t,{Hp:function(){return r.Hp},ib:function(){return s.ib},wY:function(){return s.wY},ZP:function(){return u},sF:function(){return r.sF},Pq:function(){return r.Pq},dd:function(){return s.dd},W5:function(){return s.W5},pG:function(){return s.pG},cE:function(){return s.cE},me:function(){return a},xw:function(){return s.xw}});var o=n(52626),r=n(16762),i=n(92773);var a=(0,o.combineReducers)({columnContributions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===r.Hp.GET_COLUMN_CONTRIBUTIONS.success?t.payload.data.map((function(e){return e.column})):e}}),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.Hp.GET.success:return t.payload.urlToken;case i.Hp.UPDATE_AUTHINFO:return t.token||"";default:return e}},s=n(56332),u=c},56332:function(e,t,n){"use strict";n.d(t,{W5:function(){return s},cE:function(){return u},dd:function(){return p},ib:function(){return c},pG:function(){return l},wY:function(){return a},xw:function(){return d}});var o=n(52495),r=n(65406),i=n(91355),a=function(e){return e.currentUser},c=(0,r.P1)((function(e){var t;return null===(t=e.entities)||void 0===t?void 0:t.users}),a,(function(e,t){if(t){if(e[t])return e[t];var n=Object.keys(e).find((function(n){return e[n].id===t}));return n?e[n]:void 0}})),s=(0,r.P1)(c,(function(e){return Boolean(e)&&"organization"===e.userType})),u=(0,r.P1)(c,(function(e){var t;return null==e||null===(t=e.vipInfo)||void 0===t?void 0:t.isVip})),l=((0,r.P1)(c,(function(e){var t;return null==e||null===(t=e.vipInfo)||void 0===t?void 0:t.renameAwaitDays})),(0,r.P1)(c,(function(e){var t;return null==e||null===(t=e.vipInfo)||void 0===t?void 0:t.renameFrequency})),(0,r.P1)([c,function(e,t){return t}],(function(e,t){return Boolean(e&&t&&e.id===t.id)}))),d=function(e){return(0,o.useSelector)((function(t){return l(t,e)}))},p=((0,r.P1)(c,(function(e){var t;return[i.of.NO_SETTING,i.of.PASS].includes(null==e||null===(t=e.mcnUserInfo)||void 0===t?void 0:t.status)})),(0,r.P1)(c,(function(e){var t;return(null==e||null===(t=e.mcnUserInfo)||void 0===t?void 0:t.availableSource)||[]})),(0,r.P1)(c,(function(e){return Boolean(null==e?void 0:e.userType)&&"guest"!==e.userType})))},74514:function(e,t,n){"use strict";n.d(t,{ZP:function(){return g},eJ:function(){return p},s1:function(){return d},mc:function(){return f},CU:function(){return h}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(52626),s=n(12856),u=n(60594),l=(0,r.Z)({},(0,u.FH)("draftHistory",["GET_HISTORY","GET_DRAFT","REVERT"]),(0,u.co)("draftHistory",["RESET"]));function d(e,t){return function(n,o){var r=o().draftHistory.history["".concat(e,"_").concat(t)];return n({meta:{type:e,id:t},API:{types:l.GET_HISTORY,endpoint:r&&r.next?r.next:"draft-histories",query:{objectType:e,objectId:t}}})}}function p(e,t){return{meta:{versionType:e,versionId:t},API:{types:l.GET_DRAFT,endpoint:"draft-history",query:{versionType:e,id:t}}}}function h(e,t){return{meta:{versionType:e,versionId:t},API:{types:l.REVERT,method:"POST",endpoint:"draft-history/revert",body:(0,s.decamelizeKeys)({versionType:e,id:t})}}}function f(e,t){return{type:l.RESET,meta:{type:e,id:t}}}function m(e){return"".concat(e.meta.type,"_").concat(e.meta.id)}function v(e){return"".concat(e.meta.versionType,"_").concat(e.meta.versionId)}var Z=(0,c.combineReducers)({history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.GET_HISTORY.request:var n=m(t);return(0,o.Z)({},n,{items:e[n]?e[n].items:null,next:e[n]?e[n].next:null,isFetching:!0,isDrained:!1});case l.GET_HISTORY.success:var r=m(t);return(0,o.Z)({},r,{items:e[r]&&e[r].items?(0,a.Z)(e[r].items).concat((0,a.Z)(t.payload.data)):t.payload.data,next:t.payload.paging.next,isFetching:!1,isDrained:t.payload.paging.isEnd});case l.GET_HISTORY.failure:var i=m(t);return(0,o.Z)({},i,{items:e[i]?e[i].items:null,next:e[i]?e[i].next:null,isFetching:!1,isDrained:!0});case l.RESET:return{};default:return e}},drafts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.GET_DRAFT.request:var n=v(t);return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,{data:null,isFetching:!0}));case l.GET_DRAFT.success:var a=v(t);return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,{data:t.payload,isFetching:!1}));case l.GET_DRAFT.failure:var c=v(t);return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c,{data:null,isFetching:!1}));case l.RESET:return{};default:return e}}}),g=Z},436:function(e,t,n){"use strict";n.d(t,{Qm:function(){return a},jY:function(){return i}});var o=n(71103),r=n(52626);function i(e,t){return function(n){return n({type:"UPDATE_LIKE",UPDATE:{update:{eduSections:(0,o.Z)({},e,{isLiked:t})}}})}}function a(e,t,n){var r={voteUp:1,voteDown:2};return function(i){return i({type:"UPDATE_VOTE",UPDATE:{update:{eduSections:(0,o.Z)({},e,{voting:r[t],voteCount:n})}}})}}t.ZP=(0,r.combineReducers)({eduSectionState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}})},29329:function(e,t,n){"use strict";n.d(t,{Jb:function(){return h},P0:function(){return l},XO:function(){return p},ZP:function(){return f},aV:function(){return d}});var o=n(71103),r=n(88483),i=n(16600),a=n(60594),c=n(18585),s={emoticonGroupList:[],emoticonGroupDetail:{}},u=(0,r.Z)({},(0,a.FH)("emoticons",["GET_EMOTICONGROUP_LIST","GET_EMOTICONS_DETAIL"]),(0,a.co)("emoticons",["SAVE_EMOTICONS_TO_REDUX","CHANGE_SELECTED_EMOTICON_GROUP","CHANGE_SELECTED_EMOTICON_PANEL"]));function l(){return{API:{types:u.GET_EMOTICONGROUP_LIST,endpoint:"/me/sticker-groups"}}}function d(e){return{API:{types:u.GET_EMOTICONS_DETAIL,endpoint:"/sticker-groups/".concat(e),query:{business:"message"}},meta:{id:e}}}function p(e){return{type:u.CHANGE_SELECTED_EMOTICON_GROUP,meta:{id:e}}}function h(e){return{type:u.CHANGE_SELECTED_EMOTICON_PANEL,meta:{id:e}}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;if(t.type===u.GET_EMOTICONGROUP_LIST.success){var n=t.payload.data;return(0,i.Z)((0,r.Z)({},e),{emoticonGroupList:n,curEmoticonGroupId:t.payload.data[0].id})}if(t.type===u.GET_EMOTICONS_DETAIL.success){var a=t.meta.id,l=(0,i.Z)((0,r.Z)({},e.emoticonGroupDetail),(0,o.Z)({},a,t.payload.data)),d=(0,c.GM)(l,e.emoticonGroupList);return(0,i.Z)((0,r.Z)({},e),{emoticonGroupDetail:l,emoticonPanelList:d})}if(t.type===u.SAVE_EMOTICONS_TO_REDUX){var p=t.meta.data.id,h=(0,i.Z)((0,r.Z)({},e.emoticonGroupDetail),(0,o.Z)({},p,t.meta.data)),f=(0,c.GM)(h,e.emoticonGroupList);return(0,i.Z)((0,r.Z)({},e),{emoticonGroupDetail:h,emoticonPanelList:f})}if(t.type===u.CHANGE_SELECTED_EMOTICON_GROUP){var m=t.meta.id;return(0,i.Z)((0,r.Z)({},e),{curEmoticonGroupId:m})}if(t.type===u.CHANGE_SELECTED_EMOTICON_PANEL){var v=t.meta.id;return(0,i.Z)((0,r.Z)({},e),{curEmoticonPanelId:v})}return e}},75765:function(e,t,n){"use strict";n.d(t,{Hw:function(){return Z},N7:function(){return g}});var o=n(71103),r=n(88483),i=n(16600),a=n(30874),c=n.n(a),s=n(2684),u=n(67934),l=n(53839),d=n(72928),p=n.n(d),h=n(35435),f=n(40198),m=n(36373),v={users:{},questions:{},answers:{},articles:{},columns:{},topics:{},roundtables:{},favlists:{},comments:{},notifications:{},ebooks:{},activities:{},feeds:{},pins:{},promotions:{},drafts:{},chats:{},posts:{},clubs:{},clubTags:{},zvideos:{},zvideoContributions:{},briefs:{},eduCourses:{}},Z=function(e,t){var n=t.schema,o=t.id,r=t.urlToken;return n?e["".concat(n,"s")][r||o]:t},g=function(e,t){return Z(e.entities,t)};t.ZP=c()((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=arguments.length>1?arguments[1]:void 0;if(n.type===f.Hp.GET.success)return n.payload.isZombie=(0,h.Eh)(),(0,i.Z)((0,r.Z)({},t),{users:p()((0,i.Z)((0,r.Z)({},t.users),(0,o.Z)({},n.payload.urlToken,(0,r.Z)({},t.users[n.payload.id],t.users[n.payload.urlToken],n.payload))),n.payload.id)});if(n.type===f.Hp.ACTIVE_USER)return(0,i.Z)((0,r.Z)({},t),{users:(0,i.Z)((0,r.Z)({},t.users),(0,o.Z)({},n.currentUser,(0,i.Z)((0,r.Z)({},t.users[n.currentUser]),{isActive:!0})))});if(n.entities&&(t=(0,m.Z)(t,"function"==typeof(null===(e=n.meta)||void 0===e?void 0:e.entitiesPrefilter)?n.meta.entitiesPrefilter(n.entities):n.entities)),n.UPDATE){var a=n.type,c=n.payload,s=n.UPDATE,u=s.request,l=s.success,d=s.failure,Z=s.update,g=n.err;if(a.endsWith("request")&&u&&(t=(0,m.Z)(t,"function"==typeof u?u(c,n):u)),a.endsWith("success")&&l&&(t=(0,m.Z)(t,"function"==typeof l?l(c,n):l)),a.endsWith("failure")&&d){var E="function"==typeof d?d(g):d;t=(0,m.Z)(t,E)}else Z&&(t=(0,m.Z)(t,Z))}return t}),(0,s.y)({users:u.r,favlists:l.B}))},92773:function(e,t,n){"use strict";n.d(t,{GM:function(){return l},Hp:function(){return s},JT:function(){return d},ph:function(){return u}});var o=n(88483),r=n(97645),i=n.n(r),a=n(91355),c=n(60594),s=(0,o.Z)({},(0,c.co)("env",["UPDATE_USERAGENT","SET_TRAFFICSOURCE","UPDATE_EDITION","SET_CTX","SET_THEME","SET_APP_HEADER_THEME","TOGGLE_ENABLE_SHORTCUT","GET_ANNOUNCEMENT","SET_REFERER","UPDATE_CONF","UPDATE_LOGGED","UPDATE_AUTHINFO","UPDATE_APPVIEW_CONFIG","UPDATE_TRAFFIC_FREE","SET_UDID","SET_MODE","SET_ENV_VARS"]),(0,c.FH)("env",["GET_IPINFO"]));function u(){return{API:{types:s.GET_IPINFO,endpoint:"ip_info"},FAILSAFE:!0}}function l(e){return{type:s.UPDATE_USERAGENT,payload:e}}function d(e){return e?i().delete(a.Xq):i().set(a.Xq,!1),{type:s.TOGGLE_ENABLE_SHORTCUT,payload:e}}},92799:function(e,t,n){"use strict";n.d(t,{uC:function(){return p.uC},tQ:function(){return p.tQ},ZP:function(){return h},cM:function(){return p.cM},H8:function(){return p.H8},Hu:function(){return p.Hu},Xj:function(){return p.Xj},nR:function(){return p.nR},ph:function(){return l.ph},Kv:function(){return p.Kv},fG:function(){return p.fG},XE:function(){return p.XE},cq:function(){return p.cq},hV:function(){return p.hV},JT:function(){return l.JT},Uh:function(){return p.Uh},GM:function(){return l.GM},dD:function(){return p.dD}});var o=n(88483),r=n(16600),i=n(92839),a=n(96959),c=n(52626),s=n(32705),u=n.n(s),l=n(92773),d=(0,c.combineReducers)({ab:a.default,abV2:i.Z,userAgent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===l.Hp.UPDATE_USERAGENT){var n=t.payload;return(0,o.Z)({},e,u()(n))}return e},appViewConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===l.Hp.UPDATE_APPVIEW_CONFIG){var n=t.payload,i=n.can_auto_load_image,a=n.font_resize;return(0,r.Z)((0,o.Z)({},e),{can_auto_load_image:i,font_resize:a||1})}return e},ctx:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===l.Hp.SET_CTX){var n=t.payload;return n}return e},trafficSource:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(t.type===l.Hp.SET_TRAFFICSOURCE){var n=t.payload;return n}return e},edition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{beijing:!1,baidu:!1,sogou:!1,baiduBeijing:!1,sogouBeijing:!1,sogouInput:!1},t=arguments.length>1?arguments[1]:void 0;return t.type===l.Hp.UPDATE_EDITION?(0,o.Z)({},e,t.payload):t.type===l.Hp.GET_IPINFO.success&&"北京"===t.payload.cityName?(0,r.Z)((0,o.Z)({},e),{beijing:!0,baiduBeijing:e.baidu,sogouBeijing:e.sogou}):e},theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===l.Hp.SET_THEME?"dark"===t.payload?"dark":"light":e},appHeaderTheme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{current:"normal",disable:!0,normal:{bgColor:"GBK99A"},custom:{bgColor:"GBK99A"}},t=arguments.length>1?arguments[1]:void 0;if(t.type===l.Hp.SET_APP_HEADER_THEME){var n=t.payload||{current:"normal"};return(0,o.Z)({},e,n)}return e},enableShortcut:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===l.Hp.TOGGLE_ENABLE_SHORTCUT?t.payload:e},referer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===l.Hp.SET_REFERER?t.payload:e},xUDId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===l.Hp.SET_UDID?t.payload:e},mode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ssr",t=arguments.length>1?arguments[1]:void 0;return t.type===l.Hp.SET_MODE&&t.payload?t.payload:e},conf:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===l.Hp.UPDATE_CONF?(0,o.Z)({},e,t.payload):e},xTrafficFreeOrigin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(t.type===l.Hp.UPDATE_TRAFFIC_FREE){var n=t.payload,o=void 0===n?"":n;return o}return e},ipInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===l.Hp.GET_IPINFO.success?t.payload:e},logged:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===l.Hp.UPDATE_LOGGED?t.payload:e},vars:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===l.Hp.SET_ENV_VARS?(0,o.Z)({},e,t.payload):e}}),p=n(10754),h=d},10754:function(e,t,n){"use strict";n.d(t,{uC:function(){return E},tQ:function(){return T},cM:function(){return u},H8:function(){return f},Hu:function(){return d},Xj:function(){return C},nR:function(){return h},Kv:function(){return Z},fG:function(){return _},XE:function(){return m},cq:function(){return v},hV:function(){return A},Uh:function(){return l},dD:function(){return p}});var o=n(52495),r=n(65406),i=n(91355),a=["helpcenter_pc","pc_comment","pc_ppt_publish","vessay_v2_sdk","use_biz_comment","pc_player_rp","pc_pin","report_page","update_react","pinvideo","pc_player_hevc","player_vendors","ks_prefetch"],c=n(31995),s=n(40198),u=function(e){return e.env.edition},l=function(e){return e.env.userAgent},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.includeTablet,o=void 0!==n&&n,r=l(e),i=r.Mobile||r.iOS,a=r.Tablet;return o?i:i&&!a},p=function(e){return(0,o.useSelector)((function(t){return d(t,e)}))},h=(0,r.P1)(l,(function(e){return e.Zhihu||e.ZhihuHybrid})),f=(0,r.P1)(l,(function(e){return!e.isBot})),m=(0,r.P1)(d,f,s.ib,(function(e,t,n){return(t||!n)&&e})),v=((0,r.P1)(m,u,(function(e,t){return e&&t.baidu})),(0,r.P1)(m,u,(function(e,t){return e&&t.sogouBeijing})),(0,r.P1)(m,u,(function(e,t){return e&&!t.sogouBeijing&&!t.baidu&&!t.miniProgram}))),Z=function(e){return e.env.referer},g=["zhihu.com/special/19590770"],E=(0,r.P1)((function(e){return e.env.ab.config.params}),(function(e,t){return t}),(function(e,t){var n,o;return(null==t?void 0:t.length)>0&&a.includes(t),null!==(o=null===(n=null==e?void 0:e.find((function(e){return e.id===t})))||void 0===n?void 0:n.value)&&void 0!==o?o:null})),T=(0,c.Z)((function(e){return e.env.abV2.config.paramMap}),(function(e,t){return t}),(function(e,t){var n,o,r=t.paramId;t.mock;return null!==(o=null==e||null===(n=e[r])||void 0===n?void 0:n.value)&&void 0!==o?o:null}));(0,r.P1)(v,(function(e){return g.some((function(t){return e.env.referer.includes(t)}))}),(function(e,t){return e&&!t}));function C(e){var t=e.env;return"office"===(null==t?void 0:t.trafficSource)}var A=function(e,t){var n,o=t.type,r=t.id;return!!i.o$[o]&&(e.env.userAgent.Mobile&&(null===(n=i.o$[o])||void 0===n?void 0:n.includes(String(r))))},_=function(e){return"1"===E(e,"report_page")}},85570:function(e,t,n){"use strict";n.d(t,{I3:function(){return m},NK:function(){return Z},Vf:function(){return h},ZP:function(){return E},k1:function(){return v},n2:function(){return f},xb:function(){return d}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(12856),s=n(15390),u=n(60594),l=n(56332),d=(0,u.FH)("favlist",["GET_HOT_FAVLISTS","GET_CURRENT_USER_FAVLISTS","UPDATE_FOLLOWERS","UPDATE_FAVLIST_ITEM","ADD_FAVLIST"]),p=(0,u.co)("favlist",["UPDATE_FAV_RELATIONS"]);function h(e,t){var n=t.type,o=t.id;return function(t,r){return t({meta:{currentUser:r().currentUser,type:n,id:o},API:{types:d.ADD_FAVLIST,endpoint:"/collections",method:"POST",query:{include:"updated_time,answer_count,follower_count"},zsEncrypt:!0,bodyType:"json",body:(0,c.decamelizeKeys)(e)},schema:s.l.COLLECTION})}}function f(e,t){return function(n,o){var r=o(),i=r.currentUser,a=(r.favlists[i]||{}).paging,c=void 0===a?{}:a;return n({meta:{currentUser:i},API:{endpoint:c.next||"/collections/contents/".concat(e,"/").concat(t),types:d.GET_CURRENT_USER_FAVLISTS,query:c.next?void 0:{offset:0,limit:5}},schema:s.l.FAVLIST_ARRAY})}}function m(e,t){return function(n,r){var i=r(),a=i.entities.favlists,c=(0,l.ib)(i).id,s=a[e],u=t?1:-1;return n({API:{types:d.UPDATE_FOLLOWERS,endpoint:"collections/".concat(e,"/followers").concat(t?"":"/".concat(c)),method:t?"POST":"DELETE"},UPDATE:{request:{favlists:(0,o.Z)({},e,{followerCount:s.followerCount+u,isFollowing:t})},failure:{favlists:(0,o.Z)({},e,s)}}})}}var v=function(e){var t=e.contentId,n=e.contentType,o=e.relations;return{type:p.UPDATE_FAV_RELATIONS,contentId:t,contentType:n,payload:{relations:o}}};function Z(e,t,n){return function(r,i){var a,s=i().entities.favlists[e].answerCount,u=null===(a=i().favlists.relations["".concat(n,"_").concat(t)])||void 0===a?void 0:a[e],l=u?{endpoint:"/collections/".concat(e,"/contents/").concat(t),method:"DELETE",query:(0,c.decamelizeKeys)({contentType:n})}:{endpoint:"/collections/".concat(e,"/contents"),method:"POST",query:(0,c.decamelizeKeys)({contentId:t,contentType:n})},p=l.endpoint,h=l.method,f=l.query;return r({API:{types:d.UPDATE_FAVLIST_ITEM,endpoint:p,method:h,query:f},meta:{contentType:n,contentId:t,collectionId:e,collected:!u},UPDATE:{request:function(){return{favlists:(0,o.Z)({},e,{answerCount:u?s-1:s+1})}},failure:function(){return{favlists:(0,o.Z)({},e,{answerCount:s})}}}})}}var g={isFetching:!1,isDrained:!1,ids:[],offset:0,limit:10};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{relations:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.ADD_FAVLIST.success:var n,c=t.meta,s=c.currentUser,u=c.type,l=c.id,h="".concat(u,"_").concat(l);return(0,i.Z)((0,r.Z)({},e),(n={},(0,o.Z)(n,s,(0,i.Z)((0,r.Z)({},e[s]),{ids:[t.payload.collection.id].concat((0,a.Z)(e[s].ids))})),(0,o.Z)(n,"relations",(0,i.Z)((0,r.Z)({},e.relations),(0,o.Z)({},h,(0,i.Z)((0,r.Z)({},e.relations[h]),(0,o.Z)({},t.payload.collection.id,!1))))),n));case d.GET_CURRENT_USER_FAVLISTS.request:var f=t.meta.currentUser;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},f,(0,i.Z)((0,r.Z)({},g,e[f]),{isFetching:!0,isDrained:!1})));case d.GET_CURRENT_USER_FAVLISTS.success:var m=t.result,v=t.meta.currentUser,Z=t.payload,E=m.filter((function(t){return!e[v].ids.includes(t)}));return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},v,(0,i.Z)((0,r.Z)({},g,e[v]),{isFetching:!1,ids:(0,a.Z)(e[v].ids).concat((0,a.Z)(E)),isDrained:Z.paging.isEnd,paging:Z.paging})));case d.GET_CURRENT_USER_FAVLISTS.failure:var T=t.meta.currentUser;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},T,(0,i.Z)((0,r.Z)({},e[T]),{isFetching:!1})));case p.UPDATE_FAV_RELATIONS:var C=t.contentId,A=t.contentType,_=t.payload,y="".concat(A,"_").concat(C);return(0,i.Z)((0,r.Z)({},e),{relations:(0,i.Z)((0,r.Z)({},e.relations),(0,o.Z)({},y,(0,r.Z)({},e.relations[y],_.relations)))});case d.UPDATE_FAVLIST_ITEM.success:var S=t.meta,I=S.contentId,b=S.contentType,w=S.collectionId,R=S.collected,N="".concat(b,"_").concat(I);return(0,i.Z)((0,r.Z)({},e),{relations:(0,i.Z)((0,r.Z)({},e.relations),(0,o.Z)({},N,(0,i.Z)((0,r.Z)({},e.relations[N]),(0,o.Z)({},w,R))))});default:return e}}},36373:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var o=n(65390),r=n(88483);function i(e,t){var n=(0,r.Z)({},e);return Object.keys(t).forEach((function(e){var i=(0,r.Z)({},n[e]),a=t[e]||{};Object.keys(a).forEach((function(e){var t=a[e],n=(0,r.Z)({},i[e]);if(t&&"object"==typeof t){var c=!0,s=!1,u=void 0;try{for(var l,d=Object.keys(t)[Symbol.iterator]();!(c=(l=d.next()).done);c=!0){var p=l.value,h=n[p],f=t[p];!Array.isArray(h)&&(0,o.Z)(h,Object)&&(0,o.Z)(f,Object)?n[p]=(0,r.Z)({},h,f):n[p]=f}}catch(e){s=!0,u=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}i[e]=n}else i[e]=t})),n[e]=i})),n}},43270:function(e,t,n){"use strict";n.d(t,{ZP:function(){return f},qS:function(){return l.q}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(52626),s=n(60594),u=(n(12856),(0,s.FH)("host",["GET_USER_PERMISSIONS","UPDATE_ROUNDTABLE_SUBJECT","GET_ROUNDTABLE_SUBJECT","GET_ROUNDTABLE_APPLICATIONS","GET_ONLINE_ROUNDTABLES","UPDATE_ROUNDTABLE_APPLY","CREATE_ROUNDTABLE_APPLY","GET_ROUNDTABLE_APPLY","GET_ROUNDTABLE_DETAIL","GET_ROUNDTABLE_INCLUDEDRESOURCE","GET_ROUNDTABLE_HOT_QUESTIONS","UPDATE_HIDDEN_ROUNDTABLE_INCLUDEDRESOURCE","UPDATE_ROUNDTABLE_INCLUDERESOURCE","TOGGLE_ROUNDTABLE_HOT_QUESTION_HIDDEN","POST_ROUNDTABLE_INCLUDEDRESOURCE","ADD_ROUNDTABLE_HOT_QUESTIONS","UPDATE_ROUNDTABLE_HOT_QUESTION","SEARCH_ROUNDTABLE_INCLUDED_RESOURCE","BATCH_ADD_ROUNDTABLE_INCLUDED_RESOURCE","GET_ROUNDTABLE_WARMUP_CONTENTS","TOGGLE_WARMUP_CONTENT_HIDDEN","SET_WARMUP_CONTENT_WEIGHT","GET_SPECIAL_APPLICATIONS","GET_SPECIAL_APPLY_CENSOR_HISTORY","GET_SPECIAL_DRAFT","SAVE_SPECIAL_DRAFT","SUBMIT_SPECIAL_APPLY"]));var l=n(8961),d=n(39),p=(0,c.combineReducers)({subjects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===u.GET_ROUNDTABLE_SUBJECT.success){var n=t.payload.data;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n.id,n))}return e},applications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{total:0},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload,r=t.meta;return n===u.GET_ROUNDTABLE_APPLICATIONS.success?(0,l.q)(e,r.current,o):e},online:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{total:0},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload,r=t.meta;return n===u.GET_ONLINE_ROUNDTABLES.success?(0,l.q)(e,r.current,o):e},applies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===u.GET_ROUNDTABLE_APPLY.success){var n=t.payload.data;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n.id,n))}return e},details:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.meta,a=t.payload;return t.type===u.GET_ROUNDTABLE_DETAIL.success?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n.id,a.data)):e},includedResource:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload,s=t.meta;if(n===u.GET_ROUNDTABLE_INCLUDEDRESOURCE.success)return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},s.id,(0,r.Z)({},e[s.id],(0,l.q)(e[s.id]||{},s.current,c,{dataKey:"objectId"}))));if(n===u.UPDATE_HIDDEN_ROUNDTABLE_INCLUDEDRESOURCE.success)return(0,d.Uy)(e,(function(e){e[s.id].entities[s.objectId].isDeleted=s.isDeleted}));if(n===u.UPDATE_ROUNDTABLE_INCLUDERESOURCE.success)return(0,d.Uy)(e,(function(e){Object.assign(e[s.id].entities[s.resource.objectId],s.body)}));if(n===u.POST_ROUNDTABLE_INCLUDEDRESOURCE.success){var p=t.payload.payload;if(p){var h=p.objectId;return(0,d.Uy)(e,(function(e){e[s.id].pages[1]=e[s.id].pages[1]?[h].concat((0,a.Z)(e[s.id].pages[1])):[h],e[s.id].entities[h]=p}))}}return e},hotQuestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,c=t.meta;return n===u.GET_ROUNDTABLE_HOT_QUESTIONS.success?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c.id,(0,r.Z)({},e[c.id],(0,l.q)(e[c.id]||{},c.current,a,{dataKey:"question.id"})))):n===u.TOGGLE_ROUNDTABLE_HOT_QUESTION_HIDDEN.success?(0,d.Uy)(e,(function(e){e[c.id].entities[c.questionId].isDeleted=c.isDeleted})):n===u.UPDATE_ROUNDTABLE_HOT_QUESTION.success?(0,d.Uy)(e,(function(e){Object.assign(e[c.id].entities[c.question.id],c.body)})):e},warmupContents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,c=t.meta;return n===u.GET_ROUNDTABLE_WARMUP_CONTENTS.success?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c.roundtableId,(0,r.Z)({},e[c.roundtableId],(0,l.q)(e[c.roundtableId]||{},c.current,a,{dataKey:"id"})))):n===u.TOGGLE_WARMUP_CONTENT_HIDDEN.success?(0,d.Uy)(e,(function(e){e[c.roundtableId].entities[c.contentId].isDeleted=c.isDeleted})):n===u.SET_WARMUP_CONTENT_WEIGHT.success?(0,d.Uy)(e,(function(e){e[c.roundtableId].entities[c.contentId].weight=c.weight})):e},batchInclude:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload,c=t.meta;return n===u.SEARCH_ROUNDTABLE_INCLUDED_RESOURCE.success?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c.id,(0,r.Z)({},e[c.id],(0,l.q)(e[c.id]||{},c.current,a)))):e}}),h=(0,c.combineReducers)({applications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{total:0,pages:{},entities:{}},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.meta,r=t.payload;return n===u.GET_SPECIAL_APPLICATIONS.success?(0,l.q)(e,o.current,{total:r.paging.total,data:r.data}):e},censorHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.meta,c=t.payload;return n===u.GET_SPECIAL_APPLY_CENSOR_HISTORY.success?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a.draftId,c.data)):e},drafts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return n===u.GET_SPECIAL_DRAFT.success?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a.draftId,a)):e}});var f=(0,c.combineReducers)({roundtable:p,special:h})},8961:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var o=n(71103),r=n(88483),i=n(16600),a=n(95114),c=n.n(a),s=function(e,t,n){var a,s=n.total,u=n.data,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=l.dataKey,p=void 0===d?"id":d,h=l.pagesKey,f=void 0===h?"pages":h,m=l.entitiesKey,v=void 0===m?"entities":m,Z=l.totalKey,g=void 0===Z?"total":Z,E=u.map((function(e,n){return"index"===p?"".concat(t,"-").concat(n):c()(e,p)}));return(0,i.Z)((0,r.Z)({},e),(a={},(0,o.Z)(a,g,s),(0,o.Z)(a,v,E.reduce((function(e,t,n){return e[t]=u[n],e}),(0,r.Z)({},e[v]||{}))),(0,o.Z)(a,f,(0,i.Z)((0,r.Z)({},e[f]),(0,o.Z)({},t,E))),a))}},7958:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var o=(0,n(60594).FH)("interactText",["GET_INTERACT_TEXT"]);function r(e,t){return{API:{types:o.GET_INTERACT_TEXT,endpoint:"/".concat(e,"/").concat(t,"/segments")},FAILSAFE:!0}}},30060:function(e,t,n){"use strict";n.d(t,{KR:function(){return d},S2:function(){return m},T$:function(){return p},ZP:function(){return f},gO:function(){return h},yM:function(){return l}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(15390),s=n(60594),u=(0,r.Z)({},(0,s.FH)("label",["GET","GET_RECOGNIZER_LIST"])),l=function(e,t){return t&&e.label["".concat(t.type,"_").concat(t.id)]},d=function(e,t){return e.label.recognizerLists[t]};function p(e,t){return{itemType:e,id:t,API:{types:u.GET,endpoint:"/".concat(e,"s/").concat(t,"/labels")}}}function h(e){return function(t,n){var o=(n().label.recognizerLists[e]||{}).paging,i=(void 0===o?{}:o).next;return t({answerId:e,API:(0,r.Z)({types:u.GET_RECOGNIZER_LIST},i?{endpoint:i}:{endpoint:"answers/".concat(e,"/recognizers"),query:{include:"data[*].is_following,is_followed,badge[?(type=best_answerer)].topics"}}),schema:c.l.USER_ARRAY})}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{recognizerLists:{}},t=arguments.length>1?arguments[1]:void 0;if(t.type===u.GET.success){var n=t.id,c=t.itemType,s=t.payload;e=(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},"".concat(c,"_").concat(n),s))}if(t.type===u.GET_RECOGNIZER_LIST.request){var l=t.answerId,d=e.recognizerLists[l]||{};return(0,i.Z)((0,r.Z)({},e),{recognizerLists:(0,o.Z)({},l,(0,i.Z)((0,r.Z)({},d),{paging:(0,i.Z)((0,r.Z)({},d.paging),{isLoading:!0})}))})}if(t.type===u.GET_RECOGNIZER_LIST.success){var p=t.answerId,h=t.payload.paging,f=t.result,m=e.recognizerLists[p]||{};return(0,i.Z)((0,r.Z)({},e),{recognizerLists:(0,i.Z)((0,r.Z)({},e.recognizerLists),(0,o.Z)({},p,{data:(0,a.Z)(m.data||[]).concat((0,a.Z)(f)),paging:(0,i.Z)((0,r.Z)({},m.paging,h),{isLoading:!1})}))})}return e}var m=function(e,t){return t&&"boolean"==typeof t.isLabeled}},96053:function(e,t,n){"use strict";n.d(t,{VZ:function(){return o.VZ},W2:function(){return o.W2},kf:function(){return i},Fd:function(){return o.Fd},QT:function(){return o.QT},TS:function(){return o.TS},V6:function(){return o.V6}});var o=n(65138),r=n(71103),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.itemsKey,o=void 0===n?"items":n;return e||(0,r.Z)({isFetching:!1,isDrained:!1},o,[])}},65138:function(e,t,n){"use strict";n.d(t,{Fd:function(){return f},QT:function(){return g},TS:function(){return Z},V6:function(){return m},VZ:function(){return d},W2:function(){return p}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(17312),s=n.n(c),u=n(47417),l=n.n(u),d=10,p=5;function h(e){return e.id}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mapActionToKey,c=void 0===n?h:n,s=t.additionalCase,u=t.additionalCaseTypes,l=void 0===u?[]:u,d=t.addSuccessType,p=void 0===d?"addSuccessType does not exist":d,f=t.addAtTop,m=void 0===f||f,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isDrained:!1,ids:[],newIds:[],totals:0,antiSpider:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return(0,i.Z)((0,r.Z)({},e),{isFetching:!0,error:!1,antiSpider:!1});case g:var n=e.ids,o=(t.result||[]).filter((function(e){return!e||!n.includes(e)})),c=t.isPrevious,u=t.isPrevDrained,l=t.isDrained,d=t.previous,h=t.next,f=t.totals,v=t.payload,T=null,C=t.rootComment,A=t.topComments;T=C&&A?c?(0,a.Z)(o).concat((0,a.Z)(n)):[C].concat((0,a.Z)(A.result),(0,a.Z)(n),(0,a.Z)(o)):c?(0,a.Z)(o).concat((0,a.Z)(n)):(0,a.Z)(n).concat((0,a.Z)(o));var _=c||!n.length,y=!c||!n.length;return(0,r.Z)((0,i.Z)((0,r.Z)((0,i.Z)((0,r.Z)({},e),{filterItems:null==v?void 0:v.filterItems,isFetching:!1,totals:f,topComments:A,ids:T,newIds:t.result}),_?{isPrevDrained:u,previous:d}:{},y?{isDrained:l,next:h}:{}),{error:!1,sensitiveLevel:null==v?void 0:v.sensitiveLevel,warning:null==v?void 0:v.warning,warnNotes:null==v?void 0:v.warnNotes,antiSpider:!1}),(null==v?void 0:v.session)?{sessionId:v.session.id}:{});case E:var S,I,b,w;return 101===(null===(S=t.err)||void 0===S||null===(I=S.payload)||void 0===I?void 0:I.code)&&"ZERR_NOT_LOGIN"===(null===(b=t.err)||void 0===b||null===(w=b.payload)||void 0===w?void 0:w.message)?(0,i.Z)((0,r.Z)({},e),{isFetching:!1,isDrained:!0,error:!1,antiSpider:!0,ids:[]}):(0,i.Z)((0,r.Z)({},e),{isFetching:!1,isDrained:!0,error:!0,antiSpider:!1});case p:return"commercial"===t.question.questionType?e:(0,i.Z)((0,r.Z)({},e),{totals:e.totals+1,ids:m?[t.result].concat((0,a.Z)(e.ids)):(0,a.Z)(e.ids).concat([t.result]),newIds:m?[t.result].concat((0,a.Z)(e.newIds)):(0,a.Z)(e.newIds).concat([t.result])});default:return s?s(e,t):e}},Z=e.request,g=e.success,E=e.failure,T=(0,a.Z)(Object.values(e)).concat((0,a.Z)(l),[p]);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(T.includes(t.type)){var n=c(t);if(void 0!==n)return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,v(e[n],t)))}return e}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mapActionToKey,c=void 0===n?h:n,s=t.additionalCase,u=t.additionalCaseTypes,l=void 0===u?[]:u,d=t.addSuccessType,p=void 0===d?"addSuccessType does not exist":d,f=t.addAtTop,m=void 0===f||f,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:void 0,isLoadedOnce:!1,isDrained:!1,isFetching:!1,ids:[],totals:0},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.offset;switch(n){case Z:return(0,i.Z)((0,r.Z)({},e),{isFetching:!0});case g:var c=t.totals,u=t.isDrained,l=t.result,d=void 0===l?[]:l,h=t.limit,f=void 0===h?20:h,v=e.ids,T=d.filter((function(e){return!v.includes(e)})),C=v.slice(o,o+f).filter(Boolean),A=f-C.length-T.length,_=(0,a.Z)(C).concat((0,a.Z)(T),(0,a.Z)(A<=0?[]:Array.from({length:A}).map((function(){return!1})))),y=c||v.length+T.length;return v.length=y,(0,i.Z)((0,r.Z)({},e),{isDrained:u,isLoadedOnce:!0,isFetching:!1,ids:(0,a.Z)(v.slice(0,o)).concat((0,a.Z)(_),(0,a.Z)(v.slice(o+_.length))).slice(0,y),totals:c});case E:var S=t.limit,I=e.ids;return(0,i.Z)((0,r.Z)({},e),{error:new Error,isLoadedOnce:!0,isFetching:!1,isDrained:!0,ids:(0,a.Z)(I.slice(0,o)).concat((0,a.Z)(Array.from({length:S}).map((function(){return!1}))))});case p:var b=e.ids,w=e.totals;return(0,i.Z)((0,r.Z)({},e),{totals:w+1,ids:m?[t.result].concat((0,a.Z)(b)):(0,a.Z)(b).concat([t.result])});default:return s?s(e,t):e}},Z=e.request,g=e.success,E=e.failure,T=(0,a.Z)(Object.values(e)).concat((0,a.Z)(l),[p]);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(T.includes(t.type)){var n=c(t);if(void 0!==n)return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,v(e[n],t)))}return e}}function v(e,t){if(Array.isArray(e))return e.concat(t)}var Z=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s().apply(void 0,[{}].concat((0,a.Z)(t),[v]))};function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.defaultState,a=t.mergeState,c=void 0===a?function(e,t){var n=e.items,o=t.result;return{items:n&&n.length?o.filter((function(e){return!n.find((function(t){return l()(t,e)}))})):o,next:t.next}}:a,s=t.additionCase,u=t.keySelector,d=void 0===u?function(e){return e.id}:u,p=(0,r.Z)({isFetching:!1,isDrained:!1},n);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case e.request:return Z(t,(0,o.Z)({},d(n),(0,i.Z)((0,r.Z)({},p),{isFetching:!0})));case e.success:var a=d(n),u=n.payload||{},l=u.paging,h=(void 0!==l&&l).isEnd;return Z(t,(0,o.Z)({},a,(0,r.Z)({isFetching:!1,isDrained:h},c(t[a],n))));case e.failure:return Z(t,(0,o.Z)({},d(n),{isFetching:!1,isDrained:!0}));default:return s?s(t,n):t}}}},23751:function(e,t,n){"use strict";n.d(t,{L1:function(){return E},O:function(){return h},S7:function(){return Z},Yu:function(){return m},ZP:function(){return A},gf:function(){return T},qo:function(){return f},uJ:function(){return g},zq:function(){return v}});var o=n(88483),r=n(16600),i=n(37015),a=n(12856),c=n(59083),s=n(51433),u=n(91355),l=n(60594),d=n(24316),p=(0,o.Z)({},(0,l.FH)("login",["DIGITS","LOGIN","VALIDATE_LOGIN_FORM","VALIDATE_LOGIN_DIGITS","GET_WECHAT_SOCIAL_INFO","SMS_IDENTIFY"]),(0,l.co)("login",["RESET_LOGIN_VALIDATE_RESULT"]),(0,l.FH)("qrcodeLogin",["TOKEN","SCAN_STATUS"]));function h(e){return{API:{types:p.SMS_IDENTIFY,endpoint:"v3/oauth/guardians/verify",query:{phone_no:e}}}}function f(e){return{API:{types:p.SMS_IDENTIFY,endpoint:"v3/oauth/guardians/verify",method:"POST",fetchOptions:{credentials:"include",zsEncrypt:!0,body:(0,c.Z)({phone_no:e})}}}}function m(e,t){var n={phoneNo:e};return t&&(n.smsType=t),function(e){return e({API:{types:p.DIGITS,endpoint:"v3/oauth/sign_in/digits",method:"POST",fetchOptions:{credentials:"include",zsEncrypt:!0,body:(0,c.Z)((0,a.decamelizeKeys)(n))}}}).then(null,(function(t){t&&t.err&&(120001===t.err.payload.code&&e((0,d.c0)("页面已过期，请刷新重试","red")))}))}}function v(e){return function(t){return t({API:{types:p.LOGIN,endpoint:"v3/oauth/sign_in",method:"POST",fetchOptions:{credentials:"include",zsEncrypt:!0,body:(0,c.Z)((0,a.decamelizeKeys)(e))}},NOTIFICATION:!1}).catch((function(n){if(null==n?void 0:n.payload){var o=n.payload,r=o.code,a=o.message;return(null==e?void 0:e.refreshToken)?((0,s.qz)(),void i.ZP.increment("token.error.refresh.".concat(r))):t((0,d.c0)(120001===r?"页面已过期，请刷新重试":a,"red"))}}))}}function Z(){return{type:p.RESET_LOGIN_VALIDATE_RESULT}}function g(e){return function(t){return t(Z()),"digits"===e.grantType?(e.phoneNo=e.username,t(function(e){return{API:{types:p.VALIDATE_LOGIN_DIGITS,endpoint:"v3/oauth/validate/sign_in/digits",method:"POST",fetchOptions:{credentials:"include",zsEncrypt:!0,body:(0,c.Z)((0,a.decamelizeKeys)(e))}}}}(e)).then((function(n){if(n&&n.payload&&n.payload.success)return t(v(e))}))):t(v(e))}}function E(){return function(e){return e({API:{types:p.TOKEN,endpoint:"v3/account/api/login/qrcode",method:"POST",fetchOptions:{credentials:"include"}},NOTIFICATION:!1})}}function T(e){var t=e.token;return function(e){return e({API:{types:p.SCAN_STATUS,endpoint:"v3/account/api/login/qrcode/".concat(t,"/scan_info"),method:"GET",fetchOptions:{credentials:"include"}},NOTIFICATION:!1})}}var C={loginUnregisteredError:!1,loginBindWechatError:!1,loginConfirmError:null,sendDigitsError:null,needSMSIdentify:!1,validateDigitsError:!1,loginConfirmSucceeded:null,qrcodeLoginToken:"",qrcodeLoginScanStatus:0,qrcodeLoginError:null,qrcodeLoginReturnNewToken:!1};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,n=t.type;if(n===p.RESET_LOGIN_VALIDATE_RESULT)return(0,r.Z)((0,o.Z)({},C),{qrcodeLoginToken:e.qrcodeLoginToken,qrcodeLoginScanStatus:e.qrcodeLoginScanStatus,qrcodeLoginError:e.qrcodeLoginError,qrcodeLoginReturnNewToken:e.qrcodeLoginReturnNewToken});if(n===p.LOGIN.success){var i=(null==t?void 0:t.payload)||{},a=i.verification,c=i.refreshToken;return c&&(0,s.ZP)(c),(0,r.Z)((0,o.Z)({},e),{loginConfirmSucceeded:!0,verification:a})}if(n===p.LOGIN.failure){var d=t.err.payload;return(0,r.Z)((0,o.Z)({},e),{loginConfirmSucceeded:!1,loginUnregisteredError:d.code===u.fH,loginBindWechatError:100077===d.code,loginConfirmError:(0,o.Z)({},e.loginConfirmError,(0,l.O1)(d))})}if(n===p.DIGITS.failure)return(0,r.Z)((0,o.Z)({},e),{sendDigitsError:(0,o.Z)({},e.sendDigitsError,(0,l.O1)(t.err.payload)),needSMSIdentify:410001===t.err.payload.code});if(n===p.VALIDATE_LOGIN_DIGITS.failure)return(0,r.Z)((0,o.Z)({},e),{loginConfirmError:(0,o.Z)({},e.loginConfirmError,(0,l.O1)(t.err.payload))});if(n===p.VALIDATE_LOGIN_DIGITS.success)return t.payload.success?e:(0,r.Z)((0,o.Z)({},e),{loginConfirmError:(0,r.Z)((0,o.Z)({},e.loginConfirmError),{validateDigitsError:"验证码填写错误"})});if(n===p.TOKEN.failure||n===p.SCAN_STATUS.failure)return(0,r.Z)((0,o.Z)({},e),{qrcodeLoginError:t.err.payload});if(n===p.TOKEN.success)return(0,r.Z)((0,o.Z)({},e),{qrcodeLoginToken:t.payload.token,qrcodeLoginTokenExpires:t.payload.expiresAt,qrcodeLoginError:null});if(n===p.SCAN_STATUS.success){var h={qrcodeLoginError:null};return t.payload.accessToken?h.loginConfirmSucceeded=!0:(t.payload.newToken&&t.payload.newToken.token&&(h.qrcodeLoginReturnNewToken=!0),h.qrcodeLoginScanStatus=t.payload.status,h.qrcodeLoginToken=t.payload.newToken&&t.payload.newToken.token||e.qrcodeLoginToken,h.qrcodeLoginTokenExpires=t.payload.newToken&&t.payload.newToken.expiresAt||e.qrcodeLoginTokenExpires),(0,o.Z)({},e,h)}return e}},18661:function(e,t,n){"use strict";n.d(t,{ZP:function(){return d},ko:function(){return u}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=(n(12856),n(40198),n(60594)),s=(0,r.Z)({},(0,c.FH)("mcn",["AGREE_CONTRACT","AGREE_TARGET_SOURCE_CONTRACT","GET_BIND_INFO","SET_BIND_INFO","SET_PINDUODUO_BIND_INFO","REMOVE_BIND_INFO","GET_MEMBER_CATEGORY","SET_MEMBER_CATEGORY","GET_PRODUCER","GET_CATEGORY","GET_SECONDARY_CATEGORY","SEARCH_GOOD","GET_TAOBAO_GOOD","GENERATE_LINK_CARD","UPDATE_LINK_CARD","GET_HOT_CITIES","SEARCH_CITY","GET_CITY_DISTRICTS","LOAD_LIST","LOAD_MCN_PERMISSION","GET_LINK_CARD_URL","LOAD_MCN_BANNER","GET_MCN_QUESTION_RECOMMEND_TABS","GET_MCN_QUESTION_RECOMMEND_LIST","LOAD_REDPACKET","GET_MEMBER_STATUS"]),(0,c.co)("mcn",["CLEAN_CATEGORY","REMOVE_RECENT_ADDED_GOODS"]));function u(e){return{API:{types:s.UPDATE_LINK_CARD,endpoint:"/mcn/linkcard/".concat(e.id),method:"PUT",body:{title:e.title}}}}var l={bindInfo:{},memberCategoryList:[],producerList:[],categoryList:[],lists:{},banners:{},protocolStatus:{isAgreedNew:!0,isAgreedOld:!0},probationCountdownDays:0};function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;if(t.type===s.GET_BIND_INFO.success){var n=t.meta.source;return(0,i.Z)((0,r.Z)({},e),{bindInfo:(0,i.Z)((0,r.Z)({},e.bindInfo),(0,o.Z)({},n,t.payload))})}if(t.type===s.SET_BIND_INFO.success){var c=t.meta,u=c.source,d=c.pid;return(0,i.Z)((0,r.Z)({},e),{bindInfo:(0,i.Z)((0,r.Z)({},e.bindInfo),(0,o.Z)({},u,(0,i.Z)((0,r.Z)({},e.bindInfo[u]),{pid:d})))})}if(t.type===s.SET_PINDUODUO_BIND_INFO.success){var p=t.payload.pid;return(0,i.Z)((0,r.Z)({},e),{bindInfo:(0,i.Z)((0,r.Z)({},e.bindInfo),{pinduoduo:(0,i.Z)((0,r.Z)({},e.bindInfo.pinduoduo),{pid:p})})})}if(t.type===s.REMOVE_BIND_INFO.success){var h=t.meta.source;return(0,i.Z)((0,r.Z)({},e),{bindInfo:(0,i.Z)((0,r.Z)({},e.bindInfo),(0,o.Z)({},h,(0,i.Z)((0,r.Z)({},e.bindInfo[h]),{pid:"",store:{}})))})}if(t.type===s.GET_MEMBER_CATEGORY.success)return(0,i.Z)((0,r.Z)({},e),{memberCategoryList:t.payload.data});if(t.type===s.SET_MEMBER_CATEGORY.success){var f=t.meta.categoryList;return(0,i.Z)((0,r.Z)({},e),{memberCategoryList:f})}if(t.type===s.GET_PRODUCER.success)return(0,i.Z)((0,r.Z)({},e),{producerList:t.payload.data});if(t.type===s.CLEAN_CATEGORY)return(0,i.Z)((0,r.Z)({},e),{categoryList:[]});if(t.type===s.GET_CATEGORY.success)return(0,i.Z)((0,r.Z)({},e),{categoryList:t.payload.data});if(t.type===s.GET_SECONDARY_CATEGORY.success){var m=t.meta.categoryId;return(0,i.Z)((0,r.Z)({},e),{categoryList:e.categoryList.map((function(e){return e.id===m?(0,i.Z)((0,r.Z)({},e),{categoryList:t.payload.data}):e}))})}if(t.type===s.LOAD_LIST.request){var v=t.meta.key;return(0,i.Z)((0,r.Z)({},e),{lists:(0,i.Z)((0,r.Z)({},e.lists),(0,o.Z)({},v,(0,i.Z)((0,r.Z)({},e.lists[v]),{isLoading:!0})))})}if(t.type===s.LOAD_LIST.success){var Z=t.meta.key,g=t.payload,E=g.data,T=g.paging,C=T.next,A=T.isEnd;return(0,i.Z)((0,r.Z)({},e),{lists:(0,i.Z)((0,r.Z)({},e.lists),(0,o.Z)({},Z,{data:(0,a.Z)(e.lists[Z].data||[]).concat((0,a.Z)(E)),paging:{next:C,isEnd:A},isLoading:!1}))})}if(t.type===s.LOAD_LIST.failure){var _=t.meta.key;return(0,i.Z)((0,r.Z)({},e),{lists:(0,i.Z)((0,r.Z)({},e.lists),(0,o.Z)({},_,(0,i.Z)((0,r.Z)({},e.lists[_]),{isLoading:!1})))})}if(t.type===s.REMOVE_RECENT_ADDED_GOODS){var y,S,I=t.meta.skuid,b=e.lists.recentAddedGoods;return b?(0,i.Z)((0,r.Z)({},e),{lists:(0,i.Z)((0,r.Z)({},e.lists),{recentAddedGoods:(0,i.Z)((0,r.Z)({},b),{data:null!==(S=null===(y=b.data)||void 0===y?void 0:y.filter((function(e){return e.skuid!==I})))&&void 0!==S?S:[]})})}):e}if(t.type===s.LOAD_MCN_BANNER.success){var w=t.meta.stateKey,R=t.payload.data;return(0,i.Z)((0,r.Z)({},e),{banners:(0,i.Z)((0,r.Z)({},e.banners),(0,o.Z)({},w,R))})}if(t.type===s.AGREE_CONTRACT.success)return(0,i.Z)((0,r.Z)({},e),{protocolStatus:(0,i.Z)((0,r.Z)({},e.protocolStatus),{isAgreedNew:!0})});if(t.type===s.GET_MEMBER_STATUS.success){var N=t.payload,O=N.isAgreed,D=N.previousIsAgreed;return(0,i.Z)((0,r.Z)({},e),{protocolStatus:{isAgreedNew:O,isAgreedOld:D}})}if(t.type===s.LOAD_MCN_PERMISSION.success){var B=t.payload.probationCountdownDays;return(0,i.Z)((0,r.Z)({},e),{probationCountdownDays:B||0})}return e}},19825:function(e,t,n){"use strict";n.d(t,{EV:function(){return g},Lw:function(){return E},fg:function(){return T},nB:function(){return C}});var o,r,i,a,c,s,u=n(71103),l=n(88483),d=n(16600),p=n(61565),h=(n(12856),n(52626)),f=n(15390),m=n(40198),v=n(60594),Z=(0,l.Z)({},(0,v.FH)("message",["GET_INBOXES","ADD","MARK_READ","UPDATE_COMMENTPERMISSION","UPDATE_RESHIPMENTSETTINGS"]),(0,v.co)("message",["CURRENT_TAB","INBOX_UNREAD_COUNT"]));function g(e){return function(t,n){var o=n(),r=o.messages,i=o.messages.currentTab,a=(!e&&r.data[i]||{}).next||("stranger"===i?"stranger_inbox":"inbox");return t({reFetch:e,currentTab:i,API:{types:Z.GET_INBOXES,endpoint:a},schema:f.l.MESSAGE_ARRAY})}}function E(e){return{currentTab:e,type:Z.CURRENT_TAB}}function T(){return function(e,t){var n=t(),o=n.entities.messages,r=n.messages,i=r.currentTab,a=r.data[i].ids.filter((function(e){return o[e].unreadCount>0}));return a.length?e({API:{types:Z.MARK_READ,endpoint:"messages/actions/mark-as-read",method:"POST",body:{type:i,tokens:a}}}):null}}function C(e){var t=e.event_name,n=e.data;if("INBOX_UNREAD_COUNT"===t)return{type:Z.INBOX_UNREAD_COUNT,payload:n}}t.ZP=(0,h.combineReducers)({data:(o=Z.GET_INBOXES,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return t.reFetch?s:(0,d.Z)((0,l.Z)({},e),{isFetching:!0});case a:var n=t.result,o=t.next,r=t.isDrained,u=e.ids;return(0,d.Z)((0,l.Z)({},e),{isFetching:!1,isDrained:r,next:o,ids:(0,p.Z)(u).concat((0,p.Z)(n.filter((function(e){return!u.includes(e)}))))});case c:return(0,d.Z)((0,l.Z)({},e),{isFetching:!1,isDrained:!0});default:return e}},i=o.request,a=o.success,c=o.failure,s={isFetching:!1,isDrained:!1,ids:[]},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.currentTab;switch(n){case i:case a:case c:return(0,d.Z)((0,l.Z)({},e),(0,u.Z)({},o,r(e[o],t)));default:return e}}),currentTab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"common",t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.currentTab;return n===Z.CURRENT_TAB?o:e},messageCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===Z.INBOX_UNREAD_COUNT?o:n===m.Hp.GET.success?t.payload.messagesCount:e}})},24316:function(e,t,n){"use strict";n.d(t,{V8:function(){return s},XR:function(){return p},ZP:function(){return T},_X:function(){return m},c0:function(){return v},hS:function(){return Z},zQ:function(){return u}});var o=n(71103),r=n(88483),i=n(16600),a=n(65406),c=(0,n(60594).co)("notification",["SHOW","CLEAR"]),s="global",u="comment",l="askQuestion",d="editQuestion",p="出错了！请稍后再试。",h={},f=[s,l,d,u],m=(0,a.P1)((function(e){return e.notification}),(function(e){return f.reduce((function(t,n){var o=e[n];return!t&&o||o&&o.timestamp>t.timestamp?o:t}),null)}));function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,o=arguments.length>3?arguments[3]:void 0;return{type:c.SHOW,NOTIFICATION:{key:n,text:e,theme:t,zaProps:o}}}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return{type:c.CLEAR,NOTIFICATION:{key:e}}}function g(e){return e.err?e.err.payload:e.result?e.result.error:null}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,n=e||{},o=n.code,r=n.message;return h[o]||r||t}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.requestMethod,p=void 0===a?"GET":a,h=t.NOTIFICATION;if(n===c.CLEAR){var f=h.key;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},f,null))}if(h&&!0!==h){var m=h.text,v=h.theme,Z=h.success,T=h.failure,C=h.key,A=void 0===C?s:C,_=h.zaProps;if(m&&v)return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},A,{text:m,theme:v,timestamp:Date.now(),zaProps:_}));if(Z&&n.endsWith("success")){var y="function"==typeof Z?Z(t.payload):Z;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},A,(0,r.Z)({text:"string"==typeof y&&y,theme:"white",timestamp:Date.now(),zaProps:_},y)))}if(T&&n.endsWith("failure")){var S=g(t),I="function"==typeof T?T(S,t):T;if(!I)return e;var b=E(S,I);return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},A,(0,r.Z)({text:b,theme:A===u||A===l||A===d?"red-ghost":"red",timestamp:Date.now(),zaProps:_},I)))}return e}if(!1!==h&&n.endsWith("failure")&&"GET"!==p){var w=E(g(t));return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},s,{text:w,theme:"red",timestamp:Date.now()}))}return e}},90837:function(e,t,n){"use strict";n.d(t,{Gm:function(){return ue},J2:function(){return se},R8:function(){return de},XD:function(){return le},_u:function(){return D},cR:function(){return ae},ck:function(){return B},eB:function(){return ie},hr:function(){return O},t:function(){return R}});var o=n(71103),r=n(88483),i=n(16600),a=n(78724),c=n(61565),s=n(12856),u=n(17907),l=n(52626),d=n(15390),p=n(91918),h=n(67934),f=n(74480),m=n.n(f),v=n(70175),Z=n(91355),g=n(60594),E=n(37314),T=n(95193),C=n(98918),A=n(96053),_=n(29254),y=n(96531),S=n(5625),I=new u.fK.Array(d.l.ZVIDEO),b=(0,r.Z)({},(0,g.FH)("people",["GET","GET_MEMBER","GET_ACTIVITIES","GET_PUBLICATIONS","GET_ANSWERS","GET_ANSWERS_SORT_BY_VOTES","GET_ANSWERS_INCLUDED","GET_ZVIDEOS","GET_ARTICLES","GET_ARTICLES_SORT_BY_VOTES","GET_ARTICLES_INCLUDED","GET_PINS","GET_COLUMNS","GET_QUESTIONS","GET_COMMERCIAL_QUESTIONS","GET_FAVLISTS","GET_FOLLOWINGS","GET_FOLLOWERS","GET_FOLLOWING_COLUMNS","GET_FOLLOWING_QUESTIONS","GET_FOLLOWING_FAVLISTS","GET_FOLLOWING_TOPICS","GET_RELATIONS_VOTED","GET_RELATIONS_THANKED","GET_VOTE_ANSWERS","GET_VOTED_ANSWERS","GET_THANK_ANSWERS","GET_THANKED_ANSWERS","GET_IKNOW_FOLLOWERS","GET_TOPIC_ANSWERS","GET_ALL_FAVLISTS","GET_BRANDS","GET_CREATIONS","GET_CREATIONS_SORT_BY_VOTES","GET_CREATIONS_FEED","GET_INFINITY_INFO","UPDATE","UPDATE_SHIELD","DELETE_COLUMN","GET_BATCH_USERS","GET_PROFILE_INFINITY"]),(0,g.co)("people",["CHANGE_ANSWER_ORDER","CHANGE_ARTICLE_ORDER","CHANGE_ANSWERS_TOPIC","MARK_USER_STATUS","CLEAR_CREATION_FEED","TOGGLE_USER_BLOCKING"]));function w(e,t){var n=("string"==typeof t?{include:t}:t)||{},o=n.include,i=n.types,c=(0,a.Z)(n,["include","types"]);return(0,r.Z)({API:{types:i||b.GET_MEMBER,endpoint:"members/".concat(encodeURIComponent(e)),query:{include:o}},schema:d.l.USER},c)}function R(e,t){return{type:b.TOGGLE_USER_BLOCKING,UPDATE:{update:{users:(0,o.Z)({},e,{isBlocking:t})}}}}var N=["juror","locations","employments","gender","educations","business","mcn_company","voteup_count","thanked_Count","follower_count","following_count","cover_url","following_topic_count","following_question_count","following_favlists_count","following_columns_count","avatar_hue","answer_count","zvideo_count","articles_count","pins_count","question_count","columns_count","commercial_question_count","favorite_count","favorited_count","logs_count","included_answers_count","included_articles_count","included_text","message_thread_token","account_status","is_active","is_bind_phone","is_force_renamed","is_privacy_protected","is_blocking","is_blocked","is_following","is_followed","mutual_followees_count","vote_to_count","vote_from_count","thank_to_count","thank_from_count","thanked_count","description","hosted_live_count","participated_live_count","allow_message","recognized_count","widgets","industry_category","org_name","org_homepage","is_org_createpin_white_user","badge[?(type=best_answerer)].topics"].join(",");function O(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return function(r){return r(w(e,{include:N,types:b.GET,isOwnProfile:t,NOTIFICATION:!1})).catch((function(t){if(n){if((0,E.Hk)(t))return r({type:b.MARK_USER_STATUS,UPDATE:{update:{users:(0,o.Z)({},e,{accountStatus:[{name:Z.Pw.destroy}]})}}});if((0,E.yX)(t))return r({type:b.MARK_USER_STATUS,UPDATE:{update:{users:(0,o.Z)({},e,{accountStatus:[{name:Z.Pw.hang}]})}}});if((0,E.cp)(t))return r({type:b.MARK_USER_STATUS,UPDATE:{update:{users:(0,o.Z)({},e,{accountStatus:[{name:Z.Pw.suicide}]})}}})}return Promise.reject(t)}))}}function D(e){return w(e,["allow_message","is_followed","is_following","is_org","is_blocking","employments","answer_count","follower_count","articles_count","gender","badge[?(type=best_answerer)].topics"].join(","))}function B(e,t){return function(n,r){var i=r(),a=i.entities.users,c=i.currentUser,u=a[c],l=(0,s.decamelizeKeys)(t||e);return n({API:{types:b.UPDATE,endpoint:"me",method:"PUT",query:{include:"".concat(Object.keys(l).join(","),",cover_url,verify_apply")},fetchOptions:{zsEncrypt:!0,body:l}},UPDATE:{request:{users:(0,o.Z)({},c,e||u)},success:function(e){return{users:(0,o.Z)({},c,e)}},failure:{users:(0,o.Z)({},c,u)}}})}}var P=(0,o.Z)({},v.Z.isMobileEntry?"mobile":"desktop",!0);function k(e,t){return{urlToken:e,API:{types:b.GET_ACTIVITIES,endpoint:t||"v3/moments/".concat(encodeURIComponent(e),"/activities"),query:!t&&(0,r.Z)({limit:A.W2},P),headers:{"X-API-VERSION":"3.0.40"}},FAILSAFE:{timeout:3e3},schema:d.l.ACTIVITY_ARRAY}}function x(e){var t=e.urlToken,n=e.topicId,o=e.types,i=e.resource,a=void 0===i?"answers":i,c=e.offset,s=void 0===c?0:c,u=e.sortBy,l=void 0===u?"created":u,p=e.endpoint,h=e.limit,f=void 0===h?A.W2:h,m=["data[*].is_normal,","admin_closed_comment,","reward_info,","is_collapsed,","annotation_action,","annotation_detail,","collapse_reason,","collapsed_by,","suggest_edit,","comment_count,","can_comment,","content,","editable_content,","attachment,","voteup_count,","reshipment_settings,","comment_permission,","mark_infos,","created_time,","updated_time,","review_info,","excerpt,","reaction_instruction,",n?"":"is_labeled,label_info,","relationship.is_authorized,","voting,is_author,","is_thanked,","is_nothelp,","is_recognized;","data[*].vessay_info;","data[*].author.badge[?(type=best_answerer)].topics;","data[*].author.vip_info;","data[*].question.has_publishing_draft,","relationship"].join("");return{urlToken:t,topicId:n,API:(0,r.Z)({types:o},p?{endpoint:p}:{endpoint:"members/".concat(encodeURIComponent(t),"/").concat(a),query:{include:m,offset:s,limit:f,sortBy:l}}),limit:f,offset:s,schema:d.l.ANSWER_ARRAY}}function L(e,t){var n=t.endpoint,o=t.sortBy,r=void 0===o?"created":o,i=t.offset,a=t.limit,c={urlToken:e,endpoint:n,offset:i,limit:void 0===a?A.W2:a,types:{created:b.GET_ANSWERS,voteups:b.GET_ANSWERS_SORT_BY_VOTES,included:b.GET_ANSWERS_INCLUDED}[r]};return"included"===r?(c.resource="marked-answers",c.sortBy="created"):c.sortBy=r,x(c)}function U(e,t){var n=t.endpoint,o=t.offset,r=void 0===o?0:o,i=t.limit;return x({urlToken:e,endpoint:n,offset:r,limit:void 0===i?A.W2:i,types:b.GET_VOTED_ANSWERS,resource:"relations/voted"})}function F(e,t){var n=t.endpoint,o=t.offset,r=void 0===o?0:o,i=t.limit;return x({urlToken:e,endpoint:n,offset:r,limit:void 0===i?A.W2:i,types:b.GET_THANKED_ANSWERS,resource:"relations/thanked"})}function M(e,t){var n=t.endpoint,o=t.offset,r=void 0===o?0:o,i=t.limit;return x({urlToken:e,endpoint:n,offset:r,limit:void 0===i?A.W2:i,types:b.GET_VOTE_ANSWERS,resource:"relations/vote"})}function G(e,t){var n=t.endpoint,o=t.offset,r=void 0===o?0:o,i=t.limit;return x({urlToken:e,endpoint:n,offset:r,limit:void 0===i?A.W2:i,types:b.GET_THANK_ANSWERS,resource:"relations/thank"})}function z(e,t){var n=t.endpoint,o=t.topicId,r=t.offset,i=void 0===r?0:r,a=t.limit;return x({topicId:o,urlToken:e,endpoint:n,offset:i,limit:void 0===a?A.W2:a,types:b.GET_TOPIC_ANSWERS,resource:"topics/".concat(o,"/answers")})}function H(e,t){var n=t.offset,o=void 0===n?0:n,r=t.limit,i=void 0===r?A.W2:r;return{urlToken:e,API:{types:b.GET_ZVIDEOS,endpoint:"/members/".concat(encodeURIComponent(e),"/zvideos"),query:{offset:o,limit:i,similarAggregation:!0,include:m()({similar_zvideo:!0,creation_relationship:!0,reaction_instruction:!0})}},offset:o,limit:i,schema:I}}function q(e,t){var n=t.endpoint,o=t.sortBy,i=void 0===o?"created":o,a=t.offset,c=void 0===a?0:a,s=t.limit,u=void 0===s?A.W2:s,l=["data[*].comment_count,","suggest_edit,","is_normal,","thumbnail_extra_info,","thumbnail,","can_comment,","comment_permission,","admin_closed_comment,","content,","voteup_count,","created,","updated,","upvoted_followees,","voting,","review_info,","reaction_instruction,","is_labeled,","label_info;","data[*].vessay_info;","data[*].author.badge[?(type=best_answerer)].topics;","data[*].author.vip_info;"].join(""),p={created:b.GET_ARTICLES,voteups:b.GET_ARTICLES_SORT_BY_VOTES,included:b.GET_ARTICLES_INCLUDED},h="included"===i?"included-articles":"articles";return{urlToken:e,offset:c,limit:u,API:(0,r.Z)({types:p[i]},n?{endpoint:n}:{endpoint:"members/".concat(encodeURIComponent(e),"/").concat(h),query:{include:l,offset:c,limit:u,sortBy:i}}),schema:d.l.ARTICLE_ARRAY}}function V(e,t){var n=t.offset,o=void 0===n?0:n,r=t.limit,i=void 0===r?A.W2:r;return{urlToken:e,API:{types:b.GET_PINS,endpoint:"/v2/pins/".concat(encodeURIComponent(e),"/moments"),query:{offset:o,limit:i,includes:"data[*].upvoted_followees,admin_closed_comment"}},offset:o,limit:i,schema:d.l.PIN_ARRAY}}function X(e,t){var n=t.endpoint,o=t.offset,i=void 0===o?0:o,a=t.limit,c=void 0===a?A.VZ:a;return{urlToken:e,offset:i,API:(0,r.Z)({types:b.GET_COLUMNS},n?{endpoint:n}:{endpoint:"members/".concat(encodeURIComponent(e),"/column-contributions"),query:{include:"data[*].column.intro,followers,articles_count,voteup_count,items_count",offset:i,limit:c}}),schema:d.l.COLUMN_CONTRIBUTION_ARRAY}}function W(e,t){var n=t.endpoint,o=t.offset,i=void 0===o?0:o,a=t.limit,c=void 0===a?A.VZ:a;return{urlToken:e,offset:i,API:(0,r.Z)({types:b.GET_QUESTIONS},n?{endpoint:n}:{endpoint:"members/".concat(encodeURIComponent(e),"/questions"),query:{include:"data[*].created,answer_count,follower_count,author,admin_closed_comment",offset:i,limit:c}}),schema:d.l.QUESTION_ARRAY}}function K(e,t){var n=t.endpoint,o=t.offset,i=void 0===o?0:o,a=t.limit,c=void 0===a?A.VZ:a;return{urlToken:e,offset:i,API:(0,r.Z)({types:b.GET_COMMERCIAL_QUESTIONS},n?{endpoint:n}:{endpoint:"members/".concat(encodeURIComponent(e),"/commercial-questions"),query:{include:"data[*].created,answer_count,follower_count,author,is_muted,question_type,admin_closed_comment",offset:i,limit:c}}),schema:d.l.COMMERCIAL_QUESTION_ARRAY}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.endpoint,o=t.offset,i=void 0===o?0:o,a=t.limit,c=void 0===a?A.VZ:a,s=t.isAll;return{urlToken:e,API:(0,r.Z)({types:s?b.GET_ALL_FAVLISTS:b.GET_FAVLISTS},n?{endpoint:n}:{endpoint:"people/".concat(encodeURIComponent(e),"/collections"),query:{include:"data[*].updated_time,answer_count,follower_count,creator,description,is_following,comment_count,created_time;data[*].creator.vip_info",offset:i,limit:c}}),offset:i,schema:d.l.FAVLIST_ARRAY}}function Y(e){var t=e.urlToken,n=e.resource,o=e.types,i=e.endpoint,a=e.offset,c=e.limit;return{urlToken:t,API:(0,r.Z)({types:o},i?{endpoint:i}:{endpoint:"members/".concat(encodeURIComponent(t),"/").concat(n),query:{include:"data[*].answer_count,articles_count,gender,follower_count,is_followed,is_following,badge[?(type=best_answerer)].topics",offset:a,limit:c}}),offset:a,schema:d.l.USER_ARRAY}}function Q(e,t){var n=t.endpoint,o=t.offset,r=void 0===o?0:o,i=t.limit,a=void 0===i?A.VZ:i;return Y({urlToken:e,types:b.GET_FOLLOWINGS,resource:"followees",offset:r,endpoint:n,limit:a})}function J(e,t){var n=t.endpoint,o=t.offset,r=void 0===o?0:o,i=t.limit,a=void 0===i?A.VZ:i;return Y({urlToken:e,types:b.GET_FOLLOWERS,resource:"followers",endpoint:n,offset:r,limit:a})}function $(e,t){var n=t.endpoint,o=t.offset,a=void 0===o?0:o,c=t.limit,s=void 0===c?A.VZ:c;return(0,i.Z)((0,r.Z)({},Y({urlToken:e,types:b.GET_IKNOW_FOLLOWERS,resource:"relations/mutuals",offset:a,endpoint:n,limit:s})),{NOTIFICATION:!1})}function ee(e,t){var n=t.endpoint,o=t.offset,i=void 0===o?0:o,a=t.limit,c=void 0===a?A.VZ:a;return{urlToken:e,API:(0,r.Z)({types:b.GET_FOLLOWING_COLUMNS},n?{endpoint:n}:{endpoint:"members/".concat(encodeURIComponent(e),"/following-columns"),query:{include:"data[*].intro,followers,articles_count,voteup_count,items_count",offset:i,limit:c}}),offset:i,schema:d.l.COLUMN_ARRAY}}function te(e,t){var n=t.endpoint,o=t.offset,i=void 0===o?0:o,a=t.limit,c=void 0===a?A.VZ:a;return{urlToken:e,API:(0,r.Z)({types:b.GET_FOLLOWING_QUESTIONS},n?{endpoint:n}:{endpoint:"members/".concat(encodeURIComponent(e),"/following-questions"),query:{include:"data[*].created,answer_count,follower_count,author",offset:i,limit:c}}),offset:i,schema:d.l.QUESTION_ARRAY}}function ne(e,t){var n=t.endpoint,o=t.offset,i=void 0===o?0:o,a=t.limit,c=void 0===a?A.VZ:a;return{urlToken:e,API:(0,r.Z)({types:b.GET_FOLLOWING_FAVLISTS},n?{endpoint:n}:{endpoint:"members/".concat(encodeURIComponent(e),"/following-favlists"),query:{include:"data[*].updated_time,answer_count,follower_count,creator,description,is_following,comment_count,created_time",offset:i,limit:c}}),offset:i,schema:d.l.FAVLIST_ARRAY}}function oe(e,t){var n=t.endpoint,o=t.offset,i=void 0===o?0:o,a=t.limit,c=void 0===a?A.VZ:a;return{urlToken:e,API:(0,r.Z)({types:b.GET_FOLLOWING_TOPICS},n?{endpoint:n}:{endpoint:"/topics/".concat(encodeURIComponent(e),"/following_topics_contributions"),root:"".concat(v.Z.fetchRoot.www,"/api/v5.1/"),query:{include:"data[*].topic.introduction",offset:i,limit:c}}),offset:i,schema:d.l.TOPIC_CONTRIBUTION_ARRAY}}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.endpoint,o=t.offset,i=void 0===o?0:o;return{urlToken:e,API:(0,r.Z)({types:b.GET_PUBLICATIONS},n?{endpoint:n}:{root:v.Z.fetchRoot.api,endpoint:"/books/people/".concat(encodeURIComponent(e),"/publications"),query:{offset:i,limit:5}}),offset:i,schema:d.l.EBOOK_ARRAY,FAILSAFE:!1}}function ie(e,t){return function(n,a){var c=a().entities.users[e];return n({columnId:t,memberToken:e,API:{types:b.DELETE_COLUMN,endpoint:"columns/".concat(t,"/coauthors/").concat(e),method:"DELETE"},UPDATE:{success:function(){return{users:(0,o.Z)({},e,(0,i.Z)((0,r.Z)({},c),{columnsCount:c.columnsCount-1}))}}}})}}function ae(e,t){return function(n,r){var i=r().entities.users[e];return n({API:{types:b.UPDATE_SHIELD,endpoint:"members/".concat(encodeURIComponent(e),"/actions/block"),method:t?"POST":"DELETE"},UPDATE:{request:{users:(0,o.Z)({},e,{isBlocking:t})},failure:{users:(0,o.Z)({},e,i)}}})}}function ce(e,t){var n=t.topicId,o=t.sortBy,i=void 0===o?"created":o,a=t.offset,c=void 0===a?0:a,s=t.limit,u=void 0===s?A.W2:s,l=t.endpoint,p={created:b.GET_CREATIONS,votenum:b.GET_CREATIONS_SORT_BY_VOTES};return{urlToken:e,offset:c,limit:u,topicId:n,API:(0,r.Z)({types:p[i]},l?{endpoint:l}:{endpoint:"members/".concat(encodeURIComponent(e),"/topics/").concat(n,"/creations"),query:{offset:c,limit:u,sortBy:i}}),schema:d.l.CREATION_ARRAY}}function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="/members/".concat(encodeURIComponent(e),"/profile/creations/feed"),i=t.type,a=void 0===i?"all":i;return function(e,i){var c,s=null===(c=i().people.creationsFeed)||void 0===c?void 0:c[a],u=((null==s?void 0:s.paging)||{}).next;return e({meta:{contentType:a},API:(0,r.Z)({types:b.GET_CREATIONS_FEED},u?{endpoint:u}:{endpoint:o,query:t}),FAILSAFE:n})}}function ue(){return{type:b.CLEAR_CREATION_FEED}}function le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.offset,i=n.limit,a=n.topicId;return function(n,c){var s=c(),u=s.people,l=s.currentUser,d=(u["".concat(t,"ByUser")][e]||{}).next,p=o||!d?{offset:o,limit:i}:{endpoint:d};switch(t){case"activities":return n(k(e,d));case"answers":return n(L(e,p));case"answersSortByVotes":return n(L(e,(0,r.Z)({sortBy:"voteups"},p)));case"answersIncluded":return n(L(e,(0,r.Z)({sortBy:"included"},p)));case"votedAnswers":return n(U(e,p));case"thankedAnswers":return n(F(e,p));case"voteAnswers":return n(M(e,p));case"thankAnswers":return n(G(e,p));case"topicAnswers":return n(z(e,(0,r.Z)({topicId:a},p)));case"zvideos":return n(H(e,p));case"articles":return n(q(e,p));case"pins":return n(V(e,p));case"articlesSortByVotes":return n(q(e,(0,r.Z)({sortBy:"voteups"},p)));case"articlesIncluded":return n(q(e,(0,r.Z)({sortBy:"included"},p)));case"columns":return n(X(e,p));case"questions":return n(W(e,p));case"commercialQuestions":return n(K(e,p));case"favlists":return n(j(e,p));case"following":return n(Q(e,p));case"followers":return n(J(e,p));case"mutuals":return n($(e,p));case"followingColumns":return n(ee(e,p));case"followingQuestions":return n(te(e,p));case"followingFavlists":return n(ne(e,p));case"followingTopics":return n(oe(e,p));case"publications":return n(re(e,p));case"allFavlists":e=e||l;var h=(u["".concat(t,"ByUser")][e]||{}).next;return n(j(e,(0,r.Z)({isAll:!0},{endpoint:h})));case"creations":return n(ce(e,(0,r.Z)({topicId:a,sortBy:"created"},p)));case"creationsSortByVotes":return n(ce(e,(0,r.Z)({topicId:a,sortBy:"votenum"},p)));default:return Promise.reject(new Error("Mismatched loadItems ".concat(t)))}}}function de(e){return{API:{types:b.GET_BRANDS,endpoint:"/brand/".concat(e,"/brands")}}}var pe=(0,A.V6)(b.GET_COLUMNS,{mapActionToKey:function(e){return e.urlToken}}),he=(0,A.V6)(b.DELETE_COLUMN,{mapActionToKey:function(e){return e}});var fe=(0,A.V6)(b.GET_FOLLOWING_TOPICS,{mapActionToKey:function(e){return e.urlToken},additionalCaseTypes:[y.Hp.UPDATE_FOLLOW.success],additionalCase:function(e,t){if(t.type===y.Hp.UPDATE_FOLLOW.success){var n=t.topicId,o=e.ids,a=e.totals;if(!o.includes(n))return(0,i.Z)((0,r.Z)({},e),{totals:a+1,ids:[n].concat((0,c.Z)(o))})}return e}});var me=(0,A.V6)(b.GET_TOPIC_ANSWERS,{mapActionToKey:function(e){return e.topicId}});var ve=(0,A.V6)(b.GET_CREATIONS,{mapActionToKey:function(e){return e.topicId}});var Ze=(0,A.V6)(b.GET_CREATIONS_SORT_BY_VOTES,{mapActionToKey:function(e){return e.topicId}});var ge=function(e){return e.urlToken};t.ZP=(0,l.combineReducers)({profileStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.GET.failure:case b.GET.success:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.result,(0,i.Z)((0,r.Z)({},t.payload&&{token:{id:t.payload.id,urlToken:t.payload.urlToken}}),{isFetching:!1,isDrained:!0})));default:return e}},activitiesByUser:(0,A.Fd)(b.GET_ACTIVITIES,{mapActionToKey:ge}),answersByUser:v.Z.isMobileEntry?(0,A.Fd)(b.GET_ANSWERS,{mapActionToKey:ge}):(0,A.V6)(b.GET_ANSWERS,{mapActionToKey:ge}),answersSortByVotesByUser:(0,A.V6)(b.GET_ANSWERS_SORT_BY_VOTES,{mapActionToKey:ge}),answersIncludedByUser:(0,A.V6)(b.GET_ANSWERS_INCLUDED,{mapActionToKey:ge}),votedAnswersByUser:(0,A.V6)(b.GET_VOTED_ANSWERS,{mapActionToKey:ge}),thankedAnswersByUser:(0,A.V6)(b.GET_THANKED_ANSWERS,{mapActionToKey:ge}),voteAnswersByUser:(0,A.V6)(b.GET_VOTE_ANSWERS,{mapActionToKey:ge}),thankAnswersByUser:(0,A.V6)(b.GET_THANK_ANSWERS,{mapActionToKey:ge}),topicAnswersByUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.urlToken;return Object.values(b.GET_TOPIC_ANSWERS).includes(n)?(0,o.Z)({},r,me(e[r],t)):e},zvideosByUser:(0,A.V6)(b.GET_ZVIDEOS,{mapActionToKey:ge}),articlesByUser:v.Z.isMobileEntry?(0,A.Fd)(b.GET_ARTICLES,{mapActionToKey:ge}):(0,A.V6)(b.GET_ARTICLES,{mapActionToKey:ge}),articlesSortByVotesByUser:(0,A.V6)(b.GET_ARTICLES_SORT_BY_VOTES,{mapActionToKey:ge}),articlesIncludedByUser:(0,A.V6)(b.GET_ARTICLES_INCLUDED,{mapActionToKey:ge}),pinsByUser:(0,A.V6)(b.GET_PINS,{mapActionToKey:ge}),questionsByUser:v.Z.isMobileEntry?(0,A.Fd)(b.GET_QUESTIONS,{mapActionToKey:ge,addSuccessType:_.Hp.ADD.success}):(0,A.V6)(b.GET_QUESTIONS,{mapActionToKey:ge,addSuccessType:_.Hp.ADD.success}),commercialQuestionsByUser:(0,A.V6)(b.GET_COMMERCIAL_QUESTIONS,{mapActionToKey:ge}),favlistsByUser:(0,A.V6)(b.GET_FAVLISTS,{mapActionToKey:ge,additionalCaseTypes:[T.Hp.ADD.success,T.Hp.UPDATE.success,T.Hp.DELETE.success],additionalCase:T.Nn,addSuccessType:p.Z.ADD.SUCCESS}),followingByUser:(0,A.V6)(b.GET_FOLLOWINGS,{mapActionToKey:ge,additionalCaseTypes:[S.cw.UPDATE_FOLLOWERS.success],additionalCase:function(e,t){var n=t.type,o=t.expect,a=t.userUrlToken;if(n===S.cw.UPDATE_FOLLOWERS.success&&o){var s=e.ids,u=e.totals;if(!s.includes(a))return(0,i.Z)((0,r.Z)({},e),{totals:u+1,ids:[a].concat((0,c.Z)(s))})}return e}}),followersByUser:(0,A.V6)(b.GET_FOLLOWERS,{mapActionToKey:ge}),mutualsByUser:(0,A.Fd)(b.GET_IKNOW_FOLLOWERS,{mapActionToKey:ge}),followingColumnsByUser:(0,A.V6)(b.GET_FOLLOWING_COLUMNS,{mapActionToKey:ge,additionalCaseTypes:[C.Pu.UPDATE_FOLLOW.success],additionalCase:function(e,t){var n=t.type,o=t.expect,a=t.columnId;if(n===C.Pu.UPDATE_FOLLOW.success&&o){var s=e.ids,u=e.totals;if(!s.includes(a))return(0,i.Z)((0,r.Z)({},e),{totals:u+1,ids:[a].concat((0,c.Z)(s))})}return e}}),followingQuestionsByUser:(0,A.V6)(b.GET_FOLLOWING_QUESTIONS,{mapActionToKey:ge,addSuccessType:_.Hp.ADD.success}),followingFavlistsByUser:(0,A.V6)(b.GET_FOLLOWING_FAVLISTS,{mapActionToKey:ge}),followingTopicsByUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.urlToken;if(Object.values(b.GET_FOLLOWING_TOPICS).includes(n)){var c=t.result||[];t.result=c.map((function(e){return e.topic}));var s=e[a]||{isFetching:!1,isDrained:!1,totals:0,ids:[],contributions:{}};return fe((0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,(0,i.Z)((0,r.Z)({},s),{contributions:c.reduce((function(e,t){return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.topic,t.contributionsCount))}),s.contributions)}))),t)}return e},publicationsByUser:(0,A.Fd)(b.GET_PUBLICATIONS,{mapActionToKey:ge}),columnsByUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.urlToken;if(Object.values(b.DELETE_COLUMN).includes(n)){var c=t.columnId,s=t.memberToken,u=e[s].ids;return he((0,i.Z)((0,r.Z)({},e),(0,o.Z)({},s,(0,i.Z)((0,r.Z)({},e[s]),{ids:u.map((function(e){if(e!==c)return e}))}))),t)}if(Object.values(b.GET_COLUMNS).includes(n)){var l=t.result||[];t.result=l.map((function(e){return e.column}));var d=e[a]||{isFetching:!1,isDrained:!1,totals:0,ids:[],contributions:{}};return pe((0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,(0,i.Z)((0,r.Z)({},d),{contributions:l.reduce((function(e,t){return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.column,t.contributionsCount))}),d.contributions)}))),t)}return e},allFavlistsByUser:h.f,brands:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===b.GET_BRANDS.success?t.payload.data:e},creationsByUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.urlToken;return Object.values(b.GET_CREATIONS).includes(n)?(0,o.Z)({},r,ve(e[r],t)):e},creationsSortByVotesByUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.urlToken;return Object.values(b.GET_CREATIONS_SORT_BY_VOTES).includes(n)?(0,o.Z)({},r,Ze(e[r],t)):e},creationsFeed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case b.GET_CREATIONS_FEED.request:var c=t.meta.contentType,s=e[c]||{isFetching:!0,isDrained:!1,paging:{},ids:[],items:[]};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c,(0,A.TS)(s,{isFetching:!0})));case b.GET_CREATIONS_FEED.failure:var u=t.meta.contentType;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},u,(0,A.TS)(e[u],{isFetching:!1,isDrained:!0})));case b.GET_CREATIONS_FEED.success:var l=a.data,d=a.paging;if(!l||!d)return e;var p=t.meta.contentType,h=d.isStart,f=d.isEnd,m=!h&&f||h&&f,v=e[p],Z=l.map((function(e){var t=e.content,n=e.notiSubtype;return(0,i.Z)((0,r.Z)({},t),{contentType:n})})),g=Z.filter((function(e){var t=e.urlToken;return!t||!v.ids.includes(t)})),E=(0,A.TS)(v,{isFetching:!1,isDrained:m,paging:d,ids:g.map((function(e){return e.urlToken})),items:g});return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},p,E));case b.CLEAR_CREATION_FEED:return{};default:return e}},infinity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===b.GET_INFINITY_INFO.success){var n=t.meta,a=t.payload;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,a))}return e},batchUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===b.GET_BATCH_USERS.success){var n=t.payload;return(0,r.Z)({},e,n)}return e},profileInfinity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if(t.type===b.GET_PROFILE_INFINITY.success){var n=t.payload;return(0,r.Z)({},e,n)}return e}})},20685:function(e,t,n){"use strict";n.d(t,{ZP:function(){return E},q$:function(){return Z},Qw:function(){return g},T8:function(){return m},tW:function(){return v}});var o=n(52626),r=n(71103),i=n(88483),a=n(16600),c="pins/SET_REVIEWING_ERROR";var s=(0,o.combineReducers)({reviewing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===c){var n=t.payload,o=n.id,s=n.error;return(0,a.Z)((0,i.Z)({},e),(0,r.Z)({},o,s))}return e}}),u=n(15390),l=(n(70175),n(59083)),d=n(60594),p=n(96053),h=n(24316),f=(0,d.FH)("pin",["LIKE","REACTION","DELETE","GET_VOTERS","CREATE_PINS","GET_LINK_CONTENT","GET_PIN_CONTENT","LOAD_HOT_TOPIC","CREATE_PINS_V2","FETCH_RECOMMAND_TOPIC","FETCH_RECOMMAND_BY_KEYWORD","ADD_TOPIC"]);function m(e){return function(t,n){var o=n().entities.pins[e],i=o.likeCount,a=o.virtuals,c=(void 0===a?{}:a).isLiked;return t({id:e,API:{types:f.LIKE,endpoint:"pins/".concat(e,"/likers"),method:c?"delete":"post"},UPDATE:{request:{pins:(0,r.Z)({},e,{likeCount:i+(c?-1:1),virtuals:{isLiked:!c}})},failure:{pins:(0,r.Z)({},e,o)}},NOTIFICATION:{failure:h.XR}})}}function v(e){return function(t,n){var o=n().entities.pins[e],i=o.reactionCount,a=o.virtuals,c=(void 0===a?{}:a).reactionType,s="like"===c;return t({id:e,API:{types:f.REACTION,endpoint:"pins/".concat(e,"/reactions"),method:s?"DELETE":"POST",fetchOptions:{body:(0,l.Z)({type:"like"})}},UPDATE:{request:{pins:(0,r.Z)({},e,{reactionCount:i+(s?-1:1),virtuals:{reactionType:c?"":"like"}})},failure:{pins:(0,r.Z)({},e,o)}},NOTIFICATION:{failure:h.XR}})}}function Z(e){return function(t,n){var o=n().entities.pins[e];return t({API:{types:f.DELETE,endpoint:"pins/".concat(e),method:"DELETE"},UPDATE:{request:{pins:(0,r.Z)({},e,{isDelete:!0})},failure:{pins:(0,r.Z)({},e,o)}}})}}function g(e){return function(t,n){var o=(n().pins.voters[e]||{}).next;return t({id:e,API:(0,i.Z)({types:f.GET_VOTERS},o?{endpoint:o}:{endpoint:"pins/".concat(e,"/likers"),query:{include:"data[*].answer_count,articles_count,follower_count,gender,is_followed,is_following,badge",offset:0,limit:p.VZ}}),schema:u.l.USER_ARRAY})}}(0,n(65406).P1)((function(e,t){return{pin:e.entities.pins[t],users:e.entities.users}}),(function(e){var t=e.pin,n=e.users;return t?"string"==typeof t.author?Object.assign({},t,{author:n[t.author]}):t:{}}));var E=s},20747:function(e,t,n){"use strict";n.d(t,{F7:function(){return Z},Lw:function(){return v},VN:function(){return g},_T:function(){return f}});var o=n(71103),r=n(88483),i=n(16600),a=n(78194),c=n(61565),s=n(52626),u=n(15390),l=n(40198),d=n(60594),p=(0,r.Z)({},(0,d.FH)("pushNotifications",["GET_DEFAULT","GET_FOLLOW","GET_VOTE_THANK","MARK_ALL_READ"]),(0,d.co)("pushNotifications",["ADD","CURRENT_TAB"])),h={default:p.GET_DEFAULT,follow:p.GET_FOLLOW,vote_thank:p.GET_VOTE_THANK};function f(e){return function(t,n){var o=n(),r=o.pushNotifications,i=o.pushNotifications.currentTab,a=(!e&&r[i]||{}).next;return t({reFetch:e,API:{types:h[i],endpoint:a||"notifications/v2/".concat(i)},schema:u.l.NOTIFICATION_ARRAY})}}function m(e){var t=e.request,n=e.success,o=e.failure,a={isFetching:!1,isDrained:!1,ids:[]};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case t:return s.reFetch?a:(0,i.Z)((0,r.Z)({},e),{isFetching:!0});case n:var u=s.result,l=s.next,d=s.isDrained,p=e.ids;return(0,i.Z)((0,r.Z)({},e),{isFetching:!1,isDrained:d,next:l,ids:(0,c.Z)(p).concat((0,c.Z)(u.filter((function(e){return!p.includes(e)}))))});case o:return(0,i.Z)((0,r.Z)({},e),{isFetching:!1,isDrained:!1});default:return e}}}function v(e){return{type:p.CURRENT_TAB,currentTab:e}}function Z(e){return{type:p.ADD,payload:e}}function g(){return function(e,t){var n=t().pushNotifications.currentTab;return e({API:{types:p.MARK_ALL_READ,endpoint:"notifications/v2/".concat(n,"/actions/readall"),method:"POST"},tab:n})}}var E={default:0,follow:0,vote_thank:0};t.ZP=(0,s.combineReducers)({default:m(p.GET_DEFAULT),follow:m(p.GET_FOLLOW),vote_thank:m(p.GET_VOTE_THANK),currentTab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.currentTab;return n===p.CURRENT_TAB?o:e},notificationsCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,n=t.type;if(n===p.ADD){var i=(0,a.Z)(t.payload,3),c=i[0],s=i[1],u=i[2];return{default:c,follow:s,vote_thank:u}}if(n===l.Hp.GET.success){var d=t.payload,h=d.defaultNotificationsCount,f=d.followNotificationsCount,m=d.voteThankNotificationsCount;return{default:h,follow:f,vote_thank:m}}return n===p.MARK_ALL_READ.success?(0,r.Z)({},e,(0,o.Z)({},t.tab,0)):e}})},67306:function(e,t,n){"use strict";n.d(t,{Gl:function(){return I},Hp:function(){return p},IF:function(){return y},J_:function(){return S},Ky:function(){return f},PW:function(){return w},R5:function(){return T},XX:function(){return m},_u:function(){return E},dY:function(){return Z},po:function(){return v},qX:function(){return C},uF:function(){return A},uN:function(){return g},vL:function(){return _},yV:function(){return h},zp:function(){return b}});var o=n(71103),r=n(88483),i=n(16600),a=n(12856),c=n(15390),s=n(74480),u=n.n(s),l=(n(55270),n(70175),n(29254),n(91355)),d=n(60594),p=(n(27869),n(96053),n(24316),(0,d.FH)("question",["GET","GET_TITLE","ADD","VOTE","DELETE","UPDATE","GET_INVITERS","GET_ALL_INVITERS","DELETE_INVITERS","GET_INVITEES","GET_FOLLOWERS","UPDATE_FOLLOWERS","GET_LATERS_COUNT","GET_LATERS","GET_INVITED_QUESTIONS_COUNT","GET_INVITED_QUESTIONS","IGNORE_INVITED_QUESTION","UPDATE_LATER","UPDATE_ANONYMOUS","CREATE_REDIRECTION","REVOKE_REDIRECTION","GET_BIO","CHOOSE_BIO","GET_SIMILAR_QUESTIONS","GET_RELATED_COMMODITIES","GET_ANSWERS","GET_UPDATED_ANSWERS","GET_COLLAPSED_ANSWERS","GET_HIDDEN_ANSWERS","GET_A11Y_ANSWERS","GET_NOTIFICATION_ANSWER_TOKENS","GET_INVITATION_CANDIDATES","GET_WAITING_QUESTIONS","DELETE_WAITING_QUESTION","DELETE_TOOLS_QUESTION_INVITED","GET_BIOS","UPDATE_INVITATION","UPDATE_LOCK","TOGGLE_QUESTION_EDIT_LOCK","GET_DRAFT","ADD_DRAFT","GET_ATTACHED_POST_TO_DRAFT","UPDATE_DRAFT","DELETE_DRAFT","GET_BRAND","GET_BRAND_QUESTION_ADVANCED_STYLE","UPDATE_BRAND_QUESTION_ADVANCED_STYLE","GET_BRAND_QUESTION_RECOMMENDATION","GET_BRAND_QUESTION_PERMISSION","GET_BRAND_QUESTION_OPEN_STATUS","UPDATE_BRAND_QUESTION_OPEN_STATUS","GET_BRAND_QUESTION_RED_PACKET","GET_BRAND_QUESTION_PRIZE","GET_BRAND_QUESTION_ANSWER_SUMMARIES","GET_BRAND_QUESTION_WINNERS","CREATE_BRAND_QUESTION_PRIZE","SET_BRAND_QUESTION_WINNERS","GET_CONCERNED_FOLLOWERS","GET_ANSWER_COUNT","UPDATE_COMMENT_PERMISSION","GET_META_TOPICS","LOAD_RELATED_BLUESTAR_RANKLIST","GET_RELATED_SEARCH","GET_AUTO_INVITATION","OPEN_AUTO_INVITATION","CLOSE_AUTO_INVITATION","LOAD_COMMERCIAL_BANNER","GET_SIMPLE_CONCERNED_FOLLOWERS","UPDATE_VOTE_TOPIC","GET_DISCLAIMERS","GET_QUESTION_SHARE","GET_READING_MEMBERSHIP","GET_BRAND_QUESTION_ANSWER_MARK","PUT_BRAND_QUESTION_ANSWER_MARK","PUT_BRAND_QUESTION_STATUS","GET_BRAND_QUESTION_STATUSINFO","GET_QUESTION_BANNER","OPEN_BUS_VIP","QUERY_BUS_VIP_STATUS","QUERY_DEFAULT_SETTINGS","QUERY_QUESTION_DRAFT","UPDATE_MARKDOWN_ENABLED","REMOVE_SESSION"])),h=(0,d.co)("question",["REMOVE_RED_PACKET","SHOW_MOBILE_SIGN_IN_MODAL"]);u()({is_visible:!0,related_cards:!0,ad_track_url:!0,review_info:!0,mute_info:!0,detail:!0,editable_detail:!0,comment_count:!0,can_comment:!0,comment_permission:!0,admin_closed_comment:!0,answer_count:!0,collapsed_answer_count:!0,follower_count:!0,visit_count:!0,topics:!0,author:!0,show_author:!0,show_encourage_author:!0,excerpt:!0,thumbnail_info:!0,voteup_count:!0,is_editable:!0,is_normal:!0,status:!0,redirection:!0,question_type:!0,is_labeled:!0,is_muted:!0,created:!0,updated_time:!0,has_publishing_draft:!0,annotation_detail:!0,relationship:{is_author:!0,voting:!0,is_anonymous:!0,is_following:!0,can_edit:!0,can_collapse_answers:!0,can_stick_answers:!0,can_lock:!0,can_vote:!0,my_answer:!0},is_bannered:!0,event:!0,reaction_instruction:!0}),u()({data:[{is_normal:!0,admin_closed_comment:!0,reward_info:!0,is_collapsed:!0,annotation_action:!0,annotation_detail:!0,collapse_reason:!0,is_sticky:!0,collapsed_by:!0,suggest_edit:!0,comment_count:!0,can_comment:!0,content:!0,editable_content:!0,attachment:!0,voteup_count:!0,reshipment_settings:!0,comment_permission:!0,created_time:!0,updated_time:!0,review_info:!0,relevant_info:!0,question:!0,excerpt:!0,relationship:{is_authorized:!0,is_author:!0,voting:!0,is_thanked:!0,is_nothelp:!0,is_recognized:!0},is_labeled:!0,paid_info:!0,paid_info_content:!0,mark_infos:[{url:!0}],author:{follower_count:!0,badge:[{topics:!0}],vip_info:!0},settings:{table_of_content:{enabled:!0}},reaction_instruction:!0}]});function f(e){return{type:h.SHOW_MOBILE_SIGN_IN_MODAL,payload:e}}function m(e,t){return function(n,a){var c=a(),s=c.currentUser,u=c.entities,l=u.users,d=u.questions,h=l[s],f=d[e],m=t?1:-1,v={types:p.UPDATE_FOLLOWERS,endpoint:"questions/".concat(e,"/followers"),method:t?"POST":"DELETE"};return n(f?{meta:{id:e,expect:t},API:v,UPDATE:{request:{users:(0,o.Z)({},s,{followingQuestionCount:h.followingQuestionCount+m}),questions:(0,o.Z)({},e,{followerCount:f.followerCount+m,relationship:(0,i.Z)((0,r.Z)({},f.relationship||{}),{isFollowing:t})})},failure:{users:(0,o.Z)({},s,h),questions:(0,o.Z)({},e,f)}}}:{meta:{id:e,expect:t},API:v})}}function v(e,t){return function(n,a){var c=a(),s=c.currentUser,u=c.entities,d=u.users,h=u.questions,f=u.answers,m=d[s],v=h[e],Z=v.relationship,g=Z.myAnswer,E=Z.isAnonymous,T=g&&g.answerId?f[g.answerId]:null;return t="boolean"==typeof t?t:!E,n({API:{types:p.UPDATE_ANONYMOUS,endpoint:"questions/".concat(e,"/anonyms"),method:t?"POST":"DELETE"},UPDATE:{request:{questions:(0,o.Z)({},e,{relationship:(0,i.Z)((0,r.Z)({},v.relationship),{isAnonymous:t})}),answers:T?(0,o.Z)({},T.id,{author:t?l.aK:m}):{}},failure:{questions:(0,o.Z)({},e,v),answers:T?(0,o.Z)({},T.id,T):{}}}})}}function Z(e){return{id:e,API:{types:p.GET_DRAFT,endpoint:"questions/".concat(e,"/draft"),query:{include:"question,schedule"}},schema:c.l.DRAFT,NOTIFICATION:{failure:"草稿加载失败"},UPDATE:{success:function(t){return t.question?(0,o.Z)({},"question_".concat(e),{attachment:t.attachment}):{drafts:(0,o.Z)({},"question_".concat(e),null)}}}}}function g(e,t,n,c,s,u){return function(l,d){var h="question_".concat(e),f=d().entities.drafts;return l({API:{types:p.ADD_DRAFT,endpoint:"questions/".concat(e,"/draft"),method:"POST",body:(0,a.decamelizeKeys)({content:t,deltaTime:n,draftType:c,attachment:s,settings:u}),fetchOptions:{zsAutoSignature:!1}},UPDATE:{request:{drafts:(0,o.Z)({},h,{editableContent:t,draftType:c,attachment:s,updating:!0,updated:!1,updateFailed:!1})},success:function(e){return{drafts:(0,o.Z)({},h,{createdTime:e.createdTime,updatedTime:e.updatedTime,updating:!1,updated:!0,updateFailed:!1})}},failure:{drafts:(0,o.Z)({},h,(0,i.Z)((0,r.Z)({},f[h]),{updating:!1,updated:!1,updateFailed:!0}))}}})}}function E(e,t,n,c,s,u){return function(l,d){var h="question_".concat(e),f=d().entities.drafts;return l({API:{types:p.UPDATE_DRAFT,endpoint:"questions/".concat(e,"/draft"),method:"PUT",body:(0,a.decamelizeKeys)({content:t,deltaTime:n,draftType:c,attachment:s,settings:u}),fetchOptions:{zsSignature:!1}},UPDATE:{request:{drafts:(0,o.Z)({},h,{editableContent:t,draftType:c,attachment:s,updating:!0,updated:!1,updateFailed:!1})},success:function(e){return{drafts:(0,o.Z)({},h,{createdTime:e.createdTime,updatedTime:e.updatedTime,updating:!1,updated:!0,updateFailed:!1})}},failure:{drafts:(0,o.Z)({},h,(0,i.Z)((0,r.Z)({},f[h]),{updating:!1,updated:!1,updateFailed:!0}))}}})}}function T(e){return function(t,n){var r="question_".concat(e),i=n().entities.drafts;return t({API:{types:p.DELETE_DRAFT,endpoint:"questions/".concat(e,"/draft"),method:"DELETE"},UPDATE:{request:{drafts:(0,o.Z)({},r,null)},failure:{drafts:i}}})}}function C(e){return{id:e,API:{types:p.GET_ALL_INVITERS,endpoint:"questions/".concat(e,"/inviters"),query:{with_answered:!0,with_ignored:!0,with_admin:!0}},schema:c.l.USER_ARRAY}}function A(e){return{API:{endpoint:"questions/".concat(e,"/bios"),types:p.GET_BIOS}}}function _(e,t){return function(n,o){var c=o().topic.bios;return n({API:{endpoint:"questions/".concat(e,"/bio"),types:p.CHOOSE_BIO,body:(0,a.decamelizeKeys)({type:t.type,topicId:(t.topic||{}).id}),method:"POST"},id:e,bio:(0,i.Z)((0,r.Z)({},t),{bio:c[(t.topic||{}).id]})})}}function y(e){return{API:{types:p.GET_BIO,endpoint:"questions/".concat(e,"/bio")},id:e}}function S(e){return{id:e,API:{types:p.GET_DISCLAIMERS,endpoint:"/questions/".concat(e,"/disclaimers")}}}function I(){return{API:{types:p.QUERY_DEFAULT_SETTINGS,endpoint:"/editor/default-settings",method:"GET"}}}function b(e){return{API:{types:p.UPDATE_MARKDOWN_ENABLED,endpoint:"editor/default-settings",method:"PUT",body:{common_settings:(0,a.decamelizeKeys)(e)}}}}function w(e){return{API:{types:p.QUERY_QUESTION_DRAFT,endpoint:"/questions/".concat(e,"/draft"),method:"GET"}}}},29254:function(e,t,n){"use strict";n.d(t,{Hp:function(){return C.Hp},uN:function(){return C.uN},em:function(){return O},vL:function(){return C.vL},ZP:function(){return D},R5:function(){return C.R5},qX:function(){return C.qX},IF:function(){return C.IF},SZ:function(){return R},gW:function(){return w},uF:function(){return C.uF},J_:function(){return C.J_},dY:function(){return C.dY},hh:function(){return N},Gl:function(){return C.Gl},Md:function(){return b},Ky:function(){return C.Ky},_u:function(){return C._u},zp:function(){return C.zp},po:function(){return C.po},XX:function(){return C.XX}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(52626),s=(n(68562),n(77594)),u=n(50385),l=n(18214),d=n(80619),p=n(20472),h=n(58958),f=n(78209),m=(n(52857),n(3404),n(17222),n(49236),n(70164),n(40937),n(62372),n(66258));var v="pc_panel",Z=[{name:"recommend",queryName:"",icon:s.$,text:"为你推荐",request:{endpoint:"creators/question_route/pc_member_related/recommend",query:{pageSource:v}}},{name:"invite",queryName:"invite",icon:u.y,text:"邀请回答",request:{endpoint:"notifications/v3/timeline/entry/invite",query:{invite_with_time_slice:1}}},{name:"newest",queryName:"new",icon:l.k,text:"最新问题",request:{endpoint:"/creators/question_route/pc_member_related/newest",query:{pageSource:v,include:m.UH}}},{name:"hot",queryName:"hot",icon:d.ZV,text:"人气问题",request:{endpoint:"creators/question_route/pc_member_related/hot",query:{pageSource:v}}}];p.T,h.xl,l.k,f.RF;var g=[{name:"total",text:"所有人",filterBy:"",countKey:"questionTotalCount"},{name:"followees",text:"我关注的人",filterBy:"followees",countKey:"questionFolloweeCount"}],E=n(27869),T=n(96053),C=n(67306),A=(0,T.Fd)(C.Hp.GET_NOTIFICATION_ANSWER_TOKENS,{mapActionToKey:function(e){return e.notificationId}});function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isDrained:!1,items:[],searchItems:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.Hp.GET_INVITATION_CANDIDATES.request:return(0,i.Z)((0,r.Z)({},e),{isFetching:!0});case C.Hp.GET_INVITATION_CANDIDATES.success:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({isFetching:!1,isDrained:!0},t.keyword?"searchItems":"items",t.result));case C.Hp.GET_INVITATION_CANDIDATES.failure:return(0,i.Z)((0,r.Z)({},e),{isFetching:!1});case C.Hp.UPDATE_INVITATION.request:case C.Hp.UPDATE_INVITATION.failure:var n=e.items,c=e.searchItems,s=n.findIndex((function(e){return e.member===t.urlToken})),u=c.findIndex((function(e){return e.member===t.urlToken}));if(s>=0){var l=n[s];return(0,i.Z)((0,r.Z)({},e),{items:(0,a.Z)(n.slice(0,s)).concat([(0,i.Z)((0,r.Z)({},l),{isInvited:!l.isInvited})],(0,a.Z)(n.slice(s+1)))})}if(u>=0){var d=c[u];return(0,i.Z)((0,r.Z)({},e),{searchItems:(0,a.Z)(c.slice(0,u)).concat([(0,i.Z)((0,r.Z)({},d),{isInvited:!d.isInvited})],(0,a.Z)(c.slice(u+1)))})}return e;default:return e}}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isDrained:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.Hp.GET_INVITEES.request:return(0,i.Z)((0,r.Z)({},e),{isFetching:!0});case C.Hp.GET_INVITEES.success:return(0,i.Z)((0,r.Z)({},e),{isFetching:!1,isDrained:!0,items:t.result});case C.Hp.GET_INVITEES.failure:return(0,i.Z)((0,r.Z)({},e),{isFetching:!1});case C.Hp.UPDATE_INVITATION.request:var n=t.urlToken,o=e.items,c=o.indexOf(n),s=(0,a.Z)(o);return c<0?(0,i.Z)((0,r.Z)({},e),{items:[n].concat((0,a.Z)(s))}):(s.splice(c,1),(0,i.Z)((0,r.Z)({},e),{items:(0,a.Z)(s),deleteIndex:c}));case C.Hp.UPDATE_INVITATION.failure:var u=t.urlToken,l=e.items,d=l.indexOf(u),p=(0,a.Z)(l);return d>=0?(p.splice(u,1),(0,i.Z)((0,r.Z)({},e),{items:(0,a.Z)(p)})):(p.splice(e.deleteIndex,0,u),(0,i.Z)((0,r.Z)({},e),{items:(0,a.Z)(p),deleteIndex:-1}));default:return e}}var S=(0,c.combineReducers)({followers:(0,T.Fd)(C.Hp.GET_FOLLOWERS),concernedFollowers:(0,T.Fd)(C.Hp.GET_CONCERNED_FOLLOWERS),answers:(0,T.Fd)(C.Hp.GET_ANSWERS,{addSuccessType:E.uJ.ADD.success,addAtTop:!1,additionalCaseTypes:[E.uJ.RESTORE.success,E.uJ.COLLAPSE.success],additionalCase:function(e,t){return t.type!==E.uJ.RESTORE.success||e.ids.includes(t.result)?e:(0,i.Z)((0,r.Z)({},e),{ids:(0,a.Z)(e.ids).concat([t.result])})}}),hiddenAnswers:(0,T.Fd)(C.Hp.GET_HIDDEN_ANSWERS,{addSuccessType:E.uJ.ADD.success,addAtTop:!1,additionalCaseTypes:[E.uJ.RESTORE.success,E.uJ.COLLAPSE.success],additionalCase:function(e,t){return t.type!==E.uJ.RESTORE.success||e.ids.includes(t.result)?e:(0,i.Z)((0,r.Z)({},e),{ids:(0,a.Z)(e.ids).concat([t.result])})}}),updatedAnswers:(0,T.Fd)(C.Hp.GET_UPDATED_ANSWERS,{addSuccessType:E.uJ.ADD.success,addAtTop:!1,additionalCaseTypes:[E.uJ.RESTORE.success],additionalCase:function(e,t){return t.type!==E.uJ.RESTORE.success||e.ids.includes(t.result)?e:(0,i.Z)((0,r.Z)({},e),{ids:(0,a.Z)(e.ids).concat([t.result])})}}),ariaAnswers:function(e,t){return(0,T.Fd)(C.Hp.GET_A11Y_ANSWERS)(e,t)},collapsedAnswers:function(e,t){return(0,T.Fd)(C.Hp.GET_COLLAPSED_ANSWERS)(e,t)},notificationAnswers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.payload,o=t.type;if(Object.values(C.Hp.GET_NOTIFICATION_ANSWER_TOKENS).includes(o)){if(o===C.Hp.GET_NOTIFICATION_ANSWER_TOKENS.success){var r=n.data,i=n.paging,a=i.isEnd,c=i.next;t.result=r,t.isDrained=a,t.next=c}return A(e,t)}return e},invitedQuestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.reduce((function(e,t){return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.name,{count:null,isEnd:!1,isLoading:!1,questions:[]}))}),{}),t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_INVITED_QUESTIONS_COUNT.success)return g.reduce((function(e,n){return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n.name,(0,i.Z)((0,r.Z)({},e[n.name]),{count:t.payload.data[n.countKey]})))}),e);if(t.type===C.Hp.GET_INVITED_QUESTIONS.request){var n=t.meta.typeName;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{isLoading:!0})))}if(t.type===C.Hp.GET_INVITED_QUESTIONS.success){var c=t.meta.typeName,s=t.payload,u=s.paging,l=s.data;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c,(0,i.Z)((0,r.Z)({},e[c]),{isEnd:u.isEnd,isLoading:!1,questions:(0,a.Z)(e[c].questions).concat((0,a.Z)(l))})))}return e},laterQuestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{count:null,isEnd:!1,isLoading:!1,questions:[]},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_LATERS_COUNT.success)return(0,i.Z)((0,r.Z)({},e),{count:t.payload.count});if(t.type===C.Hp.UPDATE_LATER.success)return(0,i.Z)((0,r.Z)({},e),{count:e.count+(t.meta.expect?1:-1)});if(t.type===C.Hp.GET_LATERS.request)return(0,i.Z)((0,r.Z)({},e),{isLoading:!0});if(t.type===C.Hp.GET_LATERS.success){var n=t.payload,o=n.paging,c=n.data;return(0,i.Z)((0,r.Z)({},e),{isEnd:o.isEnd,isLoading:!1,questions:(0,a.Z)(e.questions).concat((0,a.Z)(c))})}return e},waitingQuestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.reduce((function(e,t){return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.name,{isEnd:!1,isLoading:!1,questions:[]}))}),{}),t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_WAITING_QUESTIONS.request){var n=t.meta.type;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{isLoading:!0})))}if(t.type===C.Hp.GET_WAITING_QUESTIONS.success){var c=t.meta.type,s=t.payload,u=s.paging,l=s.data;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c,{paging:u,isEnd:u.isEnd,isLoading:!1,questions:(0,a.Z)(e[c].questions).concat((0,a.Z)(l))}))}if(t.type===C.Hp.UPDATE_FOLLOWERS.success){var d=t.meta,p=d.id,h=d.expect,f=Object.keys(e).reduce((function(e,t){return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t,(0,i.Z)((0,r.Z)({},e[t]),{questions:e[t].questions.map((function(e){return e.question.id===p?(0,i.Z)((0,r.Z)({},e),{question:(0,i.Z)((0,r.Z)({},e.question),{relationship:(0,i.Z)((0,r.Z)({},e.question.relationship),{isFollowing:h})})}):e}))})))}),e);return f}return e},invitationCandidates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,a.Z)(Object.values(C.Hp.GET_INVITATION_CANDIDATES)).concat((0,a.Z)(Object.values(C.Hp.UPDATE_INVITATION))).includes(t.type)?(0,o.Z)({},t.id,_(e[t.id],t)):e},inviters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_INVITERS.success){var n=t.id,a=t.payload.data;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,a))}if(t.type===C.Hp.GET_ALL_INVITERS.success){var c=t.id,s=t.payload.data;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},"".concat(c,"_all"),s))}return e},invitees:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,a.Z)(Object.values(C.Hp.GET_INVITEES)).concat((0,a.Z)(Object.values(C.Hp.UPDATE_INVITATION))).includes(t.type)?(0,o.Z)({},t.id,y(e[t.id],t)):e},similarQuestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_SIMILAR_QUESTIONS.success){var n=t.id,a=t.payload.data;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,a))}return e},questionBanners:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_QUESTION_BANNER.success){var n=t.id,a=t.payload.data;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,a))}return e},relatedCommodities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_RELATED_COMMODITIES.success){var n=t.id,a=t.payload,c=a.data,s=a.attachedInfo;return c.attachedInfo=s,(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,c))}return e},bio:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,a=e[n]||{};return t.type===C.Hp.GET_BIO.success?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},a),{result:t.payload}))):t.type===C.Hp.CHOOSE_BIO.success?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},a),{result:t.bio}))):e},brand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===C.Hp.GET_BRAND.success?t.payload:e},permission:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===C.Hp.GET_BRAND_QUESTION_PERMISSION.success?t.payload:e},adverts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_ANSWERS.success&&t.payload.adInfo){var n=t.payload.adInfo,i=n.position,a=n.ad,c=n.adjson;return(0,r.Z)({},e,(0,o.Z)({},i,{ad:a,adjson:c}))}return e},advancedStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===C.Hp.GET_BRAND_QUESTION_ADVANCED_STYLE.success?t.payload:e},commonAnswerCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return t.type===C.Hp.GET_ANSWER_COUNT.success?t.payload.answerCount:t.type===E.uJ.COLLAPSE.success?"nobody"===t.answer.collapsedBy?e-1:e+1:e},hiddenAnswerCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return t.type===C.Hp.GET_ANSWER_COUNT.success?t.payload.hiddenAnswerCount:t.type===E.uJ.COLLAPSE.success?"org"===t.collapsedBy||"advertiser"===t.collapsedBy?e+1:e-1:e},topicMeta:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_META_TOPICS.success){var n=t.payload,a=t.id;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,n))}return e},bluestarRanklist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.LOAD_RELATED_BLUESTAR_RANKLIST.success){var n=t.payload,a=t.id;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,n))}return e},relatedSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_RELATED_SEARCH.success){var n=t.id,a=t.payload;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,a))}return e},autoInvitation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_AUTO_INVITATION.success){var n=t.payload,a=void 0===n?{}:n,c=t.id;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c,a))}if(t.type===C.Hp.OPEN_AUTO_INVITATION.success){var s=t.id,u=e[s];return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},s,(0,i.Z)((0,r.Z)({},u),{status:"open"})))}if(t.type===C.Hp.CLOSE_AUTO_INVITATION.success){var l=t.id,d=e[l];return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},l,(0,i.Z)((0,r.Z)({},d),{status:"close"})))}return e},simpleConcernedFollowers:(0,T.Fd)(C.Hp.GET_SIMPLE_CONCERNED_FOLLOWERS),draftStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_DRAFT.request){var n=t.id;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,{loading:!0}))}if(t.type===C.Hp.GET_DRAFT.success||t.type===C.Hp.GET_DRAFT.failure){var a=t.id;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,{loading:!1}))}return e},disclaimers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===C.Hp.GET_DISCLAIMERS.success){var n=t.id,a=t.payload.data;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,a))}return e},isShowMobileSignInModal:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===C.yV.SHOW_MOBILE_SIGN_IN_MODAL?t.payload:e}}),I=n(65406);n(5625);function b(e,t){var n=t.id;return(e.entities.questions||{})[n]}function w(e){var t;return"special_mute"===(null==e||null===(t=e.muteInfo)||void 0===t?void 0:t.type)}function R(e){var t;return"freeze"===(null==e||null===(t=e.muteInfo)||void 0===t?void 0:t.type)}(0,I.P1)((function(e){return e.question.adverts}),(function(e){return[0].concat((0,a.Z)(Object.keys(e||{}).map(Number).sort((function(e,t){return e-t}))))}));function N(e){return e.question?e.question.permission:{}}function O(e,t){return e.question.inviters["".concat(t,"_all")]}var D=S},82832:function(e,t,n){"use strict";n.d(t,{O8:function(){return s},ZP:function(){return u},m3:function(){return c}});var o=n(71103),r=n(88483),i=n(16600),a=(0,n(60594).co)("readStatus",["UPDATE"]);function c(e,t){return{type:a.UPDATE,data:{item:e,isRead:t}}}function s(e,t){if(t){var n=t.type,o=t.id,r=e.readStatus[n];if("answer"===n||"article"===n)return Boolean(r&&r[o])}return!0}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type;if(n===a.UPDATE){var c=t.data,s=c.item,u=s.type,l=s.id,d=c.isRead;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},u,(0,i.Z)((0,r.Z)({},e[u]),(0,o.Z)({},l,d))))}return e}},62333:function(e,t,n){"use strict";n.d(t,{Gz:function(){return v},To:function(){return f},ZP:function(){return g},cP:function(){return m},mA:function(){return h}});var o=n(30834),r=n(88483),i=n(16600),a=n(12856),c=n(15568),s=n.n(c),u=n(59083),l=n(91355),d=n(60594),p=(0,r.Z)({},(0,d.FH)("register",["DIGITS","REGISTER","VALIDATE_DIGITS","VALIDATE_REGISTER_FORM","GET_WECHAT_SOCIAL_INFO"]),(0,d.co)("register",["RESET_REGISTER_VALIDATE_RESULT"]));function h(){return{type:p.RESET_REGISTER_VALIDATE_RESULT}}function f(e){return{API:{types:p.VALIDATE_REGISTER_FORM,endpoint:"v3/oauth/validate/register_form",method:"POST",fetchOptions:{credentials:"include",zsEncrypt:!0,body:(0,u.Z)((0,a.decamelizeKeys)(e))}}}}function m(e){var t=(0,o.Z)({},e);return function(e){return e(h()),e(f(t)).then((function(n){n.payload.success&&e(function(e){return function(t){return t(h()),t({API:{types:p.REGISTER,endpoint:"v3/oauth/register",method:"POST",fetchOptions:{credentials:"include",zsEncrypt:!0,body:(0,u.Z)((0,a.decamelizeKeys)(e))}},NOTIFICATION:!1})}}(t))}))}}var v=function(e,t){return function(n){var o=s().get("atoken"),r=s().get("atoken_expired_in");if(!o)return Promise.reject();var i=(0,u.z)((0,a.decamelizeKeys)({socialType:e,appkey:l.M5[t||e],expires_at:r,accessToken:o,source:"com.zhihu.web"}));return n({API:{types:p.GET_WECHAT_SOCIAL_INFO,endpoint:"/v3/oauth/social/info",method:"POST",body:i,fetchOptions:{credentials:"include"}},NOTIFICATION:!1})}},Z={registerValidateSucceeded:null,registerValidateErrors:{},registerConfirmError:null,sendDigitsError:null,registerConfirmSucceeded:null};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0,n=t.type;if(n===p.VALIDATE_REGISTER_FORM.success){var o=t.payload;return(0,i.Z)((0,r.Z)({},e),{registerValidateSucceeded:Boolean(o.success),registerValidateErrors:(0,r.Z)({},e.registerValidateErrors,o)})}return n===p.VALIDATE_REGISTER_FORM.failure?(0,i.Z)((0,r.Z)({},e),{registerConfirmError:(0,d.O1)(t.err.payload)}):n===p.RESET_REGISTER_VALIDATE_RESULT?(0,r.Z)({},Z):n===p.REGISTER.success?(0,i.Z)((0,r.Z)({},e),{registerConfirmSucceeded:!0}):n===p.REGISTER.failure?(0,i.Z)((0,r.Z)({},e),{registerConfirmSucceeded:!1,registerConfirmError:(0,d.O1)(t.err.payload)}):n===p.DIGITS.failure?(0,i.Z)((0,r.Z)({},e),{sendDigitsError:t.err.payload.message}):n===p.VALIDATE_DIGITS.failure?(0,i.Z)((0,r.Z)({},e),{registerValidateErrors:(0,r.Z)({},e.registerValidateErrors,(0,d.O1)(t.err.payload))}):e}},91356:function(e,t,n){"use strict";n.d(t,{Hj:function(){return p},Ob:function(){return l}});var o=n(88483),r=n(16600),i=n(12856),a=n(95044),c=n(60594),s=n(24316),u=(0,c.FH)("report",["ADD","REPORT_USER_ACTION"]),l=function(e){var t=e.message,n=e.code;return[103006,103007].includes(n)?t||a.dC.failure:[103003,103001].includes(e.code)?a.dC.duplicate:a.dC.failure},d=a.dC.success;function p(e){var t=e.resourceId,n=e.resourceIds,a=e.type,c=e.reasonType,p=e.customReason,h=e.source,f=void 0===h?"web":h,m=e.reportedMemberHashId,v=e.options,Z=void 0===v?{}:v,g=e.url,E=e.pictures;return{API:{types:u.ADD,endpoint:"reports",method:"POST",body:(0,i.decamelizeKeys)((0,r.Z)((0,o.Z)({},t&&{resourceId:t},n&&{resourceIds:n}),{type:a,reasonType:c,customReason:p,source:f,reportedMemberHashId:m,url:g,pictures:E}))},NOTIFICATION:void 0===Z.NOTIFICATION?{key:"comment"===a?s.zQ:s.V8,success:d,failure:l}:Z.NOTIFICATION}}},82140:function(e,t,n){"use strict";n.d(t,{ZP:function(){return C},bG:function(){return E},Jg:function(){return h},$T:function(){return p},gT:function(){return f},ij:function(){return T},OO:function(){return m}});var o=n(71103),r=n(88483),i=n(16600),a=n(60594),c=n(59083),s=n(15390),u=(0,a.FH)("republish",["GET_ARTICLE_REPUBLISH_REQUESTS","GET_ALL_REPUBLISH_REQUESTS","POST_ARTICLE_REPUBLISH","UPDATE_REPUBLISH_PERMISSION"]),l={cancel:"canceled",approve:"approved",reject:"rejected"},d={column:"column_owner",article:"article_author"};function p(e){return{meta:{entityType:"article"},API:{types:u.GET_ARTICLE_REPUBLISH_REQUESTS,endpoint:"/articles/".concat(e,"/republish-requests")},FAILSAFE:!0,schema:s.l.REPUBLISH_ARRAY}}function h(e,t){var n=d[t];return function(o,r){var i,a,c=(null!==(a=null===(i=r().republish)||void 0===i?void 0:i[t])&&void 0!==a?a:{}).paging,l=!1===(null==c?void 0:c.isEnd)?c.next:"/members/".concat(e,"/republish-requests?role=").concat(n);return o({meta:{id:e,entityType:t},API:{types:u.GET_ALL_REPUBLISH_REQUESTS,endpoint:l},FAILSAFE:!0,schema:s.l.REPUBLISH_ARRAY})}}function f(e){var t=e.requestId,n=e.action,i=e.articleId,a=e.columnId;return{API:{types:u.POST_ARTICLE_REPUBLISH,endpoint:"/articles/".concat(i,"/republish"),method:"POST",body:(0,r.Z)({action:n},"create"===n?{column:a}:{request_id:t})},meta:{articleId:i,requestId:t,result:n},UPDATE:{success:function(){return{republishes:(0,o.Z)({},t,{state:l[n]})}}}}}function m(e,t){return function(n,r){var i=r().entities.articles[e];return n({API:{types:u.UPDATE_REPUBLISH_PERMISSION,endpoint:"/articles/".concat(e,"/copyright-permission"),method:"PUT",body:(0,c.Z)({copyright_permission:t})},UPDATE:{request:{articles:(0,o.Z)({},e,{copyrightPermission:t})},failure:{articles:(0,o.Z)({},e,i)}}})}}var v=n(78724),Z=function(e,t){return(null==t?void 0:t[0])?t.map((function(t){var n,o=t.object,a=o.id,c=o.schema,s=t.destination,u=t.proposer,l=t.approver,d=(0,v.Z)(t,["object","destination","proposer","approver"]);return(0,i.Z)((0,r.Z)({},d),{object:null===(n=e.entities["".concat(c,"s")])||void 0===n?void 0:n[a],destination:e.entities.columns[s],approver:e.entities.users[l],proposer:e.entities.users[u]})})):[]},g=function(e){var t=e.isAuthor,n=e.isProfile,o=e.requestType;return n?"approver":t&&"self_recommend"===o?"proposer":"approver"},E=function(e,t){var n=t.isAuthor,o=t.isProfile,r=t.entityType,i=t.requestType,a=e.entities.republishes||{},c=Object.keys(a).map((function(e){return a[e]})).filter((function(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=g({isAuthor:n,isProfile:o,requestType:i});if("column"===r)return a[c]===e.currentUser&&"self_recommend"===a.requestType;var s=i||"invite";return a[c]===e.currentUser&&(null===(t=a.object)||void 0===t?void 0:t.schema)===r&&a.requestType===s}));return Z(e,c)},T=function(e){var t=e.entities.republishes||{},n=Object.keys(t).map((function(e){return t[e]})).filter((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.proposer===e.currentUser&&"pending"===t.state&&"self_recommend"===t.requestType}));return Z(e,n)},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.meta,c=t.payload;if(n===u.GET_ARTICLE_REPUBLISH_REQUESTS.request||n===u.GET_ARTICLE_REPUBLISH_REQUESTS.failure||n===u.GET_ALL_REPUBLISH_REQUESTS.failure||n===u.GET_ALL_REPUBLISH_REQUESTS.request){var s=a.entityType;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},s,(0,i.Z)((0,r.Z)({},e[s]),{isLoading:n===u.GET_ARTICLE_REPUBLISH_REQUESTS.request||n===u.GET_ALL_REPUBLISH_REQUESTS.request})))}if(n===u.GET_ALL_REPUBLISH_REQUESTS.success||n===u.GET_ARTICLE_REPUBLISH_REQUESTS.success){var l=a.entityType,d=c.paging;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},l,(0,i.Z)((0,r.Z)({},e[l]),{paging:d,isLoading:!1})))}return e}},64833:function(e,t,n){"use strict";n.d(t,{$U:function(){return b},$j:function(){return w},Ad:function(){return m},BE:function(){return T},Cf:function(){return v},Js:function(){return _},OC:function(){return S},TN:function(){return I},ZP:function(){return O},Ze:function(){return E},i3:function(){return C},nb:function(){return g},on:function(){return y},pb:function(){return Z},vu:function(){return A}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(12856),s=n(44646),u=n.n(s),l=n(60594),d=n(24316),p=n(96053),h=n(91355),f=(0,r.Z)({},(0,l.FH)("reward",["ADD_REWARD","GET_REWARD_USER","ADD_ARTICLE_REWARD","GET_REWARD_USER_DETAILS","GET_ARTICLE_REWARD_USER","GET_PAGING_ARTICLE_REWARD_USER","GET_PAGING_ARTICLE_REWARD_USER_DETAILS","UPDATE_ARTICLE_REWARD","UPDATE_REWARD_FOLLOWERS"]),(0,l.co)("reward",["REMOVE_TRADE_NUMBER","ADD_REWARD_TAGLINE","ON_REWARD_SUCCESS","UPDATE_ENTITIES_USERS","UPDATE_QUESTION_REWARDINFO"]));function m(e,t){return function(n,o){var r=o().reward,i=r.answer,a=r.article,c=Object.keys(i).length>0,s=c?i:a,u=c?"answer":"article",l=Object.keys(s)[0],p=Object.values(s)[0].users,m=p.filter((function(t){return t.urlToken===e}))[0],v=p.indexOf(m);return m.isBlocked?n((0,d.c0)(h.T$.blocked,"red")):n({id:l,user:m,count:t?1:-1,index:v,expect:t,rewardType:u,API:{types:f.UPDATE_REWARD_FOLLOWERS,endpoint:"members/".concat(m.urlToken,"/followers"),method:t?"POST":"DELETE"}})}}function v(e,t,n){return function(o){return o({API:{types:f.ADD_REWARD,endpoint:"/answers/".concat(e,"/rewarders"),method:"POST",body:(0,c.decamelizeKeys)({amount:t,type:n})},id:e})}}function Z(e,t){return function(n){return n({API:{types:f.ADD_ARTICLE_REWARD,endpoint:"/articles/".concat(e,"/tipjar_wallet"),method:"POST",body:(0,c.decamelizeKeys)({price:Number(t)})},id:e})}}function g(e){return function(t){return t({API:{types:f.GET_ARTICLE_REWARD_USER,endpoint:"/articles/".concat(e,"/tipjar"),method:"GET"},id:e})}}function E(e){return function(t){return t({API:{types:f.GET_PAGING_ARTICLE_REWARD_USER,endpoint:"/articles/".concat(e,"/tipjarors"),method:"GET"},id:e})}}function T(e){return function(t){return t({API:{types:f.GET_PAGING_ARTICLE_REWARD_USER_DETAILS,endpoint:"/articles/".concat(e,"/rewarddetails"),method:"GET"},id:e})}}function C(e,t,n){return function(o){var r={tagline:t};return"boolean"==typeof n&&(r.canTip=n),o({API:{types:f.UPDATE_ARTICLE_REWARD,endpoint:"/articles/".concat(e),method:"PUT",body:(0,c.decamelizeKeys)({tipjarSetting:r})},id:e,tagline:t,canTip:n})}}function A(e){return function(t,n){var o=(n().reward[e]||{}).endpoint;return t({API:(0,r.Z)({types:f.GET_REWARD_USER},o?{endpoint:o}:{endpoint:"answers/".concat(e,"/rewarders"),method:"GET",query:{include:"data[*].answer_count,articles_count,follower_count,is_blocking,is_blocked,is_following,is_followed",offset:0,limit:p.VZ}}),id:e})}}function _(e){return function(t,n){var o=(n().reward[e]||{}).endpoint;return t({API:(0,r.Z)({types:f.GET_REWARD_USER_DETAILS},o?{endpoint:o}:{endpoint:"answers/".concat(e,"/rewarddetails"),method:"GET",query:{include:"data[*].rewarder.answer_count,articles_count,follower_count,is_blocking,is_blocked,is_following,is_followed",offset:0,limit:p.VZ}}),id:e,NOTIFICATION:!1})}}function y(e,t){return{type:f.REMOVE_TRADE_NUMBER,appsType:t,id:e}}function S(e,t){return{type:f.ADD_REWARD_TAGLINE,text:e,id:t}}function I(e,t,n){return{type:f.ON_REWARD_SUCCESS,appsType:n,users:e,id:t}}function b(e){return{type:f.UPDATE_ENTITIES_USERS,entities:{users:e}}}function w(e,t){return{type:f.UPDATE_QUESTION_REWARDINFO,questionId:e,isRewardable:t}}function R(e){var t=[];return e.forEach((function(e){var n=e.amount,o=e.created,r=e.rewarder;r.amount=n,r.rewardCreated=o;var i=t.findIndex((function(e){return e.urlToken===r.urlToken}));-1===i?t.push(r):t[i].amount+=r.amount})),t}var N={answer:{},article:{},question:{}};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload,s=t.id;if(n===f.ADD_REWARD.success)return(0,i.Z)((0,r.Z)({},e),{answer:(0,i.Z)((0,r.Z)({},e.answer),(0,o.Z)({},s,{users:e.answer[s].users,tradeNumber:c.tradeNumber}))});if(n===f.REMOVE_TRADE_NUMBER){var l=t.appsType;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},l,(0,i.Z)((0,r.Z)({},e[l]),(0,o.Z)({},s,{users:e.answer[s].users,tradeNumber:""}))))}if(n===f.ADD_REWARD_TAGLINE)return(0,i.Z)((0,r.Z)({},e),{answer:(0,i.Z)((0,r.Z)({},e.answer),(0,o.Z)({},s,{users:e.answer[s].users,tradeNumber:e[s].tradeNumber,rewardTagline:t.text}))});if(n===f.GET_REWARD_USER.success)return(0,i.Z)((0,r.Z)({},e),{answer:(0,i.Z)((0,r.Z)({},e.answer),(0,o.Z)({},s,{users:e.answer[s]?u()((0,a.Z)(e.answer[s].users).concat((0,a.Z)(c.data)),"id"):c.data,endpoint:c.paging.next}))});if(n===f.ON_REWARD_SUCCESS){var d=t.users,p=t.appsType;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},p,(0,i.Z)((0,r.Z)({},e[p]),(0,o.Z)({},s,{users:d}))))}if(n===f.GET_REWARD_USER_DETAILS.success){var h=R(c.data);return(0,i.Z)((0,r.Z)({},e),{answer:(0,i.Z)((0,r.Z)({},e.answer),(0,o.Z)({},s,{users:e.answer[s]?u()((0,a.Z)(e.answer[s].users).concat((0,a.Z)(h)),"id"):h,notice:c.notice,endpoint:c.paging.next}))})}if(n===f.UPDATE_QUESTION_REWARDINFO){var m=t.questionId,v=t.isRewardable;return(0,i.Z)((0,r.Z)({},e),{question:(0,i.Z)((0,r.Z)({},e.question),(0,o.Z)({},m,{isRewardable:v}))})}if(n===f.GET_ARTICLE_REWARD_USER.success)return(0,i.Z)((0,r.Z)({},e),{article:(0,i.Z)((0,r.Z)({},e.article),(0,o.Z)({},s,(0,r.Z)({},c)))});if(n===f.GET_PAGING_ARTICLE_REWARD_USER.success){var Z=c.data,g=c.paging.next;return(0,i.Z)((0,r.Z)({},e),{article:(0,i.Z)((0,r.Z)({},e.article),(0,o.Z)({},s,(0,i.Z)((0,r.Z)({},e.article[s]),{users:Z,endpoint:g})))})}if(n===f.GET_PAGING_ARTICLE_REWARD_USER_DETAILS.success){var E=c.data,T=c.paging.next,C=c.notice,A=R(E);return(0,i.Z)((0,r.Z)({},e),{article:(0,i.Z)((0,r.Z)({},e.article),(0,o.Z)({},s,(0,i.Z)((0,r.Z)({},e.article[s]),{users:A,notice:C,endpoint:T})))})}if(n===f.UPDATE_ARTICLE_REWARD.success){var _=t.tagline,y=t.canTip;return(0,i.Z)((0,r.Z)({},e),{article:(0,i.Z)((0,r.Z)({},e.article),(0,o.Z)({},s,(0,i.Z)((0,r.Z)({},e.article[s]),{bio:_,canTip:y})))})}if(n===f.ADD_ARTICLE_REWARD.success)return(0,i.Z)((0,r.Z)({},e),{article:(0,i.Z)((0,r.Z)({},e.article),(0,o.Z)({},s,(0,i.Z)((0,r.Z)({},e.article[s]),{tradeNumber:c.tradeNumber})))});if(n===f.UPDATE_REWARD_FOLLOWERS.request){var S=t.rewardType,I=t.id,b=t.user,w=t.count,O=t.expect,D=t.index,B=e[S][I].users.map((function(e,t){var n=e;return t===D&&(n.followerCount=b.followerCount+w,n.isFollowing=O),n}));return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},S,(0,i.Z)((0,r.Z)({},e[S]),(0,o.Z)({},I,(0,i.Z)((0,r.Z)({},e[S][I]),{users:B})))))}if(n===f.UPDATE_REWARD_FOLLOWERS.failure){var P=t.rewardType,k=t.id,x=t.user,L=t.index,U=e[P][k].users.map((function(e,t){var n=e;return L===t&&(n=x),n}));return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},P,(0,i.Z)((0,r.Z)({},e[P]),(0,o.Z)({},k,(0,i.Z)((0,r.Z)({},e[P][k]),{users:U})))))}return e}},62279:function(e,t,n){"use strict";n.d(t,{ZP:function(){return m},AO:function(){return s},OQ:function(){return u}});var o=n(71103),r=n(88483),i=n(16600),a=n(15390),c=(0,n(60594).FH)("roundtable",["LOAD_OLD_ROUNDTABLE","LOAD_ROUNDTABLE_LIST","LOAD_ROUNDTABLE_DETAIL","LOAD_ROUNDTABLE_HOT_QUESTIONS","LOAD_ROUNDTABLE_WARM_UP_CONTENTS","LOAD_ROUNDTABLE_HOT_DISCUSSIONS","LOAD_ROUNDTABLE_SELECTED_CONTENTS","TOGGLE_FOLLOW_ROUNDTABLE"]);function s(e){return{API:{types:c.LOAD_OLD_ROUNDTABLE,endpoint:"roundtables/".concat(e),query:{include:"description,guests,activities_count,questions_count,followers,stop_time,banner,is_following"}},schema:a.l.ROUNDTABLE}}function u(e){return function(t,n){var r=n().entities.roundtables[e],i=r.isFollowing,a=r.followersCount;return t({API:{types:c.TOGGLE_FOLLOW_ROUNDTABLE,endpoint:"roundtables/".concat(e,"/followers"),method:i?"DELETE":"POST"},UPDATE:{request:{roundtables:(0,o.Z)({},e,{isFollowing:!i,followersCount:i?a-1:a+1})},failure:{roundtables:(0,o.Z)({},e,r)}}})}}var l=n(49603),d=n.n(l),p=n(82471),h=n.n(p),f={hotQuestions:{},warmupContents:{},hotDiscussions:{},selectedContents:{},roundtables:{}};var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case c.LOAD_ROUNDTABLE_LIST.request:return(0,i.Z)((0,r.Z)({},e),{roundtables:(0,i.Z)((0,r.Z)({},e.roundtables),{isLoading:!0})});case c.LOAD_ROUNDTABLE_LIST.failure:return(0,i.Z)((0,r.Z)({},e),{roundtables:(0,i.Z)((0,r.Z)({},e.roundtables),{isLoading:!1})});case c.LOAD_ROUNDTABLE_LIST.success:if(a){var s=a.data,u=a.paging;return(0,i.Z)((0,r.Z)({},e),{roundtables:(0,i.Z)((0,r.Z)({},e.roundtables),{isLoading:!1,paging:u,data:d()(e.roundtables.data,s,"urlToken")})})}return(0,i.Z)((0,r.Z)({},e),{roundtables:(0,i.Z)((0,r.Z)({},e.roundtables),{isLoading:!1})});case c.LOAD_ROUNDTABLE_HOT_QUESTIONS.request:var l=t.meta.urlToken;return(0,i.Z)((0,r.Z)({},e),{hotQuestions:(0,i.Z)((0,r.Z)({},e.hotQuestions),(0,o.Z)({},l,(0,i.Z)((0,r.Z)({},e.hotQuestions[l]),{isLoading:!0})))});case c.LOAD_ROUNDTABLE_HOT_QUESTIONS.failure:var p=t.meta.urlToken;return(0,i.Z)((0,r.Z)({},e),{hotQuestions:(0,i.Z)((0,r.Z)({},e.hotQuestions),(0,o.Z)({},p,(0,i.Z)((0,r.Z)({},e.hotQuestions[p]),{isLoading:!1})))});case c.LOAD_ROUNDTABLE_HOT_QUESTIONS.success:var m,v=t.meta.urlToken,Z=a.data,g=a.paging,E=Z.map((function(e){var t=e.question,n=e.answers;return t?{question:{id:t.id},answers:n.map((function(e){return{id:e.id}}))}:null}));return(0,i.Z)((0,r.Z)({},e),{hotQuestions:(0,i.Z)((0,r.Z)({},e.hotQuestions),(0,o.Z)({},v,(0,i.Z)((0,r.Z)({},e.hotQuestions[v]),{isLoading:!1,paging:g,data:h()(null===(m=e.hotQuestions[v])||void 0===m?void 0:m.data,E)})))});case c.LOAD_ROUNDTABLE_WARM_UP_CONTENTS.request:var T=t.meta.urlToken;return(0,i.Z)((0,r.Z)({},e),{warmupContents:(0,i.Z)((0,r.Z)({},e.warmupContents),(0,o.Z)({},T,(0,i.Z)((0,r.Z)({},e.warmupContents[T]),{isLoading:!0})))});case c.LOAD_ROUNDTABLE_WARM_UP_CONTENTS.failure:var C=t.meta.urlToken;return(0,i.Z)((0,r.Z)({},e),{warmupContents:(0,i.Z)((0,r.Z)({},e.warmupContents),(0,o.Z)({},C,(0,i.Z)((0,r.Z)({},e.warmupContents[C]),{isLoading:!1})))});case c.LOAD_ROUNDTABLE_WARM_UP_CONTENTS.success:var A=t.meta.urlToken,_=a.data,y=_.map((function(e){return{question:{id:e.id}}}));return(0,i.Z)((0,r.Z)({},e),{warmupContents:(0,i.Z)((0,r.Z)({},e.warmupContents),(0,o.Z)({},A,(0,i.Z)((0,r.Z)({},e.warmupContents[A]),{isLoading:!1,data:y})))});case c.LOAD_ROUNDTABLE_HOT_DISCUSSIONS.request:var S=t.meta.urlToken;return(0,i.Z)((0,r.Z)({},e),{hotDiscussions:(0,i.Z)((0,r.Z)({},e.hotDiscussions),(0,o.Z)({},S,(0,i.Z)((0,r.Z)({},e.hotDiscussions[S]),{isLoading:!0})))});case c.LOAD_ROUNDTABLE_HOT_DISCUSSIONS.failure:var I=t.meta.urlToken;return(0,i.Z)((0,r.Z)({},e),{hotDiscussions:(0,i.Z)((0,r.Z)({},e.hotDiscussions),(0,o.Z)({},I,(0,i.Z)((0,r.Z)({},e.hotDiscussions[I]),{isLoading:!1})))});case c.LOAD_ROUNDTABLE_HOT_DISCUSSIONS.success:var b,w=t.meta.urlToken,R=a.paging,N=a.data,O=N.map((function(e){var t=e.question,n=e.answers,o=e.article;return t?{question:{id:t.id},answers:(null==n?void 0:n.map((function(e){return{id:e.id}})))||[]}:o?{article:{id:o.id}}:null}));return(0,i.Z)((0,r.Z)({},e),{hotDiscussions:(0,i.Z)((0,r.Z)({},e.hotDiscussions),(0,o.Z)({},w,(0,i.Z)((0,r.Z)({},e.hotDiscussions[w]),{isLoading:!1,paging:R,data:h()(null===(b=e.hotDiscussions[w])||void 0===b?void 0:b.data,O)})))});case c.LOAD_ROUNDTABLE_SELECTED_CONTENTS.request:var D=t.meta.urlToken;return(0,i.Z)((0,r.Z)({},e),{selectedContents:(0,i.Z)((0,r.Z)({},e.selectedContents),(0,o.Z)({},D,(0,i.Z)((0,r.Z)({},e.selectedContents[D]),{isLoading:!0})))});case c.LOAD_ROUNDTABLE_SELECTED_CONTENTS.failure:var B=t.meta.urlToken;return(0,i.Z)((0,r.Z)({},e),{selectedContents:(0,i.Z)((0,r.Z)({},e.selectedContents),(0,o.Z)({},B,(0,i.Z)((0,r.Z)({},e.selectedContents[B]),{isLoading:!1})))});case c.LOAD_ROUNDTABLE_SELECTED_CONTENTS.success:var P,k=t.meta.urlToken,x=a.paging,L=a.data,U=L.map((function(e){var t=e.answer,n=e.article;return t?{answer:{id:t.id}}:n?{article:{id:n.id}}:null}));return(0,i.Z)((0,r.Z)({},e),{selectedContents:(0,i.Z)((0,r.Z)({},e.selectedContents),(0,o.Z)({},k,(0,i.Z)((0,r.Z)({},e.selectedContents[k]),{isLoading:!1,paging:x,data:h()(null===(P=e.selectedContents[k])||void 0===P?void 0:P.data,U)})))});default:return e}}},89411:function(e,t,n){"use strict";n.d(t,{ZP:function(){return s},kB:function(){return c}});var o=n(71103),r=n(88483),i=n(16600),a=(0,n(60594).FH)("shareText",["GET"]);function c(e,t){return{id:e,shareType:t,API:{types:a.GET,endpoint:"".concat(t,"s/").concat(e),query:{include:"share_text"}}}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===a.GET.success){var n=t.id,c=t.shareType,s=t.payload.shareText;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},"".concat(c).concat(n),s))}return e}},91796:function(e,t,n){"use strict";n.d(t,{Z:function(){return c},o:function(){return a}});var o=n(88483),r=n(60594),i=(0,o.Z)({},(0,r.FH)("sms",["SUPPORTED_COUNTRIES"]));function a(){return{API:{types:i.SUPPORTED_COUNTRIES,endpoint:"v3/oauth/sms/supported_countries",method:"GET"}}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{supportedCountries:[]},t=arguments.length>1?arguments[1]:void 0;return t.type===i.SUPPORTED_COUNTRIES.success?{supportedCountries:t.payload.data}:e}},33855:function(e,t,n){"use strict";n.d(t,{X2:function(){return g},yS:function(){return v}});var o=n(4428),r=n(88483),i=n(16600),a=n(8518),c=n(12856),s=n(76745),u=n.n(s),l=n(84160),d=n.n(l),p=n(65406),h=n(37262),f=n(15558),m=(0,n(60594).FH)("switches",["GET","GET_VIP_SWITCHES"]),v=["hong-yuan-81-63","te-bie-mi-wang","15101089713","lewisiii","zhihuadmin","fei-xiao-gui","yan-sha-long","dong-hua-si-shu","bei-sen-80-3","2c0db1125100e7229cf159f66d859f8e","807e863f27d8bdb7d3bde20a991ace1d","c64379c8e25578f97e29c6395401d234","869e3a50498ee9f9b4e062267f4d7007","3d198a56310c02c4a83efb9f4a4c027e","41cd5c7249081389da3a523b3cb0629b","dbe159e1503acb112148055bb5b87e1d","07738e6e3211b95849334a4dc95a60a0","bab986472d44f9caa8d2c875f225b216","3b4c31848309b4109a738ee0e523cad7"];var Z=function(e){return function(t,n,o){var r=o.fnRefs,i=(0,f.Z)(r,"loadSwitches",(function(){return u()((0,h.Z)((function(e){return t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t,n){var o=n(),r=o.currentUser,i=o.switches;if(r){var a=e.filter((function(e){return!(e in i)}));if(a.length)return t({API:{types:m.GET,endpoint:"me/switches",query:{include:d()(a.map(c.decamelize)).join(",")}},meta:{couldSuperVideoUpload:-1!==v.indexOf(r)},NOTIFICATION:!1,FAILSAFE:!0})}}}(e.flat()))}),queueMicrotask))}));return i(e)}},g=function(e){return t=(0,o.Z)((function(t,n){return(0,a.Jh)(this,(function(o){switch(o.label){case 0:return[4,Promise.all(e.map((function(e){return t(Z(e))})))];case 1:return o.sent(),[2,n().switches]}}))})),function(e,n){return t.apply(this,arguments)};var t};function E(e){return e.switches&&e.switches.vipSwitches}(0,p.P1)(E,(function(e){return e&&e.mAINSWITCH&&e.sPEEDRENAME})),(0,p.P1)(E,(function(e){return e&&e.mAINSWITCH&&e.vIPICON})),(0,p.P1)(E,(function(e){return e&&e.mAINSWITCH&&e.wIDGET}));t.ZP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.GET.success:return(0,i.Z)((0,r.Z)({},e,t.payload),{couldSuperVideoUpload:t.meta.couldSuperVideoUpload});case m.GET_VIP_SWITCHES.success:return(0,i.Z)((0,r.Z)({},e),{vipSwitches:t.payload});default:return e}}},96531:function(e,t,n){"use strict";n.d(t,{Hp:function(){return z},sF:function(){return J},HV:function(){return W},ZP:function(){return re},hX:function(){return q},KS:function(){return j},rl:function(){return K}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(52626),s=n(12856),u=n(4795),l=n.n(u),d=n(47417),p=n.n(d),h=n(29254),f=n(68562),m=n(14910),v=n(15390),Z="topicBasicMessage";var g=n(60594),E=n(65406),T=n(75765),C=n(5625),A=n(96053),_=function(e){return e&&e.items},y=function(e,t){var n=t.id;return e.entities.topics[n]},S=function(e,t){var n=t.id;return e.topic.parent[n]},I=((0,E.P1)(S,_),(0,E.P1)((function(e,t){var n=t.id;return e.topic.children[n]}),_)),b=function(e,t){var n=t.id;return e.topic.bestAnswerers[n]},w=((0,E.P1)(b,_),function(e){return function(t,n){var o=n.id;return t.topic[e][o]}}),R=function(e){return(0,E.P1)((function(e){return e}),(0,E.P1)(e,A.kf),(function(e,t){return(0,i.Z)((0,r.Z)({},t),{items:(t.items||[]).map((function(t){return function(e,t){return{sourceTopic:y(e,{id:t.sourceTopic}),target:(0,T.N7)(e,t.target)}}(e,t)}))})}))},N=w("top"),O=(R(N),w("hot")),D=(R(O),w("newest")),B=(R(D),w("unanswered")),P=(R(B),w("questions")),k=(R(P),w("pin")),x=(R(k),w("followers")),L=((0,E.P1)((function(e){return e}),(0,E.P1)(x,A.kf),(function(e,t){return(0,i.Z)((0,r.Z)({},t),{items:(t.items||[]).map((function(t){return(0,C.np)(e,{id:t})}))})})),w("contributors")),U=((0,E.P1)((function(e){return e}),(0,E.P1)(L,A.kf),(function(e,t){return(0,i.Z)((0,r.Z)({},t),{items:t.items||[]})})),(0,E.P1)((function(e,t){var n=t.id;return e.topic.intro[n]}),(function(e){return e&&e.abstract}))),F=((0,E.P1)([U,function(e,t){return t}],(function(e,t){var n=t.sid;return e.filter((function(e){return e.sid!==n}))})),(0,E.P1)([U,function(e,t){return t}],(function(e,t){return t.rank.map((function(t){return e.find((function(e){return e.sid===t}))}))})),(0,E.P1)(b,I,S,(function(e,t,n){return e&&t&&n})),(0,E.P1)(y,(function(e){if(e.showIntro)return!0;var t=e&&e.meta&&e.meta.category;return Boolean(t)&&(["variety_show","tv","movie","book","game"].includes(t)||t.startsWith("n_"))})),n(62485)),M=n(70175),G=n(40198),z=(0,g.FH)("topic",["GET","GET_VOTE","CREATE","GET_STICKY","GET_INTRO","GET_INDEX","GET_TOP","GET_HOT","GET_NEWEST","GET_ESSENCE_STICKY","UPDATE_ESSENCE_STICKY","GET_UNANSWERED","GET_QUESTIONS","GET_PIN","GET_PARENT","GET_CHILDREN","GET_BESTANSWERERS","GET_WIKI_META","GET_WIKI_EDIT_INFO","GET_COMMITTED_WIKI","VOTE_WIKI","GET_FOLLOWERS","GET_CONTRIBUTORS","UPDATE_FOLLOW","UPDATE_BIO","UPDATE","UPDATE_INTRO","GET_META_CATEGORIES","GET_META_CATEGORY","CREATE_META","UPDATE_META","GET_META","UPDATE_TOPIC_CONTRIBUTOR_FOLLOWERS","GET_CREATOR_WALL","GET_CREATOR_WALL_ENTRY","GET_CREATOR_WALL_USER_INFO","UPDATE_VOTE_TOPIC","COMMIT_WIKI","CREATE_ABSTRACT","UPDATE_ABSTRACT_RANK","DELETE_ABSTRACT","GET_LANDING_BASIC_DATA","GET_LANDING_EXCELLENT_ITEMS","GET_LANDING_EXCELLENT_EDITORS","GET_LANDING_CATALOG","GET_LANDING_ENTRIES","APPLY_LANDING_PERMISSION"]);function H(e,t){return{id:e,API:{types:z.GET,endpoint:"topics/".concat(e),query:{include:t},root:"".concat(M.Z.fetchRoot.www,"/api/v5.1/")},UPDATE:{success:function(t){return(0,o.Z)({},"topics",(0,o.Z)({},e,function(e,t){var n,o,a=t.include,c=(void 0===a?{}:a).vote,s=t.permission,u=void 0===s?{}:s,l=u.isMetaEditable,d=u.isIndexEditable,p=u.viewCommit,h=u.editBaike,f=u.createBaike,m=u.addMoreInfo,v=t.include,g=void 0===v?{}:v,E=g.vote,T=void 0===E?{}:E,C=T.score,A=T.disliked,_=T.liked,y=g.meta,S=void 0===y?{}:y,I=t.excerpt,b=void 0===I?"":I,w=t.introduction,R=void 0===w?"":w,N=t.wikiDescription,O=void 0===N?"":N,D=t.name,B=void 0===D?"":D,P=t.subtitle,k=void 0===P?"":P,x=t.avatarUrl,L=t.pubInfo,U=void 0===L?{}:L,F=U.status,M=U.pubDate,G=t.themeConfig,z=(void 0===G?{}:G).avatarStyle;if(e===Z)return(0,i.Z)((0,r.Z)({},t),{relationship:{isMetaEditable:l},vote:(0,i.Z)((0,r.Z)({},c),{ratio:C,status:(n=A,o=_,n?"dislike":o?"like":"none")}),headerCard:{description1:b,description2:R,wikiDescription:O,title:B,subtitle:k,avatarUrl:x,pubInfo:{status:F,pubDate:M},config:{avatarType:z}},meta:S,isIndexEditable:d,viewCommit:p,editBaike:h,createBaike:f,addMoreInfo:m})}("topicBasicMessage",t)))}}}}function q(e){return H(e,"introduction,questions_count,best_answers_count,followers_count,is_following,header_card")}var V=/创建 ([\w\W]*) 话题/;function X(e){return V.test(e)?X(e.match(V)[1]):e}function W(e){return{API:{types:z.CREATE,endpoint:"/topics",method:"POST",body:{name:X(e)}},NOTIFICATION:{failure:function(t){if(269===t.code){var n={message:"我想要创建「".concat(e,"」话题，系统提示被暂停使用，需要恢复")};return(0,F.t)((0,f.BX)("div",{children:["该话题被暂停使用，请",(0,f.tZ)("a",{style:{color:"#3e7ac2"},href:"//".concat(M.Z.wwwHost,"/messages/3d198a56310c02c4a83efb9f4a4c027e?").concat(m.stringify(n)),children:"私信「知一声」"}),"申请恢复创建"]}),{delay:6e3}),!1}return!0}}}}function K(e,t){return{API:{types:z.UPDATE_BIO,endpoint:"/topics/".concat(e,"/bio"),body:(0,s.decamelizeKeys)({bio:t}),method:"PUT"},id:e,bio:t}}function j(e,t){return function(n,a){var c=a(),s=(0,G.ib)(c),u=y(c,{id:e}),l=(t=void 0===t?!u.isFollowing:t)?1:-1,d={request:{},failure:{}};return u&&(d.request.topics=(0,o.Z)({},e,{isFollowing:t}),d.failure.topics=(0,o.Z)({},e,u)),s&&(d.request.users=(0,o.Z)({},s.urlToken,{followingTopicCount:s.followingTopicCount+l}),d.failure.users=(0,o.Z)({},s.urlToken,s)),n((0,r.Z)((0,i.Z)((0,r.Z)({},s&&{urlToken:s.urlToken}),{topicId:e,UPDATE:d}),function(e,t){return{API:{types:z.UPDATE_FOLLOW,endpoint:"topics/".concat(e,"/followers"),method:t?"POST":"DELETE"}}}(e,t)))}}function Y(e,t){var n=t.resource,o=t.endpoint,a=t.types,c=t.query,s="".concat(M.Z.fetchRoot.www,"/api");return{id:e,API:(0,i.Z)((0,r.Z)({types:a},o?{root:s,endpoint:o}:{root:s,endpoint:"/v5.1/topics/".concat(e,"/feeds/").concat(n),query:{include:"data[?(target.type=topic_sticky_module)].target.data[?(target.type=answer)].target.content,relationship.is_authorized,is_author,voting,is_thanked,is_nothelp;data[?(target.type=topic_sticky_module)].target.data[?(target.type=answer)].target.is_normal,comment_count,voteup_count,content,relevant_info,excerpt.author.badge[?(type=best_answerer)].topics;data[?(target.type=topic_sticky_module)].target.data[?(target.type=article)].target.content,voteup_count,comment_count,voting,author.badge[?(type=best_answerer)].topics;data[?(target.type=topic_sticky_module)].target.data[?(target.type=people)].target.answer_count,articles_count,gender,follower_count,is_followed,is_following,badge[?(type=best_answerer)].topics;data[?(target.type=answer)].target.annotation_detail,content,hermes_label,is_labeled,relationship.is_authorized,is_author,voting,is_thanked,is_nothelp,answer_type;data[?(target.type=answer)].target.author.badge[?(type=best_answerer)].topics;data[?(target.type=answer)].target.paid_info;data[?(target.type=article)].target.annotation_detail,content,hermes_label,is_labeled,author.badge[?(type=best_answerer)].topics;data[?(target.type=question)].target.annotation_detail,comment_count;"}}),{query:c}),schema:v.l.TOPIC_FEED_ARRAY}}function Q(e,t){return function(n,o){return function(r,i){var a=(e(i(),{id:n})||{}).next,c=o||{},s=c.offset,u=c.limit;return r(t(n,s||!a?{offset:s,limit:u}:{endpoint:a}))}}}Q(N,(function(e,t){return Y(e,(0,i.Z)((0,r.Z)({},t),{resource:"top_activity",types:z.GET_TOP}))})),Q(O,(function(e,t){return Y(e,(0,i.Z)((0,r.Z)({},t),{resource:"essence",types:z.GET_HOT}))})),Q(D,(function(e,t){return Y(e,(0,i.Z)((0,r.Z)({},t),{resource:"timeline_activity",types:z.GET_NEWEST}))})),Q(B,(function(e,t){return Y(e,(0,i.Z)((0,r.Z)({},t),{resource:"top_question",types:z.GET_UNANSWERED}))})),Q(P,(function(e,t){return Y(e,(0,i.Z)((0,r.Z)({},t),{resource:"new_question",types:z.GET_QUESTIONS}))})),Q(k,(function(e,t){return Y(e,(0,i.Z)((0,r.Z)({},t),{resource:"pin-new",types:z.GET_PIN,query:{offset:0,limit:30}}))})),Q(x,(function(e,t){var n=t.offset,o=t.limit,i=void 0===o?20:o,a=t.endpoint;return{id:e,API:(0,r.Z)({types:z.GET_FOLLOWERS},a?{endpoint:a}:{endpoint:"topics/".concat(e,"/followers"),query:{offset:n,limit:i,include:["data[*].gender","answer_count","articles_count","follower_count","is_following","is_followed"].join(",")}}),offset:n,limit:i,schema:v.l.USER_ARRAY}})),Q(L,(function(e,t){var n=t.offset,o=t.limit,i=void 0===o?20:o,a=t.endpoint;return{id:e,API:(0,r.Z)({types:z.GET_CONTRIBUTORS},a?{endpoint:a}:{endpoint:"topics/".concat(e,"/contributors"),query:{offset:n,limit:i,include:["data[*].gender","is_following","is_followed"].join(",")}}),offset:n,limit:i,schema:v.l.USER_ARRAY}}));var J=function(e){var t=e.topicId,n=e.type,o=e.token,r=e.content;return{API:{endpoint:"/topics/".concat(t,"/abstract"),types:z.CREATE_ABSTRACT,method:"POST",body:(0,s.decamelizeKeys)({type:n,token:o,content:r})},NOTIFICATION:{success:"操作成功",failure:function(e){return e.message}}}};var $,ee=Object.prototype.hasOwnProperty;function te(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(n.type===e){var i=n.payload,a=n.id;return(0,r.Z)({},t,i.data?(0,o.Z)({},a,{items:i.data,next:(i.paging||{}).next,isDrained:(i.paging||{}).isEnd}):(0,o.Z)({},a,n.result||i))}return t}}function ne(e){var t={isFetching:!1,isDrained:!1},n=function(e){return e.id},a=function(e,t){var n=e.discussItems,o=void 0===n?[]:n,r=(null==t?void 0:t.payload).data,i=o?r.filter((function(e){return!o.find((function(t){return p()(t,e)}))})):r;return{discussItems:o.concat(i),next:t.next}};return function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,u=n(s);switch(s.type){case e.request:return l()(c,(0,o.Z)({},u,(0,i.Z)((0,r.Z)({},t),{isFetching:!0})));case e.success:var d=n(s),p=(s.payload||{}).paging,h=p.isEnd,f=void 0!==h&&h,m=p.totals;return l()(c,(0,o.Z)({},d,(0,i.Z)((0,r.Z)({},a(c[d],s)),{isFetching:!1,isDrained:f,totals:m})));case e.failure:return l()(c,(0,o.Z)({},u,{isFetching:!1,isDrained:!0}));default:return c}}}var oe=(0,c.combineReducers)(($={bios:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.Hp.GET_BIOS.request:return(0,i.Z)((0,r.Z)({},e),{isFetching:!0});case h.Hp.GET_BIOS.success:return t.payload.data.reduce((function(e,t){var n=t.topic.id,a=t.bio;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,a))}),(0,i.Z)((0,r.Z)({},e),{isFetching:!1}));case h.Hp.GET_BIOS.failure:return(0,i.Z)((0,r.Z)({},e),{isFetching:!1});case z.UPDATE_BIO.success:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.id,t.bio));default:return e}},hot:ne(z.GET_HOT),newest:ne(z.GET_NEWEST),top:(0,A.QT)(z.GET_TOP),sticky:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===z.GET_ESSENCE_STICKY.success?t.payload||null:e},pin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id;switch(t.type){case z.GET_PIN.success:return(0,o.Z)({},n,(0,i.Z)((0,r.Z)({data:t.result},e[n]),{isFetching:!1,isDrained:!0}));case z.GET_PIN.request:return(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{isFetching:!0,isDrained:!0}));default:return e}},unanswered:(0,A.QT)(z.GET_UNANSWERED),questions:(0,A.QT)(z.GET_QUESTIONS),followers:(0,A.QT)(z.GET_FOLLOWERS),contributors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.payload,a=t.id;switch(t.type){case z.GET_CONTRIBUTORS.request:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,(0,i.Z)((0,r.Z)({},e[a]),{isFetching:!0,isDrained:!1})));case z.GET_CONTRIBUTORS.success:return(0,r.Z)({},e,n.data?(0,o.Z)({},a,{items:n.data,next:(n.paging||{}).next,isDrained:(n.paging||{}).isEnd,isFetching:!1}):(0,o.Z)({},a,t.result||n));case z.GET_CONTRIBUTORS.failure:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,(0,i.Z)((0,r.Z)({},e[a]),{isFetching:!1,isDrained:!0})));case z.UPDATE_TOPIC_CONTRIBUTOR_FOLLOWERS.success:var c=t.userUrlToken,s=e[a].items,u=s.map((function(e){var t=e.author,n=e.author,o=n.urlToken,a=n.isFollowing;return o===c?(0,i.Z)((0,r.Z)({},e),{author:(0,i.Z)((0,r.Z)({},t),{isFollowing:!a})}):e}));return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},a,(0,i.Z)((0,r.Z)({},e[a]),{items:u})));default:return e}},parent:te(z.GET_PARENT.success),children:te(z.GET_CHILDREN.success),bestAnswerers:te(z.GET_BESTANSWERERS.success)},(0,o.Z)($,"wikiMeta",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id;switch(t.type){case z.GET_WIKI_META.success:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,t.payload));case z.VOTE_WIKI.success:var a=t.upVote,c=e[n],s=c.voteInfo.num;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{hasVoted:a,voteInfo:{num:a?s+1:s-1}})));default:return e}})),(0,o.Z)($,"index",te(z.GET_INDEX.success)),(0,o.Z)($,"intro",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,a=t.topicAbstract,c=t.topicRestAbstract,s=t.topicRankedAbstract,u=void 0===s?[]:s;switch(t.type){case z.GET_INTRO.success:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,t.payload));case z.DELETE_ABSTRACT.request:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{abstract:c})));case z.UPDATE_ABSTRACT_RANK.request:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{abstract:u})));case z.DELETE_ABSTRACT.failure:case z.UPDATE_ABSTRACT_RANK.failure:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},e[n]),{abstract:a})));default:return e}})),(0,o.Z)($,"meta",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.GET_META.success:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.id,t.payload.data));case z.UPDATE_META.success:var n=t.id,a=t.payload,c=e[n];return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,c.map((function(e){var t=e.target;if("Table"===t.type)return(0,i.Z)((0,r.Z)({},e),{target:(0,i.Z)((0,r.Z)({},e.target),{value:t.value.map((function(e){var t=(0,s.camelize)(e.target.name);return ee.call(a,t)?(0,i.Z)((0,r.Z)({},e),{target:(0,i.Z)((0,r.Z)({},e.target),{value:a[t].value})}):e}))})});if(Array.isArray(t))return(0,i.Z)((0,r.Z)({},e),{target:t.map((function(e){var t=(0,s.camelize)(e.target.name);return ee.call(a,t)?(0,i.Z)((0,r.Z)({},e),{target:(0,i.Z)((0,r.Z)({},e.target),{value:a[t].value})}):e}))});var n=(0,s.camelize)(t.name);return ee.call(a,n)?(0,i.Z)((0,r.Z)({},e),{target:(0,i.Z)((0,r.Z)({},e.target),{value:a[n].value})}):e}))));default:return e}})),(0,o.Z)($,"schema",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.GET_META_CATEGORIES.success:return(0,i.Z)((0,r.Z)({},e),{categories:t.payload.data});case z.GET_META_CATEGORY.success:return(0,i.Z)((0,r.Z)({},e),{category:(0,i.Z)((0,r.Z)({},e.category),(0,o.Z)({},t.category,t.payload.schema))});default:return e}})),(0,o.Z)($,"creatorWall",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.payload,c=t.id;if(t.type===z.GET_CREATOR_WALL.request)return l()(e,(0,o.Z)({},c,{paging:{loading:!0}}));if(t.type===z.GET_CREATOR_WALL.success){var s=e[c],u=void 0===s?{}:s,d=u.items,p=void 0===d?[]:d;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c,(0,i.Z)((0,r.Z)({},n),{items:(0,a.Z)(p).concat((0,a.Z)(t.result)),paging:(0,i.Z)((0,r.Z)({},n.paging),{loading:!1})})))}return e})),(0,o.Z)($,"wikiEditInfo",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,a=t.type,c=t.payload;if(a===z.GET_WIKI_EDIT_INFO.success){var s=c.canEdit,u=c.hasCommit;return void 0===s||void 0===u?e:(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,c))}return e})),(0,o.Z)($,"committedWiki",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,a=t.type,c=t.payload;if(a===z.GET_COMMITTED_WIKI.success){var s=c.data;return s?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,s)):e}return e})),(0,o.Z)($,"landingBasicData",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===z.GET_LANDING_BASIC_DATA.success?o:e})),(0,o.Z)($,"landingExcellentItems",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===z.GET_LANDING_EXCELLENT_ITEMS.success?o.excellentItems:e})),(0,o.Z)($,"landingExcellentEditors",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===z.GET_LANDING_EXCELLENT_EDITORS.success?o.editors:e})),(0,o.Z)($,"landingCatalog",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===z.GET_LANDING_CATALOG.success?o.data:e})),(0,o.Z)($,"landingEntries",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===z.GET_LANDING_ENTRIES.success?o:e})),$)),re=oe},73571:function(e,t,n){"use strict";n.d(t,{ZP:function(){return B},L$:function(){return C}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(52626),s=n(86473),u=n(70568),l=n(55270),d=n(44646),p=n.n(d),h=n(31922),f=n.n(h),m=function(e){var t=e.payloadOrigin,n=e.currentUser;if((0,l.isBrowser)()){var o=t.data.map((function(e){return e.target})).filter((function(e){return Boolean(e)}));p()(o,(function(e){return"".concat(e.type,"_").concat(e.id)})).length<o.length&&window.Raven.captureException(new Error("topstory recommend list duplication"),{extra:f()({payloadOrigin:t,currentUser:n},Boolean),level:"warning"})}},v=n(12856),Z=(n(15390),n(70175)),g=n(59083),E=n(60594),T=(n(92799),n(96053),(0,r.Z)({},(0,E.FH)("topstory",["GET_RECOMMEND","GET_FOLLOW","GET_FOLLOW_WONDERFUL","GET_ROOM","GET_ROOM_CHANNEL","GET_ASIDEDATA","UNINTEREST","UNINTEREST_REASONS","GET_ANNOUNCEMENT","GET_HOT_LIST_CATEGORIES","UPDATE_HOT_LIST_CATEGORIES","GET_HOT_LIST","GET_GUEST_FEEDS","GET_FOLLOW_EXTRA","GET_HOT_DAILY","GET_HOT_HIGHLIGHT","GET_BANNER","GET_COMMERCIAL_BANNER","GET_VIDEOS"]),(0,E.co)("topstory",["DIMISS_ANNOUNCEMENT","UPDATE_FOLLOW_COUNT","RESET_RECOMMEND","RESET_FOLLOW","RESET_FOLLOW_WONDERFUL","RESET_ROOM","RESET_HOT_LIST","CLEAR_VIDEOS"])));(0,o.Z)({},Z.Z.isMobileEntry?"mobile":"desktop",!0);function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"topstorys";return function(n,r){var i=r(),a=i.topstory,c=i.entities,s=a[t],u=s.sessionToken,l=s.items.find((function(t){return t.id===e})).schema,d="".concat(l,"s"),p=c[d][e],h=p.isUninterest,f=p.brief;return n(h?{type:T.UNINTEREST.request,UPDATE:{request:(0,o.Z)({},d,(0,o.Z)({},e,{isUninterest:!h}))}}:{API:{types:T.UNINTEREST,endpoint:"v3/feed/topstory/uninterestv2",body:(0,g.z)((0,v.decamelizeKeys)({itemBrief:f,sessionToken:u})),method:"POST"},UPDATE:{request:(0,o.Z)({},d,(0,o.Z)({},e,{isUninterest:!h,isDelete:"feed_advert"===p.type&&!h})),failure:(0,o.Z)({},d,(0,o.Z)({},e,p))}})}}var A=n(39);var _,y=(0,r.Z)({},(0,E.FH)("negativeFeedback",["NEGATIVE_FEEDBACK_UNINTERESTED","NEGATIVE_FEEDBACK_CONTENT"]));_={},["repeat","quality"].forEach((function(e){return _[e]=e}));var S=(0,c.combineReducers)({recommend:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isDrained:!1,afterId:0,items:[],next:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.GET_RECOMMEND.request:return(0,i.Z)((0,r.Z)({},e),{isFetching:!0});case T.GET_RECOMMEND.success:var n=t.result,o=t.isDrained,c=t.next,s=t.payloadOrigin,u=t.currentUser,d=e.items,p=n.filter((function(e){var t=e.id;return!d.find((function(e){return e.id===t}))}));m({payloadOrigin:s,currentUser:u});var h=(0,a.Z)(d).concat((0,a.Z)(p));return(0,i.Z)((0,r.Z)({},e),{isDrained:o,isFetching:!1,afterId:(h[h.length-1]||{}).id,items:h,next:c,sessionToken:t.payload.sessionToken,serverPayloadOrigin:(0,l.isBrowser)()?null:s});case T.GET_RECOMMEND.failure:return(0,i.Z)((0,r.Z)({},e),{isFetching:!1,isDrained:!0});case T.RESET_RECOMMEND:return{meta:{},isFetching:!1,isDrained:!1,afterId:0,items:[],next:null};default:return e}},follow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isDrained:!1,afterId:0,items:[],next:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.GET_FOLLOW.request:return(0,i.Z)((0,r.Z)({},e),{isFetching:!0});case T.GET_FOLLOW.success:var n=t.result,o=t.isDrained,c=t.next,s=e.items,u=n.filter((function(e){var t=e.id;return!s.find((function(e){return e.id===t}))})),l=(0,a.Z)(s).concat((0,a.Z)(u));return(0,i.Z)((0,r.Z)({},e),{isDrained:o,isFetching:!1,afterId:(l[l.length-1]||{}).id,items:l,next:c,sessionToken:t.payload.sessionToken});case T.GET_FOLLOW.failure:return(0,i.Z)((0,r.Z)({},e),{isFetching:!1,isDrained:!0});case T.RESET_FOLLOW:return{meta:{},isFetching:!1,isDrained:!1,afterId:0,items:[],next:null};default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{meta:{},isFetching:!1,afterId:0,items:[],next:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.GET_ROOM_CHANNEL.request:var n=t.meta;return(0,i.Z)((0,r.Z)({},{meta:{},isFetching:!1,isDrained:!1,afterId:0,items:[],next:null}),{isFetching:!0,meta:{roomId:n.roomId,channelId:null,channels:null}});case T.GET_ROOM_CHANNEL.success:var o=t.payload;return(0,i.Z)((0,r.Z)({},e),{isFetching:!1,meta:(0,i.Z)((0,r.Z)({},e.meta),{channels:o.data})});case T.GET_ROOM.request:var c=t.meta.channelId;return c!==e.meta.channelId?(0,i.Z)((0,r.Z)({},{meta:{},isFetching:!1,isDrained:!1,afterId:0,items:[],next:null}),{isFetching:!0,meta:(0,i.Z)((0,r.Z)({},e.meta),{channelId:c})}):(0,i.Z)((0,r.Z)({},e),{isFetching:!0});case T.GET_ROOM.success:var s=e.items,u=t.result,l=t.isDrained,d=t.next;if(t.meta.channelId!==e.meta.channelId)return e;var p=u.filter((function(e){var t=e.target.id;return!s.find((function(e){return e.target.id===t}))})),h=(0,a.Z)(s).concat((0,a.Z)(p));return(0,i.Z)((0,r.Z)({},e),{isDrained:l,isFetching:!1,items:h,next:d});case T.GET_ROOM.failure:return(0,i.Z)((0,r.Z)({},e),{isFetching:!1,isDrained:!0});case T.RESET_ROOM:return{meta:{},isFetching:!1,isDrained:!1,afterId:0,items:[],next:null};default:return e}},followWonderful:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isDrained:!1,afterId:0,items:[],next:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.GET_FOLLOW_WONDERFUL.request:return(0,i.Z)((0,r.Z)({},e),{isFetching:!0});case T.GET_FOLLOW_WONDERFUL.success:var n=t.result,o=t.isDrained,c=t.next,s=t.hasNew,u=e.items,l=n.filter((function(e){var t=e.id;return!u.find((function(e){return e.id===t}))})),d=(0,a.Z)(u).concat((0,a.Z)(l));return(0,i.Z)((0,r.Z)({},e),{isDrained:o,isFetching:!1,afterId:(d[d.length-1]||{}).id,items:d,next:c,sessionToken:t.payload.sessionToken,hasNew:s});case T.GET_FOLLOW_WONDERFUL.failure:return(0,i.Z)((0,r.Z)({},e),{isFetching:!1,isDrained:!0,hasNew:!0});case T.RESET_FOLLOW_WONDERFUL:return{meta:{},isFetching:!1,isDrained:!1,afterId:0,items:[],next:null};default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===T.GET_ASIDEDATA.success?t.payload:e},announcement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===T.GET_ANNOUNCEMENT.success&&t.payload?(0,i.Z)((0,r.Z)({},e),{data:t.payload}):t.type===T.DIMISS_ANNOUNCEMENT?(0,i.Z)((0,r.Z)({},e),{dimiss:!0}):e},hotList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=(t.payload||{}).data;return t.type===T.GET_HOT_LIST.success?n:t.type===T.RESET_HOT_LIST?[]:e},guestFeeds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isDrained:!1,afterId:0,items:[],next:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.GET_GUEST_FEEDS.request:return(0,i.Z)((0,r.Z)({},e),{isFetching:!0});case T.GET_GUEST_FEEDS.success:var n=t.result,o=t.isDrained,c=t.next,s=t.offset,u=e.items,l=n.slice(s||0).filter((function(e){var t=e.id;return!u.find((function(e){return e.id===t}))})),d=(0,a.Z)(u).concat((0,a.Z)(l));return(0,i.Z)((0,r.Z)({},e),{isDrained:o,isFetching:!1,afterId:(d[d.length-1]||{}).id,items:d,next:c,sessionToken:t.payload.sessionToken});case T.GET_GUEST_FEEDS.failure:return(0,i.Z)((0,r.Z)({},e),{isFetching:!1,isDrained:!0});default:return e}},followExtra:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isNewUser:null,isFetched:!1,followCount:0,followers:[]},t=arguments.length>1?arguments[1]:void 0;if(t.type===T.GET_FOLLOW_EXTRA.success){var n=t.payload,o=n.guideCard.styleType;return(0,i.Z)((0,r.Z)({},e),{isNewUser:"big"===o,isFetched:!0})}if(t.type===T.UPDATE_FOLLOW_COUNT){var c,s=t.payload.urlToken,u=e.followers,l=u.findIndex((function(e){return e===s}));return c=l>-1?u.filter((function(e){return e!==s})):(0,a.Z)(u).concat([s]),(0,i.Z)((0,r.Z)({},e),{followers:c,followCount:c.length})}return e},hotDaily:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[],paging:{}},t=arguments.length>1?arguments[1]:void 0;return t.type===T.GET_HOT_DAILY.success?t.payload:e},hotHighlight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,isDrained:!1,data:[],paging:{}},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;switch(n){case T.GET_HOT_HIGHLIGHT.request:case T.GET_HOT_HIGHLIGHT.failure:return(0,i.Z)((0,r.Z)({},e),{isFetching:t.type===T.GET_HOT_HIGHLIGHT.request});case T.GET_HOT_HIGHLIGHT.success:return(0,i.Z)((0,r.Z)({},e),{isFetching:!1,paging:t.payload.paging,data:(0,a.Z)(e.data).concat((0,a.Z)(o.data))});default:return e}},banner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;if(n===T.GET_BANNER.success){var c=t.meta.position;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},c,a.data))}return e},commercialBanner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1,banner:{},trackData:{}},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;if(n===T.GET_COMMERCIAL_BANNER.success){var a=(0,s.iL)((0,u.PO)({adjson:null==o?void 0:o.banner})),c=a.creative,l=void 0===c?{asset:{}}:c,d=a.ad,p=void 0===d?{}:d,h=p.id,f=p.template,m=void 0===f?"":f,v=p.impressionTracks,Z=void 0===v?[]:v,g=p.viewTracks,E=void 0===g?[]:g,C=p.clickTracks,A=void 0===C?[]:C,_="home_top_big_pc_template"===m?{impressionTracks:Z,viewTracks:E,clickTracks:A}:{},y=l.asset,S=y.imgs,I=void 0===S?[]:S,b=y.landingUrl,w=void 0===b?"":b,R=y.imgHue;return(0,i.Z)((0,r.Z)({},e),{show:"home_top_big_pc_template"===m,trackData:_,banner:{id:h,url:w,imageUrl:I[0],bgColor:R?"#".concat(R):"GBK99A"}})}return e},video:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],next:null,isLoading:!1,isDrained:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload,c=t.index;switch(n){case T.CLEAR_VIDEOS:return(0,i.Z)((0,r.Z)({},e),{items:[],isLoading:!1});case T.GET_VIDEOS.request:return(0,i.Z)((0,r.Z)({},e,t.clear&&{items:[]}),{isLoading:!0});case T.GET_VIDEOS.success:return(0,i.Z)((0,r.Z)({},e),{items:(0,a.Z)(e.items).concat((0,a.Z)(o.data)),next:o.paging.next,isDrained:o.paging.isEnd,isLoading:!1});case y.NEGATIVE_FEEDBACK_UNINTERESTED.success:case y.NEGATIVE_FEEDBACK_CONTENT.success:return(0,A.Uy)(e,(function(e){e.items[c]&&(e.items[c].blocked=t.blocked,e.items[c].blockedType=t.blockedType)}))}return e}}),I=n(65406),b=n(31995),w=n(75765);function R(e,t){var n=e.feeds[t.id],o=n.target,i=(e["".concat(o.schema,"s")]||{})[o.id];return null!=i?(0,r.Z)({},n,i&&{target:i}):n}function N(e,t,n){var o,a,c,s,u,d,p,h=t.id,f=t.schema;if("room"===n)return(0,i.Z)((0,r.Z)({},t),{target:(0,w.Hw)(e,t.target)});try{switch(f){case"actionCard":return a={id:h},c=(o=e).actionCards,s=o.topics,u=c[a.id],d=u.card,(p=u.card.topicList)?(0,i.Z)((0,r.Z)({},u),{card:(0,i.Z)((0,r.Z)({},d),{topicList:p.map((function(e){return s[e]}))})}):null;case"feed":return R(e,{id:h});case"feedAdvert":return function(e,t){return e.feedAdverts[t.id]}(e,{id:h});case"feedGroup":return function(e,t){var n=t.id,o=e.feedGroups,a=o&&o[n];return(0,i.Z)((0,r.Z)({},a),{list:a.list.map((function(t){return R(e,{id:t})}))})}(e,{id:h});default:return t}}catch(e){return(0,l.isBrowser)()&&window.Raven.captureException(e,{level:"warning",extra:t}),null}}var O={meta:{},isFetching:!1,items:[],isDrained:!1},D=function(e){return(0,b.Z)((function(t){return function(e,t){var n=e.topstory[t]||O,o=n.meta,i=n.isFetching,a=n.isDrained,c=n.items,s=n.serverPayloadOrigin;return(0,r.Z)({meta:o,isFetching:i,isDrained:a,items:c},"recommend"===t&&{serverPayloadOrigin:s,currentUser:e.currentUser})}(t,e)}),(function(e){return e.entities}),(function(t,n){return(0,i.Z)((0,r.Z)({},t),{items:t.items.map((function(t){return N(n,t,e)})).filter(Boolean)})}))};D("follow"),D("followWonderful"),D("recommend");(0,I.P1)((function(e){var t=e.topstory.guestFeeds||O;return{isFetching:t.isFetching,isDrained:t.isDrained,items:t.items}}),(function(e){return e.entities}),(function(e,t){return(0,i.Z)((0,r.Z)({},e),{items:e.items.map((function(e){return R(t,e)})).filter(Boolean)})}));var B=S},93442:function(e,t,n){"use strict";n.d(t,{Ix:function(){return f},ZP:function(){return m},x1:function(){return h}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(66681),s=n(12856),u=n(7187),l=(0,n(60594).FH)("upload",["IMAGE","VIDEO"]);function d(e,t){var n=new FormData;return"string"==typeof e?n.append("url",e):n.append("picture",e),t&&n.append("source",t),{API:{types:l.IMAGE,endpoint:"/uploaded_images",method:"POST",body:n,headers:{Accept:"application/json"},fetchOptions:{credentials:"include"}}}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;return(0,r.Z)({NOTIFICATION:"default"!==t&&{failure:"上传失败"},uploadId:t},d(e,n))}var h=(0,u.aF)(c.Z,!0),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",o=arguments.length>2?arguments[2]:void 0;return function(r){return"string"!=typeof e?h(e,o&&{source:o}).then((function(e){return r({type:l.IMAGE.success,uploadId:t,payload:(0,s.camelizeKeys)(e)})}),(function(i){if(n.g.raven){var c=new Error(i.message);c.name="UploadError",n.g.raven.captureException(c),n.g.raven.captureException(i)}return(0,u.aF)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(p.apply(void 0,(0,a.Z)(t)))}))(e,t,o)})):(0,u.aF)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(p.apply(void 0,(0,a.Z)(t)))}))(e,t,o)}};function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.IMAGE.request:case l.IMAGE.failure:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.uploadId,null));case l.IMAGE.success:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.uploadId,{url:t.payload.src,rawWidth:t.payload.dataRawwidth,rawHeight:t.payload.dataRawheight,id:t.payload.hash}));case l.VIDEO.request:case l.VIDEO.failure:return(0,i.Z)((0,r.Z)({},e),{video:null});case l.VIDEO.success:return(0,i.Z)((0,r.Z)({},e),{video:t.payload});default:return e}}},15799:function(e,t,n){"use strict";n.d(t,{Yr:function(){return c},ZP:function(){return u}});var o=n(88483),r=n(16600),i=n(60594),a=(0,o.Z)({},(0,i.FH)("userProfit",["GET_MEMBER_STATUS","UPDATE_MEMBER_STATUS","GET_USER_PROFIT_PERMISSION"]));function c(){return{API:{types:a.GET_USER_PROFIT_PERMISSION,endpoint:"mcn/permission/profit"}}}var s={permission:{permissionStatus:{zhiZixuan:0,recommend:-1,task:0,plugin:0,infinity:0},visible:!1}};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;return t.type===a.GET_USER_PROFIT_PERMISSION.success?(0,r.Z)((0,o.Z)({},e),{permission:t.payload}):e}},5625:function(e,t,n){"use strict";n.d(t,{KX:function(){return d},cw:function(){return u},np:function(){return l}});var o=n(71103),r=n(17907),i=n(15390),a=n(60594),c=n(24316),s=n(91355),u=(0,a.FH)("user",["UPDATE_FOLLOWERS","LOAD_USER_DMP_CROWD","RECOMMEND_FOLLOW_PEOPLE_TOPSTORY"]),l=function(e,t){var n=t.urlToken,o=t.id,r=e.entities.users,i=void 0===r?{}:r;return i[n||o]||i[Object.keys(i).find((function(e){return i[e].id===o}))]};new r.fK.Array(new r.fK.Object({actor:i.l.USER}));function d(e,t){return function(n,r){var i=r(),a=i.entities.users,l=i.currentUser,d=a[e]||{};if(d.isBlocked)return n((0,c.c0)(s.T$.blocked,"red"));var p,h,f=a[l],m=t?1:-1;return n({urlToken:l,userUrlToken:e,expect:t,API:{types:u.UPDATE_FOLLOWERS,endpoint:"members/".concat(e,"/followers"),method:t?"POST":"DELETE"},UPDATE:{request:{users:(p={},(0,o.Z)(p,d.urlToken,{followerCount:d.followerCount+m,isFollowing:t}),(0,o.Z)(p,f.urlToken,{followingCount:f.followingCount+m}),p)},failure:{users:(h={},(0,o.Z)(h,d.urlToken,d),(0,o.Z)(h,f.urlToken,f),h)},success:function(e){return{users:(0,o.Z)({},d.urlToken,e)}}}})}}},50647:function(e,t,n){"use strict";n.d(t,{Ty:function(){return p},ZP:function(){return f},hK:function(){return d},o2:function(){return l}});var o=n(71103),r=n(88483),i=n(16600),a=(n(55270),n(70175)),c=n(60594);var s="".concat(a.Z.fetchRoot.lens,"/api"),u=(0,r.Z)({},(0,c.FH)("VIDEO",["GET","GET_DETAILS","CREATE","GET_VIDEO_DEFAULT_COVER"]));function l(e){return{id:e,API:{types:u.GET,root:s,endpoint:"/embedded_videos/".concat(e)}}}function d(e){return{id:e,API:{types:u.GET_DETAILS,root:"".concat(a.Z.fetchRoot.lens,"/api/v4"),endpoint:"/videos/".concat(e)}}}function p(e){return{API:{types:u.CREATE,root:s,endpoint:"/embedded_videos",method:"POST",body:{url:e}}}}var h={data:{},shareVideoDetail:{},last:{}};function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.GET.success:return(0,i.Z)((0,r.Z)({},e),{data:(0,i.Z)((0,r.Z)({},e.data),(0,o.Z)({},t.id,t.payload))});case u.CREATE.success:return(0,i.Z)((0,r.Z)({},e),{data:(0,i.Z)((0,r.Z)({},e.data),(0,o.Z)({},t.payload.id,t.payload)),last:t.payload});case u.GET_DETAILS.success:return(0,i.Z)((0,r.Z)({},e),{shareVideoDetail:t.payload});default:return e}}},62704:function(e,t,n){"use strict";n.d(t,{gq:function(){return S},rn:function(){return m.rn},ZP:function(){return P},EB:function(){return w},KQ:function(){return b},ry:function(){return y},Xg:function(){return T},ub:function(){return C},nL:function(){return _},GC:function(){return A},__:function(){return R},O:function(){return N},jP:function(){return O},uw:function(){return I},cF:function(){return m.cF},fh:function(){return m.fh},kE:function(){return m.kE},oL:function(){return m.oL}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(12856),s=n(39),u=n(52626),l=n(72928),d=n.n(l),p=n(58220),h=n.n(p),f=n(60594),m=n(4163),v=n(17907),Z=new v.fK.Entity("zvideoContributions",{},{processStrategy:function(e){return(0,i.Z)((0,r.Z)({},e),{abnormalReason:e.abnormalReason||null})}}),g=new v.fK.Array(Z),E=(0,r.Z)({},(0,f.FH)("zvideoContribution",["LOAD_CONFIG","LOAD_CONTRIBUTION_LIST","LOAD_RECOMMEND_QUESTIONS","LOAD_QUESTION_SEARCH_RESULT","CREATE_CONTRIBUTION","LOAD_CONTRIBUTION","UPDATE_CONTRIBUTION","DELETE_CONTRIBUTION_DRAFT","DELETE_CONTRIBUTED_ANSWER","PUBLISH_CONTRIBUTIONS"]),(0,f.co)("zvideoContribution",["SELECT_CONTRIBUTION","SET_CAMPAIGN"])),T=function(e){var t=e.zvideoId,n=e.target,o=void 0===n?"answer":n,i=e.duration;return{meta:{zvideoId:t},API:{types:E.LOAD_CONFIG,endpoint:"/zvideo-contribute/zvideos/".concat(t,"/status"),query:(0,r.Z)({target:o},i&&{full_duration_millis:i})}}},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";return{meta:{zvideoId:e},API:{types:E.LOAD_CONTRIBUTION_LIST,endpoint:"zvideo-contribute/zvideos/".concat(e,"/contributions"),query:{scene:t}},schema:g}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.zvideoId,n=e.title,o=e.description,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e,a){var c=a().zvideos.contribution.recommendQuestions.paging.next,s=Boolean(c)&&!i;e({meta:{reload:i},API:(0,r.Z)({types:E.LOAD_RECOMMEND_QUESTIONS,endpoint:s?c:"/zvideo-contribute/contribute/question/recommend"},!s&&{query:{zvideo_id:t,title:n,description:o,limit:20}})})}},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,o){var i=o().zvideos.contribution.questionSearchResults.paging.next,a=Boolean(i)&&!t;n({meta:{reload:t},API:(0,r.Z)({types:E.LOAD_QUESTION_SEARCH_RESULT,endpoint:a?i:"/zvideo-contribute/contribute/question/search"},!a&&{query:{query:e,limit:20}})})}},y=function(e){return{API:{types:E.LOAD_CONTRIBUTION,endpoint:"/zvideo-contribute/contribute/".concat(e)},schema:Z}},S=function(e,t,n){return{meta:{zvideoId:e},API:{types:E.CREATE_CONTRIBUTION,endpoint:"/zvideo-contribute/contribute",method:"POST",body:(0,c.decamelizeKeys)((0,r.Z)({zvideoId:e},d()(t,["target.parentObject.title"]),n&&{full_duration_millis:n}))},UPDATE:{success:function(e){var n=e.id;return{zvideoContributions:(0,o.Z)({},n,(0,r.Z)({status:0,id:n},t))}}}}},I=function(e,t){return{API:{types:E.UPDATE_CONTRIBUTION,endpoint:"/zvideo-contribute/contribute/".concat(e),method:"PUT",body:(0,c.decamelizeKeys)(t)},UPDATE:{success:{zvideoContributions:(0,o.Z)({},e,t)}}}},b=function(e,t){return{meta:{zvideoId:e,contributionId:t},API:{types:E.DELETE_CONTRIBUTION_DRAFT,endpoint:"/zvideo-contribute/contribute/".concat(t),method:"DELETE"}}},w=function(e,t,n){return{meta:{zvideoId:e,contributionId:t},API:{types:E.DELETE_CONTRIBUTED_ANSWER,endpoint:"/answers/".concat(n),method:"DELETE"}}},R=function(e){return function(t,n){var o,r=null===(o=(0,m.JG)(n(),e))||void 0===o?void 0:o.filter((function(e){return 0===e.status})).map((function(e){return e.id}));return(null==r?void 0:r.length)?t({API:{types:E.PUBLISH_CONTRIBUTIONS,endpoint:"/zvideo-contribute/contribute/publish",method:"POST",body:{ids:r}}}):Promise.resolve()}},N=function(e){return{type:E.SELECT_CONTRIBUTION,payload:e}},O=function(e){return{type:E.SET_CAMPAIGN,payload:e}},D={isLoading:!0,paging:{isEnd:!1,isStart:!0,totals:0},data:[]},B=function(e,t){return(0,s.ZP)((function(n,o){var r=o.type,i=o.payload,c=o.meta;if(r===e.success){var s,u=t?t(i.data):i.data;n.isLoading=!1,n.paging=i.paging,(s=n.data).push.apply(s,(0,a.Z)(u))}r===e.failure&&(n.isLoading=!1,n.paging.isEnd=!0),r===e.request&&(n.isLoading=!0,c.reload&&Object.assign(n,D))}),D)},P=(0,u.combineReducers)({selectedContribution:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===E.SELECT_CONTRIBUTION?o:e},campaign:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,o=t.payload;return n===E.SET_CAMPAIGN?o:e},configs:(0,s.ZP)((function(e,t){var n=t.payload,o=t.type,r=t.meta;o===E.LOAD_CONFIG.success&&(e[r.zvideoId]=n)}),{}),contributionLists:(0,s.ZP)((function(e,t){var n=t.payload,o=t.type,r=t.meta,i=void 0===r?{}:r,a=i.zvideoId,c=i.contributionId,s=t.result;o===E.LOAD_CONTRIBUTION_LIST.success&&(e[a]=s),o===E.CREATE_CONTRIBUTION.success&&(e[a]?e[a].push(n.id):e[a]=[n.id]),o!==E.DELETE_CONTRIBUTION_DRAFT.success&&o!==E.DELETE_CONTRIBUTED_ANSWER.success||h()(e[a],c)}),{}),recommendQuestions:B(E.LOAD_RECOMMEND_QUESTIONS),questionSearchResults:B(E.LOAD_QUESTION_SEARCH_RESULT,(function(e){return e.map((function(e){return(0,i.Z)((0,r.Z)({},e.object),{highlight:e.highlight})}))}))})},4163:function(e,t,n){"use strict";n.d(t,{JG:function(){return c},cF:function(){return u},fh:function(){return l},hX:function(){return d},kE:function(){return h},oL:function(){return p},rn:function(){return f}});var o=n(52495),r=[],i={},a=function(e,t){return e.entities.zvideoContributions[t]},c=function(e,t){var n,o;return(null===(o=null===(n=e.zvideos)||void 0===n?void 0:n.contribution.contributionLists[t])||void 0===o?void 0:o.map((function(t){return a(e,t)})))||r},s=function(e){var t,n=null===(t=e.zvideos)||void 0===t?void 0:t.contribution.selectedContribution;return n?a(e,n):null},u=function(e){return(0,o.useSelector)((function(t){var n;return(null===(n=t.zvideos)||void 0===n?void 0:n.contribution.configs[e])||i}))},l=function(e){return(0,o.useSelector)((function(t){return c(t,e)}))},d=function(e){return(0,o.useSelector)((function(t){return function(e,t){var n,o;return null===(n=e.entities.zvideos[t])||void 0===n||null===(o=n.chapters)||void 0===o?void 0:o.map((function(e){var t=e.text;return{start_time:e.startTime,text:t}}))}(t,e)}))},p=function(){return(0,o.useSelector)(s)},h=function(){return(0,o.useSelector)((function(e){var t;return null===(t=e.zvideos)||void 0===t?void 0:t.contribution.campaign}))},f=function(e){var t;return null===(t=e.zvideos)||void 0===t?void 0:t.contribution.campaign}},32671:function(e,t,n){"use strict";n.d(t,{l0:function(){return K},ER:function(){return w},P6:function(){return q},ZP:function(){return Y},B$:function(){return j},b_:function(){return X},eJ:function(){return L},My:function(){return W},XT:function(){return V},zg:function(){return H},Hi:function(){return N},SL:function(){return b},qA:function(){return x},jl:function(){return z},Fn:function(){return _},SM:function(){return k},DQ:function(){return B},Es:function(){return P},dc:function(){return S},oi:function(){return F},W2:function(){return O},g$:function(){return M},MM:function(){return R},XD:function(){return U},qO:function(){return I}});var o=n(71103),r=n(88483),i=n(16600),a=n(61565),c=n(12856),s=n(49603),u=n.n(s),l=n(17907),d=(n(52495),n(52626)),p=n(15390),h=n(74480),f=n.n(h),m=n(70175),v=n(60594),Z=n(62704),g=(0,r.Z)({},(0,v.FH)("zvideoRecruit",["GET_FORM","POST_FORM"]));var E={form:{platform:"",nickname:"",followerCount:"",domain:"",contact:""},submited:!1,ranking:[]};var T=(0,r.Z)({},(0,v.FH)("zvideo",["GET","GET_INSERTABLE_ZVIDEOS","VOTE","LIKE","CHANGE_COMMENT_PERMISSION","TOGGLE_VISIBLE_STATUS","GET_DELETE_PROMPT_TEXT","REMOVE","GET_RECOMMENDATIONS","GET_CAMPAIGN","GET_CAMPAIGN_VIDEO","GET_CAMPAIGN_DETAIL","GET_CAMPAIGN_VIDEO_LIST","GET_TAGORE_CATEGORY","GET_TAGORE_RECOMMEND_CATEGORY","GET_MATCH_TOPIC","GET_CONTRIBUTABLE_ZVIDEO_CAMPAIGN","CREATE_DRAFT","GET_DRAFT","UPDATE_DRAFT","REMOVE_DRAFT","PUBLISH_DRAFT","PUBLISH_SCHEDULED_DRAFT","GET_ZVIDEO_BANNERS","GET_ZVIDEO_CLUB","UPDATE_ZVIDEO_UPLOAD_FEEDBACK","SYNC_TO_CLUB","GET_QY_ACTIVITY","GET_TALK_ACTIVITY","GET_PARTY2022_ACTIVITY","GET_BATCHVIDEOS","GET_PUBLISH_LIMIT","LOAD_CREATION_REFERENCES","GET_SIMILAR_ZVIDEOS","GET_ZVIDEO_COLLECTION_LIST","GET_STICKY_PAGE_CONTENT","TOGGLE_ALLOW_STATUS","GET_COOP_AUTH","GET_IS_READ_PROTOCOL","AGREE_COOP_PROTOCOL","GET_COLLECT_LIST","CHECK_STICKY_LINK","GET_VIDEO_SOURCE"])),C=new l.fK.Union({answer:p.l.ANSWER,zvideo:p.l.ZVIDEO},(function(e){var t=e.type;return(0,c.camelize)(t)})),A=new l.fK.Array(C);function _(){return function(e,t){var n=(t().zvideos.insertable||{}).paging;return e({API:{types:T.GET_INSERTABLE_ZVIDEOS,endpoint:(null==n?void 0:n.next)||"/zvideos/insertable"}})}}var y=new l.fK.Entity("zvideos",{author:p.l.USER,creationRelationship:{coCreation:{refTo:{contents:[{answer:{author:p.l.USER},article:{author:p.l.USER}}]}}}},{idAttribute:function(e){return"zvideo_answer"===e.type?"zvideo_answer:".concat(e.id,":").concat(e.video.videoId):"zvideo_article"===e.type?"zvideo_article:".concat(e.id,":").concat(e.video.videoId):e.id?e.id:e.zvideoId}});function S(e){return{API:{types:T.GET,endpoint:"zvideos/".concat(e),query:{include:f()({reaction_instruction:!0,contribute:!0,creation_relationship:!0,ip_info:!0})}},schema:y}}function I(e,t){return function(n,a){var c={API:{types:T.VOTE,method:"POST",endpoint:"zvideos/".concat(e,"/voters"),body:{voting:t},fetchOptions:{zsSignature:!0}}},s=a().entities.zvideos[e];if(s){var u,l=1===t?1:1===s.voting?-1:0;c=(0,i.Z)((0,r.Z)({},c),{UPDATE:{success:{zvideos:(0,o.Z)({},e,{voting:t,voteupCount:(null!==(u=s.voteupCount)&&void 0!==u?u:s.voteCount)+l})}}})}return n(c)}}function b(e,t){return function(n,a){var c={API:{types:T.LIKE,method:t?"POST":"DELETE",endpoint:"zvideos/".concat(e,"/likers"),fetchOptions:{zsSignature:!0}}},s=a().entities.zvideos[e];return s&&(c=(0,i.Z)((0,r.Z)({},c),{UPDATE:{success:{zvideos:(0,o.Z)({},e,{isLiked:t,likedCount:s.likedCount+t?1:0})}}})),n(c)}}function w(e,t){return function(n,a){var s,u={API:{types:T.CHANGE_COMMENT_PERMISSION,method:"PUT",endpoint:"zvideos/".concat(e,"/comment_permission"),body:(0,c.decamelizeKeys)({commentPermission:t}),fetchOptions:{zsSignature:!0}}};return(null===(s=a().entities.zvideos)||void 0===s?void 0:s[e])&&(u=(0,i.Z)((0,r.Z)({},u),{UPDATE:{success:{zvideos:(0,o.Z)({},e,{commentPermission:t})}}})),n(u)}}function R(e){return function(t,n){var a=n().entities.zvideos[e],s=!a.isVisible,u={API:{types:T.TOGGLE_VISIBLE_STATUS,method:"PUT",endpoint:"zvideos/".concat(e,"/is_visible"),body:(0,c.decamelizeKeys)({isVisible:s}),fetchOptions:{zsSignature:!0}}};return a&&(u=(0,i.Z)((0,r.Z)({},u),{UPDATE:{success:{zvideos:(0,o.Z)({},e,{isVisible:s})}}})),t(u)}}function N(e){return{API:{types:T.GET_DELETE_PROMPT_TEXT,endpoint:"zvideos/".concat(e,"/delete-prompt")},FAILSAFE:!0}}function O(e){return{API:{types:T.REMOVE,method:"DELETE",endpoint:"zvideos/".concat(e),fetchOptions:{zsSignature:!0}}}}var D=[{title:"热门",name:"hot"},{title:"最新",name:"latest"}];function B(){return{API:{types:T.GET_TAGORE_CATEGORY,endpoint:"/tagore/categories/tree"}}}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.title,o=e.content;return{API:{types:T.GET_TAGORE_RECOMMEND_CATEGORY,endpoint:"/tagore/categories/recommend",query:(0,c.decamelizeKeys)({type:t,title:n,content:o})}}}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.text,o=e.offset,r=void 0===o?0:o,i=e.limit,a=e.firstLevelCategoryId,s=e.secondLevelCategoryId;return{API:{types:T.GET_MATCH_TOPIC,endpoint:"/recommendations/match-topics",query:(0,c.decamelizeKeys)({type:t,text:n,offset:r,limit:i,firstLevelCategoryId:a,secondLevelCategoryId:s})}}}function x(){return{API:{types:T.GET_CONTRIBUTABLE_ZVIDEO_CAMPAIGN,endpoint:"/contributable_zvideo_campaigns?limit=500"}}}function L(e){return{API:{types:T.GET_DRAFT,endpoint:"zvideos/drafts/".concat(e),method:"GET"}}}function U(e,t){return{API:{types:T.UPDATE_DRAFT,endpoint:"zvideos/drafts/".concat(e),method:"PATCH",body:(0,c.decamelizeKeys)(t)}}}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{API:{types:T.PUBLISH_DRAFT,endpoint:"zvideos/".concat(e,"/actions/publish"),method:"POST",body:(0,c.decamelizeKeys)(t)}}}var M=function(e,t){return{API:{types:T.SYNC_TO_CLUB,method:"POST",endpoint:"clubs/zvideos/".concat(e,"/sync_club"),body:{club_id:t}}}};var G=new l.fK.Object({authors:new l.fK.Array(new l.fK.Object({author:p.l.USER}))}),z=function(e){return{meta:{id:e},API:{types:T.LOAD_CREATION_REFERENCES,endpoint:"zvideos/".concat(e,"/creation-references")},schema:G}};function H(e){return function(t,n){var o=e.collection_id,r=(function(e,t){return e.zvideos.zvideoCollection[t]}(n(),o)||{}).paging;return t({meta:{id:o},API:{types:T.GET_ZVIDEO_COLLECTION_LIST,method:"POST",body:e,endpoint:(null==r?void 0:r.next)||"zvideo-collections/feeds",query:{limit:6,include:"answer"}},schema:A})}}var q=function(e){return{API:{types:T.CHECK_STICKY_LINK,method:"GET",endpoint:"/creation-relationship/content/qualification/v2",query:{text:e}}}},V=function(e){var t=e.type,n=e.id,o="",i="",a={};return"article"===t?(o="articles/".concat(n),i=m.Z.fetchRoot.zhuanlan,a={fetchOptions:{credentials:"include"}}):"answer"===t&&(o="answers/".concat(n),i="/api/v4/",a={query:{include:["thumbnail_info","is_visible","paid_info","paid_info_content","admin_closed_comment","reward_info","annotation_action","annotation_detail","collapse_reason","is_normal","is_sticky","collapsed_by","suggest_edit","comment_count","can_comment","content","editable_content","voteup_count","reshipment_settings","comment_permission","created_time","updated_time","review_info","relevant_info","question","excerpt","attachment","relationship.is_authorized","voting","is_thanked","is_author","is_nothelp","is_recognized","is_labeled;mark_infos[*].url;author.vip_info","badge[*].topics;settings.table_of_content.enabled"].join(",")}}),{API:(0,r.Z)({types:T.GET_STICKY_PAGE_CONTENT,endpoint:o,root:i},a)}};function X(){return{API:{types:T.GET_COOP_AUTH,endpoint:"creation-relationship/creator/qualification",method:"GET"}}}function W(){return{API:{types:T.GET_IS_READ_PROTOCOL,endpoint:"creation-relationship/cocreation/agreement",method:"GET"}}}function K(){return{API:{types:T.AGREE_COOP_PROTOCOL,endpoint:"creation-relationship/cocreation/set/agree",method:"POST"}}}function j(e){return function(t,n){if(0===n().zvideos.collectData.list.length&&!e||e)return t({API:{types:T.GET_COLLECT_LIST,method:"GET",endpoint:e||"creation-relationship/fav-list?".concat(new URLSearchParams({offset:0,limit:10}))}})}}var Y=(0,d.combineReducers)({campaignVideoList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===T.GET_CAMPAIGN_DETAIL.success){var n=t.meta.id,c=t.payload.tabList;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},t.payload),{zvideos:c.reduce((function(e,t){return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.tabId,{isLoading:!1,paging:{isEnd:!1,next:null},data:[]}))}),{})})))}if(t.type===T.GET_CAMPAIGN_VIDEO_LIST.request||t.type===T.GET_CAMPAIGN_VIDEO_LIST.failure){var s=t.meta,u=s.id,l=s.tabId,d=t.type===T.GET_CAMPAIGN_VIDEO_LIST.request;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},u,(0,i.Z)((0,r.Z)({},e[u]),{zvideos:(0,i.Z)((0,r.Z)({},e[u].zvideos),(0,o.Z)({},l,(0,i.Z)((0,r.Z)({},e[u].zvideos[l]),{isLoading:d})))})))}if(t.type===T.GET_CAMPAIGN_VIDEO_LIST.success){var p=t.meta,h=p.id,f=p.tabId,m=t.payload,v=m.paging,Z=m.data;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},h,(0,i.Z)((0,r.Z)({},e[h]),{zvideos:(0,i.Z)((0,r.Z)({},e[h].zvideos),(0,o.Z)({},f,(0,i.Z)((0,r.Z)({},e[h].zvideos[f]),{isLoading:!1,paging:v,data:(0,a.Z)(e[h].zvideos[f].data).concat((0,a.Z)(Z))})))})))}return e},campaigns:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===T.GET_CAMPAIGN.success){var n=t.meta.id;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},t.payload),{zvideos:D.reduce((function(e,t){return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.name,{isLoading:!1,paging:{isEnd:!1,next:null},data:[]}))}),{})})))}if(t.type===T.GET_CAMPAIGN_VIDEO.request||t.type===T.GET_CAMPAIGN_VIDEO.failure){var c=t.meta,s=c.id,u=c.typeName,l=t.type===T.GET_CAMPAIGN_VIDEO.request;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},s,(0,i.Z)((0,r.Z)({},e[s]),{zvideos:(0,i.Z)((0,r.Z)({},e[s].zvideos),(0,o.Z)({},u,(0,i.Z)((0,r.Z)({},e[s].zvideos[u]),{isLoading:l})))})))}if(t.type===T.GET_CAMPAIGN_VIDEO.success){var d=t.meta,p=d.id,h=d.typeName,f=t.payload,m=f.paging,v=f.data;return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},p,(0,i.Z)((0,r.Z)({},e[p]),{zvideos:(0,i.Z)((0,r.Z)({},e[p].zvideos),(0,o.Z)({},h,(0,i.Z)((0,r.Z)({},e[p].zvideos[h]),{isLoading:!1,paging:m,data:(0,a.Z)(e[p].zvideos[h].data).concat((0,a.Z)(v))})))})))}return e},tagoreCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(t.type===T.GET_TAGORE_CATEGORY.success){var n=t.payload.data;return Array.isArray(n)?n:[]}return e},recommendations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.GET_RECOMMENDATIONS.request:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.key,(0,i.Z)((0,r.Z)({},e[t.key]),{isLoading:!0})));case T.GET_RECOMMENDATIONS.success:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.key,(0,i.Z)((0,r.Z)({},e[t.key]),{isLoading:!1,paging:t.payload.paging,data:(0,a.Z)(e[t.key].data||[]).concat((0,a.Z)(t.payload.data))})));case T.GET_RECOMMENDATIONS.failure:return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.key,(0,i.Z)((0,r.Z)({},e[t.key]),{isLoading:!1})));default:return e}},insertable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.GET_INSERTABLE_ZVIDEOS.request:case T.GET_INSERTABLE_ZVIDEOS.failure:return(0,i.Z)((0,r.Z)({},e),{isLoading:t.type===T.GET_INSERTABLE_ZVIDEOS.request});case T.GET_INSERTABLE_ZVIDEOS.success:return(0,i.Z)((0,r.Z)({},e),{isLoading:!1,paging:t.payload.paging,data:u()(e.data,t.payload.data,"id")});default:return e}},recruit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;if(t.type===g.GET_FORM.success){var n=t.payload;e=(0,i.Z)((0,r.Z)({},e),{form:(0,r.Z)({},e.form,n),submited:!0})}return e},club:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.GET_ZVIDEO_CLUB.request:case T.GET_ZVIDEO_CLUB.failure:return(0,i.Z)((0,r.Z)({},e),{isLoading:t.type===T.GET_ZVIDEO_CLUB.request});case T.GET_ZVIDEO_CLUB.success:return(0,r.Z)((0,i.Z)((0,r.Z)({},e),{isLoading:!1}),t.payload);default:return e}},qyActivityData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===T.GET_QY_ACTIVITY.success?(0,r.Z)({},e,t.payload):e},talkActivityData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===T.GET_TALK_ACTIVITY.success?(0,r.Z)({},e,t.payload):e},party2022ActivityData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===T.GET_PARTY2022_ACTIVITY.success?(0,r.Z)({},e,t.payload):e},batchVideos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.meta,a=t.payload;return t.type===T.GET_BATCHVIDEOS.success?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,a)):e},contribution:Z.ZP,creationReferences:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===T.LOAD_CREATION_REFERENCES.success?(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},t.meta.id,t.result)):e},zvideoCollection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===T.GET_ZVIDEO_COLLECTION_LIST.request||t.type===T.GET_ZVIDEO_COLLECTION_LIST.failure){var n=t.meta.id,c=e[n]||{};return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},n,(0,i.Z)((0,r.Z)({},c),{isLoading:t.type===T.GET_ZVIDEO_COLLECTION_LIST.request})))}if(t.type===T.GET_ZVIDEO_COLLECTION_LIST.success){var s=t.meta.id,u=t.payload.paging,l=t.result,d=e[s]||{},p=d.items||[];return(0,i.Z)((0,r.Z)({},e),(0,o.Z)({},s,(0,i.Z)((0,r.Z)({},d),{paging:u,items:(0,a.Z)(p).concat((0,a.Z)(l)),isLoading:!1})))}return e},zvideoGrant:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===T.TOGGLE_ALLOW_STATUS.success?(0,r.Z)({},e,t.payload):e},collectData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,list:[]},t=arguments.length>1?arguments[1]:void 0;return t.type===T.GET_COLLECT_LIST.success?(0,r.Z)((0,i.Z)((0,r.Z)({},e),{isFetching:!1,list:e.list.concat(t.payload.data)}),t.payload.paging):t.type===T.GET_COLLECT_LIST.request||t.type===T.GET_COLLECT_LIST.failure?(0,i.Z)((0,r.Z)({},e),{isFetching:!0}):e},videoSource:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoaded:!1},t=arguments.length>1?arguments[1]:void 0;if(t.type===T.GET_VIDEO_SOURCE.success){var n=t.payload,o=n.topic,a=n.title;return o&&o.length>0&&o.map((function(e){return(0,i.Z)((0,r.Z)({},e),{urlToken:e.id})})),{isLoaded:!0,zvideoType:"original",title:a,topics:o}}return e}})},98454:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var o=n(21620),r=n(84421),i=n(88483),a=n(78724),c=n(32554),s=n(68562),u=n(87363),l=n(52495),d=n(48457),p=n(37015),h=n(91796),f=n(16600),m=n(74453);function v(){return n.e(6948).then(n.bind(n,56948))}function Z(e){return(0,s.tZ)(m.Z,(0,f.Z)((0,i.Z)({},e),{getComponent:v}))}var g=n(70530);var E=function(e){(0,r.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).handleSignFlowModalOpen=function(e){r.setState({signFlowModalType:e,signFlowModalShown:!0}),p.ZP.increment("logIn.modal.show.count",.001)},r.handleSignFlowModalClose=function(){var e=r.props.onClose;r.setState({signFlowModalShown:!1},(function(){"function"==typeof e&&e()})),p.ZP.increment("logIn.modal.close.count",.001)},r.handleLogin=function(e){var t=r.props.loginButton,n=void 0===t?{}:t,o=n.props&&n.props.onClick;"function"==typeof o&&o(e),r.handleSignFlowModalOpen("login")},r.handleRegister=function(e){var t=r.props.registerButton,n=t.props&&t.props.onClick;"function"==typeof n&&n(e),r.handleSignFlowModalOpen("register")},e.defaultType?r.state={signFlowModalType:e.defaultType,signFlowModalShown:!0}:(r.state={signFlowModalType:"initial",signFlowModalShown:!1},p.ZP.increment("logIn.modal.show.count",.001)),r}var l=n.prototype;return l.componentDidMount=function(){var e=this.props,t=e.supportedCountries,n=e.getSupportedCountries;(null==t?void 0:t.length)||n()},l.render=function(){var e=this,t=this.state,n=t.signFlowModalType,o=t.signFlowModalShown,r=this.props,c=r.loginButton,l=r.loginButtonWithZa,p=r.registerButton,h=r.children,f=r.wrapperClassName,m=(0,a.Z)(r,["loginButton","loginButtonWithZa","registerButton","children","wrapperClassName"]),v=(0,s.BX)(s.HY,{children:[(0,s.tZ)(Z,(0,i.Z)({signType:n,onClose:this.handleSignFlowModalClose},m)),(0,s.tZ)(g.A6,{})]});return(0,s.BX)("div",{className:f,children:[l&&(0,u.cloneElement)(l,{onClick:this.handleLogin}),c&&(0,s.tZ)(d.Wi,{zaType:"Button",zaText:"login",as:(0,u.forwardRef)((function(t,n){return(0,u.cloneElement)(c,{onClick:e.handleLogin,ref:n})}))}),p&&(0,u.cloneElement)(p,{onClick:this.handleRegister}),h,o&&v]})},n}(u.Component),T=(0,l.connect)((function(e){return{supportedCountries:e.sms.supportedCountries,showQrcodeFirst:!1}}),{getSupportedCountries:h.o})(E)},35435:function(e,t,n){"use strict";n.d(t,{Eh:function(){return s},dq:function(){return c}});var o=n(97645),r=n.n(o),i=n(37015),a="vIsZ";function c(e){e&&(r().set(a,null==e?void 0:e.isZombie),i.ZP.increment("logIn.zombieStatus.write.count"))}function s(){return r().get(a)||!1}},59184:function(e,t,n){"use strict";n.d(t,{Ho:function(){return f},w:function(){return m},ru:function(){return T}});var o=n(68562),r=n(87363),i=n(37148),a=n(70175),c=function(e){var t=e.onClose,n=e.shown,c=(0,r.useCallback)((function(){location.href="https://www.zhihu.com/authenticate/phone"}),[]),s=(0,r.useCallback)((function(){location.href="/authenticate/intro"}),[]);return(0,o.tZ)(i.Z,{title:"帐号实名制认证",onClose:t,size:a.Z.isMobileEntry?"fullPage":"default",children:n&&(0,o.BX)("div",{className:"RealNameModal",children:[(0,o.tZ)("p",{children:"根据相关法律法规，您需要完成真实身份核验后方可使用提问、回答、评论等功能。"}),(0,o.tZ)("p",{children:"你可选择以下任一方式完成实名认证。"}),(0,o.BX)("p",{children:["如有其它问题可私信联系"," ",(0,o.tZ)("a",{href:"https://www.zhihu.com/messages/-10029",children:"知乎管理员"})," ","进行咨询沟通"]}),(0,o.BX)("div",{className:"RealNameModal-buttonGroup",children:[(0,o.tZ)("div",{role:"button",tabIndex:0,onClick:c,children:"中国大陆手机号认证"}),(0,o.tZ)("div",{role:"button",tabIndex:0,onClick:s,children:"身份证件信息认证"})]})]})})},s=n(78194),u=n(61565),l=n(23323),d=n(47859),p=n(2421),h=(0,r.createContext)({}),f=function(e){var t=e.children,n=(0,p.Z)(["isRealname"]),i=(0,s.Z)((0,l.Z)(!1),2),a=i[0],c=i[1],f=(0,d.Z)((function(e){return function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];var i=(n||{}).isRealname;i?e.apply(void 0,(0,u.Z)(o)):c.on()}})),m=(0,d.Z)((function(){return c.off()})),v=(0,r.useMemo)((function(){return{realNameRequired:f,realNameModalShown:a,closeRealNameModal:m}}),[a]);return(0,o.tZ)(h.Provider,{value:v,children:t})},m=function(){var e=(0,p.Z)(["isRealname"]),t=(0,r.useContext)(h),n=t.closeRealNameModal,i=t.realNameModalShown,a=(e||{}).isRealname;return(0,o.tZ)(o.HY,{children:!1===a&&(0,o.tZ)(c,{onClose:n,shown:i})})},v=n(88483),Z=n(16600),g=n(77568),E=n.n(g),T=function(e){return E()((function(t){var n=(0,r.useContext)(h).realNameRequired;return(0,o.tZ)(e,(0,Z.Z)((0,v.Z)({},t),{realNameRequired:n}))}),e)}},95205:function(e,t,n){"use strict";var o=n(88483),r=n(39434),i=n.n(r),a=n(79617);t.Z=function(e,t){var n=Date.now(),r="com.zhihu.web",c=new(i())("SHA-1","TEXT");return c.setHMACKey("d1b964811afb40118a12068ff74a12f4","TEXT"),c.update(e),c.update(a.ym),c.update(r),c.update(String(n)),(0,o.Z)({clientId:a.ym,grantType:e,timestamp:n,source:r,signature:c.getHMAC("HEX")},t)}},39558:function(e,t,n){"use strict";n.d(t,{N:function(){return a},g:function(){return i}});var o=n(97645),r=n.n(o);function i(){return r().get("lastuser")||r().get("lastuser:email")}function a(e){r().set("lastuser",e)}},82706:function(e,t,n){"use strict";n.d(t,{ZP:function(){return a}});var o=n(57948);function r(e){location.href="".concat(e?"/signup":"/signin","?next=").concat(encodeURIComponent(location.pathname+location.search))}function i(e){o.Z.supportsAction("account/showLoginDialog").then((function(t){t?(0,o.Z)("account/showLoginDialog").dispatch({next:location.href}):location.href="zhihu://".concat(e?"signup":"signin","?next=").concat(encodeURIComponent(location.pathname+location.search))}))}function a(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?i(t):r(t)}},80869:function(e,t,n){"use strict";n.d(t,{uq:function(){return E},Vy:function(){return o.Z},$7:function(){return A},t:function(){return S},gl:function(){return I.g}});var o=n(98454),r=n(21620),i=n(84421),a=n(88483),c=n(16600),s=n(32554),u=n(68562),l=n(90674),d=n(47112),p=n.n(d),h=n(87363),f=n(37148),m=n(73464),v=n(70175),Z=n(82706),g=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).handleSignUp=function(){(0,Z.ZP)(e.props.isAppView,!0)},e.handleSignIn=function(){(0,Z.ZP)(e.props.isAppView)},e}return n.prototype.render=function(){var e=this.props,t=e.onClose,n=e.isAppView;return(0,u.tZ)(f.Z,{title:"注册/登录后即可继续操作",size:v.Z.isMobileEntry?"small":"default",className:p()("AppAuthentication",{"AppAuthentication--appView":n}),closeButton:!1,onClose:t,children:(0,u.BX)("div",{className:"AppAuthentication-buttonContainer",children:[!n&&(0,u.tZ)(m.ZP,{preset:"plain",className:"AppAuthentication-closeButton",onClick:t,"aria-label":"关闭",children:(0,u.tZ)(l.HN,{size:16,name:"remove"})}),!v.Z.isMobileEntry&&(0,u.tZ)(m.ZP,{className:"AppAuthentication-button",color:"blue",preset:"primary",onClick:this.handleSignUp,children:"注册"}),(0,u.BX)(m.ZP,(0,c.Z)((0,a.Z)({className:"AppAuthentication-button",onClick:this.handleSignIn},v.Z.isMobileEntry?{color:"blue",preset:"primary"}:{}),{children:[v.Z.isMobileEntry?"注册或":"","登录"]}))]})})},n}(h.Component),E=g,T=(n(59184),n(75926)),C=n.n(T),A=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){var e=this.context.handleBindPhoneModalToggle;return(0,u.tZ)(m.ZP,{css:{display:"inline-block",border:"none"},preset:"link",onClick:e,children:"激活帐号"})},n}(h.Component);A.contextTypes={handleBindPhoneModalToggle:C().func};var _=n(74453),y=function(){return Promise.all([n.e(9231),n.e(1717)]).then(n.bind(n,21717))},S=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n.prototype.render=function(){return(0,u.tZ)(_.Z,(0,a.Z)({getComponent:y},this.props))},n}(h.Component),I=n(39558)},64448:function(e,t,n){"use strict";var o=n(88483),r=n(16600),i=n(78724),a=n(68562),c=n(96323),s=n(41021);t.Z=function(e){var t=e.checked,n=e.children,u=(0,i.Z)(e,["checked","children"]);return(0,a.BX)(c.sN,(0,r.Z)((0,o.Z)({},u),{children:[(0,a.tZ)("span",{css:{display:"inline-block",width:24,marginLeft:-24},children:t&&(0,a.tZ)(s.Y,{text:!0,center:!0})}),n]}))}},12255:function(e,t,n){"use strict";n.d(t,{Ib:function(){return v}});var o=n(88483),r=n(16600),i=n(78724),a=n(78194),c=n(68562),s=n(69975),u=n(77568),l=n.n(u),d=n(87363),p=n(37694),h=n.n(p),f=n(48457),m=function(e){var t=e.zaType,n=e.extra,u=e.enabled,l=void 0!==u&&u,p=(0,i.Z)(e,["zaType","extra","enabled"]),h=(0,f.Q4)().trackEvent,m=(0,a.Z)((0,s.Z)(void 0,l),2),v=m[0],Z=m[1],g=(0,d.useRef)(!1),E=(0,d.useRef)(!1);return(0,d.useEffect)((function(){l&&(Z?g.current=!0:g.current&&!E.current&&(h({eventType:"SwipeUp",action:"ModuleDisappear",elementLocation:{type:t}},n),E.current=!0))}),[l,n,Z,h,t]),(0,c.tZ)("div",(0,r.Z)((0,o.Z)({},p),{ref:v}))},v=function(e){return function(t){return l()((function(n){var i=n.zaInfos,a=void 0===i?{}:i,s=n.shouldTrackDisappear,u=(0,d.useMemo)(h(),[]),l=s?{cardshow_session_id:u}:{};return(0,c.tZ)(f.eV,(0,r.Z)((0,o.Z)({},"function"==typeof e?e(n):e),{children:(0,c.tZ)(f.Wi,(0,r.Z)((0,o.Z)({zaType:"Card"},void 0!==a.index&&{view:{elementLocation:{card:{index:Number(a.index)}}}}),{extra:{configMap:l},children:(0,c.tZ)(m,{enabled:s,zaType:"Card",extra:{configMap:l},children:(0,c.tZ)(t,(0,o.Z)({},n))})}))}))}),t)}}},52495:function(e,t,n){e.exports=n(78485)(1085)},52626:function(e,t,n){e.exports=n(78485)(6498)},52028:function(e,t,n){e.exports=n(78485)(6624)},32096:function(e,t,n){e.exports=n(78485)(8307)},87363:function(e){"use strict";e.exports=React},61533:function(e){"use strict";e.exports=ReactDOM},37831:function(e){"use strict";e.exports=ReactDOMServer},78485:function(e){"use strict";e.exports=vendor_6e1ba06891b94309c860}},function(e){e.O(0,[620,2850,8885,3550,887,2397],(function(){return t=77722,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=column.app.a3b80d2becb7831f4cf3.js.map